\hypertarget{pa__dither_8c}{}\section{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/common/pa\+\_\+dither.c File Reference}
\label{pa__dither_8c}\index{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/common/pa\+\_\+dither.\+c@{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/common/pa\+\_\+dither.\+c}}


Functions for generating dither noise.  


{\ttfamily \#include \char`\"{}pa\+\_\+types.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+dither.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{pa__dither_8c_a1ef6e78befe9c76de7ef681ffe6595ae}{P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+}~(15)
\item 
\#define \hyperlink{pa__dither_8c_aa691c62aead466ca28bf49f9817415c8}{D\+I\+T\+H\+E\+R\+\_\+\+S\+H\+I\+F\+T\+\_\+}~((sizeof(\hyperlink{pa__types_8h_a0ee78118ce1421aba7239c18f0ceaa22}{Pa\+Int32})$\ast$8 -\/ \hyperlink{pa__x86__plain__converters_8c_a1ef6e78befe9c76de7ef681ffe6595ae}{P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+}) + 1)
\item 
\#define \hyperlink{pa__dither_8c_a7dc8d0b301da61f07045884875732694}{P\+A\+\_\+\+F\+L\+O\+A\+T\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+S\+C\+A\+L\+E\+\_\+}~(1.\+0f / ((1$<$$<$\+P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+)-\/1))
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{pa__dither_8c_a56ab7f8b545f2761b64aed643eeb61bb}{Pa\+Util\+\_\+\+Initialize\+Triangular\+Dither\+State} (\hyperlink{struct_pa_util_triangular_dither_generator}{Pa\+Util\+Triangular\+Dither\+Generator} $\ast$state)
\begin{DoxyCompactList}\small\item\em Initialize dither state. \end{DoxyCompactList}\item 
\hyperlink{pa__types_8h_a0ee78118ce1421aba7239c18f0ceaa22}{Pa\+Int32} \hyperlink{pa__dither_8c_aecfeaa283ba758ecf37ad8ffdbff9c9c}{Pa\+Util\+\_\+\+Generate16\+Bit\+Triangular\+Dither} (\hyperlink{struct_pa_util_triangular_dither_generator}{Pa\+Util\+Triangular\+Dither\+Generator} $\ast$state)
\begin{DoxyCompactList}\small\item\em Calculate 2 L\+SB dither signal with a triangular distribution. Ranged for adding to a 1 bit right-\/shifted 32 bit integer prior to $>$$>$15. eg\+: \end{DoxyCompactList}\item 
float \hyperlink{pa__dither_8c_aa97d6b36a088de07faad23fa3ae1ecaa}{Pa\+Util\+\_\+\+Generate\+Float\+Triangular\+Dither} (\hyperlink{struct_pa_util_triangular_dither_generator}{Pa\+Util\+Triangular\+Dither\+Generator} $\ast$state)
\begin{DoxyCompactList}\small\item\em Calculate 2 L\+SB dither signal with a triangular distribution. Ranged for adding to a pre-\/scaled float. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions for generating dither noise. 



\subsection{Macro Definition Documentation}
\index{pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}!D\+I\+T\+H\+E\+R\+\_\+\+S\+H\+I\+F\+T\+\_\+@{D\+I\+T\+H\+E\+R\+\_\+\+S\+H\+I\+F\+T\+\_\+}}
\index{D\+I\+T\+H\+E\+R\+\_\+\+S\+H\+I\+F\+T\+\_\+@{D\+I\+T\+H\+E\+R\+\_\+\+S\+H\+I\+F\+T\+\_\+}!pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}}
\subsubsection[{\texorpdfstring{D\+I\+T\+H\+E\+R\+\_\+\+S\+H\+I\+F\+T\+\_\+}{DITHER_SHIFT_}}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\+I\+T\+H\+E\+R\+\_\+\+S\+H\+I\+F\+T\+\_\+~((sizeof({\bf Pa\+Int32})$\ast$8 -\/ {\bf P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+}) + 1)}\hypertarget{pa__dither_8c_aa691c62aead466ca28bf49f9817415c8}{}\label{pa__dither_8c_aa691c62aead466ca28bf49f9817415c8}
\index{pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}!P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+@{P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+}}
\index{P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+@{P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+}!pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}}
\subsubsection[{\texorpdfstring{P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+}{PA_DITHER_BITS_}}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+~(15)}\hypertarget{pa__dither_8c_a1ef6e78befe9c76de7ef681ffe6595ae}{}\label{pa__dither_8c_a1ef6e78befe9c76de7ef681ffe6595ae}


Definition at line 54 of file pa\+\_\+dither.\+c.

\index{pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}!P\+A\+\_\+\+F\+L\+O\+A\+T\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+S\+C\+A\+L\+E\+\_\+@{P\+A\+\_\+\+F\+L\+O\+A\+T\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+S\+C\+A\+L\+E\+\_\+}}
\index{P\+A\+\_\+\+F\+L\+O\+A\+T\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+S\+C\+A\+L\+E\+\_\+@{P\+A\+\_\+\+F\+L\+O\+A\+T\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+S\+C\+A\+L\+E\+\_\+}!pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}}
\subsubsection[{\texorpdfstring{P\+A\+\_\+\+F\+L\+O\+A\+T\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+S\+C\+A\+L\+E\+\_\+}{PA_FLOAT_DITHER_SCALE_}}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+A\+\_\+\+F\+L\+O\+A\+T\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+S\+C\+A\+L\+E\+\_\+~(1.\+0f / ((1$<$$<$\+P\+A\+\_\+\+D\+I\+T\+H\+E\+R\+\_\+\+B\+I\+T\+S\+\_\+)-\/1))}\hypertarget{pa__dither_8c_a7dc8d0b301da61f07045884875732694}{}\label{pa__dither_8c_a7dc8d0b301da61f07045884875732694}


Definition at line 90 of file pa\+\_\+dither.\+c.



\subsection{Function Documentation}
\index{pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}!Pa\+Util\+\_\+\+Generate16\+Bit\+Triangular\+Dither@{Pa\+Util\+\_\+\+Generate16\+Bit\+Triangular\+Dither}}
\index{Pa\+Util\+\_\+\+Generate16\+Bit\+Triangular\+Dither@{Pa\+Util\+\_\+\+Generate16\+Bit\+Triangular\+Dither}!pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}}
\subsubsection[{\texorpdfstring{Pa\+Util\+\_\+\+Generate16\+Bit\+Triangular\+Dither(\+Pa\+Util\+Triangular\+Dither\+Generator $\ast$state)}{PaUtil_Generate16BitTriangularDither(PaUtilTriangularDitherGenerator *state)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pa\+Int32} Pa\+Util\+\_\+\+Generate16\+Bit\+Triangular\+Dither (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Util\+Triangular\+Dither\+Generator} $\ast$}]{dither\+State}
\end{DoxyParamCaption}
)}\hypertarget{pa__dither_8c_aecfeaa283ba758ecf37ad8ffdbff9c9c}{}\label{pa__dither_8c_aecfeaa283ba758ecf37ad8ffdbff9c9c}


Calculate 2 L\+SB dither signal with a triangular distribution. Ranged for adding to a 1 bit right-\/shifted 32 bit integer prior to $>$$>$15. eg\+: 


\begin{DoxyPre}
    signed long in = *
    signed long dither = PaUtil\_Generate16BitTriangularDither( ditherState );
    signed short out = (signed short)(((in>>1) + dither) >> 15);
\end{DoxyPre}
 \begin{DoxyReturn}{Returns}
A signed 32-\/bit integer with a range of +32767 to -\/32768 
\end{DoxyReturn}


Definition at line 65 of file pa\+\_\+dither.\+c.

\index{pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}!Pa\+Util\+\_\+\+Generate\+Float\+Triangular\+Dither@{Pa\+Util\+\_\+\+Generate\+Float\+Triangular\+Dither}}
\index{Pa\+Util\+\_\+\+Generate\+Float\+Triangular\+Dither@{Pa\+Util\+\_\+\+Generate\+Float\+Triangular\+Dither}!pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}}
\subsubsection[{\texorpdfstring{Pa\+Util\+\_\+\+Generate\+Float\+Triangular\+Dither(\+Pa\+Util\+Triangular\+Dither\+Generator $\ast$state)}{PaUtil_GenerateFloatTriangularDither(PaUtilTriangularDitherGenerator *state)}}]{\setlength{\rightskip}{0pt plus 5cm}float Pa\+Util\+\_\+\+Generate\+Float\+Triangular\+Dither (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Util\+Triangular\+Dither\+Generator} $\ast$}]{dither\+State}
\end{DoxyParamCaption}
)}\hypertarget{pa__dither_8c_aa97d6b36a088de07faad23fa3ae1ecaa}{}\label{pa__dither_8c_aa97d6b36a088de07faad23fa3ae1ecaa}


Calculate 2 L\+SB dither signal with a triangular distribution. Ranged for adding to a pre-\/scaled float. 


\begin{DoxyPre}
    float in = *
    float dither = PaUtil\_GenerateFloatTriangularDither( ditherState );
    // use smaller scaler to prevent overflow when we add the dither
    signed short out = (signed short)(in*(32766.0f) + dither );
\end{DoxyPre}
 \begin{DoxyReturn}{Returns}
A float with a range of -\/2.\+0 to +1.99999. 
\end{DoxyReturn}


Definition at line 93 of file pa\+\_\+dither.\+c.

\index{pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}!Pa\+Util\+\_\+\+Initialize\+Triangular\+Dither\+State@{Pa\+Util\+\_\+\+Initialize\+Triangular\+Dither\+State}}
\index{Pa\+Util\+\_\+\+Initialize\+Triangular\+Dither\+State@{Pa\+Util\+\_\+\+Initialize\+Triangular\+Dither\+State}!pa\+\_\+dither.\+c@{pa\+\_\+dither.\+c}}
\subsubsection[{\texorpdfstring{Pa\+Util\+\_\+\+Initialize\+Triangular\+Dither\+State(\+Pa\+Util\+Triangular\+Dither\+Generator $\ast$state)}{PaUtil_InitializeTriangularDitherState(PaUtilTriangularDitherGenerator *state)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} Pa\+Util\+\_\+\+Initialize\+Triangular\+Dither\+State (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Util\+Triangular\+Dither\+Generator} $\ast$}]{state}
\end{DoxyParamCaption}
)}\hypertarget{pa__dither_8c_a56ab7f8b545f2761b64aed643eeb61bb}{}\label{pa__dither_8c_a56ab7f8b545f2761b64aed643eeb61bb}


Initialize dither state. 



Definition at line 57 of file pa\+\_\+dither.\+c.

