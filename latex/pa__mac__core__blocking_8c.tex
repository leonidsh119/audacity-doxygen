\hypertarget{pa__mac__core__blocking_8c}{}\section{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/hostapi/coreaudio/pa\+\_\+mac\+\_\+core\+\_\+blocking.c File Reference}
\label{pa__mac__core__blocking_8c}\index{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/hostapi/coreaudio/pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/hostapi/coreaudio/pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
{\ttfamily \#include \char`\"{}pa\+\_\+mac\+\_\+core\+\_\+blocking.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+mac\+\_\+core\+\_\+internal.\+h\char`\"{}}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$libkern/\+O\+S\+Atomic.\+h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{portaudio_8h_a4949e4a8ef9f9dbe8cbee414ce69841d}{Pa\+Error} \hyperlink{pa__mac__core__blocking_8c_a3c33ab58f871d592bd90142fe5c0c5cd}{initialize\+Blio\+Ring\+Buffers} (\hyperlink{struct_pa_mac_blio}{Pa\+Mac\+Blio} $\ast$blio, \hyperlink{portaudio_8h_a4582d93c2c2e60e12be3d74c5fe00b96}{Pa\+Sample\+Format} input\+Sample\+Format, \hyperlink{portaudio_8h_a4582d93c2c2e60e12be3d74c5fe00b96}{Pa\+Sample\+Format} output\+Sample\+Format, size\+\_\+t frames\+Per\+Buffer, long ring\+Buffer\+Size, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} in\+Chan, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} out\+Chan)
\item 
\hyperlink{portaudio_8h_a4949e4a8ef9f9dbe8cbee414ce69841d}{Pa\+Error} \hyperlink{pa__mac__core__blocking_8c_aedd64041043bb6cba5713d9a12c26ebf}{reset\+Blio\+Ring\+Buffers} (\hyperlink{struct_pa_mac_blio}{Pa\+Mac\+Blio} $\ast$blio)
\item 
\hyperlink{portaudio_8h_a4949e4a8ef9f9dbe8cbee414ce69841d}{Pa\+Error} \hyperlink{pa__mac__core__blocking_8c_a96df2ab1655f2c2d1d524c7c960f8319}{destroy\+Blio\+Ring\+Buffers} (\hyperlink{struct_pa_mac_blio}{Pa\+Mac\+Blio} $\ast$blio)
\item 
\hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{pa__mac__core__blocking_8c_af2c9d8aead26742638f8cfb73f07ca8f}{Blio\+Callback} (\hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$input, \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$\hyperlink{mm_8c_aeb3fcf4ab0f02cc4420e5a97568a07ef}{output}, unsigned long frame\+Count, \hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} \hyperlink{struct_pa_stream_callback_time_info}{Pa\+Stream\+Callback\+Time\+Info} $\ast$time\+Info, \hyperlink{portaudio_8h_a55a005924bcfa0424594f4f65cd4ae82}{Pa\+Stream\+Callback\+Flags} status\+Flags, \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$\hyperlink{xmlparse_8c_a4b666535c828e23ccd16510a0a1a1943}{user\+Data})
\item 
\hyperlink{portaudio_8h_a4949e4a8ef9f9dbe8cbee414ce69841d}{Pa\+Error} \hyperlink{pa__mac__core__blocking_8c_a9e7f111c33d1e80f40473846864e84fa}{Read\+Stream} (\hyperlink{portaudio_8h_a19874734f89958fccf86785490d53b4c}{Pa\+Stream} $\ast$stream, \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$\hyperlink{structbuffer}{buffer}, unsigned long frames)
\item 
\hyperlink{portaudio_8h_a4949e4a8ef9f9dbe8cbee414ce69841d}{Pa\+Error} \hyperlink{pa__mac__core__blocking_8c_a0cfb7772846808945bd521d23d5626eb}{Write\+Stream} (\hyperlink{portaudio_8h_a19874734f89958fccf86785490d53b4c}{Pa\+Stream} $\ast$stream, \hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$\hyperlink{structbuffer}{buffer}, unsigned long frames)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{pa__mac__core__blocking_8c_af88e5ceb377195cb9086d88b990e4d8b}{wait\+Until\+Blio\+Write\+Buffer\+Is\+Flushed} (\hyperlink{struct_pa_mac_blio}{Pa\+Mac\+Blio} $\ast$blio)
\item 
signed long \hyperlink{pa__mac__core__blocking_8c_a82aa1e30985c7924247e8f45fc356d46}{Get\+Stream\+Read\+Available} (\hyperlink{portaudio_8h_a19874734f89958fccf86785490d53b4c}{Pa\+Stream} $\ast$stream)
\item 
signed long \hyperlink{pa__mac__core__blocking_8c_ad7ee6bd74b3109101f1eb4ca0514c8b0}{Get\+Stream\+Write\+Available} (\hyperlink{portaudio_8h_a19874734f89958fccf86785490d53b4c}{Pa\+Stream} $\ast$stream)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This file contains the implementation required for blocking I/O. It is separated from pa\+\_\+mac\+\_\+core.\+c simply to ease development. 

\subsection{Function Documentation}
\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!Blio\+Callback@{Blio\+Callback}}
\index{Blio\+Callback@{Blio\+Callback}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{Blio\+Callback(const void $\ast$input, void $\ast$output, unsigned long frame\+Count, const Pa\+Stream\+Callback\+Time\+Info $\ast$time\+Info, Pa\+Stream\+Callback\+Flags status\+Flags, void $\ast$user\+Data)}{BlioCallback(const void *input, void *output, unsigned long frameCount, const PaStreamCallbackTimeInfo *timeInfo, PaStreamCallbackFlags statusFlags, void *userData)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} Blio\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf const} {\bf void} $\ast$}]{input, }
\item[{{\bf void} $\ast$}]{output, }
\item[{unsigned long}]{frame\+Count, }
\item[{{\bf const} {\bf Pa\+Stream\+Callback\+Time\+Info} $\ast$}]{time\+Info, }
\item[{{\bf Pa\+Stream\+Callback\+Flags}}]{status\+Flags, }
\item[{{\bf void} $\ast$}]{user\+Data}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_af2c9d8aead26742638f8cfb73f07ca8f}{}\label{pa__mac__core__blocking_8c_af2c9d8aead26742638f8cfb73f07ca8f}


Definition at line 341 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!destroy\+Blio\+Ring\+Buffers@{destroy\+Blio\+Ring\+Buffers}}
\index{destroy\+Blio\+Ring\+Buffers@{destroy\+Blio\+Ring\+Buffers}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{destroy\+Blio\+Ring\+Buffers(\+Pa\+Mac\+Blio $\ast$blio)}{destroyBlioRingBuffers(PaMacBlio *blio)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pa\+Error} destroy\+Blio\+Ring\+Buffers (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Mac\+Blio} $\ast$}]{blio}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_a96df2ab1655f2c2d1d524c7c960f8319}{}\label{pa__mac__core__blocking_8c_a96df2ab1655f2c2d1d524c7c960f8319}


Definition at line 309 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!Get\+Stream\+Read\+Available@{Get\+Stream\+Read\+Available}}
\index{Get\+Stream\+Read\+Available@{Get\+Stream\+Read\+Available}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{Get\+Stream\+Read\+Available(\+Pa\+Stream $\ast$stream)}{GetStreamReadAvailable(PaStream *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}static signed long Get\+Stream\+Read\+Available (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Stream} $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_a82aa1e30985c7924247e8f45fc356d46}{}\label{pa__mac__core__blocking_8c_a82aa1e30985c7924247e8f45fc356d46}


Definition at line 575 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!Get\+Stream\+Write\+Available@{Get\+Stream\+Write\+Available}}
\index{Get\+Stream\+Write\+Available@{Get\+Stream\+Write\+Available}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{Get\+Stream\+Write\+Available(\+Pa\+Stream $\ast$stream)}{GetStreamWriteAvailable(PaStream *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}static signed long Get\+Stream\+Write\+Available (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Stream} $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_ad7ee6bd74b3109101f1eb4ca0514c8b0}{}\label{pa__mac__core__blocking_8c_ad7ee6bd74b3109101f1eb4ca0514c8b0}


Definition at line 585 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!initialize\+Blio\+Ring\+Buffers@{initialize\+Blio\+Ring\+Buffers}}
\index{initialize\+Blio\+Ring\+Buffers@{initialize\+Blio\+Ring\+Buffers}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{initialize\+Blio\+Ring\+Buffers(\+Pa\+Mac\+Blio $\ast$blio, Pa\+Sample\+Format input\+Sample\+Format, Pa\+Sample\+Format output\+Sample\+Format, size\+\_\+t frames\+Per\+Buffer, long ring\+Buffer\+Size, int in\+Chan, int out\+Chan)}{initializeBlioRingBuffers(PaMacBlio *blio, PaSampleFormat inputSampleFormat, PaSampleFormat outputSampleFormat, size_t framesPerBuffer, long ringBufferSize, int inChan, int outChan)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pa\+Error} initialize\+Blio\+Ring\+Buffers (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Mac\+Blio} $\ast$}]{blio, }
\item[{{\bf Pa\+Sample\+Format}}]{input\+Sample\+Format, }
\item[{{\bf Pa\+Sample\+Format}}]{output\+Sample\+Format, }
\item[{size\+\_\+t}]{frames\+Per\+Buffer, }
\item[{long}]{ring\+Buffer\+Size, }
\item[{{\bf int}}]{in\+Chan, }
\item[{{\bf int}}]{out\+Chan}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_a3c33ab58f871d592bd90142fe5c0c5cd}{}\label{pa__mac__core__blocking_8c_a3c33ab58f871d592bd90142fe5c0c5cd}


Definition at line 113 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!Read\+Stream@{Read\+Stream}}
\index{Read\+Stream@{Read\+Stream}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{Read\+Stream(\+Pa\+Stream $\ast$stream, void $\ast$buffer, unsigned long frames)}{ReadStream(PaStream *stream, void *buffer, unsigned long frames)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Pa\+Error} Read\+Stream (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Stream} $\ast$}]{stream, }
\item[{{\bf void} $\ast$}]{buffer, }
\item[{unsigned long}]{frames}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_a9e7f111c33d1e80f40473846864e84fa}{}\label{pa__mac__core__blocking_8c_a9e7f111c33d1e80f40473846864e84fa}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000040}{Todo}]R\+E\+V\+I\+EW\+: consider what to do if the input overflows. do we requeue all of the buffers? should we be running a thread to make sure they are always queued? see\+: \href{http://www.portaudio.com/trac/ticket/117}{\tt http\+://www.\+portaudio.\+com/trac/ticket/117} \end{DoxyRefDesc}


Definition at line 407 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!reset\+Blio\+Ring\+Buffers@{reset\+Blio\+Ring\+Buffers}}
\index{reset\+Blio\+Ring\+Buffers@{reset\+Blio\+Ring\+Buffers}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{reset\+Blio\+Ring\+Buffers(\+Pa\+Mac\+Blio $\ast$blio)}{resetBlioRingBuffers(PaMacBlio *blio)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pa\+Error} reset\+Blio\+Ring\+Buffers (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Mac\+Blio} $\ast$}]{blio}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_aedd64041043bb6cba5713d9a12c26ebf}{}\label{pa__mac__core__blocking_8c_aedd64041043bb6cba5713d9a12c26ebf}


Definition at line 262 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!wait\+Until\+Blio\+Write\+Buffer\+Is\+Flushed@{wait\+Until\+Blio\+Write\+Buffer\+Is\+Flushed}}
\index{wait\+Until\+Blio\+Write\+Buffer\+Is\+Flushed@{wait\+Until\+Blio\+Write\+Buffer\+Is\+Flushed}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{wait\+Until\+Blio\+Write\+Buffer\+Is\+Flushed(\+Pa\+Mac\+Blio $\ast$blio)}{waitUntilBlioWriteBufferIsFlushed(PaMacBlio *blio)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} wait\+Until\+Blio\+Write\+Buffer\+Is\+Flushed (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Mac\+Blio} $\ast$}]{blio}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_af88e5ceb377195cb9086d88b990e4d8b}{}\label{pa__mac__core__blocking_8c_af88e5ceb377195cb9086d88b990e4d8b}


Definition at line 562 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

\index{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}!Write\+Stream@{Write\+Stream}}
\index{Write\+Stream@{Write\+Stream}!pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c@{pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c}}
\subsubsection[{\texorpdfstring{Write\+Stream(\+Pa\+Stream $\ast$stream, const void $\ast$buffer, unsigned long frames)}{WriteStream(PaStream *stream, const void *buffer, unsigned long frames)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Pa\+Error} Write\+Stream (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Stream} $\ast$}]{stream, }
\item[{{\bf const} {\bf void} $\ast$}]{buffer, }
\item[{unsigned long}]{frames}
\end{DoxyParamCaption}
)}\hypertarget{pa__mac__core__blocking_8c_a0cfb7772846808945bd521d23d5626eb}{}\label{pa__mac__core__blocking_8c_a0cfb7772846808945bd521d23d5626eb}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000041}{Todo}]R\+E\+V\+I\+EW\+: consider what to do if the output underflows. do we requeue all the existing buffers with zeros? should we run a separate thread to keep the buffers enqueued at all times? see\+: \href{http://www.portaudio.com/trac/ticket/117}{\tt http\+://www.\+portaudio.\+com/trac/ticket/117} \end{DoxyRefDesc}


Definition at line 483 of file pa\+\_\+mac\+\_\+core\+\_\+blocking.\+c.

