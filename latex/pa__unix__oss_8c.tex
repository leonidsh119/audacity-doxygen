\hypertarget{pa__unix__oss_8c}{}\section{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/hostapi/oss/pa\+\_\+unix\+\_\+oss.c File Reference}
\label{pa__unix__oss_8c}\index{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/hostapi/oss/pa\+\_\+unix\+\_\+oss.\+c@{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/portaudio-\/v19/src/hostapi/oss/pa\+\_\+unix\+\_\+oss.\+c}}
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
{\ttfamily \#include $<$fcntl.\+h$>$}\\*
{\ttfamily \#include $<$sys/ioctl.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$pthread.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$sys/stat.\+h$>$}\\*
{\ttfamily \#include $<$sys/poll.\+h$>$}\\*
{\ttfamily \#include $<$limits.\+h$>$}\\*
{\ttfamily \#include $<$semaphore.\+h$>$}\\*
{\ttfamily \#include \char`\"{}portaudio.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+util.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+allocation.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+hostapi.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+stream.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+cpuload.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+process.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+unix\+\_\+util.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pa\+\_\+debugprint.\+h\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_pa_o_s_s_host_api_representation}{Pa\+O\+S\+S\+Host\+Api\+Representation}
\item 
struct \hyperlink{struct_pa_oss_stream_component}{Pa\+Oss\+Stream\+Component}
\item 
struct \hyperlink{struct_pa_oss_stream}{Pa\+Oss\+Stream}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{pa__unix__oss_8c_af6598be0b460d5228f0c6f386d9bf306}{E\+N\+S\+U\+R\+E\+\_\+}(expr,  code)
\item 
\#define \hyperlink{pa__unix__oss_8c_aec73a2ca552a1d579edc3e438dca805e}{A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE}~Get\+\_\+\+A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE()
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{struct_pa_oss_stream}{Pa\+Oss\+Stream} \hyperlink{pa__unix__oss_8c_a71e62e12d9bfdf9a67c4c77567c53f89}{Pa\+Oss\+Stream}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791f}{Stream\+Mode} \{ \hyperlink{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791faee4552042ee189f6046abc4a7ba35a7c}{Stream\+Mode\+\_\+\+In}, 
\hyperlink{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791fa2d79178c2be03f37e753d279113f93ed}{Stream\+Mode\+\_\+\+Out}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{portaudio_8h_a4949e4a8ef9f9dbe8cbee414ce69841d}{Pa\+Error} \hyperlink{pa__unix__oss_8c_af5c5907fd84ab3bea3a107d7ff4d4c04}{Pa\+O\+S\+S\+\_\+\+Initialize} (\hyperlink{struct_pa_util_host_api_representation}{Pa\+Util\+Host\+Api\+Representation} $\ast$$\ast$host\+Api, \hyperlink{portaudio_8h_aeef6da084c57c70aa94be97411e19930}{Pa\+Host\+Api\+Index} host\+Api\+Index)
\item 
\hyperlink{portaudio_8h_a4949e4a8ef9f9dbe8cbee414ce69841d}{Pa\+Error} \hyperlink{pa__unix__oss_8c_acbff329a34e7d0af90f65a35b845ed7e}{Pa\+Util\+\_\+\+Initialize\+Device\+Info} (\hyperlink{struct_pa_device_info}{Pa\+Device\+Info} $\ast$device\+Info, \hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$\hyperlink{lib_2expat_8h_a1b49b495b59f9e73205b69ad1a2965b0}{name}, \hyperlink{portaudio_8h_aeef6da084c57c70aa94be97411e19930}{Pa\+Host\+Api\+Index} host\+Api\+Index, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} max\+Input\+Channels, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} max\+Output\+Channels, \hyperlink{portaudio_8h_af17a7e6d0471a23071acf8dbd7bbe4bd}{Pa\+Time} default\+Low\+Input\+Latency, \hyperlink{portaudio_8h_af17a7e6d0471a23071acf8dbd7bbe4bd}{Pa\+Time} default\+Low\+Output\+Latency, \hyperlink{portaudio_8h_af17a7e6d0471a23071acf8dbd7bbe4bd}{Pa\+Time} default\+High\+Input\+Latency, \hyperlink{portaudio_8h_af17a7e6d0471a23071acf8dbd7bbe4bd}{Pa\+Time} default\+High\+Output\+Latency, double default\+Sample\+Rate, \hyperlink{struct_pa_util_allocation_group}{Pa\+Util\+Allocation\+Group} $\ast$allocations)
\item 
\hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$ \hyperlink{pa__unix__oss_8c_a04ef585326928abf290637297eb595cc}{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Input\+Device} (\hyperlink{portaudio_8h_a19874734f89958fccf86785490d53b4c}{Pa\+Stream} $\ast$\hyperlink{lib_2expat_8h_a755339d27872b13735c2cab829e47157}{s})
\item 
\hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$ \hyperlink{pa__unix__oss_8c_a6ff7dc5b755a20f07c8ff7d5151e205d}{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Output\+Device} (\hyperlink{portaudio_8h_a19874734f89958fccf86785490d53b4c}{Pa\+Stream} $\ast$\hyperlink{lib_2expat_8h_a755339d27872b13735c2cab829e47157}{s})
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE@{A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE}}
\index{A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE@{A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE}{AFMT_S16_NE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE~Get\+\_\+\+A\+F\+M\+T\+\_\+\+S16\+\_\+\+NE()}\hypertarget{pa__unix__oss_8c_aec73a2ca552a1d579edc3e438dca805e}{}\label{pa__unix__oss_8c_aec73a2ca552a1d579edc3e438dca805e}


Definition at line 114 of file pa\+\_\+unix\+\_\+oss.\+c.

\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!E\+N\+S\+U\+R\+E\+\_\+@{E\+N\+S\+U\+R\+E\+\_\+}}
\index{E\+N\+S\+U\+R\+E\+\_\+@{E\+N\+S\+U\+R\+E\+\_\+}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{E\+N\+S\+U\+R\+E\+\_\+}{ENSURE_}}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\+N\+S\+U\+R\+E\+\_\+(
\begin{DoxyParamCaption}
\item[{}]{expr, }
\item[{}]{code}
\end{DoxyParamCaption}
)}\hypertarget{pa__unix__oss_8c_af6598be0b460d5228f0c6f386d9bf306}{}\label{pa__unix__oss_8c_af6598be0b460d5228f0c6f386d9bf306}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{ \(\backslash\)
        if( \hyperlink{pa__unix__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}( (sysErr\_ = (expr)) < 0 ) ) \(\backslash\)
        \{ \(\backslash\)
            \textcolor{comment}{/* PaUtil\_SetLastHostErrorInfo should only be used in the main thread */} \(\backslash\)
            if( (code) == \hyperlink{portaudio_8h_a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0}{paUnanticipatedHostError} && pthread\_self() == mainThread\_
       ) \(\backslash\)
            \{ \(\backslash\)
                PaUtil\_SetLastHostErrorInfo( \hyperlink{portaudio_8h_a8eaebe3d39c5ea45598da8f86dc2e5aea9afdcbf978e7b8b48db08a7c5208ebe4}{paOSS}, sysErr\_, strerror( errno ) ); \(\backslash\)
            \} \hyperlink{pa__debugprint_8c_a775ad90aa83e8a15e724f1b0fc55a0d3}{\(\backslash\)}
\hyperlink{pa__debugprint_8c_a775ad90aa83e8a15e724f1b0fc55a0d3}{            \(\backslash\)}
\hyperlink{pa__debugprint_8c_a775ad90aa83e8a15e724f1b0fc55a0d3}{            PaUtil\_DebugPrint}(( \textcolor{stringliteral}{"Expression '"} #expr \textcolor{stringliteral}{"' failed in '"} \_\_FILE\_\_ \textcolor{stringliteral}{
      "', line: "} \hyperlink{pa__jack_8c_a8fdb5acc9bc207e117671b79ddf1df0f}{STRINGIZE}( \_\_LINE\_\_ ) \textcolor{stringliteral}{"\(\backslash\)n"} )); \(\backslash\)
            result = (code); \(\backslash\)
            goto \hyperlink{sndfile__load_8m_a3a81ee160b23b01b04b7c08b35123218}{error}; \(\backslash\)
        \} \(\backslash\)
    \} \textcolor{keywordflow}{while}( 0 );
\end{DoxyCode}


Definition at line 97 of file pa\+\_\+unix\+\_\+oss.\+c.



\subsection{Typedef Documentation}
\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Pa\+Oss\+Stream@{Pa\+Oss\+Stream}}
\index{Pa\+Oss\+Stream@{Pa\+Oss\+Stream}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{Pa\+Oss\+Stream}{PaOssStream}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf Pa\+Oss\+Stream}
 {\bf Pa\+Oss\+Stream}}\hypertarget{pa__unix__oss_8c_a71e62e12d9bfdf9a67c4c77567c53f89}{}\label{pa__unix__oss_8c_a71e62e12d9bfdf9a67c4c77567c53f89}
Implementation specific representation of a Pa\+Stream. 

\subsection{Enumeration Type Documentation}
\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Stream\+Mode@{Stream\+Mode}}
\index{Stream\+Mode@{Stream\+Mode}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{Stream\+Mode}{StreamMode}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Stream\+Mode}}\hypertarget{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791f}{}\label{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791f}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Stream\+Mode\+\_\+\+In@{Stream\+Mode\+\_\+\+In}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Stream\+Mode\+\_\+\+In@{Stream\+Mode\+\_\+\+In}}\item[{\em 
Stream\+Mode\+\_\+\+In\hypertarget{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791faee4552042ee189f6046abc4a7ba35a7c}{}\label{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791faee4552042ee189f6046abc4a7ba35a7c}
}]\index{Stream\+Mode\+\_\+\+Out@{Stream\+Mode\+\_\+\+Out}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Stream\+Mode\+\_\+\+Out@{Stream\+Mode\+\_\+\+Out}}\item[{\em 
Stream\+Mode\+\_\+\+Out\hypertarget{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791fa2d79178c2be03f37e753d279113f93ed}{}\label{pa__unix__oss_8c_a5b53090612b0845fc9b0fa2ac6cb791fa2d79178c2be03f37e753d279113f93ed}
}]\end{description}
\end{Desc}


Definition at line 196 of file pa\+\_\+unix\+\_\+oss.\+c.



\subsection{Function Documentation}
\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Input\+Device@{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Input\+Device}}
\index{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Input\+Device@{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Input\+Device}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Input\+Device(\+Pa\+Stream $\ast$s)}{PaOSS_GetStreamInputDevice(PaStream *s)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} char$\ast$ Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Input\+Device (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Stream} $\ast$}]{s}
\end{DoxyParamCaption}
)}\hypertarget{pa__unix__oss_8c_a04ef585326928abf290637297eb595cc}{}\label{pa__unix__oss_8c_a04ef585326928abf290637297eb595cc}


Definition at line 2046 of file pa\+\_\+unix\+\_\+oss.\+c.

\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Output\+Device@{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Output\+Device}}
\index{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Output\+Device@{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Output\+Device}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Output\+Device(\+Pa\+Stream $\ast$s)}{PaOSS_GetStreamOutputDevice(PaStream *s)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} char$\ast$ Pa\+O\+S\+S\+\_\+\+Get\+Stream\+Output\+Device (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Stream} $\ast$}]{s}
\end{DoxyParamCaption}
)}\hypertarget{pa__unix__oss_8c_a6ff7dc5b755a20f07c8ff7d5151e205d}{}\label{pa__unix__oss_8c_a6ff7dc5b755a20f07c8ff7d5151e205d}


Definition at line 2058 of file pa\+\_\+unix\+\_\+oss.\+c.

\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Pa\+O\+S\+S\+\_\+\+Initialize@{Pa\+O\+S\+S\+\_\+\+Initialize}}
\index{Pa\+O\+S\+S\+\_\+\+Initialize@{Pa\+O\+S\+S\+\_\+\+Initialize}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{Pa\+O\+S\+S\+\_\+\+Initialize(\+Pa\+Util\+Host\+Api\+Representation $\ast$$\ast$host\+Api, Pa\+Host\+Api\+Index host\+Api\+Index)}{PaOSS_Initialize(PaUtilHostApiRepresentation **hostApi, PaHostApiIndex hostApiIndex)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pa\+Error} Pa\+O\+S\+S\+\_\+\+Initialize (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Util\+Host\+Api\+Representation} $\ast$$\ast$}]{host\+Api, }
\item[{{\bf Pa\+Host\+Api\+Index}}]{host\+Api\+Index}
\end{DoxyParamCaption}
)}\hypertarget{pa__unix__oss_8c_af5c5907fd84ab3bea3a107d7ff4d4c04}{}\label{pa__unix__oss_8c_af5c5907fd84ab3bea3a107d7ff4d4c04}
Initialize the O\+SS A\+PI implementation.

This function will initialize host A\+PI datastructures and query host devices for information.

Aspect Device\+Capabilities\+: Enumeration of host A\+PI devices is initiated from here

Aspect Free\+Resources\+: If an error is encountered under way we have to free each resource allocated in this function, this happens with the usual \char`\"{}error\char`\"{} label. 

Definition at line 241 of file pa\+\_\+unix\+\_\+oss.\+c.

\index{pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}!Pa\+Util\+\_\+\+Initialize\+Device\+Info@{Pa\+Util\+\_\+\+Initialize\+Device\+Info}}
\index{Pa\+Util\+\_\+\+Initialize\+Device\+Info@{Pa\+Util\+\_\+\+Initialize\+Device\+Info}!pa\+\_\+unix\+\_\+oss.\+c@{pa\+\_\+unix\+\_\+oss.\+c}}
\subsubsection[{\texorpdfstring{Pa\+Util\+\_\+\+Initialize\+Device\+Info(\+Pa\+Device\+Info $\ast$device\+Info, const char $\ast$name, Pa\+Host\+Api\+Index host\+Api\+Index, int max\+Input\+Channels, int max\+Output\+Channels, Pa\+Time default\+Low\+Input\+Latency, Pa\+Time default\+Low\+Output\+Latency, Pa\+Time default\+High\+Input\+Latency, Pa\+Time default\+High\+Output\+Latency, double default\+Sample\+Rate, Pa\+Util\+Allocation\+Group $\ast$allocations)}{PaUtil_InitializeDeviceInfo(PaDeviceInfo *deviceInfo, const char *name, PaHostApiIndex hostApiIndex, int maxInputChannels, int maxOutputChannels, PaTime defaultLowInputLatency, PaTime defaultLowOutputLatency, PaTime defaultHighInputLatency, PaTime defaultHighOutputLatency, double defaultSampleRate, PaUtilAllocationGroup *allocations)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Pa\+Error} Pa\+Util\+\_\+\+Initialize\+Device\+Info (
\begin{DoxyParamCaption}
\item[{{\bf Pa\+Device\+Info} $\ast$}]{device\+Info, }
\item[{{\bf const} char $\ast$}]{name, }
\item[{{\bf Pa\+Host\+Api\+Index}}]{host\+Api\+Index, }
\item[{{\bf int}}]{max\+Input\+Channels, }
\item[{{\bf int}}]{max\+Output\+Channels, }
\item[{{\bf Pa\+Time}}]{default\+Low\+Input\+Latency, }
\item[{{\bf Pa\+Time}}]{default\+Low\+Output\+Latency, }
\item[{{\bf Pa\+Time}}]{default\+High\+Input\+Latency, }
\item[{{\bf Pa\+Time}}]{default\+High\+Output\+Latency, }
\item[{double}]{default\+Sample\+Rate, }
\item[{{\bf Pa\+Util\+Allocation\+Group} $\ast$}]{allocations}
\end{DoxyParamCaption}
)}\hypertarget{pa__unix__oss_8c_acbff329a34e7d0af90f65a35b845ed7e}{}\label{pa__unix__oss_8c_acbff329a34e7d0af90f65a35b845ed7e}


Definition at line 292 of file pa\+\_\+unix\+\_\+oss.\+c.

