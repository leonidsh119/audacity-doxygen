\hypertarget{psy_8c}{}\section{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/libvorbis/lib/psy.c File Reference}
\label{psy_8c}\index{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/libvorbis/lib/psy.\+c@{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/libvorbis/lib/psy.\+c}}
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include \char`\"{}vorbis/codec.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}codec\+\_\+internal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}masking.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}psy.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}os.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lpc.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}smallft.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}scales.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}misc.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{psy_8c_a16491ade61903be8dcc456e96c722381}{N\+E\+G\+I\+NF}~-\/9999.\hyperlink{checksum_8c_ae747d72a1a803f5ff4a4b2602857d93b}{f}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structvorbis__look__psy__global}{vorbis\+\_\+look\+\_\+psy\+\_\+global} $\ast$ \hyperlink{psy_8c_afcaeaf1c809309d4f263f40f8b83137f}{\+\_\+vp\+\_\+global\+\_\+look} (\hyperlink{structvorbis__info}{vorbis\+\_\+info} $\ast$vi)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_a49f7f01467273e321456d340b7ad516a}{\+\_\+vp\+\_\+global\+\_\+free} (\hyperlink{structvorbis__look__psy__global}{vorbis\+\_\+look\+\_\+psy\+\_\+global} $\ast$look)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_aa0c73f919c99274470693c982aecb60e}{\+\_\+vi\+\_\+gpsy\+\_\+free} (\hyperlink{structvorbis__info__psy__global}{vorbis\+\_\+info\+\_\+psy\+\_\+global} $\ast$\hyperlink{checksum_8c_ab80e330a3bc9e38c1297fe17381e92b4}{i})
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_a2be9a7ae18da45f4dd41f742a600cd3c}{\+\_\+vi\+\_\+psy\+\_\+free} (\hyperlink{structvorbis__info__psy}{vorbis\+\_\+info\+\_\+psy} $\ast$\hyperlink{checksum_8c_ab80e330a3bc9e38c1297fe17381e92b4}{i})
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_a807a71364ce536fec54115f82cfac4b9}{\+\_\+vp\+\_\+psy\+\_\+init} (\hyperlink{structvorbis__look__psy}{vorbis\+\_\+look\+\_\+psy} $\ast$\hyperlink{xmltok_8h_a94b60f3beb36ae85555d36dc9816769c}{p}, \hyperlink{structvorbis__info__psy}{vorbis\+\_\+info\+\_\+psy} $\ast$vi, \hyperlink{structvorbis__info__psy__global}{vorbis\+\_\+info\+\_\+psy\+\_\+global} $\ast$gi, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} n, long \hyperlink{seqread_8c_ad89d3fac2deab7a9cf6cfc8d15341b85}{rate})
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_affcd0e9240a0429b7507c9dff1cefc71}{\+\_\+vp\+\_\+psy\+\_\+clear} (\hyperlink{structvorbis__look__psy}{vorbis\+\_\+look\+\_\+psy} $\ast$\hyperlink{xmltok_8h_a94b60f3beb36ae85555d36dc9816769c}{p})
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_ac1810545af983f3d7bdcc2279689f533}{\+\_\+vp\+\_\+noisemask} (\hyperlink{structvorbis__look__psy}{vorbis\+\_\+look\+\_\+psy} $\ast$\hyperlink{xmltok_8h_a94b60f3beb36ae85555d36dc9816769c}{p}, float $\ast$logmdct, float $\ast$logmask)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_aa3b3c37a437296674cca2436dcba809d}{\+\_\+vp\+\_\+tonemask} (\hyperlink{structvorbis__look__psy}{vorbis\+\_\+look\+\_\+psy} $\ast$\hyperlink{xmltok_8h_a94b60f3beb36ae85555d36dc9816769c}{p}, float $\ast$logfft, float $\ast$logmask, float global\+\_\+specmax, float local\+\_\+specmax)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_a6a8f6ff5c487cd19e73aa3adf702dcd1}{\+\_\+vp\+\_\+offset\+\_\+and\+\_\+mix} (\hyperlink{structvorbis__look__psy}{vorbis\+\_\+look\+\_\+psy} $\ast$\hyperlink{xmltok_8h_a94b60f3beb36ae85555d36dc9816769c}{p}, float $\ast$noise, float $\ast$tone, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} offset\+\_\+select, float $\ast$logmask, float $\ast$mdct, float $\ast$logmdct)
\item 
float \hyperlink{psy_8c_acf2486bf30b03e505305f05fd3107bb1}{\+\_\+vp\+\_\+ampmax\+\_\+decay} (float amp, \hyperlink{structvorbis__dsp__state}{vorbis\+\_\+dsp\+\_\+state} $\ast$vd)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{psy_8c_a61c85571375521578807e2deff2232de}{\+\_\+vp\+\_\+couple\+\_\+quantize\+\_\+normalize} (\hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} blobno, \hyperlink{structvorbis__info__psy__global}{vorbis\+\_\+info\+\_\+psy\+\_\+global} $\ast$g, \hyperlink{structvorbis__look__psy}{vorbis\+\_\+look\+\_\+psy} $\ast$\hyperlink{xmltok_8h_a94b60f3beb36ae85555d36dc9816769c}{p}, \hyperlink{structvorbis__info__mapping0}{vorbis\+\_\+info\+\_\+mapping0} $\ast$vi, float $\ast$$\ast$mdct, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} $\ast$$\ast$iwork, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} $\ast$nonzero, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} sliding\+\_\+lowpass, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} ch)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{psy.\+c@{psy.\+c}!N\+E\+G\+I\+NF@{N\+E\+G\+I\+NF}}
\index{N\+E\+G\+I\+NF@{N\+E\+G\+I\+NF}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{N\+E\+G\+I\+NF}{NEGINF}}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+E\+G\+I\+NF~-\/9999.{\bf f}}\hypertarget{psy_8c_a16491ade61903be8dcc456e96c722381}{}\label{psy_8c_a16491ade61903be8dcc456e96c722381}


Definition at line 32 of file psy.\+c.



\subsection{Function Documentation}
\index{psy.\+c@{psy.\+c}!\+\_\+vi\+\_\+gpsy\+\_\+free@{\+\_\+vi\+\_\+gpsy\+\_\+free}}
\index{\+\_\+vi\+\_\+gpsy\+\_\+free@{\+\_\+vi\+\_\+gpsy\+\_\+free}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vi\+\_\+gpsy\+\_\+free(vorbis\+\_\+info\+\_\+psy\+\_\+global $\ast$i)}{_vi_gpsy_free(vorbis_info_psy_global *i)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vi\+\_\+gpsy\+\_\+free (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+info\+\_\+psy\+\_\+global} $\ast$}]{i}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_aa0c73f919c99274470693c982aecb60e}{}\label{psy_8c_aa0c73f919c99274470693c982aecb60e}


Definition at line 55 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vi\+\_\+psy\+\_\+free@{\+\_\+vi\+\_\+psy\+\_\+free}}
\index{\+\_\+vi\+\_\+psy\+\_\+free@{\+\_\+vi\+\_\+psy\+\_\+free}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vi\+\_\+psy\+\_\+free(vorbis\+\_\+info\+\_\+psy $\ast$i)}{_vi_psy_free(vorbis_info_psy *i)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vi\+\_\+psy\+\_\+free (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+info\+\_\+psy} $\ast$}]{i}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_a2be9a7ae18da45f4dd41f742a600cd3c}{}\label{psy_8c_a2be9a7ae18da45f4dd41f742a600cd3c}


Definition at line 62 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+ampmax\+\_\+decay@{\+\_\+vp\+\_\+ampmax\+\_\+decay}}
\index{\+\_\+vp\+\_\+ampmax\+\_\+decay@{\+\_\+vp\+\_\+ampmax\+\_\+decay}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+ampmax\+\_\+decay(float amp, vorbis\+\_\+dsp\+\_\+state $\ast$vd)}{_vp_ampmax_decay(float amp, vorbis_dsp_state *vd)}}]{\setlength{\rightskip}{0pt plus 5cm}float \+\_\+vp\+\_\+ampmax\+\_\+decay (
\begin{DoxyParamCaption}
\item[{float}]{amp, }
\item[{{\bf vorbis\+\_\+dsp\+\_\+state} $\ast$}]{vd}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_acf2486bf30b03e505305f05fd3107bb1}{}\label{psy_8c_acf2486bf30b03e505305f05fd3107bb1}


Definition at line 830 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+couple\+\_\+quantize\+\_\+normalize@{\+\_\+vp\+\_\+couple\+\_\+quantize\+\_\+normalize}}
\index{\+\_\+vp\+\_\+couple\+\_\+quantize\+\_\+normalize@{\+\_\+vp\+\_\+couple\+\_\+quantize\+\_\+normalize}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+couple\+\_\+quantize\+\_\+normalize(int blobno, vorbis\+\_\+info\+\_\+psy\+\_\+global $\ast$g, vorbis\+\_\+look\+\_\+psy $\ast$p, vorbis\+\_\+info\+\_\+mapping0 $\ast$vi, float $\ast$$\ast$mdct, int $\ast$$\ast$iwork, int $\ast$nonzero, int sliding\+\_\+lowpass, int ch)}{_vp_couple_quantize_normalize(int blobno, vorbis_info_psy_global *g, vorbis_look_psy *p, vorbis_info_mapping0 *vi, float **mdct, int **iwork, int *nonzero, int sliding_lowpass, int ch)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vp\+\_\+couple\+\_\+quantize\+\_\+normalize (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{blobno, }
\item[{{\bf vorbis\+\_\+info\+\_\+psy\+\_\+global} $\ast$}]{g, }
\item[{{\bf vorbis\+\_\+look\+\_\+psy} $\ast$}]{p, }
\item[{{\bf vorbis\+\_\+info\+\_\+mapping0} $\ast$}]{vi, }
\item[{float $\ast$$\ast$}]{mdct, }
\item[{{\bf int} $\ast$$\ast$}]{iwork, }
\item[{{\bf int} $\ast$}]{nonzero, }
\item[{{\bf int}}]{sliding\+\_\+lowpass, }
\item[{{\bf int}}]{ch}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_a61c85571375521578807e2deff2232de}{}\label{psy_8c_a61c85571375521578807e2deff2232de}


Definition at line 1007 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+global\+\_\+free@{\+\_\+vp\+\_\+global\+\_\+free}}
\index{\+\_\+vp\+\_\+global\+\_\+free@{\+\_\+vp\+\_\+global\+\_\+free}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+global\+\_\+free(vorbis\+\_\+look\+\_\+psy\+\_\+global $\ast$look)}{_vp_global_free(vorbis_look_psy_global *look)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vp\+\_\+global\+\_\+free (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+look\+\_\+psy\+\_\+global} $\ast$}]{look}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_a49f7f01467273e321456d340b7ad516a}{}\label{psy_8c_a49f7f01467273e321456d340b7ad516a}


Definition at line 48 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+global\+\_\+look@{\+\_\+vp\+\_\+global\+\_\+look}}
\index{\+\_\+vp\+\_\+global\+\_\+look@{\+\_\+vp\+\_\+global\+\_\+look}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+global\+\_\+look(vorbis\+\_\+info $\ast$vi)}{_vp_global_look(vorbis_info *vi)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf vorbis\+\_\+look\+\_\+psy\+\_\+global}$\ast$ \+\_\+vp\+\_\+global\+\_\+look (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+info} $\ast$}]{vi}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_afcaeaf1c809309d4f263f40f8b83137f}{}\label{psy_8c_afcaeaf1c809309d4f263f40f8b83137f}


Definition at line 36 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+noisemask@{\+\_\+vp\+\_\+noisemask}}
\index{\+\_\+vp\+\_\+noisemask@{\+\_\+vp\+\_\+noisemask}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+noisemask(vorbis\+\_\+look\+\_\+psy $\ast$p, float $\ast$logmdct, float $\ast$logmask)}{_vp_noisemask(vorbis_look_psy *p, float *logmdct, float *logmask)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vp\+\_\+noisemask (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+look\+\_\+psy} $\ast$}]{p, }
\item[{float $\ast$}]{logmdct, }
\item[{float $\ast$}]{logmask}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_ac1810545af983f3d7bdcc2279689f533}{}\label{psy_8c_ac1810545af983f3d7bdcc2279689f533}


Definition at line 699 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+offset\+\_\+and\+\_\+mix@{\+\_\+vp\+\_\+offset\+\_\+and\+\_\+mix}}
\index{\+\_\+vp\+\_\+offset\+\_\+and\+\_\+mix@{\+\_\+vp\+\_\+offset\+\_\+and\+\_\+mix}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+offset\+\_\+and\+\_\+mix(vorbis\+\_\+look\+\_\+psy $\ast$p, float $\ast$noise, float $\ast$tone, int offset\+\_\+select, float $\ast$logmask, float $\ast$mdct, float $\ast$logmdct)}{_vp_offset_and_mix(vorbis_look_psy *p, float *noise, float *tone, int offset_select, float *logmask, float *mdct, float *logmdct)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vp\+\_\+offset\+\_\+and\+\_\+mix (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+look\+\_\+psy} $\ast$}]{p, }
\item[{float $\ast$}]{noise, }
\item[{float $\ast$}]{tone, }
\item[{{\bf int}}]{offset\+\_\+select, }
\item[{float $\ast$}]{logmask, }
\item[{float $\ast$}]{mdct, }
\item[{float $\ast$}]{logmdct}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_a6a8f6ff5c487cd19e73aa3adf702dcd1}{}\label{psy_8c_a6a8f6ff5c487cd19e73aa3adf702dcd1}
@ M1 $\ast$$\ast$ The following codes improve a noise problem. A fundamental idea uses the value of masking and carries out the relative compensation of the M\+D\+CT. However, this code is not perfect and all noise problems cannot be solved. by Aoyumi @ 2004/04/18

Definition at line 772 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+psy\+\_\+clear@{\+\_\+vp\+\_\+psy\+\_\+clear}}
\index{\+\_\+vp\+\_\+psy\+\_\+clear@{\+\_\+vp\+\_\+psy\+\_\+clear}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+psy\+\_\+clear(vorbis\+\_\+look\+\_\+psy $\ast$p)}{_vp_psy_clear(vorbis_look_psy *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vp\+\_\+psy\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+look\+\_\+psy} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_affcd0e9240a0429b7507c9dff1cefc71}{}\label{psy_8c_affcd0e9240a0429b7507c9dff1cefc71}


Definition at line 361 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+psy\+\_\+init@{\+\_\+vp\+\_\+psy\+\_\+init}}
\index{\+\_\+vp\+\_\+psy\+\_\+init@{\+\_\+vp\+\_\+psy\+\_\+init}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+psy\+\_\+init(vorbis\+\_\+look\+\_\+psy $\ast$p, vorbis\+\_\+info\+\_\+psy $\ast$vi, vorbis\+\_\+info\+\_\+psy\+\_\+global $\ast$gi, int n, long rate)}{_vp_psy_init(vorbis_look_psy *p, vorbis_info_psy *vi, vorbis_info_psy_global *gi, int n, long rate)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vp\+\_\+psy\+\_\+init (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+look\+\_\+psy} $\ast$}]{p, }
\item[{{\bf vorbis\+\_\+info\+\_\+psy} $\ast$}]{vi, }
\item[{{\bf vorbis\+\_\+info\+\_\+psy\+\_\+global} $\ast$}]{gi, }
\item[{{\bf int}}]{n, }
\item[{long}]{rate}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_a807a71364ce536fec54115f82cfac4b9}{}\label{psy_8c_a807a71364ce536fec54115f82cfac4b9}


Definition at line 267 of file psy.\+c.

\index{psy.\+c@{psy.\+c}!\+\_\+vp\+\_\+tonemask@{\+\_\+vp\+\_\+tonemask}}
\index{\+\_\+vp\+\_\+tonemask@{\+\_\+vp\+\_\+tonemask}!psy.\+c@{psy.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+vp\+\_\+tonemask(vorbis\+\_\+look\+\_\+psy $\ast$p, float $\ast$logfft, float $\ast$logmask, float global\+\_\+specmax, float local\+\_\+specmax)}{_vp_tonemask(vorbis_look_psy *p, float *logfft, float *logmask, float global_specmax, float local_specmax)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} \+\_\+vp\+\_\+tonemask (
\begin{DoxyParamCaption}
\item[{{\bf vorbis\+\_\+look\+\_\+psy} $\ast$}]{p, }
\item[{float $\ast$}]{logfft, }
\item[{float $\ast$}]{logmask, }
\item[{float}]{global\+\_\+specmax, }
\item[{float}]{local\+\_\+specmax}
\end{DoxyParamCaption}
)}\hypertarget{psy_8c_aa3b3c37a437296674cca2436dcba809d}{}\label{psy_8c_aa3b3c37a437296674cca2436dcba809d}


Definition at line 747 of file psy.\+c.

