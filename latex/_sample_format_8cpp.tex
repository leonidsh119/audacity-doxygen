\hypertarget{_sample_format_8cpp}{}\section{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/src/\+Sample\+Format.cpp File Reference}
\label{_sample_format_8cpp}\index{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/src/\+Sample\+Format.\+cpp@{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/src/\+Sample\+Format.\+cpp}}


Functions that work with \hyperlink{class_dither}{Dither} and initialise it.  


{\ttfamily \#include $<$wx/intl.\+h$>$}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include \char`\"{}Sample\+Format.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Prefs.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Dither.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{_sample_format_8cpp_aeb7fed8a549dd3e3613b8bcfcc450b24}{Init\+Ditherers} ()
\item 
\hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} wx\+Char $\ast$ \hyperlink{_sample_format_8cpp_aa1e05d8c243fe96c1bee978d1ec73b57}{Get\+Sample\+Format\+Str} (\hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} \hyperlink{_export_p_c_m_8cpp_a317afff57d87a89158c2b038d37b2b08}{format})
\item 
A\+U\+D\+A\+C\+I\+T\+Y\+\_\+\+D\+L\+L\+\_\+\+A\+PI \hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} \hyperlink{_sample_format_8cpp_a22bcfb288f8c9f67c6f21de603e25a92}{New\+Samples} (\hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{metrics_8c_afea6e77db19a2f8c91419904fe665a3a}{count}, \hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} \hyperlink{_export_p_c_m_8cpp_a317afff57d87a89158c2b038d37b2b08}{format})
\item 
A\+U\+D\+A\+C\+I\+T\+Y\+\_\+\+D\+L\+L\+\_\+\+A\+PI \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{_sample_format_8cpp_a94fcbd998781c5cf1b8f785648f9a6b0}{Delete\+Samples} (\hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} \hyperlink{xmltok_8h_a94b60f3beb36ae85555d36dc9816769c}{p})
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{_sample_format_8cpp_a3e6207a5663cc3daa9e7792476af8f6e}{Clear\+Samples} (\hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} src, \hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} \hyperlink{_export_p_c_m_8cpp_a317afff57d87a89158c2b038d37b2b08}{format}, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{seqread_8c_ac503262ae470564980711da4f78b1181}{start}, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{lib_2expat_8h_af86d325fecfc8f47b61fbf5a5146f582}{len})
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{_sample_format_8cpp_ab177c4709ea3480a7f104a0972e2b5c1}{Reverse\+Samples} (\hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} src, \hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} \hyperlink{_export_p_c_m_8cpp_a317afff57d87a89158c2b038d37b2b08}{format}, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{seqread_8c_ac503262ae470564980711da4f78b1181}{start}, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{lib_2expat_8h_af86d325fecfc8f47b61fbf5a5146f582}{len})
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{_sample_format_8cpp_a2819d83a15a7623e52e6562b3329471c}{Copy\+Samples} (\hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} src, \hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} src\+Format, \hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} dst, \hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} dst\+Format, unsigned \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{lib_2expat_8h_af86d325fecfc8f47b61fbf5a5146f582}{len}, \hyperlink{mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h_abb452686968e48b67397da5f97445f5b}{bool} high\+Quality, unsigned \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} src\+Stride, unsigned \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} dst\+Stride)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{_sample_format_8cpp_a4825b303f0dd0cf833a4eba48729952f}{Copy\+Samples\+No\+Dither} (\hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} src, \hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} src\+Format, \hyperlink{include_2audacity_2_types_8h_aaafb46d1caf7c79262fec96b577215fe}{sample\+Ptr} dst, \hyperlink{include_2audacity_2_types_8h_a9938d2e2f6adef23e745cd80ef379792}{sample\+Format} dst\+Format, unsigned \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{lib_2expat_8h_af86d325fecfc8f47b61fbf5a5146f582}{len}, unsigned \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} src\+Stride, unsigned \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} dst\+Stride)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions that work with \hyperlink{class_dither}{Dither} and initialise it. 

This file handles converting between all of the different sample formats that Audacity supports, such as 16-\/bit, 24-\/bit (packed into a 32-\/bit int), and 32-\/bit float.

Floating-\/point samples use the range -\/1.\+0...1.\+0, inclusive. Integer formats use the full signed range of their data type, for example 16-\/bit samples use the range -\/32768...32767. This means that reading in a wav file and writing it out again (\textquotesingle{}round tripping\textquotesingle{}), via floats, is lossless; -\/32768 equates to -\/1.\+0f and 32767 equates to +1.0f -\/ (a little bit). It also means (unfortunatly) that writing out +1.0f leads to clipping by 1 L\+SB. This creates some distortion, but I (M\+JS) have not been able to measure it, it\textquotesingle{}s so small. Zero is preserved.

\href{http://limpet.net/audacity/bugzilla/show_bug.cgi?id=200}{\tt http\+://limpet.\+net/audacity/bugzilla/show\+\_\+bug.\+cgi?id=200} leads to some of the discussions that were held about this.

Note\+: These things are now handled by the \hyperlink{class_dither}{Dither} class, which also replaces the \hyperlink{_sample_format_8cpp_a2819d83a15a7623e52e6562b3329471c}{Copy\+Samples()} method (msmeyer) 

\subsection{Function Documentation}
\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!Clear\+Samples@{Clear\+Samples}}
\index{Clear\+Samples@{Clear\+Samples}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{Clear\+Samples(sample\+Ptr src, sample\+Format format, int start, int len)}{ClearSamples(samplePtr src, sampleFormat format, int start, int len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} Clear\+Samples (
\begin{DoxyParamCaption}
\item[{{\bf sample\+Ptr}}]{src, }
\item[{{\bf sample\+Format}}]{format, }
\item[{{\bf int}}]{start, }
\item[{{\bf int}}]{len}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_a3e6207a5663cc3daa9e7792476af8f6e}{}\label{_sample_format_8cpp_a3e6207a5663cc3daa9e7792476af8f6e}


Definition at line 88 of file Sample\+Format.\+cpp.

\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!Copy\+Samples@{Copy\+Samples}}
\index{Copy\+Samples@{Copy\+Samples}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{Copy\+Samples(sample\+Ptr src, sample\+Format src\+Format, sample\+Ptr dst, sample\+Format dst\+Format, unsigned int len, bool high\+Quality, unsigned int src\+Stride, unsigned int dst\+Stride)}{CopySamples(samplePtr src, sampleFormat srcFormat, samplePtr dst, sampleFormat dstFormat, unsigned int len, bool highQuality, unsigned int srcStride, unsigned int dstStride)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} Copy\+Samples (
\begin{DoxyParamCaption}
\item[{{\bf sample\+Ptr}}]{src, }
\item[{{\bf sample\+Format}}]{src\+Format, }
\item[{{\bf sample\+Ptr}}]{dst, }
\item[{{\bf sample\+Format}}]{dst\+Format, }
\item[{unsigned {\bf int}}]{len, }
\item[{{\bf bool}}]{high\+Quality, }
\item[{unsigned {\bf int}}]{src\+Stride, }
\item[{unsigned {\bf int}}]{dst\+Stride}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_a2819d83a15a7623e52e6562b3329471c}{}\label{_sample_format_8cpp_a2819d83a15a7623e52e6562b3329471c}


Definition at line 113 of file Sample\+Format.\+cpp.

\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!Copy\+Samples\+No\+Dither@{Copy\+Samples\+No\+Dither}}
\index{Copy\+Samples\+No\+Dither@{Copy\+Samples\+No\+Dither}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{Copy\+Samples\+No\+Dither(sample\+Ptr src, sample\+Format src\+Format, sample\+Ptr dst, sample\+Format dst\+Format, unsigned int len, unsigned int src\+Stride, unsigned int dst\+Stride)}{CopySamplesNoDither(samplePtr src, sampleFormat srcFormat, samplePtr dst, sampleFormat dstFormat, unsigned int len, unsigned int srcStride, unsigned int dstStride)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} Copy\+Samples\+No\+Dither (
\begin{DoxyParamCaption}
\item[{{\bf sample\+Ptr}}]{src, }
\item[{{\bf sample\+Format}}]{src\+Format, }
\item[{{\bf sample\+Ptr}}]{dst, }
\item[{{\bf sample\+Format}}]{dst\+Format, }
\item[{unsigned {\bf int}}]{len, }
\item[{unsigned {\bf int}}]{src\+Stride, }
\item[{unsigned {\bf int}}]{dst\+Stride}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_a4825b303f0dd0cf833a4eba48729952f}{}\label{_sample_format_8cpp_a4825b303f0dd0cf833a4eba48729952f}


Definition at line 125 of file Sample\+Format.\+cpp.

\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!Delete\+Samples@{Delete\+Samples}}
\index{Delete\+Samples@{Delete\+Samples}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{Delete\+Samples(sample\+Ptr p)}{DeleteSamples(samplePtr p)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+U\+D\+A\+C\+I\+T\+Y\+\_\+\+D\+L\+L\+\_\+\+A\+PI {\bf void} Delete\+Samples (
\begin{DoxyParamCaption}
\item[{{\bf sample\+Ptr}}]{p}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_a94fcbd998781c5cf1b8f785648f9a6b0}{}\label{_sample_format_8cpp_a94fcbd998781c5cf1b8f785648f9a6b0}


Definition at line 82 of file Sample\+Format.\+cpp.

\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!Get\+Sample\+Format\+Str@{Get\+Sample\+Format\+Str}}
\index{Get\+Sample\+Format\+Str@{Get\+Sample\+Format\+Str}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{Get\+Sample\+Format\+Str(sample\+Format format)}{GetSampleFormatStr(sampleFormat format)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} wx\+Char$\ast$ Get\+Sample\+Format\+Str (
\begin{DoxyParamCaption}
\item[{{\bf sample\+Format}}]{format}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_aa1e05d8c243fe96c1bee978d1ec73b57}{}\label{_sample_format_8cpp_aa1e05d8c243fe96c1bee978d1ec73b57}


Definition at line 61 of file Sample\+Format.\+cpp.

\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!Init\+Ditherers@{Init\+Ditherers}}
\index{Init\+Ditherers@{Init\+Ditherers}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{Init\+Ditherers()}{InitDitherers()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} Init\+Ditherers (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_aeb7fed8a549dd3e3613b8bcfcc450b24}{}\label{_sample_format_8cpp_aeb7fed8a549dd3e3613b8bcfcc450b24}


Definition at line 51 of file Sample\+Format.\+cpp.

\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!New\+Samples@{New\+Samples}}
\index{New\+Samples@{New\+Samples}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{New\+Samples(int count, sample\+Format format)}{NewSamples(int count, sampleFormat format)}}]{\setlength{\rightskip}{0pt plus 5cm}A\+U\+D\+A\+C\+I\+T\+Y\+\_\+\+D\+L\+L\+\_\+\+A\+PI {\bf sample\+Ptr} New\+Samples (
\begin{DoxyParamCaption}
\item[{{\bf int}}]{count, }
\item[{{\bf sample\+Format}}]{format}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_a22bcfb288f8c9f67c6f21de603e25a92}{}\label{_sample_format_8cpp_a22bcfb288f8c9f67c6f21de603e25a92}


Definition at line 77 of file Sample\+Format.\+cpp.

\index{Sample\+Format.\+cpp@{Sample\+Format.\+cpp}!Reverse\+Samples@{Reverse\+Samples}}
\index{Reverse\+Samples@{Reverse\+Samples}!Sample\+Format.\+cpp@{Sample\+Format.\+cpp}}
\subsubsection[{\texorpdfstring{Reverse\+Samples(sample\+Ptr src, sample\+Format format, int start, int len)}{ReverseSamples(samplePtr src, sampleFormat format, int start, int len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} Reverse\+Samples (
\begin{DoxyParamCaption}
\item[{{\bf sample\+Ptr}}]{src, }
\item[{{\bf sample\+Format}}]{format, }
\item[{{\bf int}}]{start, }
\item[{{\bf int}}]{len}
\end{DoxyParamCaption}
)}\hypertarget{_sample_format_8cpp_ab177c4709ea3480a7f104a0972e2b5c1}{}\label{_sample_format_8cpp_ab177c4709ea3480a7f104a0972e2b5c1}


Definition at line 95 of file Sample\+Format.\+cpp.

