\hypertarget{ffmpeg_2libavutil_2file_8h}{}\section{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/ffmpeg/libavutil/file.h File Reference}
\label{ffmpeg_2libavutil_2file_8h}\index{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/ffmpeg/libavutil/file.\+h@{C\+:/\+\_\+dev/\+Open\+U/\+Audacity/audacity/lib-\/src/ffmpeg/libavutil/file.\+h}}
{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include \char`\"{}avutil.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{ffmpeg_2libavutil_2file_8h_a20ab80637ab92af5fbbe4c00be406ad3}{av\+\_\+file\+\_\+map} (\hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$\hyperlink{test__portburn_8cpp_a7efa5e9c7494c7d4586359300221aa5d}{filename}, \hyperlink{lib-src_2ffmpeg_2win32_2stdint_8h_a9a941819355e6f658991890ff66b4b0e}{uint8\+\_\+t} $\ast$$\ast$bufptr, size\+\_\+t $\ast$\hyperlink{group__lavu__mem_ga854352f53b148adc24983a58a1866d66}{size}, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} log\+\_\+offset, \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$log\+\_\+ctx)
\item 
\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} \hyperlink{ffmpeg_2libavutil_2file_8h_a12e643af4a329ae6d1d567d8a782af1e}{av\+\_\+file\+\_\+unmap} (\hyperlink{lib-src_2ffmpeg_2win32_2stdint_8h_a9a941819355e6f658991890ff66b4b0e}{uint8\+\_\+t} $\ast$bufptr, size\+\_\+t \hyperlink{group__lavu__mem_ga854352f53b148adc24983a58a1866d66}{size})
\item 
\hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} \hyperlink{ffmpeg_2libavutil_2file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}{av\+\_\+tempfile} (\hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$\hyperlink{structprefix}{prefix}, char $\ast$$\ast$\hyperlink{test__portburn_8cpp_a7efa5e9c7494c7d4586359300221aa5d}{filename}, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} log\+\_\+offset, \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$log\+\_\+ctx)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Misc file utilities. 

\subsection{Function Documentation}
\index{ffmpeg/libavutil/file.\+h@{ffmpeg/libavutil/file.\+h}!av\+\_\+file\+\_\+map@{av\+\_\+file\+\_\+map}}
\index{av\+\_\+file\+\_\+map@{av\+\_\+file\+\_\+map}!ffmpeg/libavutil/file.\+h@{ffmpeg/libavutil/file.\+h}}
\subsubsection[{\texorpdfstring{av\+\_\+file\+\_\+map(const char $\ast$filename, uint8\+\_\+t $\ast$$\ast$bufptr, size\+\_\+t $\ast$size, int log\+\_\+offset, void $\ast$log\+\_\+ctx)}{av_file_map(const char *filename, uint8_t **bufptr, size_t *size, int log_offset, void *log_ctx)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} av\+\_\+file\+\_\+map (
\begin{DoxyParamCaption}
\item[{{\bf const} char $\ast$}]{filename, }
\item[{{\bf uint8\+\_\+t} $\ast$$\ast$}]{bufptr, }
\item[{size\+\_\+t $\ast$}]{size, }
\item[{{\bf int}}]{log\+\_\+offset, }
\item[{{\bf void} $\ast$}]{log\+\_\+ctx}
\end{DoxyParamCaption}
)}\hypertarget{ffmpeg_2libavutil_2file_8h_a20ab80637ab92af5fbbe4c00be406ad3}{}\label{ffmpeg_2libavutil_2file_8h_a20ab80637ab92af5fbbe4c00be406ad3}
Read the file with name filename, and put its content in a newly allocated buffer or map it with mmap() when available. In case of success set $\ast$bufptr to the read or mmapped buffer, and $\ast$size to the size in bytes of the buffer in $\ast$bufptr. The returned buffer must be released with \hyperlink{ffmpeg_2libavutil_2file_8h_a12e643af4a329ae6d1d567d8a782af1e}{av\+\_\+file\+\_\+unmap()}.


\begin{DoxyParams}{Parameters}
{\em log\+\_\+offset} & loglevel offset used for logging \\
\hline
{\em log\+\_\+ctx} & context used for logging \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a non negative number in case of success, a negative value corresponding to an A\+V\+E\+R\+R\+OR error code in case of failure 
\end{DoxyReturn}
\index{ffmpeg/libavutil/file.\+h@{ffmpeg/libavutil/file.\+h}!av\+\_\+file\+\_\+unmap@{av\+\_\+file\+\_\+unmap}}
\index{av\+\_\+file\+\_\+unmap@{av\+\_\+file\+\_\+unmap}!ffmpeg/libavutil/file.\+h@{ffmpeg/libavutil/file.\+h}}
\subsubsection[{\texorpdfstring{av\+\_\+file\+\_\+unmap(uint8\+\_\+t $\ast$bufptr, size\+\_\+t size)}{av_file_unmap(uint8_t *bufptr, size_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} av\+\_\+file\+\_\+unmap (
\begin{DoxyParamCaption}
\item[{{\bf uint8\+\_\+t} $\ast$}]{bufptr, }
\item[{size\+\_\+t}]{size}
\end{DoxyParamCaption}
)}\hypertarget{ffmpeg_2libavutil_2file_8h_a12e643af4a329ae6d1d567d8a782af1e}{}\label{ffmpeg_2libavutil_2file_8h_a12e643af4a329ae6d1d567d8a782af1e}
Unmap or free the buffer bufptr created by \hyperlink{ffmpeg_2libavutil_2file_8h_a20ab80637ab92af5fbbe4c00be406ad3}{av\+\_\+file\+\_\+map()}.


\begin{DoxyParams}{Parameters}
{\em size} & size in bytes of bufptr, must be the same as returned by \hyperlink{ffmpeg_2libavutil_2file_8h_a20ab80637ab92af5fbbe4c00be406ad3}{av\+\_\+file\+\_\+map()} \\
\hline
\end{DoxyParams}
\index{ffmpeg/libavutil/file.\+h@{ffmpeg/libavutil/file.\+h}!av\+\_\+tempfile@{av\+\_\+tempfile}}
\index{av\+\_\+tempfile@{av\+\_\+tempfile}!ffmpeg/libavutil/file.\+h@{ffmpeg/libavutil/file.\+h}}
\subsubsection[{\texorpdfstring{av\+\_\+tempfile(const char $\ast$prefix, char $\ast$$\ast$filename, int log\+\_\+offset, void $\ast$log\+\_\+ctx)}{av_tempfile(const char *prefix, char **filename, int log_offset, void *log_ctx)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int} av\+\_\+tempfile (
\begin{DoxyParamCaption}
\item[{{\bf const} char $\ast$}]{prefix, }
\item[{char $\ast$$\ast$}]{filename, }
\item[{{\bf int}}]{log\+\_\+offset, }
\item[{{\bf void} $\ast$}]{log\+\_\+ctx}
\end{DoxyParamCaption}
)}\hypertarget{ffmpeg_2libavutil_2file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}{}\label{ffmpeg_2libavutil_2file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}
Wrapper to work around the lack of mkstemp() on mingw. Also, tries to create file in /tmp first, if possible. $\ast$prefix can be a character constant; $\ast$filename will be allocated internally. \begin{DoxyReturn}{Returns}
file descriptor of opened file (or -\/1 on error) and opened file name in $\ast$$\ast$filename. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
On very old libcs it is necessary to set a secure umask before calling this, \hyperlink{ffmpeg_2libavutil_2file_8h_a8c2cb7d30f32e871d353c2f2b2dd6ba2}{av\+\_\+tempfile()} can\textquotesingle{}t call umask itself as it is used in libraries and could interfere with the calling application. 
\end{DoxyNote}
