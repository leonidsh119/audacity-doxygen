\hypertarget{group__flac__callbacks}{}\section{F\+L\+A\+C/callback.h\+: I/O callback structures}
\label{group__flac__callbacks}\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}


This module defines the structures for describing I/O callbacks to the other \hyperlink{namespace_f_l_a_c}{F\+L\+AC} interfaces.  


\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_f_l_a_c_____i_o_callbacks}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callbacks}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$ \hyperlink{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle}
\item 
typedef size\+\_\+t($\ast$ \hyperlink{group__flac__callbacks_ga49d95218a6c09b215cd92cc96de71bf9}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read}) (\hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$ptr, size\+\_\+t \hyperlink{group__lavu__mem_ga854352f53b148adc24983a58a1866d66}{size}, size\+\_\+t \hyperlink{group__lavu__mem_ga79fd723df92f68cf8a6207a1d98b4c01}{nmemb}, \hyperlink{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)
\item 
typedef size\+\_\+t($\ast$ \hyperlink{group__flac__callbacks_gad991792235879aecae289b56a112e1b8}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write}) (\hyperlink{getopt1_8c_a2c212835823e3c54a8ab6d95c652660e}{const} \hyperlink{sound_8c_ae35f5844602719cf66324f4de2a658b3}{void} $\ast$ptr, size\+\_\+t \hyperlink{group__lavu__mem_ga854352f53b148adc24983a58a1866d66}{size}, size\+\_\+t \hyperlink{group__lavu__mem_ga79fd723df92f68cf8a6207a1d98b4c01}{nmemb}, \hyperlink{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)
\item 
typedef \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int}($\ast$ \hyperlink{group__flac__callbacks_gab3942bbbd6ae09bcefe7cb3a0060c49c}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek}) (\hyperlink{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle, \hyperlink{ordinals_8h_a12b57f75f760b9062a13bcda1bdb3f3e}{F\+L\+A\+C\+\_\+\+\_\+int64} \hyperlink{layer12_8c_a33d71f23ba2052d17f0b754dc35265b0}{offset}, \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int} whence)
\item 
typedef \hyperlink{ordinals_8h_a12b57f75f760b9062a13bcda1bdb3f3e}{F\+L\+A\+C\+\_\+\+\_\+int64}($\ast$ \hyperlink{group__flac__callbacks_ga45314930cabc2e9c04867eae6bca309f}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell}) (\hyperlink{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)
\item 
typedef \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int}($\ast$ \hyperlink{group__flac__callbacks_ga00ae3b3d373e691908e9539ebf720675}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Eof}) (\hyperlink{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)
\item 
typedef \hyperlink{xmltok_8h_a5a0d4a5641ce434f1d23533f2b2e6653}{int}($\ast$ \hyperlink{group__flac__callbacks_ga0032267fac38220689778833e08f7387}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close}) (\hyperlink{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This module defines the structures for describing I/O callbacks to the other \hyperlink{namespace_f_l_a_c}{F\+L\+AC} interfaces. 

The purpose of the I/O callback functions is to create a common way for the metadata interfaces to handle I/O.

Originally the metadata interfaces required filenames as the way of specifying \hyperlink{namespace_f_l_a_c}{F\+L\+AC} files to operate on. This is problematic in some environments so there is an additional option to specify a set of callbacks for doing I/O on the \hyperlink{namespace_f_l_a_c}{F\+L\+AC} file, instead of the filename.

In addition to the callbacks, a F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle type is defined as an opaque structure for a data source.

The callback function prototypes are similar (but not identical) to the stdio functions fread, fwrite, fseek, ftell, feof, and fclose. If you use stdio streams to implement the callbacks, you can pass fread, fwrite, and fclose anywhere a F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read, F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write, or F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close is required, and a F\+I\+L\+E$\ast$ anywhere a F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle is required. \begin{DoxyWarning}{Warning}
You generally C\+A\+N\+N\+OT directly use fseek or ftell for F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek or F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell since on most systems these use 32-\/bit offsets and \hyperlink{namespace_f_l_a_c}{F\+L\+AC} requires 64-\/bit offsets to deal with large files. You will have to find an equivalent function (e.\+g. ftello), or write a wrapper. The same is true for feof() since this is usually implemented as a macro, not as a function whose address can be taken. 
\end{DoxyWarning}


\subsection{Typedef Documentation}
\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}!F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close}}
\index{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close}!F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}
\subsubsection[{\texorpdfstring{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close}{FLAC__IOCallback_Close}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf int}($\ast$ F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Close) ({\bf F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)}\hypertarget{group__flac__callbacks_ga0032267fac38220689778833e08f7387}{}\label{group__flac__callbacks_ga0032267fac38220689778833e08f7387}
Signature for the close callback. The signature and semantics match P\+O\+S\+IX \hyperlink{conv2dtest_8m_ae93e9d524fd1ef618af3d5070a8126eb}{fclose()} implementations and can generally be used interchangeably.


\begin{DoxyParams}{Parameters}
{\em handle} & The handle to the data source. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em int} & {\ttfamily 0} on success, {\ttfamily E\+OF} on error. \\
\hline
\end{DoxyRetVals}


Definition at line 160 of file callback.\+h.

\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}!F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Eof@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Eof}}
\index{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Eof@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Eof}!F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}
\subsubsection[{\texorpdfstring{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Eof}{FLAC__IOCallback_Eof}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf int}($\ast$ F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Eof) ({\bf F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)}\hypertarget{group__flac__callbacks_ga00ae3b3d373e691908e9539ebf720675}{}\label{group__flac__callbacks_ga00ae3b3d373e691908e9539ebf720675}
Signature for the E\+OF callback. The signature and semantics mostly match P\+O\+S\+IX feof() but W\+A\+T\+C\+H\+O\+UT\+: on many systems, feof() is a macro, so in this case a wrapper function must be provided instead.


\begin{DoxyParams}{Parameters}
{\em handle} & The handle to the data source. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em int} & {\ttfamily 0} if not at end of file, nonzero if at end of file. \\
\hline
\end{DoxyRetVals}


Definition at line 150 of file callback.\+h.

\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}!F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read}}
\index{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read}!F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}
\subsubsection[{\texorpdfstring{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read}{FLAC__IOCallback_Read}}]{\setlength{\rightskip}{0pt plus 5cm}typedef size\+\_\+t($\ast$ F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Read) ({\bf void} $\ast$ptr, size\+\_\+t {\bf size}, size\+\_\+t {\bf nmemb}, {\bf F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)}\hypertarget{group__flac__callbacks_ga49d95218a6c09b215cd92cc96de71bf9}{}\label{group__flac__callbacks_ga49d95218a6c09b215cd92cc96de71bf9}
Signature for the read callback. The signature and semantics match P\+O\+S\+IX fread() implementations and can generally be used interchangeably.


\begin{DoxyParams}{Parameters}
{\em ptr} & The address of the read buffer. \\
\hline
{\em size} & The size of the records to be read. \\
\hline
{\em nmemb} & The number of records to be read. \\
\hline
{\em handle} & The handle to the data source. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em size\+\_\+t} & The number of records read. \\
\hline
\end{DoxyRetVals}


Definition at line 102 of file callback.\+h.

\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}!F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek}}
\index{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek}!F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}
\subsubsection[{\texorpdfstring{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek}{FLAC__IOCallback_Seek}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf int}($\ast$ F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Seek) ({\bf F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle, {\bf F\+L\+A\+C\+\_\+\+\_\+int64} {\bf offset}, {\bf int} whence)}\hypertarget{group__flac__callbacks_gab3942bbbd6ae09bcefe7cb3a0060c49c}{}\label{group__flac__callbacks_gab3942bbbd6ae09bcefe7cb3a0060c49c}
Signature for the seek callback. The signature and semantics mostly match P\+O\+S\+IX fseek() W\+I\+TH O\+NE I\+M\+P\+O\+R\+T\+A\+NT E\+X\+C\+E\+P\+T\+I\+ON\+: the offset is a 64-\/bit type whereas fseek() is generally \textquotesingle{}long\textquotesingle{} and 32-\/bits wide.


\begin{DoxyParams}{Parameters}
{\em handle} & The handle to the data source. \\
\hline
{\em offset} & The new position, relative to {\itshape whence} \\
\hline
{\em whence} & {\ttfamily S\+E\+E\+K\+\_\+\+S\+ET}, {\ttfamily S\+E\+E\+K\+\_\+\+C\+UR}, or {\ttfamily S\+E\+E\+K\+\_\+\+E\+ND} \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em int} & {\ttfamily 0} on success, {\ttfamily -\/1} on error. \\
\hline
\end{DoxyRetVals}


Definition at line 128 of file callback.\+h.

\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}!F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell}}
\index{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell}!F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}
\subsubsection[{\texorpdfstring{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell}{FLAC__IOCallback_Tell}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf F\+L\+A\+C\+\_\+\+\_\+int64}($\ast$ F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Tell) ({\bf F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)}\hypertarget{group__flac__callbacks_ga45314930cabc2e9c04867eae6bca309f}{}\label{group__flac__callbacks_ga45314930cabc2e9c04867eae6bca309f}
Signature for the tell callback. The signature and semantics mostly match P\+O\+S\+IX ftell() W\+I\+TH O\+NE I\+M\+P\+O\+R\+T\+A\+NT E\+X\+C\+E\+P\+T\+I\+ON\+: the offset is a 64-\/bit type whereas ftell() is generally \textquotesingle{}long\textquotesingle{} and 32-\/bits wide.


\begin{DoxyParams}{Parameters}
{\em handle} & The handle to the data source. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em F\+L\+A\+C\+\_\+\+\_\+int64} & The current position on success, {\ttfamily -\/1} on error. \\
\hline
\end{DoxyRetVals}


Definition at line 139 of file callback.\+h.

\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}!F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write}}
\index{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write}!F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}
\subsubsection[{\texorpdfstring{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write}{FLAC__IOCallback_Write}}]{\setlength{\rightskip}{0pt plus 5cm}typedef size\+\_\+t($\ast$ F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Callback\+\_\+\+Write) ({\bf const} {\bf void} $\ast$ptr, size\+\_\+t {\bf size}, size\+\_\+t {\bf nmemb}, {\bf F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle} handle)}\hypertarget{group__flac__callbacks_gad991792235879aecae289b56a112e1b8}{}\label{group__flac__callbacks_gad991792235879aecae289b56a112e1b8}
Signature for the write callback. The signature and semantics match P\+O\+S\+IX fwrite() implementations and can generally be used interchangeably.


\begin{DoxyParams}{Parameters}
{\em ptr} & The address of the write buffer. \\
\hline
{\em size} & The size of the records to be written. \\
\hline
{\em nmemb} & The number of records to be written. \\
\hline
{\em handle} & The handle to the data source. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em size\+\_\+t} & The number of records written. \\
\hline
\end{DoxyRetVals}


Definition at line 115 of file callback.\+h.

\index{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}!F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle}}
\index{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle@{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle}!F\+L\+A\+C/callback.\+h\+: I/\+O callback structures@{F\+L\+A\+C/callback.\+h\+: I/\+O callback structures}}
\subsubsection[{\texorpdfstring{F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle}{FLAC__IOHandle}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf void}$\ast$ {\bf F\+L\+A\+C\+\_\+\+\_\+\+I\+O\+Handle}}\hypertarget{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}{}\label{group__flac__callbacks_ga4c329c3168dee6e352384c5e9306260d}
This is the opaque handle type used by the callbacks. Typically this is a {\ttfamily F\+I\+L\+E$\ast$} or address of a file descriptor. 

Definition at line 89 of file callback.\+h.

