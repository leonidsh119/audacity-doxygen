<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="vorbisenc_8c" kind="file" language="C++">
    <compoundname>vorbisenc.c</compoundname>
    <includes local="no">stdlib.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">math.h</includes>
    <includes refid="codec_8h" local="yes">vorbis/codec.h</includes>
    <includes refid="vorbisenc_8h" local="yes">vorbis/vorbisenc.h</includes>
    <includes refid="codec__internal_8h" local="yes">codec_internal.h</includes>
    <includes refid="os_8h" local="yes">os.h</includes>
    <includes refid="misc_8h" local="yes">misc.h</includes>
    <includes refid="setup__44_8h" local="yes">modes/setup_44.h</includes>
    <includes refid="setup__44u_8h" local="yes">modes/setup_44u.h</includes>
    <includes refid="setup__44p51_8h" local="yes">modes/setup_44p51.h</includes>
    <includes refid="setup__32_8h" local="yes">modes/setup_32.h</includes>
    <includes refid="setup__8_8h" local="yes">modes/setup_8.h</includes>
    <includes refid="setup__11_8h" local="yes">modes/setup_11.h</includes>
    <includes refid="setup__16_8h" local="yes">modes/setup_16.h</includes>
    <includes refid="setup__22_8h" local="yes">modes/setup_22.h</includes>
    <includes refid="setup___x_8h" local="yes">modes/setup_X.h</includes>
    <incdepgraph>
      <node id="23864">
        <label>residue_16.h</label>
        <link refid="residue__16_8h"/>
      </node>
      <node id="23866">
        <label>modes/setup_X.h</label>
        <link refid="setup___x_8h"/>
      </node>
      <node id="23829">
        <label>sys/types.h</label>
        <link refid="lib-src_2libvorbis_2macos_2compat_2sys_2_types_8h"/>
        <childnode refid="23830" relation="include">
        </childnode>
        <childnode refid="23831" relation="include">
        </childnode>
        <childnode refid="23820" relation="include">
        </childnode>
      </node>
      <node id="23856">
        <label>modes/setup_32.h</label>
        <link refid="setup__32_8h"/>
      </node>
      <node id="23839">
        <label>backends.h</label>
        <link refid="backends_8h"/>
        <childnode refid="23833" relation="include">
        </childnode>
      </node>
      <node id="23862">
        <label>modes/setup_16.h</label>
        <link refid="setup__16_8h"/>
        <childnode refid="23863" relation="include">
        </childnode>
        <childnode refid="23864" relation="include">
        </childnode>
      </node>
      <node id="23828">
        <label>stdint.h</label>
      </node>
      <node id="23819">
        <label>stdlib.h</label>
      </node>
      <node id="23832">
        <label>vorbis/vorbisenc.h</label>
        <link refid="vorbisenc_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
      </node>
      <node id="23834">
        <label>envelope.h</label>
        <link refid="lib-src_2libvorbis_2lib_2_envelope_8h"/>
        <childnode refid="23835" relation="include">
        </childnode>
      </node>
      <node id="23865">
        <label>modes/setup_22.h</label>
        <link refid="setup__22_8h"/>
      </node>
      <node id="23842">
        <label>misc.h</label>
        <link refid="misc_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
      </node>
      <node id="23848">
        <label>books/coupled/res_books_stereo.h</label>
        <link refid="res__books__stereo_8h"/>
        <childnode refid="23836" relation="include">
        </childnode>
      </node>
      <node id="23822">
        <label>vorbis/codec.h</label>
        <link refid="codec_8h"/>
        <childnode refid="23823" relation="include">
        </childnode>
      </node>
      <node id="23854">
        <label>modes/residue_44p51.h</label>
        <link refid="residue__44p51_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
        <childnode refid="23839" relation="include">
        </childnode>
        <childnode refid="23855" relation="include">
        </childnode>
      </node>
      <node id="23824">
        <label>stddef.h</label>
      </node>
      <node id="23855">
        <label>books/coupled/res_books_51.h</label>
        <link refid="res__books__51_8h"/>
      </node>
      <node id="23857">
        <label>modes/setup_8.h</label>
        <link refid="setup__8_8h"/>
        <childnode refid="23858" relation="include">
        </childnode>
        <childnode refid="23859" relation="include">
        </childnode>
      </node>
      <node id="23831">
        <label>alloca.h</label>
      </node>
      <node id="23825">
        <label>ogg/os_types.h</label>
        <link refid="os__types_8h"/>
        <childnode refid="23826" relation="include">
        </childnode>
      </node>
      <node id="23836">
        <label>codebook.h</label>
        <link refid="codebook_8h"/>
        <childnode refid="23823" relation="include">
        </childnode>
      </node>
      <node id="23847">
        <label>modes/residue_44.h</label>
        <link refid="residue__44_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
        <childnode refid="23839" relation="include">
        </childnode>
        <childnode refid="23848" relation="include">
        </childnode>
      </node>
      <node id="23858">
        <label>psych_8.h</label>
        <link refid="psych__8_8h"/>
      </node>
      <node id="23846">
        <label>books/floor/floor_books.h</label>
        <link refid="floor__books_8h"/>
        <childnode refid="23836" relation="include">
        </childnode>
      </node>
      <node id="23853">
        <label>modes/setup_44p51.h</label>
        <link refid="setup__44p51_8h"/>
        <childnode refid="23854" relation="include">
        </childnode>
      </node>
      <node id="23830">
        <label>MacTypes.h</label>
      </node>
      <node id="23820">
        <label>string.h</label>
      </node>
      <node id="23851">
        <label>modes/residue_44u.h</label>
        <link refid="residue__44u_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
        <childnode refid="23839" relation="include">
        </childnode>
        <childnode refid="23852" relation="include">
        </childnode>
      </node>
      <node id="23837">
        <label>psy.h</label>
        <link refid="psy_8h"/>
        <childnode refid="23838" relation="include">
        </childnode>
        <childnode refid="23839" relation="include">
        </childnode>
        <childnode refid="23834" relation="include">
        </childnode>
      </node>
      <node id="23852">
        <label>books/uncoupled/res_books_uncoupled.h</label>
        <link refid="res__books__uncoupled_8h"/>
        <childnode refid="23836" relation="include">
        </childnode>
      </node>
      <node id="23850">
        <label>modes/setup_44u.h</label>
        <link refid="setup__44u_8h"/>
        <childnode refid="23851" relation="include">
        </childnode>
      </node>
      <node id="23823">
        <label>ogg/ogg.h</label>
        <link refid="ogg_8h"/>
        <childnode refid="23824" relation="include">
        </childnode>
        <childnode refid="23825" relation="include">
        </childnode>
      </node>
      <node id="23844">
        <label>modes/setup_44.h</label>
        <link refid="setup__44_8h"/>
        <childnode refid="23845" relation="include">
        </childnode>
        <childnode refid="23847" relation="include">
        </childnode>
        <childnode refid="23849" relation="include">
        </childnode>
      </node>
      <node id="23849">
        <label>modes/psych_44.h</label>
        <link refid="psych__44_8h"/>
      </node>
      <node id="23818">
        <label>C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c</label>
        <link refid="vorbisenc.c"/>
        <childnode refid="23819" relation="include">
        </childnode>
        <childnode refid="23820" relation="include">
        </childnode>
        <childnode refid="23821" relation="include">
        </childnode>
        <childnode refid="23822" relation="include">
        </childnode>
        <childnode refid="23832" relation="include">
        </childnode>
        <childnode refid="23833" relation="include">
        </childnode>
        <childnode refid="23841" relation="include">
        </childnode>
        <childnode refid="23842" relation="include">
        </childnode>
        <childnode refid="23844" relation="include">
        </childnode>
        <childnode refid="23850" relation="include">
        </childnode>
        <childnode refid="23853" relation="include">
        </childnode>
        <childnode refid="23856" relation="include">
        </childnode>
        <childnode refid="23857" relation="include">
        </childnode>
        <childnode refid="23860" relation="include">
        </childnode>
        <childnode refid="23862" relation="include">
        </childnode>
        <childnode refid="23865" relation="include">
        </childnode>
        <childnode refid="23866" relation="include">
        </childnode>
      </node>
      <node id="23838">
        <label>smallft.h</label>
        <link refid="smallft_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
      </node>
      <node id="23821">
        <label>math.h</label>
      </node>
      <node id="23840">
        <label>bitrate.h</label>
        <link refid="bitrate_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
        <childnode refid="23833" relation="include">
        </childnode>
        <childnode refid="23841" relation="include">
        </childnode>
      </node>
      <node id="23861">
        <label>psych_11.h</label>
        <link refid="psych__11_8h"/>
      </node>
      <node id="23859">
        <label>residue_8.h</label>
        <link refid="residue__8_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
        <childnode refid="23839" relation="include">
        </childnode>
      </node>
      <node id="23843">
        <label>highlevel.h</label>
        <link refid="highlevel_8h"/>
      </node>
      <node id="23841">
        <label>os.h</label>
        <link refid="os_8h"/>
        <childnode refid="23821" relation="include">
        </childnode>
        <childnode refid="23825" relation="include">
        </childnode>
        <childnode refid="23842" relation="include">
        </childnode>
      </node>
      <node id="23826">
        <label>ogg/config_types.h</label>
        <link refid="config__types_8h"/>
        <childnode refid="23827" relation="include">
        </childnode>
        <childnode refid="23828" relation="include">
        </childnode>
        <childnode refid="23829" relation="include">
        </childnode>
      </node>
      <node id="23845">
        <label>modes/floor_all.h</label>
        <link refid="floor__all_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
        <childnode refid="23839" relation="include">
        </childnode>
        <childnode refid="23846" relation="include">
        </childnode>
      </node>
      <node id="23833">
        <label>codec_internal.h</label>
        <link refid="codec__internal_8h"/>
        <childnode refid="23834" relation="include">
        </childnode>
        <childnode refid="23836" relation="include">
        </childnode>
        <childnode refid="23837" relation="include">
        </childnode>
        <childnode refid="23840" relation="include">
        </childnode>
        <childnode refid="23843" relation="include">
        </childnode>
      </node>
      <node id="23835">
        <label>mdct.h</label>
        <link refid="mdct_8h"/>
        <childnode refid="23822" relation="include">
        </childnode>
      </node>
      <node id="23860">
        <label>modes/setup_11.h</label>
        <link refid="setup__11_8h"/>
        <childnode refid="23861" relation="include">
        </childnode>
      </node>
      <node id="23827">
        <label>inttypes.h</label>
      </node>
      <node id="23863">
        <label>psych_16.h</label>
        <link refid="psych__16_8h"/>
      </node>
    </incdepgraph>
    <innerclass refid="structstatic__bookblock" prot="public">static_bookblock</innerclass>
    <innerclass refid="structvorbis__residue__template" prot="public">vorbis_residue_template</innerclass>
    <innerclass refid="structvorbis__mapping__template" prot="public">vorbis_mapping_template</innerclass>
    <innerclass refid="structvp__adjblock" prot="public">vp_adjblock</innerclass>
    <innerclass refid="structcompandblock" prot="public">compandblock</innerclass>
    <innerclass refid="structatt3" prot="public">att3</innerclass>
    <innerclass refid="structadj3" prot="public">adj3</innerclass>
    <innerclass refid="structadj__stereo" prot="public">adj_stereo</innerclass>
    <innerclass refid="structnoiseguard" prot="public">noiseguard</innerclass>
    <innerclass refid="structnoise3" prot="public">noise3</innerclass>
    <innerclass refid="structve__setup__data__template" prot="public">ve_setup_data_template</innerclass>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="vorbisenc_8c_1a3f75775ea06e75038641b7fb881bf550" prot="public" static="no">
        <type>struct <ref refid="structvp__adjblock" kindref="compound">vp_adjblock</ref></type>
        <definition>typedef struct vp_adjblock  vp_adjblock</definition>
        <argsstring></argsstring>
        <name>vp_adjblock</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="56" column="1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="vorbisenc_8c_1a9a65fa41dbab90fc0b18563e6992d671" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structvorbis__info__mode" kindref="compound">vorbis_info_mode</ref></type>
        <definition>const vorbis_info_mode _mode_template[2]</definition>
        <argsstring>[2]</argsstring>
        <name>_mode_template</name>
        <initializer>={
  {0,0,0,0},
  {1,0,0,1}
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="145" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="145" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="vorbisenc_8c_1aacd30b20645972d41ef529bb50f8c8b1" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structvorbis__info__mapping0" kindref="compound">vorbis_info_mapping0</ref></type>
        <definition>const vorbis_info_mapping0 _map_nominal[2]</definition>
        <argsstring>[2]</argsstring>
        <name>_map_nominal</name>
        <initializer>={
  {1, {0,0}, {0}, {0}, 1,{0},{1}},
  {1, {0,0}, {1}, {1}, 1,{0},{1}}
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="150" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="150" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="vorbisenc_8c_1af8f95cc074c75da11c131e7ad1fa469a" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref> *<ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref></type>
        <definition>const ve_setup_data_template* const setup_list[]</definition>
        <argsstring>[]</argsstring>
        <name>setup_list</name>
        <initializer>={
  &amp;ve_setup_44_stereo,
  &amp;ve_setup_44_51,
  &amp;ve_setup_44_uncoupled,

  &amp;ve_setup_32_stereo,
  &amp;ve_setup_32_uncoupled,

  &amp;ve_setup_22_stereo,
  &amp;ve_setup_22_uncoupled,
  &amp;ve_setup_16_stereo,
  &amp;ve_setup_16_uncoupled,

  &amp;ve_setup_11_stereo,
  &amp;ve_setup_11_uncoupled,
  &amp;ve_setup_8_stereo,
  &amp;ve_setup_8_uncoupled,

  &amp;ve_setup_X_stereo,
  &amp;ve_setup_X_uncoupled,
  &amp;ve_setup_XX_stereo,
  &amp;ve_setup_XX_uncoupled,
  0
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="165" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="165" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="vorbisenc_8c_1af07fa5b28d32d2078253e0e3e9f034af" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_floor_setup</definition>
        <argsstring>(vorbis_info *vi, int s, const static_codebook *const *const *const books, const vorbis_info_floor1 *in, const int *x)</argsstring>
        <name>vorbis_encode_floor_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structstatic__codebook" kindref="compound">static_codebook</ref> *<ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> *<ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> *<ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref></type>
          <declname>books</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structvorbis__info__floor1" kindref="compound">vorbis_info_floor1</ref> *</type>
          <declname>in</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>x</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="190" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="190" bodyend="226"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1ae14b010eb4b08c9434cdc687b43c28fc" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_global_psych_setup</definition>
        <argsstring>(vorbis_info *vi, double s, const vorbis_info_psy_global *in, const double *x)</argsstring>
        <name>vorbis_encode_global_psych_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structvorbis__info__psy__global" kindref="compound">vorbis_info_psy_global</ref> *</type>
          <declname>in</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> double *</type>
          <declname>x</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="228" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="228" bodyend="253"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a29d6e8332f5f3e1c83747b00430bed14" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_global_stereo</definition>
        <argsstring>(vorbis_info *vi, const highlevel_encode_setup *const hi, const adj_stereo *p)</argsstring>
        <name>vorbis_encode_global_stereo</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref> *<ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref></type>
          <declname>hi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structadj__stereo" kindref="compound">adj_stereo</ref> *</type>
          <declname>p</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="255" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="255" bodyend="302"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a9b6ce1bb4be7cbc3a39cfee0693a11c1" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_psyset_setup</definition>
        <argsstring>(vorbis_info *vi, double s, const int *nn_start, const int *nn_partition, const double *nn_thresh, int block)</argsstring>
        <name>vorbis_encode_psyset_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>nn_start</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>nn_partition</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> double *</type>
          <declname>nn_thresh</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>block</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="304" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="304" bodyend="332"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a5e92a2fd0307aa740285df9b10773213" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_tonemask_setup</definition>
        <argsstring>(vorbis_info *vi, double s, int block, const att3 *att, const int *max, const vp_adjblock *in)</argsstring>
        <name>vorbis_encode_tonemask_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>block</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structatt3" kindref="compound">att3</ref> *</type>
          <declname>att</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>max</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structvp__adjblock" kindref="compound">vp_adjblock</ref> *</type>
          <declname>in</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="334" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="334" bodyend="356"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1aa48b5c23ed7be92e6d4f5e3dcca1e239" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_compand_setup</definition>
        <argsstring>(vorbis_info *vi, double s, int block, const compandblock *in, const double *x)</argsstring>
        <name>vorbis_encode_compand_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>block</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structcompandblock" kindref="compound">compandblock</ref> *</type>
          <declname>in</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> double *</type>
          <declname>x</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="359" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="359" bodyend="379"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1adfa5e2501236096523fd1b933ca101a8" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_peak_setup</definition>
        <argsstring>(vorbis_info *vi, double s, int block, const int *suppress)</argsstring>
        <name>vorbis_encode_peak_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>block</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>suppress</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="381" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="381" bodyend="391"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1aa6ee7a72eb8f4e7cc3dbdf2a2c28dbdd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_noisebias_setup</definition>
        <argsstring>(vorbis_info *vi, double s, int block, const int *suppress, const noise3 *in, const noiseguard *guard, double userbias)</argsstring>
        <name>vorbis_encode_noisebias_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>block</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>suppress</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structnoise3" kindref="compound">noise3</ref> *</type>
          <declname>in</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structnoiseguard" kindref="compound">noiseguard</ref> *</type>
          <declname>guard</declname>
        </param>
        <param>
          <type>double</type>
          <declname>userbias</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="393" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="393" bodyend="423"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1ab52d253d3297adba31a7c04332cca8c5" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_ath_setup</definition>
        <argsstring>(vorbis_info *vi, int block)</argsstring>
        <name>vorbis_encode_ath_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>block</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="425" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="425" bodyend="432"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a1b374076376c8c55aee3c627426d03b7" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>static int book_dup_or_new</definition>
        <argsstring>(codec_setup_info *ci, const static_codebook *book)</argsstring>
        <name>book_dup_or_new</name>
        <param>
          <type><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref> *</type>
          <declname>ci</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structstatic__codebook" kindref="compound">static_codebook</ref> *</type>
          <declname>book</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="435" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="435" bodyend="441"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a54fa3e9275e968bbac4e457b1f477a46" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_blocksize_setup</definition>
        <argsstring>(vorbis_info *vi, double s, const int *shortb, const int *longb)</argsstring>
        <name>vorbis_encode_blocksize_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>shortb</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>longb</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="443" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="443" bodyend="454"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a28464421984167a041468f5709d43d19" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_residue_setup</definition>
        <argsstring>(vorbis_info *vi, int number, int block, const vorbis_residue_template *res)</argsstring>
        <name>vorbis_encode_residue_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>number</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>block</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structvorbis__residue__template" kindref="compound">vorbis_residue_template</ref> *</type>
          <declname>res</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="456" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="456" bodyend="586"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a171a3a9615d3053a2ff0446897f06322" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_map_n_res_setup</definition>
        <argsstring>(vorbis_info *vi, double s, const vorbis_mapping_template *maps)</argsstring>
        <name>vorbis_encode_map_n_res_setup</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>double</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="structvorbis__mapping__template" kindref="compound">vorbis_mapping_template</ref> *</type>
          <declname>maps</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="589" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="589" bodyend="616"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a4d0d2dcc6b1cbbe1ab362d751d01dcd9" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>double</type>
        <definition>static double setting_to_approx_bitrate</definition>
        <argsstring>(vorbis_info *vi)</argsstring>
        <name>setting_to_approx_bitrate</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="618" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="618" bodyend="631"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a809ef980b16726d654213ad911bb42a3" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
        <definition>static const void* get_setup_template</definition>
        <argsstring>(long ch, long srate, double req, int q_or_bitrate, double *base_setting)</argsstring>
        <name>get_setup_template</name>
        <param>
          <type>long</type>
          <declname>ch</declname>
        </param>
        <param>
          <type>long</type>
          <declname>srate</declname>
        </param>
        <param>
          <type>double</type>
          <declname>req</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>q_or_bitrate</declname>
        </param>
        <param>
          <type>double *</type>
          <declname>base_setting</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="633" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="633" bodyend="672"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1ac3953ff69d05864e78d1858a544ed619" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int vorbis_encode_setup_init</definition>
        <argsstring>(vorbis_info *vi)</argsstring>
        <name>vorbis_encode_setup_init</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This function performs the last stage of three-step encoding setup, as described in the API overview under managed bitrate modes.</para><para>Before this function is called, the <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct should be initialized by using <ref refid="codec_8h_1af0ed4e74fe68802c7d337a2645e759d6" kindref="member">vorbis_info_init()</ref> from the libvorbis API, one of <ref refid="vorbisenc_8h_1ac73714f24500e18024e83104e9e09485" kindref="member">vorbis_encode_setup_managed()</ref> or <ref refid="vorbisenc_8h_1a0f7677f216936a6cd7fa28ddbccada74" kindref="member">vorbis_encode_setup_vbr()</ref> called to initialize the high-level encoding setup, and <ref refid="vorbisenc_8h_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl()</ref> called if necessary to make encoding setup changes. <ref refid="vorbisenc_8h_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init()</ref> finalizes the highlevel encoding structure into a complete encoding setup after which the application may make no further setup changes.</para><para>After encoding, <ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear()</ref> should be called.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>vi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to an initialized <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Zero for success, and negative values for failure.</para></simplesect>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EFAULT</parametername>
</parameternamelist>
<parameterdescription>
<para>Internal logic fault; indicates a bug or heap/stack corruption.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>Attempt to use <ref refid="vorbisenc_8h_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init()</ref> without first calling one of <ref refid="vorbisenc_8h_1ac73714f24500e18024e83104e9e09485" kindref="member">vorbis_encode_setup_managed()</ref> or <ref refid="vorbisenc_8h_1a0f7677f216936a6cd7fa28ddbccada74" kindref="member">vorbis_encode_setup_vbr()</ref> to initialize the high-level encoding setup </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="681" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="681" bodyend="859"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a6c94530cfb8eb7bfb25a60a3c9bd3d9a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void vorbis_encode_setup_setting</definition>
        <argsstring>(vorbis_info *vi, long channels, long rate)</argsstring>
        <name>vorbis_encode_setup_setting</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>long</type>
          <declname>channels</declname>
        </param>
        <param>
          <type>long</type>
          <declname>rate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="861" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="861" bodyend="900"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a0f7677f216936a6cd7fa28ddbccada74" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int vorbis_encode_setup_vbr</definition>
        <argsstring>(vorbis_info *vi, long channels, long rate, float quality)</argsstring>
        <name>vorbis_encode_setup_vbr</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>long</type>
          <declname>channels</declname>
        </param>
        <param>
          <type>long</type>
          <declname>rate</declname>
        </param>
        <param>
          <type>float</type>
          <declname>quality</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This function performs step-one of a three-step variable bitrate (quality-based) encode setup. It functions similarly to the one-step setup performed by <ref refid="vorbisenc_8h_1ab4e3d96c3008a29c615271d1f551c2a0" kindref="member">vorbis_encode_init_vbr()</ref> but allows an application to make further encode setup tweaks using <ref refid="vorbisenc_8h_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl()</ref> before finally calling <ref refid="vorbisenc_8c_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init</ref> to complete the setup process.</para><para>Before this function is called, the <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct should be initialized by using <ref refid="codec_8h_1af0ed4e74fe68802c7d337a2645e759d6" kindref="member">vorbis_info_init()</ref> from the libvorbis API. After encoding, <ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear()</ref> should be called.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>vi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to an initialized <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>channels</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of channels to be encoded. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rate</parametername>
</parameternamelist>
<parameterdescription>
<para>The sampling rate of the source audio. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>quality</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired quality level, currently from -0.1 to 1.0 (lo to hi).</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Zero for success, and negative values for failure.</para></simplesect>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EFAULT</parametername>
</parameternamelist>
<parameterdescription>
<para>Internal logic fault; indicates a bug or heap/stack corruption. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>Invalid setup request, eg, out of range argument. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EIMPL</parametername>
</parameternamelist>
<parameterdescription>
<para>Unimplemented mode; unable to comply with quality level request. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="902" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="902" bodyend="921"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1ab4e3d96c3008a29c615271d1f551c2a0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int vorbis_encode_init_vbr</definition>
        <argsstring>(vorbis_info *vi, long channels, long rate, float base_quality)</argsstring>
        <name>vorbis_encode_init_vbr</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>long</type>
          <declname>channels</declname>
        </param>
        <param>
          <type>long</type>
          <declname>rate</declname>
        </param>
        <param>
          <type>float</type>
          <declname>base_quality</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This is the primary function within libvorbisenc for setting up variable bitrate (&quot;quality&quot; based) modes.</para><para>Before this function is called, the <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct should be initialized by using <ref refid="codec_8h_1af0ed4e74fe68802c7d337a2645e759d6" kindref="member">vorbis_info_init()</ref> from the libvorbis API. After encoding, <ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear()</ref> should be called.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>vi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to an initialized <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>channels</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of channels to be encoded. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rate</parametername>
</parameternamelist>
<parameterdescription>
<para>The sampling rate of the source audio. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>base_quality</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired quality level, currently from -0.1 to 1.0 (lo to hi).</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Zero for success, or a negative number for failure.</para></simplesect>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EFAULT</parametername>
</parameternamelist>
<parameterdescription>
<para>Internal logic fault; indicates a bug or heap/stack corruption. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>Invalid setup request, eg, out of range argument. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EIMPL</parametername>
</parameternamelist>
<parameterdescription>
<para>Unimplemented mode; unable to comply with quality level request. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="923" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="923" bodyend="941"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1ac73714f24500e18024e83104e9e09485" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int vorbis_encode_setup_managed</definition>
        <argsstring>(vorbis_info *vi, long channels, long rate, long max_bitrate, long nominal_bitrate, long min_bitrate)</argsstring>
        <name>vorbis_encode_setup_managed</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>long</type>
          <declname>channels</declname>
        </param>
        <param>
          <type>long</type>
          <declname>rate</declname>
        </param>
        <param>
          <type>long</type>
          <declname>max_bitrate</declname>
        </param>
        <param>
          <type>long</type>
          <declname>nominal_bitrate</declname>
        </param>
        <param>
          <type>long</type>
          <declname>min_bitrate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This function performs step-one of a three-step bitrate-managed encode setup. It functions similarly to the one-step setup performed by <ref refid="vorbisenc_8c_1a6571d9c349c540491256f1083e1ede71" kindref="member">vorbis_encode_init</ref> but allows an application to make further encode setup tweaks using <ref refid="vorbisenc_8c_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl</ref> before finally calling <ref refid="vorbisenc_8c_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init</ref> to complete the setup process.</para><para>Before this function is called, the <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct should be initialized by using <ref refid="codec_8h_1af0ed4e74fe68802c7d337a2645e759d6" kindref="member">vorbis_info_init()</ref> from the libvorbis API. After encoding, <ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear()</ref> should be called.</para><para>The max_bitrate, nominal_bitrate, and min_bitrate settings are used to set constraints for the encoded file. This function uses these settings to select the appropriate encoding mode and set it up.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>vi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to an initialized <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>channels</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of channels to be encoded. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rate</parametername>
</parameternamelist>
<parameterdescription>
<para>The sampling rate of the source audio. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_bitrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired maximum bitrate (limit). -1 indicates unset. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nominal_bitrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired average, or central, bitrate. -1 indicates unset. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>min_bitrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired minimum bitrate. -1 indicates unset.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Zero for success, and negative for failure.</para></simplesect>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EFAULT</parametername>
</parameternamelist>
<parameterdescription>
<para>Internal logic fault; indicates a bug or heap/stack corruption. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>Invalid setup request, eg, out of range argument. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EIMPL</parametername>
</parameternamelist>
<parameterdescription>
<para>Unimplemented mode; unable to comply with bitrate request. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="943" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="943" bodyend="988"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a6571d9c349c540491256f1083e1ede71" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int vorbis_encode_init</definition>
        <argsstring>(vorbis_info *vi, long channels, long rate, long max_bitrate, long nominal_bitrate, long min_bitrate)</argsstring>
        <name>vorbis_encode_init</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type>long</type>
          <declname>channels</declname>
        </param>
        <param>
          <type>long</type>
          <declname>rate</declname>
        </param>
        <param>
          <type>long</type>
          <declname>max_bitrate</declname>
        </param>
        <param>
          <type>long</type>
          <declname>nominal_bitrate</declname>
        </param>
        <param>
          <type>long</type>
          <declname>min_bitrate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This is the primary function within libvorbisenc for setting up managed bitrate modes.</para><para>Before this function is called, the <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct should be initialized by using <ref refid="codec_8h_1af0ed4e74fe68802c7d337a2645e759d6" kindref="member">vorbis_info_init()</ref> from the libvorbis API. After encoding, <ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear()</ref> should be called.</para><para>The max_bitrate, nominal_bitrate, and min_bitrate settings are used to set constraints for the encoded file. This function uses these settings to select the appropriate encoding mode and set it up.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>vi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to an initialized <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>channels</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of channels to be encoded. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rate</parametername>
</parameternamelist>
<parameterdescription>
<para>The sampling rate of the source audio. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_bitrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired maximum bitrate (limit). -1 indicates unset. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nominal_bitrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired average, or central, bitrate. -1 indicates unset. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>min_bitrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired minimum bitrate. -1 indicates unset.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Zero for success, and negative values for failure.</para></simplesect>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EFAULT</parametername>
</parameternamelist>
<parameterdescription>
<para>Internal logic fault; indicates a bug or heap/stack corruption. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>Invalid setup request, eg, out of range argument. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EIMPL</parametername>
</parameternamelist>
<parameterdescription>
<para>Unimplemented mode; unable to comply with bitrate request. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="990" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="990" bodyend="1011"/>
      </memberdef>
      <memberdef kind="function" id="vorbisenc_8c_1a5f398a378e20b8ce5e3341a582e773bd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int vorbis_encode_ctl</definition>
        <argsstring>(vorbis_info *vi, int number, void *arg)</argsstring>
        <name>vorbis_encode_ctl</name>
        <param>
          <type><ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> *</type>
          <declname>vi</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>number</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>arg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This function implements a generic interface to miscellaneous encoder settings similar to the classic UNIX &apos;ioctl()&apos; system call. Applications may use <ref refid="vorbisenc_8h_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl()</ref> to query or set bitrate management or quality mode details by using one of several <emphasis>request</emphasis> arguments detailed below. <ref refid="vorbisenc_8h_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl()</ref> must be called after one of <ref refid="vorbisenc_8h_1ac73714f24500e18024e83104e9e09485" kindref="member">vorbis_encode_setup_managed()</ref> or <ref refid="vorbisenc_8h_1a0f7677f216936a6cd7fa28ddbccada74" kindref="member">vorbis_encode_setup_vbr()</ref>. When used to modify settings, <ref refid="vorbisenc_8h_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl()</ref> must be called before <ref refid="vorbisenc_8h_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init()</ref>.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>vi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to an initialized <ref refid="structvorbis__info" kindref="compound">vorbis_info</ref> struct.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>number</parametername>
</parameternamelist>
<parameterdescription>
<para>Specifies the desired action; See <ref refid="vorbisenc_8h_1encctlcodes" kindref="member">the list</ref>of available requests".</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>arg</parametername>
</parameternamelist>
<parameterdescription>
<para>void * pointing to a data structure matching the request argument.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success. Any further return information (such as the result of a query) is placed into the storage pointed to by *arg.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>Invalid argument, or an attempt to modify a setting after calling <ref refid="vorbisenc_8h_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init()</ref>.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>OV_EIMPL</parametername>
</parameternamelist>
<parameterdescription>
<para>Unimplemented or unknown request </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" line="1013" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c" bodystart="1013" bodyend="1215"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/********************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>THIS<sp/>FILE<sp/>IS<sp/>PART<sp/>OF<sp/>THE<sp/>OggVorbis<sp/>SOFTWARE<sp/>CODEC<sp/>SOURCE<sp/>CODE.<sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>USE,<sp/>DISTRIBUTION<sp/>AND<sp/>REPRODUCTION<sp/>OF<sp/>THIS<sp/>LIBRARY<sp/>SOURCE<sp/>IS<sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>GOVERNED<sp/>BY<sp/>A<sp/>BSD-STYLE<sp/>SOURCE<sp/>LICENSE<sp/>INCLUDED<sp/>WITH<sp/>THIS<sp/>SOURCE<sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>IN<sp/>&apos;COPYING&apos;.<sp/>PLEASE<sp/>READ<sp/>THESE<sp/>TERMS<sp/>BEFORE<sp/>DISTRIBUTING.<sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>THE<sp/>OggVorbis<sp/>SOURCE<sp/>CODE<sp/>IS<sp/>(C)<sp/>COPYRIGHT<sp/>1994-2009<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>by<sp/>the<sp/>Xiph.Org<sp/>Foundation<sp/>http://www.xiph.org/<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>********************************************************************</highlight></codeline>
<codeline lineno="12"><highlight class="comment"></highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>function:<sp/>simple<sp/>programmatic<sp/>interface<sp/>for<sp/>encoder<sp/>mode<sp/>setup</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>last<sp/>mod:<sp/>$Id:<sp/>vorbisenc.c<sp/>17028<sp/>2010-03-25<sp/>05:22:15Z<sp/>xiphmont<sp/>$</highlight></codeline>
<codeline lineno="15"><highlight class="comment"></highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="codec_8h" kindref="compound">vorbis/codec.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="vorbisenc_8h" kindref="compound">vorbis/vorbisenc.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="codec__internal_8h" kindref="compound">codec_internal.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="os_8h" kindref="compound">os.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="misc_8h" kindref="compound">misc.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>careful<sp/>with<sp/>this;<sp/>it&apos;s<sp/>using<sp/>static<sp/>array<sp/>sizing<sp/>to<sp/>make<sp/>managing</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/><sp/><sp/>all<sp/>the<sp/>modes<sp/>a<sp/>little<sp/>less<sp/>annoying.<sp/><sp/>If<sp/>we<sp/>use<sp/>a<sp/>residue<sp/>backend</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/><sp/><sp/>with<sp/>&gt;<sp/>12<sp/>partition<sp/>types,<sp/>or<sp/>a<sp/>different<sp/>division<sp/>of<sp/>iteration,</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/><sp/><sp/>this<sp/>needs<sp/>to<sp/>be<sp/>updated.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="structstatic__bookblock" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="35" refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*<ref refid="metrics_8c_1a7a5a6fcbb110088fdfe3966871bdba07" kindref="member">books</ref>[12][4];</highlight></codeline>
<codeline lineno="36"><highlight class="normal">}<sp/><ref refid="structstatic__bookblock" kindref="compound">static_bookblock</ref>;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38" refid="structvorbis__residue__template" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="39" refid="structvorbis__residue__template_1a15084c4bd97066e1bf874f93e41db0ea" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structvorbis__residue__template_1a15084c4bd97066e1bf874f93e41db0ea" kindref="member">res_type</ref>;</highlight></codeline>
<codeline lineno="40" refid="structvorbis__residue__template_1a5da353b9dcda20f8e4e7a4f6087675a0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structvorbis__residue__template_1a5da353b9dcda20f8e4e7a4f6087675a0" kindref="member">limit_type</ref>;<sp/></highlight><highlight class="comment">/*<sp/>0<sp/>lowpass<sp/>limited,<sp/>1<sp/>point<sp/>stereo<sp/>limited<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="structvorbis__residue__template_1ad4e0d91b38da3a639e860eeb75fcd863" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structvorbis__residue__template_1ad4e0d91b38da3a639e860eeb75fcd863" kindref="member">grouping</ref>;</highlight></codeline>
<codeline lineno="42" refid="structvorbis__residue__template_1a7b4e0d90fa41a67a95513cfae4adec59" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__residue0" kindref="compound">vorbis_info_residue0</ref><sp/>*<ref refid="structvorbis__residue__template_1a7b4e0d90fa41a67a95513cfae4adec59" kindref="member">res</ref>;</highlight></codeline>
<codeline lineno="43" refid="structvorbis__residue__template_1a1758621ca074816c2a87102461e408fc" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/><sp/>*<ref refid="structvorbis__residue__template_1a1758621ca074816c2a87102461e408fc" kindref="member">book_aux</ref>;</highlight></codeline>
<codeline lineno="44" refid="structvorbis__residue__template_1ab4ea95da7d287d0dc6df64c957092837" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/><sp/>*<ref refid="structvorbis__residue__template_1ab4ea95da7d287d0dc6df64c957092837" kindref="member">book_aux_managed</ref>;</highlight></codeline>
<codeline lineno="45" refid="structvorbis__residue__template_1ad760c5513a8f21ed9ef3284d0d33c488" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__bookblock" kindref="compound">static_bookblock</ref><sp/>*<ref refid="structvorbis__residue__template_1ad760c5513a8f21ed9ef3284d0d33c488" kindref="member">books_base</ref>;</highlight></codeline>
<codeline lineno="46" refid="structvorbis__residue__template_1a3d33d8f56cfa34dac0c33e11e8323ab6" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__bookblock" kindref="compound">static_bookblock</ref><sp/>*<ref refid="structvorbis__residue__template_1a3d33d8f56cfa34dac0c33e11e8323ab6" kindref="member">books_base_managed</ref>;</highlight></codeline>
<codeline lineno="47"><highlight class="normal">}<sp/><ref refid="structvorbis__residue__template" kindref="compound">vorbis_residue_template</ref>;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49" refid="structvorbis__mapping__template" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="50" refid="structvorbis__mapping__template_1aa3f97dc5e56ab02a477dadbdddc2dd74" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__mapping0" kindref="compound">vorbis_info_mapping0</ref><sp/><sp/><sp/><sp/>*<ref refid="structvorbis__mapping__template_1aa3f97dc5e56ab02a477dadbdddc2dd74" kindref="member">map</ref>;</highlight></codeline>
<codeline lineno="51" refid="structvorbis__mapping__template_1a93ca70f5c4a50d4d75c83cfb62a55327" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__residue__template" kindref="compound">vorbis_residue_template</ref><sp/>*<ref refid="structvorbis__mapping__template_1a93ca70f5c4a50d4d75c83cfb62a55327" kindref="member">res</ref>;</highlight></codeline>
<codeline lineno="52"><highlight class="normal">}<sp/><ref refid="structvorbis__mapping__template" kindref="compound">vorbis_mapping_template</ref>;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54" refid="structvp__adjblock" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structvp__adjblock" kindref="compound">vp_adjblock</ref>{</highlight></codeline>
<codeline lineno="55" refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>[<ref refid="psy_8h_1ae6af2ec0a0f6e0813ae814e9a07c728a" kindref="member">P_BANDS</ref>];</highlight></codeline>
<codeline lineno="56"><highlight class="normal">}<sp/><ref refid="vorbisenc_8c_1a3f75775ea06e75038641b7fb881bf550" kindref="member">vp_adjblock</ref>;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58" refid="structcompandblock" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="59" refid="structcompandblock_1ac6dc1324ecb4f1172c8bde3ae48ed9ab" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1ac39e72a1de1cb50dbdc54b08d0432a24" kindref="member">data</ref>[<ref refid="psy_8h_1a370d177dee7c7401b0c46ed37310d54b" kindref="member">NOISE_COMPAND_LEVELS</ref>];</highlight></codeline>
<codeline lineno="60"><highlight class="normal">}<sp/><ref refid="structcompandblock" kindref="compound">compandblock</ref>;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>high<sp/>level<sp/>configuration<sp/>information<sp/>for<sp/>setting<sp/>things<sp/>up</highlight></codeline>
<codeline lineno="63"><highlight class="comment"><sp/><sp/><sp/>step-by-step<sp/>with<sp/>the<sp/>detailed<sp/>vorbis_encode_ctl<sp/>interface.</highlight></codeline>
<codeline lineno="64"><highlight class="comment"><sp/><sp/><sp/>There&apos;s<sp/>a<sp/>fair<sp/>amount<sp/>of<sp/>redundancy<sp/>such<sp/>that<sp/>interactive<sp/>setup</highlight></codeline>
<codeline lineno="65"><highlight class="comment"><sp/><sp/><sp/>does<sp/>not<sp/>directly<sp/>deal<sp/>with<sp/>any<sp/>vorbis_info<sp/>or<sp/>codec_setup_info</highlight></codeline>
<codeline lineno="66"><highlight class="comment"><sp/><sp/><sp/>initialization;<sp/>it&apos;s<sp/>all<sp/>stored<sp/>(until<sp/>full<sp/>init)<sp/>in<sp/>this<sp/>highlevel</highlight></codeline>
<codeline lineno="67"><highlight class="comment"><sp/><sp/><sp/>setup,<sp/>then<sp/>flushed<sp/>out<sp/>to<sp/>the<sp/>real<sp/>codec<sp/>setup<sp/>structs<sp/>later.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69" refid="structatt3" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="70" refid="structatt3_1a59582b74ab82141600c65f30d8459632" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="filters_8h_1a6cbe32dd86cefd1a8b182b3ee652e9bf" kindref="member">att</ref>[<ref refid="psy_8h_1a179ea3e4fa2cdb1ef235e922ea51405a" kindref="member">P_NOISECURVES</ref>];</highlight></codeline>
<codeline lineno="71" refid="structatt3_1a3f4c1b26c34e25a579287669743f32a4" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structatt3_1a3f4c1b26c34e25a579287669743f32a4" kindref="member">boost</ref>;</highlight></codeline>
<codeline lineno="72" refid="structatt3_1a9149df466d618da5dde12351152ecab4" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structatt3_1a9149df466d618da5dde12351152ecab4" kindref="member">decay</ref>;</highlight></codeline>
<codeline lineno="73"><highlight class="normal">}<sp/><ref refid="structatt3" kindref="compound">att3</ref>;</highlight></codeline>
<codeline lineno="74" refid="structadj3_1a8e4ba16608676b405538b4687c23f810" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1ac39e72a1de1cb50dbdc54b08d0432a24" kindref="member">data</ref>[<ref refid="psy_8h_1a179ea3e4fa2cdb1ef235e922ea51405a" kindref="member">P_NOISECURVES</ref>];<sp/>}<sp/><ref refid="structadj3" kindref="compound">adj3</ref>;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76" refid="structadj__stereo" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="77" refid="structadj__stereo_1a407eb6cd5c50925e4430031d365f075a" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/>pre[<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>];</highlight></codeline>
<codeline lineno="78" refid="structadj__stereo_1a4b578638118067c75ffe2768921f1f9e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/>post[<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>];</highlight></codeline>
<codeline lineno="79" refid="structadj__stereo_1a13ef814e311be6be34a982e89141f8ed" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>kHz[<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>];</highlight></codeline>
<codeline lineno="80" refid="structadj__stereo_1aff4713a11cb5a9d22a61a32f9b20c0d8" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>lowpasskHz[<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>];</highlight></codeline>
<codeline lineno="81"><highlight class="normal">}<sp/><ref refid="structadj__stereo" kindref="compound">adj_stereo</ref>;</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83" refid="structnoiseguard" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="84" refid="structnoiseguard_1a536d7b7c61ad24a4f7b490f663d43dad" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structnoiseguard_1a536d7b7c61ad24a4f7b490f663d43dad" kindref="member">lo</ref>;</highlight></codeline>
<codeline lineno="85" refid="structnoiseguard_1a88d4adfe32e7ee064bf0319b8f41c0ac" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structnoiseguard_1a88d4adfe32e7ee064bf0319b8f41c0ac" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="86" refid="structnoiseguard_1ac88cd650c02dd24cc058373fd693bdca" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structnoiseguard_1ac88cd650c02dd24cc058373fd693bdca" kindref="member">fixed</ref>;</highlight></codeline>
<codeline lineno="87"><highlight class="normal">}<sp/><ref refid="structnoiseguard" kindref="compound">noiseguard</ref>;</highlight></codeline>
<codeline lineno="88" refid="structnoise3" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="89" refid="structnoise3_1a43d278adceb5aa18af0b06faf51aa544" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1ac39e72a1de1cb50dbdc54b08d0432a24" kindref="member">data</ref>[<ref refid="psy_8h_1a179ea3e4fa2cdb1ef235e922ea51405a" kindref="member">P_NOISECURVES</ref>][17];</highlight></codeline>
<codeline lineno="90"><highlight class="normal">}<sp/><ref refid="structnoise3" kindref="compound">noise3</ref>;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92" refid="structve__setup__data__template" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="93" refid="structve__setup__data__template_1a1fae0454f1291ca150015e931e19c9c9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structve__setup__data__template_1a1fae0454f1291ca150015e931e19c9c9" kindref="member">mappings</ref>;</highlight></codeline>
<codeline lineno="94" refid="structve__setup__data__template_1a7a0d9b35ef99f3fa83223093f7d4d8c3" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/>*<ref refid="structve__setup__data__template_1a7a0d9b35ef99f3fa83223093f7d4d8c3" kindref="member">rate_mapping</ref>;</highlight></codeline>
<codeline lineno="95" refid="structve__setup__data__template_1ad56fff2e50fc8c8ecb023810a505e067" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/>*<ref refid="structve__setup__data__template_1ad56fff2e50fc8c8ecb023810a505e067" kindref="member">quality_mapping</ref>;</highlight></codeline>
<codeline lineno="96" refid="structve__setup__data__template_1a19a542524d81938a074503da7b6aeea8" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structve__setup__data__template_1a19a542524d81938a074503da7b6aeea8" kindref="member">coupling_restriction</ref>;</highlight></codeline>
<codeline lineno="97" refid="structve__setup__data__template_1ae6fea757e163c4adc1474593663cba5b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structve__setup__data__template_1ae6fea757e163c4adc1474593663cba5b" kindref="member">samplerate_min_restriction</ref>;</highlight></codeline>
<codeline lineno="98" refid="structve__setup__data__template_1af5709bcc9b67d6f832f0d25f41615a0c" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structve__setup__data__template_1af5709bcc9b67d6f832f0d25f41615a0c" kindref="member">samplerate_max_restriction</ref>;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="structve__setup__data__template_1a43f266bf64f0c8b6d1b22971a2071546" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a43f266bf64f0c8b6d1b22971a2071546" kindref="member">blocksize_short</ref>;</highlight></codeline>
<codeline lineno="102" refid="structve__setup__data__template_1afcb7651018dd96fd68f0e6e5acf6fdac" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1afcb7651018dd96fd68f0e6e5acf6fdac" kindref="member">blocksize_long</ref>;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104" refid="structve__setup__data__template_1ab0c56a0e186b5c7f8e0e8d87a901d7e5" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structatt3" kindref="compound">att3</ref><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1ab0c56a0e186b5c7f8e0e8d87a901d7e5" kindref="member">psy_tone_masteratt</ref>;</highlight></codeline>
<codeline lineno="105" refid="structve__setup__data__template_1a70b3bbc12b77811a19eca89af4697edf" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a70b3bbc12b77811a19eca89af4697edf" kindref="member">psy_tone_0dB</ref>;</highlight></codeline>
<codeline lineno="106" refid="structve__setup__data__template_1aa266e1f96c4a87730e81f8824edac277" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1aa266e1f96c4a87730e81f8824edac277" kindref="member">psy_tone_dBsuppress</ref>;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108" refid="structve__setup__data__template_1a94bab40c77f31b7e138c83a04631facf" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvp__adjblock" kindref="compound">vp_adjblock</ref><sp/>*<ref refid="structve__setup__data__template_1a94bab40c77f31b7e138c83a04631facf" kindref="member">psy_tone_adj_impulse</ref>;</highlight></codeline>
<codeline lineno="109" refid="structve__setup__data__template_1a83d194063b0ffb4e63364b37547de257" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvp__adjblock" kindref="compound">vp_adjblock</ref><sp/>*<ref refid="structve__setup__data__template_1a83d194063b0ffb4e63364b37547de257" kindref="member">psy_tone_adj_long</ref>;</highlight></codeline>
<codeline lineno="110" refid="structve__setup__data__template_1a5f1ca97517cd1e0a0138e58c1094a9f9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvp__adjblock" kindref="compound">vp_adjblock</ref><sp/>*<ref refid="structve__setup__data__template_1a5f1ca97517cd1e0a0138e58c1094a9f9" kindref="member">psy_tone_adj_other</ref>;</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112" refid="structve__setup__data__template_1a512e1938807fed002ecf014793828790" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structnoiseguard" kindref="compound">noiseguard</ref><sp/><sp/>*<ref refid="structve__setup__data__template_1a512e1938807fed002ecf014793828790" kindref="member">psy_noiseguards</ref>;</highlight></codeline>
<codeline lineno="113" refid="structve__setup__data__template_1ae4fcd5a91d17cc208699ab25d7d0fa46" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structnoise3" kindref="compound">noise3</ref><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1ae4fcd5a91d17cc208699ab25d7d0fa46" kindref="member">psy_noise_bias_impulse</ref>;</highlight></codeline>
<codeline lineno="114" refid="structve__setup__data__template_1ad8f7e298cbc5991d0a477d62cc739596" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structnoise3" kindref="compound">noise3</ref><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1ad8f7e298cbc5991d0a477d62cc739596" kindref="member">psy_noise_bias_padding</ref>;</highlight></codeline>
<codeline lineno="115" refid="structve__setup__data__template_1a947c600433aa972329cb6df1e545f0ee" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structnoise3" kindref="compound">noise3</ref><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a947c600433aa972329cb6df1e545f0ee" kindref="member">psy_noise_bias_trans</ref>;</highlight></codeline>
<codeline lineno="116" refid="structve__setup__data__template_1ad3afba81dd6940895281778e8506e4e8" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structnoise3" kindref="compound">noise3</ref><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1ad3afba81dd6940895281778e8506e4e8" kindref="member">psy_noise_bias_long</ref>;</highlight></codeline>
<codeline lineno="117" refid="structve__setup__data__template_1aa823dca2160d992c5d1f6afb78a4eaf1" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1aa823dca2160d992c5d1f6afb78a4eaf1" kindref="member">psy_noise_dBsuppress</ref>;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119" refid="structve__setup__data__template_1a3ee279d169ec91f8706ad782a0adb2a0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structcompandblock" kindref="compound">compandblock</ref><sp/><sp/>*<ref refid="structve__setup__data__template_1a3ee279d169ec91f8706ad782a0adb2a0" kindref="member">psy_noise_compand</ref>;</highlight></codeline>
<codeline lineno="120" refid="structve__setup__data__template_1a072110b97ea5be01effaddb650a609c5" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a072110b97ea5be01effaddb650a609c5" kindref="member">psy_noise_compand_short_mapping</ref>;</highlight></codeline>
<codeline lineno="121" refid="structve__setup__data__template_1a4af20dd3d400ad5f70bef2344aa4d9d9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a4af20dd3d400ad5f70bef2344aa4d9d9" kindref="member">psy_noise_compand_long_mapping</ref>;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123" refid="structve__setup__data__template_1a47f4c1644c2a39cbfd8d812a43506afa" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*psy_noise_normal_start[2];</highlight></codeline>
<codeline lineno="124" refid="structve__setup__data__template_1a12a6cccfe5870aef136c233391995404" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*psy_noise_normal_partition[2];</highlight></codeline>
<codeline lineno="125" refid="structve__setup__data__template_1a178d559e9a7fa8a6f66f4905fad95574" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a178d559e9a7fa8a6f66f4905fad95574" kindref="member">psy_noise_normal_thresh</ref>;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127" refid="structve__setup__data__template_1a1359dd7c84320f1350da647144689f87" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a1359dd7c84320f1350da647144689f87" kindref="member">psy_ath_float</ref>;</highlight></codeline>
<codeline lineno="128" refid="structve__setup__data__template_1a39b6e113004df487a5155c4d7b3faee5" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a39b6e113004df487a5155c4d7b3faee5" kindref="member">psy_ath_abs</ref>;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130" refid="structve__setup__data__template_1ae8d4049ce7ae8ad4a8b6f739b80f56bd" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1ae8d4049ce7ae8ad4a8b6f739b80f56bd" kindref="member">psy_lowpass</ref>;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132" refid="structve__setup__data__template_1af87eefec058f48e5772e249923a11b22" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__psy__global" kindref="compound">vorbis_info_psy_global</ref><sp/>*<ref refid="structve__setup__data__template_1af87eefec058f48e5772e249923a11b22" kindref="member">global_params</ref>;</highlight></codeline>
<codeline lineno="133" refid="structve__setup__data__template_1a19f141e94bc9fcdf1043e2ec1be15a4c" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*<ref refid="structve__setup__data__template_1a19f141e94bc9fcdf1043e2ec1be15a4c" kindref="member">global_mapping</ref>;</highlight></codeline>
<codeline lineno="134" refid="structve__setup__data__template_1a70fda50f0f12a99eb1149f6ff3f4ae12" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structadj__stereo" kindref="compound">adj_stereo</ref><sp/>*<ref refid="structve__setup__data__template_1a70fda50f0f12a99eb1149f6ff3f4ae12" kindref="member">stereo_modes</ref>;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136" refid="structve__setup__data__template_1acdb6d67e5637a4c75a43ec70edc80d56" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structve__setup__data__template_1acdb6d67e5637a4c75a43ec70edc80d56" kindref="member">floor_books</ref>;</highlight></codeline>
<codeline lineno="137" refid="structve__setup__data__template_1aad9d08b4c6963f216ab062c84c033ed1" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__floor1" kindref="compound">vorbis_info_floor1</ref><sp/>*<ref refid="structve__setup__data__template_1aad9d08b4c6963f216ab062c84c033ed1" kindref="member">floor_params</ref>;</highlight></codeline>
<codeline lineno="138" refid="structve__setup__data__template_1aeef323dc0bb8a405c9a0eba0e41b6453" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structve__setup__data__template_1aeef323dc0bb8a405c9a0eba0e41b6453" kindref="member">floor_mappings</ref>;</highlight></codeline>
<codeline lineno="139" refid="structve__setup__data__template_1a3251bd75c47300d53a68cdab42052df6" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>**<ref refid="structve__setup__data__template_1a3251bd75c47300d53a68cdab42052df6" kindref="member">floor_mapping_list</ref>;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141" refid="structve__setup__data__template_1ac7dcf3e49171d4960559c4cb32d08786" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__mapping__template" kindref="compound">vorbis_mapping_template</ref><sp/>*<ref refid="structve__setup__data__template_1ac7dcf3e49171d4960559c4cb32d08786" kindref="member">maps</ref>;</highlight></codeline>
<codeline lineno="142"><highlight class="normal">}<sp/><ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref>;</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>a<sp/>few<sp/>static<sp/>coder<sp/>conventions<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__mode" kindref="compound">vorbis_info_mode</ref><sp/>_mode_template[2]={</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/>{0,0,0,0},</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/>{1,0,0,1}</highlight></codeline>
<codeline lineno="148"><highlight class="normal">};</highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__mapping0" kindref="compound">vorbis_info_mapping0</ref><sp/>_map_nominal[2]={</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/>{1,<sp/>{0,0},<sp/>{0},<sp/>{0},<sp/>1,{0},{1}},</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/>{1,<sp/>{0,0},<sp/>{1},<sp/>{1},<sp/>1,{0},{1}}</highlight></codeline>
<codeline lineno="153"><highlight class="normal">};</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__44_8h" kindref="compound">modes/setup_44.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__44u_8h" kindref="compound">modes/setup_44u.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__44p51_8h" kindref="compound">modes/setup_44p51.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__32_8h" kindref="compound">modes/setup_32.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__8_8h" kindref="compound">modes/setup_8.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__11_8h" kindref="compound">modes/setup_11.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__16_8h" kindref="compound">modes/setup_16.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup__22_8h" kindref="compound">modes/setup_22.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="setup___x_8h" kindref="compound">modes/setup_X.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>setup_list[]={</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/>&amp;ve_setup_44_stereo,</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/>&amp;ve_setup_44_51,</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/>&amp;ve_setup_44_uncoupled,</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/>&amp;ve_setup_32_stereo,</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/>&amp;ve_setup_32_uncoupled,</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/>&amp;ve_setup_22_stereo,</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/>&amp;ve_setup_22_uncoupled,</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/>&amp;ve_setup_16_stereo,</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/>&amp;ve_setup_16_uncoupled,</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/>&amp;ve_setup_11_stereo,</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/>&amp;ve_setup_11_uncoupled,</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/>&amp;ve_setup_8_stereo,</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/>&amp;ve_setup_8_uncoupled,</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/>&amp;ve_setup_X_stereo,</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/>&amp;ve_setup_X_uncoupled,</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/>&amp;ve_setup_XX_stereo,</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/>&amp;ve_setup_XX_uncoupled,</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/>0</highlight></codeline>
<codeline lineno="188"><highlight class="normal">};</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_floor_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="metrics_8c_1a7a5a6fcbb110088fdfe3966871bdba07" kindref="member">books</ref>,</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__floor1" kindref="compound">vorbis_info_floor1</ref><sp/>*<ref refid="1-single-block_8c_1a18b1d64a94008e3c56953d279b8095e2" kindref="member">in</ref>,</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*<ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>){</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>,is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__floor1" kindref="compound">vorbis_info_floor1</ref><sp/>*<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>=<ref refid="os__types_8h_1a309e0b91bf7968a1e7ae1072d216a0cb" kindref="member">_ogg_calloc</ref>(1,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*f));</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/>memcpy(f,in+x[is],</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*f));</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>books<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>partitions=f-&gt;<ref refid="structvorbis__info__floor1_1a0888c238296237fca49e63f4c684b4b1" kindref="member">partitions</ref>;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>maxclass=-1;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>maxbook=-1;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;partitions;i++)</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(f-&gt;<ref refid="structvorbis__info__floor1_1a2e4121f3de34efb3d3092cfacd9e1913" kindref="member">partitionclass</ref>[i]&gt;maxclass)maxclass=f-&gt;<ref refid="structvorbis__info__floor1_1a2e4121f3de34efb3d3092cfacd9e1913" kindref="member">partitionclass</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;=maxclass;i++){</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(f-&gt;<ref refid="structvorbis__info__floor1_1a4765de87c6afc7a526684e1f1210556d" kindref="member">class_book</ref>[i]&gt;maxbook)maxbook=f-&gt;<ref refid="structvorbis__info__floor1_1a4765de87c6afc7a526684e1f1210556d" kindref="member">class_book</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>f-&gt;<ref refid="structvorbis__info__floor1_1a4765de87c6afc7a526684e1f1210556d" kindref="member">class_book</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]+=ci-&gt;<ref refid="structcodec__setup__info_1a2a1ae7d41f735899ade353d16b5163d1" kindref="member">books</ref>;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(k=0;k&lt;(1&lt;&lt;f-&gt;<ref refid="structvorbis__info__floor1_1a22f4b03eb391dcdceebbe2675195f38a" kindref="member">class_subs</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]);k++){</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(f-&gt;<ref refid="structvorbis__info__floor1_1a87236d836164ba5c67ba79ec90e67fae" kindref="member">class_subbook</ref>[i][k]&gt;maxbook)maxbook=f-&gt;<ref refid="structvorbis__info__floor1_1a87236d836164ba5c67ba79ec90e67fae" kindref="member">class_subbook</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>][<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>];</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(f-&gt;<ref refid="structvorbis__info__floor1_1a87236d836164ba5c67ba79ec90e67fae" kindref="member">class_subbook</ref>[i][k]&gt;=0)f-&gt;<ref refid="structvorbis__info__floor1_1a87236d836164ba5c67ba79ec90e67fae" kindref="member">class_subbook</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>][<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>]+=ci-&gt;<ref refid="structcodec__setup__info_1a2a1ae7d41f735899ade353d16b5163d1" kindref="member">books</ref>;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;=maxbook;i++)</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1abb1b7e743fc36f4b0482c7c6b944cdc2" kindref="member">book_param</ref>[ci-&gt;<ref refid="structcodec__setup__info_1a2a1ae7d41f735899ade353d16b5163d1" kindref="member">books</ref>++]=(<ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*)books[x[is]][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>for<sp/>now,<sp/>we&apos;re<sp/>only<sp/>using<sp/>floor<sp/>1<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1a21afed51cb5ad1c5c48d49e9ed4b3ed4" kindref="member">floor_type</ref>[ci-&gt;<ref refid="structcodec__setup__info_1a07326866bbd3e16ba395995c47f1afe5" kindref="member">floors</ref>]=1;</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1aab56a3fb5d09bec9bd5bad31e2416492" kindref="member">floor_param</ref>[ci-&gt;<ref refid="structcodec__setup__info_1a07326866bbd3e16ba395995c47f1afe5" kindref="member">floors</ref>]=<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>;</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1a07326866bbd3e16ba395995c47f1afe5" kindref="member">floors</ref>++;</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="226"><highlight class="normal">}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_global_psych_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__psy__global" kindref="compound">vorbis_info_psy_global</ref><sp/>*in,</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*<ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>){</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>-is;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy__global" kindref="compound">vorbis_info_psy_global</ref><sp/>*g=&amp;ci-&gt;<ref refid="structcodec__setup__info_1a73f2d587bb82d9c1e0c79a8d809c4e37" kindref="member">psy_g_param</ref>;</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/>memcpy(g,in+(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)x[is],</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*g));</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/>ds=x[is]*(1.-ds)+x[is+1]*ds;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/>is=(<ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>)ds;</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/>ds-=is;</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ds==0<sp/>&amp;&amp;<sp/>is&gt;0){</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>is--;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>ds=1.;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>interpolate<sp/>the<sp/>trigger<sp/>threshholds<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;4;i++){</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a6c556b0f7a648c916c9ff2042d1e63ab" kindref="member">preecho_thresh</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=in[is].<ref refid="structvorbis__info__psy__global_1a6c556b0f7a648c916c9ff2042d1e63ab" kindref="member">preecho_thresh</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]*(1.-ds)+in[is+1].preecho_thresh[i]*ds;</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a9a413ec95a23be6ce0acb26684d1e13a" kindref="member">postecho_thresh</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=in[is].<ref refid="structvorbis__info__psy__global_1a9a413ec95a23be6ce0acb26684d1e13a" kindref="member">postecho_thresh</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]*(1.-ds)+in[is+1].postecho_thresh[i]*ds;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1ad928858e7853b161d92c034fdf654265" kindref="member">ampmax_att_per_sec</ref>=ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>.<ref refid="structhighlevel__encode__setup_1a45038ea755b1204635bc8d93f2527877" kindref="member">amplitude_track_dBpersec</ref>;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="253"><highlight class="normal">}</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_global_stereo(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>hi,</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structadj__stereo" kindref="compound">adj_stereo</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref>){</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a88400017ddc1bfd63762d42adb543238" kindref="member">stereo_point_setting</ref>;</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds=s-is;</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy__global" kindref="compound">vorbis_info_psy_global</ref><sp/>*g=&amp;ci-&gt;<ref refid="structcodec__setup__info_1a73f2d587bb82d9c1e0c79a8d809c4e37" kindref="member">psy_g_param</ref>;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(p){</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(g-&gt;<ref refid="structvorbis__info__psy__global_1a42cf86f4d73118ff0e6af63cf1f96b1b" kindref="member">coupling_prepointamp</ref>,p[is].<ref refid="structadj__stereo_1a407eb6cd5c50925e4430031d365f075a" kindref="member">pre</ref>,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*p[is].<ref refid="structadj__stereo_1a407eb6cd5c50925e4430031d365f075a" kindref="member">pre</ref>)*<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>);</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(g-&gt;<ref refid="structvorbis__info__psy__global_1a308dce72e7dc0a4ad1f33fc760f454f0" kindref="member">coupling_postpointamp</ref>,p[is].<ref refid="structadj__stereo_1a4b578638118067c75ffe2768921f1f9e" kindref="member">post</ref>,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*p[is].<ref refid="structadj__stereo_1a4b578638118067c75ffe2768921f1f9e" kindref="member">post</ref>)*PACKETBLOBS);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>){</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>interpolate<sp/>the<sp/>kHz<sp/>threshholds<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>;i++){</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>kHz=p[is].<ref refid="structadj__stereo_1a13ef814e311be6be34a982e89141f8ed" kindref="member">kHz</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]*(1.-ds)+p[is+1].kHz[i]*ds;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a1f9a75e3bd47d5f025d89cd17c3100f2" kindref="member">coupling_pointlimit</ref>[0][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0];</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a1f9a75e3bd47d5f025d89cd17c3100f2" kindref="member">coupling_pointlimit</ref>[1][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1];</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a46c3c0ac9f76869103f947718087458b" kindref="member">coupling_pkHz</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kHz=p[is].<ref refid="structadj__stereo_1aff4713a11cb5a9d22a61a32f9b20c0d8" kindref="member">lowpasskHz</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]*(1.-ds)+p[is+1].lowpasskHz[i]*ds;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a5d1433d9b0be686fcb7e9a9060457118" kindref="member">sliding_lowpass</ref>[0][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0];</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a5d1433d9b0be686fcb7e9a9060457118" kindref="member">sliding_lowpass</ref>[1][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1];</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>kHz=p[is].<ref refid="structadj__stereo_1a13ef814e311be6be34a982e89141f8ed" kindref="member">kHz</ref>[PACKETBLOBS/2]*(1.-ds)+p[is+1].kHz[PACKETBLOBS/2]*ds;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>;i++){</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a1f9a75e3bd47d5f025d89cd17c3100f2" kindref="member">coupling_pointlimit</ref>[0][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0];</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a1f9a75e3bd47d5f025d89cd17c3100f2" kindref="member">coupling_pointlimit</ref>[1][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1];</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a46c3c0ac9f76869103f947718087458b" kindref="member">coupling_pkHz</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>kHz=p[is].<ref refid="structadj__stereo_1aff4713a11cb5a9d22a61a32f9b20c0d8" kindref="member">lowpasskHz</ref>[PACKETBLOBS/2]*(1.-ds)+p[is+1].lowpasskHz[PACKETBLOBS/2]*ds;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>;i++){</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a5d1433d9b0be686fcb7e9a9060457118" kindref="member">sliding_lowpass</ref>[0][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0];</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a5d1433d9b0be686fcb7e9a9060457118" kindref="member">sliding_lowpass</ref>[1][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=kHz*1000./vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>*ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1];</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>;i++){</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a5d1433d9b0be686fcb7e9a9060457118" kindref="member">sliding_lowpass</ref>[0][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0];</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structvorbis__info__psy__global_1a5d1433d9b0be686fcb7e9a9060457118" kindref="member">sliding_lowpass</ref>[1][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1];</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="302"><highlight class="normal">}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_psyset_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*nn_start,</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*nn_partition,</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*nn_thresh,</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>){</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy" kindref="compound">vorbis_info_psy</ref><sp/>*p=ci-&gt;<ref refid="structcodec__setup__info_1ac035c2848c4b55ca75d42635dfad1be3" kindref="member">psy_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>];</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*hi=&amp;ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(block&gt;=ci-&gt;<ref refid="structcodec__setup__info_1a0ff85713fe3d4d57b0fe0acd86764e6e" kindref="member">psys</ref>)</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1a0ff85713fe3d4d57b0fe0acd86764e6e" kindref="member">psys</ref>=block+1;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!p){</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>p=<ref refid="os__types_8h_1a309e0b91bf7968a1e7ae1072d216a0cb" kindref="member">_ogg_calloc</ref>(1,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*p));</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac035c2848c4b55ca75d42635dfad1be3" kindref="member">psy_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>]=<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref>;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/>memcpy(p,&amp;_psy_info_template,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*p));</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a884dea13b7446c8f28f40d5ae3faa144" kindref="member">blockflag</ref>=block&gt;&gt;1;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1ab7b86cbf9e1b9eda7120da4063cae4d9" kindref="member">noise_normalize_p</ref>){</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1ae6765718469a8efa31817f451996951f" kindref="member">normal_p</ref>=1;</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a04680a3cb4a277fa8534e23d62e8939b" kindref="member">normal_start</ref>=nn_start[is];</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a96b80a288323a1ce2fc2e9f65d48c5b1" kindref="member">normal_partition</ref>=nn_partition[is];</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1ac733f35b4ca08d41b3de512e903e3ae0" kindref="member">normal_thresh</ref>=nn_thresh[is];</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="332"><highlight class="normal">}</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_tonemask_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>,</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structatt3" kindref="compound">att3</ref><sp/>*<ref refid="filters_8h_1a6cbe32dd86cefd1a8b182b3ee652e9bf" kindref="member">att</ref>,</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/>*<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>,</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvp__adjblock" kindref="compound">vp_adjblock</ref><sp/>*in){</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>-is;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy" kindref="compound">vorbis_info_psy</ref><sp/>*p=ci-&gt;<ref refid="structcodec__setup__info_1ac035c2848c4b55ca75d42635dfad1be3" kindref="member">psy_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>];</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>0<sp/>and<sp/>2<sp/>are<sp/>only<sp/>used<sp/>by<sp/>bitmanagement,<sp/>but<sp/>there&apos;s<sp/>no<sp/>harm<sp/>to<sp/>always</highlight></codeline>
<codeline lineno="344"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>filling<sp/>the<sp/>values<sp/>in<sp/>here<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a254bb09eb0de3cf794063ad1102b7a8c" kindref="member">tone_masteratt</ref>[0]=att[is].<ref refid="structatt3_1a59582b74ab82141600c65f30d8459632" kindref="member">att</ref>[0]*(1.-ds)+att[is+1].att[0]*ds;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a254bb09eb0de3cf794063ad1102b7a8c" kindref="member">tone_masteratt</ref>[1]=att[is].<ref refid="structatt3_1a59582b74ab82141600c65f30d8459632" kindref="member">att</ref>[1]*(1.-ds)+att[is+1].att[1]*ds;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a254bb09eb0de3cf794063ad1102b7a8c" kindref="member">tone_masteratt</ref>[2]=att[is].<ref refid="structatt3_1a59582b74ab82141600c65f30d8459632" kindref="member">att</ref>[2]*(1.-ds)+att[is+1].att[2]*ds;</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1acc3f82d8c41c63e6e35d2cb451d72069" kindref="member">tone_centerboost</ref>=att[is].<ref refid="structatt3_1a3f4c1b26c34e25a579287669743f32a4" kindref="member">boost</ref>*(1.-ds)+att[is+1].boost*ds;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1ac10d4f96b564c11d017a2403f23914d9" kindref="member">tone_decay</ref>=att[is].<ref refid="structatt3_1a9149df466d618da5dde12351152ecab4" kindref="member">decay</ref>*(1.-ds)+att[is+1].decay*ds;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a8aeb497662b106e241bd3232016aba66" kindref="member">max_curve_dB</ref>=<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>[is]*(1.-ds)+<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>[is+1]*ds;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="psy_8h_1ae6af2ec0a0f6e0813ae814e9a07c728a" kindref="member">P_BANDS</ref>;i++)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1ab8ef339e8d8ae469c1ae7ba706534a91" kindref="member">toneatt</ref>[i]=in[is].<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>[i]*(1.-ds)+in[is+1].<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]*ds;</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="356"><highlight class="normal">}</highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_compand_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>,</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structcompandblock" kindref="compound">compandblock</ref><sp/>*in,</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*<ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>){</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>-is;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy" kindref="compound">vorbis_info_psy</ref><sp/>*p=ci-&gt;<ref refid="structcodec__setup__info_1ac035c2848c4b55ca75d42635dfad1be3" kindref="member">psy_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>];</highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/>ds=x[is]*(1.-ds)+x[is+1]*ds;</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/>is=(<ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>)ds;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/>ds-=is;</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ds==0<sp/>&amp;&amp;<sp/>is&gt;0){</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/>is--;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/>ds=1.;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="374"><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>interpolate<sp/>the<sp/>compander<sp/>settings<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="psy_8h_1a370d177dee7c7401b0c46ed37310d54b" kindref="member">NOISE_COMPAND_LEVELS</ref>;i++)</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a30e0f5a53a3803feabbe826578c8a5e7" kindref="member">noisecompand</ref>[i]=in[is].<ref refid="structcompandblock_1ac6dc1324ecb4f1172c8bde3ae48ed9ab" kindref="member">data</ref>[i]*(1.-ds)+in[is+1].<ref refid="structcompandblock_1ac6dc1324ecb4f1172c8bde3ae48ed9ab" kindref="member">data</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]*ds;</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="379"><highlight class="normal">}</highlight></codeline>
<codeline lineno="380"><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_peak_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>,</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*suppress){</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>-is;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy" kindref="compound">vorbis_info_psy</ref><sp/>*p=ci-&gt;<ref refid="structcodec__setup__info_1ac035c2848c4b55ca75d42635dfad1be3" kindref="member">psy_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>];</highlight></codeline>
<codeline lineno="387"><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1adea96fad862c5291d520454d6a029876" kindref="member">tone_abs_limit</ref>=suppress[is]*(1.-ds)+suppress[is+1]*ds;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="391"><highlight class="normal">}</highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_noisebias_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>,</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*suppress,</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structnoise3" kindref="compound">noise3</ref><sp/>*in,</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structnoiseguard" kindref="compound">noiseguard</ref><sp/>*guard,</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>userbias){</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,j;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>-is;</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy" kindref="compound">vorbis_info_psy</ref><sp/>*p=ci-&gt;<ref refid="structcodec__setup__info_1ac035c2848c4b55ca75d42635dfad1be3" kindref="member">psy_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>];</highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1ad102882d97e34592a277c60ac6636056" kindref="member">noisemaxsupp</ref>=suppress[is]*(1.-ds)+suppress[is+1]*ds;</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a2db09fd0e801f1b6f2c99850391fd940" kindref="member">noisewindowlomin</ref>=guard[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>].<ref refid="structnoiseguard_1a536d7b7c61ad24a4f7b490f663d43dad" kindref="member">lo</ref>;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1ae3d1c2bece355a1dc347ea0f04e51a38" kindref="member">noisewindowhimin</ref>=guard[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>].<ref refid="structnoiseguard_1a88d4adfe32e7ee064bf0319b8f41c0ac" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a6cb2aeec6204b044c4b4279c22e22d56" kindref="member">noisewindowfixed</ref>=guard[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>].<ref refid="structnoiseguard_1ac88cd650c02dd24cc058373fd693bdca" kindref="member">fixed</ref>;</highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=0;j&lt;<ref refid="psy_8h_1a179ea3e4fa2cdb1ef235e922ea51405a" kindref="member">P_NOISECURVES</ref>;j++)</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="psy_8h_1ae6af2ec0a0f6e0813ae814e9a07c728a" kindref="member">P_BANDS</ref>;i++)</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1aa9386a43b2fed4d8d322beeb86ca716c" kindref="member">noiseoff</ref>[j][i]=in[is].<ref refid="structnoise3_1a43d278adceb5aa18af0b06faf51aa544" kindref="member">data</ref>[j][i]*(1.-ds)+in[is+1].<ref refid="structnoise3_1a43d278adceb5aa18af0b06faf51aa544" kindref="member">data</ref>[j][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]*ds;</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>impulse<sp/>blocks<sp/>may<sp/>take<sp/>a<sp/>user<sp/>specified<sp/>bias<sp/>to<sp/>boost<sp/>the</highlight></codeline>
<codeline lineno="413"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>nominal/high<sp/>noise<sp/>encoding<sp/>depth<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=0;j&lt;<ref refid="psy_8h_1a179ea3e4fa2cdb1ef235e922ea51405a" kindref="member">P_NOISECURVES</ref>;j++){</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>=p-&gt;<ref refid="structvorbis__info__psy_1aa9386a43b2fed4d8d322beeb86ca716c" kindref="member">noiseoff</ref>[j][0]+6;<sp/></highlight><highlight class="comment">/*<sp/>the<sp/>lowest<sp/>it<sp/>can<sp/>go<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;<ref refid="psy_8h_1ae6af2ec0a0f6e0813ae814e9a07c728a" kindref="member">P_BANDS</ref>;i++){</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1aa9386a43b2fed4d8d322beeb86ca716c" kindref="member">noiseoff</ref>[j][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]+=userbias;</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(p-&gt;<ref refid="structvorbis__info__psy_1aa9386a43b2fed4d8d322beeb86ca716c" kindref="member">noiseoff</ref>[j][i]&lt;min)p-&gt;<ref refid="structvorbis__info__psy_1aa9386a43b2fed4d8d322beeb86ca716c" kindref="member">noiseoff</ref>[j][<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=<ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>;</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="423"><highlight class="normal">}</highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_ath_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>){</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__psy" kindref="compound">vorbis_info_psy</ref><sp/>*p=ci-&gt;<ref refid="structcodec__setup__info_1ac035c2848c4b55ca75d42635dfad1be3" kindref="member">psy_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>];</highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a299a4a5373e48f994fee99cc701299e7" kindref="member">ath_adjatt</ref>=ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>.<ref refid="structhighlevel__encode__setup_1ab14fa6d156e75fe4d00f054776129077" kindref="member">ath_floating_dB</ref>;</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structvorbis__info__psy_1a59d8b44072c5de4de4a7a79b30cf0595" kindref="member">ath_maxatt</ref>=ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>.<ref refid="structhighlevel__encode__setup_1aecc557dc95d32f87df532574ca5205d5" kindref="member">ath_absolute_dB</ref>;</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="432"><highlight class="normal">}</highlight></codeline>
<codeline lineno="433"><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>book_dup_or_new(<ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci,</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*book){</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;ci-&gt;<ref refid="structcodec__setup__info_1a2a1ae7d41f735899ade353d16b5163d1" kindref="member">books</ref>;i++)</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1abb1b7e743fc36f4b0482c7c6b944cdc2" kindref="member">book_param</ref>[i]==book)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(i);</highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1a2a1ae7d41f735899ade353d16b5163d1" kindref="member">books</ref>++);</highlight></codeline>
<codeline lineno="441"><highlight class="normal">}</highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_blocksize_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*shortb,</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*longb){</highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>blockshort=shortb[is];</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>blocklong=longb[is];</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0]=blockshort;</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1]=blocklong;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal">}</highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_residue_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>number,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structblock" kindref="compound">block</ref>,</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__residue__template" kindref="compound">vorbis_residue_template</ref><sp/>*res){</highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><ref refid="structvorbis__info__residue0" kindref="compound">vorbis_info_residue0</ref><sp/>*r=ci-&gt;<ref refid="structcodec__setup__info_1a1f815302d7363e9ac93f84fb8cd186c4" kindref="member">residue_param</ref>[number]=</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="os__types_8h_1a7eab9f24b6449f036ff799c89035036d" kindref="member">_ogg_malloc</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*r));</highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/>memcpy(r,res-&gt;<ref refid="structvorbis__residue__template_1a7b4e0d90fa41a67a95513cfae4adec59" kindref="member">res</ref>,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*r));</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1af730d6d8181fb830badaf26b6b688afb" kindref="member">residues</ref>&lt;=number)ci-&gt;<ref refid="structcodec__setup__info_1af730d6d8181fb830badaf26b6b688afb" kindref="member">residues</ref>=number+1;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>=res-&gt;<ref refid="structvorbis__residue__template_1ad4e0d91b38da3a639e860eeb75fcd863" kindref="member">grouping</ref>;</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1a47b8090556fae1648803a10d58717235" kindref="member">residue_type</ref>[number]=res-&gt;<ref refid="structvorbis__residue__template_1a15084c4bd97066e1bf874f93e41db0ea" kindref="member">res_type</ref>;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>fill<sp/>in<sp/>all<sp/>the<sp/>books<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>booklist=0,<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>.<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>){</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;r-&gt;<ref refid="structvorbis__info__residue0_1a466dc773410639c9786d33301cac61ed" kindref="member">partitions</ref>;i++)</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>=0;<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>&lt;4;<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>++)</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res-&gt;<ref refid="structvorbis__residue__template_1a3d33d8f56cfa34dac0c33e11e8323ab6" kindref="member">books_base_managed</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>])</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1a744daf253a651d2e13a3f80d4220c28e" kindref="member">secondstages</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]|=(1&lt;&lt;<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>);</highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1aa3b476197866f9666cc4294f60273f84" kindref="member">groupbook</ref>=book_dup_or_new(ci,res-&gt;<ref refid="structvorbis__residue__template_1ab4ea95da7d287d0dc6df64c957092837" kindref="member">book_aux_managed</ref>);</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1abb1b7e743fc36f4b0482c7c6b944cdc2" kindref="member">book_param</ref>[r-&gt;<ref refid="structvorbis__info__residue0_1aa3b476197866f9666cc4294f60273f84" kindref="member">groupbook</ref>]=(<ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*)res-&gt;<ref refid="structvorbis__residue__template_1ab4ea95da7d287d0dc6df64c957092837" kindref="member">book_aux_managed</ref>;</highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;r-&gt;partitions;i++){</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(k=0;k&lt;4;k++){</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res-&gt;<ref refid="structvorbis__residue__template_1a3d33d8f56cfa34dac0c33e11e8323ab6" kindref="member">books_base_managed</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][k]){</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>bookid=book_dup_or_new(ci,res-&gt;<ref refid="structvorbis__residue__template_1a3d33d8f56cfa34dac0c33e11e8323ab6" kindref="member">books_base_managed</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][k]);</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1a8ccd8efac3cb904de700849ca5c9b765" kindref="member">booklist</ref>[booklist++]=bookid;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1abb1b7e743fc36f4b0482c7c6b944cdc2" kindref="member">book_param</ref>[bookid]=(<ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*)res-&gt;<ref refid="structvorbis__residue__template_1a3d33d8f56cfa34dac0c33e11e8323ab6" kindref="member">books_base_managed</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][k];</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="496"><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;r-&gt;<ref refid="structvorbis__info__residue0_1a466dc773410639c9786d33301cac61ed" kindref="member">partitions</ref>;i++)</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>=0;<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>&lt;4;<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>++)</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res-&gt;<ref refid="structvorbis__residue__template_1ad760c5513a8f21ed9ef3284d0d33c488" kindref="member">books_base</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>])</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1a744daf253a651d2e13a3f80d4220c28e" kindref="member">secondstages</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]|=(1&lt;&lt;<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>);</highlight></codeline>
<codeline lineno="501"><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1aa3b476197866f9666cc4294f60273f84" kindref="member">groupbook</ref>=book_dup_or_new(ci,res-&gt;<ref refid="structvorbis__residue__template_1a1758621ca074816c2a87102461e408fc" kindref="member">book_aux</ref>);</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1abb1b7e743fc36f4b0482c7c6b944cdc2" kindref="member">book_param</ref>[r-&gt;<ref refid="structvorbis__info__residue0_1aa3b476197866f9666cc4294f60273f84" kindref="member">groupbook</ref>]=(<ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*)res-&gt;<ref refid="structvorbis__residue__template_1a1758621ca074816c2a87102461e408fc" kindref="member">book_aux</ref>;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;r-&gt;partitions;i++){</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(k=0;k&lt;4;k++){</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res-&gt;<ref refid="structvorbis__residue__template_1ad760c5513a8f21ed9ef3284d0d33c488" kindref="member">books_base</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][k]){</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>bookid=book_dup_or_new(ci,res-&gt;<ref refid="structvorbis__residue__template_1ad760c5513a8f21ed9ef3284d0d33c488" kindref="member">books_base</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][k]);</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1a8ccd8efac3cb904de700849ca5c9b765" kindref="member">booklist</ref>[booklist++]=bookid;</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1abb1b7e743fc36f4b0482c7c6b944cdc2" kindref="member">book_param</ref>[bookid]=(<ref refid="structstatic__codebook" kindref="compound">static_codebook</ref><sp/>*)res-&gt;<ref refid="structvorbis__residue__template_1ad760c5513a8f21ed9ef3284d0d33c488" kindref="member">books_base</ref>-&gt;<ref refid="structstatic__bookblock_1ad5de4a859b40179c2b5157e7409c92d0" kindref="member">books</ref>[i][k];</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="516"><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>lowpass<sp/>setup/pointlimit<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>freq=ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>.<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>*1000.;</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structvorbis__info__floor1" kindref="compound">vorbis_info_floor1</ref><sp/>*<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>=ci-&gt;<ref refid="structcodec__setup__info_1aab56a3fb5d09bec9bd5bad31e2416492" kindref="member">floor_param</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>];<sp/></highlight><highlight class="comment">/*<sp/>by<sp/>convention<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>nyq=vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>/2.;</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>blocksize=ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[<ref refid="structvp__adjblock_1a2db822d13fa72c7f7808a99a34963d41" kindref="member">block</ref>]&gt;&gt;1;</highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>lowpass<sp/>needs<sp/>to<sp/>be<sp/>set<sp/>in<sp/>the<sp/>floor<sp/>and<sp/>the<sp/>residue.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(freq&gt;nyq)freq=nyq;</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>in<sp/>the<sp/>floor,<sp/>the<sp/>granularity<sp/>can<sp/>be<sp/>very<sp/>fine;<sp/>it<sp/>doesn&apos;t<sp/>alter</highlight></codeline>
<codeline lineno="527"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>encoding<sp/>structure,<sp/>only<sp/>the<sp/>samples<sp/>used<sp/>to<sp/>fit<sp/>the<sp/>floor</highlight></codeline>
<codeline lineno="528"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>approximation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>f-&gt;<ref refid="structvorbis__info__floor1_1a8609b5acccc766282024548fd194e3f6" kindref="member">n</ref>=freq/nyq*blocksize;</highlight></codeline>
<codeline lineno="530"><highlight class="normal"></highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>this<sp/>res<sp/>may<sp/>by<sp/>limited<sp/>by<sp/>the<sp/>maximum<sp/>pointlimit<sp/>of<sp/>the<sp/>mode,</highlight></codeline>
<codeline lineno="532"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>not<sp/>the<sp/>lowpass.<sp/>the<sp/>floor<sp/>is<sp/>always<sp/>lowpass<sp/>limited.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(res-&gt;<ref refid="structvorbis__residue__template_1a5da353b9dcda20f8e4e7a4f6087675a0" kindref="member">limit_type</ref>){</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:<sp/></highlight><highlight class="comment">/*<sp/>point<sp/>stereo<sp/>limited<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>.<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>)</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>freq=ci-&gt;<ref refid="structcodec__setup__info_1a73f2d587bb82d9c1e0c79a8d809c4e37" kindref="member">psy_g_param</ref>.<ref refid="structvorbis__info__psy__global_1a46c3c0ac9f76869103f947718087458b" kindref="member">coupling_pkHz</ref>[<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>-1]*1000.;</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>freq=ci-&gt;<ref refid="structcodec__setup__info_1a73f2d587bb82d9c1e0c79a8d809c4e37" kindref="member">psy_g_param</ref>.<ref refid="structvorbis__info__psy__global_1a46c3c0ac9f76869103f947718087458b" kindref="member">coupling_pkHz</ref>[<ref refid="codec__internal_8h_1a9293c5a15a78abadbe212d944080e04b" kindref="member">PACKETBLOBS</ref>/2]*1000.;</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(freq&gt;nyq)freq=nyq;</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:<sp/></highlight><highlight class="comment">/*<sp/>LFE<sp/>channel;<sp/>lowpass<sp/>at<sp/>~<sp/>250Hz<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>freq=250;</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>already<sp/>set<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="548"><highlight class="normal"></highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>in<sp/>the<sp/>residue,<sp/>we&apos;re<sp/>constrained,<sp/>physically,<sp/>by<sp/>partition</highlight></codeline>
<codeline lineno="550"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>boundaries.<sp/><sp/>We<sp/>still<sp/>lowpass<sp/>&apos;wherever&apos;,<sp/>but<sp/>we<sp/>have<sp/>to<sp/>round<sp/>up</highlight></codeline>
<codeline lineno="551"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>here<sp/>to<sp/>next<sp/>boundary,<sp/>or<sp/>the<sp/>vorbis<sp/>spec<sp/>will<sp/>round<sp/>it<sp/>*down*<sp/>to</highlight></codeline>
<codeline lineno="552"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>previous<sp/>boundary<sp/>in<sp/>encode/decode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1a47b8090556fae1648803a10d58717235" kindref="member">residue_type</ref>[number]==2){</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>residue<sp/>2<sp/>bundles<sp/>together<sp/>multiple<sp/>channels;<sp/>used<sp/>by<sp/>stereo</highlight></codeline>
<codeline lineno="555"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>surround.<sp/><sp/>Count<sp/>the<sp/>channels<sp/>in<sp/>use<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Multiple<sp/>maps/submaps<sp/>can<sp/>point<sp/>to<sp/>the<sp/>same<sp/>residue.<sp/><sp/>In<sp/>the<sp/>case</highlight></codeline>
<codeline lineno="557"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>of<sp/>residue<sp/>2,<sp/>they<sp/>all<sp/>better<sp/>have<sp/>the<sp/>same<sp/>number<sp/>of</highlight></codeline>
<codeline lineno="558"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>channels/samples.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j,<ref refid="rfft2d_test_m_l_8m_1adc468c70fb574ebd07287b38d0d0676d" kindref="member">k</ref>,ch=0;</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;ci-&gt;<ref refid="structcodec__setup__info_1a0631814413bb5e4cad9d6c34abea2d25" kindref="member">maps</ref>&amp;&amp;ch==0;i++){</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structvorbis__info__mapping0" kindref="compound">vorbis_info_mapping0</ref><sp/>*mi=(<ref refid="structvorbis__info__mapping0" kindref="compound">vorbis_info_mapping0</ref><sp/>*)ci-&gt;<ref refid="structcodec__setup__info_1ac1ba2acf8ad63b29d8889920c43d2549" kindref="member">map_param</ref>[i];</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=0;j&lt;mi-&gt;submaps<sp/>&amp;&amp;<sp/>ch==0;j++)</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(mi-&gt;<ref refid="structvorbis__info__mapping0_1a279880bea4274534b86667ad7fc1ae4d" kindref="member">residuesubmap</ref>[j]==number)<sp/></highlight><highlight class="comment">/*<sp/>we<sp/>found<sp/>a<sp/>submap<sp/>referencing<sp/>theis<sp/>residue<sp/>backend<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(k=0;k&lt;vi-&gt;<ref refid="structvorbis__info_1a4240e042b91744b4fd810426f18252b4" kindref="member">channels</ref>;k++)</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(mi-&gt;<ref refid="structvorbis__info__mapping0_1a65301b0ac70965455f29baf01503f959" kindref="member">chmuxlist</ref>[k]==j)<sp/></highlight><highlight class="comment">/*<sp/>this<sp/>channel<sp/>belongs<sp/>to<sp/>the<sp/>submap<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ch++;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="568"><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>=(<ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>)((freq/nyq*blocksize*ch)/r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>+.9)*<sp/></highlight><highlight class="comment">/*<sp/>round<sp/>up<sp/>only<sp/>if<sp/>we&apos;re<sp/>well<sp/>past<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>;</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>the<sp/>blocksize<sp/>and<sp/>grouping<sp/>may<sp/>disagree<sp/>at<sp/>the<sp/>end<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>&gt;blocksize*ch)r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>=blocksize*ch/r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>*r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>;</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>=(<ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>)((freq/nyq*blocksize)/r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>+.9)*<sp/></highlight><highlight class="comment">/*<sp/>round<sp/>up<sp/>only<sp/>if<sp/>we&apos;re<sp/>well<sp/>past<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>;</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>the<sp/>blocksize<sp/>and<sp/>grouping<sp/>may<sp/>disagree<sp/>at<sp/>the<sp/>end<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>&gt;blocksize)r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>=blocksize/r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>*r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>;</highlight></codeline>
<codeline lineno="580"><highlight class="normal"></highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="582"><highlight class="normal"></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>==0)r-&gt;<ref refid="structvorbis__info__residue0_1af8ce4aeb45a448181c3cd5079908627c" kindref="member">end</ref>=r-&gt;<ref refid="structvorbis__info__residue0_1afc030387b36d8397db6014464a8103c2" kindref="member">grouping</ref>;<sp/></highlight><highlight class="comment">/*<sp/>LFE<sp/>channel<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"></highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="586"><highlight class="normal">}</highlight></codeline>
<codeline lineno="587"><highlight class="normal"></highlight></codeline>
<codeline lineno="588"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>we<sp/>assume<sp/>two<sp/>maps<sp/>in<sp/>this<sp/>encoder<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_map_n_res_setup(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__mapping__template" kindref="compound">vorbis_mapping_template</ref><sp/>*<ref refid="charsetmap_8h_1a499a5ac1f472fe8cbb4852e7bd23c50b" kindref="member">maps</ref>){</highlight></codeline>
<codeline lineno="591"><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,j,is=<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,modes=2;</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__mapping0" kindref="compound">vorbis_info_mapping0</ref><sp/>*<ref refid="structmap" kindref="compound">map</ref>=maps[is].<ref refid="structvorbis__mapping__template_1aa3f97dc5e56ab02a477dadbdddc2dd74" kindref="member">map</ref>;</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__info__mode" kindref="compound">vorbis_info_mode</ref><sp/>*mode=_mode_template;</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structvorbis__residue__template" kindref="compound">vorbis_residue_template</ref><sp/>*res=maps[is].<ref refid="structvorbis__mapping__template_1a93ca70f5c4a50d4d75c83cfb62a55327" kindref="member">res</ref>;</highlight></codeline>
<codeline lineno="597"><highlight class="normal"></highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0]==ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1])modes=1;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"></highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;modes;i++){</highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac1ba2acf8ad63b29d8889920c43d2549" kindref="member">map_param</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=<ref refid="os__types_8h_1a309e0b91bf7968a1e7ae1072d216a0cb" kindref="member">_ogg_calloc</ref>(1,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*map));</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1a40fc25e41a2e10422b5004f322d1d110" kindref="member">mode_param</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=<ref refid="os__types_8h_1a309e0b91bf7968a1e7ae1072d216a0cb" kindref="member">_ogg_calloc</ref>(1,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*mode));</highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(ci-&gt;<ref refid="structcodec__setup__info_1a40fc25e41a2e10422b5004f322d1d110" kindref="member">mode_param</ref>[i],mode+i,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*_mode_template));</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(i&gt;=ci-&gt;<ref refid="structcodec__setup__info_1a922009abe4668e454cc238a6c27b337d" kindref="member">modes</ref>)ci-&gt;<ref refid="structcodec__setup__info_1a922009abe4668e454cc238a6c27b337d" kindref="member">modes</ref>=i+1;</highlight></codeline>
<codeline lineno="607"><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1aa186f9b80f56c5b09a68598da505b5e2" kindref="member">map_type</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]=0;</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(ci-&gt;<ref refid="structcodec__setup__info_1ac1ba2acf8ad63b29d8889920c43d2549" kindref="member">map_param</ref>[i],map+i,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*map));</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(i&gt;=ci-&gt;<ref refid="structcodec__setup__info_1a0631814413bb5e4cad9d6c34abea2d25" kindref="member">maps</ref>)ci-&gt;<ref refid="structcodec__setup__info_1a0631814413bb5e4cad9d6c34abea2d25" kindref="member">maps</ref>=i+1;</highlight></codeline>
<codeline lineno="611"><highlight class="normal"></highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=0;j&lt;map[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="structvorbis__info__mapping0_1ac0b282a3786771686ce023fbd9690d58" kindref="member">submaps</ref>;j++)</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>vorbis_encode_residue_setup(vi,map[i].residuesubmap[j],i</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>,res+map[i].residuesubmap[j]);</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="616"><highlight class="normal">}</highlight></codeline>
<codeline lineno="617"><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>setting_to_approx_bitrate(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi){</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*hi=&amp;ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref><sp/>*<ref refid="namespacesetup" kindref="compound">setup</ref>=(<ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref><sp/>*)hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>;</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>is=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>-is;</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ch=vi-&gt;<ref refid="structvorbis__info_1a4240e042b91744b4fd810426f18252b4" kindref="member">channels</ref>;</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*r=setup-&gt;<ref refid="structve__setup__data__template_1a7a0d9b35ef99f3fa83223093f7d4d8c3" kindref="member">rate_mapping</ref>;</highlight></codeline>
<codeline lineno="626"><highlight class="normal"></highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(r==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(-1);</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">((r[is]*(1.-ds)+r[is+1]*ds)*ch);</highlight></codeline>
<codeline lineno="631"><highlight class="normal">}</highlight></codeline>
<codeline lineno="632"><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*get_setup_template(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>ch,</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>srate,</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>req,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>q_or_bitrate,</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*base_setting){</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>=0,j;</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(q_or_bitrate)req/=ch;</highlight></codeline>
<codeline lineno="638"><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(setup_list[i]){</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(setup_list[i]-&gt;coupling_restriction==-1<sp/>||</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup_list[i]-&gt;coupling_restriction==ch){</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(srate&gt;=setup_list[i]-&gt;samplerate_min_restriction<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>srate&lt;=setup_list[i]-&gt;samplerate_max_restriction){</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mappings=setup_list[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]-&gt;<ref refid="structve__setup__data__template_1a1fae0454f1291ca150015e931e19c9c9" kindref="member">mappings</ref>;</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*<ref refid="structmap" kindref="compound">map</ref>=(q_or_bitrate?</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup_list[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]-&gt;<ref refid="structve__setup__data__template_1a7a0d9b35ef99f3fa83223093f7d4d8c3" kindref="member">rate_mapping</ref>:</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup_list[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]-&gt;<ref refid="structve__setup__data__template_1ad56fff2e50fc8c8ecb023810a505e067" kindref="member">quality_mapping</ref>);</highlight></codeline>
<codeline lineno="648"><highlight class="normal"></highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>the<sp/>template<sp/>matches.<sp/><sp/>Does<sp/>the<sp/>requested<sp/>quality<sp/>mode</highlight></codeline>
<codeline lineno="650"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fall<sp/>within<sp/>this<sp/>template&apos;s<sp/>modes?<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(req&lt;map[0]){++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;}</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(req&gt;map[setup_list[i]-&gt;mappings]){++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;}</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=0;j&lt;mappings;j++)</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(req&gt;=map[j]<sp/>&amp;&amp;<sp/>req&lt;map[j+1])</highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>an<sp/>all-points<sp/>match<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(j==mappings)</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*base_setting=j-.001;</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>low=map[j];</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>high=map[j+1];</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>del=(req-low)/(high-low);</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*base_setting=j+del;</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="664"><highlight class="normal"></highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(setup_list[i]);</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/>i++;</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="670"><highlight class="normal"></highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="672"><highlight class="normal">}</highlight></codeline>
<codeline lineno="673"><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>encoders<sp/>will<sp/>need<sp/>to<sp/>use<sp/>vorbis_info_init<sp/>beforehand<sp/>and<sp/>call</highlight></codeline>
<codeline lineno="675"><highlight class="comment"><sp/><sp/><sp/>vorbis_info<sp/>clear<sp/>when<sp/>all<sp/>done<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="676"><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>two<sp/>interfaces;<sp/>this,<sp/>more<sp/>detailed<sp/>one,<sp/>and<sp/>later<sp/>a<sp/>convenience</highlight></codeline>
<codeline lineno="678"><highlight class="comment"><sp/><sp/><sp/>layer<sp/>on<sp/>top<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"></highlight></codeline>
<codeline lineno="680"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>the<sp/>final<sp/>setup<sp/>call<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="681" refid="vorbisenc_8c_1ac3953ff69d05864e78d1858a544ed619" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8c_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init</ref>(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi){</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,i0=0,singleblock=0;</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref><sp/>*<ref refid="namespacesetup" kindref="compound">setup</ref>=<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*hi=&amp;ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="686"><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>);</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!hi-&gt;<ref refid="structhighlevel__encode__setup_1ab9526c19e5ba4e42bb9c82f19b25eb1f" kindref="member">impulse_block_p</ref>)i0=1;</highlight></codeline>
<codeline lineno="689"><highlight class="normal"></highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>too<sp/>low/high<sp/>an<sp/>ATH<sp/>floater<sp/>is<sp/>nonsensical,<sp/>but<sp/>doesn&apos;t<sp/>break<sp/>anything<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1ab14fa6d156e75fe4d00f054776129077" kindref="member">ath_floating_dB</ref>&gt;-80)hi-&gt;<ref refid="structhighlevel__encode__setup_1ab14fa6d156e75fe4d00f054776129077" kindref="member">ath_floating_dB</ref>=-80;</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1ab14fa6d156e75fe4d00f054776129077" kindref="member">ath_floating_dB</ref>&lt;-200)hi-&gt;<ref refid="structhighlevel__encode__setup_1ab14fa6d156e75fe4d00f054776129077" kindref="member">ath_floating_dB</ref>=-200;</highlight></codeline>
<codeline lineno="693"><highlight class="normal"></highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>again,<sp/>bound<sp/>this<sp/>to<sp/>avoid<sp/>the<sp/>app<sp/>shooting<sp/>itself<sp/>int<sp/>he<sp/>foot</highlight></codeline>
<codeline lineno="695"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>too<sp/>badly<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1a45038ea755b1204635bc8d93f2527877" kindref="member">amplitude_track_dBpersec</ref>&gt;0.)hi-&gt;<ref refid="structhighlevel__encode__setup_1a45038ea755b1204635bc8d93f2527877" kindref="member">amplitude_track_dBpersec</ref>=0.;</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1a45038ea755b1204635bc8d93f2527877" kindref="member">amplitude_track_dBpersec</ref>&lt;-99999.)hi-&gt;<ref refid="structhighlevel__encode__setup_1a45038ea755b1204635bc8d93f2527877" kindref="member">amplitude_track_dBpersec</ref>=-99999.;</highlight></codeline>
<codeline lineno="698"><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>get<sp/>the<sp/>appropriate<sp/>setup<sp/>template;<sp/>matches<sp/>the<sp/>fetch<sp/>in<sp/>previous</highlight></codeline>
<codeline lineno="700"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>stages<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/>setup=(<ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref><sp/>*)hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>;</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(setup==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>);</highlight></codeline>
<codeline lineno="703"><highlight class="normal"></highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a4ed298ef54491509b77efd242ca9ef4b" kindref="member">set_in_stone</ref>=1;</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>choose<sp/>block<sp/>sizes<sp/>from<sp/>configured<sp/>sizes<sp/>as<sp/>well<sp/>as<sp/>paying</highlight></codeline>
<codeline lineno="706"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>attention<sp/>to<sp/>long_block_p<sp/>and<sp/>short_block_p.<sp/><sp/>If<sp/>the<sp/>configured</highlight></codeline>
<codeline lineno="707"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>short<sp/>and<sp/>long<sp/>blocks<sp/>are<sp/>the<sp/>same<sp/>length,<sp/>we<sp/>set<sp/>long_block_p</highlight></codeline>
<codeline lineno="708"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>and<sp/>unset<sp/>short_block_p<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/>vorbis_encode_blocksize_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>,</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a43f266bf64f0c8b6d1b22971a2071546" kindref="member">blocksize_short</ref>,</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1afcb7651018dd96fd68f0e6e5acf6fdac" kindref="member">blocksize_long</ref>);</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[0]==ci-&gt;<ref refid="structcodec__setup__info_1a8b08129139f671b7bbd9573aa2576fe9" kindref="member">blocksizes</ref>[1])singleblock=1;</highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>floor<sp/>setup;<sp/>choose<sp/>proper<sp/>floor<sp/>params.<sp/><sp/>Allocated<sp/>on<sp/>the<sp/>floor</highlight></codeline>
<codeline lineno="715"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>stack<sp/>in<sp/>order;<sp/>if<sp/>we<sp/>alloc<sp/>only<sp/>a<sp/>single<sp/>long<sp/>floor,<sp/>it&apos;s<sp/>0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;setup-&gt;<ref refid="structve__setup__data__template_1aeef323dc0bb8a405c9a0eba0e41b6453" kindref="member">floor_mappings</ref>;i++)</highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_floor_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>,</highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1acdb6d67e5637a4c75a43ec70edc80d56" kindref="member">floor_books</ref>,</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aad9d08b4c6963f216ab062c84c033ed1" kindref="member">floor_params</ref>,</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a3251bd75c47300d53a68cdab42052df6" kindref="member">floor_mapping_list</ref>[i]);</highlight></codeline>
<codeline lineno="721"><highlight class="normal"></highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>setup<sp/>of<sp/>[mostly]<sp/>short<sp/>block<sp/>detection<sp/>and<sp/>stereo*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/>vorbis_encode_global_psych_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1adfa8e20fbbc4af279909d1a2aab5822f" kindref="member">trigger_setting</ref>,</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1af87eefec058f48e5772e249923a11b22" kindref="member">global_params</ref>,</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a19f141e94bc9fcdf1043e2ec1be15a4c" kindref="member">global_mapping</ref>);</highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/>vorbis_encode_global_stereo(vi,hi,setup-&gt;<ref refid="structve__setup__data__template_1a70fda50f0f12a99eb1149f6ff3f4ae12" kindref="member">stereo_modes</ref>);</highlight></codeline>
<codeline lineno="727"><highlight class="normal"></highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>basic<sp/>psych<sp/>setup<sp/>and<sp/>noise<sp/>normalization<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/>vorbis_encode_psyset_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>,</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a47f4c1644c2a39cbfd8d812a43506afa" kindref="member">psy_noise_normal_start</ref>[0],</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a12a6cccfe5870aef136c233391995404" kindref="member">psy_noise_normal_partition</ref>[0],</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a178d559e9a7fa8a6f66f4905fad95574" kindref="member">psy_noise_normal_thresh</ref>,</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0);</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/>vorbis_encode_psyset_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>,</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a47f4c1644c2a39cbfd8d812a43506afa" kindref="member">psy_noise_normal_start</ref>[0],</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a12a6cccfe5870aef136c233391995404" kindref="member">psy_noise_normal_partition</ref>[0],</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a178d559e9a7fa8a6f66f4905fad95574" kindref="member">psy_noise_normal_thresh</ref>,</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1);</highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!singleblock){</highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_psyset_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>,</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a47f4c1644c2a39cbfd8d812a43506afa" kindref="member">psy_noise_normal_start</ref>[1],</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a12a6cccfe5870aef136c233391995404" kindref="member">psy_noise_normal_partition</ref>[1],</highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a178d559e9a7fa8a6f66f4905fad95574" kindref="member">psy_noise_normal_thresh</ref>,</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2);</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_psyset_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>,</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a47f4c1644c2a39cbfd8d812a43506afa" kindref="member">psy_noise_normal_start</ref>[1],</highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a12a6cccfe5870aef136c233391995404" kindref="member">psy_noise_normal_partition</ref>[1],</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a178d559e9a7fa8a6f66f4905fad95574" kindref="member">psy_noise_normal_thresh</ref>,</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>3);</highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="751"><highlight class="normal"></highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>tone<sp/>masking<sp/>setup<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/>vorbis_encode_tonemask_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[i0].<ref refid="structhighlevel__byblocktype_1a4ddd74f9ea85b93e0f8a81da2321dbdd" kindref="member">tone_mask_setting</ref>,0,</highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ab0c56a0e186b5c7f8e0e8d87a901d7e5" kindref="member">psy_tone_masteratt</ref>,</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a70b3bbc12b77811a19eca89af4697edf" kindref="member">psy_tone_0dB</ref>,</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a94bab40c77f31b7e138c83a04631facf" kindref="member">psy_tone_adj_impulse</ref>);</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/>vorbis_encode_tonemask_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[1].<ref refid="structhighlevel__byblocktype_1a4ddd74f9ea85b93e0f8a81da2321dbdd" kindref="member">tone_mask_setting</ref>,1,</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ab0c56a0e186b5c7f8e0e8d87a901d7e5" kindref="member">psy_tone_masteratt</ref>,</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a70b3bbc12b77811a19eca89af4697edf" kindref="member">psy_tone_0dB</ref>,</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a5f1ca97517cd1e0a0138e58c1094a9f9" kindref="member">psy_tone_adj_other</ref>);</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!singleblock){</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_tonemask_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[2].<ref refid="structhighlevel__byblocktype_1a4ddd74f9ea85b93e0f8a81da2321dbdd" kindref="member">tone_mask_setting</ref>,2,</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ab0c56a0e186b5c7f8e0e8d87a901d7e5" kindref="member">psy_tone_masteratt</ref>,</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a70b3bbc12b77811a19eca89af4697edf" kindref="member">psy_tone_0dB</ref>,</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a5f1ca97517cd1e0a0138e58c1094a9f9" kindref="member">psy_tone_adj_other</ref>);</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_tonemask_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[3].<ref refid="structhighlevel__byblocktype_1a4ddd74f9ea85b93e0f8a81da2321dbdd" kindref="member">tone_mask_setting</ref>,3,</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ab0c56a0e186b5c7f8e0e8d87a901d7e5" kindref="member">psy_tone_masteratt</ref>,</highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a70b3bbc12b77811a19eca89af4697edf" kindref="member">psy_tone_0dB</ref>,</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a83d194063b0ffb4e63364b37547de257" kindref="member">psy_tone_adj_long</ref>);</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="771"><highlight class="normal"></highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>noise<sp/>companding<sp/>setup<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/>vorbis_encode_compand_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[i0].<ref refid="structhighlevel__byblocktype_1a30f1f5f31f0948659f7739541c68273b" kindref="member">noise_compand_setting</ref>,0,</highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a3ee279d169ec91f8706ad782a0adb2a0" kindref="member">psy_noise_compand</ref>,</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a072110b97ea5be01effaddb650a609c5" kindref="member">psy_noise_compand_short_mapping</ref>);</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/>vorbis_encode_compand_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[1].<ref refid="structhighlevel__byblocktype_1a30f1f5f31f0948659f7739541c68273b" kindref="member">noise_compand_setting</ref>,1,</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a3ee279d169ec91f8706ad782a0adb2a0" kindref="member">psy_noise_compand</ref>,</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a072110b97ea5be01effaddb650a609c5" kindref="member">psy_noise_compand_short_mapping</ref>);</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!singleblock){</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_compand_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[2].<ref refid="structhighlevel__byblocktype_1a30f1f5f31f0948659f7739541c68273b" kindref="member">noise_compand_setting</ref>,2,</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a3ee279d169ec91f8706ad782a0adb2a0" kindref="member">psy_noise_compand</ref>,</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a4af20dd3d400ad5f70bef2344aa4d9d9" kindref="member">psy_noise_compand_long_mapping</ref>);</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_compand_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[3].<ref refid="structhighlevel__byblocktype_1a30f1f5f31f0948659f7739541c68273b" kindref="member">noise_compand_setting</ref>,3,</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a3ee279d169ec91f8706ad782a0adb2a0" kindref="member">psy_noise_compand</ref>,</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a4af20dd3d400ad5f70bef2344aa4d9d9" kindref="member">psy_noise_compand_long_mapping</ref>);</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="787"><highlight class="normal"></highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>peak<sp/>guarding<sp/>setup<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/>vorbis_encode_peak_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[i0].<ref refid="structhighlevel__byblocktype_1af7bf4884a347918e37addd21418be5f6" kindref="member">tone_peaklimit_setting</ref>,0,</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa266e1f96c4a87730e81f8824edac277" kindref="member">psy_tone_dBsuppress</ref>);</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/>vorbis_encode_peak_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[1].<ref refid="structhighlevel__byblocktype_1af7bf4884a347918e37addd21418be5f6" kindref="member">tone_peaklimit_setting</ref>,1,</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa266e1f96c4a87730e81f8824edac277" kindref="member">psy_tone_dBsuppress</ref>);</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!singleblock){</highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_peak_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[2].<ref refid="structhighlevel__byblocktype_1af7bf4884a347918e37addd21418be5f6" kindref="member">tone_peaklimit_setting</ref>,2,</highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa266e1f96c4a87730e81f8824edac277" kindref="member">psy_tone_dBsuppress</ref>);</highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_peak_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[3].<ref refid="structhighlevel__byblocktype_1af7bf4884a347918e37addd21418be5f6" kindref="member">tone_peaklimit_setting</ref>,3,</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa266e1f96c4a87730e81f8824edac277" kindref="member">psy_tone_dBsuppress</ref>);</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="799"><highlight class="normal"></highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>noise<sp/>bias<sp/>setup<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/>vorbis_encode_noisebias_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[i0].<ref refid="structhighlevel__byblocktype_1ac714cd2ec5928ac5f90de7ce61b21891" kindref="member">noise_bias_setting</ref>,0,</highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa823dca2160d992c5d1f6afb78a4eaf1" kindref="member">psy_noise_dBsuppress</ref>,</highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ae4fcd5a91d17cc208699ab25d7d0fa46" kindref="member">psy_noise_bias_impulse</ref>,</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a512e1938807fed002ecf014793828790" kindref="member">psy_noiseguards</ref>,</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(i0==0?hi-&gt;<ref refid="structhighlevel__encode__setup_1adc48ac43bf3f4c896d60e7cac2710b19" kindref="member">impulse_noisetune</ref>:0.));</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/>vorbis_encode_noisebias_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[1].<ref refid="structhighlevel__byblocktype_1ac714cd2ec5928ac5f90de7ce61b21891" kindref="member">noise_bias_setting</ref>,1,</highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa823dca2160d992c5d1f6afb78a4eaf1" kindref="member">psy_noise_dBsuppress</ref>,</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ad8f7e298cbc5991d0a477d62cc739596" kindref="member">psy_noise_bias_padding</ref>,</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a512e1938807fed002ecf014793828790" kindref="member">psy_noiseguards</ref>,0.);</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!singleblock){</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_noisebias_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[2].<ref refid="structhighlevel__byblocktype_1ac714cd2ec5928ac5f90de7ce61b21891" kindref="member">noise_bias_setting</ref>,2,</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa823dca2160d992c5d1f6afb78a4eaf1" kindref="member">psy_noise_dBsuppress</ref>,</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a947c600433aa972329cb6df1e545f0ee" kindref="member">psy_noise_bias_trans</ref>,</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a512e1938807fed002ecf014793828790" kindref="member">psy_noiseguards</ref>,0.);</highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_noisebias_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[3].<ref refid="structhighlevel__byblocktype_1ac714cd2ec5928ac5f90de7ce61b21891" kindref="member">noise_bias_setting</ref>,3,</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1aa823dca2160d992c5d1f6afb78a4eaf1" kindref="member">psy_noise_dBsuppress</ref>,</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ad3afba81dd6940895281778e8506e4e8" kindref="member">psy_noise_bias_long</ref>,</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a512e1938807fed002ecf014793828790" kindref="member">psy_noiseguards</ref>,0.);</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="820"><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/>vorbis_encode_ath_setup(vi,0);</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/>vorbis_encode_ath_setup(vi,1);</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!singleblock){</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_ath_setup(vi,2);</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/>vorbis_encode_ath_setup(vi,3);</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="827"><highlight class="normal"></highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/>vorbis_encode_map_n_res_setup(vi,hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>,setup-&gt;<ref refid="structve__setup__data__template_1ac7dcf3e49171d4960559c4cb32d08786" kindref="member">maps</ref>);</highlight></codeline>
<codeline lineno="829"><highlight class="normal"></highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>set<sp/>bitrate<sp/>readonlies<sp/>and<sp/>management<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>&gt;0)</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a71127d3e35c30fa110d7f321302a91b8" kindref="member">bitrate_nominal</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>;</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a71127d3e35c30fa110d7f321302a91b8" kindref="member">bitrate_nominal</ref>=setting_to_approx_bitrate(vi);</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="836"><highlight class="normal"></highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a216284288febd46a5547901cd5e6cd62" kindref="member">bitrate_lower</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>;</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a2d9d0e0725ae71c855ad39ce07bf7c88" kindref="member">bitrate_upper</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>;</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>)</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1aa511ecfc9eee8129df8f70e62ed08dc7" kindref="member">bitrate_window</ref>=(double)hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>/hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>;</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1aa511ecfc9eee8129df8f70e62ed08dc7" kindref="member">bitrate_window</ref>=0.;</highlight></codeline>
<codeline lineno="843"><highlight class="normal"></highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>){</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac8f01db327dffe4b49225debaf14e253" kindref="member">bi</ref>.<ref refid="structbitrate__manager__info_1a641dc9820b98f174f73cd36b2769127c" kindref="member">avg_rate</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>;</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac8f01db327dffe4b49225debaf14e253" kindref="member">bi</ref>.<ref refid="structbitrate__manager__info_1a70b89ca96ddf87dc93eac879429c0d5d" kindref="member">min_rate</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>;</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac8f01db327dffe4b49225debaf14e253" kindref="member">bi</ref>.<ref refid="structbitrate__manager__info_1a8694ec6266069b0e3521793ecd4e59d2" kindref="member">max_rate</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>;</highlight></codeline>
<codeline lineno="848"><highlight class="normal"></highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac8f01db327dffe4b49225debaf14e253" kindref="member">bi</ref>.<ref refid="structbitrate__manager__info_1ac3474e0e648e661ac5e4b0d8a434fa32" kindref="member">reservoir_bits</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>;</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac8f01db327dffe4b49225debaf14e253" kindref="member">bi</ref>.<ref refid="structbitrate__manager__info_1a7e3ab7c2b92ee477615a6308952f3005" kindref="member">reservoir_bias</ref>=</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a797b88513e6d903fa82509ebb3981e39" kindref="member">bitrate_reservoir_bias</ref>;</highlight></codeline>
<codeline lineno="852"><highlight class="normal"></highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/>ci-&gt;<ref refid="structcodec__setup__info_1ac8f01db327dffe4b49225debaf14e253" kindref="member">bi</ref>.<ref refid="structbitrate__manager__info_1a8b2831842978c4a426f63241ec17d030" kindref="member">slew_damp</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a5c6509b43d015ea6d3508a305cd70f5f" kindref="member">bitrate_av_damp</ref>;</highlight></codeline>
<codeline lineno="854"><highlight class="normal"></highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="856"><highlight class="normal"></highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="858"><highlight class="normal"></highlight></codeline>
<codeline lineno="859"><highlight class="normal">}</highlight></codeline>
<codeline lineno="860"><highlight class="normal"></highlight></codeline>
<codeline lineno="861"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>vorbis_encode_setup_setting(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/>channels,</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>){</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,is;</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*hi=&amp;ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structve__setup__data__template" kindref="compound">ve_setup_data_template</ref><sp/>*<ref refid="namespacesetup" kindref="compound">setup</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>;</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ds;</highlight></codeline>
<codeline lineno="869"><highlight class="normal"></highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a2d832259b1e3fbf4d1cd619ab5743612" kindref="member">version</ref>=0;</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a4240e042b91744b4fd810426f18252b4" kindref="member">channels</ref>=channels;</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>=<ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>;</highlight></codeline>
<codeline lineno="873"><highlight class="normal"></highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ab9526c19e5ba4e42bb9c82f19b25eb1f" kindref="member">impulse_block_p</ref>=1;</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ab7b86cbf9e1b9eda7120da4063cae4d9" kindref="member">noise_normalize_p</ref>=1;</highlight></codeline>
<codeline lineno="876"><highlight class="normal"></highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/>is=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/>ds=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>-is;</highlight></codeline>
<codeline lineno="879"><highlight class="normal"></highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a88400017ddc1bfd63762d42adb543238" kindref="member">stereo_point_setting</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="881"><highlight class="normal"></highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!hi-&gt;<ref refid="structhighlevel__encode__setup_1af62698a474d022bcdb6c04814e84f2ae" kindref="member">lowpass_altered</ref>)</highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>=</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1ae8d4049ce7ae8ad4a8b6f739b80f56bd" kindref="member">psy_lowpass</ref>[is]*(1.-ds)+setup-&gt;<ref refid="structve__setup__data__template_1ae8d4049ce7ae8ad4a8b6f739b80f56bd" kindref="member">psy_lowpass</ref>[is+1]*ds;</highlight></codeline>
<codeline lineno="885"><highlight class="normal"></highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ab14fa6d156e75fe4d00f054776129077" kindref="member">ath_floating_dB</ref>=setup-&gt;<ref refid="structve__setup__data__template_1a1359dd7c84320f1350da647144689f87" kindref="member">psy_ath_float</ref>[is]*(1.-ds)+</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a1359dd7c84320f1350da647144689f87" kindref="member">psy_ath_float</ref>[is+1]*ds;</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1aecc557dc95d32f87df532574ca5205d5" kindref="member">ath_absolute_dB</ref>=setup-&gt;<ref refid="structve__setup__data__template_1a39b6e113004df487a5155c4d7b3faee5" kindref="member">psy_ath_abs</ref>[is]*(1.-ds)+</highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/>setup-&gt;<ref refid="structve__setup__data__template_1a39b6e113004df487a5155c4d7b3faee5" kindref="member">psy_ath_abs</ref>[is+1]*ds;</highlight></codeline>
<codeline lineno="890"><highlight class="normal"></highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a45038ea755b1204635bc8d93f2527877" kindref="member">amplitude_track_dBpersec</ref>=-6.;</highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1adfa8e20fbbc4af279909d1a2aab5822f" kindref="member">trigger_setting</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="893"><highlight class="normal"></highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;i&lt;4;i++){</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="structhighlevel__byblocktype_1a4ddd74f9ea85b93e0f8a81da2321dbdd" kindref="member">tone_mask_setting</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="structhighlevel__byblocktype_1af7bf4884a347918e37addd21418be5f6" kindref="member">tone_peaklimit_setting</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="structhighlevel__byblocktype_1ac714cd2ec5928ac5f90de7ce61b21891" kindref="member">noise_bias_setting</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ab4c8b364012b7b4fa38d94ec17c645cd" kindref="member">block</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="structhighlevel__byblocktype_1a30f1f5f31f0948659f7739541c68273b" kindref="member">noise_compand_setting</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>;</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="900"><highlight class="normal">}</highlight></codeline>
<codeline lineno="901"><highlight class="normal"></highlight></codeline>
<codeline lineno="902" refid="vorbisenc_8c_1a0f7677f216936a6cd7fa28ddbccada74" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8c_1a0f7677f216936a6cd7fa28ddbccada74" kindref="member">vorbis_encode_setup_vbr</ref>(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/>channels,</highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>,</highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>quality){</highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*hi=&amp;ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="908"><highlight class="normal"></highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/>quality+=.0000001;</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(quality&gt;=1.)quality=.9999;</highlight></codeline>
<codeline lineno="911"><highlight class="normal"></highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a77cd5d92231c63d5d29d34a49a055014" kindref="member">req</ref>=quality;</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>=get_setup_template(channels,rate,quality,0,&amp;hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>);</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a08c7ebf52ffeeedc4c2d89c93f912d2e" kindref="member">OV_EIMPL</ref>;</highlight></codeline>
<codeline lineno="915"><highlight class="normal"></highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/>vorbis_encode_setup_setting(vi,channels,rate);</highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>=0;</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a6b1b3c1aba15cfd92834b950c682b036" kindref="member">coupling_p</ref>=1;</highlight></codeline>
<codeline lineno="919"><highlight class="normal"></highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="921"><highlight class="normal">}</highlight></codeline>
<codeline lineno="922"><highlight class="normal"></highlight></codeline>
<codeline lineno="923" refid="vorbisenc_8c_1ab4e3d96c3008a29c615271d1f551c2a0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8c_1ab4e3d96c3008a29c615271d1f551c2a0" kindref="member">vorbis_encode_init_vbr</ref>(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>channels,</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>,</highlight></codeline>
<codeline lineno="926"><highlight class="normal"></highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>base_quality<sp/></highlight><highlight class="comment">/*<sp/>0.<sp/>to<sp/>1.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>){</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret=0;</highlight></codeline>
<codeline lineno="930"><highlight class="normal"></highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/>ret=<ref refid="vorbisenc_8c_1a0f7677f216936a6cd7fa28ddbccada74" kindref="member">vorbis_encode_setup_vbr</ref>(vi,channels,rate,base_quality);</highlight></codeline>
<codeline lineno="932"><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ret){</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear</ref>(vi);</highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/>ret=<ref refid="vorbisenc_8c_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init</ref>(vi);</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ret)</highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear</ref>(vi);</highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(ret);</highlight></codeline>
<codeline lineno="941"><highlight class="normal">}</highlight></codeline>
<codeline lineno="942"><highlight class="normal"></highlight></codeline>
<codeline lineno="943" refid="vorbisenc_8c_1ac73714f24500e18024e83104e9e09485" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8c_1ac73714f24500e18024e83104e9e09485" kindref="member">vorbis_encode_setup_managed</ref>(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>channels,</highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>,</highlight></codeline>
<codeline lineno="946"><highlight class="normal"></highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>max_bitrate,</highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>nominal_bitrate,</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>min_bitrate){</highlight></codeline>
<codeline lineno="950"><highlight class="normal"></highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*hi=&amp;ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>tnominal=nominal_bitrate;</highlight></codeline>
<codeline lineno="954"><highlight class="normal"></highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(nominal_bitrate&lt;=0.){</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(max_bitrate&gt;0.){</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(min_bitrate&gt;0.)</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nominal_bitrate=(max_bitrate+min_bitrate)*.5;</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nominal_bitrate=max_bitrate*.875;</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(min_bitrate&gt;0.){</highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nominal_bitrate=min_bitrate;</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>);</highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="969"><highlight class="normal"></highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a77cd5d92231c63d5d29d34a49a055014" kindref="member">req</ref>=nominal_bitrate;</highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>=get_setup_template(channels,rate,nominal_bitrate,1,&amp;hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>);</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a08c7ebf52ffeeedc4c2d89c93f912d2e" kindref="member">OV_EIMPL</ref>;</highlight></codeline>
<codeline lineno="973"><highlight class="normal"></highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/>vorbis_encode_setup_setting(vi,channels,rate);</highlight></codeline>
<codeline lineno="975"><highlight class="normal"></highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>initialize<sp/>management<sp/>with<sp/>sane<sp/>defaults<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a6b1b3c1aba15cfd92834b950c682b036" kindref="member">coupling_p</ref>=1;</highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>=1;</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>=min_bitrate;</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>=max_bitrate;</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>=tnominal;</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a5c6509b43d015ea6d3508a305cd70f5f" kindref="member">bitrate_av_damp</ref>=1.5f;<sp/></highlight><highlight class="comment">/*<sp/>full<sp/>range<sp/>in<sp/>no<sp/>less<sp/>than<sp/>1.5<sp/>second<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>=nominal_bitrate*2;</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a797b88513e6d903fa82509ebb3981e39" kindref="member">bitrate_reservoir_bias</ref>=.1;<sp/></highlight><highlight class="comment">/*<sp/>bias<sp/>toward<sp/>hoarding<sp/>bits<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="985"><highlight class="normal"></highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="987"><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal">}</highlight></codeline>
<codeline lineno="989"><highlight class="normal"></highlight></codeline>
<codeline lineno="990" refid="vorbisenc_8c_1a6571d9c349c540491256f1083e1ede71" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8c_1a6571d9c349c540491256f1083e1ede71" kindref="member">vorbis_encode_init</ref>(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>channels,</highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>,</highlight></codeline>
<codeline lineno="993"><highlight class="normal"></highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>max_bitrate,</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>nominal_bitrate,</highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>min_bitrate){</highlight></codeline>
<codeline lineno="997"><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret=<ref refid="vorbisenc_8c_1ac73714f24500e18024e83104e9e09485" kindref="member">vorbis_encode_setup_managed</ref>(vi,channels,rate,</highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_bitrate,</highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nominal_bitrate,</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_bitrate);</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ret){</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear</ref>(vi);</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(ret);</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"></highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/>ret=<ref refid="vorbisenc_8c_1ac3953ff69d05864e78d1858a544ed619" kindref="member">vorbis_encode_setup_init</ref>(vi);</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ret)</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="codec_8h_1abaf171c1341b23e1c2eed7dab00d9f4a" kindref="member">vorbis_info_clear</ref>(vi);</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(ret);</highlight></codeline>
<codeline lineno="1011"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1012"><highlight class="normal"></highlight></codeline>
<codeline lineno="1013" refid="vorbisenc_8c_1a5f398a378e20b8ce5e3341a582e773bd" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8c_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl</ref>(<ref refid="structvorbis__info" kindref="compound">vorbis_info</ref><sp/>*vi,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>number,</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*arg){</highlight></codeline>
<codeline lineno="1014"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(vi){</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcodec__setup__info" kindref="compound">codec_setup_info</ref><sp/>*ci=vi-&gt;<ref refid="structvorbis__info_1a440988f081a417fd1586a4c3d44bc00c" kindref="member">codec_setup</ref>;</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhighlevel__encode__setup" kindref="compound">highlevel_encode_setup</ref><sp/>*hi=&amp;ci-&gt;<ref refid="structcodec__setup__info_1aedeb89fe833e4b8de6eee1248cef3903" kindref="member">hi</ref>;</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>setp=(number&amp;0xf);<sp/></highlight><highlight class="comment">/*<sp/>a<sp/>read<sp/>request<sp/>has<sp/>a<sp/>low<sp/>nibble<sp/>of<sp/>0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1018"><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(setp<sp/>&amp;&amp;<sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a4ed298ef54491509b77efd242ca9ef4b" kindref="member">set_in_stone</ref>)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>);</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"></highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(number){</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"></highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>now<sp/>deprecated<sp/>*****************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1a614481c0d84bdfbb80eed9208b68f779" kindref="member">OV_ECTL_RATEMANAGE_GET</ref>:</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1026"><highlight class="normal"></highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*ai=</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*)arg;</highlight></codeline>
<codeline lineno="1029"><highlight class="normal"></highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage__arg_1ad792d1b89a5d07f0f0e90509df4bc606" kindref="member">management_active</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>;</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage__arg_1a68caf36fc02a52199705fa331d118446" kindref="member">bitrate_hard_window</ref>=ai-&gt;<ref refid="structovectl__ratemanage__arg_1a1232e7296ae5e52f52039bed2560c505" kindref="member">bitrate_av_window</ref>=</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(double)hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>/vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>;</highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage__arg_1aad317d50fb4d072e2c55f0a60d1a83b2" kindref="member">bitrate_av_window_center</ref>=1.;</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage__arg_1a449d3ea8d0645742af859dd17b41fbfb" kindref="member">bitrate_hard_min</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>;</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage__arg_1a3620024b5a9e4b4df6d20deb6c125c92" kindref="member">bitrate_hard_max</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>;</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage__arg_1ac241670a3a608f114acaf8f26fe4e913" kindref="member">bitrate_av_lo</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>;</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage__arg_1ac1e81b5a2e705022ca895f494718ded7" kindref="member">bitrate_av_hi</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>;</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"></highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1041"><highlight class="normal"></highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>now<sp/>deprecated<sp/>*****************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1a1daa1fd8ce1064cce01dde3ad447d389" kindref="member">OV_ECTL_RATEMANAGE_SET</ref>:</highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*ai=</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*)arg;</highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>){</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>=0;</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>=ai-&gt;<ref refid="structovectl__ratemanage__arg_1ad792d1b89a5d07f0f0e90509df4bc606" kindref="member">management_active</ref>;</highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="vorbisenc_8c_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl</ref>(vi,<ref refid="vorbisenc_8h_1a34c3170d227b6368041e59c1dc7ed6e4" kindref="member">OV_ECTL_RATEMANAGE_AVG</ref>,arg);</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="vorbisenc_8c_1a5f398a378e20b8ce5e3341a582e773bd" kindref="member">vorbis_encode_ctl</ref>(vi,<ref refid="vorbisenc_8h_1af8869980a805f431af57a50dffbf5d33" kindref="member">OV_ECTL_RATEMANAGE_HARD</ref>,arg);</highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1056"><highlight class="normal"></highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>now<sp/>deprecated<sp/>*****************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1a34c3170d227b6368041e59c1dc7ed6e4" kindref="member">OV_ECTL_RATEMANAGE_AVG</ref>:</highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*ai=</highlight></codeline>
<codeline lineno="1061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*)arg;</highlight></codeline>
<codeline lineno="1062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>){</highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>=0;</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>=(ai-&gt;<ref refid="structovectl__ratemanage__arg_1ac241670a3a608f114acaf8f26fe4e913" kindref="member">bitrate_av_lo</ref>+ai-&gt;<ref refid="structovectl__ratemanage__arg_1ac1e81b5a2e705022ca895f494718ded7" kindref="member">bitrate_av_hi</ref>)*.5;</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>now<sp/>deprecated<sp/>*****************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1af8869980a805f431af57a50dffbf5d33" kindref="member">OV_ECTL_RATEMANAGE_HARD</ref>:</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*ai=</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage__arg" kindref="compound">ovectl_ratemanage_arg</ref><sp/>*)arg;</highlight></codeline>
<codeline lineno="1074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>){</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>=0;</highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>=0;</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>=ai-&gt;<ref refid="structovectl__ratemanage__arg_1a449d3ea8d0645742af859dd17b41fbfb" kindref="member">bitrate_hard_min</ref>;</highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>=ai-&gt;<ref refid="structovectl__ratemanage__arg_1a3620024b5a9e4b4df6d20deb6c125c92" kindref="member">bitrate_hard_max</ref>;</highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>=ai-&gt;<ref refid="structovectl__ratemanage__arg_1a68caf36fc02a52199705fa331d118446" kindref="member">bitrate_hard_window</ref>*</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>+hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>)*.5;</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>&lt;128.)</highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>=128.;</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"></highlight></codeline>
<codeline lineno="1088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>replacement<sp/>ratemanage<sp/>interface<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1089"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1af95048070bedb467f80ce85e20057126" kindref="member">OV_ECTL_RATEMANAGE2_GET</ref>:</highlight></codeline>
<codeline lineno="1090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage2__arg" kindref="compound">ovectl_ratemanage2_arg</ref><sp/>*ai=</highlight></codeline>
<codeline lineno="1092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage2__arg" kindref="compound">ovectl_ratemanage2_arg</ref><sp/>*)arg;</highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1094"><highlight class="normal"></highlight></codeline>
<codeline lineno="1095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aca1f656373a1597177dac924578e375b" kindref="member">management_active</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>;</highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aeb53a17fff14ec50d143602adfdeabeb" kindref="member">bitrate_limit_min_kbps</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>/1000;</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a175691482003edd7d94592fa2bc993a9" kindref="member">bitrate_limit_max_kbps</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>/1000;</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1f6bab60d87143d5060dd6c59aad6e71" kindref="member">bitrate_average_kbps</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>/1000;</highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1069e148a884d8706928cd2e39870720" kindref="member">bitrate_average_damping</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a5c6509b43d015ea6d3508a305cd70f5f" kindref="member">bitrate_av_damp</ref>;</highlight></codeline>
<codeline lineno="1100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a75e496acac882e156137de9d1200ebd7" kindref="member">bitrate_limit_reservoir_bits</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>;</highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a5567fde1798b1e80e40a77565b4b44f4" kindref="member">bitrate_limit_reservoir_bias</ref>=hi-&gt;<ref refid="structhighlevel__encode__setup_1a797b88513e6d903fa82509ebb3981e39" kindref="member">bitrate_reservoir_bias</ref>;</highlight></codeline>
<codeline lineno="1102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(0);</highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1a5075e0acb85fd45398a290594f83d6ba" kindref="member">OV_ECTL_RATEMANAGE2_SET</ref>:</highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage2__arg" kindref="compound">ovectl_ratemanage2_arg</ref><sp/>*ai=</highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structovectl__ratemanage2__arg" kindref="compound">ovectl_ratemanage2_arg</ref><sp/>*)arg;</highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>){</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>=0;</highlight></codeline>
<codeline lineno="1110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>sanity<sp/>check;<sp/>only<sp/>catch<sp/>invariant<sp/>violations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aeb53a17fff14ec50d143602adfdeabeb" kindref="member">bitrate_limit_min_kbps</ref>&gt;0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1f6bab60d87143d5060dd6c59aad6e71" kindref="member">bitrate_average_kbps</ref>&gt;0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aeb53a17fff14ec50d143602adfdeabeb" kindref="member">bitrate_limit_min_kbps</ref>&gt;ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1f6bab60d87143d5060dd6c59aad6e71" kindref="member">bitrate_average_kbps</ref>)</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"></highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a175691482003edd7d94592fa2bc993a9" kindref="member">bitrate_limit_max_kbps</ref>&gt;0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1f6bab60d87143d5060dd6c59aad6e71" kindref="member">bitrate_average_kbps</ref>&gt;0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a175691482003edd7d94592fa2bc993a9" kindref="member">bitrate_limit_max_kbps</ref>&lt;ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1f6bab60d87143d5060dd6c59aad6e71" kindref="member">bitrate_average_kbps</ref>)</highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"></highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aeb53a17fff14ec50d143602adfdeabeb" kindref="member">bitrate_limit_min_kbps</ref>&gt;0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a175691482003edd7d94592fa2bc993a9" kindref="member">bitrate_limit_max_kbps</ref>&gt;0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aeb53a17fff14ec50d143602adfdeabeb" kindref="member">bitrate_limit_min_kbps</ref>&gt;ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a175691482003edd7d94592fa2bc993a9" kindref="member">bitrate_limit_max_kbps</ref>)</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"></highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1069e148a884d8706928cd2e39870720" kindref="member">bitrate_average_damping</ref><sp/>&lt;=<sp/>0.)</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1129"><highlight class="normal"></highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a75e496acac882e156137de9d1200ebd7" kindref="member">bitrate_limit_reservoir_bits</ref><sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"></highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a5567fde1798b1e80e40a77565b4b44f4" kindref="member">bitrate_limit_reservoir_bias</ref><sp/>&lt;<sp/>0.)</highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"></highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a5567fde1798b1e80e40a77565b4b44f4" kindref="member">bitrate_limit_reservoir_bias</ref><sp/>&gt;<sp/>1.)</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>;</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"></highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>=ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aca1f656373a1597177dac924578e375b" kindref="member">management_active</ref>;</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a44cebbbf6e74eb249c8f3981a6538c59" kindref="member">bitrate_min</ref>=ai-&gt;<ref refid="structovectl__ratemanage2__arg_1aeb53a17fff14ec50d143602adfdeabeb" kindref="member">bitrate_limit_min_kbps</ref><sp/>*<sp/>1000;</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9f4259842f3184845db9e31de14343d" kindref="member">bitrate_max</ref>=ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a175691482003edd7d94592fa2bc993a9" kindref="member">bitrate_limit_max_kbps</ref><sp/>*<sp/>1000;</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ac9bf8d9dc914f6f82e9ae90429c604f8" kindref="member">bitrate_av</ref>=ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1f6bab60d87143d5060dd6c59aad6e71" kindref="member">bitrate_average_kbps</ref><sp/>*<sp/>1000;</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a5c6509b43d015ea6d3508a305cd70f5f" kindref="member">bitrate_av_damp</ref>=ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a1069e148a884d8706928cd2e39870720" kindref="member">bitrate_average_damping</ref>;</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a70c7bbeec8ca895762c0f2f5caafcb93" kindref="member">bitrate_reservoir</ref>=ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a75e496acac882e156137de9d1200ebd7" kindref="member">bitrate_limit_reservoir_bits</ref>;</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a797b88513e6d903fa82509ebb3981e39" kindref="member">bitrate_reservoir_bias</ref>=ai-&gt;<ref refid="structovectl__ratemanage2__arg_1a5567fde1798b1e80e40a77565b4b44f4" kindref="member">bitrate_limit_reservoir_bias</ref>;</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"></highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1af8614b9ee808ddb88d50d21ea1cdf721" kindref="member">OV_ECTL_LOWPASS_GET</ref>:</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*farg=(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*)arg;</highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*farg=hi-&gt;<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>;</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1a1862ca0d88ed0366990da2a4015547c8" kindref="member">OV_ECTL_LOWPASS_SET</ref>:</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*farg=(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*)arg;</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>=*farg;</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"></highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>&lt;2.)hi-&gt;<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>=2.;</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>&gt;99.)hi-&gt;<ref refid="structhighlevel__encode__setup_1ada5a59b19ecd30dfa5d876eb66c8e0ce" kindref="member">lowpass_kHz</ref>=99.;</highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1af62698a474d022bcdb6c04814e84f2ae" kindref="member">lowpass_altered</ref>=1;</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1a35ba680b627646bff135673d849e40e8" kindref="member">OV_ECTL_IBLOCK_GET</ref>:</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*farg=(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*)arg;</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*farg=hi-&gt;<ref refid="structhighlevel__encode__setup_1adc48ac43bf3f4c896d60e7cac2710b19" kindref="member">impulse_noisetune</ref>;</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1a080b74cc4d75070376d7d1008bef4cd5" kindref="member">OV_ECTL_IBLOCK_SET</ref>:</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*farg=(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*)arg;</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1adc48ac43bf3f4c896d60e7cac2710b19" kindref="member">impulse_noisetune</ref>=*farg;</highlight></codeline>
<codeline lineno="1176"><highlight class="normal"></highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1adc48ac43bf3f4c896d60e7cac2710b19" kindref="member">impulse_noisetune</ref>&gt;0.)hi-&gt;<ref refid="structhighlevel__encode__setup_1adc48ac43bf3f4c896d60e7cac2710b19" kindref="member">impulse_noisetune</ref>=0.;</highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(hi-&gt;<ref refid="structhighlevel__encode__setup_1adc48ac43bf3f4c896d60e7cac2710b19" kindref="member">impulse_noisetune</ref>&lt;-15.)hi-&gt;<ref refid="structhighlevel__encode__setup_1adc48ac43bf3f4c896d60e7cac2710b19" kindref="member">impulse_noisetune</ref>=-15.;</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1afca9bdb09b83ca6b57018e380583134a" kindref="member">OV_ECTL_COUPLING_GET</ref>:</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*iarg=(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*)arg;</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*iarg=hi-&gt;<ref refid="structhighlevel__encode__setup_1a6b1b3c1aba15cfd92834b950c682b036" kindref="member">coupling_p</ref>;</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="vorbisenc_8h_1aa263e0ee8a7343ecb744f4a4b9c96ffd" kindref="member">OV_ECTL_COUPLING_SET</ref>:</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*new_template;</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>new_base=0.;</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*iarg=(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*)arg;</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a6b1b3c1aba15cfd92834b950c682b036" kindref="member">coupling_p</ref>=((*iarg)!=0);</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"></highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fetching<sp/>a<sp/>new<sp/>template<sp/>can<sp/>alter<sp/>the<sp/>base_setting,<sp/>which</highlight></codeline>
<codeline lineno="1195"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>many<sp/>other<sp/>parameters<sp/>are<sp/>based<sp/>on.<sp/><sp/>Right<sp/>now,<sp/>the<sp/>only</highlight></codeline>
<codeline lineno="1196"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parameter<sp/>drawn<sp/>from<sp/>the<sp/>base_setting<sp/>that<sp/>can<sp/>be<sp/>altered</highlight></codeline>
<codeline lineno="1197"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>by<sp/>an<sp/>encctl<sp/>is<sp/>the<sp/>lowpass,<sp/>so<sp/>that<sp/>is<sp/>explictly<sp/>flagged</highlight></codeline>
<codeline lineno="1198"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to<sp/>not<sp/>be<sp/>overwritten<sp/>when<sp/>we<sp/>fetch<sp/>a<sp/>new<sp/>template<sp/>and</highlight></codeline>
<codeline lineno="1199"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>recompute<sp/>the<sp/>dependant<sp/>settings<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_template<sp/>=<sp/>get_setup_template(hi-&gt;<ref refid="structhighlevel__encode__setup_1a6b1b3c1aba15cfd92834b950c682b036" kindref="member">coupling_p</ref>?vi-&gt;<ref refid="structvorbis__info_1a4240e042b91744b4fd810426f18252b4" kindref="member">channels</ref>:-1,</highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>,</highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a77cd5d92231c63d5d29d34a49a055014" kindref="member">req</ref>,</highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a232b52aae5a1dc432c2fde0859a9de30" kindref="member">managed</ref>,</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;new_base);</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="codec_8h_1a08c7ebf52ffeeedc4c2d89c93f912d2e" kindref="member">OV_EIMPL</ref>;</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a05e4ffe83c4f26fe5305fce8a50d0c42" kindref="member">setup</ref>=new_template;</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hi-&gt;<ref refid="structhighlevel__encode__setup_1a3bc13656a789f18e24a9d3a29e0ad2f8" kindref="member">base_setting</ref>=new_base;</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vorbis_encode_setup_setting(vi,vi-&gt;<ref refid="structvorbis__info_1a4240e042b91744b4fd810426f18252b4" kindref="member">channels</ref>,vi-&gt;<ref refid="structvorbis__info_1a01879ed23ecd9605cf6779ef2663a681" kindref="member">rate</ref>);</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<ref refid="codec_8h_1a08c7ebf52ffeeedc4c2d89c93f912d2e" kindref="member">OV_EIMPL</ref>);</highlight></codeline>
<codeline lineno="1213"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1214"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<ref refid="codec_8h_1a8d9ffc3bd8fa69afd38d2f2dc0134af3" kindref="member">OV_EINVAL</ref>);</highlight></codeline>
<codeline lineno="1215"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libvorbis/lib/vorbisenc.c"/>
  </compounddef>
</doxygen>
