<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="pa__win__wasapi_8c" kind="file" language="C++">
    <compoundname>pa_win_wasapi.c</compoundname>
    <includes local="no">windows.h</includes>
    <includes local="no">stdio.h</includes>
    <includes local="no">process.h</includes>
    <includes refid="assert_8h" local="no">assert.h</includes>
    <includes local="no">mmsystem.h</includes>
    <includes local="no">mmreg.h</includes>
    <includes local="no">malloc.h</includes>
    <includes refid="memory_8h" local="no">memory.h</includes>
    <includes refid="pa__util_8h" local="yes">pa_util.h</includes>
    <includes refid="pa__allocation_8h" local="yes">pa_allocation.h</includes>
    <includes refid="pa__hostapi_8h" local="yes">pa_hostapi.h</includes>
    <includes refid="pa__stream_8h" local="yes">pa_stream.h</includes>
    <includes refid="pa__cpuload_8h" local="yes">pa_cpuload.h</includes>
    <includes refid="pa__process_8h" local="yes">pa_process.h</includes>
    <includes refid="pa__win__wasapi_8h" local="yes">pa_win_wasapi.h</includes>
    <includes refid="pa__debugprint_8h" local="yes">pa_debugprint.h</includes>
    <includes refid="pa__ringbuffer_8h" local="yes">pa_ringbuffer.h</includes>
    <includes refid="pa__win__coinitialize_8h" local="yes">pa_win_coinitialize.h</includes>
    <includes local="no">basetyps.h</includes>
    <includes refid="rpcsal_8h" local="no">rpcsal.h</includes>
    <includes refid="sal_8h" local="no">sal.h</includes>
    <includes refid="sdkddkver_8h" local="no">sdkddkver.h</includes>
    <includes refid="propkeydef_8h" local="no">propkeydef.h</includes>
    <includes refid="audioclient_8h" local="no">audioclient.h</includes>
    <includes refid="mmdeviceapi_8h" local="no">mmdeviceapi.h</includes>
    <includes refid="endpointvolume_8h" local="no">endpointvolume.h</includes>
    <includes refid="functiondiscoverykeys_8h" local="no">functiondiscoverykeys.h</includes>
    <includes refid="devicetopology_8h" local="no">devicetopology.h</includes>
    <incdepgraph>
      <node id="30276">
        <label>process.h</label>
      </node>
      <node id="30323">
        <label>pshpack8.h</label>
      </node>
      <node id="30279">
        <label>mmreg.h</label>
      </node>
      <node id="30318">
        <label>propsys.h</label>
        <link refid="propsys_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30309" relation="include">
        </childnode>
        <childnode refid="30319" relation="include">
        </childnode>
        <childnode refid="30320" relation="include">
        </childnode>
        <childnode refid="30321" relation="include">
        </childnode>
        <childnode refid="30322" relation="include">
        </childnode>
        <childnode refid="30324" relation="include">
        </childnode>
        <childnode refid="30305" relation="include">
        </childnode>
      </node>
      <node id="30320">
        <label>oleidl.h</label>
      </node>
      <node id="30309">
        <label>ole2.h</label>
      </node>
      <node id="30311">
        <label>unknwn.h</label>
      </node>
      <node id="30307">
        <label>rpc.h</label>
      </node>
      <node id="30274">
        <label>windows.h</label>
      </node>
      <node id="30302">
        <label>rpcsal.h</label>
        <link refid="rpcsal_8h"/>
      </node>
      <node id="30284">
        <label>FLAC/ordinals.h</label>
        <link refid="ordinals_8h"/>
        <childnode refid="30285" relation="include">
        </childnode>
      </node>
      <node id="30330">
        <label>propkey.h</label>
        <link refid="propkey_8h"/>
        <childnode refid="30305" relation="include">
        </childnode>
      </node>
      <node id="30325">
        <label>oaidl.h</label>
      </node>
      <node id="30289">
        <label>pa_hostapi.h</label>
        <link refid="pa__hostapi_8h"/>
        <childnode refid="30287" relation="include">
        </childnode>
      </node>
      <node id="30310">
        <label>wtypes.h</label>
      </node>
      <node id="30285">
        <label>stdint.h</label>
      </node>
      <node id="30322">
        <label>shtypes.h</label>
        <link refid="shtypes_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30310" relation="include">
        </childnode>
        <childnode refid="30314" relation="include">
        </childnode>
        <childnode refid="30315" relation="include">
        </childnode>
        <childnode refid="30323" relation="include">
        </childnode>
      </node>
      <node id="30282">
        <label>stdlib.h</label>
      </node>
      <node id="30288">
        <label>pa_allocation.h</label>
        <link refid="pa__allocation_8h"/>
      </node>
      <node id="30292">
        <label>pa_process.h</label>
        <link refid="pa__process_8h"/>
        <childnode refid="30287" relation="include">
        </childnode>
        <childnode refid="30293" relation="include">
        </childnode>
        <childnode refid="30294" relation="include">
        </childnode>
      </node>
      <node id="30280">
        <label>malloc.h</label>
      </node>
      <node id="30297">
        <label>pa_win_waveformat.h</label>
        <link refid="pa__win__waveformat_8h"/>
      </node>
      <node id="30326">
        <label>propidl.h</label>
        <link refid="propidl_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30309" relation="include">
        </childnode>
        <childnode refid="30303" relation="include">
        </childnode>
        <childnode refid="30302" relation="include">
        </childnode>
        <childnode refid="30319" relation="include">
        </childnode>
        <childnode refid="30325" relation="include">
        </childnode>
      </node>
      <node id="30291">
        <label>pa_cpuload.h</label>
        <link refid="pa__cpuload_8h"/>
      </node>
      <node id="30308">
        <label>rpcndr.h</label>
      </node>
      <node id="30296">
        <label>pa_win_wasapi.h</label>
        <link refid="pa__win__wasapi_8h"/>
        <childnode refid="30287" relation="include">
        </childnode>
        <childnode refid="30297" relation="include">
        </childnode>
      </node>
      <node id="30313">
        <label>ks.h</label>
        <link refid="ks_8h"/>
        <childnode refid="30314" relation="include">
        </childnode>
        <childnode refid="30315" relation="include">
        </childnode>
      </node>
      <node id="30281">
        <label>memory.h</label>
        <link refid="memory_8h"/>
        <childnode refid="30282" relation="include">
        </childnode>
        <childnode refid="30283" relation="include">
        </childnode>
        <childnode refid="30284" relation="include">
        </childnode>
      </node>
      <node id="30277">
        <label>assert.h</label>
        <link refid="assert_8h"/>
      </node>
      <node id="30316">
        <label>ksmedia.h</label>
        <link refid="ksmedia_8h"/>
        <childnode refid="30314" relation="include">
        </childnode>
        <childnode refid="30315" relation="include">
        </childnode>
        <childnode refid="30313" relation="include">
        </childnode>
      </node>
      <node id="30331">
        <label>FunctionDiscoveryKeys_devpkey.h</label>
        <link refid="_function_discovery_keys__devpkey_8h"/>
      </node>
      <node id="30306">
        <label>audioclient.h</label>
        <link refid="audioclient_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30309" relation="include">
        </childnode>
        <childnode refid="30310" relation="include">
        </childnode>
        <childnode refid="30311" relation="include">
        </childnode>
        <childnode refid="30312" relation="include">
        </childnode>
        <childnode refid="30279" relation="include">
        </childnode>
        <childnode refid="30313" relation="include">
        </childnode>
        <childnode refid="30316" relation="include">
        </childnode>
      </node>
      <node id="30317">
        <label>mmdeviceapi.h</label>
        <link refid="mmdeviceapi_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30309" relation="include">
        </childnode>
        <childnode refid="30311" relation="include">
        </childnode>
        <childnode refid="30318" relation="include">
        </childnode>
      </node>
      <node id="30319">
        <label>objidl.h</label>
      </node>
      <node id="30304">
        <label>sdkddkver.h</label>
        <link refid="sdkddkver_8h"/>
      </node>
      <node id="30321">
        <label>ocidl.h</label>
      </node>
      <node id="30327">
        <label>endpointvolume.h</label>
        <link refid="endpointvolume_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30309" relation="include">
        </childnode>
        <childnode refid="30311" relation="include">
        </childnode>
        <childnode refid="30328" relation="include">
        </childnode>
      </node>
      <node id="30283">
        <label>private/float.h</label>
        <link refid="float_8h"/>
        <childnode refid="30284" relation="include">
        </childnode>
      </node>
      <node id="30273">
        <label>C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c</label>
        <link refid="pa_win_wasapi.c"/>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30275" relation="include">
        </childnode>
        <childnode refid="30276" relation="include">
        </childnode>
        <childnode refid="30277" relation="include">
        </childnode>
        <childnode refid="30278" relation="include">
        </childnode>
        <childnode refid="30279" relation="include">
        </childnode>
        <childnode refid="30280" relation="include">
        </childnode>
        <childnode refid="30281" relation="include">
        </childnode>
        <childnode refid="30286" relation="include">
        </childnode>
        <childnode refid="30288" relation="include">
        </childnode>
        <childnode refid="30289" relation="include">
        </childnode>
        <childnode refid="30290" relation="include">
        </childnode>
        <childnode refid="30291" relation="include">
        </childnode>
        <childnode refid="30292" relation="include">
        </childnode>
        <childnode refid="30296" relation="include">
        </childnode>
        <childnode refid="30298" relation="include">
        </childnode>
        <childnode refid="30299" relation="include">
        </childnode>
        <childnode refid="30300" relation="include">
        </childnode>
        <childnode refid="30301" relation="include">
        </childnode>
        <childnode refid="30302" relation="include">
        </childnode>
        <childnode refid="30303" relation="include">
        </childnode>
        <childnode refid="30304" relation="include">
        </childnode>
        <childnode refid="30305" relation="include">
        </childnode>
        <childnode refid="30306" relation="include">
        </childnode>
        <childnode refid="30317" relation="include">
        </childnode>
        <childnode refid="30327" relation="include">
        </childnode>
        <childnode refid="30329" relation="include">
        </childnode>
        <childnode refid="30328" relation="include">
        </childnode>
      </node>
      <node id="30329">
        <label>functiondiscoverykeys.h</label>
        <link refid="functiondiscoverykeys_8h"/>
        <childnode refid="30330" relation="include">
        </childnode>
        <childnode refid="30331" relation="include">
        </childnode>
      </node>
      <node id="30303">
        <label>sal.h</label>
        <link refid="sal_8h"/>
      </node>
      <node id="30294">
        <label>pa_dither.h</label>
        <link refid="pa__dither_8h"/>
        <childnode refid="30295" relation="include">
        </childnode>
      </node>
      <node id="30315">
        <label>poppack.h</label>
      </node>
      <node id="30299">
        <label>pa_ringbuffer.h</label>
        <link refid="pa__ringbuffer_8h"/>
      </node>
      <node id="30287">
        <label>portaudio.h</label>
        <link refid="portaudio_8h"/>
      </node>
      <node id="30305">
        <label>propkeydef.h</label>
        <link refid="propkeydef_8h"/>
      </node>
      <node id="30324">
        <label>structuredquery.h</label>
        <link refid="structuredquery_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30309" relation="include">
        </childnode>
        <childnode refid="30325" relation="include">
        </childnode>
        <childnode refid="30321" relation="include">
        </childnode>
        <childnode refid="30326" relation="include">
        </childnode>
      </node>
      <node id="30290">
        <label>pa_stream.h</label>
        <link refid="pa__stream_8h"/>
        <childnode refid="30287" relation="include">
        </childnode>
      </node>
      <node id="30300">
        <label>pa_win_coinitialize.h</label>
        <link refid="pa__win__coinitialize_8h"/>
      </node>
      <node id="30328">
        <label>devicetopology.h</label>
        <link refid="devicetopology_8h"/>
        <childnode refid="30307" relation="include">
        </childnode>
        <childnode refid="30308" relation="include">
        </childnode>
        <childnode refid="30274" relation="include">
        </childnode>
        <childnode refid="30309" relation="include">
        </childnode>
        <childnode refid="30325" relation="include">
        </childnode>
        <childnode refid="30321" relation="include">
        </childnode>
        <childnode refid="30326" relation="include">
        </childnode>
        <childnode refid="30313" relation="include">
        </childnode>
        <childnode refid="30316" relation="include">
        </childnode>
      </node>
      <node id="30278">
        <label>mmsystem.h</label>
      </node>
      <node id="30295">
        <label>pa_types.h</label>
        <link refid="pa__types_8h"/>
      </node>
      <node id="30314">
        <label>pshpack1.h</label>
      </node>
      <node id="30293">
        <label>pa_converters.h</label>
        <link refid="pa__converters_8h"/>
        <childnode refid="30287" relation="include">
        </childnode>
      </node>
      <node id="30301">
        <label>basetyps.h</label>
      </node>
      <node id="30312">
        <label>AudioSessionTypes.h</label>
        <link refid="_audio_session_types_8h"/>
      </node>
      <node id="30298">
        <label>pa_debugprint.h</label>
        <link refid="pa__debugprint_8h"/>
      </node>
      <node id="30275">
        <label>stdio.h</label>
      </node>
      <node id="30286">
        <label>pa_util.h</label>
        <link refid="pa__util_8h"/>
        <childnode refid="30287" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innerclass refid="struct__tagpropertykey" prot="public">_tagpropertykey</innerclass>
    <innerclass refid="struct___b_y_t_e___b_l_o_b" prot="public">_BYTE_BLOB</innerclass>
    <innerclass refid="struct_pa_wasapi_device_info" prot="public">PaWasapiDeviceInfo</innerclass>
    <innerclass refid="struct_pa_wasapi_host_api_representation" prot="public">PaWasapiHostApiRepresentation</innerclass>
    <innerclass refid="struct_pa_wasapi_audio_client_params" prot="public">PaWasapiAudioClientParams</innerclass>
    <innerclass refid="struct_pa_wasapi_sub_stream" prot="public">PaWasapiSubStream</innerclass>
    <innerclass refid="struct_pa_wasapi_host_processor" prot="public">PaWasapiHostProcessor</innerclass>
    <innerclass refid="struct_pa_wasapi_stream" prot="public">PaWasapiStream</innerclass>
    <innerclass refid="struct_thread_idle_scheduler" prot="public">ThreadIdleScheduler</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="pa__win__wasapi_8c_1ac7bef5d85e3dcd73eef56ad39ffc84a9" prot="public" static="no">
        <name>WIN32_LEAN_AND_MEAN</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="45" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="45" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a966cd377b9f3fdeb1432460c33352af1" prot="public" static="no">
        <name>WINVER</name>
        <initializer>0x0600</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="84" column="23" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="84" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1ac50762666aa00bd3a4308158510f1748" prot="public" static="no">
        <name>_WIN32_WINNT</name>
        <initializer><ref refid="pa__win__wasapi_8c_1a966cd377b9f3fdeb1432460c33352af1" kindref="member">WINVER</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="85" column="10" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="85" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a47e37ab430bf80d50648a0d5ac18b103" prot="public" static="no">
        <name>__LPCGUID_DEFINED__</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="102" column="11" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="102" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a7d2c965c2e6466eb96707b5034ccd693" prot="public" static="no">
        <name>PROPERTYKEY_DEFINED</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="107" column="17" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="107" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a673c1f31132e45e35ddee6d1d92b9bb1" prot="public" static="no">
        <name>__MIDL_CONST</name>
        <initializer><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="118" column="22" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="118" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1af1ecaf25e5207f6c04582d5081d99b00" prot="public" static="no">
        <name>NONAMELESSUNION</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="135" column="17" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="135" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a37d17ddda1e36eb0f54d80a946b897f0" prot="public" static="no">
        <name>WAVE_FORMAT_IEEE_FLOAT</name>
        <initializer>0x0003</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="139" column="17" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="139" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1adc323f9409c3f1374367fecf9a2e3496" prot="public" static="no">
        <name>__MINGW_EXTENSION</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="146" column="30" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="146" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a8dbf8c07441f5b076bfc6eea06513cb7" prot="public" static="no">
        <name>COBJMACROS</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="152" column="23" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="152" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1af11aade3f3741fb554915d10d3f514eb" prot="public" static="no">
        <name>INITGUID</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="153" column="13" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="153" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a979170f3a1187ea0059d94e632570a05" prot="public" static="no">
        <name>GUID_SECT</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="164" column="13" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="164" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a5270bc6f60431a3ab7cc5f171493b5dd" prot="public" static="no">
        <name>__DEFINE_GUID</name>
        <param><defname>n</defname></param>
        <param><defname>l</defname></param>
        <param><defname>w1</defname></param>
        <param><defname>w2</defname></param>
        <param><defname>b1</defname></param>
        <param><defname>b2</defname></param>
        <param><defname>b3</defname></param>
        <param><defname>b4</defname></param>
        <param><defname>b5</defname></param>
        <param><defname>b6</defname></param>
        <param><defname>b7</defname></param>
        <param><defname>b8</defname></param>
        <initializer>static <ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> GUID n <ref refid="pa__win__wasapi_8c_1a979170f3a1187ea0059d94e632570a05" kindref="member">GUID_SECT</ref> = {<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>,w1,w2,{b1,b2,b3,b4,b5,b6,b7,b8}}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="167" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="167" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1ad5dca404e98a4186b60cba66787c5e1a" prot="public" static="no">
        <name>__DEFINE_IID</name>
        <param><defname>n</defname></param>
        <param><defname>l</defname></param>
        <param><defname>w1</defname></param>
        <param><defname>w2</defname></param>
        <param><defname>b1</defname></param>
        <param><defname>b2</defname></param>
        <param><defname>b3</defname></param>
        <param><defname>b4</defname></param>
        <param><defname>b5</defname></param>
        <param><defname>b6</defname></param>
        <param><defname>b7</defname></param>
        <param><defname>b8</defname></param>
        <initializer>static <ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> IID n <ref refid="pa__win__wasapi_8c_1a979170f3a1187ea0059d94e632570a05" kindref="member">GUID_SECT</ref> = {<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>,w1,w2,{b1,b2,b3,b4,b5,b6,b7,b8}}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="168" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="168" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a684dc8a813711bb4515ee0c59cf4311f" prot="public" static="no">
        <name>__DEFINE_CLSID</name>
        <param><defname>n</defname></param>
        <param><defname>l</defname></param>
        <param><defname>w1</defname></param>
        <param><defname>w2</defname></param>
        <param><defname>b1</defname></param>
        <param><defname>b2</defname></param>
        <param><defname>b3</defname></param>
        <param><defname>b4</defname></param>
        <param><defname>b5</defname></param>
        <param><defname>b6</defname></param>
        <param><defname>b7</defname></param>
        <param><defname>b8</defname></param>
        <initializer>static <ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> CLSID n <ref refid="pa__win__wasapi_8c_1a979170f3a1187ea0059d94e632570a05" kindref="member">GUID_SECT</ref> = {<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>,w1,w2,{b1,b2,b3,b4,b5,b6,b7,b8}}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="169" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="169" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a76de14f466267894ffd0f226ec89911d" prot="public" static="no">
        <name>PA_DEFINE_CLSID</name>
        <param><defname>className</defname></param>
        <param><defname>l</defname></param>
        <param><defname>w1</defname></param>
        <param><defname>w2</defname></param>
        <param><defname>b1</defname></param>
        <param><defname>b2</defname></param>
        <param><defname>b3</defname></param>
        <param><defname>b4</defname></param>
        <param><defname>b5</defname></param>
        <param><defname>b6</defname></param>
        <param><defname>b7</defname></param>
        <param><defname>b8</defname></param>
        <initializer><ref refid="pa__win__wasapi_8c_1a684dc8a813711bb4515ee0c59cf4311f" kindref="member">__DEFINE_CLSID</ref>(pa_CLSID_##className, 0x##l, 0x##w1, 0x##w2, 0x##b1, 0x##b2, 0x##b3, 0x##b4, 0x##b5, 0x##b6, 0x##b7, 0x##b8)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="170" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="170" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" prot="public" static="no">
        <name>PA_DEFINE_IID</name>
        <param><defname>interfaceName</defname></param>
        <param><defname>l</defname></param>
        <param><defname>w1</defname></param>
        <param><defname>w2</defname></param>
        <param><defname>b1</defname></param>
        <param><defname>b2</defname></param>
        <param><defname>b3</defname></param>
        <param><defname>b4</defname></param>
        <param><defname>b5</defname></param>
        <param><defname>b6</defname></param>
        <param><defname>b7</defname></param>
        <param><defname>b8</defname></param>
        <initializer><ref refid="pa__win__wasapi_8c_1ad5dca404e98a4186b60cba66787c5e1a" kindref="member">__DEFINE_IID</ref>(pa_IID_##interfaceName, 0x##l, 0x##w1, 0x##w2, 0x##b1, 0x##b2, 0x##b3, 0x##b4, 0x##b5, 0x##b6, 0x##b7, 0x##b8)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="172" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="172" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a0a9408819040e2ff021281f9e0971a35" prot="public" static="no">
        <name>CREATE_THREAD</name>
        <param><defname>PROC</defname></param>
        <initializer>(<ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref>)_beginthreadex( <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>, 0, (PROC), stream, 0, &amp;stream-&gt;dwThreadId )</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="218" column="10" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="218" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1ad744bd36cb3631b1dc11beb41dcc238c" prot="public" static="no">
        <name>PA_THREAD_FUNC</name>
        <initializer>static unsigned <ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="219" column="10" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="219" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1af90ebf49f32d984f4cea06ca90506e40" prot="public" static="no">
        <name>PA_THREAD_ID</name>
        <initializer>unsigned</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="220" column="10" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="220" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a8fb76fb0aad37662875d8c84422b7d7d" prot="public" static="no">
        <name>AUDCLNT_E_BUFFER_ERROR</name>
        <initializer><ref refid="audioclient_8h_1ad054bd2b5228366ccce81ab79fe369d4" kindref="member">AUDCLNT_ERR</ref>(0x018)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="233" column="10" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="233" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a7d7f5a942a92bc351ee138fb96551d6f" prot="public" static="no">
        <name>AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED</name>
        <initializer><ref refid="audioclient_8h_1ad054bd2b5228366ccce81ab79fe369d4" kindref="member">AUDCLNT_ERR</ref>(0x019)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="236" column="10" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="236" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1afa7cffa38411eb69296e902cfda00b22" prot="public" static="no">
        <name>AUDCLNT_E_INVALID_DEVICE_PERIOD</name>
        <initializer><ref refid="audioclient_8h_1ad054bd2b5228366ccce81ab79fe369d4" kindref="member">AUDCLNT_ERR</ref>(0x020)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="239" column="10" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="239" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" prot="public" static="no">
        <name>MAX_STR_LEN</name>
        <initializer>512</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="242" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="242" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a1ffa289724d1c8dbeefe0116b976158e" prot="public" static="no">
        <name>STATIC_ARRAY_SIZE</name>
        <param><defname>array</defname></param>
        <initializer>(sizeof(array)/sizeof(array[0]))</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="251" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="251" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" prot="public" static="no">
        <name>PRINT</name>
        <param><defname>x</defname></param>
        <initializer><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>(x);</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="253" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="253" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a771580ff4e4b9a948ebd1fb0fc9f17d7" prot="public" static="no">
        <name>PA_SKELETON_SET_LAST_HOST_ERROR</name>
        <param><defname>errorCode</defname></param>
        <param><defname>errorText</defname></param>
        <initializer><ref refid="pa__util_8h_1a9c3ad627c13c1d695fef054c216667f7" kindref="member">PaUtil_SetLastHostErrorInfo</ref>( <ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa27b155bf2883aef821dfb6eba89e456" kindref="member">paWASAPI</ref>, <ref refid="xmlparse_8c_1adf47938902be0f6a9c144226d02fd634" kindref="member">errorCode</ref>, errorText )</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="255" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="255" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1af46190c73acf456c64118d4df2afd503" prot="public" static="no">
        <name>PA_WASAPI__IS_FULLDUPLEX</name>
        <param><defname>STREAM</defname></param>
        <initializer>((<ref refid="xldmem_8h_1aa57974323bef0262551029d83546b8e9" kindref="member">STREAM</ref>)-&gt;in.clientProc &amp;&amp; (<ref refid="xldmem_8h_1aa57974323bef0262551029d83546b8e9" kindref="member">STREAM</ref>)-&gt;out.clientProc)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="258" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="258" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" prot="public" static="no">
        <name>IF_FAILED_JUMP</name>
        <param><defname>hr</defname></param>
        <param><defname>label</defname></param>
        <initializer><ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>(FAILED(hr)) goto <ref refid="_tags_8cpp_1a0a3345b0d4574d7adffe113dacd8ccec" kindref="member">label</ref>;</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="261" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="261" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" prot="public" static="no">
        <name>IF_FAILED_INTERNAL_ERROR_JUMP</name>
        <param><defname>hr</defname></param>
        <param><defname>error</defname></param>
        <param><defname>label</defname></param>
        <initializer><ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>(FAILED(hr)) { <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref> = <ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>; goto <ref refid="_tags_8cpp_1a0a3345b0d4574d7adffe113dacd8ccec" kindref="member">label</ref>; }</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="265" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="265" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" prot="public" static="no">
        <name>SAFE_CLOSE</name>
        <param><defname>h</defname></param>
        <initializer><ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref> ((h) != <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>) { CloseHandle((h)); (h) = <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>; }</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="268" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="268" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" prot="public" static="no">
        <name>SAFE_RELEASE</name>
        <param><defname>punk</defname></param>
        <initializer><ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref> ((punk) != <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>) { (punk)-&gt;lpVtbl-&gt;Release((punk)); (punk) = <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>; }</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="269" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="269" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" prot="public" static="no">
        <name>_GetProc</name>
        <param><defname>fun</defname></param>
        <param><defname>type</defname></param>
        <param><defname>name</defname></param>
        <initializer>{                                                        \
                                        fun = (type) GetProcAddress(hDInputDLL,<ref refid="lib_2expat_8h_1a1b49b495b59f9e73205b69ad1a2965b0" kindref="member">name</ref>);       \
                                        <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref> (fun == <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>) {                                  \
                                            <ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((&quot;GetProcAddr failed <ref refid="hashrout_8h_1a63bdfbdfaa50cfc85afcbff4ce2c16a6" kindref="member">for</ref> %<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>&quot; ,name));     \
                                            <ref refid="hashrout_8h_1a9842e92184417c07866419916b2b3ce3" kindref="member">return</ref> <ref refid="twolame_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;                                   \
                                        }                                                   \
                                    }                                                       \</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="290" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="290" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" prot="public" static="no">
        <name>LogHostError</name>
        <param><defname>HRES</defname></param>
        <initializer>__LogHostError(HRES, __FUNCTION__, __FILE__, __LINE__)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="553" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="553" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" prot="public" static="no">
        <name>LogPaError</name>
        <param><defname>PAERR</defname></param>
        <initializer>__LogPaError(PAERR, __FUNCTION__, __FILE__, __LINE__)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="605" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="605" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a6d765e6132c93a5601f277322ae4f98c" prot="public" static="no">
        <name>HDA_PACKET_SIZE</name>
        <initializer>(128)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="771" column="9"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a920e4c6a2c837ff4374cf5eb69a554eb" prot="public" static="no">
        <name>REFTIMES_PER_SEC</name>
        <initializer>10000000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="800" column="9"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1af9f1f980d99b0c1568771a74cd275f08" prot="public" static="no">
        <name>REFTIMES_PER_MILLISEC</name>
        <initializer>10000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="801" column="9"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a920e4c6a2c837ff4374cf5eb69a554eb" prot="public" static="no">
        <name>REFTIMES_PER_SEC</name>
        <initializer>10000000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="813" column="9"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1af9f1f980d99b0c1568771a74cd275f08" prot="public" static="no">
        <name>REFTIMES_PER_MILLISEC</name>
        <initializer>10000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="814" column="9"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1ada6662bf23deb36ae82097ee77924945" prot="public" static="no">
        <name>_WASAPI_MONO_TO_STEREO_MIXER_1_TO_2</name>
        <param><defname>TYPE</defname></param>
        <initializer>TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> to   = __to;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> = __from;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>  = <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> + <ref refid="metrics_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>;\
	while (<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> != <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>)\
	{\
		*to ++ = *<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>;\
		*to ++ = *<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>;\
		++ <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>;\
	}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1058" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1058" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a7a033fd62998defc98fd8b3318b1f437" prot="public" static="no">
        <name>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_FLT32</name>
        <param><defname>TYPE</defname></param>
        <initializer>TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> to   = (TYPE *)__to;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> = (TYPE *)__from;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>  = to + <ref refid="metrics_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>;\
	while (to != <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>)\
	{\
		*to ++ = (TYPE)((float)(<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>[0] + <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>[1]) * 0.5f);\
		from += 2;\
	}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1070" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1070" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a0dcd21c9e597e6295abca02c11622736" prot="public" static="no">
        <name>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT32</name>
        <param><defname>TYPE</defname></param>
        <initializer>TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> to   = (TYPE *)__to;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> = (TYPE *)__from;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>  = to + <ref refid="metrics_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>;\
	while (to != <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>)\
	{\
		*to ++ = (TYPE)(((INT32)<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>[0] + (INT32)<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>[1]) &gt;&gt; 1);\
		<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> += 2;\
	}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1081" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1081" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1a12872b4e5be48d44a65a4b47531a65b3" prot="public" static="no">
        <name>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT64</name>
        <param><defname>TYPE</defname></param>
        <initializer>TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> to   = (TYPE *)__to;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> = (TYPE *)__from;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>  = to + <ref refid="metrics_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>;\
	while (to != <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>)\
	{\
		*to ++ = (TYPE)(((<ref refid="win32__test_8c_1ace148f1ae00fea97a12fddab93c90377" kindref="member">INT64</ref>)<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>[0] + (<ref refid="win32__test_8c_1ace148f1ae00fea97a12fddab93c90377" kindref="member">INT64</ref>)<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>[1]) &gt;&gt; 1);\
		<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> += 2;\
	}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1092" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1092" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__win__wasapi_8c_1aa55d5cb14030dd39ad1e24a82216f71b" prot="public" static="no">
        <name>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_L</name>
        <param><defname>TYPE</defname></param>
        <initializer>TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> to   = (TYPE *)__to;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> = (TYPE *)__from;\
	TYPE * <ref refid="cdefs_8h_1a4127c12268159bf73f8e69b23c34c610" kindref="member">__restrict</ref> <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>  = to + <ref refid="metrics_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>;\
	while (to != <ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>)\
	{\
		*to ++ = <ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref>[0];\
		<ref refid="nasm_8h_1a5f350118b553429484632e5603292389" kindref="member">from</ref> += 2;\
	}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1103" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1103" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="enum">
      <memberdef kind="enum" id="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6" prot="public" static="no">
        <name>_AVRT_PRIORITY</name>
        <enumvalue id="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a82f37aa1743cab1c69da7d5ff49d6a8a" prot="public">
          <name>AVRT_PRIORITY_LOW</name>
          <initializer>= -1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a9ddb04ddf34535472b8f54f043d3a652" prot="public">
          <name>AVRT_PRIORITY_NORMAL</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a3d1e82a3e67940c08fff4233d7ec928f" prot="public">
          <name>AVRT_PRIORITY_HIGH</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a9868458188819915b729402bfa060ba2" prot="public">
          <name>AVRT_PRIORITY_CRITICAL</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="89" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="88" bodyend="94"/>
      </memberdef>
      <memberdef kind="enum" id="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0" prot="public" static="no">
        <name>@214</name>
        <enumvalue id="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" prot="public">
          <name>S_INPUT</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" prot="public">
          <name>S_OUTPUT</name>
          <initializer>= 1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" prot="public">
          <name>S_COUNT</name>
          <initializer>= 2</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a973c488a4609f21d89d641b762de9fe7" prot="public">
          <name>S_FULLDUPLEX</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="244" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="244" bodyend="244"/>
      </memberdef>
      <memberdef kind="enum" id="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8" prot="public" static="no">
        <name>@215</name>
        <enumvalue id="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8a7b6c7e83009a14df464dd680e87feaf2" prot="public">
          <name>WASAPI_PACKETS_PER_INPUT_BUFFER</name>
          <initializer>= 6</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="249" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="249" bodyend="249"/>
      </memberdef>
      <memberdef kind="enum" id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" prot="public" static="no">
        <name>EWindowsVersion</name>
        <enumvalue id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a34af6dcbce17b7e942bd8901fc89f701" prot="public">
          <name>WINDOWS_UNKNOWN</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ad24275f02eb3bf7b4e1ed8e759016e5f" prot="public">
          <name>WINDOWS_VISTA_SERVER2008</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a3fa4d45ad3f6f0249620f1165ee1ed4f" prot="public">
          <name>WINDOWS_7_SERVER2008R2</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a282960d50b4587c87046a8333bf2c38c" prot="public">
          <name>WINDOWS_8_SERVER2012</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ab5cea250cefffe760d8947ae4c3107d0" prot="public">
          <name>WINDOWS_8_1_SERVER2012R2</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a5b9050d995ef03019284af641563c15f" prot="public">
          <name>WINDOWS_10_SERVER2016</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a16952920e317737f75be9de6682f0d06" prot="public">
          <name>WINDOWS_FUTURE</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="878" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="877" bodyend="886"/>
      </memberdef>
      <memberdef kind="enum" id="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046c" prot="public" static="no">
        <name>EMixerDir</name>
        <enumvalue id="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046cab2ffbd89db8f6270bf898848a9b77668" prot="public">
          <name>MIX_DIR__1TO2</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca4a73cefc3d25fc95e94adf7b14ab3583" prot="public">
          <name>MIX_DIR__2TO1</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca0858f41d4d725a8638f791327d303f33" prot="public">
          <name>MIX_DIR__2TO1_L</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1055" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1055" bodyend="1055"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a76e09a9c1d9b4d52236c93683cdd0a13" prot="public" static="no">
        <type>enum <ref refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6" kindref="member">_AVRT_PRIORITY</ref></type>
        <definition>typedef AVRT_PRIORITY</definition>
        <argsstring></argsstring>
        <name>AVRT_PRIORITY</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="94" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="280" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a37790f227e70ff2c3ca5254ccdbfae0f" prot="public" static="no">
        <type>enum <ref refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6" kindref="member">_AVRT_PRIORITY</ref> *</type>
        <definition>typedef enum _AVRT_PRIORITY * PAVRT_PRIORITY</definition>
        <argsstring></argsstring>
        <name>PAVRT_PRIORITY</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="94" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a9c061ab1f26db8746b3dab38991f48a0" prot="public" static="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> GUID *</type>
        <definition>typedef const GUID* LPCGUID</definition>
        <argsstring></argsstring>
        <name>LPCGUID</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="103" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="103" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1aa83c2fbe06e13eff5ff331ba4a302659" prot="public" static="no">
        <type>struct <ref refid="struct__tagpropertykey" kindref="compound">_tagpropertykey</ref></type>
        <definition>typedef struct _tagpropertykey 	 PROPERTYKEY</definition>
        <argsstring></argsstring>
        <name>PROPERTYKEY</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="112" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a2fabb9f78551ca8cece2ae154336019c" prot="public" static="no">
        <type>struct <ref refid="struct___b_y_t_e___b_l_o_b" kindref="compound">_BYTE_BLOB</ref></type>
        <definition>typedef struct _BYTE_BLOB 	 BYTE_BLOB</definition>
        <argsstring></argsstring>
        <name>BYTE_BLOB</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="132" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1afe91709fff40390914215d21253da001" prot="public" static="no">
        <type><ref refid="rpcsal_8h_1a21fd41c8ce57ed4bb654bc7d456bd054" kindref="member">__RPC_unique_pointer</ref> <ref refid="pa__win__wasapi_8c_1a2fabb9f78551ca8cece2ae154336019c" kindref="member">BYTE_BLOB</ref> *</type>
        <definition>typedef __RPC_unique_pointer BYTE_BLOB* UP_BYTE_BLOB</definition>
        <argsstring></argsstring>
        <name>UP_BYTE_BLOB</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="133" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="133" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a83927f70641d4e9a344563bd9ddb15ae" prot="public" static="no">
        <type>LONGLONG</type>
        <definition>typedef LONGLONG REFERENCE_TIME</definition>
        <argsstring></argsstring>
        <name>REFERENCE_TIME</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="134" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="134" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1ae15ae1737c49a3e379f0f418acff17e0" prot="public" static="no">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref>(*</type>
        <definition>typedef void(* MixMonoToStereoF) (void *__to, void *__from, UINT32 count)</definition>
        <argsstring>)(void *__to, void *__from, UINT32 count)</argsstring>
        <name>MixMonoToStereoF</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="272" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="272" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1adcb5e65535b4cb03302e42da225b1d51" prot="public" static="no">
        <type>GUID</type>
        <definition>typedef PLARGE_INTEGER</definition>
        <argsstring></argsstring>
        <name>PLARGE_INTEGER</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="275" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="275" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a00005277f6e80b50489b77a3641c50f3" prot="public" static="no">
        <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref> *</type>
        <definition>typedef BOOL(WINAPI * FAvRevertMmThreadCharacteristics) (HANDLE)</definition>
        <argsstring>)(HANDLE)</argsstring>
        <name>FAvRevertMmThreadCharacteristics</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="279" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="279" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a1feacb0ea15cada417d700941cb7a8c3" prot="public" static="no">
        <type>struct <ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref></type>
        <definition>typedef struct PaWasapiDeviceInfo
 PaWasapiDeviceInfo</definition>
        <argsstring></argsstring>
        <name>PaWasapiDeviceInfo</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="382" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1aa746eb234a17020894e1a831699a5abf" prot="public" static="no">
        <type>struct <ref refid="struct_pa_wasapi_audio_client_params" kindref="compound">PaWasapiAudioClientParams</ref></type>
        <definition>typedef struct PaWasapiAudioClientParams
 PaWasapiAudioClientParams</definition>
        <argsstring></argsstring>
        <name>PaWasapiAudioClientParams</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="427" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1adb52e1579b47dc7ae034deb3c0d9df1e" prot="public" static="no">
        <type>struct <ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref></type>
        <definition>typedef struct PaWasapiSubStream
 PaWasapiSubStream</definition>
        <argsstring></argsstring>
        <name>PaWasapiSubStream</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="462" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a5e948988d90c01dea08282c308a81e50" prot="public" static="no">
        <type>struct <ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref></type>
        <definition>typedef struct PaWasapiHostProcessor
 PaWasapiHostProcessor</definition>
        <argsstring></argsstring>
        <name>PaWasapiHostProcessor</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="471" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1aabfde10324faae7ee10e2d25ac11f655" prot="public" static="no">
        <type>struct <ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref></type>
        <definition>typedef struct PaWasapiStream
 PaWasapiStream</definition>
        <argsstring></argsstring>
        <name>PaWasapiStream</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="531" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1af54f7e1004799c3325dcbe28a9150a92" prot="public" static="no">
        <type>struct <ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref></type>
        <definition>typedef struct ThreadIdleScheduler
 ThreadIdleScheduler</definition>
        <argsstring></argsstring>
        <name>ThreadIdleScheduler</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="628" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a949fa21ebe968b6a5a38bd434e5eb4f6" prot="public" static="no">
        <type>UINT32(*</type>
        <definition>typedef UINT32(* ALIGN_FUNC) (UINT32 v, UINT32 align)</definition>
        <argsstring>)(UINT32 v, UINT32 align)</argsstring>
        <name>ALIGN_FUNC</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="735" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="735" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a97486b2468e8463a8fb846b29dacb08b" prot="public" static="no">
        <type>enum <ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" kindref="member">EWindowsVersion</ref></type>
        <definition>typedef enum EWindowsVersion
 EWindowsVersion</definition>
        <argsstring></argsstring>
        <name>EWindowsVersion</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="887" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__win__wasapi_8c_1a213e4b1a6f300932dad4df17045f46d2" prot="public" static="no">
        <type>enum <ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046c" kindref="member">EMixerDir</ref></type>
        <definition>typedef enum EMixerDir  EMixerDir</definition>
        <argsstring></argsstring>
        <name>EMixerDir</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1055" column="1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="pa__win__wasapi_8c_1ad025b87f212fcc6085a0b88ed1acd0e2" prot="public" static="no" mutable="no">
        <type>typedef</type>
        <definition>typedef LPDWORD</definition>
        <argsstring></argsstring>
        <name>LPDWORD</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="278" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="278" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__win__wasapi_8c_1a0cffb86637fcb99ea5a2bf0706fc086e" prot="public" static="yes" mutable="no">
        <type>HMODULE</type>
        <definition>HMODULE hDInputDLL</definition>
        <argsstring></argsstring>
        <name>hDInputDLL</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="282" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="282" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__win__wasapi_8c_1ad998bad539a112ce8182c22c5cf0481e" prot="public" static="no" mutable="no">
        <type>FAvRtCreateThreadOrderingGroup</type>
        <definition>FAvRtCreateThreadOrderingGroup pAvRtCreateThreadOrderingGroup</definition>
        <argsstring></argsstring>
        <name>pAvRtCreateThreadOrderingGroup</name>
        <initializer>= <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="283" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="283" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__win__wasapi_8c_1a5604278b62c1f5c62e906ab2e53ba6ab" prot="public" static="no" mutable="no">
        <type>FAvRtDeleteThreadOrderingGroup</type>
        <definition>FAvRtDeleteThreadOrderingGroup pAvRtDeleteThreadOrderingGroup</definition>
        <argsstring></argsstring>
        <name>pAvRtDeleteThreadOrderingGroup</name>
        <initializer>= <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="284" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="284" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__win__wasapi_8c_1ab0d78159e0a0e2a6575ca053983461d8" prot="public" static="no" mutable="no">
        <type>FAvRtWaitOnThreadOrderingGroup</type>
        <definition>FAvRtWaitOnThreadOrderingGroup pAvRtWaitOnThreadOrderingGroup</definition>
        <argsstring></argsstring>
        <name>pAvRtWaitOnThreadOrderingGroup</name>
        <initializer>= <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="285" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="285" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__win__wasapi_8c_1a892964d92daf945b57491f24eb331056" prot="public" static="no" mutable="no">
        <type>FAvSetMmThreadCharacteristics</type>
        <definition>FAvSetMmThreadCharacteristics pAvSetMmThreadCharacteristics</definition>
        <argsstring></argsstring>
        <name>pAvSetMmThreadCharacteristics</name>
        <initializer>= <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="286" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="286" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__win__wasapi_8c_1a800438cc51e4a6661c2cdb986a16e093" prot="public" static="no" mutable="no">
        <type><ref refid="pa__win__wasapi_8c_1a00005277f6e80b50489b77a3641c50f3" kindref="member">FAvRevertMmThreadCharacteristics</ref></type>
        <definition>FAvRevertMmThreadCharacteristics pAvRevertMmThreadCharacteristics</definition>
        <argsstring></argsstring>
        <name>pAvRevertMmThreadCharacteristics</name>
        <initializer>= <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="287" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="287" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__win__wasapi_8c_1a00926c56ee41e2e33e834e6552a9fe0d" prot="public" static="no" mutable="no">
        <type>FAvSetMmThreadPriority</type>
        <definition>FAvSetMmThreadPriority pAvSetMmThreadPriority</definition>
        <argsstring></argsstring>
        <name>pAvSetMmThreadPriority</name>
        <initializer>= <ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="288" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="288" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="pa__win__wasapi_8c_1a1ece8a6630af9313888eab6508beec15" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IAudioClient, 1cb9ad4c, dbfa, 4c32, b1, 78, c2, f5, 68, a7, 03, b2)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref></type>
        </param>
        <param>
          <type>1cb9ad4c</type>
        </param>
        <param>
          <type>dbfa</type>
        </param>
        <param>
          <type>4c32</type>
        </param>
        <param>
          <type>b1</type>
        </param>
        <param>
          <type>78</type>
        </param>
        <param>
          <type><ref refid="convtest_8m_1a09ab2f3b6c61c793c7b6d24912b2cea0" kindref="member">c2</ref></type>
        </param>
        <param>
          <type>f5</type>
        </param>
        <param>
          <type>68</type>
        </param>
        <param>
          <type>a7</type>
        </param>
        <param>
          <type>03</type>
        </param>
        <param>
          <type>b2</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="176" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a3b95fbf20416e2ff902c8a1cc149b2c2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IAudioClient2, 726778cd, f60a, 4eda, 82, de, e4, 76, 10, cd, 78, aa)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type>IAudioClient2</type>
        </param>
        <param>
          <type>726778cd</type>
        </param>
        <param>
          <type>f60a</type>
        </param>
        <param>
          <type>4eda</type>
        </param>
        <param>
          <type>82</type>
        </param>
        <param>
          <type>de</type>
        </param>
        <param>
          <type>e4</type>
        </param>
        <param>
          <type>76</type>
        </param>
        <param>
          <type>10</type>
        </param>
        <param>
          <type><ref refid="rfft2d_test_m_l_8m_1a51ec853512a386583838922288834695" kindref="member">cd</ref></type>
        </param>
        <param>
          <type>78</type>
        </param>
        <param>
          <type>aa</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="178" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa5af9cc6b076410d262f921bfd2a0859" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IMMEndpoint, 1be09788, 6894, 4089, 85, 86, 9a, 2a, 6c, 26, 5a, c5)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="mmdeviceapi_8h_1a32d63499f58b0065348b8c09c18d9f36" kindref="member">IMMEndpoint</ref></type>
        </param>
        <param>
          <type>1be09788</type>
        </param>
        <param>
          <type>6894</type>
        </param>
        <param>
          <type>4089</type>
        </param>
        <param>
          <type>85</type>
        </param>
        <param>
          <type>86</type>
        </param>
        <param>
          <type>9a</type>
        </param>
        <param>
          <type>2a</type>
        </param>
        <param>
          <type>6c</type>
        </param>
        <param>
          <type>26</type>
        </param>
        <param>
          <type>5a</type>
        </param>
        <param>
          <type>c5</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="180" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a7352e0e14e250246f7aed4c9bfebe118" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IMMDeviceEnumerator, a95664d2, 9614, 4f35, a7, 46, de, 8d, b6, 36, 17, e6)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="mmdeviceapi_8h_1a105bf1359b5d6cd4fb24828cc6ab2874" kindref="member">IMMDeviceEnumerator</ref></type>
        </param>
        <param>
          <type>a95664d2</type>
        </param>
        <param>
          <type>9614</type>
        </param>
        <param>
          <type>4f35</type>
        </param>
        <param>
          <type>a7</type>
        </param>
        <param>
          <type>46</type>
        </param>
        <param>
          <type>de</type>
        </param>
        <param>
          <type>8d</type>
        </param>
        <param>
          <type>b6</type>
        </param>
        <param>
          <type>36</type>
        </param>
        <param>
          <type>17</type>
        </param>
        <param>
          <type>e6</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="182" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a217e090bc41b002bac8c67d506e7c293" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_CLSID</definition>
        <argsstring>(IMMDeviceEnumerator, bcde0395, e52f, 467c, 8e, 3d, c4, 57, 92, 91, 69, 2e)</argsstring>
        <name>PA_DEFINE_CLSID</name>
        <param>
          <type><ref refid="mmdeviceapi_8h_1a105bf1359b5d6cd4fb24828cc6ab2874" kindref="member">IMMDeviceEnumerator</ref></type>
        </param>
        <param>
          <type>bcde0395</type>
        </param>
        <param>
          <type>e52f</type>
        </param>
        <param>
          <type>467c</type>
        </param>
        <param>
          <type>8e</type>
        </param>
        <param>
          <type>3d</type>
        </param>
        <param>
          <type>c4</type>
        </param>
        <param>
          <type>57</type>
        </param>
        <param>
          <type>92</type>
        </param>
        <param>
          <type>91</type>
        </param>
        <param>
          <type>69</type>
        </param>
        <param>
          <type>2e</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="184" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ae55f342ce51f789b74ae90ef9f8b8afd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IAudioRenderClient, f294acfc, 3146, 4483, a7, bf, ad, dc, a7, c2, 60, e2)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="audioclient_8h_1a3d3202e827ce9328a16178551d97746e" kindref="member">IAudioRenderClient</ref></type>
        </param>
        <param>
          <type>f294acfc</type>
        </param>
        <param>
          <type>3146</type>
        </param>
        <param>
          <type>4483</type>
        </param>
        <param>
          <type>a7</type>
        </param>
        <param>
          <type>bf</type>
        </param>
        <param>
          <type>ad</type>
        </param>
        <param>
          <type>dc</type>
        </param>
        <param>
          <type>a7</type>
        </param>
        <param>
          <type><ref refid="convtest_8m_1a09ab2f3b6c61c793c7b6d24912b2cea0" kindref="member">c2</ref></type>
        </param>
        <param>
          <type>60</type>
        </param>
        <param>
          <type>e2</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="186" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1acb9f29dd14a7e4a38a3d768cd3f745e9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IAudioCaptureClient, c8adbd64, e71e, 48a0, a4, de, 18, 5c, 39, 5c, d3, 17)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="audioclient_8h_1a2d3108bb1604145f734949a5cb7a578a" kindref="member">IAudioCaptureClient</ref></type>
        </param>
        <param>
          <type>c8adbd64</type>
        </param>
        <param>
          <type>e71e</type>
        </param>
        <param>
          <type>48a0</type>
        </param>
        <param>
          <type>a4</type>
        </param>
        <param>
          <type>de</type>
        </param>
        <param>
          <type>18</type>
        </param>
        <param>
          <type>5c</type>
        </param>
        <param>
          <type>39</type>
        </param>
        <param>
          <type>5c</type>
        </param>
        <param>
          <type>d3</type>
        </param>
        <param>
          <type>17</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="188" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ae4739ba48dcd72f329d79eb9b4fe4cdb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IDeviceTopology, 2A07407E, 6497, 4A18, 97, 87, 32, f7, 9b, d0, d9, 8f)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="devicetopology_8h_1a4997c6c4616c3245d515eafd2ce686d0" kindref="member">IDeviceTopology</ref></type>
        </param>
        <param>
          <type>2A07407E</type>
        </param>
        <param>
          <type>6497</type>
        </param>
        <param>
          <type>4A18</type>
        </param>
        <param>
          <type>97</type>
        </param>
        <param>
          <type>87</type>
        </param>
        <param>
          <type>32</type>
        </param>
        <param>
          <type>f7</type>
        </param>
        <param>
          <type>9b</type>
        </param>
        <param>
          <type>d0</type>
        </param>
        <param>
          <type>d9</type>
        </param>
        <param>
          <type>8f</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="190" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a028039501a67cfcf87ff71f37e2ade6a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IPart, AE2DE0E4, 5BCA, 4F2D, aa, 46, 5d, 13, f8, fd, b3, a9)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="devicetopology_8h_1adabb5bd8e19759521e1498eef1d0b56f" kindref="member">IPart</ref></type>
        </param>
        <param>
          <type>AE2DE0E4</type>
        </param>
        <param>
          <type>5BCA</type>
        </param>
        <param>
          <type>4F2D</type>
        </param>
        <param>
          <type>aa</type>
        </param>
        <param>
          <type>46</type>
        </param>
        <param>
          <type>5d</type>
        </param>
        <param>
          <type>13</type>
        </param>
        <param>
          <type>f8</type>
        </param>
        <param>
          <type>fd</type>
        </param>
        <param>
          <type>b3</type>
        </param>
        <param>
          <type>a9</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="192" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a8e34cd8eb85293ec3a3225127754633f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>PA_DEFINE_IID</definition>
        <argsstring>(IKsJackDescription, 4509F757, 2D46, 4637, 8e, 62, ce, 7d, b9, 44, f5, 7b)</argsstring>
        <name>PA_DEFINE_IID</name>
        <param>
          <type><ref refid="devicetopology_8h_1a309e1781c2a5279a8dcd39a197a59003" kindref="member">IKsJackDescription</ref></type>
        </param>
        <param>
          <type>4509F757</type>
        </param>
        <param>
          <type>2D46</type>
        </param>
        <param>
          <type>4637</type>
        </param>
        <param>
          <type>8e</type>
        </param>
        <param>
          <type>62</type>
        </param>
        <param>
          <type>ce</type>
        </param>
        <param>
          <type>7d</type>
        </param>
        <param>
          <type>b9</type>
        </param>
        <param>
          <type>44</type>
        </param>
        <param>
          <type>f5</type>
        </param>
        <param>
          <type>7b</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="194" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a18656159e0f57f9de0b9fb6c36c98f2d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>__DEFINE_GUID</definition>
        <argsstring>(pa_KSDATAFORMAT_SUBTYPE_PCM, 0x00000001, 0x0000, 0x0010, 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71)</argsstring>
        <name>__DEFINE_GUID</name>
        <param>
          <type>pa_KSDATAFORMAT_SUBTYPE_PCM</type>
        </param>
        <param>
          <type>0x00000001</type>
        </param>
        <param>
          <type>0x0000</type>
        </param>
        <param>
          <type>0x0010</type>
        </param>
        <param>
          <type>0x80</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0xaa</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0x38</type>
        </param>
        <param>
          <type>0x9b</type>
        </param>
        <param>
          <type>0x71</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="196" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa40505d86e5d43a64feee42314677279" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>__DEFINE_GUID</definition>
        <argsstring>(pa_KSDATAFORMAT_SUBTYPE_ADPCM, 0x00000002, 0x0000, 0x0010, 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71)</argsstring>
        <name>__DEFINE_GUID</name>
        <param>
          <type>pa_KSDATAFORMAT_SUBTYPE_ADPCM</type>
        </param>
        <param>
          <type>0x00000002</type>
        </param>
        <param>
          <type>0x0000</type>
        </param>
        <param>
          <type>0x0010</type>
        </param>
        <param>
          <type>0x80</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0xaa</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0x38</type>
        </param>
        <param>
          <type>0x9b</type>
        </param>
        <param>
          <type>0x71</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="197" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a68918bf0b41c53e2172ac6d55d9812ab" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>__DEFINE_GUID</definition>
        <argsstring>(pa_KSDATAFORMAT_SUBTYPE_IEEE_FLOAT, 0x00000003, 0x0000, 0x0010, 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71)</argsstring>
        <name>__DEFINE_GUID</name>
        <param>
          <type>pa_KSDATAFORMAT_SUBTYPE_IEEE_FLOAT</type>
        </param>
        <param>
          <type>0x00000003</type>
        </param>
        <param>
          <type>0x0000</type>
        </param>
        <param>
          <type>0x0010</type>
        </param>
        <param>
          <type>0x80</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0xaa</type>
        </param>
        <param>
          <type>0x00</type>
        </param>
        <param>
          <type>0x38</type>
        </param>
        <param>
          <type>0x9b</type>
        </param>
        <param>
          <type>0x71</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="198" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ac575016ee1e9d6275cbc5004b2409036" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wmme_8c_1ad744bd36cb3631b1dc11beb41dcc238c" kindref="member">PA_THREAD_FUNC</ref></type>
        <definition>PA_THREAD_FUNC ProcThreadEvent</definition>
        <argsstring>(void *param)</argsstring>
        <name>ProcThreadEvent</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>param</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="228" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4716" bodyend="4915"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aae20a143b3c891a38a7e918ee4b1d6b8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wmme_8c_1ad744bd36cb3631b1dc11beb41dcc238c" kindref="member">PA_THREAD_FUNC</ref></type>
        <definition>PA_THREAD_FUNC ProcThreadPoll</definition>
        <argsstring>(void *param)</argsstring>
        <name>ProcThreadPoll</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>param</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="229" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4918" bodyend="5437"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>typedef</type>
        <definition>typedef BOOL</definition>
        <argsstring>(WINAPI *FAvRtCreateThreadOrderingGroup)(PHANDLE</argsstring>
        <name>BOOL</name>
        <param>
          <type><ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref> *</type>
          <declname>FAvRtCreateThreadOrderingGroup</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="275" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a17a3aca6faec8a591d204f32baa40bf5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>typedef</type>
        <definition>typedef HANDLE</definition>
        <argsstring>(WINAPI *FAvSetMmThreadCharacteristics)(LPCSTR</argsstring>
        <name>HANDLE</name>
        <param>
          <type><ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref> *</type>
          <declname>FAvSetMmThreadCharacteristics</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="278" column="1"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a56a0d6a3498d2ca95227d2e5c9975c40" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaWasapi_Initialize</definition>
        <argsstring>(PaUtilHostApiRepresentation **hostApi, PaHostApiIndex index)</argsstring>
        <name>PaWasapi_Initialize</name>
        <param>
          <type><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> **</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1aeef6da084c57c70aa94be97411e19930" kindref="member">PaHostApiIndex</ref></type>
          <declname>index</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="304" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1177" bodyend="1615"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aceda435bfe9c0d0959dcd41043016c6c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void Terminate</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi)</argsstring>
        <name>Terminate</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="318" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1618" bodyend="1650"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1addd36fca55daaf757e041555254b05e3" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError IsFormatSupported</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, const PaStreamParameters *inputParameters, const PaStreamParameters *outputParameters, double sampleRate)</argsstring>
        <name>IsFormatSupported</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>inputParameters</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>outputParameters</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="319" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2241" bodyend="2308"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ac43ea176a845c04786718d19a88b9455" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError OpenStream</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, PaStream **s, const PaStreamParameters *inputParameters, const PaStreamParameters *outputParameters, double sampleRate, unsigned long framesPerBuffer, PaStreamFlags streamFlags, PaStreamCallback *streamCallback, void *userData)</argsstring>
        <name>OpenStream</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> **</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>inputParameters</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>outputParameters</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>framesPerBuffer</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a37c7ac3ace7d2dd1430f40ecdee4ebb6" kindref="member">PaStreamFlags</ref></type>
          <declname>streamFlags</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a8a60fb2a5ec9cbade3f54a9c978e2710" kindref="member">PaStreamCallback</ref> *</type>
          <declname>streamCallback</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>userData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="323" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2904" bodyend="3322"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a6684024dfdc36122d40cf7adae0e4322" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError CloseStream</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>CloseStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="332" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3325" bodyend="3362"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1afa58dcb70fc29aa4c667d6d07b748f6e" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError StartStream</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>StartStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="333" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3516" bodyend="3653"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a39e942c55c24e34c3796d29d61889370" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError StopStream</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>StopStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="334" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3696" bodyend="3701"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a28c623db69cda01e15f064fd2bf84f0f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError AbortStream</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>AbortStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="335" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3704" bodyend="3709"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa9f1516c5edd9ea34b8e150f662f8f4e" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError IsStreamStopped</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>IsStreamStopped</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="336" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3712" bodyend="3715"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a4f3f06c27a57b78bf59b603f30b6b466" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError IsStreamActive</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>IsStreamActive</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="337" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3718" bodyend="3721"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ab41ee17db1430b9bb3957324f6ac20f1" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref></type>
        <definition>static PaTime GetStreamTime</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>GetStreamTime</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="338" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3724" bodyend="3732"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a3877d53c30b8b20f35f362ef07b998cd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>double</type>
        <definition>static double GetStreamCpuLoad</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>GetStreamCpuLoad</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="339" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3735" bodyend="3738"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a9e7f111c33d1e80f40473846864e84fa" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError ReadStream</definition>
        <argsstring>(PaStream *stream, void *buffer, unsigned long frames)</argsstring>
        <name>ReadStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>frames</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="340" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3741" bodyend="3917"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a0cfb7772846808945bd521d23d5626eb" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError WriteStream</definition>
        <argsstring>(PaStream *stream, const void *buffer, unsigned long frames)</argsstring>
        <name>WriteStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>frames</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="341" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3920" bodyend="4031"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a82aa1e30985c7924247e8f45fc356d46" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>signed long</type>
        <definition>static signed long GetStreamReadAvailable</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>GetStreamReadAvailable</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="342" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4039" bodyend="4063"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ad7ee6bd74b3109101f1eb4ca0514c8b0" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>signed long</type>
        <definition>static signed long GetStreamWriteAvailable</definition>
        <argsstring>(PaStream *stream)</argsstring>
        <name>GetStreamWriteAvailable</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="343" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4066" bodyend="4085"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a7d6ddadb10aee6600862900c83b22636" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT MarshalSubStreamComPointers</definition>
        <argsstring>(PaWasapiSubStream *substream)</argsstring>
        <name>MarshalSubStreamComPointers</name>
        <param>
          <type><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref> *</type>
          <declname>substream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="534" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3450" bodyend="3468"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ae61f722d6ee9148763edc18b92aa1b44" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT MarshalStreamComPointers</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>MarshalStreamComPointers</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="535" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3471" bodyend="3513"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ac5e5b249b9ef3bec34c8672a14ab4193" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT UnmarshalSubStreamComPointers</definition>
        <argsstring>(PaWasapiSubStream *substream)</argsstring>
        <name>UnmarshalSubStreamComPointers</name>
        <param>
          <type><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref> *</type>
          <declname>substream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="536" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3365" bodyend="3380"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a7372c10c031aa2ec20ee00ced396ee66" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT UnmarshalStreamComPointers</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>UnmarshalStreamComPointers</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="537" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3383" bodyend="3429"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a0c4b874dd4233b61b110786a29ed699b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void ReleaseUnmarshaledSubComPointers</definition>
        <argsstring>(PaWasapiSubStream *substream)</argsstring>
        <name>ReleaseUnmarshaledSubComPointers</name>
        <param>
          <type><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref> *</type>
          <declname>substream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="538" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3432" bodyend="3435"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ae25bceb7df330f47b61267b280b9aae3" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void ReleaseUnmarshaledComPointers</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>ReleaseUnmarshaledComPointers</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="539" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3438" bodyend="3447"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a91b36ef37b1efafc8ab423624a8b6546" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void _StreamOnStop</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>_StreamOnStop</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="542" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4685" bodyend="4713"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a4802a008d4d0a6c861757fa72a473a2f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void _StreamFinish</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>_StreamFinish</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="543" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3656" bodyend="3681"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ac0c5a868f45182ea537305609b0c2c54" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void _StreamCleanup</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>_StreamCleanup</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="544" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="3684" bodyend="3693"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ab334e634310890b5e5af1fde44cb1583" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT _PollGetOutputFramesAvailable</definition>
        <argsstring>(PaWasapiStream *stream, UINT32 *available)</argsstring>
        <name>_PollGetOutputFramesAvailable</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type>UINT32 *</type>
          <declname>available</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="545" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4517" bodyend="4535"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a5b63ee2bcc18da2c3fe980147f185611" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT _PollGetInputFramesAvailable</definition>
        <argsstring>(PaWasapiStream *stream, UINT32 *available)</argsstring>
        <name>_PollGetInputFramesAvailable</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type>UINT32 *</type>
          <declname>available</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="546" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4538" bodyend="4549"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ab8efeb58c788c66dfdbc833b2d30e23b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
        <definition>void * PaWasapi_ReallocateMemory</definition>
        <argsstring>(void *ptr, size_t size)</argsstring>
        <name>PaWasapi_ReallocateMemory</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>size</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="547" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="5440" bodyend="5443"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a002cf46f50bf480179ee495d535df607" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void PaWasapi_FreeMemory</definition>
        <argsstring>(void *ptr)</argsstring>
        <name>PaWasapi_FreeMemory</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="548" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="5446" bodyend="5449"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a4d61a7abb2529cca99371df66108af7f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>static HRESULT __LogHostError</definition>
        <argsstring>(HRESULT res, const char *func, const char *file, int line)</argsstring>
        <name>__LogHostError</name>
        <param>
          <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
          <declname>res</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char *</type>
          <declname>func</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char *</type>
          <declname>file</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>line</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="554" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="554" bodyend="602"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a87e03452e26707fa8621a3b671b8d226" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError __LogPaError</definition>
        <argsstring>(PaError err, const char *func, const char *file, int line)</argsstring>
        <name>__LogPaError</name>
        <param>
          <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
          <declname>err</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char *</type>
          <declname>func</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char *</type>
          <declname>file</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>line</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="606" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="606" bodyend="612"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a79edfb0e7c901c6c8133476722584385" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void ThreadIdleScheduler_Setup</definition>
        <argsstring>(ThreadIdleScheduler *sched, UINT32 resolution, UINT32 microseconds)</argsstring>
        <name>ThreadIdleScheduler_Setup</name>
        <param>
          <type><ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref> *</type>
          <declname>sched</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>resolution</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>microseconds</declname>
        </param>
        <briefdescription>
<para>Setup scheduler. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="630" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="630" bodyend="641"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a954faef4f8e156c7bb554a5315b792f5" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 ThreadIdleScheduler_NextSleep</definition>
        <argsstring>(ThreadIdleScheduler *sched)</argsstring>
        <name>ThreadIdleScheduler_NextSleep</name>
        <param>
          <type><ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref> *</type>
          <declname>sched</declname>
        </param>
        <briefdescription>
<para>Iterate and check if can sleep. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="643" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="643" bodyend="652"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a9b88815aa9083b291384bc8a16efd072" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>double</type>
        <definition>static double nano100ToSeconds</definition>
        <argsstring>(REFERENCE_TIME ref)</argsstring>
        <name>nano100ToSeconds</name>
        <param>
          <type><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref></type>
          <declname>ref</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="664" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="664" bodyend="670"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1af3b33fe03fe934b1050e41ea2f31e9e0" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref></type>
        <definition>static REFERENCE_TIME SecondsTonano100</definition>
        <argsstring>(double ref)</argsstring>
        <name>SecondsTonano100</name>
        <param>
          <type>double</type>
          <declname>ref</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="682" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="682" bodyend="688"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a44c38a5bc12c36ecacf7a4e18116ee0c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref></type>
        <definition>static REFERENCE_TIME MakeHnsPeriod</definition>
        <argsstring>(UINT32 nFrames, DWORD nSamplesPerSec)</argsstring>
        <name>MakeHnsPeriod</name>
        <param>
          <type>UINT32</type>
          <declname>nFrames</declname>
        </param>
        <param>
          <type><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref></type>
          <declname>nSamplesPerSec</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="692" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="692" bodyend="695"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a4885530f42a9ba66fa1554ca84c50995" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref></type>
        <definition>static WORD PaSampleFormatToBitsPerSample</definition>
        <argsstring>(PaSampleFormat format_id)</argsstring>
        <name>PaSampleFormatToBitsPerSample</name>
        <param>
          <type><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref></type>
          <declname>format_id</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="699" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="699" bodyend="711"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aac6e95ea5ce7f265082c8227e845be02" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 MakeFramesFromHns</definition>
        <argsstring>(REFERENCE_TIME hnsPeriod, UINT32 nSamplesPerSec)</argsstring>
        <name>MakeFramesFromHns</name>
        <param>
          <type><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref></type>
          <declname>hnsPeriod</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>nSamplesPerSec</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="722" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="722" bodyend="732"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a9079e0132ebefb86024a2d693de4b80c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 ALIGN_BWD</definition>
        <argsstring>(UINT32 v, UINT32 align)</argsstring>
        <name>ALIGN_BWD</name>
        <param>
          <type>UINT32</type>
          <declname>v</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>align</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="739" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="739" bodyend="742"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa556175b25b531e2abe21c3271522eb4" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 ALIGN_FWD</definition>
        <argsstring>(UINT32 v, UINT32 align)</argsstring>
        <name>ALIGN_FWD</name>
        <param>
          <type>UINT32</type>
          <declname>v</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>align</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="746" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="746" bodyend="752"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a34e25232f62662dafe2b79c6fbc38cc2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>UINT32 ALIGN_NEXT_POW2</definition>
        <argsstring>(UINT32 v)</argsstring>
        <name>ALIGN_NEXT_POW2</name>
        <param>
          <type>UINT32</type>
          <declname>v</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="756" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="756" bodyend="762"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aef5240c45851783536f38e7741c7b9c7" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 AlignFramesPerBuffer</definition>
        <argsstring>(UINT32 nFrames, UINT32 nSamplesPerSec, UINT32 nBlockAlign, ALIGN_FUNC pAlignFunc)</argsstring>
        <name>AlignFramesPerBuffer</name>
        <param>
          <type>UINT32</type>
          <declname>nFrames</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>nSamplesPerSec</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>nBlockAlign</declname>
        </param>
        <param>
          <type><ref refid="pa__win__wasapi_8c_1a949fa21ebe968b6a5a38bd434e5eb4f6" kindref="member">ALIGN_FUNC</ref></type>
          <declname>pAlignFunc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="768" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="768" bodyend="792"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1abb901f03506cc5037283a71dd8888a68" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 GetFramesSleepTime</definition>
        <argsstring>(UINT32 nFrames, UINT32 nSamplesPerSec)</argsstring>
        <name>GetFramesSleepTime</name>
        <param>
          <type>UINT32</type>
          <declname>nFrames</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>nSamplesPerSec</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="795" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="795" bodyend="805"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a784d21f4eaf74108dac8434fa212e2fd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 GetFramesSleepTimeMicroseconds</definition>
        <argsstring>(UINT32 nFrames, UINT32 nSamplesPerSec)</argsstring>
        <name>GetFramesSleepTimeMicroseconds</name>
        <param>
          <type>UINT32</type>
          <declname>nFrames</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>nSamplesPerSec</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="808" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="808" bodyend="818"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ae46ca19edc303047be432635f36422df" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref></type>
        <definition>static BOOL SetupAVRT</definition>
        <argsstring>()</argsstring>
        <name>SetupAVRT</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="821" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="821" bodyend="840"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a6894ffc30e6782d9720caf206740f4f0" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void CloseAVRT</definition>
        <argsstring>()</argsstring>
        <name>CloseAVRT</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="843" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="843" bodyend="848"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a45b74527ac45cd619a09eabc1d378d94" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref></type>
        <definition>static BOOL IsWow64</definition>
        <argsstring>()</argsstring>
        <name>IsWow64</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="851" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="851" bodyend="874"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a4b3e0157b6cc7b4be7db3c2a3715b124" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref></type>
        <definition>static BOOL IsWindowsVersionOrGreater</definition>
        <argsstring>(WORD wMajorVersion, WORD wMinorVersion, WORD wServicePackMajor)</argsstring>
        <name>IsWindowsVersionOrGreater</name>
        <param>
          <type><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref></type>
          <declname>wMajorVersion</declname>
        </param>
        <param>
          <type><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref></type>
          <declname>wMinorVersion</declname>
        </param>
        <param>
          <type><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref></type>
          <declname>wServicePackMajor</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="889" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="889" bodyend="917"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ab40efd886689b14e328f58719bfc0c6c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" kindref="member">EWindowsVersion</ref></type>
        <definition>static EWindowsVersion GetWindowsVersion</definition>
        <argsstring>()</argsstring>
        <name>GetWindowsVersion</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="919" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="919" bodyend="1005"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a705e8cb4a9ec7f38a29f8cead9fa32e8" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref></type>
        <definition>static BOOL UseWOW64Workaround</definition>
        <argsstring>()</argsstring>
        <name>UseWOW64Workaround</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1008" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1008" bodyend="1014"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ad31423638772ef61097dd67f64ac7564" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>UINT32</type>
        <definition>static UINT32 GetAudioClientVersion</definition>
        <argsstring>()</argsstring>
        <name>GetAudioClientVersion</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1017" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1017" bodyend="1026"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1af026798ee875f1b632cfb559d50baaef" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> IID *</type>
        <definition>static const IID* GetAudioClientIID</definition>
        <argsstring>()</argsstring>
        <name>GetAudioClientIID</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1029" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1029" bodyend="1052"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a76ea47d25e495d15dc1408af3c5874da" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_1TO2_8</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_1TO2_8</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1114" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1114" bodyend="1114"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1afa29005724e3b419faae1a2a754f2496" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_1TO2_16</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_1TO2_16</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1115" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1115" bodyend="1115"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a2c5aae303ab13e1081877b713cee5faf" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_1TO2_24</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_1TO2_24</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1116" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1116" bodyend="1116"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a573c7964cef414b9d1c2e1fa6523bc12" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_1TO2_32</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_1TO2_32</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1117" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1117" bodyend="1117"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a1ec12166ee15a328cff9c67f05680628" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_1TO2_32f</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_1TO2_32f</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1118" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1118" bodyend="1118"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1acca227e4aacc6ef7af63cbafc3d185f6" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_8</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_8</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1121" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1121" bodyend="1121"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ae9ee8d83cc053931e686b0f485d97792" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_16</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_16</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1122" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1122" bodyend="1122"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ad4381a4720ac123f1dad8337f1e1f4ea" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_24</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_24</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1123" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1123" bodyend="1123"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a648a44eee8fb66c460c634ba68fa408c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_32</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_32</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1124" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1124" bodyend="1124"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ad35474924aa249e375fd767ac9fc4f11" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_32f</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_32f</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1125" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1125" bodyend="1125"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aba88235781a5dba6e8fb425fce5088f7" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_8_L</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_8_L</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1128" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1128" bodyend="1128"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a14aa9d13c1cbdec6ee3e17cc33f434c9" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_16_L</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_16_L</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1129" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1129" bodyend="1129"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aec306e4ad3363d1290b9613edc1d96c0" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_24_L</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_24_L</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1130" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1130" bodyend="1130"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a84bfaab16f97695536e003c0f92754c1" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_32_L</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_32_L</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1131" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1131" bodyend="1131"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a85c8b6cec703de6e5f646156964808d5" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _MixMonoToStereo_2TO1_32f_L</definition>
        <argsstring>(void *__to, void *__from, UINT32 count)</argsstring>
        <name>_MixMonoToStereo_2TO1_32f_L</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__to</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>__from</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1132" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1132" bodyend="1132"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ae180a50c1da0847bbfc0ed7ada2c02b6" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wasapi_8c_1ae15ae1737c49a3e379f0f418acff17e0" kindref="member">MixMonoToStereoF</ref></type>
        <definition>static MixMonoToStereoF _GetMonoToStereoMixer</definition>
        <argsstring>(PaSampleFormat format, EMixerDir dir)</argsstring>
        <name>_GetMonoToStereoMixer</name>
        <param>
          <type><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref></type>
          <declname>format</declname>
        </param>
        <param>
          <type><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046c" kindref="member">EMixerDir</ref></type>
          <declname>dir</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1135" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1135" bodyend="1174"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a0255bd61599a8fc81e19e11fb4304643" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref> *</type>
        <definition>static PaWasapiHostApiRepresentation* _GetHostApi</definition>
        <argsstring>(PaError *_error)</argsstring>
        <name>_GetHostApi</name>
        <param>
          <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref> *</type>
          <declname>_error</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1653" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1653" bodyend="1666"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa42c66da0ae19959d25a190e9dd82005" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int PaWasapi_GetDeviceDefaultFormat</definition>
        <argsstring>(void *pFormat, unsigned int nFormatSize, PaDeviceIndex nDevice)</argsstring>
        <name>PaWasapi_GetDeviceDefaultFormat</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>pFormat</declname>
        </param>
        <param>
          <type>unsigned <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>nFormatSize</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref></type>
          <declname>nDevice</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns default sound format for device. <ref refid="class_format" kindref="compound">Format</ref> is represented by <ref refid="struct_pa_win_wave_format" kindref="compound">PaWinWaveFormat</ref> or WAVEFORMATEXTENSIBLE structure.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>pFormat</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to <ref refid="struct_pa_win_wave_format" kindref="compound">PaWinWaveFormat</ref> or WAVEFORMATEXTENSIBLE structure. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nFormatSize</parametername>
</parameternamelist>
<parameterdescription>
<para>Size of <ref refid="struct_pa_win_wave_format" kindref="compound">PaWinWaveFormat</ref> or WAVEFORMATEXTENSIBLE structure in bytes. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>Device index.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Non-negative value indicating the number of bytes copied into format decriptor or, a PaErrorCode (which are always negative) if PortAudio is not initialized or an error is encountered. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1669" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1669" bodyend="1699"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a6a8c5307dff661ae7ee0d7bb8bf73469" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int PaWasapi_GetDeviceRole</definition>
        <argsstring>(PaDeviceIndex nDevice)</argsstring>
        <name>PaWasapi_GetDeviceRole</name>
        <param>
          <type><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref></type>
          <declname>nDevice</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns device role (PaWasapiDeviceRole enum).</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>device index.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Non-negative value indicating device role or, a PaErrorCode (which are always negative) if PortAudio is not initialized or an error is encountered. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1702" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1702" bodyend="1722"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a2ed6fd7668a8395be51d661b99b74ae6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> wchar_t *</type>
        <definition>const wchar_t* PaWasapi_GetInputDeviceID</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>PaWasapi_GetInputDeviceID</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns Windows device ID for input stream</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>pStream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PaStream to query.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>non-null value pointing to static device ID </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1725" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1725" bodyend="1735"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a07d58f9548d783818bd617128761545f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> wchar_t *</type>
        <definition>const wchar_t* PaWasapi_GetOutputDeviceID</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>PaWasapi_GetOutputDeviceID</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns Windows device ID for output stream</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>pStream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PaStream to query.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>non-null value pointing to static device ID </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1738" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1738" bodyend="1748"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a15bf85dfb80dc090cf03550be6ab054b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int PaWasapi_IsLoopback</definition>
        <argsstring>(PaDeviceIndex nDevice)</argsstring>
        <name>PaWasapi_IsLoopback</name>
        <param>
          <type><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref></type>
          <declname>nDevice</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns device loopback indicator.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>device index.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 = Not loopback, 1 = loopback, &lt; 0 = PaErrorCode if PortAudio is not initialized or an error is encountered. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1751" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1751" bodyend="1771"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1af8f04003c6123e6fdcfdf7308761a75e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaWasapi_GetFramesPerHostBuffer</definition>
        <argsstring>(PaStream *pStream, unsigned int *nInput, unsigned int *nOutput)</argsstring>
        <name>PaWasapi_GetFramesPerHostBuffer</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>pStream</declname>
        </param>
        <param>
          <type>unsigned <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>nInput</declname>
        </param>
        <param>
          <type>unsigned <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>nOutput</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get number of frames per host buffer. This is maximal value of frames of WASAPI buffer which can be locked for operations. Use this method as helper to findout maximal values of inputFrames/outputFrames of PaWasapiHostProcessorCallback.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>pStream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PaStream to query. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nInput</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to variable to receive number of input frames. Can be NULL. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nOutput</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to variable to receive number of output frames. Can be NULL. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Error code indicating success or failure. </para></simplesect>
<simplesect kind="see"><para><ref refid="pa__win__wasapi_8h_1ae3d91dd8eaeff3cbe9ff3bfafc5e6006" kindref="member">PaWasapiHostProcessorCallback</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1774" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1774" bodyend="1787"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a3b3aff058d716c74ab2da1fa943a4d81" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void LogWAVEFORMATEXTENSIBLE</definition>
        <argsstring>(const WAVEFORMATEXTENSIBLE *in)</argsstring>
        <name>LogWAVEFORMATEXTENSIBLE</name>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> WAVEFORMATEXTENSIBLE *</type>
          <declname>in</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1790" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1790" bodyend="1840"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a2c7f8090b2542c3bd946ef5357b5d41c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref></type>
        <definition>static PaSampleFormat WaveToPaFormat</definition>
        <argsstring>(const WAVEFORMATEXTENSIBLE *in)</argsstring>
        <name>WaveToPaFormat</name>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> WAVEFORMATEXTENSIBLE *</type>
          <declname>in</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1843" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1843" bodyend="1883"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ab9f431b7d5d8dbea1ebbaf131c3151a9" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError MakeWaveFormatFromParams</definition>
        <argsstring>(WAVEFORMATEXTENSIBLE *wavex, const PaStreamParameters *params, double sampleRate)</argsstring>
        <name>MakeWaveFormatFromParams</name>
        <param>
          <type>WAVEFORMATEXTENSIBLE *</type>
          <declname>wavex</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>params</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="1886" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="1886" bodyend="1968"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa28e8f708791b2664343c9508292fe14" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError GetClosestFormat</definition>
        <argsstring>(IAudioClient *myClient, double sampleRate, const PaStreamParameters *_params, AUDCLNT_SHAREMODE shareMode, WAVEFORMATEXTENSIBLE *outWavex, BOOL output)</argsstring>
        <name>GetClosestFormat</name>
        <param>
          <type><ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref> *</type>
          <declname>myClient</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>_params</declname>
        </param>
        <param>
          <type><ref refid="_audio_session_types_8h_1a0957067f6e0b63274f50931b31ed0ce5" kindref="member">AUDCLNT_SHAREMODE</ref></type>
          <declname>shareMode</declname>
        </param>
        <param>
          <type>WAVEFORMATEXTENSIBLE *</type>
          <declname>outWavex</declname>
        </param>
        <param>
          <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref></type>
          <declname>output</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2020" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2020" bodyend="2162"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aaad528352067c77fde86de1c4b206ae7" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError IsStreamParamsValid</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, const PaStreamParameters *inputParameters, const PaStreamParameters *outputParameters, double sampleRate)</argsstring>
        <name>IsStreamParamsValid</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>inputParameters</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>outputParameters</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2165" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2165" bodyend="2238"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a13970edea3c6226ecbdd1ef8d9ef9d07" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref></type>
        <definition>static PaUint32 PaUtil_GetFramesPerHostBuffer</definition>
        <argsstring>(PaUint32 userFramesPerBuffer, PaTime suggestedLatency, double sampleRate, PaUint32 TimerJitterMs)</argsstring>
        <name>PaUtil_GetFramesPerHostBuffer</name>
        <param>
          <type><ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref></type>
          <declname>userFramesPerBuffer</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref></type>
          <declname>suggestedLatency</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <param>
          <type><ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref></type>
          <declname>TimerJitterMs</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2311" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2311" bodyend="2316"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1acf99d6b00e666f4ac1e97015c4f85252" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _RecalculateBuffersCount</definition>
        <argsstring>(PaWasapiSubStream *sub, UINT32 userFramesPerBuffer, UINT32 framesPerLatency, BOOL fullDuplex)</argsstring>
        <name>_RecalculateBuffersCount</name>
        <param>
          <type><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref> *</type>
          <declname>sub</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>userFramesPerBuffer</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>framesPerLatency</declname>
        </param>
        <param>
          <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref></type>
          <declname>fullDuplex</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2319" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2319" bodyend="2341"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1acd5f946b92393bc6e8ce337893531c5a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void _CalculateAlignedPeriod</definition>
        <argsstring>(PaWasapiSubStream *pSub, UINT32 *nFramesPerLatency, ALIGN_FUNC pAlignFunc)</argsstring>
        <name>_CalculateAlignedPeriod</name>
        <param>
          <type><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref> *</type>
          <declname>pSub</declname>
        </param>
        <param>
          <type>UINT32 *</type>
          <declname>nFramesPerLatency</declname>
        </param>
        <param>
          <type><ref refid="pa__win__wasapi_8c_1a949fa21ebe968b6a5a38bd434e5eb4f6" kindref="member">ALIGN_FUNC</ref></type>
          <declname>pAlignFunc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2344" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2344" bodyend="2359"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a510a8e627db13dea9804e376910f1868" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>static HRESULT CreateAudioClient</definition>
        <argsstring>(PaWasapiStream *pStream, PaWasapiSubStream *pSub, BOOL output, PaError *pa_error)</argsstring>
        <name>CreateAudioClient</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>pStream</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref> *</type>
          <declname>pSub</declname>
        </param>
        <param>
          <type><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref></type>
          <declname>output</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref> *</type>
          <declname>pa_error</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
<para>Enforce min/max period for device in Shared mode to avoid bad audio quality. Avoid doing so for Exclusive mode as alignment will suffer.</para><para>Windows 7 does not allow to set latency lower than minimal device period and will return error: AUDCLNT_E_INVALID_DEVICE_PERIOD. Under Vista we enforce the same behavior manually for unified behavior on all platforms.</para><para>AUDCLNT_E_BUFFER_SIZE_ERROR: Applies to Windows 7 and later. Indicates that the buffer duration value requested by an exclusive-mode client is out of range. The requested duration value for pull mode must not be greater than 500 milliseconds; for push mode the duration value must not be greater than 2 seconds.</para><para>WASAPI is tricky on large device buffer, sometimes 2000ms can be allocated sometimes less. There is no known guaranteed level thus we make subsequent tries by decreasing buffer by 100ms per try.</para><para>WASAPI buffer size failure. Fallback to using default size.</para><para>If the requested buffer size is not aligned. Can be triggered by Windows 7 and up. Should not be be triggered ever as we do align buffers always with _CalculateAlignedPeriod.</para>        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2362" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2362" bodyend="2757"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1abce23294f8f5341b54d92587cbde1a51" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError ActivateAudioClientOutput</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>ActivateAudioClientOutput</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2760" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2760" bodyend="2829"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1adbe963f9d895be4b9767290422431144" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError ActivateAudioClientInput</definition>
        <argsstring>(PaWasapiStream *stream)</argsstring>
        <name>ActivateAudioClientInput</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="2832" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="2832" bodyend="2901"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1afe88b93d518a48a088c658b7c8ab25b1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>unsigned long</type>
        <definition>unsigned long PaUtil_GetOutputFrameCount</definition>
        <argsstring>(PaUtilBufferProcessor *bp)</argsstring>
        <name>PaUtil_GetOutputFrameCount</name>
        <param>
          <type><ref refid="struct_pa_util_buffer_processor" kindref="compound">PaUtilBufferProcessor</ref> *</type>
          <declname>bp</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4033" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4033" bodyend="4036"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a14eb2351e39fe7b8ce3428b70e5a81c2" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void WaspiHostProcessingLoop</definition>
        <argsstring>(void *inputBuffer, long inputFrames, void *outputBuffer, long outputFrames, void *userData)</argsstring>
        <name>WaspiHostProcessingLoop</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>inputBuffer</declname>
        </param>
        <param>
          <type>long</type>
          <declname>inputFrames</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>outputBuffer</declname>
        </param>
        <param>
          <type>long</type>
          <declname>outputFrames</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>userData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4089" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4089" bodyend="4194"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa8e7f1e1beb2ef450c45ca6d6b9234d7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref></type>
        <definition>HANDLE MMCSS_activate</definition>
        <argsstring>(const char *name)</argsstring>
        <name>MMCSS_activate</name>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4197" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4197" bodyend="4220"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a32561c759b333bdffc1a7fe3fdf5dd04" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void MMCSS_deactivate</definition>
        <argsstring>(HANDLE hTask)</argsstring>
        <name>MMCSS_deactivate</name>
        <param>
          <type><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref></type>
          <declname>hTask</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4223" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4223" bodyend="4232"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a2d48ae4d2124209ed8a6264c6febedc7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaWasapi_ThreadPriorityBoost</definition>
        <argsstring>(void **hTask, PaWasapiThreadPriority nPriorityClass)</argsstring>
        <name>PaWasapi_ThreadPriorityBoost</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> **</type>
          <declname>hTask</declname>
        </param>
        <param>
          <type><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661" kindref="member">PaWasapiThreadPriority</ref></type>
          <declname>nPriorityClass</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Boost thread priority of calling thread (MMCSS). Use it for Blocking Interface only for thread which makes calls to Pa_WriteStream/Pa_ReadStream.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hTask</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to pointer to priority task. Must be used with PaWasapi_RevertThreadPriority method to revert thread priority to initial state.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nPriorityClass</parametername>
</parameternamelist>
<parameterdescription>
<para>Id of thread priority of PaWasapiThreadPriority type. Specifying eThreadPriorityNone does nothing.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Error code indicating success or failure. </para></simplesect>
<simplesect kind="see"><para>PaWasapi_RevertThreadPriority </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4235" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4235" bodyend="4262"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1ac5c875fb9165712ff696512f750f7de3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaWasapi_ThreadPriorityRevert</definition>
        <argsstring>(void *hTask)</argsstring>
        <name>PaWasapi_ThreadPriorityRevert</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>hTask</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Boost thread priority of calling thread (MMCSS). Use it for Blocking Interface only for thread which makes calls to Pa_WriteStream/Pa_ReadStream.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hTask</parametername>
</parameternamelist>
<parameterdescription>
<para>Task handle obtained by PaWasapi_BoostThreadPriority method. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Error code indicating success or failure. </para></simplesect>
<simplesect kind="see"><para>PaWasapi_BoostThreadPriority </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4265" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4265" bodyend="4273"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a46583f8e4b1132c198e2451fd48f7490" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaWasapi_GetJackCount</definition>
        <argsstring>(PaDeviceIndex nDevice, int *jcount)</argsstring>
        <name>PaWasapi_GetJackCount</name>
        <param>
          <type><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref></type>
          <declname>nDevice</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> *</type>
          <declname>jcount</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get number of jacks associated with a WASAPI device. Use this method to determine if there are any jacks associated with the provided WASAPI device. Not all audio devices will support this capability. This is valid for both input and output devices. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>device index. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>jcount</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of jacks is returned in this variable </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Error code indicating success or failure </para></simplesect>
<simplesect kind="see"><para><ref refid="pa__win__wasapi_8h_1a042829efac1aca1d77608d136a523465" kindref="member">PaWasapi_GetJackDescription</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4279" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4279" bodyend="4350"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a703d3f51cec3848f87b966218ecb72c0" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1" kindref="member">PaWasapiJackConnectionType</ref></type>
        <definition>static PaWasapiJackConnectionType ConvertJackConnectionTypeWASAPIToPA</definition>
        <argsstring>(int connType)</argsstring>
        <name>ConvertJackConnectionTypeWASAPIToPA</name>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>connType</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4353" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4353" bodyend="4375"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a498ad322573f48d6e5a8a811351ad1e9" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188" kindref="member">PaWasapiJackGeoLocation</ref></type>
        <definition>static PaWasapiJackGeoLocation ConvertJackGeoLocationWASAPIToPA</definition>
        <argsstring>(int geoLoc)</argsstring>
        <name>ConvertJackGeoLocationWASAPIToPA</name>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>geoLoc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4378" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4378" bodyend="4401"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a53b1bf1a98250870bf2347c030484417" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cf" kindref="member">PaWasapiJackGenLocation</ref></type>
        <definition>static PaWasapiJackGenLocation ConvertJackGenLocationWASAPIToPA</definition>
        <argsstring>(int genLoc)</argsstring>
        <name>ConvertJackGenLocationWASAPIToPA</name>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>genLoc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4404" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4404" bodyend="4418"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1aa3d2f47c8d4386a94938fda636a75d69" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pa__win__wasapi_8h_1aa4c63b1465e5de66f108facd3ddf893d" kindref="member">PaWasapiJackPortConnection</ref></type>
        <definition>static PaWasapiJackPortConnection ConvertJackPortConnectionWASAPIToPA</definition>
        <argsstring>(int portConn)</argsstring>
        <name>ConvertJackPortConnectionWASAPIToPA</name>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>portConn</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4421" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4421" bodyend="4431"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a042829efac1aca1d77608d136a523465" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaWasapi_GetJackDescription</definition>
        <argsstring>(PaDeviceIndex nDevice, int jindex, PaWasapiJackDescription *pJackDescription)</argsstring>
        <name>PaWasapi_GetJackDescription</name>
        <param>
          <type><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref></type>
          <declname>nDevice</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>jindex</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_wasapi_jack_description" kindref="compound">PaWasapiJackDescription</ref> *</type>
          <declname>pJackDescription</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the jack description associated with a WASAPI device and jack number Before this function is called, use PaWasapi_GetJackCount to determine the number of jacks associated with device. If jcount is greater than zero, then each jack from 0 to jcount can be queried with this function to get the jack description. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>device index. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>jindex</parametername>
</parameternamelist>
<parameterdescription>
<para>Which jack to return information </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n" kindref="compound">KSJACK_DESCRIPTION</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>This structure filled in on success. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Error code indicating success or failure </para></simplesect>
<simplesect kind="see"><para><ref refid="pa__win__wasapi_8h_1a46583f8e4b1132c198e2451fd48f7490" kindref="member">PaWasapi_GetJackCount</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4437" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4437" bodyend="4514"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT ProcessOutputBuffer</definition>
        <argsstring>(PaWasapiStream *stream, PaWasapiHostProcessor *processor, UINT32 frames)</argsstring>
        <name>ProcessOutputBuffer</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref> *</type>
          <declname>processor</declname>
        </param>
        <param>
          <type>UINT32</type>
          <declname>frames</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4552" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4552" bodyend="4613"/>
      </memberdef>
      <memberdef kind="function" id="pa__win__wasapi_8c_1a37f64191221d539235537b8cfa71b456" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref></type>
        <definition>HRESULT ProcessInputBuffer</definition>
        <argsstring>(PaWasapiStream *stream, PaWasapiHostProcessor *processor)</argsstring>
        <name>ProcessInputBuffer</name>
        <param>
          <type><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref> *</type>
          <declname>processor</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" line="4616" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c" bodystart="4616" bodyend="4682"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>WASAPI implementation of support for a host API. </para>    </briefdescription>
    <detaileddescription>
<para><simplesect kind="note"><para>pa_wasapi currently requires minimum VC 2005, and the latest Vista SDK </para></simplesect>
</para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Portable<sp/>Audio<sp/>I/O<sp/>Library<sp/>WASAPI<sp/>implementation</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2006-2010<sp/>David<sp/>Viens,<sp/>Dmitry<sp/>Kostjuchenko</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>Based<sp/>on<sp/>the<sp/>Open<sp/>Source<sp/>API<sp/>proposed<sp/>by<sp/>Ross<sp/>Bencina</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>1999-2002<sp/>Ross<sp/>Bencina,<sp/>Phil<sp/>Burk</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>Permission<sp/>is<sp/>hereby<sp/>granted,<sp/>free<sp/>of<sp/>charge,<sp/>to<sp/>any<sp/>person<sp/>obtaining</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>a<sp/>copy<sp/>of<sp/>this<sp/>software<sp/>and<sp/>associated<sp/>documentation<sp/>files</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>(the<sp/>&quot;Software&quot;),<sp/>to<sp/>deal<sp/>in<sp/>the<sp/>Software<sp/>without<sp/>restriction,</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/>including<sp/>without<sp/>limitation<sp/>the<sp/>rights<sp/>to<sp/>use,<sp/>copy,<sp/>modify,<sp/>merge,</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>publish,<sp/>distribute,<sp/>sublicense,<sp/>and/or<sp/>sell<sp/>copies<sp/>of<sp/>the<sp/>Software,</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>and<sp/>to<sp/>permit<sp/>persons<sp/>to<sp/>whom<sp/>the<sp/>Software<sp/>is<sp/>furnished<sp/>to<sp/>do<sp/>so,</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>subject<sp/>to<sp/>the<sp/>following<sp/>conditions:</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>The<sp/>above<sp/>copyright<sp/>notice<sp/>and<sp/>this<sp/>permission<sp/>notice<sp/>shall<sp/>be</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>included<sp/>in<sp/>all<sp/>copies<sp/>or<sp/>substantial<sp/>portions<sp/>of<sp/>the<sp/>Software.</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>THE<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>&quot;AS<sp/>IS&quot;,<sp/>WITHOUT<sp/>WARRANTY<sp/>OF<sp/>ANY<sp/>KIND,</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>EXPRESS<sp/>OR<sp/>IMPLIED,<sp/>INCLUDING<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO<sp/>THE<sp/>WARRANTIES<sp/>OF</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY,<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE<sp/>AND<sp/>NONINFRINGEMENT.</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE<sp/>AUTHORS<sp/>OR<sp/>COPYRIGHT<sp/>HOLDERS<sp/>BE<sp/>LIABLE<sp/>FOR</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>ANY<sp/>CLAIM,<sp/>DAMAGES<sp/>OR<sp/>OTHER<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>AN<sp/>ACTION<sp/>OF</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/>CONTRACT,<sp/>TORT<sp/>OR<sp/>OTHERWISE,<sp/>ARISING<sp/>FROM,<sp/>OUT<sp/>OF<sp/>OR<sp/>IN<sp/>CONNECTION</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>WITH<sp/>THE<sp/>SOFTWARE<sp/>OR<sp/>THE<sp/>USE<sp/>OR<sp/>OTHER<sp/>DEALINGS<sp/>IN<sp/>THE<sp/>SOFTWARE.</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/>The<sp/>text<sp/>above<sp/>constitutes<sp/>the<sp/>entire<sp/>PortAudio<sp/>license;<sp/>however,</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*<sp/>the<sp/>PortAudio<sp/>community<sp/>also<sp/>makes<sp/>the<sp/>following<sp/>non-binding<sp/>requests:</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/>Any<sp/>person<sp/>wishing<sp/>to<sp/>distribute<sp/>modifications<sp/>to<sp/>the<sp/>Software<sp/>is</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>*<sp/>requested<sp/>to<sp/>send<sp/>the<sp/>modifications<sp/>to<sp/>the<sp/>original<sp/>developer<sp/>so<sp/>that</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/>they<sp/>can<sp/>be<sp/>incorporated<sp/>into<sp/>the<sp/>canonical<sp/>version.<sp/>It<sp/>is<sp/>also</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*<sp/>requested<sp/>that<sp/>these<sp/>non-binding<sp/>requests<sp/>be<sp/>included<sp/>along<sp/>with<sp/>the</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*<sp/>license<sp/>above.</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="45" refid="pa__win__wasapi_8c_1ac7bef5d85e3dcd73eef56ad39ffc84a9" refkind="member"><highlight class="preprocessor">#define<sp/>WIN32_LEAN_AND_MEAN<sp/>//<sp/>exclude<sp/>rare<sp/>headers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;windows.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;process.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="assert_8h" kindref="compound">assert.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;mmsystem.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;mmreg.h&gt;</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>must<sp/>be<sp/>before<sp/>other<sp/>Wasapi<sp/>headers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_MSC_VER)<sp/>&amp;&amp;<sp/>(_MSC_VER<sp/>&gt;=<sp/>1400)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;Avrt.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>COBJMACROS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="audioclient_8h" kindref="compound">Audioclient.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="endpointvolume_8h" kindref="compound">endpointvolume.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>INITGUID<sp/>//<sp/>Avoid<sp/>additional<sp/>linkage<sp/>of<sp/>static<sp/>libs,<sp/>excessive<sp/>code<sp/>will<sp/>be<sp/>optimized<sp/>out<sp/>by<sp/>the<sp/>compiler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="mmdeviceapi_8h" kindref="compound">mmdeviceapi.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="functiondiscoverykeys_8h" kindref="compound">functiondiscoverykeys.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="devicetopology_8h" kindref="compound">devicetopology.h</ref>&gt;</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>Used<sp/>to<sp/>get<sp/>IKsJackDescription<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#undef<sp/>INITGUID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>__MWERKS__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;malloc.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="memory_8h" kindref="compound">memory.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>__MWERKS__<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__util_8h" kindref="compound">pa_util.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__allocation_8h" kindref="compound">pa_allocation.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__hostapi_8h" kindref="compound">pa_hostapi.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__stream_8h" kindref="compound">pa_stream.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__cpuload_8h" kindref="compound">pa_cpuload.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__process_8h" kindref="compound">pa_process.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__win__wasapi_8h" kindref="compound">pa_win_wasapi.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__debugprint_8h" kindref="compound">pa_debugprint.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__ringbuffer_8h" kindref="compound">pa_ringbuffer.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__win__coinitialize_8h" kindref="compound">pa_win_coinitialize.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>NTDDI_VERSION</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#undef<sp/>WINVER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#undef<sp/>_WIN32_WINNT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84" refid="pa__win__wasapi_8c_1a966cd377b9f3fdeb1432460c33352af1" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>WINVER<sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x0600<sp/>//<sp/>VISTA</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85" refid="pa__win__wasapi_8c_1ac50762666aa00bd3a4308158510f1748" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>_WIN32_WINNT<sp/>WINVER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifndef<sp/>_AVRT_<sp/>//&lt;&lt;<sp/>fix<sp/>MinGW<sp/>dummy<sp/>compile<sp/>by<sp/>defining<sp/>missing<sp/>type:<sp/>AVRT_PRIORITY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6" kindref="member">_AVRT_PRIORITY</ref></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="90" refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a82f37aa1743cab1c69da7d5ff49d6a8a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a82f37aa1743cab1c69da7d5ff49d6a8a" kindref="member">AVRT_PRIORITY_LOW</ref><sp/>=<sp/>-1,</highlight></codeline>
<codeline lineno="91" refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a9ddb04ddf34535472b8f54f043d3a652" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a9ddb04ddf34535472b8f54f043d3a652" kindref="member">AVRT_PRIORITY_NORMAL</ref>,</highlight></codeline>
<codeline lineno="92" refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a3d1e82a3e67940c08fff4233d7ec928f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a3d1e82a3e67940c08fff4233d7ec928f" kindref="member">AVRT_PRIORITY_HIGH</ref>,</highlight></codeline>
<codeline lineno="93" refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a9868458188819915b729402bfa060ba2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1add7d79439251a024ba77c19ad515b8f6a9868458188819915b729402bfa060ba2" kindref="member">AVRT_PRIORITY_CRITICAL</ref></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><ref refid="pa__win__wasapi_8c_1a76e09a9c1d9b4d52236c93683cdd0a13" kindref="member">AVRT_PRIORITY</ref>,<sp/>*<ref refid="pa__win__wasapi_8c_1a37790f227e70ff2c3ca5254ccdbfae0f" kindref="member">PAVRT_PRIORITY</ref>;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;basetyps.h&gt;</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>&lt;&lt;<sp/>for<sp/>IID/CLSID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="rpcsal_8h" kindref="compound">rpcsal.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="sal_8h" kindref="compound">sal.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifndef<sp/>__LPCGUID_DEFINED__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="pa__win__wasapi_8c_1a47e37ab430bf80d50648a0d5ac18b103" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>__LPCGUID_DEFINED__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103" refid="pa__win__wasapi_8c_1a9c061ab1f26db8746b3dab38991f48a0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>GUID<sp/>*<ref refid="pa__win__wasapi_8c_1a9c061ab1f26db8746b3dab38991f48a0" kindref="member">LPCGUID</ref>;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifndef<sp/>PROPERTYKEY_DEFINED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107" refid="pa__win__wasapi_8c_1a7d2c965c2e6466eb96707b5034ccd693" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>PROPERTYKEY_DEFINED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108" refid="struct__tagpropertykey" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct__tagpropertykey" kindref="compound">_tagpropertykey</ref></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="110" refid="struct__tagpropertykey_1ab8f38fa76c734d53a1345581301e0a2c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GUID<sp/><ref refid="struct__tagpropertykey_1ab8f38fa76c734d53a1345581301e0a2c" kindref="member">fmtid</ref>;</highlight></codeline>
<codeline lineno="111" refid="struct__tagpropertykey_1a447f95b55f362f11e0fad3ede64a4ef0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/><ref refid="struct__tagpropertykey_1a447f95b55f362f11e0fad3ede64a4ef0" kindref="member">pid</ref>;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aa83c2fbe06e13eff5ff331ba4a302659" kindref="member">PROPERTYKEY</ref>;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifdef<sp/>__midl_proxy</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>__MIDL_CONST</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="pa__win__wasapi_8c_1a673c1f31132e45e35ddee6d1d92b9bb1" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>__MIDL_CONST<sp/>const</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifdef<sp/>WIN64</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#include<sp/>&lt;wtypes.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/>LONG<sp/>NTSTATUS;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>FASTCALL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#include<sp/>&lt;oleidl.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#include<sp/>&lt;objidl.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128" refid="struct___b_y_t_e___b_l_o_b" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct___b_y_t_e___b_l_o_b" kindref="compound">_BYTE_BLOB</ref></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="130" refid="struct___b_y_t_e___b_l_o_b_1a13be4b59f9b0a4142143e52fede86481" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="struct___b_y_t_e___b_l_o_b_1a13be4b59f9b0a4142143e52fede86481" kindref="member">clSize</ref>;</highlight></codeline>
<codeline lineno="131" refid="struct___b_y_t_e___b_l_o_b_1aee73207e09675f03e1f7985251dcc50b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>abData[<sp/>1<sp/>];</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a2fabb9f78551ca8cece2ae154336019c" kindref="member">BYTE_BLOB</ref>;</highlight></codeline>
<codeline lineno="133" refid="pa__win__wasapi_8c_1afe91709fff40390914215d21253da001" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">/*<sp/>[unique]<sp/>*/</highlight><highlight class="normal"><sp/><sp/><ref refid="rpcsal_8h_1a21fd41c8ce57ed4bb654bc7d456bd054" kindref="member">__RPC_unique_pointer</ref><sp/><ref refid="struct___b_y_t_e___b_l_o_b" kindref="compound">BYTE_BLOB</ref><sp/>*<ref refid="pa__win__wasapi_8c_1afe91709fff40390914215d21253da001" kindref="member">UP_BYTE_BLOB</ref>;</highlight></codeline>
<codeline lineno="134" refid="pa__win__wasapi_8c_1a83927f70641d4e9a344563bd9ddb15ae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/>LONGLONG<sp/><ref refid="pa__win__wasapi_8c_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref>;</highlight></codeline>
<codeline lineno="135" refid="pa__win__wasapi_8c_1af1ecaf25e5207f6c04582d5081d99b00" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>NONAMELESSUNION</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifndef<sp/>WAVE_FORMAT_IEEE_FLOAT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139" refid="pa__win__wasapi_8c_1a37d17ddda1e36eb0f54d80a946b897f0" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>WAVE_FORMAT_IEEE_FLOAT<sp/>0x0003<sp/>//<sp/>32-bit<sp/>floating-point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif<sp/><sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifndef<sp/>__MINGW_EXTENSION</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#if<sp/>defined(__GNUC__)<sp/>||<sp/>defined(__GNUG__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>__MINGW_EXTENSION<sp/>__extension__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146" refid="pa__win__wasapi_8c_1adc323f9409c3f1374367fecf9a2e3496" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#define<sp/>__MINGW_EXTENSION</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="sdkddkver_8h" kindref="compound">sdkddkver.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="propkeydef_8h" kindref="compound">propkeydef.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152" refid="pa__win__wasapi_8c_1a8dbf8c07441f5b076bfc6eea06513cb7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>COBJMACROS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153" refid="pa__win__wasapi_8c_1af11aade3f3741fb554915d10d3f514eb" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>INITGUID<sp/>//<sp/>Avoid<sp/>additional<sp/>linkage<sp/>of<sp/>static<sp/>libs,<sp/>excessive<sp/>code<sp/>will<sp/>be<sp/>optimized<sp/>out<sp/>by<sp/>the<sp/>compiler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="audioclient_8h" kindref="compound">audioclient.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="mmdeviceapi_8h" kindref="compound">mmdeviceapi.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="endpointvolume_8h" kindref="compound">endpointvolume.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="functiondiscoverykeys_8h" kindref="compound">functiondiscoverykeys.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#include<sp/>&lt;<ref refid="devicetopology_8h" kindref="compound">devicetopology.h</ref>&gt;</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>Used<sp/>to<sp/>get<sp/>IKsJackDescription<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#undef<sp/>INITGUID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/>//<sp/>NTDDI_VERSION</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>GUID_SECT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164" refid="pa__win__wasapi_8c_1a979170f3a1187ea0059d94e632570a05" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>GUID_SECT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167" refid="pa__win__wasapi_8c_1a5270bc6f60431a3ab7cc5f171493b5dd" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>__DEFINE_GUID(n,l,w1,w2,b1,b2,b3,b4,b5,b6,b7,b8)<sp/>static<sp/>const<sp/>GUID<sp/>n<sp/>GUID_SECT<sp/>=<sp/>{l,w1,w2,{b1,b2,b3,b4,b5,b6,b7,b8}}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168" refid="pa__win__wasapi_8c_1ad5dca404e98a4186b60cba66787c5e1a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>__DEFINE_IID(n,l,w1,w2,b1,b2,b3,b4,b5,b6,b7,b8)<sp/>static<sp/>const<sp/>IID<sp/>n<sp/>GUID_SECT<sp/>=<sp/>{l,w1,w2,{b1,b2,b3,b4,b5,b6,b7,b8}}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169" refid="pa__win__wasapi_8c_1a684dc8a813711bb4515ee0c59cf4311f" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>__DEFINE_CLSID(n,l,w1,w2,b1,b2,b3,b4,b5,b6,b7,b8)<sp/>static<sp/>const<sp/>CLSID<sp/>n<sp/>GUID_SECT<sp/>=<sp/>{l,w1,w2,{b1,b2,b3,b4,b5,b6,b7,b8}}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170" refid="pa__win__wasapi_8c_1a76de14f466267894ffd0f226ec89911d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PA_DEFINE_CLSID(className,<sp/>l,<sp/>w1,<sp/>w2,<sp/>b1,<sp/>b2,<sp/>b3,<sp/>b4,<sp/>b5,<sp/>b6,<sp/>b7,<sp/>b8)<sp/>\</highlight></codeline>
<codeline lineno="171"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>__DEFINE_CLSID(pa_CLSID_##className,<sp/>0x##l,<sp/>0x##w1,<sp/>0x##w2,<sp/>0x##b1,<sp/>0x##b2,<sp/>0x##b3,<sp/>0x##b4,<sp/>0x##b5,<sp/>0x##b6,<sp/>0x##b7,<sp/>0x##b8)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172" refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PA_DEFINE_IID(interfaceName,<sp/>l,<sp/>w1,<sp/>w2,<sp/>b1,<sp/>b2,<sp/>b3,<sp/>b4,<sp/>b5,<sp/>b6,<sp/>b7,<sp/>b8)<sp/>\</highlight></codeline>
<codeline lineno="173"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>__DEFINE_IID(pa_IID_##interfaceName,<sp/>0x##l,<sp/>0x##w1,<sp/>0x##w2,<sp/>0x##b1,<sp/>0x##b2,<sp/>0x##b3,<sp/>0x##b4,<sp/>0x##b5,<sp/>0x##b6,<sp/>0x##b7,<sp/>0x##b8)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;1CB9AD4C-DBFA-4c32-B178-C2F568A703B2&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1cb9ad4c,<sp/>dbfa,<sp/>4c32,<sp/>b1,<sp/>78,<sp/><ref refid="conv2dtest_8m_1a869bd946456256c347112f5798b5b504" kindref="member">c2</ref>,<sp/>f5,<sp/>68,<sp/>a7,<sp/>03,<sp/>b2);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;726778CD-F60A-4EDA-82DE-E47610CD78AA&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(IAudioClient2,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>726778<ref refid="conv2dtest_8m_1a51ec853512a386583838922288834695" kindref="member">cd</ref>,<sp/>f60a,<sp/>4eda,<sp/>82,<sp/>de,<sp/>e4,<sp/>76,<sp/>10,<sp/><ref refid="conv2dtest_8m_1a51ec853512a386583838922288834695" kindref="member">cd</ref>,<sp/>78,<sp/>aa);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;1BE09788-6894-4089-8586-9A2A6C265AC5&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="mmdeviceapi_8h_1a32d63499f58b0065348b8c09c18d9f36" kindref="member">IMMEndpoint</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1be09788,<sp/>6894,<sp/>4089,<sp/>85,<sp/>86,<sp/>9<ref refid="poly-fir_8h_1a8d3c3518d793541417a4845125da1ae1" kindref="member">a</ref>,<sp/>2<ref refid="poly-fir_8h_1a8d3c3518d793541417a4845125da1ae1" kindref="member">a</ref>,<sp/>6<ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref>,<sp/>26,<sp/>5<ref refid="poly-fir_8h_1a8d3c3518d793541417a4845125da1ae1" kindref="member">a</ref>,<sp/>c5);</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;A95664D2-9614-4F35-A746-DE8DB63617E6&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="mmdeviceapi_8h_1a105bf1359b5d6cd4fb24828cc6ab2874" kindref="member">IMMDeviceEnumerator</ref>,<sp/><sp/>a95664d2,<sp/>9614,<sp/>4f35,<sp/>a7,<sp/>46,<sp/>de,<sp/>8<ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>,<sp/>b6,<sp/>36,<sp/>17,<sp/>e6);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;BCDE0395-E52F-467C-8E3D-C4579291692E&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1a76de14f466267894ffd0f226ec89911d" kindref="member">PA_DEFINE_CLSID</ref>(<ref refid="mmdeviceapi_8h_1a105bf1359b5d6cd4fb24828cc6ab2874" kindref="member">IMMDeviceEnumerator</ref>,bcde0395,<sp/>e52f,<sp/>467<ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref>,<sp/>8<ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>,<sp/>3<ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>,<sp/>c4,<sp/>57,<sp/>92,<sp/>91,<sp/>69,<sp/>2<ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;F294ACFC-3146-4483-A7BF-ADDCA7C260E2&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="audioclient_8h_1a3d3202e827ce9328a16178551d97746e" kindref="member">IAudioRenderClient</ref>,<sp/><sp/><sp/>f294acfc,<sp/>3146,<sp/>4483,<sp/>a7,<sp/>bf,<sp/>ad,<sp/>dc,<sp/>a7,<sp/><ref refid="conv2dtest_8m_1a869bd946456256c347112f5798b5b504" kindref="member">c2</ref>,<sp/>60,<sp/>e2);</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;C8ADBD64-E71E-48a0-A4DE-185C395CD317&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="audioclient_8h_1a2d3108bb1604145f734949a5cb7a578a" kindref="member">IAudioCaptureClient</ref>,<sp/><sp/>c8adbd64,<sp/>e71e,<sp/>48a0,<sp/>a4,<sp/>de,<sp/>18,<sp/>5<ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref>,<sp/>39,<sp/>5<ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref>,<sp/>d3,<sp/>17);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight><highlight class="comment">//<sp/>*2A07407E-6497-4A18-9787-32F79BD0D98F*<sp/><sp/>Or<sp/>this??</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="devicetopology_8h_1a4997c6c4616c3245d515eafd2ce686d0" kindref="member">IDeviceTopology</ref>,<sp/><sp/><sp/><sp/><sp/><sp/>2A07407E,<sp/>6497,<sp/>4A18,<sp/>97,<sp/>87,<sp/>32,<sp/>f7,<sp/>9<ref refid="poly-fir_8h_1ab2d05693952610f937e5acb3c4a8fa1b" kindref="member">b</ref>,<sp/>d0,<sp/>d9,<sp/>8<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight><highlight class="comment">//<sp/>*AE2DE0E4-5BCA-4F2D-AA46-5D13F8FDB3A9*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="devicetopology_8h_1adabb5bd8e19759521e1498eef1d0b56f" kindref="member">IPart</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AE2DE0E4,<sp/>5BCA,<sp/>4F2D,<sp/>aa,<sp/>46,<sp/>5<ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>,<sp/>13,<sp/>f8,<sp/>fd,<sp/>b3,<sp/>a9);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight><highlight class="comment">//<sp/>*4509F757-2D46-4637-8E62-CE7DB944F57B*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aca414f4cad142fa0dd6cd229095fcac2" kindref="member">PA_DEFINE_IID</ref>(<ref refid="devicetopology_8h_1a309e1781c2a5279a8dcd39a197a59003" kindref="member">IKsJackDescription</ref>,<sp/><sp/><sp/>4509F757,<sp/>2D46,<sp/>4637,<sp/>8<ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>,<sp/>62,<sp/>ce,<sp/>7<ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>,<sp/>b9,<sp/>44,<sp/>f5,<sp/>7<ref refid="poly-fir_8h_1ab2d05693952610f937e5acb3c4a8fa1b" kindref="member">b</ref>);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Media<sp/>formats:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1a5270bc6f60431a3ab7cc5f171493b5dd" kindref="member">__DEFINE_GUID</ref>(pa_KSDATAFORMAT_SUBTYPE_PCM,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x00000001,<sp/>0x0000,<sp/>0x0010,<sp/>0x80,<sp/>0x00,<sp/>0x00,<sp/>0xaa,<sp/>0x00,<sp/>0x38,<sp/>0x9b,<sp/>0x71<sp/>);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1a5270bc6f60431a3ab7cc5f171493b5dd" kindref="member">__DEFINE_GUID</ref>(pa_KSDATAFORMAT_SUBTYPE_ADPCM,<sp/><sp/><sp/><sp/><sp/><sp/>0x00000002,<sp/>0x0000,<sp/>0x0010,<sp/>0x80,<sp/>0x00,<sp/>0x00,<sp/>0xaa,<sp/>0x00,<sp/>0x38,<sp/>0x9b,<sp/>0x71<sp/>);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1a5270bc6f60431a3ab7cc5f171493b5dd" kindref="member">__DEFINE_GUID</ref>(pa_KSDATAFORMAT_SUBTYPE_IEEE_FLOAT,<sp/>0x00000003,<sp/>0x0000,<sp/>0x0010,<sp/>0x80,<sp/>0x00,<sp/>0x00,<sp/>0xaa,<sp/>0x00,<sp/>0x38,<sp/>0x9b,<sp/>0x71<sp/>);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__IAudioClient2_INTERFACE_DEFINED__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>_pa_AUDCLNT_STREAMOPTIONS<sp/>{<sp/></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>pa_AUDCLNT_STREAMOPTIONS_NONE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x00,</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>pa_AUDCLNT_STREAMOPTIONS_RAW<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x01,</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>pa_AUDCLNT_STREAMOPTIONS_MATCH_FORMAT<sp/><sp/>=<sp/>0x02</highlight></codeline>
<codeline lineno="205"><highlight class="normal">}<sp/>pa_AUDCLNT_STREAMOPTIONS;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">_pa_AudioClientProperties<sp/>{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cbSize;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bIsOffload;</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>AUDIO_STREAM_CATEGORY<sp/><sp/><sp/><sp/>eCategory;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>pa_AUDCLNT_STREAMOPTIONS<sp/>Options;</highlight></codeline>
<codeline lineno="211"><highlight class="normal">}<sp/>pa_AudioClientProperties;</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PA_AUDIOCLIENTPROPERTIES_SIZE_CATEGORY<sp/>(sizeof(pa_AudioClientProperties)<sp/>-<sp/>sizeof(pa_AUDCLNT_STREAMOPTIONS))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PA_AUDIOCLIENTPROPERTIES_SIZE_OPTIONS<sp/><sp/><sp/>sizeof(pa_AudioClientProperties)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/>//<sp/>__IAudioClient2_INTERFACE_DEFINED__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>use<sp/>CreateThread<sp/>for<sp/>CYGWIN/Windows<sp/>Mobile,<sp/>_beginthreadex<sp/>for<sp/>all<sp/>others<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>!defined(__CYGWIN__)<sp/>&amp;&amp;<sp/>!defined(_WIN32_WCE)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218" refid="pa__win__wasapi_8c_1a0a9408819040e2ff021281f9e0971a35" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>CREATE_THREAD(PROC)<sp/>(HANDLE)_beginthreadex(<sp/>NULL,<sp/>0,<sp/>(PROC),<sp/>stream,<sp/>0,<sp/>&amp;stream-&gt;dwThreadId<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219" refid="pa__win__wasapi_8c_1ad744bd36cb3631b1dc11beb41dcc238c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>PA_THREAD_FUNC<sp/>static<sp/>unsigned<sp/>WINAPI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220" refid="pa__win__wasapi_8c_1af90ebf49f32d984f4cea06ca90506e40" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>PA_THREAD_ID<sp/>unsigned</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>CREATE_THREAD(PROC)<sp/>CreateThread(<sp/>NULL,<sp/>0,<sp/>(PROC),<sp/>stream,<sp/>0,<sp/>&amp;stream-&gt;dwThreadId<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>PA_THREAD_FUNC<sp/>static<sp/>DWORD<sp/>WINAPI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>PA_THREAD_ID<sp/>DWORD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Thread<sp/>function<sp/>forward<sp/>decl.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1ad744bd36cb3631b1dc11beb41dcc238c" kindref="member">PA_THREAD_FUNC</ref><sp/><ref refid="pa__win__wasapi_8c_1ac575016ee1e9d6275cbc5004b2409036" kindref="member">ProcThreadEvent</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*param);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1ad744bd36cb3631b1dc11beb41dcc238c" kindref="member">PA_THREAD_FUNC</ref><sp/><ref refid="pa__win__wasapi_8c_1aae20a143b3c891a38a7e918ee4b1d6b8" kindref="member">ProcThreadPoll</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*param);</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Availabe<sp/>from<sp/>Windows<sp/>7</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>AUDCLNT_E_BUFFER_ERROR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233" refid="pa__win__wasapi_8c_1a8fb76fb0aad37662875d8c84422b7d7d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>AUDCLNT_E_BUFFER_ERROR<sp/>AUDCLNT_ERR(0x018)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236" refid="pa__win__wasapi_8c_1a7d7f5a942a92bc351ee138fb96551d6f" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED<sp/>AUDCLNT_ERR(0x019)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>AUDCLNT_E_INVALID_DEVICE_PERIOD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239" refid="pa__win__wasapi_8c_1afa7cffa38411eb69296e902cfda00b22" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#define<sp/>AUDCLNT_E_INVALID_DEVICE_PERIOD<sp/>AUDCLNT_ERR(0x020)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight></codeline>
<codeline lineno="242" refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MAX_STR_LEN<sp/>512</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244" refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{<sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref><sp/>=<sp/>0,<sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref><sp/>=<sp/>1,<sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" kindref="member">S_COUNT</ref><sp/>=<sp/>2,<sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a973c488a4609f21d89d641b762de9fe7" kindref="member">S_FULLDUPLEX</ref><sp/>=<sp/>0<sp/>};</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Number<sp/>of<sp/>packets<sp/>which<sp/>compose<sp/>single<sp/>contignous<sp/>buffer.<sp/>With<sp/>trial<sp/>and<sp/>error<sp/>it<sp/>was<sp/>calculated</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight><highlight class="comment">//<sp/>that<sp/>WASAPI<sp/>Input<sp/>sub-system<sp/>uses<sp/>6<sp/>packets<sp/>per<sp/>whole<sp/>buffer.<sp/>Please<sp/>provide<sp/>more<sp/>information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight><highlight class="comment">//<sp/>or<sp/>corrections<sp/>if<sp/>available.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249" refid="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8a7b6c7e83009a14df464dd680e87feaf2" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{<sp/><ref refid="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8a7b6c7e83009a14df464dd680e87feaf2" kindref="member">WASAPI_PACKETS_PER_INPUT_BUFFER</ref><sp/>=<sp/>6<sp/>};</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251" refid="pa__win__wasapi_8c_1a1ffa289724d1c8dbeefe0116b976158e" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>STATIC_ARRAY_SIZE(array)<sp/>(sizeof(array)/sizeof(array[0]))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253" refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PRINT(x)<sp/>PA_DEBUG(x);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="255" refid="pa__win__wasapi_8c_1a771580ff4e4b9a948ebd1fb0fc9f17d7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PA_SKELETON_SET_LAST_HOST_ERROR(<sp/>errorCode,<sp/>errorText<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="256"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>PaUtil_SetLastHostErrorInfo(<sp/>paWASAPI,<sp/>errorCode,<sp/>errorText<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258" refid="pa__win__wasapi_8c_1af46190c73acf456c64118d4df2afd503" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PA_WASAPI__IS_FULLDUPLEX(STREAM)<sp/>((STREAM)-&gt;in.clientProc<sp/>&amp;&amp;<sp/>(STREAM)-&gt;out.clientProc)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>IF_FAILED_JUMP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261" refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IF_FAILED_JUMP(hr,<sp/>label)<sp/>if(FAILED(hr))<sp/>goto<sp/>label;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>IF_FAILED_INTERNAL_ERROR_JUMP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="265" refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IF_FAILED_INTERNAL_ERROR_JUMP(hr,<sp/>error,<sp/>label)<sp/>if(FAILED(hr))<sp/>{<sp/>error<sp/>=<sp/>paInternalError;<sp/>goto<sp/>label;<sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight></codeline>
<codeline lineno="268" refid="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SAFE_CLOSE(h)<sp/>if<sp/>((h)<sp/>!=<sp/>NULL)<sp/>{<sp/>CloseHandle((h));<sp/>(h)<sp/>=<sp/>NULL;<sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="269" refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SAFE_RELEASE(punk)<sp/>if<sp/>((punk)<sp/>!=<sp/>NULL)<sp/>{<sp/>(punk)-&gt;lpVtbl-&gt;Release((punk));<sp/>(punk)<sp/>=<sp/>NULL;<sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Mixer<sp/>function</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="272" refid="pa__win__wasapi_8c_1ae15ae1737c49a3e379f0f418acff17e0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a3980d15795c6349fecd06c1b035c1ae9" kindref="member">void</ref><sp/>(*<ref refid="pa__win__wasapi_8c_1ae15ae1737c49a3e379f0f418acff17e0" kindref="member">MixMonoToStereoF</ref>)<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>);</highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight><highlight class="comment">//<sp/>AVRT<sp/>is<sp/>the<sp/>new<sp/>&quot;multimedia<sp/>schedulling<sp/>stuff&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275" refid="pa__win__wasapi_8c_1adcb5e65535b4cb03302e42da225b1d51" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" kindref="member">BOOL</ref><sp/><sp/><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*FAvRtCreateThreadOrderingGroup)<sp/><sp/>(PHANDLE,<ref refid="pa__win__wasapi_8c_1adcb5e65535b4cb03302e42da225b1d51" kindref="member">PLARGE_INTEGER</ref>,GUID*,<ref refid="pa__win__wasapi_8c_1adcb5e65535b4cb03302e42da225b1d51" kindref="member">PLARGE_INTEGER</ref>);</highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" kindref="member">BOOL</ref><sp/><sp/><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*FAvRtDeleteThreadOrderingGroup)<sp/><sp/>(<ref refid="pa__win__wasapi_8c_1a17a3aca6faec8a591d204f32baa40bf5" kindref="member">HANDLE</ref>);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" kindref="member">BOOL</ref><sp/><sp/><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*FAvRtWaitOnThreadOrderingGroup)<sp/><sp/>(<ref refid="pa__win__wasapi_8c_1a17a3aca6faec8a591d204f32baa40bf5" kindref="member">HANDLE</ref>);</highlight></codeline>
<codeline lineno="278" refid="pa__win__wasapi_8c_1ad025b87f212fcc6085a0b88ed1acd0e2" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a17a3aca6faec8a591d204f32baa40bf5" kindref="member">HANDLE</ref><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*FAvSetMmThreadCharacteristics)<sp/><sp/><sp/>(<ref refid="mapinls_8h_1a866fd74f5159bb4d319261005a5e85e0" kindref="member">LPCSTR</ref>,<ref refid="pa__win__wasapi_8c_1ad025b87f212fcc6085a0b88ed1acd0e2" kindref="member">LPDWORD</ref>);</highlight></codeline>
<codeline lineno="279" refid="pa__win__wasapi_8c_1a00005277f6e80b50489b77a3641c50f3" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" kindref="member">BOOL</ref><sp/><sp/><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*<ref refid="pa__win__wasapi_8c_1a00005277f6e80b50489b77a3641c50f3" kindref="member">FAvRevertMmThreadCharacteristics</ref>)(<ref refid="pa__win__wasapi_8c_1a17a3aca6faec8a591d204f32baa40bf5" kindref="member">HANDLE</ref>);</highlight></codeline>
<codeline lineno="280" refid="pa__win__wasapi_8c_1a76e09a9c1d9b4d52236c93683cdd0a13" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" kindref="member">BOOL</ref><sp/><sp/><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*FAvSetMmThreadPriority)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="pa__win__wasapi_8c_1a17a3aca6faec8a591d204f32baa40bf5" kindref="member">HANDLE</ref>,<ref refid="pa__win__wasapi_8c_1a76e09a9c1d9b4d52236c93683cdd0a13" kindref="member">AVRT_PRIORITY</ref>);</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>HMODULE<sp/>hDInputDLL<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="283" refid="pa__win__wasapi_8c_1ad998bad539a112ce8182c22c5cf0481e" refkind="member"><highlight class="normal">FAvRtCreateThreadOrderingGroup<sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad998bad539a112ce8182c22c5cf0481e" kindref="member">pAvRtCreateThreadOrderingGroup</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="284" refid="pa__win__wasapi_8c_1a5604278b62c1f5c62e906ab2e53ba6ab" refkind="member"><highlight class="normal">FAvRtDeleteThreadOrderingGroup<sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5604278b62c1f5c62e906ab2e53ba6ab" kindref="member">pAvRtDeleteThreadOrderingGroup</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="285" refid="pa__win__wasapi_8c_1ab0d78159e0a0e2a6575ca053983461d8" refkind="member"><highlight class="normal">FAvRtWaitOnThreadOrderingGroup<sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ab0d78159e0a0e2a6575ca053983461d8" kindref="member">pAvRtWaitOnThreadOrderingGroup</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="286" refid="pa__win__wasapi_8c_1a892964d92daf945b57491f24eb331056" refkind="member"><highlight class="normal">FAvSetMmThreadCharacteristics<sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a892964d92daf945b57491f24eb331056" kindref="member">pAvSetMmThreadCharacteristics</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="287" refid="pa__win__wasapi_8c_1a800438cc51e4a6661c2cdb986a16e093" refkind="member"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1a00005277f6e80b50489b77a3641c50f3" kindref="member">FAvRevertMmThreadCharacteristics</ref><sp/><ref refid="pa__win__wasapi_8c_1a800438cc51e4a6661c2cdb986a16e093" kindref="member">pAvRevertMmThreadCharacteristics</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="288" refid="pa__win__wasapi_8c_1a00926c56ee41e2e33e834e6552a9fe0d" refkind="member"><highlight class="normal">FAvSetMmThreadPriority<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a00926c56ee41e2e33e834e6552a9fe0d" kindref="member">pAvSetMmThreadPriority</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290" refid="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_GetProc(fun,<sp/>type,<sp/>name)<sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="291"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun<sp/>=<sp/>(type)<sp/>GetProcAddress(hDInputDLL,name);<sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="292"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(fun<sp/>==<sp/>NULL)<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="293"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PRINT((&quot;GetProcAddr<sp/>failed<sp/>for<sp/>%s&quot;<sp/>,name));<sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="294"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>FALSE;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="295"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="296"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="297"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>prototypes<sp/>for<sp/>functions<sp/>declared<sp/>in<sp/>this<sp/>file<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;C&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal">{</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>__cplusplus<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__win__wasapi_8c_1a56a0d6a3498d2ca95227d2e5c9975c40" kindref="member">PaWasapi_Initialize</ref>(<sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>**hostApi,<sp/><ref refid="portaudio_8h_1aeef6da084c57c70aa94be97411e19930" kindref="member">PaHostApiIndex</ref><sp/>index<sp/>);</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal">}</highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>__cplusplus<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight><highlight class="comment">//<sp/>dummy<sp/>entry<sp/>point<sp/>for<sp/>other<sp/>compilers<sp/>and<sp/>sdks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight><highlight class="comment">//<sp/>currently<sp/>built<sp/>using<sp/>RC1<sp/>SDK<sp/>(5600)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight><highlight class="comment">//#if<sp/>_MSC_VER<sp/>&lt;<sp/>1400</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight><highlight class="comment">//PaError<sp/>PaWasapi_Initialize(<sp/>PaUtilHostApiRepresentation<sp/>**hostApi,<sp/>PaHostApiIndex<sp/>hostApiIndex<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//return<sp/>paNoError;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight><highlight class="comment">//#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Terminate(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi<sp/>);</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsFormatSupported(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>);</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>OpenStream(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>**<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerBuffer,</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a37c7ac3ace7d2dd1430f40ecdee4ebb6" kindref="member">PaStreamFlags</ref><sp/>streamFlags,</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a8a60fb2a5ec9cbade3f54a9c978e2710" kindref="member">PaStreamCallback</ref><sp/>*streamCallback,</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>);</highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>CloseStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StartStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StopStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="335"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>AbortStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamStopped(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="337"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamActive(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="338"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>GetStreamTime(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>GetStreamCpuLoad(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="340"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__blocking_8c_1a9e7f111c33d1e80f40473846864e84fa" kindref="member">ReadStream</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/>stream,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structbuffer" kindref="compound">buffer</ref>,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>);</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__blocking_8c_1a0cfb7772846808945bd521d23d5626eb" kindref="member">WriteStream</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/>stream,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structbuffer" kindref="compound">buffer</ref>,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>);</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__blocking_8c_1a82aa1e30985c7924247e8f45fc356d46" kindref="member">GetStreamReadAvailable</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__blocking_8c_1ad7ee6bd74b3109101f1eb4ca0514c8b0" kindref="member">GetStreamWriteAvailable</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="347"><highlight class="comment"><sp/>These<sp/>are<sp/>fields<sp/>that<sp/>can<sp/>be<sp/>gathered<sp/>from<sp/>IDevice<sp/>and<sp/>IAudioDevice<sp/>PRIOR<sp/>to<sp/>Initialize,<sp/>and</highlight></codeline>
<codeline lineno="348"><highlight class="comment"><sp/>done<sp/>in<sp/>first<sp/>pass<sp/>i<sp/>assume<sp/>that<sp/>neither<sp/>of<sp/>these<sp/>will<sp/>cause<sp/>the<sp/>Driver<sp/>to<sp/>&quot;load&quot;,<sp/>but<sp/>again,</highlight></codeline>
<codeline lineno="349"><highlight class="comment"><sp/>who<sp/>knows<sp/>how<sp/>they<sp/>implement<sp/>their<sp/>stuff</highlight></codeline>
<codeline lineno="350"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="351" refid="struct_pa_wasapi_device_info" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref></highlight></codeline>
<codeline lineno="352"><highlight class="normal">{</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Device</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="354" refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1a8d4cacf41e022eb8b6aed6231bcf54be" kindref="member">IMMDevice</ref><sp/>*<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>;</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>from<sp/>GetId</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="357" refid="struct_pa_wasapi_device_info_1ab4eccd4b97f01c9d969e28568dc33a13" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>WCHAR<sp/>szDeviceID[<ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>];</highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>from<sp/>GetState</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360" refid="struct_pa_wasapi_device_info_1a51051f47a56a2ba215784912fcc64f90" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/><ref refid="struct_pa_wasapi_device_info_1a51051f47a56a2ba215784912fcc64f90" kindref="member">state</ref>;</highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Fields<sp/>filled<sp/>from<sp/>IMMEndpoint&apos;sGetDataFlow</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="363" refid="struct_pa_wasapi_device_info_1a58ad544b2b413b8bd19514e8d115ebb8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1a9f6154b3634cb3b90d016eced3882206" kindref="member">EDataFlow</ref><sp/><ref refid="struct_pa_wasapi_device_info_1a58ad544b2b413b8bd19514e8d115ebb8" kindref="member">flow</ref>;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Fields<sp/>filled<sp/>from<sp/>IAudioDevice<sp/>(_prior_<sp/>to<sp/>Initialize)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>from<sp/>GetDevicePeriod(</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367" refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/><ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>;</highlight></codeline>
<codeline lineno="368" refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/><ref refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" kindref="member">MinimumDevicePeriod</ref>;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>from<sp/>GetMixFormat</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>WAVEFORMATEX<sp/>*MixFormat;//needs<sp/>to<sp/>be<sp/>CoTaskMemFree&apos;d<sp/>after<sp/>use!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Default<sp/>format<sp/>(setup<sp/>through<sp/>Control<sp/>Panel<sp/>by<sp/>user)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374" refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/><ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Formfactor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="377" refid="struct_pa_wasapi_device_info_1a39c131f0bf387fcda41fd1d736e87acb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1aae2d97e980403d559aa89d27bdc8c080" kindref="member">EndpointFormFactor</ref><sp/><ref refid="struct_pa_wasapi_device_info_1a39c131f0bf387fcda41fd1d736e87acb" kindref="member">formFactor</ref>;</highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Loopback<sp/>indicator</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380" refid="struct_pa_wasapi_device_info_1af800b0c1a7565b47cbd38c553bfa317e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="struct_pa_wasapi_device_info_1af800b0c1a7565b47cbd38c553bfa317e" kindref="member">loopBack</ref>;</highlight></codeline>
<codeline lineno="381"><highlight class="normal">}</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1a1feacb0ea15cada417d700941cb7a8c3" kindref="member">PaWasapiDeviceInfo</ref>;</highlight></codeline>
<codeline lineno="383"><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>PaWasapiHostApiRepresentation<sp/>-<sp/>host<sp/>api<sp/>datastructure<sp/>specific<sp/>to<sp/>this<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="386" refid="struct_pa_wasapi_host_api_representation" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal">{</highlight></codeline>
<codeline lineno="388" refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/><ref refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" kindref="member">inheritedHostApiRep</ref>;</highlight></codeline>
<codeline lineno="389" refid="struct_pa_wasapi_host_api_representation_1ab0a50b8957abc26a47c113ed33311a53" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_stream_interface" kindref="compound">PaUtilStreamInterface</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation_1ab0a50b8957abc26a47c113ed33311a53" kindref="member">callbackStreamInterface</ref>;</highlight></codeline>
<codeline lineno="390" refid="struct_pa_wasapi_host_api_representation_1ace80cce61f9d475d6c4f2af80cb2933d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_stream_interface" kindref="compound">PaUtilStreamInterface</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation_1ace80cce61f9d475d6c4f2af80cb2933d" kindref="member">blockingStreamInterface</ref>;</highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392" refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_allocation_group" kindref="compound">PaUtilAllocationGroup</ref><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>;</highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>implementation<sp/>specific<sp/>data<sp/>goes<sp/>here<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396" refid="struct_pa_wasapi_host_api_representation_1aaaf9e88d3972658267845c5df3f1bd2b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_win_util_com_initialization_result" kindref="compound">PaWinUtilComInitializationResult</ref><sp/><ref refid="struct_pa_wasapi_host_api_representation_1aaaf9e88d3972658267845c5df3f1bd2b" kindref="member">comInitializationResult</ref>;</highlight></codeline>
<codeline lineno="397"><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//in<sp/>case<sp/>we<sp/>later<sp/>need<sp/>the<sp/>synch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399" refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1a105bf1359b5d6cd4fb24828cc6ab2874" kindref="member">IMMDeviceEnumerator</ref><sp/>*<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref>;</highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//this<sp/>is<sp/>the<sp/>REAL<sp/>number<sp/>of<sp/>devices,<sp/>whether<sp/>they<sp/>are<sp/>usefull<sp/>to<sp/>PA<sp/>or<sp/>not!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402" refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>;</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404" refid="struct_pa_wasapi_host_api_representation_1a97f7bb4e7ccaab5658d3f2e339de7e4a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>WCHAR<sp/>defaultRenderer<sp/>[<ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>];</highlight></codeline>
<codeline lineno="405" refid="struct_pa_wasapi_host_api_representation_1a477fff22f034072694329b480fb8d8b8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>WCHAR<sp/>defaultCapturer<sp/>[<ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>];</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight></codeline>
<codeline lineno="407" refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref><sp/>*<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>;</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Is<sp/>true<sp/>when<sp/>WOW64<sp/>Vista/7<sp/>Workaround<sp/>is<sp/>needed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="410" refid="struct_pa_wasapi_host_api_representation_1a1fe6be6a2edf0292a0a3d6f55cf83fc6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><ref refid="struct_pa_wasapi_host_api_representation_1a1fe6be6a2edf0292a0a3d6f55cf83fc6" kindref="member">useWOW64Workaround</ref>;</highlight></codeline>
<codeline lineno="411"><highlight class="normal">}</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref>;</highlight></codeline>
<codeline lineno="413"><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>PaWasapiAudioClientParams<sp/>-<sp/>audio<sp/>client<sp/>parameters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416" refid="struct_pa_wasapi_audio_client_params" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_wasapi_audio_client_params" kindref="compound">PaWasapiAudioClientParams</ref></highlight></codeline>
<codeline lineno="417"><highlight class="normal">{</highlight></codeline>
<codeline lineno="418" refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref><sp/>*<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref>;</highlight></codeline>
<codeline lineno="419" refid="struct_pa_wasapi_audio_client_params_1ac01b82e3992a001815a26eeb5a225e8a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params_1ac01b82e3992a001815a26eeb5a225e8a" kindref="member">stream_params</ref>;</highlight></codeline>
<codeline lineno="420" refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>;</highlight></codeline>
<codeline lineno="421" refid="struct_pa_wasapi_audio_client_params_1aa46fc2eb761fffa9ee34baf829b70e0e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params_1aa46fc2eb761fffa9ee34baf829b70e0e" kindref="member">frames_per_buffer</ref>;</highlight></codeline>
<codeline lineno="422" refid="struct_pa_wasapi_audio_client_params_1aaf327b0ecb554eb9d8b331d647c000b6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params_1aaf327b0ecb554eb9d8b331d647c000b6" kindref="member">sample_rate</ref>;</highlight></codeline>
<codeline lineno="423" refid="struct_pa_wasapi_audio_client_params_1a1e3a0ed3228bb5fb0ff14f3207c8f2c4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params_1a1e3a0ed3228bb5fb0ff14f3207c8f2c4" kindref="member">blocking</ref>;</highlight></codeline>
<codeline lineno="424" refid="struct_pa_wasapi_audio_client_params_1ac94ccf5cb33748fb1c5ad1f040ccc178" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params_1ac94ccf5cb33748fb1c5ad1f040ccc178" kindref="member">full_duplex</ref>;</highlight></codeline>
<codeline lineno="425" refid="struct_pa_wasapi_audio_client_params_1a0886e7cdcd3e6f7f989625d7f7493eb9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params_1a0886e7cdcd3e6f7f989625d7f7493eb9" kindref="member">wow64_workaround</ref>;</highlight></codeline>
<codeline lineno="426"><highlight class="normal">}</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aa746eb234a17020894e1a831699a5abf" kindref="member">PaWasapiAudioClientParams</ref>;</highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>PaWasapiStream<sp/>-<sp/>a<sp/>stream<sp/>data<sp/>structure<sp/>specifically<sp/>for<sp/>this<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431" refid="struct_pa_wasapi_sub_stream" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref></highlight></codeline>
<codeline lineno="432"><highlight class="normal">{</highlight></codeline>
<codeline lineno="433" refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>;</highlight></codeline>
<codeline lineno="434" refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>IStream<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" kindref="member">clientStream</ref>;</highlight></codeline>
<codeline lineno="435" refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>;</highlight></codeline>
<codeline lineno="436"><highlight class="normal"></highlight></codeline>
<codeline lineno="437" refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/><ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>;</highlight></codeline>
<codeline lineno="438" refid="struct_pa_wasapi_sub_stream_1ae3cbfddfe0db9949574f9ca11d7708fc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1ae3cbfddfe0db9949574f9ca11d7708fc" kindref="member">bufferSize</ref>;</highlight></codeline>
<codeline lineno="439" refid="struct_pa_wasapi_sub_stream_1a06ef93d9ac069dea0fef0c40ff4b8c76" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1a06ef93d9ac069dea0fef0c40ff4b8c76" kindref="member">deviceLatency</ref>;</highlight></codeline>
<codeline lineno="440" refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>;</highlight></codeline>
<codeline lineno="441" refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref>;</highlight></codeline>
<codeline lineno="442" refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>;</highlight></codeline>
<codeline lineno="443" refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_audio_session_types_8h_1a0957067f6e0b63274f50931b31ed0ce5" kindref="member">AUDCLNT_SHAREMODE</ref><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref>;</highlight></codeline>
<codeline lineno="444" refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref>;<sp/></highlight><highlight class="comment">//<sp/>AUDCLNT_STREAMFLAGS_EVENTCALLBACK,<sp/>...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445" refid="struct_pa_wasapi_sub_stream_1a0a614eb0d553c247fc55888c5a978b90" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1a0a614eb0d553c247fc55888c5a978b90" kindref="member">flags</ref>;</highlight></codeline>
<codeline lineno="446" refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_audio_client_params" kindref="compound">PaWasapiAudioClientParams</ref><sp/><ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>;<sp/></highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Buffers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="449" refid="struct_pa_wasapi_sub_stream_1ac2fc3d1d317aa761577e2dc2ca782b97" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1ac2fc3d1d317aa761577e2dc2ca782b97" kindref="member">buffers</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="450" refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="451" refid="struct_pa_wasapi_sub_stream_1a7158c290cfa44a35117a04283b6f0fa2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1a7158c290cfa44a35117a04283b6f0fa2" kindref="member">userBufferAndHostMatch</ref>;</highlight></codeline>
<codeline lineno="452"><highlight class="normal"></highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Used<sp/>for<sp/>Mono<sp/>&gt;&gt;<sp/>Stereo<sp/>workaround,<sp/>if<sp/>driver<sp/>does<sp/>not<sp/>support<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(in<sp/>Exclusive<sp/>mode<sp/>WASAPI<sp/>usually<sp/>refuses<sp/>to<sp/>operate<sp/>with<sp/>Mono<sp/>(1-ch)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="455" refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="456" refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref>;<sp/></highlight></codeline>
<codeline lineno="457" refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ae15ae1737c49a3e379f0f418acff17e0" kindref="member">MixMonoToStereoF</ref><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight></codeline>
<codeline lineno="459" refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_ring_buffer" kindref="compound">PaUtilRingBuffer</ref><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="460" refid="struct_pa_wasapi_sub_stream_1af13270a12d88b5a79a3f2929783a0611" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_sub_stream_1af13270a12d88b5a79a3f2929783a0611" kindref="member">tailBufferMemory</ref>;<sp/></highlight></codeline>
<codeline lineno="461"><highlight class="normal">}</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1adb52e1579b47dc7ae034deb3c0d9df1e" kindref="member">PaWasapiSubStream</ref>;</highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>PaWasapiHostProcessor<sp/>-<sp/>redirects<sp/>processing<sp/>data<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="466" refid="struct_pa_wasapi_host_processor" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref></highlight></codeline>
<codeline lineno="467"><highlight class="normal">{</highlight></codeline>
<codeline lineno="468" refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8h_1ae3d91dd8eaeff3cbe9ff3bfafc5e6006" kindref="member">PaWasapiHostProcessorCallback</ref><sp/><ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref>;</highlight></codeline>
<codeline lineno="469" refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" kindref="member">userData</ref>;</highlight></codeline>
<codeline lineno="470"><highlight class="normal">}</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1a5e948988d90c01dea08282c308a81e50" kindref="member">PaWasapiHostProcessor</ref>;</highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="474" refid="struct_pa_wasapi_stream" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref></highlight></codeline>
<codeline lineno="475"><highlight class="normal">{</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>IMPLEMENT<sp/>ME:<sp/>rename<sp/>this<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477" refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_stream_representation" kindref="compound">PaUtilStreamRepresentation</ref><sp/><ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>;</highlight></codeline>
<codeline lineno="478" refid="struct_pa_wasapi_stream_1aec37a2f4bcafd3f1a595a46e5393bd64" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_cpu_load_measurer" kindref="compound">PaUtilCpuLoadMeasurer</ref><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_1aec37a2f4bcafd3f1a595a46e5393bd64" kindref="member">cpuLoadMeasurer</ref>;</highlight></codeline>
<codeline lineno="479" refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_buffer_processor" kindref="compound">PaUtilBufferProcessor</ref><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>;</highlight></codeline>
<codeline lineno="480"><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>input</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482" refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>;</highlight></codeline>
<codeline lineno="483" refid="struct_pa_wasapi_stream_1a79c5cda43724aea8ff7d283a2ac66976" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1a2d3108bb1604145f734949a5cb7a578a" kindref="member">IAudioCaptureClient</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1a79c5cda43724aea8ff7d283a2ac66976" kindref="member">captureClientParent</ref>;</highlight></codeline>
<codeline lineno="484" refid="struct_pa_wasapi_stream_1a315d06c7f23d23f05f90579a80d0530d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>IStream<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1a315d06c7f23d23f05f90579a80d0530d" kindref="member">captureClientStream</ref>;</highlight></codeline>
<codeline lineno="485" refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1a2d3108bb1604145f734949a5cb7a578a" kindref="member">IAudioCaptureClient</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>;</highlight></codeline>
<codeline lineno="486" refid="struct_pa_wasapi_stream_1a035111d1e825146eae105bd83d810397" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="endpointvolume_8h_1a0aa518a24cb3834bf372f46cfc94e3cf" kindref="member">IAudioEndpointVolume</ref><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1a035111d1e825146eae105bd83d810397" kindref="member">inVol</ref>;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>output</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="489" refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>;</highlight></codeline>
<codeline lineno="490" refid="struct_pa_wasapi_stream_1a28a861cf6e64e4f1b45d4f774052cc42" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1a3d3202e827ce9328a16178551d97746e" kindref="member">IAudioRenderClient</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1a28a861cf6e64e4f1b45d4f774052cc42" kindref="member">renderClientParent</ref>;</highlight></codeline>
<codeline lineno="491" refid="struct_pa_wasapi_stream_1ad546e7693db4ddf90b1ad148c43292bd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>IStream<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1ad546e7693db4ddf90b1ad148c43292bd" kindref="member">renderClientStream</ref>;</highlight></codeline>
<codeline lineno="492" refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1a3d3202e827ce9328a16178551d97746e" kindref="member">IAudioRenderClient</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>;</highlight></codeline>
<codeline lineno="493" refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="endpointvolume_8h_1a0aa518a24cb3834bf372f46cfc94e3cf" kindref="member">IAudioEndpointVolume</ref><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>;</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>event<sp/>handles<sp/>for<sp/>event-driven<sp/>processing<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="496" refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" kindref="member">S_COUNT</ref>];</highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>buffer<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499" refid="struct_pa_wasapi_stream_1a4fcab5da3c205bf8b13519a37d771e7a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484f" kindref="member">PaUtilHostBufferSizeMode</ref><sp/><ref refid="struct_pa_wasapi_stream_1a4fcab5da3c205bf8b13519a37d771e7a" kindref="member">bufferMode</ref>;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>must<sp/>be<sp/>volatile<sp/>to<sp/>avoid<sp/>race<sp/>condition<sp/>on<sp/>user<sp/>query<sp/>while</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thread<sp/>is<sp/>being<sp/>started</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="503" refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref>;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>stream<sp/>has<sp/>not<sp/>or<sp/>is<sp/>no<sp/>longer<sp/>started</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="506" refid="struct_pa_wasapi_stream_1a9c3f5727f8a7d4f8cad386d0625799cf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><ref refid="struct_pa_wasapi_stream_1a9c3f5727f8a7d4f8cad386d0625799cf" kindref="member">stopped</ref>;</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight></codeline>
<codeline lineno="508" refid="struct_pa_wasapi_stream_1abc0700afb38a68d4cbd42ee54aca2d82" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1af90ebf49f32d984f4cea06ca90506e40" kindref="member">PA_THREAD_ID</ref><sp/><ref refid="struct_pa_wasapi_stream_1abc0700afb38a68d4cbd42ee54aca2d82" kindref="member">dwThreadId</ref>;</highlight></codeline>
<codeline lineno="509" refid="struct_pa_wasapi_stream_1ad3e65e6b5962b82233fbe966a676c286" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="struct_pa_wasapi_stream_1ad3e65e6b5962b82233fbe966a676c286" kindref="member">hThread</ref>;</highlight></codeline>
<codeline lineno="510" refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>;</highlight></codeline>
<codeline lineno="511" refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="512" refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="513" refid="struct_pa_wasapi_stream_1a2298014f2cc2a5af5608ce2171c46429" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="struct_pa_wasapi_stream_1a2298014f2cc2a5af5608ce2171c46429" kindref="member">hBlockingOpStreamRD</ref>;</highlight></codeline>
<codeline lineno="514" refid="struct_pa_wasapi_stream_1a0be8d98886549882563c9b16c2b3009f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="struct_pa_wasapi_stream_1a0be8d98886549882563c9b16c2b3009f" kindref="member">hBlockingOpStreamWR</ref>;</highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Host<sp/>callback<sp/>Output<sp/>overrider</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="517" refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/><ref refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" kindref="member">hostProcessOverrideOutput</ref>;</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Host<sp/>callback<sp/>Input<sp/>overrider</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="520" refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/><ref refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" kindref="member">hostProcessOverrideInput</ref>;</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Defines<sp/>blocking/callback<sp/>interface<sp/>used</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="523" refid="struct_pa_wasapi_stream_1a2497dda1ef25d7673f3a67553c2b5a0e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><ref refid="struct_pa_wasapi_stream_1a2497dda1ef25d7673f3a67553c2b5a0e" kindref="member">bBlocking</ref>;</highlight></codeline>
<codeline lineno="524"><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Av<sp/>Task<sp/>(MM<sp/>thread<sp/>management)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="526" refid="struct_pa_wasapi_stream_1aae3a56871d156b6d8cfa2e070b408103" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="struct_pa_wasapi_stream_1aae3a56871d156b6d8cfa2e070b408103" kindref="member">hAvTask</ref>;</highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Thread<sp/>priority<sp/>level</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529" refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661" kindref="member">PaWasapiThreadPriority</ref><sp/><ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref>;</highlight></codeline>
<codeline lineno="530"><highlight class="normal">}</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aabfde10324faae7ee10e2d25ac11f655" kindref="member">PaWasapiStream</ref>;</highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"></highlight><highlight class="comment">//<sp/>COM<sp/>marshaling</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>MarshalSubStreamComPointers(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*substream);</highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>MarshalStreamComPointers(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream);</highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>UnmarshalSubStreamComPointers(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*substream);</highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>UnmarshalStreamComPointers(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream);</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ReleaseUnmarshaledSubComPointers(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*substream);</highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ReleaseUnmarshaledComPointers(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream);</highlight></codeline>
<codeline lineno="540"><highlight class="normal"></highlight></codeline>
<codeline lineno="541"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Local<sp/>stream<sp/>methods</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_StreamOnStop(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream);</highlight></codeline>
<codeline lineno="543"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_StreamFinish(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream);</highlight></codeline>
<codeline lineno="544"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_StreamCleanup(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream);</highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>_PollGetOutputFramesAvailable(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>*available);</highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>_PollGetInputFramesAvailable(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>*available);</highlight></codeline>
<codeline lineno="547"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*PaWasapi_ReallocateMemory(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*ptr,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="548"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaWasapi_FreeMemory(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*ptr);</highlight></codeline>
<codeline lineno="549"><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Local<sp/>statics</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553" refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LogHostError(HRES)<sp/>__LogHostError(HRES,<sp/>__FUNCTION__,<sp/>__FILE__,<sp/>__LINE__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>__LogHostError(<ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>res,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*func,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*file,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="seqread_8c_1aad9ebcdde542d8b2075615388ff15a9c" kindref="member">line</ref>)</highlight></codeline>
<codeline lineno="555"><highlight class="normal">{</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*text<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(res)</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>S_OK:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>res;</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>E_POINTER<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;E_POINTER&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>E_INVALIDARG<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;E_INVALIDARG&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="562"><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1ad71a098f509fdba05f4e637431af9df2" kindref="member">AUDCLNT_E_NOT_INITIALIZED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_NOT_INITIALIZED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a0e85d50bec0cd9ae0db8dc1f66043ce2" kindref="member">AUDCLNT_E_ALREADY_INITIALIZED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_ALREADY_INITIALIZED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a882d32a14cb9161550c665696e4ba077" kindref="member">AUDCLNT_E_WRONG_ENDPOINT_TYPE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_WRONG_ENDPOINT_TYPE&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1ab9febab2969833cc01d755b7bb464886" kindref="member">AUDCLNT_E_DEVICE_INVALIDATED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_DEVICE_INVALIDATED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1afd17ac3442c02117d5cb760745a6b5f4" kindref="member">AUDCLNT_E_NOT_STOPPED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_NOT_STOPPED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1aba06602a1bcdc59e4a584f6119c5ce19" kindref="member">AUDCLNT_E_BUFFER_TOO_LARGE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_BUFFER_TOO_LARGE&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1afab5c55ceb4566d9a5b05a749847dc0b" kindref="member">AUDCLNT_E_OUT_OF_ORDER</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_OUT_OF_ORDER&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1ab6abf418757067f0f0565b73b13303e7" kindref="member">AUDCLNT_E_UNSUPPORTED_FORMAT</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_UNSUPPORTED_FORMAT&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a19a07a1eb6cd62aa8c13d2cdac19066b" kindref="member">AUDCLNT_E_INVALID_SIZE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_INVALID_SIZE&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a776d670cb9724115698a8b6f6b6cbe8a" kindref="member">AUDCLNT_E_DEVICE_IN_USE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_DEVICE_IN_USE&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a09cc095f51e13dda32d2892cbe1da394" kindref="member">AUDCLNT_E_BUFFER_OPERATION_PENDING</ref><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_BUFFER_OPERATION_PENDING&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a1c5d6730a41f1bcdf5569d512626ea0f" kindref="member">AUDCLNT_E_THREAD_NOT_REGISTERED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_THREAD_NOT_REGISTERED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a2689c79541940427e5eed0aefc88ad00" kindref="member">AUDCLNT_E_EXCLUSIVE_MODE_NOT_ALLOWED</ref><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_EXCLUSIVE_MODE_NOT_ALLOWED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1aae539e4c7647e87747c5e8060c2190ac" kindref="member">AUDCLNT_E_ENDPOINT_CREATE_FAILED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_ENDPOINT_CREATE_FAILED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a2d103b4200b8271d88b32676dcdf0293" kindref="member">AUDCLNT_E_SERVICE_NOT_RUNNING</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_SERVICE_NOT_RUNNING&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a478d78eefb1c725408402a4045a53785" kindref="member">AUDCLNT_E_EVENTHANDLE_NOT_EXPECTED</ref><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_EVENTHANDLE_NOT_EXPECTED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1acc4dbb07b92ae89aa0e0c62d97f06b33" kindref="member">AUDCLNT_E_EXCLUSIVE_MODE_ONLY</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_EXCLUSIVE_MODE_ONLY&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a0bdfda00c294f99cd38b95910c4f3c1a" kindref="member">AUDCLNT_E_BUFDURATION_PERIOD_NOT_EQUAL</ref><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_BUFDURATION_PERIOD_NOT_EQUAL&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1aacc37aef367caddbbe9e453abd3d851a" kindref="member">AUDCLNT_E_EVENTHANDLE_NOT_SET</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_EVENTHANDLE_NOT_SET&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a3c8b8378149e052030d34297e117f921" kindref="member">AUDCLNT_E_INCORRECT_BUFFER_SIZE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_INCORRECT_BUFFER_SIZE&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a6b0df930699b9255c67ff1a35800bed6" kindref="member">AUDCLNT_E_BUFFER_SIZE_ERROR</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_BUFFER_SIZE_ERROR&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1aab4d3f69ada8ff0c7e5578e2d77f7ff4" kindref="member">AUDCLNT_E_CPUUSAGE_EXCEEDED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_CPUUSAGE_EXCEEDED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a8fb76fb0aad37662875d8c84422b7d7d" kindref="member">AUDCLNT_E_BUFFER_ERROR</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_BUFFER_ERROR&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a7d7f5a942a92bc351ee138fb96551d6f" kindref="member">AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED</ref><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1afa7cffa38411eb69296e902cfda00b22" kindref="member">AUDCLNT_E_INVALID_DEVICE_PERIOD</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_E_INVALID_DEVICE_PERIOD&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="588"><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1aefe9792eb9de1c3607c05dca19c70a8c" kindref="member">AUDCLNT_S_BUFFER_EMPTY</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_S_BUFFER_EMPTY&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a1f278fde24a2e623818c126b52dc41ce" kindref="member">AUDCLNT_S_THREAD_ALREADY_REGISTERED</ref><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_S_THREAD_ALREADY_REGISTERED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="audioclient_8h_1a1eaebd8428c2516bee9323f74160a811" kindref="member">AUDCLNT_S_POSITION_STALLED</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;AUDCLNT_S_POSITION_STALLED&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>other<sp/>windows<sp/>common<sp/>errors:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CO_E_NOTINITIALIZED<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text<sp/>=</highlight><highlight class="stringliteral">&quot;CO_E_NOTINITIALIZED:<sp/>you<sp/>must<sp/>call<sp/>CoInitialize()<sp/>before<sp/>Pa_OpenStream()&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="595"><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;UNKNOWN<sp/>ERROR&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI<sp/>ERROR<sp/>HRESULT:<sp/>0x%X<sp/>:<sp/>%s\n<sp/>[FUNCTION:<sp/>%s<sp/>FILE:<sp/>%s<sp/>{LINE:<sp/>%d}]\n&quot;</highlight><highlight class="normal">,<sp/>res,<sp/>text,<sp/>func,<sp/>file,<sp/>line));</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a771580ff4e4b9a948ebd1fb0fc9f17d7" kindref="member">PA_SKELETON_SET_LAST_HOST_ERROR</ref>(res,<sp/>text);</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>res;</highlight></codeline>
<codeline lineno="602"><highlight class="normal">}</highlight></codeline>
<codeline lineno="603"><highlight class="normal"></highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="605" refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LogPaError(PAERR)<sp/>__LogPaError(PAERR,<sp/>__FUNCTION__,<sp/>__FILE__,<sp/>__LINE__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="606"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>__LogPaError(<ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>err,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*func,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*file,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="seqread_8c_1aad9ebcdde542d8b2075615388ff15a9c" kindref="member">line</ref>)</highlight></codeline>
<codeline lineno="607"><highlight class="normal">{</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(err<sp/>==<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>err;</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI<sp/>ERROR<sp/>PAERROR:<sp/>%i<sp/>:<sp/>%s\n<sp/>[FUNCTION:<sp/>%s<sp/>FILE:<sp/>%s<sp/>{LINE:<sp/>%d}]\n&quot;</highlight><highlight class="normal">,<sp/>err,<sp/><ref refid="portaudio_8h_1ae606855a611cf29c7d2d7421df5e3b5d" kindref="member">Pa_GetErrorText</ref>(err),<sp/>func,<sp/>file,<sp/>line));</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>err;</highlight></codeline>
<codeline lineno="612"><highlight class="normal">}</highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight></codeline>
<codeline lineno="621" refid="struct_thread_idle_scheduler" refkind="compound"><highlight class="comment"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref></highlight></codeline>
<codeline lineno="622"><highlight class="normal">{</highlight></codeline>
<codeline lineno="623" refid="struct_thread_idle_scheduler_1a26bd9b0fcd08da6394b1b0a577b69536" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="struct_thread_idle_scheduler_1a26bd9b0fcd08da6394b1b0a577b69536" kindref="member">m_idle_microseconds</ref>;<sp/></highlight></codeline>
<codeline lineno="624" refid="struct_thread_idle_scheduler_1aa54f62fb37734538f6750a0a751e3339" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="struct_thread_idle_scheduler_1aa54f62fb37734538f6750a0a751e3339" kindref="member">m_next_sleep</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="625" refid="struct_thread_idle_scheduler_1ab2c6c2a4a836798d7bfc33c70be3582b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="struct_thread_idle_scheduler_1ab2c6c2a4a836798d7bfc33c70be3582b" kindref="member">m_i</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="626" refid="struct_thread_idle_scheduler_1ad82606350adc83e95aea1527bd8926c3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="struct_thread_idle_scheduler_1ad82606350adc83e95aea1527bd8926c3" kindref="member">m_resolution</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="627"><highlight class="normal">}</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1af54f7e1004799c3325dcbe28a9150a92" kindref="member">ThreadIdleScheduler</ref>;</highlight></codeline>
<codeline lineno="630"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ThreadIdleScheduler_Setup(<ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref><sp/>*sched,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>resolution,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>microseconds)</highlight></codeline>
<codeline lineno="631"><highlight class="normal">{</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(microseconds<sp/>!=<sp/>0);</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(resolution<sp/>!=<sp/>0);</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>((resolution<sp/>*<sp/>1000)<sp/>&gt;=<sp/>microseconds);</highlight></codeline>
<codeline lineno="635"><highlight class="normal"></highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(sched,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*sched));</highlight></codeline>
<codeline lineno="637"><highlight class="normal"></highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/>sched-&gt;<ref refid="struct_thread_idle_scheduler_1a26bd9b0fcd08da6394b1b0a577b69536" kindref="member">m_idle_microseconds</ref><sp/>=<sp/>microseconds;</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/>sched-&gt;<ref refid="struct_thread_idle_scheduler_1ad82606350adc83e95aea1527bd8926c3" kindref="member">m_resolution</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>resolution;</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/>sched-&gt;<ref refid="struct_thread_idle_scheduler_1aa54f62fb37734538f6750a0a751e3339" kindref="member">m_next_sleep</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(resolution<sp/>*<sp/>1000)<sp/>/<sp/>microseconds;</highlight></codeline>
<codeline lineno="641"><highlight class="normal">}</highlight></codeline>
<codeline lineno="643"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>ThreadIdleScheduler_NextSleep(<ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref><sp/>*sched)</highlight></codeline>
<codeline lineno="644"><highlight class="normal">{</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>advance<sp/>and<sp/>check<sp/>if<sp/>thread<sp/>can<sp/>sleep</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(++<sp/>sched-&gt;<ref refid="struct_thread_idle_scheduler_1ab2c6c2a4a836798d7bfc33c70be3582b" kindref="member">m_i</ref><sp/>==<sp/>sched-&gt;<ref refid="struct_thread_idle_scheduler_1aa54f62fb37734538f6750a0a751e3339" kindref="member">m_next_sleep</ref>)</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sched-&gt;<ref refid="struct_thread_idle_scheduler_1ab2c6c2a4a836798d7bfc33c70be3582b" kindref="member">m_i</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>sched-&gt;<ref refid="struct_thread_idle_scheduler_1ad82606350adc83e95aea1527bd8926c3" kindref="member">m_resolution</ref>;</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="652"><highlight class="normal">}</highlight></codeline>
<codeline lineno="653"><highlight class="normal"></highlight></codeline>
<codeline lineno="654"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="655"><highlight class="normal"></highlight><highlight class="comment">/*static<sp/>double<sp/>nano100ToMillis(REFERENCE_TIME<sp/>ref)</highlight></codeline>
<codeline lineno="656"><highlight class="comment">{</highlight></codeline>
<codeline lineno="657"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/><sp/>1<sp/>nano<sp/>=<sp/>0.000000001<sp/>seconds</highlight></codeline>
<codeline lineno="658"><highlight class="comment"><sp/><sp/><sp/><sp/>//100<sp/>nano<sp/>=<sp/>0.0000001<sp/><sp/><sp/>seconds</highlight></codeline>
<codeline lineno="659"><highlight class="comment"><sp/><sp/><sp/><sp/>//100<sp/>nano<sp/>=<sp/>0.0001<sp/><sp/><sp/>milliseconds</highlight></codeline>
<codeline lineno="660"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>((double)ref)*0.0001;</highlight></codeline>
<codeline lineno="661"><highlight class="comment">}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="662"><highlight class="normal"></highlight></codeline>
<codeline lineno="663"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>nano100ToSeconds(<ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>ref)</highlight></codeline>
<codeline lineno="665"><highlight class="normal">{</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>1<sp/>nano<sp/>=<sp/>0.000000001<sp/>seconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//100<sp/>nano<sp/>=<sp/>0.0000001<sp/><sp/><sp/>seconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//100<sp/>nano<sp/>=<sp/>0.0001<sp/><sp/><sp/>milliseconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)ref)*0.0000001;</highlight></codeline>
<codeline lineno="670"><highlight class="normal">}</highlight></codeline>
<codeline lineno="671"><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="673"><highlight class="normal"></highlight><highlight class="comment">/*static<sp/>REFERENCE_TIME<sp/>MillisTonano100(double<sp/>ref)</highlight></codeline>
<codeline lineno="674"><highlight class="comment">{</highlight></codeline>
<codeline lineno="675"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/><sp/>1<sp/>nano<sp/>=<sp/>0.000000001<sp/>seconds</highlight></codeline>
<codeline lineno="676"><highlight class="comment"><sp/><sp/><sp/><sp/>//100<sp/>nano<sp/>=<sp/>0.0000001<sp/><sp/><sp/>seconds</highlight></codeline>
<codeline lineno="677"><highlight class="comment"><sp/><sp/><sp/><sp/>//100<sp/>nano<sp/>=<sp/>0.0001<sp/><sp/><sp/>milliseconds</highlight></codeline>
<codeline lineno="678"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>(REFERENCE_TIME)(ref/0.0001);</highlight></codeline>
<codeline lineno="679"><highlight class="comment">}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="680"><highlight class="normal"></highlight></codeline>
<codeline lineno="681"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>SecondsTonano100(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ref)</highlight></codeline>
<codeline lineno="683"><highlight class="normal">{</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>1<sp/>nano<sp/>=<sp/>0.000000001<sp/>seconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//100<sp/>nano<sp/>=<sp/>0.0000001<sp/><sp/><sp/>seconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//100<sp/>nano<sp/>=<sp/>0.0001<sp/><sp/><sp/>milliseconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref>)(ref/0.0000001);</highlight></codeline>
<codeline lineno="688"><highlight class="normal">}</highlight></codeline>
<codeline lineno="689"><highlight class="normal"></highlight></codeline>
<codeline lineno="690"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Makes<sp/>Hns<sp/>period<sp/>from<sp/>frames<sp/>and<sp/>sample<sp/>rate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>MakeHnsPeriod(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nFrames,<sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>nSamplesPerSec)</highlight></codeline>
<codeline lineno="693"><highlight class="normal">{</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref>)((10000.0<sp/>*<sp/>1000<sp/>/<sp/>nSamplesPerSec<sp/>*<sp/>nFrames)<sp/>+<sp/>0.5);</highlight></codeline>
<codeline lineno="695"><highlight class="normal">}</highlight></codeline>
<codeline lineno="696"><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Converts<sp/>PaSampleFormat<sp/>to<sp/>bits<sp/>per<sp/>sample<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref><sp/>PaSampleFormatToBitsPerSample(<ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>format_id)</highlight></codeline>
<codeline lineno="700"><highlight class="normal">{</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(format_id<sp/>&amp;<sp/>~<ref refid="portaudio_8h_1a1d79f0b88812cef5364b276dbbc898b5" kindref="member">paNonInterleaved</ref>)</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>:</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>32;</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>24;</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>16;</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a058ecfb48ac9f0efad7a7b0d446efe3e" kindref="member">paInt8</ref>:</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>8;</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="711"><highlight class="normal">}</highlight></codeline>
<codeline lineno="712"><highlight class="normal"></highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="714"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Converts<sp/>PaSampleFormat<sp/>to<sp/>bits<sp/>per<sp/>sample<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="715"><highlight class="normal"></highlight><highlight class="comment">/*static<sp/>WORD<sp/>PaSampleFormatToBytesPerSample(PaSampleFormat<sp/>format_id)</highlight></codeline>
<codeline lineno="716"><highlight class="comment">{</highlight></codeline>
<codeline lineno="717"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>PaSampleFormatToBitsPerSample(format_id)<sp/>&gt;&gt;<sp/>3;<sp/>//<sp/>&apos;bits/8&apos;</highlight></codeline>
<codeline lineno="718"><highlight class="comment">}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"></highlight></codeline>
<codeline lineno="720"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="721"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Converts<sp/>Hns<sp/>period<sp/>into<sp/>number<sp/>of<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="722"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>MakeFramesFromHns(<ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>hnsPeriod,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nSamplesPerSec)</highlight></codeline>
<codeline lineno="723"><highlight class="normal">{</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nFrames<sp/>=<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)(<sp/><sp/></highlight><highlight class="comment">//<sp/>frames<sp/>=</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0<sp/>*<sp/>hnsPeriod<sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>hns<sp/>*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nSamplesPerSec<sp/>/<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(frames<sp/>/<sp/>s)<sp/>/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1000<sp/>/<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(ms<sp/>/<sp/>s)<sp/>/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>10000<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(hns<sp/>/<sp/>s)<sp/>/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>0.5<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>rounding</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nFrames;</highlight></codeline>
<codeline lineno="732"><highlight class="normal">}</highlight></codeline>
<codeline lineno="733"><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Aligning<sp/>function<sp/>type</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="735" refid="pa__win__wasapi_8c_1a949fa21ebe968b6a5a38bd434e5eb4f6" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>(*<ref refid="pa__win__wasapi_8c_1a949fa21ebe968b6a5a38bd434e5eb4f6" kindref="member">ALIGN_FUNC</ref>)<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>v,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>align);</highlight></codeline>
<codeline lineno="736"><highlight class="normal"></highlight></codeline>
<codeline lineno="737"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="738"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Aligns<sp/>&apos;v&apos;<sp/>backwards</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="739"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>ALIGN_BWD(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>v,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>align)</highlight></codeline>
<codeline lineno="740"><highlight class="normal">{</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((v<sp/>-<sp/>(align<sp/>?<sp/>v<sp/>%<sp/>align<sp/>:<sp/>0)));</highlight></codeline>
<codeline lineno="742"><highlight class="normal">}</highlight></codeline>
<codeline lineno="743"><highlight class="normal"></highlight></codeline>
<codeline lineno="744"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="745"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Aligns<sp/>&apos;v&apos;<sp/>forward</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="746"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>ALIGN_FWD(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>v,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>align)</highlight></codeline>
<codeline lineno="747"><highlight class="normal">{</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>remainder<sp/>=<sp/>(align<sp/>?<sp/>(v<sp/>%<sp/>align)<sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(remainder<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>v;</highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>v<sp/>+<sp/>(align<sp/>-<sp/>remainder);</highlight></codeline>
<codeline lineno="752"><highlight class="normal">}</highlight></codeline>
<codeline lineno="753"><highlight class="normal"></highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="755"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Get<sp/>next<sp/>value<sp/>power<sp/>of<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="756" refid="pa__win__wasapi_8c_1a34e25232f62662dafe2b79c6fbc38cc2" refkind="member"><highlight class="normal"><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="pa__win__wasapi_8c_1a34e25232f62662dafe2b79c6fbc38cc2" kindref="member">ALIGN_NEXT_POW2</ref>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>v)</highlight></codeline>
<codeline lineno="757"><highlight class="normal">{</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>v2<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(v<sp/>&gt;<sp/>(v2<sp/>&lt;&lt;=<sp/>1))<sp/>{<sp/>}</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/>v<sp/>=<sp/>v2;</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>v;</highlight></codeline>
<codeline lineno="762"><highlight class="normal">}</highlight></codeline>
<codeline lineno="763"><highlight class="normal"></highlight></codeline>
<codeline lineno="764"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="765"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Aligns<sp/>WASAPI<sp/>buffer<sp/>to<sp/>128<sp/>byte<sp/>packet<sp/>boundary.<sp/>HD<sp/>Audio<sp/>will<sp/>fail<sp/>to<sp/>play<sp/>if<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="766"><highlight class="normal"></highlight><highlight class="comment">//<sp/>is<sp/>misaligned.<sp/>This<sp/>problem<sp/>was<sp/>solved<sp/>in<sp/>Windows<sp/>7<sp/>were<sp/>AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="767"><highlight class="normal"></highlight><highlight class="comment">//<sp/>is<sp/>thrown<sp/>although<sp/>we<sp/>must<sp/>align<sp/>for<sp/>Vista<sp/>anyway.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="768"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>AlignFramesPerBuffer(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nFrames,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nSamplesPerSec,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nBlockAlign,</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a949fa21ebe968b6a5a38bd434e5eb4f6" kindref="member">ALIGN_FUNC</ref><sp/>pAlignFunc)</highlight></codeline>
<codeline lineno="770"><highlight class="normal">{</highlight></codeline>
<codeline lineno="771"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>HDA_PACKET_SIZE<sp/>(128)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="772"><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frame_bytes<sp/>=<sp/>nFrames<sp/>*<sp/>nBlockAlign;</highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>packets;</highlight></codeline>
<codeline lineno="775"><highlight class="normal"></highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>align<sp/>to<sp/>packet<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/>frame_bytes<sp/><sp/>=<sp/>pAlignFunc(frame_bytes,<sp/><ref refid="pa__win__wasapi_8c_1a6d765e6132c93a5601f277322ae4f98c" kindref="member">HDA_PACKET_SIZE</ref>);<sp/></highlight><highlight class="comment">//<sp/>use<sp/>ALIGN_FWD<sp/>if<sp/>bigger<sp/>but<sp/>safer<sp/>period<sp/>is<sp/>more<sp/>desired</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="778"><highlight class="normal"></highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>atlest<sp/>1<sp/>frame<sp/>must<sp/>be<sp/>available</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frame_bytes<sp/>&lt;<sp/><ref refid="pa__win__wasapi_8c_1a6d765e6132c93a5601f277322ae4f98c" kindref="member">HDA_PACKET_SIZE</ref>)</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frame_bytes<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1a6d765e6132c93a5601f277322ae4f98c" kindref="member">HDA_PACKET_SIZE</ref>;</highlight></codeline>
<codeline lineno="782"><highlight class="normal"></highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/>nFrames<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>frame_bytes<sp/>/<sp/>nBlockAlign;</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/>packets<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>frame_bytes<sp/>/<sp/><ref refid="pa__win__wasapi_8c_1a6d765e6132c93a5601f277322ae4f98c" kindref="member">HDA_PACKET_SIZE</ref>;</highlight></codeline>
<codeline lineno="785"><highlight class="normal"></highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/>frame_bytes<sp/>=<sp/>packets<sp/>*<sp/><ref refid="pa__win__wasapi_8c_1a6d765e6132c93a5601f277322ae4f98c" kindref="member">HDA_PACKET_SIZE</ref>;</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/>nFrames<sp/><sp/><sp/><sp/><sp/>=<sp/>frame_bytes<sp/>/<sp/>nBlockAlign;</highlight></codeline>
<codeline lineno="788"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nFrames;</highlight></codeline>
<codeline lineno="790"><highlight class="normal"></highlight></codeline>
<codeline lineno="791"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>HDA_PACKET_SIZE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="792"><highlight class="normal">}</highlight></codeline>
<codeline lineno="793"><highlight class="normal"></highlight></codeline>
<codeline lineno="794"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="795"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>GetFramesSleepTime(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nFrames,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nSamplesPerSec)</highlight></codeline>
<codeline lineno="796"><highlight class="normal">{</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>nDuration;</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nSamplesPerSec<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="800"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>REFTIMES_PER_SEC<sp/><sp/>10000000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="801"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>REFTIMES_PER_MILLISEC<sp/><sp/>10000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>the<sp/>actual<sp/>duration<sp/>of<sp/>the<sp/>allocated<sp/>buffer.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/>nDuration<sp/>=<sp/>(<ref refid="pa__win__wasapi_8c_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref>)((</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)<ref refid="pa__win__wasapi_8c_1a920e4c6a2c837ff4374cf5eb69a554eb" kindref="member">REFTIMES_PER_SEC</ref><sp/>*<sp/>nFrames<sp/>/<sp/>nSamplesPerSec);</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)(nDuration/<ref refid="pa__win__wasapi_8c_1af9f1f980d99b0c1568771a74cd275f08" kindref="member">REFTIMES_PER_MILLISEC</ref>/2);</highlight></codeline>
<codeline lineno="805"><highlight class="normal">}</highlight></codeline>
<codeline lineno="806"><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="808"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>GetFramesSleepTimeMicroseconds(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nFrames,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>nSamplesPerSec)</highlight></codeline>
<codeline lineno="809"><highlight class="normal">{</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>nDuration;</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nSamplesPerSec<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="813"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>REFTIMES_PER_SEC<sp/><sp/>10000000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="814"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>REFTIMES_PER_MILLISEC<sp/><sp/>10000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>the<sp/>actual<sp/>duration<sp/>of<sp/>the<sp/>allocated<sp/>buffer.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/>nDuration<sp/>=<sp/>(<ref refid="pa__win__wasapi_8c_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref>)((</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)<ref refid="pa__win__wasapi_8c_1a920e4c6a2c837ff4374cf5eb69a554eb" kindref="member">REFTIMES_PER_SEC</ref><sp/>*<sp/>nFrames<sp/>/<sp/>nSamplesPerSec);</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)(nDuration/10/2);</highlight></codeline>
<codeline lineno="818"><highlight class="normal">}</highlight></codeline>
<codeline lineno="819"><highlight class="normal"></highlight></codeline>
<codeline lineno="820"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>SetupAVRT()</highlight></codeline>
<codeline lineno="822"><highlight class="normal">{</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/>hDInputDLL<sp/>=<sp/>LoadLibraryA(</highlight><highlight class="stringliteral">&quot;avrt.dll&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hDInputDLL<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="826"><highlight class="normal"></highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" kindref="member">_GetProc</ref>(<ref refid="pa__win__wasapi_8c_1ad998bad539a112ce8182c22c5cf0481e" kindref="member">pAvRtCreateThreadOrderingGroup</ref>,<sp/><sp/>FAvRtCreateThreadOrderingGroup,<sp/><sp/></highlight><highlight class="stringliteral">&quot;AvRtCreateThreadOrderingGroup&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" kindref="member">_GetProc</ref>(<ref refid="pa__win__wasapi_8c_1a5604278b62c1f5c62e906ab2e53ba6ab" kindref="member">pAvRtDeleteThreadOrderingGroup</ref>,<sp/><sp/>FAvRtDeleteThreadOrderingGroup,<sp/><sp/></highlight><highlight class="stringliteral">&quot;AvRtDeleteThreadOrderingGroup&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" kindref="member">_GetProc</ref>(<ref refid="pa__win__wasapi_8c_1ab0d78159e0a0e2a6575ca053983461d8" kindref="member">pAvRtWaitOnThreadOrderingGroup</ref>,<sp/><sp/>FAvRtWaitOnThreadOrderingGroup,<sp/><sp/></highlight><highlight class="stringliteral">&quot;AvRtWaitOnThreadOrderingGroup&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" kindref="member">_GetProc</ref>(<ref refid="pa__win__wasapi_8c_1a892964d92daf945b57491f24eb331056" kindref="member">pAvSetMmThreadCharacteristics</ref>,<sp/><sp/><sp/>FAvSetMmThreadCharacteristics,<sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;AvSetMmThreadCharacteristicsA&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" kindref="member">_GetProc</ref>(<ref refid="pa__win__wasapi_8c_1a800438cc51e4a6661c2cdb986a16e093" kindref="member">pAvRevertMmThreadCharacteristics</ref>,<ref refid="pa__win__wasapi_8c_1a00005277f6e80b50489b77a3641c50f3" kindref="member">FAvRevertMmThreadCharacteristics</ref>,</highlight><highlight class="stringliteral">&quot;AvRevertMmThreadCharacteristics&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaa99ea4974b034b9c0ed40a450076802" kindref="member">_GetProc</ref>(<ref refid="pa__win__wasapi_8c_1a00926c56ee41e2e33e834e6552a9fe0d" kindref="member">pAvSetMmThreadPriority</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FAvSetMmThreadPriority,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;AvSetMmThreadPriority&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="833"><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ad998bad539a112ce8182c22c5cf0481e" kindref="member">pAvRtCreateThreadOrderingGroup</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5604278b62c1f5c62e906ab2e53ba6ab" kindref="member">pAvRtDeleteThreadOrderingGroup</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ab0d78159e0a0e2a6575ca053983461d8" kindref="member">pAvRtWaitOnThreadOrderingGroup</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a892964d92daf945b57491f24eb331056" kindref="member">pAvSetMmThreadCharacteristics</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a800438cc51e4a6661c2cdb986a16e093" kindref="member">pAvRevertMmThreadCharacteristics</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a00926c56ee41e2e33e834e6552a9fe0d" kindref="member">pAvSetMmThreadPriority</ref>;</highlight></codeline>
<codeline lineno="840"><highlight class="normal">}</highlight></codeline>
<codeline lineno="841"><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="843"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>CloseAVRT()</highlight></codeline>
<codeline lineno="844"><highlight class="normal">{</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hDInputDLL<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FreeLibrary(hDInputDLL);</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/>hDInputDLL<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="848"><highlight class="normal">}</highlight></codeline>
<codeline lineno="849"><highlight class="normal"></highlight></codeline>
<codeline lineno="850"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="851"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>IsWow64()</highlight></codeline>
<codeline lineno="852"><highlight class="normal">{</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>http://msdn.microsoft.com/en-us/library/ms684139(VS.85).aspx</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="854"><highlight class="normal"></highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" kindref="member">BOOL</ref><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*LPFN_ISWOW64PROCESS)<sp/>(<ref refid="pa__win__wasapi_8c_1a17a3aca6faec8a591d204f32baa40bf5" kindref="member">HANDLE</ref>,<sp/><ref refid="patest__dsound__find__best__latency__params_8c_1a85326e1ccfeff8dbee821eaea17b16d8" kindref="member">PBOOL</ref>);</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/>LPFN_ISWOW64PROCESS<sp/><ref refid="patest__dsound__find__best__latency__params_8c_1a26fcce622038d84b249f44acf58bef21" kindref="member">fnIsWow64Process</ref>;</highlight></codeline>
<codeline lineno="857"><highlight class="normal"></highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>bIsWow64<sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="859"><highlight class="normal"></highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IsWow64Process<sp/>is<sp/>not<sp/>available<sp/>on<sp/>all<sp/>supported<sp/>versions<sp/>of<sp/>Windows.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>GetModuleHandle<sp/>to<sp/>get<sp/>a<sp/>handle<sp/>to<sp/>the<sp/>DLL<sp/>that<sp/>contains<sp/>the<sp/>function</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>GetProcAddress<sp/>to<sp/>get<sp/>a<sp/>pointer<sp/>to<sp/>the<sp/>function<sp/>if<sp/>available.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="863"><highlight class="normal"></highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/>fnIsWow64Process<sp/>=<sp/>(LPFN_ISWOW64PROCESS)<sp/>GetProcAddress(</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetModuleHandleA(</highlight><highlight class="stringliteral">&quot;kernel32&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="stringliteral">&quot;IsWow64Process&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="866"><highlight class="normal"></highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fnIsWow64Process<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="869"><highlight class="normal"></highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="patest__dsound__find__best__latency__params_8c_1a26fcce622038d84b249f44acf58bef21" kindref="member">fnIsWow64Process</ref>(GetCurrentProcess(),<sp/>&amp;bIsWow64))</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="872"><highlight class="normal"></highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>bIsWow64;</highlight></codeline>
<codeline lineno="874"><highlight class="normal">}</highlight></codeline>
<codeline lineno="875"><highlight class="normal"></highlight></codeline>
<codeline lineno="876"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="877" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" kindref="member">EWindowsVersion</ref></highlight></codeline>
<codeline lineno="878"><highlight class="normal">{</highlight></codeline>
<codeline lineno="879" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a34af6dcbce17b7e942bd8901fc89f701" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a34af6dcbce17b7e942bd8901fc89f701" kindref="member">WINDOWS_UNKNOWN</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="880" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ad24275f02eb3bf7b4e1ed8e759016e5f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ad24275f02eb3bf7b4e1ed8e759016e5f" kindref="member">WINDOWS_VISTA_SERVER2008</ref>,</highlight></codeline>
<codeline lineno="881" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a3fa4d45ad3f6f0249620f1165ee1ed4f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a3fa4d45ad3f6f0249620f1165ee1ed4f" kindref="member">WINDOWS_7_SERVER2008R2</ref>,</highlight></codeline>
<codeline lineno="882" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a282960d50b4587c87046a8333bf2c38c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a282960d50b4587c87046a8333bf2c38c" kindref="member">WINDOWS_8_SERVER2012</ref>,</highlight></codeline>
<codeline lineno="883" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ab5cea250cefffe760d8947ae4c3107d0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ab5cea250cefffe760d8947ae4c3107d0" kindref="member">WINDOWS_8_1_SERVER2012R2</ref>,</highlight></codeline>
<codeline lineno="884" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a5b9050d995ef03019284af641563c15f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a5b9050d995ef03019284af641563c15f" kindref="member">WINDOWS_10_SERVER2016</ref>,</highlight></codeline>
<codeline lineno="885" refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a16952920e317737f75be9de6682f0d06" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a16952920e317737f75be9de6682f0d06" kindref="member">WINDOWS_FUTURE</ref></highlight></codeline>
<codeline lineno="886"><highlight class="normal">}</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" kindref="member">EWindowsVersion</ref>;</highlight></codeline>
<codeline lineno="888"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Alternative<sp/>way<sp/>for<sp/>checking<sp/>Windows<sp/>version<sp/>(allows<sp/>to<sp/>check<sp/>version<sp/>on<sp/>Windows<sp/>8.1<sp/>and<sp/>up)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="889"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>IsWindowsVersionOrGreater(<ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref><sp/>wMajorVersion,<sp/><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref><sp/>wMinorVersion,<sp/><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref><sp/>wServicePackMajor)</highlight></codeline>
<codeline lineno="890"><highlight class="normal">{</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/>ULONGLONG<sp/>(NTAPI<sp/>*LPFN_VERSETCONDITIONMASK)(ULONGLONG<sp/>ConditionMask,<sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>TypeMask,<sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>Condition);</highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ab7bc355a4b75848369499301290ce9ab" kindref="member">BOOL</ref><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*LPFN_VERIFYVERSIONINFO)(LPOSVERSIONINFOEXA<sp/>lpVersionInformation,<sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>dwTypeMask,<sp/>DWORDLONG<sp/>dwlConditionMask);</highlight></codeline>
<codeline lineno="893"><highlight class="normal"></highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/>LPFN_VERSETCONDITIONMASK<sp/>fnVerSetConditionMask;</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/>LPFN_VERIFYVERSIONINFO<sp/>fnVerifyVersionInfo;</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/>OSVERSIONINFOEXA<sp/>osvi<sp/>=<sp/>{<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(osvi),<sp/>0,<sp/>0,<sp/>0,<sp/>0,<sp/>{0},<sp/>0,<sp/>0<sp/>};</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/>DWORDLONG<sp/>dwlConditionMask;</highlight></codeline>
<codeline lineno="898"><highlight class="normal"></highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/>fnVerSetConditionMask<sp/>=<sp/>(LPFN_VERSETCONDITIONMASK)GetProcAddress(GetModuleHandleA(</highlight><highlight class="stringliteral">&quot;kernel32&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="stringliteral">&quot;VerSetConditionMask&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/>fnVerifyVersionInfo<sp/>=<sp/>(LPFN_VERIFYVERSIONINFO)GetProcAddress(GetModuleHandleA(</highlight><highlight class="stringliteral">&quot;kernel32&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="stringliteral">&quot;VerifyVersionInfoA&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="901"><highlight class="normal"></highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((fnVerSetConditionMask<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>||<sp/>(fnVerifyVersionInfo<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="904"><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/>dwlConditionMask<sp/>=<sp/>fnVerSetConditionMask(</highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fnVerSetConditionMask(</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fnVerSetConditionMask(</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/>VER_MAJORVERSION,<sp/><sp/><sp/><sp/><sp/>VER_GREATER_EQUAL),</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>VER_MINORVERSION,<sp/><sp/><sp/><sp/><sp/>VER_GREATER_EQUAL),</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>VER_SERVICEPACKMAJOR,<sp/>VER_GREATER_EQUAL);</highlight></codeline>
<codeline lineno="911"><highlight class="normal"></highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/>osvi.dwMajorVersion<sp/><sp/><sp/><sp/>=<sp/>wMajorVersion;</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/>osvi.dwMinorVersion<sp/><sp/><sp/><sp/>=<sp/>wMinorVersion;</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/>osvi.wServicePackMajor<sp/>=<sp/>wServicePackMajor;</highlight></codeline>
<codeline lineno="915"><highlight class="normal"></highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(fnVerifyVersionInfo(&amp;osvi,<sp/>VER_MAJORVERSION<sp/>|<sp/>VER_MINORVERSION<sp/>|<sp/>VER_SERVICEPACKMAJOR,<sp/>dwlConditionMask)<sp/>!=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="917"><highlight class="normal">}</highlight></codeline>
<codeline lineno="918"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Get<sp/>Windows<sp/>version</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="919"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" kindref="member">EWindowsVersion</ref><sp/>GetWindowsVersion()</highlight></codeline>
<codeline lineno="920"><highlight class="normal">{</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966" kindref="member">EWindowsVersion</ref><sp/><ref refid="lib_2expat_8h_1aec5db107b91447a96c47961ce9df2660" kindref="member">version</ref><sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a34af6dcbce17b7e942bd8901fc89f701" kindref="member">WINDOWS_UNKNOWN</ref>;</highlight></codeline>
<codeline lineno="922"><highlight class="normal"></highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(version<sp/>==<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a34af6dcbce17b7e942bd8901fc89f701" kindref="member">WINDOWS_UNKNOWN</ref>)</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>dwVersion<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>dwMajorVersion<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>dwMinorVersion<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>dwBuild<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>(<ref refid="mapinls_8h_1a9aa60e1ead64be77ad551e745cbfd4d3" kindref="member">WINAPI</ref><sp/>*LPFN_GETVERSION)(VOID);</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LPFN_GETVERSION<sp/>fnGetVersion;</highlight></codeline>
<codeline lineno="932"><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fnGetVersion<sp/>=<sp/>(LPFN_GETVERSION)GetProcAddress(GetModuleHandleA(</highlight><highlight class="stringliteral">&quot;kernel32&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="stringliteral">&quot;GetVersion&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fnGetVersion<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>getting<sp/>Windows<sp/>version<sp/>with<sp/>GetVersion()\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="937"><highlight class="normal"></highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dwVersion<sp/>=<sp/>fnGetVersion();</highlight></codeline>
<codeline lineno="939"><highlight class="normal"></highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>Windows<sp/>version</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dwMajorVersion<sp/>=<sp/>(<ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref>)(LOBYTE(LOWORD(dwVersion)));</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dwMinorVersion<sp/>=<sp/>(<ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref>)(HIBYTE(LOWORD(dwVersion)));</highlight></codeline>
<codeline lineno="943"><highlight class="normal"></highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>build<sp/>number</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dwVersion<sp/>&lt;<sp/>0x80000000)</highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dwBuild<sp/>=<sp/>(<ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref>)(HIWORD(dwVersion));</highlight></codeline>
<codeline lineno="947"><highlight class="normal"></highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(dwMajorVersion)</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:</highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>5:</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>skip<sp/>lower</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>6:</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(dwMinorVersion)</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:<sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ad24275f02eb3bf7b4e1ed8e759016e5f" kindref="member">WINDOWS_VISTA_SERVER2008</ref>;<sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:<sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a3fa4d45ad3f6f0249620f1165ee1ed4f" kindref="member">WINDOWS_7_SERVER2008R2</ref>;<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:<sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a282960d50b4587c87046a8333bf2c38c" kindref="member">WINDOWS_8_SERVER2012</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:<sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ab5cea250cefffe760d8947ae4c3107d0" kindref="member">WINDOWS_8_1_SERVER2012R2</ref>;<sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:<sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a16952920e317737f75be9de6682f0d06" kindref="member">WINDOWS_FUTURE</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>10:</highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(dwMinorVersion)</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:<sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a5b9050d995ef03019284af641563c15f" kindref="member">WINDOWS_10_SERVER2016</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:<sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a16952920e317737f75be9de6682f0d06" kindref="member">WINDOWS_FUTURE</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a16952920e317737f75be9de6682f0d06" kindref="member">WINDOWS_FUTURE</ref>;</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>getting<sp/>Windows<sp/>version<sp/>with<sp/>VerifyVersionInfo()\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="982"><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsWindowsVersionOrGreater(10,<sp/>0,<sp/>0))</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a5b9050d995ef03019284af641563c15f" kindref="member">WINDOWS_10_SERVER2016</ref>;</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsWindowsVersionOrGreater(6,<sp/>3,<sp/>0))</highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ab5cea250cefffe760d8947ae4c3107d0" kindref="member">WINDOWS_8_1_SERVER2012R2</ref>;</highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsWindowsVersionOrGreater(6,<sp/>2,<sp/>0))</highlight></codeline>
<codeline lineno="990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a282960d50b4587c87046a8333bf2c38c" kindref="member">WINDOWS_8_SERVER2012</ref>;</highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsWindowsVersionOrGreater(6,<sp/>1,<sp/>0))</highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a3fa4d45ad3f6f0249620f1165ee1ed4f" kindref="member">WINDOWS_7_SERVER2008R2</ref>;</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsWindowsVersionOrGreater(6,<sp/>0,<sp/>0))</highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ad24275f02eb3bf7b4e1ed8e759016e5f" kindref="member">WINDOWS_VISTA_SERVER2008</ref>;</highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a16952920e317737f75be9de6682f0d06" kindref="member">WINDOWS_FUTURE</ref>;</highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1000"><highlight class="normal"></highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>Windows<sp/>version<sp/>=<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>version));</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"></highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1aec5db107b91447a96c47961ce9df2660" kindref="member">version</ref>;</highlight></codeline>
<codeline lineno="1005"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"></highlight></codeline>
<codeline lineno="1007"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1008"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>UseWOW64Workaround()</highlight></codeline>
<codeline lineno="1009"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>note:<sp/>WOW64<sp/>bug<sp/>is<sp/>common<sp/>to<sp/>Windows<sp/>Vista<sp/>x64,<sp/>thus<sp/>we<sp/>fall<sp/>back<sp/>to<sp/>safe<sp/>Poll-driven</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>method.<sp/>Windows<sp/>7<sp/>x64<sp/>seems<sp/>has<sp/>WOW64<sp/>bug<sp/>fixed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1012"><highlight class="normal"></highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(IsWow64()<sp/>&amp;&amp;<sp/>(GetWindowsVersion()<sp/>==<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ad24275f02eb3bf7b4e1ed8e759016e5f" kindref="member">WINDOWS_VISTA_SERVER2008</ref>));</highlight></codeline>
<codeline lineno="1014"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"></highlight></codeline>
<codeline lineno="1016"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1017"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>GetAudioClientVersion()</highlight></codeline>
<codeline lineno="1018"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(GetWindowsVersion()<sp/>&gt;=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a5b9050d995ef03019284af641563c15f" kindref="member">WINDOWS_10_SERVER2016</ref>)</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>3;</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(GetWindowsVersion()<sp/>&gt;=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a282960d50b4587c87046a8333bf2c38c" kindref="member">WINDOWS_8_SERVER2012</ref>)</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>2;</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"></highlight></codeline>
<codeline lineno="1025"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="1026"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"></highlight></codeline>
<codeline lineno="1028"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1029"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>IID<sp/>*GetAudioClientIID()</highlight></codeline>
<codeline lineno="1030"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>IID<sp/>*cli_iid<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cli_iid<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>cli_version<sp/>=<sp/>GetAudioClientVersion();</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cli_version<sp/>&lt;=<sp/>1)</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cli_iid<sp/>=<sp/>&amp;pa_IID_IAudioClient;</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(cli_version)</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:<sp/><sp/>cli_iid<sp/>=<sp/>&amp;pa_IID_IAudioClient2;<sp/>cli_version<sp/>=<sp/>2;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>use<sp/>IAudioClient2<sp/>for<sp/>Windows<sp/>10+<sp/>until<sp/>IAudioClient3<sp/>functions<sp/>are<sp/>required</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:<sp/>cli_iid<sp/>=<sp/>&amp;pa_IID_IAudioClient2;<sp/>cli_version<sp/>=<sp/>2;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1047"><highlight class="normal"></highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>IAudioClient<sp/>version<sp/>=<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>cli_version));</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"></highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>cli_iid;</highlight></codeline>
<codeline lineno="1052"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1053"><highlight class="normal"></highlight></codeline>
<codeline lineno="1054"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1055" refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca0858f41d4d725a8638f791327d303f33" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046c" kindref="member">EMixerDir</ref><sp/>{<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046cab2ffbd89db8f6270bf898848a9b77668" kindref="member">MIX_DIR__1TO2</ref>,<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca4a73cefc3d25fc95e94adf7b14ab3583" kindref="member">MIX_DIR__2TO1</ref>,<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca0858f41d4d725a8638f791327d303f33" kindref="member">MIX_DIR__2TO1_L</ref><sp/>}<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046c" kindref="member">EMixerDir</ref>;</highlight></codeline>
<codeline lineno="1056"><highlight class="normal"></highlight></codeline>
<codeline lineno="1057"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1058" refid="pa__win__wasapi_8c_1ada6662bf23deb36ae82097ee77924945" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_WASAPI_MONO_TO_STEREO_MIXER_1_TO_2(TYPE)\</highlight></codeline>
<codeline lineno="1059"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>to<sp/><sp/><sp/>=<sp/>__to;\</highlight></codeline>
<codeline lineno="1060"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>from<sp/>=<sp/>__from;\</highlight></codeline>
<codeline lineno="1061"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>end<sp/><sp/>=<sp/>from<sp/>+<sp/>count;\</highlight></codeline>
<codeline lineno="1062"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>while<sp/>(from<sp/>!=<sp/>end)\</highlight></codeline>
<codeline lineno="1063"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>{\</highlight></codeline>
<codeline lineno="1064"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*to<sp/>++<sp/>=<sp/>*from;\</highlight></codeline>
<codeline lineno="1065"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*to<sp/>++<sp/>=<sp/>*from;\</highlight></codeline>
<codeline lineno="1066"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++<sp/>from;\</highlight></codeline>
<codeline lineno="1067"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"></highlight></codeline>
<codeline lineno="1069"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1070" refid="pa__win__wasapi_8c_1a7a033fd62998defc98fd8b3318b1f437" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_FLT32(TYPE)\</highlight></codeline>
<codeline lineno="1071"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>to<sp/><sp/><sp/>=<sp/>(TYPE<sp/>*)__to;\</highlight></codeline>
<codeline lineno="1072"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>from<sp/>=<sp/>(TYPE<sp/>*)__from;\</highlight></codeline>
<codeline lineno="1073"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>end<sp/><sp/>=<sp/>to<sp/>+<sp/>count;\</highlight></codeline>
<codeline lineno="1074"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>while<sp/>(to<sp/>!=<sp/>end)\</highlight></codeline>
<codeline lineno="1075"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>{\</highlight></codeline>
<codeline lineno="1076"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*to<sp/>++<sp/>=<sp/>(TYPE)((float)(from[0]<sp/>+<sp/>from[1])<sp/>*<sp/>0.5f);\</highlight></codeline>
<codeline lineno="1077"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>from<sp/>+=<sp/>2;\</highlight></codeline>
<codeline lineno="1078"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1079"><highlight class="normal"></highlight></codeline>
<codeline lineno="1080"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1081" refid="pa__win__wasapi_8c_1a0dcd21c9e597e6295abca02c11622736" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT32(TYPE)\</highlight></codeline>
<codeline lineno="1082"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>to<sp/><sp/><sp/>=<sp/>(TYPE<sp/>*)__to;\</highlight></codeline>
<codeline lineno="1083"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>from<sp/>=<sp/>(TYPE<sp/>*)__from;\</highlight></codeline>
<codeline lineno="1084"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>end<sp/><sp/>=<sp/>to<sp/>+<sp/>count;\</highlight></codeline>
<codeline lineno="1085"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>while<sp/>(to<sp/>!=<sp/>end)\</highlight></codeline>
<codeline lineno="1086"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>{\</highlight></codeline>
<codeline lineno="1087"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*to<sp/>++<sp/>=<sp/>(TYPE)(((INT32)from[0]<sp/>+<sp/>(INT32)from[1])<sp/>&gt;&gt;<sp/>1);\</highlight></codeline>
<codeline lineno="1088"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>from<sp/>+=<sp/>2;\</highlight></codeline>
<codeline lineno="1089"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1090"><highlight class="normal"></highlight></codeline>
<codeline lineno="1091"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1092" refid="pa__win__wasapi_8c_1a12872b4e5be48d44a65a4b47531a65b3" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT64(TYPE)\</highlight></codeline>
<codeline lineno="1093"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>to<sp/><sp/><sp/>=<sp/>(TYPE<sp/>*)__to;\</highlight></codeline>
<codeline lineno="1094"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>from<sp/>=<sp/>(TYPE<sp/>*)__from;\</highlight></codeline>
<codeline lineno="1095"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>end<sp/><sp/>=<sp/>to<sp/>+<sp/>count;\</highlight></codeline>
<codeline lineno="1096"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>while<sp/>(to<sp/>!=<sp/>end)\</highlight></codeline>
<codeline lineno="1097"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>{\</highlight></codeline>
<codeline lineno="1098"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*to<sp/>++<sp/>=<sp/>(TYPE)(((INT64)from[0]<sp/>+<sp/>(INT64)from[1])<sp/>&gt;&gt;<sp/>1);\</highlight></codeline>
<codeline lineno="1099"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>from<sp/>+=<sp/>2;\</highlight></codeline>
<codeline lineno="1100"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1101"><highlight class="normal"></highlight></codeline>
<codeline lineno="1102"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1103" refid="pa__win__wasapi_8c_1aa55d5cb14030dd39ad1e24a82216f71b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_L(TYPE)\</highlight></codeline>
<codeline lineno="1104"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>to<sp/><sp/><sp/>=<sp/>(TYPE<sp/>*)__to;\</highlight></codeline>
<codeline lineno="1105"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>from<sp/>=<sp/>(TYPE<sp/>*)__from;\</highlight></codeline>
<codeline lineno="1106"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>TYPE<sp/>*<sp/>__restrict<sp/>end<sp/><sp/>=<sp/>to<sp/>+<sp/>count;\</highlight></codeline>
<codeline lineno="1107"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>while<sp/>(to<sp/>!=<sp/>end)\</highlight></codeline>
<codeline lineno="1108"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>{\</highlight></codeline>
<codeline lineno="1109"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*to<sp/>++<sp/>=<sp/>from[0];\</highlight></codeline>
<codeline lineno="1110"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>from<sp/>+=<sp/>2;\</highlight></codeline>
<codeline lineno="1111"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1112"><highlight class="normal"></highlight></codeline>
<codeline lineno="1113"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1114"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_8(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1ada6662bf23deb36ae82097ee77924945" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_1_TO_2</ref>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref>);<sp/>}</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_16(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1ada6662bf23deb36ae82097ee77924945" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_1_TO_2</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_24(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1ada6662bf23deb36ae82097ee77924945" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_1_TO_2</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">);<sp/></highlight><highlight class="comment">/*<sp/>!!!<sp/>int24<sp/>data<sp/>is<sp/>contained<sp/>in<sp/>32-bit<sp/>containers*/</highlight><highlight class="normal"><sp/>}</highlight></codeline>
<codeline lineno="1117"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_32(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1ada6662bf23deb36ae82097ee77924945" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_1_TO_2</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_32f(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1ada6662bf23deb36ae82097ee77924945" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_1_TO_2</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"></highlight></codeline>
<codeline lineno="1120"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1121"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_8(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1a0dcd21c9e597e6295abca02c11622736" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT32</ref>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref>);<sp/>}</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_16(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1a0dcd21c9e597e6295abca02c11622736" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT32</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_24(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1a0dcd21c9e597e6295abca02c11622736" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT32</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">);<sp/></highlight><highlight class="comment">/*<sp/>!!!<sp/>int24<sp/>data<sp/>is<sp/>contained<sp/>in<sp/>32-bit<sp/>containers*/</highlight><highlight class="normal"><sp/>}</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1a12872b4e5be48d44a65a4b47531a65b3" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_INT64</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32f(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1a7a033fd62998defc98fd8b3318b1f437" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_FLT32</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"></highlight></codeline>
<codeline lineno="1127"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1128"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_8_L(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1aa55d5cb14030dd39ad1e24a82216f71b" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_L</ref>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref>);<sp/>}</highlight></codeline>
<codeline lineno="1129"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_16_L(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1aa55d5cb14030dd39ad1e24a82216f71b" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_L</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_24_L(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1aa55d5cb14030dd39ad1e24a82216f71b" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_L</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">);<sp/></highlight><highlight class="comment">/*<sp/>!!!<sp/>int24<sp/>data<sp/>is<sp/>contained<sp/>in<sp/>32-bit<sp/>containers*/</highlight><highlight class="normal"><sp/>}</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32_L(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1aa55d5cb14030dd39ad1e24a82216f71b" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_L</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32f_L(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__to,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*__from,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="cascade_8c_1afea6e77db19a2f8c91419904fe665a3a" kindref="member">count</ref>)<sp/>{<sp/><ref refid="pa__win__wasapi_8c_1aa55d5cb14030dd39ad1e24a82216f71b" kindref="member">_WASAPI_MONO_TO_STEREO_MIXER_2_TO_1_L</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">);<sp/>}</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1135"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ae15ae1737c49a3e379f0f418acff17e0" kindref="member">MixMonoToStereoF</ref><sp/>_GetMonoToStereoMixer(<ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/><ref refid="_export_p_c_m_8cpp_1a317afff57d87a89158c2b038d37b2b08" kindref="member">format</ref>,<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046c" kindref="member">EMixerDir</ref><sp/>dir)</highlight></codeline>
<codeline lineno="1136"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(dir)</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046cab2ffbd89db8f6270bf898848a9b77668" kindref="member">MIX_DIR__1TO2</ref>:</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="_export_p_c_m_8cpp_1a317afff57d87a89158c2b038d37b2b08" kindref="member">format</ref><sp/>&amp;<sp/>~<ref refid="portaudio_8h_1a1d79f0b88812cef5364b276dbbc898b5" kindref="member">paNonInterleaved</ref>)</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_8;</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_16;</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_24;</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_32;</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_1TO2_32f;</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"></highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca4a73cefc3d25fc95e94adf7b14ab3583" kindref="member">MIX_DIR__2TO1</ref>:</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="_export_p_c_m_8cpp_1a317afff57d87a89158c2b038d37b2b08" kindref="member">format</ref><sp/>&amp;<sp/>~<ref refid="portaudio_8h_1a1d79f0b88812cef5364b276dbbc898b5" kindref="member">paNonInterleaved</ref>)</highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_8;</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_16;</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_24;</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32;</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32f;</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"></highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca0858f41d4d725a8638f791327d303f33" kindref="member">MIX_DIR__2TO1_L</ref>:</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="_export_p_c_m_8cpp_1a317afff57d87a89158c2b038d37b2b08" kindref="member">format</ref><sp/>&amp;<sp/>~<ref refid="portaudio_8h_1a1d79f0b88812cef5364b276dbbc898b5" kindref="member">paNonInterleaved</ref>)</highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_8_L;</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_16_L;</highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_24_L;</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32_L;</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_MixMonoToStereo_2TO1_32f_L;</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"></highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1174"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"></highlight></codeline>
<codeline lineno="1176"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1177" refid="pa__win__hostapis_8c_1a56a0d6a3498d2ca95227d2e5c9975c40" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__win__wasapi_8c_1a56a0d6a3498d2ca95227d2e5c9975c40" kindref="member">PaWasapi_Initialize</ref>(<sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>**hostApi,<sp/><ref refid="portaudio_8h_1aeef6da084c57c70aa94be97411e19930" kindref="member">PaHostApiIndex</ref><sp/>hostApiIndex<sp/>)</highlight></codeline>
<codeline lineno="1178"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi;</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*deviceInfoArray;</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1a176c91c7707fe6b1747f16e43440be16" kindref="member">IMMDeviceCollection</ref>*<sp/>pEndPoints<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a36cb3b01d81ffd844bbbfb54003e06ec" kindref="member">UINT</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a36cb3b01d81ffd844bbbfb54003e06ec" kindref="member">UINT</ref><sp/>renderCount;</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a36cb3b01d81ffd844bbbfb54003e06ec" kindref="member">UINT</ref><sp/>devIndex;</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"></highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!SetupAVRT())</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>No<sp/>AVRT!<sp/>(not<sp/>VISTA?)&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"></highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/>paWasapi<sp/>=<sp/>(<ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*)<ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref>)<sp/>);</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1199"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(<sp/>paWasapi,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref>)<sp/>);<sp/></highlight><highlight class="comment">/*<sp/>ensure<sp/>all<sp/>fields<sp/>are<sp/>zeroed.<sp/>especially<sp/>paWasapi-&gt;allocations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1202"><highlight class="normal"></highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="pa__win__coinitialize_8c_1a9839b804bf6920677e3ef262ea5f9e75" kindref="member">PaWinUtil_CoInitialize</ref>(<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa27b155bf2883aef821dfb6eba89e456" kindref="member">paWASAPI</ref>,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aaaf9e88d3972658267845c5df3f1bd2b" kindref="member">comInitializationResult</ref><sp/>);</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>result<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>)</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"></highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref><sp/>=<sp/><ref refid="pa__allocation_8c_1a9cc7370b73e75f690ab0a0360e7fffee" kindref="member">PaUtil_CreateAllocationGroup</ref>();</highlight></codeline>
<codeline lineno="1210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="1213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1214"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1215"><highlight class="normal"></highlight></codeline>
<codeline lineno="1216"><highlight class="normal"><sp/><sp/><sp/><sp/>*hostApi<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" kindref="member">inheritedHostApiRep</ref>;</highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;<ref refid="struct_pa_util_host_api_representation_1a9c443aa6cf07d3c46167a91b274a9e94" kindref="member">info</ref>.<ref refid="struct_pa_host_api_info_1a1f3a8c465488e7af8024237256d80c14" kindref="member">structVersion</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;info.type<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa27b155bf2883aef821dfb6eba89e456" kindref="member">paWASAPI</ref>;</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;info.name<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Windows<sp/>WASAPI&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;info.deviceCount<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1221"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;info.defaultInputDevice<sp/><sp/>=<sp/><ref refid="portaudio_8h_1a8c26dd5e6f28bb4cda7a1f5460282297" kindref="member">paNoDevice</ref>;</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;info.defaultOutputDevice<sp/>=<sp/><ref refid="portaudio_8h_1a8c26dd5e6f28bb4cda7a1f5460282297" kindref="member">paNoDevice</ref>;</highlight></codeline>
<codeline lineno="1223"><highlight class="normal"></highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>CoCreateInstance(&amp;pa_CLSID_IMMDeviceEnumerator,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>CLSCTX_INPROC_SERVER,</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;pa_IID_IMMDeviceEnumerator,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref>);</highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"></highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>getting<sp/>default<sp/>device<sp/>ids<sp/>in<sp/>the<sp/>eMultimedia<sp/>&quot;role&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1a8d4cacf41e022eb8b6aed6231bcf54be" kindref="member">IMMDevice</ref><sp/>*defaultRenderer<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDeviceEnumerator_GetDefaultAudioEndpoint(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref>,<sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1ab5120fdebc73fe7c6de01e7db1e0526c" kindref="member">eRender</ref>,<sp/><ref refid="mmdeviceapi_8h_1ac407eff72c266e22ef2baef359f92aa8a29161d51f23790c49d20f27b72368d89" kindref="member">eMultimedia</ref>,<sp/>&amp;defaultRenderer);</highlight></codeline>
<codeline lineno="1237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/><ref refid="devicetopology_8h_1aaa1771c30a9d47c05446a786ae261814" kindref="member">E_NOTFOUND</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WCHAR<sp/>*pszDeviceId<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_GetId(defaultRenderer,<sp/>&amp;pszDeviceId);</highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wcsncpy(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a97f7bb4e7ccaab5658d3f2e339de7e4a" kindref="member">defaultRenderer</ref>,<sp/>pszDeviceId,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>-1);</highlight></codeline>
<codeline lineno="1253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoTaskMemFree(pszDeviceId);</highlight></codeline>
<codeline lineno="1254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IMMDevice_Release(defaultRenderer);</highlight></codeline>
<codeline lineno="1255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1257"><highlight class="normal"></highlight></codeline>
<codeline lineno="1258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1a8d4cacf41e022eb8b6aed6231bcf54be" kindref="member">IMMDevice</ref><sp/>*defaultCapturer<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDeviceEnumerator_GetDefaultAudioEndpoint(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref>,<sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1a421738c9647cd595b89d3793a3fb861c" kindref="member">eCapture</ref>,<sp/><ref refid="mmdeviceapi_8h_1ac407eff72c266e22ef2baef359f92aa8a29161d51f23790c49d20f27b72368d89" kindref="member">eMultimedia</ref>,<sp/>&amp;defaultCapturer);</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/><ref refid="devicetopology_8h_1aaa1771c30a9d47c05446a786ae261814" kindref="member">E_NOTFOUND</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WCHAR<sp/>*pszDeviceId<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_GetId(defaultCapturer,<sp/>&amp;pszDeviceId);</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wcsncpy(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a477fff22f034072694329b480fb8d8b8" kindref="member">defaultCapturer</ref>,<sp/>pszDeviceId,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>-1);</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoTaskMemFree(pszDeviceId);</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IMMDevice_Release(defaultCapturer);</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"></highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDeviceEnumerator_EnumAudioEndpoints(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref>,<sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1ab5120fdebc73fe7c6de01e7db1e0526c" kindref="member">eRender</ref>,<sp/><ref refid="mmdeviceapi_8h_1a087bbfbddb74bc5803caa28bb9c17fde" kindref="member">DEVICE_STATE_ACTIVE</ref>,<sp/>&amp;pEndPoints);</highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1287"><highlight class="normal"></highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDeviceCollection_GetCount(pEndPoints,<sp/>&amp;renderCount);</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"></highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pEndPoints);</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/>pEndPoints<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"></highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDeviceEnumerator_EnumAudioEndpoints(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref>,<sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1a0b21a6c698674dfdd9034d68751a4126" kindref="member">eAll</ref>,<sp/><ref refid="mmdeviceapi_8h_1a087bbfbddb74bc5803caa28bb9c17fde" kindref="member">DEVICE_STATE_ACTIVE</ref>,<sp/>&amp;pEndPoints);</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1299"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1300"><highlight class="normal"></highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDeviceCollection_GetCount(pEndPoints,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>);</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1305"><highlight class="normal"></highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref><sp/>+=<sp/>renderCount;</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"></highlight></codeline>
<codeline lineno="1308"><highlight class="normal"><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref><sp/>=<sp/>(<ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref><sp/>*)<ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref>)<sp/>*<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>);</highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i],<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref>));</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"></highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*hostApi)-&gt;deviceInfos<sp/>=<sp/>(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>**)<ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*)<sp/>*<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>);</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((*hostApi)-&gt;deviceInfos<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"></highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>allocate<sp/>all<sp/>device<sp/>info<sp/>structs<sp/>in<sp/>a<sp/>contiguous<sp/>block<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfoArray<sp/>=<sp/>(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*)<ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref>)<sp/>*<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>);</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(deviceInfoArray<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"></highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(devIndex<sp/>=<sp/>0,<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<sp/>++devIndex)</highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>state<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*deviceInfo<sp/><sp/>=<sp/>&amp;deviceInfoArray[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a2d726add4cd2af78a94c052b3a7df568" kindref="member">structVersion</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="1341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1afe741e4d185069577f7e74b78fdef5a4" kindref="member">hostApi</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>hostApiIndex;</highlight></codeline>
<codeline lineno="1342"><highlight class="normal"></highlight></codeline>
<codeline lineno="1343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>device<sp/>idx:<sp/>%02d\n&quot;</highlight><highlight class="normal">,<sp/>i));</highlight></codeline>
<codeline lineno="1344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>---------------\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="1345"><highlight class="normal"></highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDeviceCollection_Item(pEndPoints,<sp/>devIndex,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>);</highlight></codeline>
<codeline lineno="1347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1350"><highlight class="normal"></highlight></codeline>
<codeline lineno="1351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>getting<sp/>ID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WCHAR<sp/>*pszDeviceId<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_GetId(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>&amp;pszDeviceId);</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hr,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wcsncpy(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ab4eccd4b97f01c9d969e28568dc33a13" kindref="member">szDeviceID</ref>,<sp/>pszDeviceId,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>-1);</highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoTaskMemFree(pszDeviceId);</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"></highlight></codeline>
<codeline lineno="1361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="mapinls_8h_1a05386b7113c90ff0a591294f55fd190b" kindref="member">lstrcmpW</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ab4eccd4b97f01c9d969e28568dc33a13" kindref="member">szDeviceID</ref>,<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a477fff22f034072694329b480fb8d8b8" kindref="member">defaultCapturer</ref>)<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="comment">//<sp/>we<sp/>found<sp/>the<sp/>default<sp/>input!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*hostApi)-&gt;info.defaultInputDevice<sp/>=<sp/>(*hostApi)-&gt;info.deviceCount;</highlight></codeline>
<codeline lineno="1364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="mapinls_8h_1a05386b7113c90ff0a591294f55fd190b" kindref="member">lstrcmpW</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ab4eccd4b97f01c9d969e28568dc33a13" kindref="member">szDeviceID</ref>,<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a97f7bb4e7ccaab5658d3f2e339de7e4a" kindref="member">defaultRenderer</ref>)<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="comment">//<sp/>we<sp/>found<sp/>the<sp/>default<sp/>output!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*hostApi)-&gt;info.defaultOutputDevice<sp/>=<sp/>(*hostApi)-&gt;info.deviceCount;</highlight></codeline>
<codeline lineno="1368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"></highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_GetState(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a51051f47a56a2ba215784912fcc64f90" kindref="member">state</ref>);</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"></highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a51051f47a56a2ba215784912fcc64f90" kindref="member">state</ref><sp/>!=<sp/><ref refid="mmdeviceapi_8h_1a087bbfbddb74bc5803caa28bb9c17fde" kindref="member">DEVICE_STATE_ACTIVE</ref>)</highlight></codeline>
<codeline lineno="1377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI<sp/>device:<sp/>%d<sp/>is<sp/>not<sp/>currently<sp/>available<sp/>(state:%d)\n&quot;</highlight><highlight class="normal">,i,state));</highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1380"><highlight class="normal"></highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propsys_8h_1a65170341ea0bb1aca88c9925254a819f" kindref="member">IPropertyStore</ref><sp/>*pProperty;</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_OpenPropertyStore(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>STGM_READ,<sp/>&amp;pProperty);</highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1387"><highlight class="normal"></highlight></codeline>
<codeline lineno="1388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>&quot;Friendly&quot;<sp/>Name</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*deviceName;</highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1ae902c1757cd16052896846fa4ebb88d8" kindref="member">PROPVARIANT</ref><sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="1392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1ae1eba06838ce973cbf3fb5aa4c3b0ae2" kindref="member">PropVariantInit</ref>(&amp;value);</highlight></codeline>
<codeline lineno="1393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IPropertyStore_GetValue(pProperty,<sp/>&amp;PKEY_Device_FriendlyName,<sp/>&amp;value);</highlight></codeline>
<codeline lineno="1394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceName<sp/>=<sp/>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)<ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref><sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(deviceName<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="1402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(value.pwszVal)</highlight></codeline>
<codeline lineno="1405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad956dca1b4a4a170040564514e0bbb8f" kindref="member">WideCharToMultiByte</ref>(CP_UTF8,<sp/>0,<sp/>value.pwszVal,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)wcslen(value.pwszVal),<sp/>deviceName,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>-1,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_snprintf(deviceName,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>-1,<sp/></highlight><highlight class="stringliteral">&quot;baddev%d&quot;</highlight><highlight class="normal">,<sp/>i);</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref><sp/>=<sp/>deviceName;</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1a23ccd6bfa5874bdb3f7bf10a6e6bd59b" kindref="member">PropVariantClear</ref>(&amp;value);</highlight></codeline>
<codeline lineno="1410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:%d|<sp/>name[%s]\n&quot;</highlight><highlight class="normal">,<sp/>i,<sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref>));</highlight></codeline>
<codeline lineno="1411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1412"><highlight class="normal"></highlight></codeline>
<codeline lineno="1413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Default<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1ae902c1757cd16052896846fa4ebb88d8" kindref="member">PROPVARIANT</ref><sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1ae1eba06838ce973cbf3fb5aa4c3b0ae2" kindref="member">PropVariantInit</ref>(&amp;value);</highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IPropertyStore_GetValue(pProperty,<sp/>&amp;PKEY_AudioEngine_DeviceFormat,<sp/>&amp;value);</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>,<sp/>value.blob.pBlobData,<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>),<sp/>value.blob.cbSize));</highlight></codeline>
<codeline lineno="1422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>cleanup</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1a23ccd6bfa5874bdb3f7bf10a6e6bd59b" kindref="member">PropVariantClear</ref>(&amp;value);</highlight></codeline>
<codeline lineno="1424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1425"><highlight class="normal"></highlight></codeline>
<codeline lineno="1426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Formfactor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1ae902c1757cd16052896846fa4ebb88d8" kindref="member">PROPVARIANT</ref><sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="1429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1ae1eba06838ce973cbf3fb5aa4c3b0ae2" kindref="member">PropVariantInit</ref>(&amp;value);</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IPropertyStore_GetValue(pProperty,<sp/>&amp;PKEY_AudioEndpoint_FormFactor,<sp/>&amp;value);</highlight></codeline>
<codeline lineno="1431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1435"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#if<sp/>defined(DUMMYUNIONNAME)<sp/>&amp;&amp;<sp/>defined(NONAMELESSUNION)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>avoid<sp/>breaking<sp/>strict-aliasing<sp/>rules<sp/>in<sp/>such<sp/>line:<sp/>(EndpointFormFactor)(*((UINT<sp/>*)(((WORD<sp/>*)&amp;value.wReserved3)+1)));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a36cb3b01d81ffd844bbbfb54003e06ec" kindref="member">UINT</ref><sp/>v;</highlight></codeline>
<codeline lineno="1438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;v,<sp/>(((<ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref><sp/>*)&amp;value.wReserved3)+1),<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(v));</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1a39c131f0bf387fcda41fd1d736e87acb" kindref="member">formFactor</ref><sp/>=<sp/>(<ref refid="mmdeviceapi_8h_1aae2d97e980403d559aa89d27bdc8c080" kindref="member">EndpointFormFactor</ref>)v;</highlight></codeline>
<codeline lineno="1440"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1a39c131f0bf387fcda41fd1d736e87acb" kindref="member">formFactor</ref><sp/>=<sp/>(<ref refid="mmdeviceapi_8h_1aae2d97e980403d559aa89d27bdc8c080" kindref="member">EndpointFormFactor</ref>)value.uintVal;</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref></highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:%d|<sp/>form-factor[%d]\n&quot;</highlight><highlight class="normal">,<sp/>i,<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a39c131f0bf387fcda41fd1d736e87acb" kindref="member">formFactor</ref>));</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>cleanup</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="propidl_8h_1a23ccd6bfa5874bdb3f7bf10a6e6bd59b" kindref="member">PropVariantClear</ref>(&amp;value);</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1447"><highlight class="normal"></highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pProperty);</highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1450"><highlight class="normal"></highlight></codeline>
<codeline lineno="1451"><highlight class="normal"></highlight></codeline>
<codeline lineno="1452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Endpoint<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mmdeviceapi_8h_1a32d63499f58b0065348b8c09c18d9f36" kindref="member">IMMEndpoint</ref><sp/>*endpoint<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_QueryInterface(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>&amp;pa_IID_IMMEndpoint,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;endpoint);</highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(SUCCEEDED(hr))</highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMEndpoint_GetDataFlow(endpoint,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a58ad544b2b413b8bd19514e8d115ebb8" kindref="member">flow</ref>);</highlight></codeline>
<codeline lineno="1459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(endpoint);</highlight></codeline>
<codeline lineno="1460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1462"><highlight class="normal"></highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Getting<sp/>a<sp/>temporary<sp/>IAudioClient<sp/>for<sp/>more<sp/>fields</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>make<sp/>sure<sp/>NOT<sp/>to<sp/>call<sp/>Initialize<sp/>yet!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref><sp/>*tmpClient<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1467"><highlight class="normal"></highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>GetAudioClientIID(),</highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CLSCTX_INPROC_SERVER,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;tmpClient);</highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[IF_FAILED_JUMP(hResult,<sp/>error);]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a6ab838f91461092984ade025965e713e" kindref="member">IF_FAILED_INTERNAL_ERROR_JUMP</ref>(hr,<sp/>result,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="1473"><highlight class="normal"></highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetDevicePeriod(tmpClient,</highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>,</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" kindref="member">MinimumDevicePeriod</ref>);</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(FAILED(hr))</highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:%d|<sp/>failed<sp/>getting<sp/>min/default<sp/>periods<sp/>by<sp/>IAudioClient::GetDevicePeriod()<sp/>with<sp/>error[%08X],<sp/>will<sp/>use<sp/>30000/100000<sp/>hns\n&quot;</highlight><highlight class="normal">,<sp/>i,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)hr));</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"></highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>assign<sp/>WASAPI<sp/>common<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref><sp/>=<sp/>100000;</highlight></codeline>
<codeline lineno="1483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" kindref="member">MinimumDevicePeriod</ref><sp/>=<sp/>30000;</highlight></codeline>
<codeline lineno="1484"><highlight class="normal"></highlight></codeline>
<codeline lineno="1485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ignore<sp/>error,<sp/>let<sp/>continue<sp/>further<sp/>without<sp/>failing<sp/>with<sp/>paInternalError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"></highlight></codeline>
<codeline lineno="1489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//hr<sp/>=<sp/>tmpClient-&gt;GetMixFormat(&amp;paWasapi-&gt;devInfo[i].MixFormat);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1490"><highlight class="normal"></highlight></codeline>
<codeline lineno="1491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(tmpClient);</highlight></codeline>
<codeline lineno="1493"><highlight class="normal"></highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="1495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//davidv:<sp/>this<sp/>happened<sp/>with<sp/>my<sp/>hardware,<sp/>previously<sp/>for<sp/>that<sp/>same<sp/>device<sp/>in<sp/>DirectSound:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Digital<sp/>Output<sp/>(Realtek<sp/>AC&apos;97<sp/>Audio)&apos;s<sp/>GUID:<sp/>{0x38f2cf50,0x7b4c,0x4740,0x86,0xeb,0xd4,0x38,0x66,0xd8,0xc8,<sp/>0x9f}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//so<sp/>something<sp/>must<sp/>be<sp/>_really_<sp/>wrong<sp/>with<sp/>this<sp/>device,<sp/>TODO<sp/>handle<sp/>this<sp/>better.<sp/>We<sp/>kind<sp/>of<sp/>need<sp/>GetMixFormat</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="1500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;</highlight></codeline>
<codeline lineno="1502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1505"><highlight class="normal"></highlight></codeline>
<codeline lineno="1506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>can<sp/>now<sp/>fill<sp/>in<sp/>portaudio<sp/>device<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a68f435353bfe1a4c9b632203a9afcacb" kindref="member">defaultSampleRate</ref><sp/>=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>.Format.nSamplesPerSec;</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a58ad544b2b413b8bd19514e8d115ebb8" kindref="member">flow</ref>)</highlight></codeline>
<codeline lineno="1511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1ab5120fdebc73fe7c6de01e7db1e0526c" kindref="member">eRender</ref>:<sp/>{</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>.Format.nChannels;</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a2a43dbc2b158806a937065bda037070e" kindref="member">defaultHighOutputLatency</ref><sp/>=<sp/>nano100ToSeconds(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>);</highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a89e60515505eea8d668ede3a26a19ac6" kindref="member">defaultLowOutputLatency</ref><sp/><sp/>=<sp/>nano100ToSeconds(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" kindref="member">MinimumDevicePeriod</ref>);</highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:%d|<sp/>def.SR[%d]<sp/>max.CH[%d]<sp/>latency{hi[%f]<sp/>lo[%f]}\n&quot;</highlight><highlight class="normal">,<sp/>i,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)deviceInfo-&gt;<ref refid="struct_pa_device_info_1a68f435353bfe1a4c9b632203a9afcacb" kindref="member">defaultSampleRate</ref>,</highlight></codeline>
<codeline lineno="1517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)deviceInfo-&gt;<ref refid="struct_pa_device_info_1a2a43dbc2b158806a937065bda037070e" kindref="member">defaultHighOutputLatency</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)deviceInfo-&gt;<ref refid="struct_pa_device_info_1a89e60515505eea8d668ede3a26a19ac6" kindref="member">defaultLowOutputLatency</ref>));</highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;}</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1a421738c9647cd595b89d3793a3fb861c" kindref="member">eCapture</ref>:<sp/>{</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>.Format.nChannels;</highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a4214826038fcaf374beb9816024e6c9f" kindref="member">defaultHighInputLatency</ref><sp/>=<sp/>nano100ToSeconds(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>);</highlight></codeline>
<codeline lineno="1522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1aad6629064b8c7cf043d237ea0a5cc534" kindref="member">defaultLowInputLatency</ref><sp/><sp/>=<sp/>nano100ToSeconds(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" kindref="member">MinimumDevicePeriod</ref>);</highlight></codeline>
<codeline lineno="1523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:%d|<sp/>def.SR[%d]<sp/>max.CH[%d]<sp/>latency{hi[%f]<sp/>lo[%f]}\n&quot;</highlight><highlight class="normal">,<sp/>i,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)deviceInfo-&gt;<ref refid="struct_pa_device_info_1a68f435353bfe1a4c9b632203a9afcacb" kindref="member">defaultSampleRate</ref>,</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)deviceInfo-&gt;<ref refid="struct_pa_device_info_1a4214826038fcaf374beb9816024e6c9f" kindref="member">defaultHighInputLatency</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)deviceInfo-&gt;<ref refid="struct_pa_device_info_1aad6629064b8c7cf043d237ea0a5cc534" kindref="member">defaultLowInputLatency</ref>));</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:%d|<sp/>bad<sp/>Data<sp/>Flow!\n&quot;</highlight><highlight class="normal">,<sp/>i));</highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>need<sp/>to<sp/>set<sp/>the<sp/>result<sp/>to<sp/>a<sp/>value<sp/>otherwise<sp/>we<sp/>will<sp/>return<sp/>paNoError</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//continue;<sp/>//<sp/>do<sp/>not<sp/>skip<sp/>from<sp/>list,<sp/>allow<sp/>to<sp/>initialize</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"></highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*hostApi)-&gt;deviceInfos[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>=<sp/>deviceInfo;</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++(*hostApi)-&gt;info.deviceCount;</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"></highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1a58ad544b2b413b8bd19514e8d115ebb8" kindref="member">flow</ref><sp/>==<sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1ab5120fdebc73fe7c6de01e7db1e0526c" kindref="member">eRender</ref>)</highlight></codeline>
<codeline lineno="1538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*deviceName;</highlight></codeline>
<codeline lineno="1540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a36cb3b01d81ffd844bbbfb54003e06ec" kindref="member">UINT</ref><sp/>deviceNameLen;</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"></highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;deviceInfoArray[i<sp/>+<sp/>1],<sp/>deviceInfo,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*deviceInfo));</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i<sp/>+<sp/>1],<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i],<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>));</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"></highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i++;</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].<ref refid="struct_pa_wasapi_device_info_1af800b0c1a7565b47cbd38c553bfa317e" kindref="member">loopBack</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"></highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo<sp/>=<sp/>&amp;deviceInfoArray[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="1549"><highlight class="normal"></highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref>;</highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a4214826038fcaf374beb9816024e6c9f" kindref="member">defaultHighInputLatency</ref><sp/><sp/>=<sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a2a43dbc2b158806a937065bda037070e" kindref="member">defaultHighOutputLatency</ref>;</highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1aad6629064b8c7cf043d237ea0a5cc534" kindref="member">defaultLowInputLatency</ref><sp/><sp/><sp/>=<sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a89e60515505eea8d668ede3a26a19ac6" kindref="member">defaultLowOutputLatency</ref>;</highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a2a43dbc2b158806a937065bda037070e" kindref="member">defaultHighOutputLatency</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a89e60515505eea8d668ede3a26a19ac6" kindref="member">defaultLowOutputLatency</ref><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:%d|<sp/>def.SR[%d]<sp/>max.CH[%d]<sp/>latency{hi[%f]<sp/>lo[%f]}\n&quot;</highlight><highlight class="normal">,<sp/>i,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)deviceInfo-&gt;<ref refid="struct_pa_device_info_1a68f435353bfe1a4c9b632203a9afcacb" kindref="member">defaultSampleRate</ref>,</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)deviceInfo-&gt;<ref refid="struct_pa_device_info_1a4214826038fcaf374beb9816024e6c9f" kindref="member">defaultHighInputLatency</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)deviceInfo-&gt;<ref refid="struct_pa_device_info_1aad6629064b8c7cf043d237ea0a5cc534" kindref="member">defaultLowInputLatency</ref>));</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"></highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IMMDevice_AddRef(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[i].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>);</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"></highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceName<sp/>=<sp/>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)<ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref><sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(deviceName<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="1565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_snprintf(deviceName,<sp/><ref refid="pa__win__wasapi_8c_1a58ce36916c399104e18d32ff090f21c6" kindref="member">MAX_STR_LEN</ref>-1,<sp/></highlight><highlight class="stringliteral">&quot;%s<sp/>(loopback)&quot;</highlight><highlight class="normal">,<sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref>);</highlight></codeline>
<codeline lineno="1568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceInfo-&gt;<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref><sp/>=<sp/>deviceName;</highlight></codeline>
<codeline lineno="1569"><highlight class="normal"></highlight></codeline>
<codeline lineno="1570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*hostApi)-&gt;deviceInfos[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>=<sp/>deviceInfo;</highlight></codeline>
<codeline lineno="1571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++(*hostApi)-&gt;info.deviceCount;</highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1574"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"></highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;Terminate<sp/>=<sp/>Terminate;</highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;OpenStream<sp/>=<sp/>OpenStream;</highlight></codeline>
<codeline lineno="1578"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;IsFormatSupported<sp/>=<sp/>IsFormatSupported;</highlight></codeline>
<codeline lineno="1579"><highlight class="normal"></highlight></codeline>
<codeline lineno="1580"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a7ae912708e0bb060028f25e6f95333b7" kindref="member">PaUtil_InitializeStreamInterface</ref>(<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ab0a50b8957abc26a47c113ed33311a53" kindref="member">callbackStreamInterface</ref>,<sp/>CloseStream,<sp/>StartStream,</highlight></codeline>
<codeline lineno="1581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StopStream,<sp/>AbortStream,<sp/>IsStreamStopped,<sp/>IsStreamActive,</highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetStreamTime,<sp/>GetStreamCpuLoad,</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1ae7a66186864e1f27f9e274e1de562219" kindref="member">PaUtil_DummyRead</ref>,<sp/><ref refid="pa__stream_8c_1a827035da5bb7141143595519b0c0edc7" kindref="member">PaUtil_DummyWrite</ref>,</highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1aa43032a8fcb0d7b271f6049e4dc69e5c" kindref="member">PaUtil_DummyGetReadAvailable</ref>,<sp/><ref refid="pa__stream_8c_1aa4742249759bc11f31590db47cd19c2b" kindref="member">PaUtil_DummyGetWriteAvailable</ref><sp/>);</highlight></codeline>
<codeline lineno="1585"><highlight class="normal"></highlight></codeline>
<codeline lineno="1586"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a7ae912708e0bb060028f25e6f95333b7" kindref="member">PaUtil_InitializeStreamInterface</ref>(<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ace80cce61f9d475d6c4f2af80cb2933d" kindref="member">blockingStreamInterface</ref>,<sp/>CloseStream,<sp/>StartStream,</highlight></codeline>
<codeline lineno="1587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StopStream,<sp/>AbortStream,<sp/>IsStreamStopped,<sp/>IsStreamActive,</highlight></codeline>
<codeline lineno="1588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetStreamTime,<sp/><ref refid="pa__stream_8c_1aba19e5ce44bb3621b6ca257959c30b43" kindref="member">PaUtil_DummyGetCpuLoad</ref>,</highlight></codeline>
<codeline lineno="1589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__mac__core__blocking_8c_1a9e7f111c33d1e80f40473846864e84fa" kindref="member">ReadStream</ref>,<sp/><ref refid="pa__mac__core__blocking_8c_1a0cfb7772846808945bd521d23d5626eb" kindref="member">WriteStream</ref>,<sp/><ref refid="pa__mac__core__blocking_8c_1a82aa1e30985c7924247e8f45fc356d46" kindref="member">GetStreamReadAvailable</ref>,<sp/><ref refid="pa__mac__core__blocking_8c_1ad7ee6bd74b3109101f1eb4ca0514c8b0" kindref="member">GetStreamWriteAvailable</ref><sp/>);</highlight></codeline>
<codeline lineno="1590"><highlight class="normal"></highlight></codeline>
<codeline lineno="1591"><highlight class="normal"></highlight></codeline>
<codeline lineno="1592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>findout<sp/>if<sp/>platform<sp/>workaround<sp/>is<sp/>required</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1593"><highlight class="normal"><sp/><sp/><sp/><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a1fe6be6a2edf0292a0a3d6f55cf83fc6" kindref="member">useWOW64Workaround</ref><sp/>=<sp/>UseWOW64Workaround();</highlight></codeline>
<codeline lineno="1594"><highlight class="normal"></highlight></codeline>
<codeline lineno="1595"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pEndPoints);</highlight></codeline>
<codeline lineno="1596"><highlight class="normal"></highlight></codeline>
<codeline lineno="1597"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>initialized<sp/>ok\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="1598"><highlight class="normal"></highlight></codeline>
<codeline lineno="1599"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1600"><highlight class="normal"></highlight></codeline>
<codeline lineno="1601"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"></highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>failed<sp/>%s<sp/>error[%d|%s]\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,<sp/>result,<sp/><ref refid="portaudio_8h_1ae606855a611cf29c7d2d7421df5e3b5d" kindref="member">Pa_GetErrorText</ref>(result)));</highlight></codeline>
<codeline lineno="1604"><highlight class="normal"></highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pEndPoints);</highlight></codeline>
<codeline lineno="1606"><highlight class="normal"></highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/>Terminate((<ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*)paWasapi);</highlight></codeline>
<codeline lineno="1608"><highlight class="normal"></highlight></codeline>
<codeline lineno="1609"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Safety<sp/>if<sp/>error<sp/>was<sp/>not<sp/>set<sp/>so<sp/>that<sp/>we<sp/>do<sp/>not<sp/>think<sp/>initialize<sp/>was<sp/>a<sp/>success</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(result<sp/>==<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1613"><highlight class="normal"></highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1615"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1616"><highlight class="normal"></highlight></codeline>
<codeline lineno="1617"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1618"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Terminate(<sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi<sp/>)</highlight></codeline>
<codeline lineno="1619"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a36cb3b01d81ffd844bbbfb54003e06ec" kindref="member">UINT</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="1621"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi<sp/>=<sp/>(<ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1624"><highlight class="normal"></highlight></codeline>
<codeline lineno="1625"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>IMMDeviceEnumerator</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1626"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a550fc0e31be4a4f1013f921b18469fb8" kindref="member">enumerator</ref>);</highlight></codeline>
<codeline lineno="1627"><highlight class="normal"></highlight></codeline>
<codeline lineno="1628"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)</highlight></codeline>
<codeline lineno="1629"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref><sp/>*<ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref><sp/>=<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="1631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(info-&gt;<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>);</highlight></codeline>
<codeline lineno="1632"><highlight class="normal"></highlight></codeline>
<codeline lineno="1633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>(info-&gt;MixFormat)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>CoTaskMemFree(info-&gt;MixFormat);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1635"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1636"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>);</highlight></codeline>
<codeline lineno="1637"><highlight class="normal"></highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>)</highlight></codeline>
<codeline lineno="1639"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__allocation_8c_1aa83a07899e8db63d415d03f68b1f8a3d" kindref="member">PaUtil_FreeAllAllocations</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>);</highlight></codeline>
<codeline lineno="1641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__allocation_8c_1aefcb1143eaa768c2b555bd203f1c9deb" kindref="member">PaUtil_DestroyAllocationGroup</ref>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a618f5cbefb32d51edcda7dd12905ddf2" kindref="member">allocations</ref>);</highlight></codeline>
<codeline lineno="1642"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1643"><highlight class="normal"></highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__coinitialize_8c_1adf8a7e487441c8b976cf6fadbc830d7e" kindref="member">PaWinUtil_CoUninitialize</ref>(<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa27b155bf2883aef821dfb6eba89e456" kindref="member">paWASAPI</ref>,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aaaf9e88d3972658267845c5df3f1bd2b" kindref="member">comInitializationResult</ref><sp/>);</highlight></codeline>
<codeline lineno="1645"><highlight class="normal"></highlight></codeline>
<codeline lineno="1646"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(paWasapi);</highlight></codeline>
<codeline lineno="1647"><highlight class="normal"></highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Close<sp/>AVRT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1649"><highlight class="normal"><sp/><sp/><sp/><sp/>CloseAVRT();</highlight></codeline>
<codeline lineno="1650"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1651"><highlight class="normal"></highlight></codeline>
<codeline lineno="1652"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1653"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*_GetHostApi(<ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>*_error)</highlight></codeline>
<codeline lineno="1654"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1655"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1656"><highlight class="normal"></highlight></codeline>
<codeline lineno="1657"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*pApi;</highlight></codeline>
<codeline lineno="1658"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((error<sp/>=<sp/><ref refid="pa__front_8c_1a41956cda7a9cc69dd178425551a44cbe" kindref="member">PaUtil_GetHostApiRepresentation</ref>(&amp;pApi,<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa27b155bf2883aef821dfb6eba89e456" kindref="member">paWASAPI</ref>))<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="1659"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_error<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*_error)<sp/>=<sp/>error;</highlight></codeline>
<codeline lineno="1662"><highlight class="normal"></highlight></codeline>
<codeline lineno="1663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1664"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1665"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*)pApi;</highlight></codeline>
<codeline lineno="1666"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1667"><highlight class="normal"></highlight></codeline>
<codeline lineno="1668"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1669" refid="pa__win__wasapi_8c_1aa42c66da0ae19959d25a190e9dd82005" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1aa42c66da0ae19959d25a190e9dd82005" kindref="member">PaWasapi_GetDeviceDefaultFormat</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*pFormat,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nFormatSize,<sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>nDevice<sp/>)</highlight></codeline>
<codeline lineno="1670"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ret;</highlight></codeline>
<codeline lineno="1672"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi;</highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="1674"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>index;</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"></highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pFormat<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a8679fc0a41ce0517d89a53b9c182a4b8" kindref="member">paBadBufferPtr</ref>;</highlight></codeline>
<codeline lineno="1678"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nFormatSize<sp/>&lt;=<sp/>0)</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a0711883755e19ee598cefa1db34d98cb" kindref="member">paBufferTooSmall</ref>;</highlight></codeline>
<codeline lineno="1680"><highlight class="normal"></highlight></codeline>
<codeline lineno="1681"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>API</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1682"><highlight class="normal"><sp/><sp/><sp/><sp/>paWasapi<sp/>=<sp/>_GetHostApi(&amp;ret);</highlight></codeline>
<codeline lineno="1683"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1685"><highlight class="normal"></highlight></codeline>
<codeline lineno="1686"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>device<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1687"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="pa__front_8c_1a07ed030327e33935a807f671f4840936" kindref="member">PaUtil_DeviceIndexToHostApiDeviceIndex</ref>(&amp;index,<sp/>nDevice,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" kindref="member">inheritedHostApiRep</ref>);</highlight></codeline>
<codeline lineno="1688"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="1689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1690"><highlight class="normal"></highlight></codeline>
<codeline lineno="1691"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)index<sp/>&gt;=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>)</highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="1694"><highlight class="normal"></highlight></codeline>
<codeline lineno="1695"><highlight class="normal"><sp/><sp/><sp/><sp/>size<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>(nFormatSize,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<sp/>index<sp/>].<ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>));</highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(pFormat,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<sp/>index<sp/>].<ref refid="struct_pa_wasapi_device_info_1a68b444dda6b3735f450435b7d0085791" kindref="member">DefaultFormat</ref>,<sp/>size);</highlight></codeline>
<codeline lineno="1697"><highlight class="normal"></highlight></codeline>
<codeline lineno="1698"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="1699"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1700"><highlight class="normal"></highlight></codeline>
<codeline lineno="1701"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1702" refid="pa__win__wasapi_8c_1a6a8c5307dff661ae7ee0d7bb8bf73469" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a6a8c5307dff661ae7ee0d7bb8bf73469" kindref="member">PaWasapi_GetDeviceRole</ref>(<sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>nDevice<sp/>)</highlight></codeline>
<codeline lineno="1703"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1704"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ret;</highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>index;</highlight></codeline>
<codeline lineno="1706"><highlight class="normal"></highlight></codeline>
<codeline lineno="1707"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>API</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1708"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi<sp/>=<sp/>_GetHostApi(&amp;ret);</highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a12769658a78482b4265673f7c08fbb57" kindref="member">paNotInitialized</ref>;</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"></highlight></codeline>
<codeline lineno="1712"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>device<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="pa__front_8c_1a07ed030327e33935a807f671f4840936" kindref="member">PaUtil_DeviceIndexToHostApiDeviceIndex</ref>(&amp;index,<sp/>nDevice,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" kindref="member">inheritedHostApiRep</ref>);</highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1716"><highlight class="normal"></highlight></codeline>
<codeline lineno="1717"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1718"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)index<sp/>&gt;=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>)</highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="1720"><highlight class="normal"></highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<sp/>index<sp/>].<ref refid="struct_pa_wasapi_device_info_1a39c131f0bf387fcda41fd1d736e87acb" kindref="member">formFactor</ref>;</highlight></codeline>
<codeline lineno="1722"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"></highlight></codeline>
<codeline lineno="1724"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1725" refid="pa__win__wasapi_8c_1a2ed6fd7668a8395be51d661b99b74ae6" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">wchar_t</highlight><highlight class="normal"><sp/>*<ref refid="pa__win__wasapi_8c_1a2ed6fd7668a8395be51d661b99b74ae6" kindref="member">PaWasapi_GetInputDeviceID</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="1726"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)s;</highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1731"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref>)</highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref>-&gt;<ref refid="struct_pa_wasapi_device_info_1ab4eccd4b97f01c9d969e28568dc33a13" kindref="member">szDeviceID</ref>;</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"></highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1735"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1736"><highlight class="normal"></highlight></codeline>
<codeline lineno="1737"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1738" refid="pa__win__wasapi_8c_1a07d58f9548d783818bd617128761545f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">wchar_t</highlight><highlight class="normal"><sp/>*<ref refid="pa__win__wasapi_8c_1a07d58f9548d783818bd617128761545f" kindref="member">PaWasapi_GetOutputDeviceID</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="1739"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)s;</highlight></codeline>
<codeline lineno="1741"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1743"><highlight class="normal"></highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref>)</highlight></codeline>
<codeline lineno="1745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref>-&gt;<ref refid="struct_pa_wasapi_device_info_1ab4eccd4b97f01c9d969e28568dc33a13" kindref="member">szDeviceID</ref>;</highlight></codeline>
<codeline lineno="1746"><highlight class="normal"></highlight></codeline>
<codeline lineno="1747"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1748"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1749"><highlight class="normal"></highlight></codeline>
<codeline lineno="1750"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1751" refid="pa__win__wasapi_8c_1a15bf85dfb80dc090cf03550be6ab054b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a15bf85dfb80dc090cf03550be6ab054b" kindref="member">PaWasapi_IsLoopback</ref>(<sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>nDevice<sp/>)</highlight></codeline>
<codeline lineno="1752"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ret;</highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>index;</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"></highlight></codeline>
<codeline lineno="1756"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>API</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi<sp/>=<sp/>_GetHostApi(&amp;ret);</highlight></codeline>
<codeline lineno="1758"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a12769658a78482b4265673f7c08fbb57" kindref="member">paNotInitialized</ref>;</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"></highlight></codeline>
<codeline lineno="1761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>device<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1762"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="pa__front_8c_1a07ed030327e33935a807f671f4840936" kindref="member">PaUtil_DeviceIndexToHostApiDeviceIndex</ref>(&amp;index,<sp/>nDevice,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" kindref="member">inheritedHostApiRep</ref>);</highlight></codeline>
<codeline lineno="1763"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="1764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1765"><highlight class="normal"></highlight></codeline>
<codeline lineno="1766"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)index<sp/>&gt;=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>)</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="1769"><highlight class="normal"></highlight></codeline>
<codeline lineno="1770"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[<sp/>index<sp/>].<ref refid="struct_pa_wasapi_device_info_1af800b0c1a7565b47cbd38c553bfa317e" kindref="member">loopBack</ref>;</highlight></codeline>
<codeline lineno="1771"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1772"><highlight class="normal"></highlight></codeline>
<codeline lineno="1773"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1774" refid="pa__win__wasapi_8c_1af8f04003c6123e6fdcfdf7308761a75e" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__win__wasapi_8c_1af8f04003c6123e6fdcfdf7308761a75e" kindref="member">PaWasapi_GetFramesPerHostBuffer</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*pStream,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*nInput,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*nOutput<sp/>)</highlight></codeline>
<codeline lineno="1775"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)pStream;</highlight></codeline>
<codeline lineno="1777"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aef50bc6456d8bcbd94d1690dfb8d447a" kindref="member">paBadStreamPtr</ref>;</highlight></codeline>
<codeline lineno="1779"><highlight class="normal"></highlight></codeline>
<codeline lineno="1780"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nInput<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*nInput)<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>;</highlight></codeline>
<codeline lineno="1782"><highlight class="normal"></highlight></codeline>
<codeline lineno="1783"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nOutput<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*nOutput)<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>;</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"></highlight></codeline>
<codeline lineno="1786"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1787"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1788"><highlight class="normal"></highlight></codeline>
<codeline lineno="1789"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1790"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>LogWAVEFORMATEXTENSIBLE(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>WAVEFORMATEXTENSIBLE<sp/>*<ref refid="1-single-block_8c_1a18b1d64a94008e3c56953d279b8095e2" kindref="member">in</ref>)</highlight></codeline>
<codeline lineno="1791"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>WAVEFORMATEX<sp/>*<ref refid="namespacewaflib_1_1_utils_1ac5e167303eb0d1a7a20df3daf91a264c" kindref="member">old</ref><sp/>=<sp/>(WAVEFORMATEX<sp/>*)in;</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(old-&gt;wFormatTag)</highlight></codeline>
<codeline lineno="1794"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="wav__w64_8h_1ac6bfa7273251ec8fc11ef21ca645ad90a8845fd4ea11ad20253cb9008e1192c96" kindref="member">WAVE_FORMAT_EXTENSIBLE</ref>:<sp/>{</highlight></codeline>
<codeline lineno="1796"><highlight class="normal"></highlight></codeline>
<codeline lineno="1797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;wFormatTag<sp/><sp/><sp/><sp/><sp/>=WAVE_FORMAT_EXTENSIBLE\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="1798"><highlight class="normal"></highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsEqualGUID(&amp;in-&gt;SubFormat,<sp/>&amp;pa_KSDATAFORMAT_SUBTYPE_IEEE_FLOAT))</highlight></codeline>
<codeline lineno="1800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;SubFormat<sp/><sp/><sp/><sp/><sp/><sp/>=KSDATAFORMAT_SUBTYPE_IEEE_FLOAT\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="1802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsEqualGUID(&amp;in-&gt;SubFormat,<sp/>&amp;pa_KSDATAFORMAT_SUBTYPE_PCM))</highlight></codeline>
<codeline lineno="1805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;SubFormat<sp/><sp/><sp/><sp/><sp/><sp/>=KSDATAFORMAT_SUBTYPE_PCM\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="1807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;SubFormat<sp/><sp/><sp/><sp/><sp/><sp/>=CUSTOM<sp/>GUID{%d:%d:%d:%d%d%d%d%d%d%d%d}\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>in-&gt;SubFormat.Data1,</highlight></codeline>
<codeline lineno="1812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>in-&gt;SubFormat.Data2,</highlight></codeline>
<codeline lineno="1813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>in-&gt;SubFormat.Data3,</highlight></codeline>
<codeline lineno="1814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[0],</highlight></codeline>
<codeline lineno="1815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[1],</highlight></codeline>
<codeline lineno="1816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[2],</highlight></codeline>
<codeline lineno="1817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[3],</highlight></codeline>
<codeline lineno="1818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[4],</highlight></codeline>
<codeline lineno="1819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[5],</highlight></codeline>
<codeline lineno="1820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[6],</highlight></codeline>
<codeline lineno="1821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)in-&gt;SubFormat.Data4[7]));</highlight></codeline>
<codeline lineno="1822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;Samples.wValidBitsPerSample<sp/>=%d\n&quot;</highlight><highlight class="normal">,<sp/><sp/>in-&gt;Samples.wValidBitsPerSample));</highlight></codeline>
<codeline lineno="1824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;dwChannelMask<sp/><sp/>=0x%X\n&quot;</highlight><highlight class="normal">,in-&gt;dwChannelMask));</highlight></codeline>
<codeline lineno="1825"><highlight class="normal"></highlight></codeline>
<codeline lineno="1826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="1827"><highlight class="normal"></highlight></codeline>
<codeline lineno="1828"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="wav__w64_8h_1ac6bfa7273251ec8fc11ef21ca645ad90a16e7ae31fde201d5d97243c1b8dd4b7c" kindref="member">WAVE_FORMAT_PCM</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;wFormatTag<sp/><sp/><sp/><sp/><sp/>=WAVE_FORMAT_PCM\n&quot;</highlight><highlight class="normal">));<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1829"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a37d17ddda1e36eb0f54d80a946b897f0" kindref="member">WAVE_FORMAT_IEEE_FLOAT</ref>:<sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;wFormatTag<sp/><sp/><sp/><sp/><sp/>=WAVE_FORMAT_IEEE_FLOAT\n&quot;</highlight><highlight class="normal">));<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:<sp/></highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;wFormatTag<sp/><sp/><sp/><sp/><sp/>=UNKNOWN(%d)\n&quot;</highlight><highlight class="normal">,old-&gt;wFormatTag));<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1832"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"></highlight></codeline>
<codeline lineno="1834"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;nChannels<sp/><sp/><sp/><sp/><sp/><sp/>=%d\n&quot;</highlight><highlight class="normal">,old-&gt;nChannels));</highlight></codeline>
<codeline lineno="1835"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;nSamplesPerSec<sp/>=%d\n&quot;</highlight><highlight class="normal">,old-&gt;nSamplesPerSec));</highlight></codeline>
<codeline lineno="1836"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;nAvgBytesPerSec=%d\n&quot;</highlight><highlight class="normal">,old-&gt;nAvgBytesPerSec));</highlight></codeline>
<codeline lineno="1837"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;nBlockAlign<sp/><sp/><sp/><sp/>=%d\n&quot;</highlight><highlight class="normal">,old-&gt;nBlockAlign));</highlight></codeline>
<codeline lineno="1838"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;wBitsPerSample<sp/>=%d\n&quot;</highlight><highlight class="normal">,old-&gt;wBitsPerSample));</highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;cbSize<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=%d\n&quot;</highlight><highlight class="normal">,old-&gt;cbSize));</highlight></codeline>
<codeline lineno="1840"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1841"><highlight class="normal"></highlight></codeline>
<codeline lineno="1842"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1843"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>WaveToPaFormat(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>WAVEFORMATEXTENSIBLE<sp/>*<ref refid="1-single-block_8c_1a18b1d64a94008e3c56953d279b8095e2" kindref="member">in</ref>)</highlight></codeline>
<codeline lineno="1844"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1845"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>WAVEFORMATEX<sp/>*<ref refid="namespacewaflib_1_1_utils_1ac5e167303eb0d1a7a20df3daf91a264c" kindref="member">old</ref><sp/>=<sp/>(WAVEFORMATEX<sp/>*)in;</highlight></codeline>
<codeline lineno="1846"><highlight class="normal"></highlight></codeline>
<codeline lineno="1847"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(old-&gt;wFormatTag)</highlight></codeline>
<codeline lineno="1848"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1849"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="wav__w64_8h_1ac6bfa7273251ec8fc11ef21ca645ad90a8845fd4ea11ad20253cb9008e1192c96" kindref="member">WAVE_FORMAT_EXTENSIBLE</ref>:<sp/>{</highlight></codeline>
<codeline lineno="1850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsEqualGUID(&amp;in-&gt;SubFormat,<sp/>&amp;pa_KSDATAFORMAT_SUBTYPE_IEEE_FLOAT))</highlight></codeline>
<codeline lineno="1851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(in-&gt;Samples.wValidBitsPerSample<sp/>==<sp/>32)</highlight></codeline>
<codeline lineno="1853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>;</highlight></codeline>
<codeline lineno="1854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsEqualGUID(&amp;in-&gt;SubFormat,<sp/>&amp;pa_KSDATAFORMAT_SUBTYPE_PCM))</highlight></codeline>
<codeline lineno="1857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(old-&gt;wBitsPerSample)</highlight></codeline>
<codeline lineno="1859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>32:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>;</highlight></codeline>
<codeline lineno="1861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>24:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>;</highlight></codeline>
<codeline lineno="1862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><sp/>8:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>;</highlight></codeline>
<codeline lineno="1863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>16:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>;</highlight></codeline>
<codeline lineno="1864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="1867"><highlight class="normal"></highlight></codeline>
<codeline lineno="1868"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a37d17ddda1e36eb0f54d80a946b897f0" kindref="member">WAVE_FORMAT_IEEE_FLOAT</ref>:</highlight></codeline>
<codeline lineno="1869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>;</highlight></codeline>
<codeline lineno="1870"><highlight class="normal"></highlight></codeline>
<codeline lineno="1871"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="wav__w64_8h_1ac6bfa7273251ec8fc11ef21ca645ad90a16e7ae31fde201d5d97243c1b8dd4b7c" kindref="member">WAVE_FORMAT_PCM</ref>:<sp/>{</highlight></codeline>
<codeline lineno="1872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(old-&gt;wBitsPerSample)</highlight></codeline>
<codeline lineno="1873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>32:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>;</highlight></codeline>
<codeline lineno="1875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>24:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>;</highlight></codeline>
<codeline lineno="1876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><sp/>8:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>;</highlight></codeline>
<codeline lineno="1877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>16:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>;</highlight></codeline>
<codeline lineno="1878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="1880"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1881"><highlight class="normal"></highlight></codeline>
<codeline lineno="1882"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1aba595f6b645c8134a8ac3004957b9ff7" kindref="member">paCustomFormat</ref>;</highlight></codeline>
<codeline lineno="1883"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1884"><highlight class="normal"></highlight></codeline>
<codeline lineno="1885"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1886"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>MakeWaveFormatFromParams(WAVEFORMATEXTENSIBLE<sp/>*wavex,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*<ref refid="_reverb_8cpp_1aacc5617877d2aa4d17c729c1c8ba4eec" kindref="member">params</ref>,</highlight></codeline>
<codeline lineno="1887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>)</highlight></codeline>
<codeline lineno="1888"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1889"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref><sp/>bitsPerSample;</highlight></codeline>
<codeline lineno="1890"><highlight class="normal"><sp/><sp/><sp/><sp/>WAVEFORMATEX<sp/>*<ref refid="namespacewaflib_1_1_utils_1ac5e167303eb0d1a7a20df3daf91a264c" kindref="member">old</ref>;</highlight></codeline>
<codeline lineno="1891"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>channelMask<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1892"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*streamInfo<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*)params-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="1893"><highlight class="normal"></highlight></codeline>
<codeline lineno="1894"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>user<sp/>assigned<sp/>channel<sp/>mask</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1895"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>((streamInfo<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;<sp/>(streamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beaf3f72a69e5c4f62c22496328805be67e" kindref="member">paWinWasapiUseChannelMask</ref>))</highlight></codeline>
<codeline lineno="1896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>channelMask<sp/>=<sp/>streamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a3e893ff6c6f81fb7171ac325136a7dd1" kindref="member">channelMask</ref>;</highlight></codeline>
<codeline lineno="1897"><highlight class="normal"></highlight></codeline>
<codeline lineno="1898"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>PaSampleFormat<sp/>to<sp/>bits<sp/>per<sp/>sample</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1899"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((bitsPerSample<sp/>=<sp/>PaSampleFormatToBitsPerSample(params-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref>))<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="1900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="1901"><highlight class="normal"></highlight></codeline>
<codeline lineno="1902"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(wavex,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*wavex));</highlight></codeline>
<codeline lineno="1903"><highlight class="normal"></highlight></codeline>
<codeline lineno="1904"><highlight class="normal"><sp/><sp/><sp/><sp/>old<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(WAVEFORMATEX<sp/>*)wavex;</highlight></codeline>
<codeline lineno="1905"><highlight class="normal"><sp/><sp/><sp/><sp/>old-&gt;nChannels<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(<ref refid="twolame_2libtwolame_2common_8h_1a4cfc63e05db4883dc4b60a1245a9ffc5" kindref="member">WORD</ref>)params-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>;</highlight></codeline>
<codeline lineno="1906"><highlight class="normal"><sp/><sp/><sp/><sp/>old-&gt;nSamplesPerSec<sp/><sp/>=<sp/>(<ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref>)<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="1907"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((old-&gt;wBitsPerSample<sp/>=<sp/>bitsPerSample)<sp/>&gt;<sp/>16)</highlight></codeline>
<codeline lineno="1908"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old-&gt;wBitsPerSample<sp/>=<sp/>32;<sp/></highlight><highlight class="comment">//<sp/>20<sp/>or<sp/>24<sp/>bits<sp/>must<sp/>go<sp/>in<sp/>32<sp/>bit<sp/>containers<sp/>(ints)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1910"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1911"><highlight class="normal"><sp/><sp/><sp/><sp/>old-&gt;nBlockAlign<sp/><sp/><sp/><sp/><sp/>=<sp/>(old-&gt;nChannels<sp/>*<sp/>(old-&gt;wBitsPerSample/8));</highlight></codeline>
<codeline lineno="1912"><highlight class="normal"><sp/><sp/><sp/><sp/>old-&gt;nAvgBytesPerSec<sp/>=<sp/>(old-&gt;nSamplesPerSec<sp/>*<sp/>old-&gt;nBlockAlign);</highlight></codeline>
<codeline lineno="1913"><highlight class="normal"></highlight></codeline>
<codeline lineno="1914"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>WAVEFORMATEX</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1915"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((params-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>&lt;=<sp/>2)<sp/>&amp;&amp;<sp/>((bitsPerSample<sp/>==<sp/>16)<sp/>||<sp/>(bitsPerSample<sp/>==<sp/>8)))</highlight></codeline>
<codeline lineno="1916"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old-&gt;cbSize<sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old-&gt;wFormatTag<sp/>=<sp/><ref refid="wav__w64_8h_1ac6bfa7273251ec8fc11ef21ca645ad90a16e7ae31fde201d5d97243c1b8dd4b7c" kindref="member">WAVE_FORMAT_PCM</ref>;</highlight></codeline>
<codeline lineno="1919"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1920"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>WAVEFORMATEXTENSIBLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1921"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1922"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old-&gt;wFormatTag<sp/>=<sp/><ref refid="wav__w64_8h_1ac6bfa7273251ec8fc11ef21ca645ad90a8845fd4ea11ad20253cb9008e1192c96" kindref="member">WAVE_FORMAT_EXTENSIBLE</ref>;</highlight></codeline>
<codeline lineno="1924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old-&gt;cbSize<sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(WAVEFORMATEXTENSIBLE)<sp/>-<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(WAVEFORMATEX);</highlight></codeline>
<codeline lineno="1925"><highlight class="normal"></highlight></codeline>
<codeline lineno="1926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((params-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>&amp;<sp/>~<ref refid="portaudio_8h_1a1d79f0b88812cef5364b276dbbc898b5" kindref="member">paNonInterleaved</ref>)<sp/>==<sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>)</highlight></codeline>
<codeline lineno="1927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wavex-&gt;SubFormat<sp/>=<sp/>pa_KSDATAFORMAT_SUBTYPE_IEEE_FLOAT;</highlight></codeline>
<codeline lineno="1928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wavex-&gt;SubFormat<sp/>=<sp/>pa_KSDATAFORMAT_SUBTYPE_PCM;</highlight></codeline>
<codeline lineno="1930"><highlight class="normal"></highlight></codeline>
<codeline lineno="1931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wavex-&gt;Samples.wValidBitsPerSample<sp/>=<sp/>bitsPerSample;<sp/></highlight><highlight class="comment">//no<sp/>extra<sp/>padding!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1932"><highlight class="normal"></highlight></codeline>
<codeline lineno="1933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>channel<sp/>mask</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(channelMask<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="1935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/>channelMask;</highlight></codeline>
<codeline lineno="1937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(params-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>)</highlight></codeline>
<codeline lineno="1941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1a4fcbc62c06f01f3c2b65f8b3f9bb6c33" kindref="member">KSAUDIO_SPEAKER_MONO</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1ad538d591f9f2cb7e83824f8aa831799e" kindref="member">KSAUDIO_SPEAKER_STEREO</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1ad538d591f9f2cb7e83824f8aa831799e" kindref="member">KSAUDIO_SPEAKER_STEREO</ref>|<ref refid="ksmedia_8h_1ae7d80b89beb1f40a953ef8fccaabb30d" kindref="member">SPEAKER_LOW_FREQUENCY</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1a6536cb7c29d37372ab9a51fd9ef046bb" kindref="member">KSAUDIO_SPEAKER_QUAD</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>5:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1a6536cb7c29d37372ab9a51fd9ef046bb" kindref="member">KSAUDIO_SPEAKER_QUAD</ref>|<ref refid="ksmedia_8h_1ae7d80b89beb1f40a953ef8fccaabb30d" kindref="member">SPEAKER_LOW_FREQUENCY</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1947"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>KSAUDIO_SPEAKER_5POINT1_SURROUND</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>6:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1a0086c050163e1d5a6a096eba7deb6217" kindref="member">KSAUDIO_SPEAKER_5POINT1_SURROUND</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1949"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>6:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1a536671df845ca99be28200e3b62f096c" kindref="member">KSAUDIO_SPEAKER_5POINT1</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1951"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1952"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>KSAUDIO_SPEAKER_5POINT1_SURROUND</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>7:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1a0086c050163e1d5a6a096eba7deb6217" kindref="member">KSAUDIO_SPEAKER_5POINT1_SURROUND</ref>|<ref refid="ksmedia_8h_1a900f63f00687c0a3aa0becc34cf99403" kindref="member">SPEAKER_BACK_CENTER</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1954"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>7:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1a536671df845ca99be28200e3b62f096c" kindref="member">KSAUDIO_SPEAKER_5POINT1</ref>|<ref refid="ksmedia_8h_1a900f63f00687c0a3aa0becc34cf99403" kindref="member">SPEAKER_BACK_CENTER</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1956"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1957"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>KSAUDIO_SPEAKER_7POINT1_SURROUND</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>8:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1ae63d525722541d69a9031eb66336496d" kindref="member">KSAUDIO_SPEAKER_7POINT1_SURROUND</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1959"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>8:<sp/><sp/>wavex-&gt;dwChannelMask<sp/>=<sp/><ref refid="ksmedia_8h_1aec28e84213f9cf168ee888f572d336f1" kindref="member">KSAUDIO_SPEAKER_7POINT1</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1961"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1962"><highlight class="normal"></highlight></codeline>
<codeline lineno="1963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:<sp/>wavex-&gt;dwChannelMask<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1966"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1967"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1968"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1969"><highlight class="normal"></highlight></codeline>
<codeline lineno="1970"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1971"><highlight class="normal"></highlight><highlight class="comment">/*static<sp/>void<sp/>wasapiFillWFEXT(<sp/>WAVEFORMATEXTENSIBLE*<sp/>pwfext,<sp/>PaSampleFormat<sp/>sampleFormat,<sp/>double<sp/>sampleRate,<sp/>int<sp/>channelCount)</highlight></codeline>
<codeline lineno="1972"><highlight class="comment">{</highlight></codeline>
<codeline lineno="1973"><highlight class="comment"><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;sampleFormat<sp/>=<sp/>%lx\n&quot;<sp/>,<sp/>sampleFormat<sp/>));</highlight></codeline>
<codeline lineno="1974"><highlight class="comment"><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;sampleRate<sp/>=<sp/>%f\n&quot;<sp/>,<sp/>sampleRate<sp/>));</highlight></codeline>
<codeline lineno="1975"><highlight class="comment"><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;chanelCount<sp/>=<sp/>%d\n&quot;,<sp/>channelCount<sp/>));</highlight></codeline>
<codeline lineno="1976"><highlight class="comment"></highlight></codeline>
<codeline lineno="1977"><highlight class="comment"><sp/><sp/><sp/><sp/>pwfext-&gt;Format.wFormatTag<sp/>=<sp/>WAVE_FORMAT_EXTENSIBLE;</highlight></codeline>
<codeline lineno="1978"><highlight class="comment"><sp/><sp/><sp/><sp/>pwfext-&gt;Format.nChannels<sp/>=<sp/>(WORD)channelCount;</highlight></codeline>
<codeline lineno="1979"><highlight class="comment"><sp/><sp/><sp/><sp/>pwfext-&gt;Format.nSamplesPerSec<sp/>=<sp/>(DWORD)sampleRate;</highlight></codeline>
<codeline lineno="1980"><highlight class="comment"><sp/><sp/><sp/><sp/>if(channelCount<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="1981"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;dwChannelMask<sp/>=<sp/>KSAUDIO_SPEAKER_DIRECTOUT;</highlight></codeline>
<codeline lineno="1982"><highlight class="comment"><sp/><sp/><sp/><sp/>else</highlight></codeline>
<codeline lineno="1983"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;dwChannelMask<sp/>=<sp/>KSAUDIO_SPEAKER_STEREO;</highlight></codeline>
<codeline lineno="1984"><highlight class="comment"><sp/><sp/><sp/><sp/>if(sampleFormat<sp/>==<sp/>paFloat32)</highlight></codeline>
<codeline lineno="1985"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1986"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.nBlockAlign<sp/>=<sp/>(WORD)(channelCount<sp/>*<sp/>4);</highlight></codeline>
<codeline lineno="1987"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.wBitsPerSample<sp/>=<sp/>32;</highlight></codeline>
<codeline lineno="1988"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.cbSize<sp/>=<sp/>sizeof(WAVEFORMATEXTENSIBLE)-sizeof(WAVEFORMATEX);</highlight></codeline>
<codeline lineno="1989"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Samples.wValidBitsPerSample<sp/>=<sp/>32;</highlight></codeline>
<codeline lineno="1990"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;SubFormat<sp/>=<sp/>pa_KSDATAFORMAT_SUBTYPE_IEEE_FLOAT;</highlight></codeline>
<codeline lineno="1991"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1992"><highlight class="comment"><sp/><sp/><sp/><sp/>else<sp/>if(sampleFormat<sp/>==<sp/>paInt32)</highlight></codeline>
<codeline lineno="1993"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1994"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.nBlockAlign<sp/>=<sp/>(WORD)(channelCount<sp/>*<sp/>4);</highlight></codeline>
<codeline lineno="1995"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.wBitsPerSample<sp/>=<sp/>32;</highlight></codeline>
<codeline lineno="1996"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.cbSize<sp/>=<sp/>sizeof(WAVEFORMATEXTENSIBLE)-sizeof(WAVEFORMATEX);</highlight></codeline>
<codeline lineno="1997"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Samples.wValidBitsPerSample<sp/>=<sp/>32;</highlight></codeline>
<codeline lineno="1998"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;SubFormat<sp/>=<sp/>pa_KSDATAFORMAT_SUBTYPE_PCM;</highlight></codeline>
<codeline lineno="1999"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2000"><highlight class="comment"><sp/><sp/><sp/><sp/>else<sp/>if(sampleFormat<sp/>==<sp/>paInt24)</highlight></codeline>
<codeline lineno="2001"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2002"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.nBlockAlign<sp/>=<sp/>(WORD)(channelCount<sp/>*<sp/>4);</highlight></codeline>
<codeline lineno="2003"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.wBitsPerSample<sp/>=<sp/>32;<sp/>//<sp/>24-bit<sp/>in<sp/>32-bit<sp/>int<sp/>container</highlight></codeline>
<codeline lineno="2004"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.cbSize<sp/>=<sp/>sizeof(WAVEFORMATEXTENSIBLE)-sizeof(WAVEFORMATEX);</highlight></codeline>
<codeline lineno="2005"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Samples.wValidBitsPerSample<sp/>=<sp/>24;</highlight></codeline>
<codeline lineno="2006"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;SubFormat<sp/>=<sp/>pa_KSDATAFORMAT_SUBTYPE_PCM;</highlight></codeline>
<codeline lineno="2007"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2008"><highlight class="comment"><sp/><sp/><sp/><sp/>else<sp/>if(sampleFormat<sp/>==<sp/>paInt16)</highlight></codeline>
<codeline lineno="2009"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2010"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.nBlockAlign<sp/>=<sp/>(WORD)(channelCount<sp/>*<sp/>2);</highlight></codeline>
<codeline lineno="2011"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.wBitsPerSample<sp/>=<sp/>16;</highlight></codeline>
<codeline lineno="2012"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Format.cbSize<sp/>=<sp/>sizeof(WAVEFORMATEXTENSIBLE)-sizeof(WAVEFORMATEX);</highlight></codeline>
<codeline lineno="2013"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;Samples.wValidBitsPerSample<sp/>=<sp/>16;</highlight></codeline>
<codeline lineno="2014"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwfext-&gt;SubFormat<sp/>=<sp/>pa_KSDATAFORMAT_SUBTYPE_PCM;</highlight></codeline>
<codeline lineno="2015"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2016"><highlight class="comment"><sp/><sp/><sp/><sp/>pwfext-&gt;Format.nAvgBytesPerSec<sp/>=<sp/>pwfext-&gt;Format.nSamplesPerSec<sp/>*<sp/>pwfext-&gt;Format.nBlockAlign;</highlight></codeline>
<codeline lineno="2017"><highlight class="comment">}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2018"><highlight class="normal"></highlight></codeline>
<codeline lineno="2019"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2020"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>GetClosestFormat(<ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref><sp/>*myClient,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="2021"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*_params,<sp/><ref refid="_audio_session_types_8h_1a0957067f6e0b63274f50931b31ed0ce5" kindref="member">AUDCLNT_SHAREMODE</ref><sp/>shareMode,<sp/>WAVEFORMATEXTENSIBLE<sp/>*outWavex,</highlight></codeline>
<codeline lineno="2022"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref>)</highlight></codeline>
<codeline lineno="2023"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2024"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>answer<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="2025"><highlight class="normal"><sp/><sp/><sp/><sp/>WAVEFORMATEX<sp/>*sharedClosestMatch<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2026"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>!S_OK;</highlight></codeline>
<codeline lineno="2027"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>params<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(*_params);</highlight></codeline>
<codeline lineno="2028"><highlight class="normal"></highlight></codeline>
<codeline lineno="2029"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>It<sp/>was<sp/>not<sp/>noticed<sp/>that<sp/>24-bit<sp/>Input<sp/>producing<sp/>no<sp/>output<sp/>while<sp/>device<sp/>accepts<sp/>this<sp/>format.</highlight></codeline>
<codeline lineno="2030"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>To<sp/>fix<sp/>this<sp/>issue<sp/>let&apos;s<sp/>ask<sp/>for<sp/>32-bits<sp/>and<sp/>let<sp/>PA<sp/>converters<sp/>convert<sp/>host<sp/>32-bit<sp/>data</highlight></codeline>
<codeline lineno="2031"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to<sp/>24-bit<sp/>for<sp/>user-space.<sp/>The<sp/>bug<sp/>concerns<sp/>Vista,<sp/>if<sp/>Windows<sp/>7<sp/>supports<sp/>24-bits<sp/>for<sp/>Input</highlight></codeline>
<codeline lineno="2032"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>please<sp/>report<sp/>to<sp/>PortAudio<sp/>developers<sp/>to<sp/>exclude<sp/>Windows<sp/>7.</highlight></codeline>
<codeline lineno="2033"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2034"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*if<sp/>((params.sampleFormat<sp/>==<sp/>paInt24)<sp/>&amp;&amp;<sp/>(output<sp/>==<sp/>FALSE))</highlight></codeline>
<codeline lineno="2035"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>params.sampleFormat<sp/>=<sp/>paFloat32;*/</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>&lt;&lt;&lt;<sp/>The<sp/>silence<sp/>was<sp/>due<sp/>to<sp/>missing<sp/>Int32_To_Int24_Dither<sp/>implementation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2036"><highlight class="normal"></highlight></codeline>
<codeline lineno="2037"><highlight class="normal"><sp/><sp/><sp/><sp/>MakeWaveFormatFromParams(outWavex,<sp/>&amp;params,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>);</highlight></codeline>
<codeline lineno="2038"><highlight class="normal"></highlight></codeline>
<codeline lineno="2039"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_IsFormatSupported(myClient,<sp/>shareMode,<sp/>&amp;outWavex-&gt;Format,<sp/>(shareMode<sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref><sp/>?<sp/>&amp;sharedClosestMatch<sp/>:<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>));</highlight></codeline>
<codeline lineno="2040"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="2041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer<sp/>=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>;</highlight></codeline>
<codeline lineno="2042"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2043"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sharedClosestMatch)</highlight></codeline>
<codeline lineno="2044"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref><sp/>bitsPerSample;</highlight></codeline>
<codeline lineno="2046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/>*ext<sp/>=<sp/>(WAVEFORMATEXTENSIBLE*)sharedClosestMatch;</highlight></codeline>
<codeline lineno="2047"><highlight class="normal"></highlight></codeline>
<codeline lineno="2048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GUID<sp/>subf_guid<sp/>=<sp/><ref refid="ks_8h_1a11bae0e7fc8757fba2e3d01ac5939bb2" kindref="member">GUID_NULL</ref>;</highlight></codeline>
<codeline lineno="2049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sharedClosestMatch-&gt;wFormatTag<sp/>==<sp/><ref refid="wav__w64_8h_1ac6bfa7273251ec8fc11ef21ca645ad90a8845fd4ea11ad20253cb9008e1192c96" kindref="member">WAVE_FORMAT_EXTENSIBLE</ref>)</highlight></codeline>
<codeline lineno="2050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(outWavex,<sp/>sharedClosestMatch,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(WAVEFORMATEXTENSIBLE));</highlight></codeline>
<codeline lineno="2052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subf_guid<sp/>=<sp/>ext-&gt;SubFormat;</highlight></codeline>
<codeline lineno="2053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(outWavex,<sp/>sharedClosestMatch,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(WAVEFORMATEX));</highlight></codeline>
<codeline lineno="2056"><highlight class="normal"></highlight></codeline>
<codeline lineno="2057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoTaskMemFree(sharedClosestMatch);</highlight></codeline>
<codeline lineno="2058"><highlight class="normal"></highlight></codeline>
<codeline lineno="2059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>supported<sp/>by<sp/>default</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer<sp/>=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>;</highlight></codeline>
<codeline lineno="2061"><highlight class="normal"></highlight></codeline>
<codeline lineno="2062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>SampleRate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref>)<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>!=<sp/>outWavex-&gt;Format.nSamplesPerSec)</highlight></codeline>
<codeline lineno="2064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="2065"><highlight class="normal"></highlight></codeline>
<codeline lineno="2066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>Channel<sp/>count</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="nfilterkit_8h_1a7e62930c4614f6a59b33d693f01ce08e" kindref="member">WORD</ref>)params.<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>!=<sp/>outWavex-&gt;Format.nChannels)</highlight></codeline>
<codeline lineno="2068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>mono,<sp/>then<sp/>driver<sp/>does<sp/>not<sp/>support<sp/>1<sp/>channel,<sp/>we<sp/>use<sp/>internal<sp/>workaround</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>tiny<sp/>software<sp/>mixing<sp/>functionality,<sp/>e.g.<sp/>we<sp/>provide<sp/>to<sp/>user<sp/>buffer<sp/>1<sp/>channel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>but<sp/>then<sp/>mix<sp/>into<sp/>2<sp/>for<sp/>device<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((params.<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>==<sp/>1)<sp/>&amp;&amp;<sp/>(outWavex-&gt;Format.nChannels<sp/>==<sp/>2))</highlight></codeline>
<codeline lineno="2073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>;</highlight></codeline>
<codeline lineno="2074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="2076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2077"><highlight class="normal"></highlight></codeline>
<codeline lineno="2078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>Sample<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((bitsPerSample<sp/>=<sp/>PaSampleFormatToBitsPerSample(params.<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref>))<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="2080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="2081"><highlight class="normal"></highlight></codeline>
<codeline lineno="2082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>Sample<sp/>format:<sp/>bit<sp/>size<sp/>(WASAPI<sp/>does<sp/>not<sp/>limit<sp/>&apos;bit<sp/>size&apos;)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>(bitsPerSample<sp/>!=<sp/>outWavex-&gt;Format.wBitsPerSample)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>return<sp/>paSampleFormatNotSupported;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2085"><highlight class="normal"></highlight></codeline>
<codeline lineno="2086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>Sample<sp/>format:<sp/>paFloat32<sp/>(WASAPI<sp/>does<sp/>not<sp/>limit<sp/>&apos;bit<sp/>type&apos;)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>((params-&gt;sampleFormat<sp/>==<sp/>paFloat32)<sp/>&amp;&amp;<sp/>(subf_guid<sp/>!=<sp/>KSDATAFORMAT_SUBTYPE_IEEE_FLOAT))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>return<sp/>paSampleFormatNotSupported;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2089"><highlight class="normal"></highlight></codeline>
<codeline lineno="2090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>Sample<sp/>format:<sp/>paInt32<sp/>(WASAPI<sp/>does<sp/>not<sp/>limit<sp/>&apos;bit<sp/>type&apos;)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>((params-&gt;sampleFormat<sp/>==<sp/>paInt32)<sp/>&amp;&amp;<sp/>(subf_guid<sp/>!=<sp/>KSDATAFORMAT_SUBTYPE_PCM))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>return<sp/>paSampleFormatNotSupported;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2093"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2094"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2095"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>BestToWorst[]<sp/>=<sp/>{<sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>,<sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>,<sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref><sp/>};</highlight></codeline>
<codeline lineno="2097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="2098"><highlight class="normal"></highlight></codeline>
<codeline lineno="2099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>combination<sp/>stereo<sp/>and<sp/>we<sp/>will<sp/>use<sp/>built-in<sp/>mono-stereo<sp/>mixer<sp/>then</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(params.<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="2101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/>stereo<sp/>=<sp/>{<sp/>0<sp/>};</highlight></codeline>
<codeline lineno="2103"><highlight class="normal"></highlight></codeline>
<codeline lineno="2104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>stereo_params<sp/>=<sp/><ref refid="_reverb_8cpp_1aacc5617877d2aa4d17c729c1c8ba4eec" kindref="member">params</ref>;</highlight></codeline>
<codeline lineno="2105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stereo_params.<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="2106"><highlight class="normal"></highlight></codeline>
<codeline lineno="2107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MakeWaveFormatFromParams(&amp;stereo,<sp/>&amp;stereo_params,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>);</highlight></codeline>
<codeline lineno="2108"><highlight class="normal"></highlight></codeline>
<codeline lineno="2109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_IsFormatSupported(myClient,<sp/>shareMode,<sp/>&amp;stereo.Format,<sp/>(shareMode<sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref><sp/>?<sp/>&amp;sharedClosestMatch<sp/>:<sp/>NULL));</highlight></codeline>
<codeline lineno="2110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="2111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(outWavex,<sp/>&amp;stereo,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(WAVEFORMATEXTENSIBLE));</highlight></codeline>
<codeline lineno="2113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoTaskMemFree(sharedClosestMatch);</highlight></codeline>
<codeline lineno="2114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(answer<sp/>=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>);</highlight></codeline>
<codeline lineno="2115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2116"><highlight class="normal"></highlight></codeline>
<codeline lineno="2117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>selecting<sp/>suitable<sp/>sample<sp/>type</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="pa__win__wasapi_8c_1a1ffa289724d1c8dbeefe0116b976158e" kindref="member">STATIC_ARRAY_SIZE</ref>(BestToWorst);<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)</highlight></codeline>
<codeline lineno="2119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/>sample<sp/>=<sp/>{<sp/>0<sp/>};</highlight></codeline>
<codeline lineno="2121"><highlight class="normal"></highlight></codeline>
<codeline lineno="2122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>sample_params<sp/>=<sp/>stereo_params;</highlight></codeline>
<codeline lineno="2123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sample_params.<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>=<sp/>BestToWorst[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="2124"><highlight class="normal"></highlight></codeline>
<codeline lineno="2125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MakeWaveFormatFromParams(&amp;sample,<sp/>&amp;sample_params,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>);</highlight></codeline>
<codeline lineno="2126"><highlight class="normal"></highlight></codeline>
<codeline lineno="2127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_IsFormatSupported(myClient,<sp/>shareMode,<sp/>&amp;sample.Format,<sp/>(shareMode<sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref><sp/>?<sp/>&amp;sharedClosestMatch<sp/>:<sp/>NULL));</highlight></codeline>
<codeline lineno="2128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="2129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(outWavex,<sp/>&amp;sample,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(WAVEFORMATEXTENSIBLE));</highlight></codeline>
<codeline lineno="2131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoTaskMemFree(sharedClosestMatch);</highlight></codeline>
<codeline lineno="2132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(answer<sp/>=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>);</highlight></codeline>
<codeline lineno="2133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2136"><highlight class="normal"></highlight></codeline>
<codeline lineno="2137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>selecting<sp/>suitable<sp/>sample<sp/>type</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="pa__win__wasapi_8c_1a1ffa289724d1c8dbeefe0116b976158e" kindref="member">STATIC_ARRAY_SIZE</ref>(BestToWorst);<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)</highlight></codeline>
<codeline lineno="2139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/>spfmt<sp/>=<sp/>{<sp/>0<sp/>};</highlight></codeline>
<codeline lineno="2141"><highlight class="normal"></highlight></codeline>
<codeline lineno="2142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>spfmt_params<sp/>=<sp/><ref refid="_reverb_8cpp_1aacc5617877d2aa4d17c729c1c8ba4eec" kindref="member">params</ref>;</highlight></codeline>
<codeline lineno="2143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spfmt_params.<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>=<sp/>BestToWorst[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="2144"><highlight class="normal"></highlight></codeline>
<codeline lineno="2145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MakeWaveFormatFromParams(&amp;spfmt,<sp/>&amp;spfmt_params,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>);</highlight></codeline>
<codeline lineno="2146"><highlight class="normal"></highlight></codeline>
<codeline lineno="2147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_IsFormatSupported(myClient,<sp/>shareMode,<sp/>&amp;spfmt.Format,<sp/>(shareMode<sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref><sp/>?<sp/>&amp;sharedClosestMatch<sp/>:<sp/>NULL));</highlight></codeline>
<codeline lineno="2148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="2149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(outWavex,<sp/>&amp;spfmt,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(WAVEFORMATEXTENSIBLE));</highlight></codeline>
<codeline lineno="2151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoTaskMemFree(sharedClosestMatch);</highlight></codeline>
<codeline lineno="2152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer<sp/>=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>;</highlight></codeline>
<codeline lineno="2153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2156"><highlight class="normal"></highlight></codeline>
<codeline lineno="2157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Nothing<sp/>helped</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2159"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2160"><highlight class="normal"></highlight></codeline>
<codeline lineno="2161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>answer;</highlight></codeline>
<codeline lineno="2162"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2163"><highlight class="normal"></highlight></codeline>
<codeline lineno="2164"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2165"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamParamsValid(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="2166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="2167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="2168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>)</highlight></codeline>
<codeline lineno="2169"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2170"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hostApi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4b470a48b5fd9cf04591b1fbdd2ad26a" kindref="member">paHostApiNotFound</ref>;</highlight></codeline>
<codeline lineno="2172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)sampleRate<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="2173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="2174"><highlight class="normal"></highlight></codeline>
<codeline lineno="2175"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2176"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>all<sp/>standard<sp/>sample<sp/>formats<sp/>are<sp/>supported<sp/>by<sp/>the<sp/>buffer<sp/>adapter,</highlight></codeline>
<codeline lineno="2178"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this<sp/>implementation<sp/>doesn&apos;t<sp/>support<sp/>any<sp/>custom<sp/>sample<sp/>formats<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>&amp;<sp/><ref refid="portaudio_8h_1aba595f6b645c8134a8ac3004957b9ff7" kindref="member">paCustomFormat</ref>)</highlight></codeline>
<codeline lineno="2180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="2181"><highlight class="normal"></highlight></codeline>
<codeline lineno="2182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>unless<sp/>alternate<sp/>device<sp/>specification<sp/>is<sp/>supported,<sp/>reject<sp/>the<sp/>use<sp/>of</highlight></codeline>
<codeline lineno="2183"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paUseHostApiSpecificDeviceSpecification<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref><sp/>==<sp/><ref refid="portaudio_8h_1a14795fe3377c3b037025a61e550d44b5" kindref="member">paUseHostApiSpecificDeviceSpecification</ref>)</highlight></codeline>
<codeline lineno="2185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2186"><highlight class="normal"></highlight></codeline>
<codeline lineno="2187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>that<sp/>input<sp/>device<sp/>can<sp/>support<sp/>inputChannelCount<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>&gt;<sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a48dcfdf57e6d12d33314929ac213ae28" kindref="member">deviceInfos</ref>[<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref><sp/>]-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref>)</highlight></codeline>
<codeline lineno="2189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="2190"><highlight class="normal"></highlight></codeline>
<codeline lineno="2191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>validate<sp/>inputStreamInfo<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>)</highlight></codeline>
<codeline lineno="2193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*inputStreamInfo<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*)inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="2195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>((inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1ae491f41ce5954cddd438624dc69eba1b" kindref="member">size</ref><sp/>!=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref>))<sp/>||</highlight></codeline>
<codeline lineno="2196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a3045f4432a92d761e4a1b95eba97ae49" kindref="member">version</ref><sp/>!=<sp/>1)<sp/>||</highlight></codeline>
<codeline lineno="2197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a931bf93691d5b36b621d49402d1d2255" kindref="member">hostApiType</ref><sp/>!=<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa27b155bf2883aef821dfb6eba89e456" kindref="member">paWASAPI</ref>))</highlight></codeline>
<codeline lineno="2198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a44f6cce375a3d38af28652179a400403" kindref="member">paIncompatibleHostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="2200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2202"><highlight class="normal"></highlight></codeline>
<codeline lineno="2203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2204"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2205"><highlight class="normal"></highlight></codeline>
<codeline lineno="2206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2207"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>all<sp/>standard<sp/>sample<sp/>formats<sp/>are<sp/>supported<sp/>by<sp/>the<sp/>buffer<sp/>adapter,</highlight></codeline>
<codeline lineno="2209"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this<sp/>implementation<sp/>doesn&apos;t<sp/>support<sp/>any<sp/>custom<sp/>sample<sp/>formats<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>&amp;<sp/><ref refid="portaudio_8h_1aba595f6b645c8134a8ac3004957b9ff7" kindref="member">paCustomFormat</ref>)</highlight></codeline>
<codeline lineno="2211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="2212"><highlight class="normal"></highlight></codeline>
<codeline lineno="2213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>unless<sp/>alternate<sp/>device<sp/>specification<sp/>is<sp/>supported,<sp/>reject<sp/>the<sp/>use<sp/>of</highlight></codeline>
<codeline lineno="2214"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paUseHostApiSpecificDeviceSpecification<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref><sp/>==<sp/><ref refid="portaudio_8h_1a14795fe3377c3b037025a61e550d44b5" kindref="member">paUseHostApiSpecificDeviceSpecification</ref>)</highlight></codeline>
<codeline lineno="2216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2217"><highlight class="normal"></highlight></codeline>
<codeline lineno="2218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>that<sp/>output<sp/>device<sp/>can<sp/>support<sp/>outputChannelCount<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>&gt;<sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a48dcfdf57e6d12d33314929ac213ae28" kindref="member">deviceInfos</ref>[<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref><sp/>]-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref>)</highlight></codeline>
<codeline lineno="2220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="2221"><highlight class="normal"></highlight></codeline>
<codeline lineno="2222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>validate<sp/>outputStreamInfo<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>)</highlight></codeline>
<codeline lineno="2224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*outputStreamInfo<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*)outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="2226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>((outputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1ae491f41ce5954cddd438624dc69eba1b" kindref="member">size</ref><sp/>!=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref>))<sp/>||</highlight></codeline>
<codeline lineno="2227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(outputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a3045f4432a92d761e4a1b95eba97ae49" kindref="member">version</ref><sp/>!=<sp/>1)<sp/>||</highlight></codeline>
<codeline lineno="2228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(outputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a931bf93691d5b36b621d49402d1d2255" kindref="member">hostApiType</ref><sp/>!=<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa27b155bf2883aef821dfb6eba89e456" kindref="member">paWASAPI</ref>))</highlight></codeline>
<codeline lineno="2229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a44f6cce375a3d38af28652179a400403" kindref="member">paIncompatibleHostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="2231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2233"><highlight class="normal"></highlight></codeline>
<codeline lineno="2234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2235"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2236"><highlight class="normal"></highlight></codeline>
<codeline lineno="2237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(inputParameters<sp/>||<sp/>outputParameters<sp/>?<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>:<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>);</highlight></codeline>
<codeline lineno="2238"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2239"><highlight class="normal"></highlight></codeline>
<codeline lineno="2240"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2241"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsFormatSupported(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="2242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="2243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="2244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>)</highlight></codeline>
<codeline lineno="2245"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2246"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref><sp/>*tmpClient<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2247"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi<sp/>=<sp/>(<ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="2248"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*inputStreamInfo<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*outputStreamInfo<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2249"><highlight class="normal"></highlight></codeline>
<codeline lineno="2250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>PaStreamParameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2251"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2252"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((error<sp/>=<sp/>IsStreamParamsValid(hostApi,<sp/>inputParameters,<sp/>outputParameters,<sp/>sampleRate))<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="2253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="2254"><highlight class="normal"></highlight></codeline>
<codeline lineno="2255"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2256"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/>wavex;</highlight></codeline>
<codeline lineno="2258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="2259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>answer;</highlight></codeline>
<codeline lineno="2260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_audio_session_types_8h_1a0957067f6e0b63274f50931b31ed0ce5" kindref="member">AUDCLNT_SHAREMODE</ref><sp/>shareMode<sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>;</highlight></codeline>
<codeline lineno="2261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputStreamInfo<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*)inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="2262"><highlight class="normal"></highlight></codeline>
<codeline lineno="2263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(inputStreamInfo<sp/>&amp;&amp;<sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725bea03a519ca5e890b232994c25bc2a15b1e" kindref="member">paWinWasapiExclusive</ref>))</highlight></codeline>
<codeline lineno="2264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shareMode<sp/><sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>;</highlight></codeline>
<codeline lineno="2265"><highlight class="normal"></highlight></codeline>
<codeline lineno="2266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,</highlight></codeline>
<codeline lineno="2267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetAudioClientIID(),<sp/>CLSCTX_INPROC_SERVER,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;tmpClient);</highlight></codeline>
<codeline lineno="2268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2273"><highlight class="normal"></highlight></codeline>
<codeline lineno="2274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer<sp/>=<sp/>GetClosestFormat(tmpClient,<sp/>sampleRate,<sp/>inputParameters,<sp/>shareMode,<sp/>&amp;wavex,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="2275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(tmpClient);</highlight></codeline>
<codeline lineno="2276"><highlight class="normal"></highlight></codeline>
<codeline lineno="2277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(answer<sp/>!=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>)</highlight></codeline>
<codeline lineno="2278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>answer;</highlight></codeline>
<codeline lineno="2279"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2280"><highlight class="normal"></highlight></codeline>
<codeline lineno="2281"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2282"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="2284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WAVEFORMATEXTENSIBLE<sp/>wavex;</highlight></codeline>
<codeline lineno="2285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>answer;</highlight></codeline>
<codeline lineno="2286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_audio_session_types_8h_1a0957067f6e0b63274f50931b31ed0ce5" kindref="member">AUDCLNT_SHAREMODE</ref><sp/>shareMode<sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>;</highlight></codeline>
<codeline lineno="2287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputStreamInfo<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*)outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="2288"><highlight class="normal"></highlight></codeline>
<codeline lineno="2289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(outputStreamInfo<sp/>&amp;&amp;<sp/>(outputStreamInfo-&gt;flags<sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725bea03a519ca5e890b232994c25bc2a15b1e" kindref="member">paWinWasapiExclusive</ref>))</highlight></codeline>
<codeline lineno="2290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shareMode<sp/><sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>;</highlight></codeline>
<codeline lineno="2291"><highlight class="normal"></highlight></codeline>
<codeline lineno="2292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,</highlight></codeline>
<codeline lineno="2293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetAudioClientIID(),<sp/>CLSCTX_INPROC_SERVER,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;tmpClient);</highlight></codeline>
<codeline lineno="2294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2299"><highlight class="normal"></highlight></codeline>
<codeline lineno="2300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer<sp/>=<sp/>GetClosestFormat(tmpClient,<sp/>sampleRate,<sp/>outputParameters,<sp/>shareMode,<sp/>&amp;wavex,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>);</highlight></codeline>
<codeline lineno="2301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(tmpClient);</highlight></codeline>
<codeline lineno="2302"><highlight class="normal"></highlight></codeline>
<codeline lineno="2303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(answer<sp/>!=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>)</highlight></codeline>
<codeline lineno="2304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>answer;</highlight></codeline>
<codeline lineno="2305"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2306"><highlight class="normal"></highlight></codeline>
<codeline lineno="2307"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>;</highlight></codeline>
<codeline lineno="2308"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2309"><highlight class="normal"></highlight></codeline>
<codeline lineno="2310"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2311"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref><sp/>PaUtil_GetFramesPerHostBuffer(<ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref><sp/>userFramesPerBuffer,<sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1ae87de80b3b414a82eb74a4d0472d0092" kindref="member">suggestedLatency</ref>,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,<sp/><ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref><sp/>TimerJitterMs)</highlight></codeline>
<codeline lineno="2312"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2313"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref><sp/>frames<sp/>=<sp/>userFramesPerBuffer<sp/>+<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>(<sp/>userFramesPerBuffer,<sp/>(<ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref>)(<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1ae87de80b3b414a82eb74a4d0472d0092" kindref="member">suggestedLatency</ref><sp/>*<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>)<sp/>);</highlight></codeline>
<codeline lineno="2314"><highlight class="normal"><sp/><sp/><sp/><sp/>frames<sp/>+=<sp/>(<ref refid="pa__types_8h_1a9cff423f720226e66a7826c30509c465" kindref="member">PaUint32</ref>)((sampleRate<sp/>*<sp/>0.001)<sp/>*<sp/>TimerJitterMs);</highlight></codeline>
<codeline lineno="2315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>frames;</highlight></codeline>
<codeline lineno="2316"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2317"><highlight class="normal"></highlight></codeline>
<codeline lineno="2318"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2319"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_RecalculateBuffersCount(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*sub,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>userFramesPerBuffer,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>framesPerLatency,<sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>fullDuplex)</highlight></codeline>
<codeline lineno="2320"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2321"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Count<sp/>buffers<sp/>(must<sp/>be<sp/>at<sp/>least<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2322"><highlight class="normal"><sp/><sp/><sp/><sp/>sub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ac2fc3d1d317aa761577e2dc2ca782b97" kindref="member">buffers</ref><sp/>=<sp/>(userFramesPerBuffer<sp/>?<sp/>framesPerLatency<sp/>/<sp/>userFramesPerBuffer<sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="2323"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ac2fc3d1d317aa761577e2dc2ca782b97" kindref="member">buffers</ref><sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="2324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ac2fc3d1d317aa761577e2dc2ca782b97" kindref="member">buffers</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2325"><highlight class="normal"></highlight></codeline>
<codeline lineno="2326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Determine<sp/>amount<sp/>of<sp/>buffers<sp/>used:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2327"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>Full-duplex<sp/>mode<sp/>will<sp/>lead<sp/>to<sp/>period<sp/>difference,<sp/>thus<sp/>only<sp/>1.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>Input<sp/>mode,<sp/>only<sp/>1,<sp/>as<sp/>WASAPI<sp/>allows<sp/>extraction<sp/>of<sp/>only<sp/>1<sp/>packet.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2329"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>For<sp/>Shared<sp/>mode<sp/>we<sp/>use<sp/>double<sp/>buffering.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2330"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((sub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>)<sp/>||<sp/>fullDuplex)</highlight></codeline>
<codeline lineno="2331"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exclusive<sp/>mode<sp/>does<sp/>not<sp/>allow<sp/>&gt;1<sp/>buffers<sp/>be<sp/>used<sp/>for<sp/>Event<sp/>interface,<sp/>e.g.<sp/>GetBuffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>call<sp/>must<sp/>acquire<sp/>max<sp/>buffer<sp/>size<sp/>and<sp/>it<sp/>all<sp/>must<sp/>be<sp/>processed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>)</highlight></codeline>
<codeline lineno="2335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a7158c290cfa44a35117a04283b6f0fa2" kindref="member">userBufferAndHostMatch</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2336"><highlight class="normal"></highlight></codeline>
<codeline lineno="2337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>paUtilBoundedHostBufferSize<sp/>because<sp/>exclusive<sp/>mode<sp/>will<sp/>starve<sp/>and<sp/>produce</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>bad<sp/>quality<sp/>of<sp/>audio</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ac2fc3d1d317aa761577e2dc2ca782b97" kindref="member">buffers</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2340"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2341"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2342"><highlight class="normal"></highlight></codeline>
<codeline lineno="2343"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2344"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_CalculateAlignedPeriod(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*pSub,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>*nFramesPerLatency,</highlight></codeline>
<codeline lineno="2345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a949fa21ebe968b6a5a38bd434e5eb4f6" kindref="member">ALIGN_FUNC</ref><sp/>pAlignFunc)</highlight></codeline>
<codeline lineno="2346"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2347"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Align<sp/>frames<sp/>to<sp/>HD<sp/>Audio<sp/>packet<sp/>size<sp/>of<sp/>128<sp/>bytes<sp/>for<sp/>Exclusive<sp/>mode<sp/>only.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2348"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>aligning<sp/>on<sp/>Windows<sp/>Vista<sp/>will<sp/>cause<sp/>Event<sp/>timeout,<sp/>although<sp/>Windows<sp/>7<sp/>will</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2349"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>return<sp/>AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED<sp/>error<sp/>to<sp/>realign<sp/>buffer.<sp/>Aligning<sp/>is<sp/>necessary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2350"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>Exclusive<sp/>mode<sp/>only!<sp/>when<sp/>audio<sp/>data<sp/>is<sp/>feeded<sp/>directly<sp/>to<sp/>hardware.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>)</highlight></codeline>
<codeline lineno="2352"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*nFramesPerLatency)<sp/>=<sp/>AlignFramesPerBuffer((*nFramesPerLatency),</highlight></codeline>
<codeline lineno="2354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nBlockAlign,<sp/>pAlignFunc);</highlight></codeline>
<codeline lineno="2355"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2356"><highlight class="normal"></highlight></codeline>
<codeline lineno="2357"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2358"><highlight class="normal"><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>=<sp/>MakeHnsPeriod((*nFramesPerLatency),<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2359"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2360"><highlight class="normal"></highlight></codeline>
<codeline lineno="2361"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2362"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>CreateAudioClient(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*pStream,<sp/><ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*pSub,<sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/><ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref>,<sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>*pa_error)</highlight></codeline>
<codeline lineno="2363"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2364"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2365"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="2366"><highlight class="normal"></highlight></codeline>
<codeline lineno="2367"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref><sp/>*pInfo<sp/><sp/>=<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref>;</highlight></codeline>
<codeline lineno="2368"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*params<sp/>=<sp/>&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac01b82e3992a001815a26eeb5a225e8a" kindref="member">stream_params</ref>;</highlight></codeline>
<codeline lineno="2369"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>framesPerLatency<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aa46fc2eb761fffa9ee34baf829b70e0e" kindref="member">frames_per_buffer</ref>;</highlight></codeline>
<codeline lineno="2370"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aaf327b0ecb554eb9d8b331d647c000b6" kindref="member">sample_rate</ref>;</highlight></codeline>
<codeline lineno="2371"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>blocking<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a1e3a0ed3228bb5fb0ff14f3207c8f2c4" kindref="member">blocking</ref>;</highlight></codeline>
<codeline lineno="2372"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>fullDuplex<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac94ccf5cb33748fb1c5ad1f040ccc178" kindref="member">full_duplex</ref>;</highlight></codeline>
<codeline lineno="2373"><highlight class="normal"></highlight></codeline>
<codeline lineno="2374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>userFramesPerBuffer<sp/>=<sp/>framesPerLatency;</highlight></codeline>
<codeline lineno="2375"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="audioclient_8h_1ace13012ab56d9326b7aabeab5d477652" kindref="member">IAudioClient</ref><sp/>*audioClient<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2376"><highlight class="normal"></highlight></codeline>
<codeline lineno="2377"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Assume<sp/>default<sp/>failure<sp/>due<sp/>to<sp/>some<sp/>reason</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2378"><highlight class="normal"><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2379"><highlight class="normal"></highlight></codeline>
<codeline lineno="2380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>parameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2381"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pSub<sp/>||<sp/>!pInfo<sp/>||<sp/>!params)</highlight></codeline>
<codeline lineno="2382"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aef50bc6456d8bcbd94d1690dfb8d447a" kindref="member">paBadStreamPtr</ref>;</highlight></codeline>
<codeline lineno="2384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>E_POINTER;</highlight></codeline>
<codeline lineno="2385"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2386"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)sampleRate<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="2387"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="2389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>E_INVALIDARG;</highlight></codeline>
<codeline lineno="2390"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2391"><highlight class="normal"></highlight></codeline>
<codeline lineno="2392"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2393"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>GetAudioClientIID(),<sp/>CLSCTX_ALL,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;audioClient);</highlight></codeline>
<codeline lineno="2394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2395"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="2397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2399"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2400"><highlight class="normal"></highlight></codeline>
<codeline lineno="2401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>closest<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2402"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((error<sp/>=<sp/>GetClosestFormat(audioClient,<sp/>sampleRate,<sp/>params,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref>,<sp/>&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>,<sp/><ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref>))<sp/>!=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>)</highlight></codeline>
<codeline lineno="2403"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/>error;</highlight></codeline>
<codeline lineno="2405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr<sp/>=<sp/><ref refid="audioclient_8h_1ab6abf418757067f0f0565b73b13303e7" kindref="member">AUDCLNT_E_UNSUPPORTED_FORMAT</ref>);</highlight></codeline>
<codeline lineno="2406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;<sp/></highlight><highlight class="comment">//<sp/>fail,<sp/>format<sp/>not<sp/>supported</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2407"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2408"><highlight class="normal"></highlight></codeline>
<codeline lineno="2409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>for<sp/>Mono<sp/>&lt;&lt;&gt;&gt;<sp/>Stereo<sp/>workaround</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((params-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>==<sp/>1)<sp/>&amp;&amp;<sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nChannels<sp/>==<sp/>2))</highlight></codeline>
<codeline lineno="2411"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*if<sp/>(blocking)</highlight></codeline>
<codeline lineno="2413"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2414"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LogHostError(hr<sp/>=<sp/>AUDCLNT_E_UNSUPPORTED_FORMAT);</highlight></codeline>
<codeline lineno="2415"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goto<sp/>done;<sp/>//<sp/>fail,<sp/>blocking<sp/>mode<sp/>not<sp/>supported</highlight></codeline>
<codeline lineno="2416"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2417"><highlight class="normal"></highlight></codeline>
<codeline lineno="2418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>select<sp/>mixer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref><sp/>=<sp/>_GetMonoToStereoMixer(WaveToPaFormat(&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>),<sp/>(<ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref><sp/>?<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046cab2ffbd89db8f6270bf898848a9b77668" kindref="member">MIX_DIR__1TO2</ref><sp/>:<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca0858f41d4d725a8638f791327d303f33" kindref="member">MIX_DIR__2TO1_L</ref>));</highlight></codeline>
<codeline lineno="2420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="2423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr<sp/>=<sp/><ref refid="audioclient_8h_1ab6abf418757067f0f0565b73b13303e7" kindref="member">AUDCLNT_E_UNSUPPORTED_FORMAT</ref>);</highlight></codeline>
<codeline lineno="2424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;<sp/></highlight><highlight class="comment">//<sp/>fail,<sp/>no<sp/>mixer<sp/>for<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2426"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2427"><highlight class="normal"></highlight></codeline>
<codeline lineno="2428"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2429"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Add<sp/>suggestd<sp/>latency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2430"><highlight class="normal"><sp/><sp/><sp/><sp/>framesPerLatency<sp/>+=<sp/>MakeFramesFromHns(SecondsTonano100(params-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>),<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2431"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>host<sp/>buffer<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2433"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>!=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(!pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>||<sp/>((pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>)<sp/>==<sp/>0)))</highlight></codeline>
<codeline lineno="2435"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>PaUtil_GetFramesPerHostBuffer(userFramesPerBuffer,</highlight></codeline>
<codeline lineno="2437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>params-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec,<sp/>0</highlight><highlight class="comment">/*,</highlight></codeline>
<codeline lineno="2438"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pSub-&gt;streamFlags<sp/>&amp;<sp/>AUDCLNT_STREAMFLAGS_EVENTCALLBACK<sp/>?<sp/>0<sp/>:<sp/>1)*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2439"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2440"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2441"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>overall;</highlight></codeline>
<codeline lineno="2443"><highlight class="normal"></highlight></codeline>
<codeline lineno="2444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Work<sp/>1:1<sp/>with<sp/>user<sp/>buffer<sp/>(only<sp/>polling<sp/>allows<sp/>to<sp/>use<sp/>&gt;1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>+=<sp/>MakeFramesFromHns(SecondsTonano100(params-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>),<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2446"><highlight class="normal"></highlight></codeline>
<codeline lineno="2447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>Polling<sp/>if<sp/>overall<sp/>latency<sp/>is<sp/>&gt;<sp/>5ms<sp/>as<sp/>it<sp/>allows<sp/>to<sp/>use<sp/>100%<sp/>CPU<sp/>in<sp/>a<sp/>callback,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>or<sp/>user<sp/>specified<sp/>latency<sp/>parameter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>overall<sp/>=<sp/>MakeHnsPeriod(framesPerLatency,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((overall<sp/>&gt;=<sp/>(106667*2)</highlight><highlight class="comment">/*21.33ms*/</highlight><highlight class="normal">)<sp/>||<sp/>((<ref refid="namespaceportaudio_1a30bc71f065706d41a5d9208ea861e4a6a6dd61123fe207d74b9af1bc56ade8108" kindref="member">INT32</ref>)(params-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>*100000.0)<sp/>!=<sp/>0</highlight><highlight class="comment">/*0.01<sp/>msec<sp/>granularity*/</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="2451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>PaUtil_GetFramesPerHostBuffer(userFramesPerBuffer,</highlight></codeline>
<codeline lineno="2453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>params-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec,<sp/>0</highlight><highlight class="comment">/*,</highlight></codeline>
<codeline lineno="2454"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(streamFlags<sp/>&amp;<sp/>AUDCLNT_STREAMFLAGS_EVENTCALLBACK<sp/>?<sp/>0<sp/>:<sp/>1)*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2455"><highlight class="normal"></highlight></codeline>
<codeline lineno="2456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>Polling<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;=<sp/>~<ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>;</highlight></codeline>
<codeline lineno="2458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>CreateAudioClient:<sp/>forcing<sp/>POLL<sp/>mode\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="2459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2460"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2461"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2462"><highlight class="normal"></highlight></codeline>
<codeline lineno="2463"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>full-duplex<sp/>output<sp/>resize<sp/>buffer<sp/>to<sp/>be<sp/>the<sp/>same<sp/>as<sp/>for<sp/>input</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2464"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref><sp/>&amp;&amp;<sp/>fullDuplex)</highlight></codeline>
<codeline lineno="2465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>pStream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>;</highlight></codeline>
<codeline lineno="2466"><highlight class="normal"></highlight></codeline>
<codeline lineno="2467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Avoid<sp/>0<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2468"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(framesPerLatency<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="2469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>MakeFramesFromHns(pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2470"><highlight class="normal"></highlight></codeline>
<codeline lineno="2471"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exclusive<sp/>Input<sp/>stream<sp/>renders<sp/>data<sp/>in<sp/>6<sp/>packets,<sp/>we<sp/>must<sp/>set<sp/>then<sp/>the<sp/>size<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2472"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>single<sp/>packet,<sp/>total<sp/>buffer<sp/>size,<sp/>e.g.<sp/>required<sp/>latency<sp/>will<sp/>be<sp/>PacketSize<sp/>*<sp/>6</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref><sp/>&amp;&amp;<sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>))</highlight></codeline>
<codeline lineno="2474"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>it<sp/>only<sp/>for<sp/>Polling<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>)<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="2477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>/=<sp/><ref refid="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8a7b6c7e83009a14df464dd680e87feaf2" kindref="member">WASAPI_PACKETS_PER_INPUT_BUFFER</ref>;</highlight></codeline>
<codeline lineno="2479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2480"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2481"><highlight class="normal"></highlight></codeline>
<codeline lineno="2482"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>aligned<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2483"><highlight class="normal"><sp/><sp/><sp/><sp/>_CalculateAlignedPeriod(pSub,<sp/>&amp;framesPerLatency,<sp/>ALIGN_BWD);</highlight></codeline>
<codeline lineno="2484"><highlight class="normal"></highlight></codeline>
<codeline lineno="2488"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>)</highlight></codeline>
<codeline lineno="2489"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>&lt;<sp/>pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>)</highlight></codeline>
<codeline lineno="2491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>=<sp/>pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>;</highlight></codeline>
<codeline lineno="2493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recalculate<sp/>aligned<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>MakeFramesFromHns(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_CalculateAlignedPeriod(pSub,<sp/>&amp;framesPerLatency,<sp/>ALIGN_BWD);</highlight></codeline>
<codeline lineno="2496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2497"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2499"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>&lt;<sp/>pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" kindref="member">MinimumDevicePeriod</ref>)</highlight></codeline>
<codeline lineno="2501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>=<sp/>pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1addab082d2de47dd4039b87efe9d73d71" kindref="member">MinimumDevicePeriod</ref>;</highlight></codeline>
<codeline lineno="2503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recalculate<sp/>aligned<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>MakeFramesFromHns(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_CalculateAlignedPeriod(pSub,<sp/>&amp;framesPerLatency,<sp/>ALIGN_FWD);</highlight></codeline>
<codeline lineno="2506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2507"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2508"><highlight class="normal"></highlight></codeline>
<codeline lineno="2513"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>)</highlight></codeline>
<codeline lineno="2520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>MAX_BUFFER_EVENT_DURATION<sp/>=<sp/>500<sp/><sp/>*<sp/>10000;</highlight></codeline>
<codeline lineno="2522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a83927f70641d4e9a344563bd9ddb15ae" kindref="member">REFERENCE_TIME</ref><sp/>MAX_BUFFER_POLL_DURATION<sp/><sp/>=<sp/>2000<sp/>*<sp/>10000;</highlight></codeline>
<codeline lineno="2523"><highlight class="normal"></highlight></codeline>
<codeline lineno="2524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>)<sp/><sp/></highlight><highlight class="comment">//<sp/>pull<sp/>mode,<sp/>max<sp/>500ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>&gt;<sp/>MAX_BUFFER_EVENT_DURATION)</highlight></codeline>
<codeline lineno="2527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>=<sp/>MAX_BUFFER_EVENT_DURATION;</highlight></codeline>
<codeline lineno="2529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recalculate<sp/>aligned<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>MakeFramesFromHns(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_CalculateAlignedPeriod(pSub,<sp/>&amp;framesPerLatency,<sp/>ALIGN_BWD);</highlight></codeline>
<codeline lineno="2532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>push<sp/>mode,<sp/>max<sp/>2000ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>&gt;<sp/>MAX_BUFFER_POLL_DURATION)</highlight></codeline>
<codeline lineno="2537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>=<sp/>MAX_BUFFER_POLL_DURATION;</highlight></codeline>
<codeline lineno="2539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recalculate<sp/>aligned<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>MakeFramesFromHns(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_CalculateAlignedPeriod(pSub,<sp/>&amp;framesPerLatency,<sp/>ALIGN_BWD);</highlight></codeline>
<codeline lineno="2542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2545"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2546"><highlight class="normal"></highlight></codeline>
<codeline lineno="2547"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>Raw<sp/>mode<sp/>(applicable<sp/>only<sp/>to<sp/>IAudioClient2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2548"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__IAudioClient2_INTERFACE_DEFINED__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2549"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(GetAudioClientVersion()<sp/>&gt;=<sp/>2)</highlight></codeline>
<codeline lineno="2550"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pa_AudioClientProperties<sp/>audioProps<sp/>=<sp/>{<sp/>0<sp/>};</highlight></codeline>
<codeline lineno="2552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>audioProps.cbSize<sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(pa_AudioClientProperties);</highlight></codeline>
<codeline lineno="2553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>audioProps.bIsOffload<sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="2554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>audioProps.eCategory<sp/><sp/>=<sp/>(AUDIO_STREAM_CATEGORY)pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>.<ref refid="struct_pa_wasapi_stream_info_1a4a85848eaa76d85d0d305060b094d76a" kindref="member">streamCategory</ref>;</highlight></codeline>
<codeline lineno="2555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>switch<sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>.<ref refid="struct_pa_wasapi_stream_info_1a9ecd3ca932f2de23d1e1991f6ab3b580" kindref="member">streamOption</ref>)</highlight></codeline>
<codeline lineno="2556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a5ae8d22b8699b82f6ee63d195f8c857fa02bcdd8d429cdcd27f16b05c63d78c9d" kindref="member">eStreamOptionRaw</ref>:</highlight></codeline>
<codeline lineno="2558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(GetWindowsVersion()<sp/>&gt;=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966ab5cea250cefffe760d8947ae4c3107d0" kindref="member">WINDOWS_8_1_SERVER2012R2</ref>)</highlight></codeline>
<codeline lineno="2559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>audioProps.Options<sp/>=<sp/>pa_AUDCLNT_STREAMOPTIONS_RAW;</highlight></codeline>
<codeline lineno="2560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a5ae8d22b8699b82f6ee63d195f8c857faa9671dd31883a02493ef2ab69db3126c" kindref="member">eStreamOptionMatchFormat</ref>:</highlight></codeline>
<codeline lineno="2562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(GetWindowsVersion()<sp/>&gt;=<sp/><ref refid="pa__win__wasapi_8c_1aec13744cba5f4a8e731ab1e136a2f966a5b9050d995ef03019284af641563c15f" kindref="member">WINDOWS_10_SERVER2016</ref>)</highlight></codeline>
<codeline lineno="2563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>audioProps.Options<sp/>=<sp/>pa_AUDCLNT_STREAMOPTIONS_MATCH_FORMAT;</highlight></codeline>
<codeline lineno="2564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2566"><highlight class="normal"></highlight></codeline>
<codeline lineno="2567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient2_SetClientProperties((IAudioClient2<sp/>*)audioClient,<sp/>(AudioClientProperties<sp/>*)&amp;audioProps);</highlight></codeline>
<codeline lineno="2568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>IAudioClient2_SetClientProperties(Category<sp/>=<sp/>%d,<sp/>Options<sp/>=<sp/>%d)<sp/>failed<sp/>with<sp/>error<sp/>=<sp/>%08X\n&quot;</highlight><highlight class="normal">,<sp/>audioProps.eCategory,<sp/>audioProps.Options,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)hr));</highlight></codeline>
<codeline lineno="2571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>IAudioClient2<sp/>set<sp/>properties:<sp/>IsOffload<sp/>=<sp/>%d,<sp/>Category<sp/>=<sp/>%d,<sp/>Options<sp/>=<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>audioProps.bIsOffload,<sp/>audioProps.eCategory,<sp/>audioProps.Options));</highlight></codeline>
<codeline lineno="2575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2576"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2577"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2578"><highlight class="normal"></highlight></codeline>
<codeline lineno="2579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Open<sp/>the<sp/>stream<sp/>and<sp/>associate<sp/>it<sp/>with<sp/>an<sp/>audio<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2580"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_Initialize(audioClient,</highlight></codeline>
<codeline lineno="2581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref>,</highlight></codeline>
<codeline lineno="2582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref>,</highlight></codeline>
<codeline lineno="2583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,</highlight></codeline>
<codeline lineno="2584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>:<sp/>0),</highlight></codeline>
<codeline lineno="2585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format,</highlight></codeline>
<codeline lineno="2586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="2587"><highlight class="normal"></highlight></codeline>
<codeline lineno="2592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>((hr<sp/>==<sp/>E_OUTOFMEMORY)<sp/>&amp;&amp;<sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>&gt;<sp/>(100<sp/>*<sp/>10000)))</highlight></codeline>
<codeline lineno="2593"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>CreateAudioClient:<sp/>decreasing<sp/>buffer<sp/>size<sp/>to<sp/>%d<sp/>milliseconds\n&quot;</highlight><highlight class="normal">,<sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>/<sp/>10000)));</highlight></codeline>
<codeline lineno="2595"><highlight class="normal"></highlight></codeline>
<codeline lineno="2596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Decrease<sp/>by<sp/>100ms<sp/>and<sp/>try<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>-=<sp/>(100<sp/>*<sp/>10000);</highlight></codeline>
<codeline lineno="2598"><highlight class="normal"></highlight></codeline>
<codeline lineno="2599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recalculate<sp/>aligned<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerLatency<sp/>=<sp/>MakeFramesFromHns(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_CalculateAlignedPeriod(pSub,<sp/>&amp;framesPerLatency,<sp/>ALIGN_BWD);</highlight></codeline>
<codeline lineno="2602"><highlight class="normal"></highlight></codeline>
<codeline lineno="2603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>the<sp/>previous<sp/>allocations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(audioClient);</highlight></codeline>
<codeline lineno="2605"><highlight class="normal"></highlight></codeline>
<codeline lineno="2606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>a<sp/>new<sp/>audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>GetAudioClientIID(),<sp/>CLSCTX_ALL,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;audioClient);</highlight></codeline>
<codeline lineno="2608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="2611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2614"><highlight class="normal"></highlight></codeline>
<codeline lineno="2615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Open<sp/>the<sp/>stream<sp/>and<sp/>associate<sp/>it<sp/>with<sp/>an<sp/>audio<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_Initialize(audioClient,</highlight></codeline>
<codeline lineno="2617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref>,</highlight></codeline>
<codeline lineno="2618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref>,</highlight></codeline>
<codeline lineno="2619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,</highlight></codeline>
<codeline lineno="2620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>:<sp/>0),</highlight></codeline>
<codeline lineno="2621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format,</highlight></codeline>
<codeline lineno="2622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="2623"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2624"><highlight class="normal"></highlight></codeline>
<codeline lineno="2627"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/><ref refid="audioclient_8h_1a6b0df930699b9255c67ff1a35800bed6" kindref="member">AUDCLNT_E_BUFFER_SIZE_ERROR</ref>)</highlight></codeline>
<codeline lineno="2628"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>default</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>=<sp/>pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>;</highlight></codeline>
<codeline lineno="2631"><highlight class="normal"></highlight></codeline>
<codeline lineno="2632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>CreateAudioClient:<sp/>correcting<sp/>buffer<sp/>size<sp/>to<sp/>device<sp/>default\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="2633"><highlight class="normal"></highlight></codeline>
<codeline lineno="2634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>the<sp/>previous<sp/>allocations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(audioClient);</highlight></codeline>
<codeline lineno="2636"><highlight class="normal"></highlight></codeline>
<codeline lineno="2637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>a<sp/>new<sp/>audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>GetAudioClientIID(),<sp/>CLSCTX_ALL,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;audioClient);</highlight></codeline>
<codeline lineno="2639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="2642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2645"><highlight class="normal"></highlight></codeline>
<codeline lineno="2646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Open<sp/>the<sp/>stream<sp/>and<sp/>associate<sp/>it<sp/>with<sp/>an<sp/>audio<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_Initialize(audioClient,</highlight></codeline>
<codeline lineno="2648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref>,</highlight></codeline>
<codeline lineno="2649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref>,</highlight></codeline>
<codeline lineno="2650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,</highlight></codeline>
<codeline lineno="2651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>:<sp/>0),</highlight></codeline>
<codeline lineno="2652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format,</highlight></codeline>
<codeline lineno="2653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="2654"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2655"><highlight class="normal"></highlight></codeline>
<codeline lineno="2659"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/><ref refid="pa__win__wasapi_8c_1a7d7f5a942a92bc351ee138fb96551d6f" kindref="member">AUDCLNT_E_BUFFER_SIZE_NOT_ALIGNED</ref>)</highlight></codeline>
<codeline lineno="2660"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frames<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2662"><highlight class="normal"></highlight></codeline>
<codeline lineno="2663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>next<sp/>aligned<sp/>frame</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetBufferSize(audioClient,<sp/>&amp;frames);</highlight></codeline>
<codeline lineno="2665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2671"><highlight class="normal"></highlight></codeline>
<codeline lineno="2672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>CreateAudioClient:<sp/>aligning<sp/>buffer<sp/>size<sp/>to<sp/>%<sp/>frames\n&quot;</highlight><highlight class="normal">,<sp/>frames));</highlight></codeline>
<codeline lineno="2673"><highlight class="normal"></highlight></codeline>
<codeline lineno="2674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>the<sp/>previous<sp/>allocations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(audioClient);</highlight></codeline>
<codeline lineno="2676"><highlight class="normal"></highlight></codeline>
<codeline lineno="2677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>a<sp/>new<sp/>audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(pInfo-&gt;<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>GetAudioClientIID(),<sp/>CLSCTX_ALL,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;audioClient);</highlight></codeline>
<codeline lineno="2679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="2682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2685"><highlight class="normal"></highlight></codeline>
<codeline lineno="2686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>closest<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((error<sp/>=<sp/>GetClosestFormat(audioClient,<sp/>sampleRate,<sp/>params,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref>,<sp/>&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>,<sp/><ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref>))<sp/>!=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>)</highlight></codeline>
<codeline lineno="2688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/>error;</highlight></codeline>
<codeline lineno="2690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr<sp/>=<sp/><ref refid="audioclient_8h_1ab6abf418757067f0f0565b73b13303e7" kindref="member">AUDCLNT_E_UNSUPPORTED_FORMAT</ref>);<sp/></highlight><highlight class="comment">//<sp/>fail,<sp/>format<sp/>not<sp/>supported</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2693"><highlight class="normal"></highlight></codeline>
<codeline lineno="2694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>for<sp/>Mono<sp/>&gt;&gt;<sp/>Stereo<sp/>workaround</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((params-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>==<sp/>1)<sp/>&amp;&amp;<sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nChannels<sp/>==<sp/>2))</highlight></codeline>
<codeline lineno="2696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*if<sp/>(blocking)</highlight></codeline>
<codeline lineno="2698"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2699"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LogHostError(hr<sp/>=<sp/>AUDCLNT_E_UNSUPPORTED_FORMAT);</highlight></codeline>
<codeline lineno="2700"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goto<sp/>done;<sp/>//<sp/>fail,<sp/>blocking<sp/>mode<sp/>not<sp/>supported</highlight></codeline>
<codeline lineno="2701"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2702"><highlight class="normal"></highlight></codeline>
<codeline lineno="2703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Select<sp/>mixer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref><sp/>=<sp/>_GetMonoToStereoMixer(WaveToPaFormat(&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>),<sp/>(<ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref><sp/>?<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046cab2ffbd89db8f6270bf898848a9b77668" kindref="member">MIX_DIR__1TO2</ref><sp/>:<sp/><ref refid="pa__win__wasapi_8c_1a779380620e3456d84f1eac21a0cd046ca0858f41d4d725a8638f791327d303f33" kindref="member">MIX_DIR__2TO1_L</ref>));</highlight></codeline>
<codeline lineno="2705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="2708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr<sp/>=<sp/><ref refid="audioclient_8h_1ab6abf418757067f0f0565b73b13303e7" kindref="member">AUDCLNT_E_UNSUPPORTED_FORMAT</ref>);</highlight></codeline>
<codeline lineno="2709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;<sp/></highlight><highlight class="comment">//<sp/>fail,<sp/>no<sp/>mixer<sp/>for<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2712"><highlight class="normal"></highlight></codeline>
<codeline lineno="2713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>=<sp/>MakeHnsPeriod(frames,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="2715"><highlight class="normal"></highlight></codeline>
<codeline lineno="2716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Open<sp/>the<sp/>stream<sp/>and<sp/>associate<sp/>it<sp/>with<sp/>an<sp/>audio<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_Initialize(audioClient,</highlight></codeline>
<codeline lineno="2718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref>,</highlight></codeline>
<codeline lineno="2719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref>,</highlight></codeline>
<codeline lineno="2720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,</highlight></codeline>
<codeline lineno="2721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref><sp/>:<sp/>0),</highlight></codeline>
<codeline lineno="2722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format,</highlight></codeline>
<codeline lineno="2723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="2724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2730"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2731"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2732"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2733"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="2735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2737"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2738"><highlight class="normal"></highlight></codeline>
<codeline lineno="2739"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2740"><highlight class="normal"><sp/><sp/><sp/><sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>=<sp/>audioClient;</highlight></codeline>
<codeline lineno="2741"><highlight class="normal"><sp/><sp/><sp/><sp/>IAudioClient_AddRef(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>);</highlight></codeline>
<codeline lineno="2742"><highlight class="normal"></highlight></codeline>
<codeline lineno="2743"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recalculate<sp/>buffers<sp/>count</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2744"><highlight class="normal"><sp/><sp/><sp/><sp/>_RecalculateBuffersCount(pSub,</highlight></codeline>
<codeline lineno="2745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>userFramesPerBuffer,</highlight></codeline>
<codeline lineno="2746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MakeFramesFromHns(pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1acfbdb3c9c3d81b98e7338585aac06bc1" kindref="member">period</ref>,<sp/>pSub-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec),</highlight></codeline>
<codeline lineno="2747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fullDuplex);</highlight></codeline>
<codeline lineno="2748"><highlight class="normal"></highlight></codeline>
<codeline lineno="2749"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>No<sp/>error,<sp/>client<sp/>is<sp/>succesfully<sp/>created</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2750"><highlight class="normal"><sp/><sp/><sp/><sp/>(*pa_error)<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2751"><highlight class="normal"></highlight></codeline>
<codeline lineno="2752"><highlight class="normal"><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>:</highlight></codeline>
<codeline lineno="2753"><highlight class="normal"></highlight></codeline>
<codeline lineno="2754"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Clean<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2755"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(audioClient);</highlight></codeline>
<codeline lineno="2756"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hr;</highlight></codeline>
<codeline lineno="2757"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2758"><highlight class="normal"></highlight></codeline>
<codeline lineno="2759"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2760"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ActivateAudioClientOutput(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)</highlight></codeline>
<codeline lineno="2761"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2762"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="2763"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result;</highlight></codeline>
<codeline lineno="2764"><highlight class="normal"></highlight></codeline>
<codeline lineno="2765"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>maxBufferSize<sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2766"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>buffer_latency<sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2767"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>framesPerBuffer<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aa46fc2eb761fffa9ee34baf829b70e0e" kindref="member">frames_per_buffer</ref>;</highlight></codeline>
<codeline lineno="2768"><highlight class="normal"></highlight></codeline>
<codeline lineno="2769"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>Audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2770"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>CreateAudioClient(stream,<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/>&amp;result);</highlight></codeline>
<codeline lineno="2771"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2772"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result);</highlight></codeline>
<codeline lineno="2774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2775"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2776"><highlight class="normal"><sp/><sp/><sp/><sp/>LogWAVEFORMATEXTENSIBLE(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>);</highlight></codeline>
<codeline lineno="2777"><highlight class="normal"></highlight></codeline>
<codeline lineno="2778"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Activate<sp/>volume</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2779"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2780"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*hr<sp/>=<sp/>info-&gt;device-&gt;Activate(</highlight></codeline>
<codeline lineno="2781"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__uuidof(IAudioEndpointVolume),<sp/>CLSCTX_INPROC_SERVER,<sp/>NULL,</highlight></codeline>
<codeline lineno="2782"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void**)&amp;stream-&gt;outVol);</highlight></codeline>
<codeline lineno="2783"><highlight class="comment"><sp/><sp/><sp/><sp/>if<sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2784"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>paInvalidDevice;*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2785"><highlight class="normal"></highlight></codeline>
<codeline lineno="2786"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>max<sp/>possible<sp/>buffer<sp/>size<sp/>to<sp/>check<sp/>if<sp/>it<sp/>is<sp/>not<sp/>less<sp/>than<sp/>that<sp/>we<sp/>request</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2787"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetBufferSize(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>,<sp/>&amp;maxBufferSize);</highlight></codeline>
<codeline lineno="2788"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2789"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>);</highlight></codeline>
<codeline lineno="2792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2793"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2794"><highlight class="normal"></highlight></codeline>
<codeline lineno="2795"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Correct<sp/>buffer<sp/>to<sp/>max<sp/>size<sp/>if<sp/>it<sp/>maxed<sp/>out<sp/>result<sp/>of<sp/>GetBufferSize</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2796"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae3cbfddfe0db9949574f9ca11d7708fc" kindref="member">bufferSize</ref><sp/>=<sp/>maxBufferSize;</highlight></codeline>
<codeline lineno="2797"><highlight class="normal"></highlight></codeline>
<codeline lineno="2798"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>interface<sp/>latency<sp/>(actually<sp/>uneeded<sp/>as<sp/>we<sp/>calculate<sp/>latency<sp/>from<sp/>the<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2799"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>maxBufferSize).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2800"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetStreamLatency(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a06ef93d9ac069dea0fef0c40ff4b8c76" kindref="member">deviceLatency</ref>);</highlight></codeline>
<codeline lineno="2801"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2802"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>);</highlight></codeline>
<codeline lineno="2805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2806"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2807"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//stream-&gt;out.latencySeconds<sp/>=<sp/>nano100ToSeconds(stream-&gt;out.deviceLatency);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2808"><highlight class="normal"></highlight></codeline>
<codeline lineno="2809"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Number<sp/>of<sp/>frames<sp/>that<sp/>are<sp/>required<sp/>at<sp/>each<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2810"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref><sp/>=<sp/>maxBufferSize;</highlight></codeline>
<codeline lineno="2811"><highlight class="normal"></highlight></codeline>
<codeline lineno="2812"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>frames<sp/>per<sp/>single<sp/>buffer,<sp/>if<sp/>buffers<sp/>&gt;<sp/>1<sp/>then<sp/>always<sp/>framesPerBuffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2813"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref><sp/>=</highlight></codeline>
<codeline lineno="2814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7158c290cfa44a35117a04283b6f0fa2" kindref="member">userBufferAndHostMatch</ref><sp/>?<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref><sp/>:<sp/>framesPerBuffer);</highlight></codeline>
<codeline lineno="2815"><highlight class="normal"></highlight></codeline>
<codeline lineno="2816"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>buffer<sp/>latency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2817"><highlight class="normal"><sp/><sp/><sp/><sp/>buffer_latency<sp/>=<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)maxBufferSize<sp/>/<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec;</highlight></codeline>
<codeline lineno="2818"><highlight class="normal"></highlight></codeline>
<codeline lineno="2819"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Append<sp/>buffer<sp/>latency<sp/>to<sp/>interface<sp/>latency<sp/>in<sp/>shared<sp/>mode<sp/>(see<sp/>GetStreamLatency<sp/>notes)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2820"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref><sp/>=<sp/>buffer_latency;</highlight></codeline>
<codeline lineno="2821"><highlight class="normal"></highlight></codeline>
<codeline lineno="2822"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI::OpenStream(output):<sp/>framesPerUser[<sp/>%d<sp/>]<sp/>framesPerHost[<sp/>%d<sp/>]<sp/>latency[<sp/>%.02fms<sp/>]<sp/>exclusive[<sp/>%s<sp/>]<sp/>wow64_fix[<sp/>%s<sp/>]<sp/>mode[<sp/>%s<sp/>]\n&quot;</highlight><highlight class="normal">,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)framesPerBuffer,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref>*1000.0f),<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/></highlight><highlight class="stringliteral">&quot;YES&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;NO&quot;</highlight><highlight class="normal">),<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0886e7cdcd3e6f7f989625d7f7493eb9" kindref="member">wow64_workaround</ref><sp/>?<sp/></highlight><highlight class="stringliteral">&quot;YES&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;NO&quot;</highlight><highlight class="normal">),<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref><sp/>?<sp/></highlight><highlight class="stringliteral">&quot;EVENT&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;POLL&quot;</highlight><highlight class="normal">)));</highlight></codeline>
<codeline lineno="2823"><highlight class="normal"></highlight></codeline>
<codeline lineno="2824"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2825"><highlight class="normal"></highlight></codeline>
<codeline lineno="2826"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2827"><highlight class="normal"></highlight></codeline>
<codeline lineno="2828"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2829"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2830"><highlight class="normal"></highlight></codeline>
<codeline lineno="2831"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2832"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ActivateAudioClientInput(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)</highlight></codeline>
<codeline lineno="2833"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2834"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="2835"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result;</highlight></codeline>
<codeline lineno="2836"><highlight class="normal"></highlight></codeline>
<codeline lineno="2837"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>maxBufferSize<sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2838"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>buffer_latency<sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2839"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>framesPerBuffer<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aa46fc2eb761fffa9ee34baf829b70e0e" kindref="member">frames_per_buffer</ref>;</highlight></codeline>
<codeline lineno="2840"><highlight class="normal"></highlight></codeline>
<codeline lineno="2841"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>Audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2842"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>CreateAudioClient(stream,<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>,<sp/>&amp;result);</highlight></codeline>
<codeline lineno="2843"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2844"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result);</highlight></codeline>
<codeline lineno="2846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2847"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2848"><highlight class="normal"><sp/><sp/><sp/><sp/>LogWAVEFORMATEXTENSIBLE(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>);</highlight></codeline>
<codeline lineno="2849"><highlight class="normal"></highlight></codeline>
<codeline lineno="2850"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>volume<sp/>mgr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2851"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a035111d1e825146eae105bd83d810397" kindref="member">inVol</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2852"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*hr<sp/>=<sp/>info-&gt;device-&gt;Activate(</highlight></codeline>
<codeline lineno="2853"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__uuidof(IAudioEndpointVolume),<sp/>CLSCTX_INPROC_SERVER,<sp/>NULL,</highlight></codeline>
<codeline lineno="2854"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void**)&amp;stream-&gt;inVol);</highlight></codeline>
<codeline lineno="2855"><highlight class="comment"><sp/><sp/><sp/><sp/>if<sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2856"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>paInvalidDevice;*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2857"><highlight class="normal"></highlight></codeline>
<codeline lineno="2858"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>max<sp/>possible<sp/>buffer<sp/>size<sp/>to<sp/>check<sp/>if<sp/>it<sp/>is<sp/>not<sp/>less<sp/>than<sp/>that<sp/>we<sp/>request</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2859"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetBufferSize(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>,<sp/>&amp;maxBufferSize);</highlight></codeline>
<codeline lineno="2860"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2861"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>);</highlight></codeline>
<codeline lineno="2864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2865"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2866"><highlight class="normal"></highlight></codeline>
<codeline lineno="2867"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Correct<sp/>buffer<sp/>to<sp/>max<sp/>size<sp/>if<sp/>it<sp/>maxed<sp/>out<sp/>result<sp/>of<sp/>GetBufferSize</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2868"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae3cbfddfe0db9949574f9ca11d7708fc" kindref="member">bufferSize</ref><sp/>=<sp/>maxBufferSize;</highlight></codeline>
<codeline lineno="2869"><highlight class="normal"></highlight></codeline>
<codeline lineno="2870"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>interface<sp/>latency<sp/>(actually<sp/>uneeded<sp/>as<sp/>we<sp/>calculate<sp/>latency<sp/>from<sp/>the<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2871"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>maxBufferSize).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2872"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetStreamLatency(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a06ef93d9ac069dea0fef0c40ff4b8c76" kindref="member">deviceLatency</ref>);</highlight></codeline>
<codeline lineno="2873"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="2874"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="2876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>);</highlight></codeline>
<codeline lineno="2877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2878"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2879"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//stream-&gt;in.latencySeconds<sp/>=<sp/>nano100ToSeconds(stream-&gt;in.deviceLatency);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2880"><highlight class="normal"></highlight></codeline>
<codeline lineno="2881"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Number<sp/>of<sp/>frames<sp/>that<sp/>are<sp/>required<sp/>at<sp/>each<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2882"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref><sp/>=<sp/>maxBufferSize;</highlight></codeline>
<codeline lineno="2883"><highlight class="normal"></highlight></codeline>
<codeline lineno="2884"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>frames<sp/>per<sp/>single<sp/>buffer,<sp/>if<sp/>buffers<sp/>&gt;<sp/>1<sp/>then<sp/>always<sp/>framesPerBuffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2885"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref><sp/>=</highlight></codeline>
<codeline lineno="2886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7158c290cfa44a35117a04283b6f0fa2" kindref="member">userBufferAndHostMatch</ref><sp/>?<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref><sp/>:<sp/>framesPerBuffer);</highlight></codeline>
<codeline lineno="2887"><highlight class="normal"></highlight></codeline>
<codeline lineno="2888"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>buffer<sp/>latency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2889"><highlight class="normal"><sp/><sp/><sp/><sp/>buffer_latency<sp/>=<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)maxBufferSize<sp/>/<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec;</highlight></codeline>
<codeline lineno="2890"><highlight class="normal"></highlight></codeline>
<codeline lineno="2891"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Append<sp/>buffer<sp/>latency<sp/>to<sp/>interface<sp/>latency<sp/>in<sp/>shared<sp/>mode<sp/>(see<sp/>GetStreamLatency<sp/>notes)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2892"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref><sp/>=<sp/>buffer_latency;</highlight></codeline>
<codeline lineno="2893"><highlight class="normal"></highlight></codeline>
<codeline lineno="2894"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI::OpenStream(input):<sp/>framesPerUser[<sp/>%d<sp/>]<sp/>framesPerHost[<sp/>%d<sp/>]<sp/>latency[<sp/>%.02fms<sp/>]<sp/>exclusive[<sp/>%s<sp/>]<sp/>wow64_fix[<sp/>%s<sp/>]<sp/>mode[<sp/>%s<sp/>]\n&quot;</highlight><highlight class="normal">,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)framesPerBuffer,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref>*1000.0f),<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/></highlight><highlight class="stringliteral">&quot;YES&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;NO&quot;</highlight><highlight class="normal">),<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0886e7cdcd3e6f7f989625d7f7493eb9" kindref="member">wow64_workaround</ref><sp/>?<sp/></highlight><highlight class="stringliteral">&quot;YES&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;NO&quot;</highlight><highlight class="normal">),<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref><sp/>?<sp/></highlight><highlight class="stringliteral">&quot;EVENT&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;POLL&quot;</highlight><highlight class="normal">)));</highlight></codeline>
<codeline lineno="2895"><highlight class="normal"></highlight></codeline>
<codeline lineno="2896"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2897"><highlight class="normal"></highlight></codeline>
<codeline lineno="2898"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2899"><highlight class="normal"></highlight></codeline>
<codeline lineno="2900"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2901"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2902"><highlight class="normal"></highlight></codeline>
<codeline lineno="2903"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2904"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>OpenStream(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="2905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>**<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="2906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="2907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="2908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="2909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerBuffer,</highlight></codeline>
<codeline lineno="2910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a37c7ac3ace7d2dd1430f40ecdee4ebb6" kindref="member">PaStreamFlags</ref><sp/>streamFlags,</highlight></codeline>
<codeline lineno="2911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a8a60fb2a5ec9cbade3f54a9c978e2710" kindref="member">PaStreamCallback</ref><sp/>*streamCallback,</highlight></codeline>
<codeline lineno="2912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>)</highlight></codeline>
<codeline lineno="2913"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2914"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2915"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="2916"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi<sp/>=<sp/>(<ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="2917"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2918"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>inputChannelCount,<sp/>outputChannelCount;</highlight></codeline>
<codeline lineno="2919"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>inputSampleFormat,<sp/>outputSampleFormat;</highlight></codeline>
<codeline lineno="2920"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>hostInputSampleFormat,<sp/>hostOutputSampleFormat;</highlight></codeline>
<codeline lineno="2921"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*inputStreamInfo<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*outputStreamInfo<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2922"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_device_info" kindref="compound">PaWasapiDeviceInfo</ref><sp/>*<ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2923"><highlight class="normal"><sp/><sp/><sp/><sp/>ULONG<sp/>framesPerHostCallback;</highlight></codeline>
<codeline lineno="2924"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484f" kindref="member">PaUtilHostBufferSizeMode</ref><sp/>bufferMode;</highlight></codeline>
<codeline lineno="2925"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>fullDuplex<sp/>=<sp/>((inputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;<sp/>(outputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>));</highlight></codeline>
<codeline lineno="2926"><highlight class="normal"></highlight></codeline>
<codeline lineno="2927"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>validate<sp/>PaStreamParameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2928"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((result<sp/>=<sp/>IsStreamParamsValid(hostApi,<sp/>inputParameters,<sp/>outputParameters,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>))<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="2929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result);</highlight></codeline>
<codeline lineno="2930"><highlight class="normal"></highlight></codeline>
<codeline lineno="2931"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>platform<sp/>specific<sp/>flags</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2932"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((streamFlags<sp/>&amp;<sp/><ref refid="portaudio_8h_1a8522957e1bf814b9782d3a0e314c8b51" kindref="member">paPlatformSpecificFlags</ref>)<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="2933"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aa5e7d0d9ea49ef845a93c89a3d138294" kindref="member">paInvalidFlag</ref>);<sp/></highlight><highlight class="comment">/*<sp/>unexpected<sp/>platform<sp/>specific<sp/>flag<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2936"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2937"><highlight class="normal"></highlight></codeline>
<codeline lineno="2938"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Allocate<sp/>memory<sp/>for<sp/>PaWasapiStream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2939"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)<ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>)))<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2940"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>);</highlight></codeline>
<codeline lineno="2942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="2943"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2944"><highlight class="normal"></highlight></codeline>
<codeline lineno="2945"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Default<sp/>thread<sp/>priority<sp/>is<sp/>Audio:<sp/>for<sp/>exclusive<sp/>mode<sp/>we<sp/>will<sp/>use<sp/>Pro<sp/>Audio.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2946"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref><sp/>=<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661a06c9f997fd5d9e11d4ef8bf67342f031" kindref="member">eThreadPriorityAudio</ref>;</highlight></codeline>
<codeline lineno="2947"><highlight class="normal"></highlight></codeline>
<codeline lineno="2948"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>default<sp/>number<sp/>of<sp/>frames:<sp/>paFramesPerBufferUnspecified</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2949"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(framesPerBuffer<sp/>==<sp/><ref refid="portaudio_8h_1ac1e20b97c1858a59bc62823573c59f0b" kindref="member">paFramesPerBufferUnspecified</ref>)</highlight></codeline>
<codeline lineno="2950"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>framesPerBufferIn<sp/><sp/>=<sp/>0,<sp/>framesPerBufferOut<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info<sp/>=<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>];</highlight></codeline>
<codeline lineno="2955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBufferIn<sp/>=<sp/>MakeFramesFromHns(info-&gt;<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>);</highlight></codeline>
<codeline lineno="2956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info<sp/>=<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>];</highlight></codeline>
<codeline lineno="2960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBufferOut<sp/>=<sp/>MakeFramesFromHns(info-&gt;<ref refid="struct_pa_wasapi_device_info_1a0639bc7454ecd808aa7fed3ed1436822" kindref="member">DefaultDevicePeriod</ref>,<sp/>(<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>);</highlight></codeline>
<codeline lineno="2961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>choosing<sp/>maximum<sp/>default<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBuffer<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>(framesPerBufferIn,<sp/>framesPerBufferOut);</highlight></codeline>
<codeline lineno="2964"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2965"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(framesPerBuffer<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="2966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBuffer<sp/>=<sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>/<sp/>100)<sp/>*<sp/>2;</highlight></codeline>
<codeline lineno="2967"><highlight class="normal"></highlight></codeline>
<codeline lineno="2968"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a9c3f5727f8a7d4f8cad386d0625799cf" kindref="member">stopped</ref><sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="2969"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref><sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="2970"><highlight class="normal"></highlight></codeline>
<codeline lineno="2971"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>create<sp/>device:<sp/>Input</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2972"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2973"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputChannelCount<sp/>=<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>;</highlight></codeline>
<codeline lineno="2975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputSampleFormat<sp/>=<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref>;</highlight></codeline>
<codeline lineno="2976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>];</highlight></codeline>
<codeline lineno="2977"><highlight class="normal"></highlight></codeline>
<codeline lineno="2978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>default<sp/>Shared<sp/>Mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>;</highlight></codeline>
<codeline lineno="2980"><highlight class="normal"></highlight></codeline>
<codeline lineno="2981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PaWasapiStreamInfo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>,<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>,<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>),<sp/>((<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*)inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>)-&gt;size));</highlight></codeline>
<codeline lineno="2985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>.<ref refid="struct_pa_wasapi_stream_info_1ae491f41ce5954cddd438624dc69eba1b" kindref="member">size</ref><sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>);</highlight></codeline>
<codeline lineno="2986"><highlight class="normal"></highlight></codeline>
<codeline lineno="2987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac01b82e3992a001815a26eeb5a225e8a" kindref="member">stream_params</ref>.<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref><sp/>=<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>;</highlight></codeline>
<codeline lineno="2988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputStreamInfo<sp/>=<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>;</highlight></codeline>
<codeline lineno="2989"><highlight class="normal"></highlight></codeline>
<codeline lineno="2990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a614eb0d553c247fc55888c5a978b90" kindref="member">flags</ref><sp/>=<sp/>inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref>;</highlight></codeline>
<codeline lineno="2991"><highlight class="normal"></highlight></codeline>
<codeline lineno="2992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exclusive<sp/>Mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725bea03a519ca5e890b232994c25bc2a15b1e" kindref="member">paWinWasapiExclusive</ref>)</highlight></codeline>
<codeline lineno="2994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Boost<sp/>thread<sp/>priority</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref><sp/>=<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661a9a34413b0a045f4c44d10a49d3357187" kindref="member">eThreadPriorityProAudio</ref>;</highlight></codeline>
<codeline lineno="2997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>Exclusive</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>;</highlight></codeline>
<codeline lineno="2999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3000"><highlight class="normal"></highlight></codeline>
<codeline lineno="3001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>explicit<sp/>thread<sp/>priority<sp/>level</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725bea1fcbc0f3ce367c5ffa8bd49985f7d65a" kindref="member">paWinWasapiThreadPriority</ref>)</highlight></codeline>
<codeline lineno="3003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a81ed024aceceb79e593aa4f1ec28594a" kindref="member">threadPriority</ref><sp/>&gt;<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661a20a9497196a4fe472458ebba0ab678f4" kindref="member">eThreadPriorityNone</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a81ed024aceceb79e593aa4f1ec28594a" kindref="member">threadPriority</ref><sp/>&lt;=<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661aff35fbdda7cff800902be260ad350540" kindref="member">eThreadPriorityWindowManager</ref>))</highlight></codeline>
<codeline lineno="3006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref><sp/>=<sp/>inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a81ed024aceceb79e593aa4f1ec28594a" kindref="member">threadPriority</ref>;</highlight></codeline>
<codeline lineno="3007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3009"><highlight class="normal"></highlight></codeline>
<codeline lineno="3010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Choose<sp/>processing<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref><sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="3012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a1fe6be6a2edf0292a0a3d6f55cf83fc6" kindref="member">useWOW64Workaround</ref>)</highlight></codeline>
<codeline lineno="3013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(streamCallback<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((inputStreamInfo<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;<sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beaa3171090ee90b00f3f68c906b8dd7e5d" kindref="member">paWinWasapiPolling</ref>))</highlight></codeline>
<codeline lineno="3019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fullDuplex)</highlight></codeline>
<codeline lineno="3022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface<sp/>is<sp/>implemented<sp/>for<sp/>full-duplex<sp/>mode<sp/>also</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3023"><highlight class="normal"></highlight></codeline>
<codeline lineno="3024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(info-&gt;<ref refid="struct_pa_wasapi_device_info_1a58ad544b2b413b8bd19514e8d115ebb8" kindref="member">flow</ref><sp/>==<sp/><ref refid="mmdeviceapi_8h_1a03f30e2e3a8ec4b8cc901c1ff40daac1ab5120fdebc73fe7c6de01e7db1e0526c" kindref="member">eRender</ref>)</highlight></codeline>
<codeline lineno="3025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>|=<sp/><ref refid="_audio_session_types_8h_1adb566b541fd437b3fc5d118962a99a96" kindref="member">AUDCLNT_STREAMFLAGS_LOOPBACK</ref>;</highlight></codeline>
<codeline lineno="3026"><highlight class="normal"></highlight></codeline>
<codeline lineno="3027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Fill<sp/>parameters<sp/>for<sp/>Audio<sp/>Client<sp/>creation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="3029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac01b82e3992a001815a26eeb5a225e8a" kindref="member">stream_params</ref><sp/><sp/><sp/><sp/><sp/>=<sp/>(*inputParameters);</highlight></codeline>
<codeline lineno="3030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aa46fc2eb761fffa9ee34baf829b70e0e" kindref="member">frames_per_buffer</ref><sp/>=<sp/>framesPerBuffer;</highlight></codeline>
<codeline lineno="3031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aaf327b0ecb554eb9d8b331d647c000b6" kindref="member">sample_rate</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="3032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a1e3a0ed3228bb5fb0ff14f3207c8f2c4" kindref="member">blocking</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(streamCallback<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="3033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac94ccf5cb33748fb1c5ad1f040ccc178" kindref="member">full_duplex</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>fullDuplex;</highlight></codeline>
<codeline lineno="3034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0886e7cdcd3e6f7f989625d7f7493eb9" kindref="member">wow64_workaround</ref><sp/><sp/>=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a1fe6be6a2edf0292a0a3d6f55cf83fc6" kindref="member">useWOW64Workaround</ref>;</highlight></codeline>
<codeline lineno="3035"><highlight class="normal"></highlight></codeline>
<codeline lineno="3036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>and<sp/>activate<sp/>audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>ActivateAudioClientInput(stream);</highlight></codeline>
<codeline lineno="3038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>);</highlight></codeline>
<codeline lineno="3041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3043"><highlight class="normal"></highlight></codeline>
<codeline lineno="3044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>closest<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostInputSampleFormat<sp/>=<sp/><ref refid="pa__converters_8c_1a74195475fe92d6b7b71de247f2b08184" kindref="member">PaUtil_SelectClosestAvailableFormat</ref>(<sp/>WaveToPaFormat(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>),<sp/>inputSampleFormat<sp/>);</highlight></codeline>
<codeline lineno="3046"><highlight class="normal"></highlight></codeline>
<codeline lineno="3047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>user-side<sp/>custom<sp/>host<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((inputStreamInfo<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beab48119221a4cd9aa0428882dfb729c0b" kindref="member">paWinWasapiRedirectHostProcessor</ref>))</highlight></codeline>
<codeline lineno="3050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" kindref="member">hostProcessOverrideInput</ref>.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>=<sp/>inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a0cb8bd209c8b453e9d1d08909e63ac38" kindref="member">hostProcessorInput</ref>;</highlight></codeline>
<codeline lineno="3052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" kindref="member">hostProcessOverrideInput</ref>.<ref refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" kindref="member">userData</ref><sp/>=<sp/><ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref>;</highlight></codeline>
<codeline lineno="3053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3054"><highlight class="normal"></highlight></codeline>
<codeline lineno="3055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>get<sp/>IAudioCaptureClient<sp/>input<sp/>once<sp/>here<sp/>instead<sp/>of<sp/>getting<sp/>it<sp/>at<sp/>multiple<sp/>places<sp/>based<sp/>on<sp/>the<sp/>use</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetService(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>,<sp/>&amp;pa_IID_IAudioCaptureClient,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a79c5cda43724aea8ff7d283a2ac66976" kindref="member">captureClientParent</ref>);</highlight></codeline>
<codeline lineno="3057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>);</highlight></codeline>
<codeline lineno="3061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3063"><highlight class="normal"></highlight></codeline>
<codeline lineno="3064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>ring<sp/>buffer<sp/>for<sp/>blocking<sp/>mode<sp/>(It<sp/>is<sp/>needed<sp/>because<sp/>we<sp/>fetch<sp/>Input<sp/>packets,<sp/>not<sp/>frames,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>thus<sp/>we<sp/>have<sp/>to<sp/>save<sp/>partial<sp/>packet<sp/>if<sp/>such<sp/>remains<sp/>unread)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a1e3a0ed3228bb5fb0ff14f3207c8f2c4" kindref="member">blocking</ref><sp/>==<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>)</highlight></codeline>
<codeline lineno="3067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>bufferFrames<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1a34e25232f62662dafe2b79c6fbc38cc2" kindref="member">ALIGN_NEXT_POW2</ref>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref><sp/>/<sp/><ref refid="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8a7b6c7e83009a14df464dd680e87feaf2" kindref="member">WASAPI_PACKETS_PER_INPUT_BUFFER</ref>)<sp/>*<sp/>2);</highlight></codeline>
<codeline lineno="3069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frameSize<sp/><sp/><sp/><sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nBlockAlign;</highlight></codeline>
<codeline lineno="3070"><highlight class="normal"></highlight></codeline>
<codeline lineno="3071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref><sp/>=<sp/><ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_util_ring_buffer" kindref="compound">PaUtilRingBuffer</ref>)))<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>);</highlight></codeline>
<codeline lineno="3075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_util_ring_buffer" kindref="compound">PaUtilRingBuffer</ref>));</highlight></codeline>
<codeline lineno="3078"><highlight class="normal"></highlight></codeline>
<codeline lineno="3079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>buffer<sp/>memory<sp/>region</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1af13270a12d88b5a79a3f2929783a0611" kindref="member">tailBufferMemory</ref><sp/>=<sp/><ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(frameSize<sp/>*<sp/>bufferFrames);</highlight></codeline>
<codeline lineno="3081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1af13270a12d88b5a79a3f2929783a0611" kindref="member">tailBufferMemory</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>);</highlight></codeline>
<codeline lineno="3084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3086"><highlight class="normal"></highlight></codeline>
<codeline lineno="3087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>initialize</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="pa__ringbuffer_8c_1ac59abf83ad9ad72e1971ac406b0e67a8" kindref="member">PaUtil_InitializeRingBuffer</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>,<sp/>frameSize,<sp/>bufferFrames,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1af13270a12d88b5a79a3f2929783a0611" kindref="member">tailBufferMemory</ref>)<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="3089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>);</highlight></codeline>
<codeline lineno="3091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3094"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3095"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3096"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputChannelCount<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputSampleFormat<sp/>=<sp/>hostInputSampleFormat<sp/>=<sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>;<sp/></highlight><highlight class="comment">/*<sp/>Surpress<sp/>&apos;uninitialised<sp/>var&apos;<sp/>warnings.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3099"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3100"><highlight class="normal"></highlight></codeline>
<codeline lineno="3101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>create<sp/>device:<sp/>Output</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3103"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputChannelCount<sp/>=<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>;</highlight></codeline>
<codeline lineno="3105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputSampleFormat<sp/>=<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref>;</highlight></codeline>
<codeline lineno="3106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>];</highlight></codeline>
<codeline lineno="3107"><highlight class="normal"></highlight></codeline>
<codeline lineno="3108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>default<sp/>Shared<sp/>Mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>;</highlight></codeline>
<codeline lineno="3110"><highlight class="normal"></highlight></codeline>
<codeline lineno="3111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>PaWasapiStreamInfo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>,<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>,<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>),<sp/>((<ref refid="struct_pa_wasapi_stream_info" kindref="compound">PaWasapiStreamInfo</ref><sp/>*)outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref>)-&gt;size));</highlight></codeline>
<codeline lineno="3115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>.<ref refid="struct_pa_wasapi_stream_info_1ae491f41ce5954cddd438624dc69eba1b" kindref="member">size</ref><sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>);</highlight></codeline>
<codeline lineno="3116"><highlight class="normal"></highlight></codeline>
<codeline lineno="3117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac01b82e3992a001815a26eeb5a225e8a" kindref="member">stream_params</ref>.<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref><sp/>=<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>;</highlight></codeline>
<codeline lineno="3118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputStreamInfo<sp/>=<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0b9dcf2124b754e948e50f44c2fe3638" kindref="member">wasapi_params</ref>;</highlight></codeline>
<codeline lineno="3119"><highlight class="normal"></highlight></codeline>
<codeline lineno="3120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a614eb0d553c247fc55888c5a978b90" kindref="member">flags</ref><sp/>=<sp/>outputStreamInfo-&gt;flags;</highlight></codeline>
<codeline lineno="3121"><highlight class="normal"></highlight></codeline>
<codeline lineno="3122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exclusive<sp/>Mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputStreamInfo-&gt;flags<sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725bea03a519ca5e890b232994c25bc2a15b1e" kindref="member">paWinWasapiExclusive</ref>)</highlight></codeline>
<codeline lineno="3124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Boost<sp/>thread<sp/>priority</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref><sp/>=<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661a9a34413b0a045f4c44d10a49d3357187" kindref="member">eThreadPriorityProAudio</ref>;</highlight></codeline>
<codeline lineno="3127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>Exclusive</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>;</highlight></codeline>
<codeline lineno="3129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3130"><highlight class="normal"></highlight></codeline>
<codeline lineno="3131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>explicit<sp/>thread<sp/>priority<sp/>level</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputStreamInfo-&gt;flags<sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725bea1fcbc0f3ce367c5ffa8bd49985f7d65a" kindref="member">paWinWasapiThreadPriority</ref>)</highlight></codeline>
<codeline lineno="3133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((outputStreamInfo-&gt;threadPriority<sp/>&gt;<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661a20a9497196a4fe472458ebba0ab678f4" kindref="member">eThreadPriorityNone</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(outputStreamInfo-&gt;threadPriority<sp/>&lt;=<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661aff35fbdda7cff800902be260ad350540" kindref="member">eThreadPriorityWindowManager</ref>))</highlight></codeline>
<codeline lineno="3136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref><sp/>=<sp/>outputStreamInfo-&gt;threadPriority;</highlight></codeline>
<codeline lineno="3137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3139"><highlight class="normal"></highlight></codeline>
<codeline lineno="3140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Choose<sp/>processing<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref><sp/>?<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref><sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="3142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a1fe6be6a2edf0292a0a3d6f55cf83fc6" kindref="member">useWOW64Workaround</ref>)</highlight></codeline>
<codeline lineno="3143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(streamCallback<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((outputStreamInfo<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;<sp/>(outputStreamInfo-&gt;flags<sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beaa3171090ee90b00f3f68c906b8dd7e5d" kindref="member">paWinWasapiPolling</ref>))</highlight></codeline>
<codeline lineno="3149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fullDuplex)</highlight></codeline>
<codeline lineno="3152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>polling<sp/>interface<sp/>is<sp/>implemented<sp/>for<sp/>full-duplex<sp/>mode<sp/>also</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3153"><highlight class="normal"></highlight></codeline>
<codeline lineno="3154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Fill<sp/>parameters<sp/>for<sp/>Audio<sp/>Client<sp/>creation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a733d080b96ac95e47f1e673447c041f2" kindref="member">device_info</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="3156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac01b82e3992a001815a26eeb5a225e8a" kindref="member">stream_params</ref><sp/><sp/><sp/><sp/><sp/>=<sp/>(*outputParameters);</highlight></codeline>
<codeline lineno="3157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aa46fc2eb761fffa9ee34baf829b70e0e" kindref="member">frames_per_buffer</ref><sp/>=<sp/>framesPerBuffer;</highlight></codeline>
<codeline lineno="3158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1aaf327b0ecb554eb9d8b331d647c000b6" kindref="member">sample_rate</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="3159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a1e3a0ed3228bb5fb0ff14f3207c8f2c4" kindref="member">blocking</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(streamCallback<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="3160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1ac94ccf5cb33748fb1c5ad1f040ccc178" kindref="member">full_duplex</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>fullDuplex;</highlight></codeline>
<codeline lineno="3161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ab9cb9497a30f6d0e1497b64896a9e4df" kindref="member">params</ref>.<ref refid="struct_pa_wasapi_audio_client_params_1a0886e7cdcd3e6f7f989625d7f7493eb9" kindref="member">wow64_workaround</ref><sp/><sp/>=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a1fe6be6a2edf0292a0a3d6f55cf83fc6" kindref="member">useWOW64Workaround</ref>;</highlight></codeline>
<codeline lineno="3162"><highlight class="normal"></highlight></codeline>
<codeline lineno="3163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>and<sp/>activate<sp/>audio<sp/>client</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>ActivateAudioClientOutput(stream);</highlight></codeline>
<codeline lineno="3165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>);</highlight></codeline>
<codeline lineno="3168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3170"><highlight class="normal"></highlight></codeline>
<codeline lineno="3171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>closest<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostOutputSampleFormat<sp/>=<sp/><ref refid="pa__converters_8c_1a74195475fe92d6b7b71de247f2b08184" kindref="member">PaUtil_SelectClosestAvailableFormat</ref>(<sp/>WaveToPaFormat(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>),<sp/>outputSampleFormat<sp/>);</highlight></codeline>
<codeline lineno="3173"><highlight class="normal"></highlight></codeline>
<codeline lineno="3174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>user-side<sp/>custom<sp/>host<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((outputStreamInfo<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(outputStreamInfo-&gt;flags<sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beab48119221a4cd9aa0428882dfb729c0b" kindref="member">paWinWasapiRedirectHostProcessor</ref>))</highlight></codeline>
<codeline lineno="3177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" kindref="member">hostProcessOverrideOutput</ref>.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>=<sp/>outputStreamInfo-&gt;hostProcessorOutput;</highlight></codeline>
<codeline lineno="3179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" kindref="member">hostProcessOverrideOutput</ref>.<ref refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" kindref="member">userData</ref><sp/>=<sp/><ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref>;</highlight></codeline>
<codeline lineno="3180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3181"><highlight class="normal"></highlight></codeline>
<codeline lineno="3182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>get<sp/>IAudioCaptureClient<sp/>output<sp/>once<sp/>here<sp/>instead<sp/>of<sp/>getting<sp/>it<sp/>at<sp/>multiple<sp/>places<sp/>based<sp/>on<sp/>the<sp/>use</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetService(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>,<sp/>&amp;pa_IID_IAudioRenderClient,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a28a861cf6e64e4f1b45d4f774052cc42" kindref="member">renderClientParent</ref>);</highlight></codeline>
<codeline lineno="3184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>);</highlight></codeline>
<codeline lineno="3188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3190"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3192"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputChannelCount<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputSampleFormat<sp/>=<sp/>hostOutputSampleFormat<sp/>=<sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>;<sp/></highlight><highlight class="comment">/*<sp/>Surpress<sp/>&apos;uninitialized<sp/>var&apos;<sp/>warnings.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3195"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3196"><highlight class="normal"></highlight></codeline>
<codeline lineno="3197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>log<sp/>full-duplex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fullDuplex)</highlight></codeline>
<codeline lineno="3199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI::OpenStream:<sp/>full-duplex<sp/>mode\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3200"><highlight class="normal"></highlight></codeline>
<codeline lineno="3201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>paWinWasapiPolling<sp/>must<sp/>be<sp/>on/or<sp/>not<sp/>on<sp/>both<sp/>streams</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((inputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;<sp/>(outputParameters<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))</highlight></codeline>
<codeline lineno="3203"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((inputStreamInfo<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;<sp/>(outputStreamInfo<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))</highlight></codeline>
<codeline lineno="3205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(((inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beaa3171090ee90b00f3f68c906b8dd7e5d" kindref="member">paWinWasapiPolling</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!(outputStreamInfo-&gt;flags<sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beaa3171090ee90b00f3f68c906b8dd7e5d" kindref="member">paWinWasapiPolling</ref>))</highlight></codeline>
<codeline lineno="3208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||</highlight></codeline>
<codeline lineno="3209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(!(inputStreamInfo-&gt;<ref refid="struct_pa_wasapi_stream_info_1a85bfbe1a00e6b48df75528eb6f967a2c" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beaa3171090ee90b00f3f68c906b8dd7e5d" kindref="member">paWinWasapiPolling</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(outputStreamInfo-&gt;flags<sp/>&amp;<sp/><ref refid="pa__win__wasapi_8h_1a5d5e585f667bc748c7cab4c9c4a725beaa3171090ee90b00f3f68c906b8dd7e5d" kindref="member">paWinWasapiPolling</ref>)))</highlight></codeline>
<codeline lineno="3211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aa5e7d0d9ea49ef845a93c89a3d138294" kindref="member">paInvalidFlag</ref>);</highlight></codeline>
<codeline lineno="3213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3216"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3217"><highlight class="normal"></highlight></codeline>
<codeline lineno="3218"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>stream<sp/>representation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(streamCallback)</highlight></codeline>
<codeline lineno="3220"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2497dda1ef25d7673f3a67553c2b5a0e" kindref="member">bBlocking</ref><sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="3222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a0e3a44086f5baa62308dfd6df77396e0" kindref="member">PaUtil_InitializeStreamRepresentation</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>,</highlight></codeline>
<codeline lineno="3223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ab0a50b8957abc26a47c113ed33311a53" kindref="member">callbackStreamInterface</ref>,</highlight></codeline>
<codeline lineno="3224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamCallback,<sp/>userData);</highlight></codeline>
<codeline lineno="3225"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3227"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2497dda1ef25d7673f3a67553c2b5a0e" kindref="member">bBlocking</ref><sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="3229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a0e3a44086f5baa62308dfd6df77396e0" kindref="member">PaUtil_InitializeStreamRepresentation</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>,</highlight></codeline>
<codeline lineno="3230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ace80cce61f9d475d6c4f2af80cb2933d" kindref="member">blockingStreamInterface</ref>,</highlight></codeline>
<codeline lineno="3231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamCallback,<sp/>userData);</highlight></codeline>
<codeline lineno="3232"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3233"><highlight class="normal"></highlight></codeline>
<codeline lineno="3234"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>CPU<sp/>measurer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3235"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__cpuload_8c_1a8cffac188367367b6c5c5ed8e0b1fe46" kindref="member">PaUtil_InitializeCpuLoadMeasurer</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1aec37a2f4bcafd3f1a595a46e5393bd64" kindref="member">cpuLoadMeasurer</ref>,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>);</highlight></codeline>
<codeline lineno="3236"><highlight class="normal"></highlight></codeline>
<codeline lineno="3237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters<sp/>&amp;&amp;<sp/>inputParameters)</highlight></codeline>
<codeline lineno="3238"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>serious<sp/>problem<sp/>#1<sp/>-<sp/>No,<sp/>Not<sp/>a<sp/>problem,<sp/>especially<sp/>concerning<sp/>Exclusive<sp/>mode.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Input<sp/>device<sp/>in<sp/>exclusive<sp/>mode<sp/>somehow<sp/>is<sp/>getting<sp/>large<sp/>buffer<sp/>always,<sp/>thus<sp/>we</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>adjust<sp/>Output<sp/>latency<sp/>to<sp/>reflect<sp/>it,<sp/>thus<sp/>period<sp/>will<sp/>differ<sp/>but<sp/>playback<sp/>will<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>normal.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*if<sp/>(stream-&gt;in.period<sp/>!=<sp/>stream-&gt;out.period)</highlight></codeline>
<codeline lineno="3244"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3245"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PRINT((&quot;WASAPI:<sp/>OpenStream:<sp/>period<sp/>discrepancy\n&quot;));</highlight></codeline>
<codeline lineno="3246"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LogPaError(result<sp/>=<sp/>paBadIODeviceCombination);</highlight></codeline>
<codeline lineno="3247"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goto<sp/>error;</highlight></codeline>
<codeline lineno="3248"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3249"><highlight class="normal"></highlight></codeline>
<codeline lineno="3250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>serious<sp/>problem<sp/>#2<sp/>-<sp/>No,<sp/>Not<sp/>a<sp/>problem,<sp/>as<sp/>framesPerHostCallback<sp/>take<sp/>into<sp/>account</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sample<sp/>size<sp/>while<sp/>it<sp/>is<sp/>not<sp/>a<sp/>problem<sp/>for<sp/>PA<sp/>full-duplex,<sp/>we<sp/>must<sp/>care<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>preriod<sp/>only!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*if<sp/>(stream-&gt;out.framesPerHostCallback<sp/>!=<sp/>stream-&gt;in.framesPerHostCallback)</highlight></codeline>
<codeline lineno="3254"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3255"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PRINT((&quot;WASAPI:<sp/>OpenStream:<sp/>framesPerHostCallback<sp/>discrepancy\n&quot;));</highlight></codeline>
<codeline lineno="3256"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goto<sp/>error;</highlight></codeline>
<codeline lineno="3257"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3258"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3259"><highlight class="normal"></highlight></codeline>
<codeline lineno="3260"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>frames<sp/>per<sp/>host<sp/>for<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3261"><highlight class="normal"><sp/><sp/><sp/><sp/>framesPerHostCallback<sp/>=<sp/>(outputParameters<sp/>?<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref><sp/>:<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>);</highlight></codeline>
<codeline lineno="3262"><highlight class="normal"></highlight></codeline>
<codeline lineno="3263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Choose<sp/>correct<sp/>mode<sp/>of<sp/>buffer<sp/>processing:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3264"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exclusive/Shared<sp/>non<sp/>paWinWasapiPolling<sp/>mode:<sp/>paUtilFixedHostBufferSize<sp/>-<sp/>always<sp/>fixed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3265"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exclusive/Shared<sp/>paWinWasapiPolling<sp/>mode:<sp/>paUtilBoundedHostBufferSize<sp/>-<sp/>may<sp/>vary<sp/>for<sp/>Exclusive<sp/>or<sp/>Full-duplex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3266"><highlight class="normal"><sp/><sp/><sp/><sp/>bufferMode<sp/>=<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa5e79e1ea4d8f114cfe83caa9b08610d8" kindref="member">paUtilFixedHostBufferSize</ref>;</highlight></codeline>
<codeline lineno="3267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inputParameters)<sp/></highlight><highlight class="comment">//<sp/>!!!<sp/>WASAPI<sp/>IAudioCaptureClient::GetBuffer<sp/>extracts<sp/>not<sp/>number<sp/>of<sp/>frames<sp/>but<sp/>1<sp/>packet,<sp/>thus<sp/>we<sp/>always<sp/>must<sp/>adapt</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bufferMode<sp/>=<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa2e97156fbdf5444b7bcc53b60f368d8b" kindref="member">paUtilBoundedHostBufferSize</ref>;</highlight></codeline>
<codeline lineno="3269"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(outputParameters)</highlight></codeline>
<codeline lineno="3271"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ac2fc3d1d317aa761577e2dc2ca782b97" kindref="member">buffers</ref><sp/>==<sp/>1)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>||<sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>)<sp/>==<sp/>0)))</highlight></codeline>
<codeline lineno="3274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bufferMode<sp/>=<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa2e97156fbdf5444b7bcc53b60f368d8b" kindref="member">paUtilBoundedHostBufferSize</ref>;</highlight></codeline>
<codeline lineno="3275"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3276"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a4fcab5da3c205bf8b13519a37d771e7a" kindref="member">bufferMode</ref><sp/>=<sp/>bufferMode;</highlight></codeline>
<codeline lineno="3277"><highlight class="normal"></highlight></codeline>
<codeline lineno="3278"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>buffer<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3279"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/><sp/><ref refid="pa__process_8c_1aaae7001566f528cf2d3cd453bf05c5d5" kindref="member">PaUtil_InitializeBufferProcessor</ref>(</highlight></codeline>
<codeline lineno="3280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,</highlight></codeline>
<codeline lineno="3281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputChannelCount,</highlight></codeline>
<codeline lineno="3282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputSampleFormat,</highlight></codeline>
<codeline lineno="3283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostInputSampleFormat,</highlight></codeline>
<codeline lineno="3284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputChannelCount,</highlight></codeline>
<codeline lineno="3285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputSampleFormat,</highlight></codeline>
<codeline lineno="3286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostOutputSampleFormat,</highlight></codeline>
<codeline lineno="3287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="3288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamFlags,</highlight></codeline>
<codeline lineno="3289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBuffer,</highlight></codeline>
<codeline lineno="3290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostCallback,</highlight></codeline>
<codeline lineno="3291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bufferMode,</highlight></codeline>
<codeline lineno="3292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamCallback,</highlight></codeline>
<codeline lineno="3293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>userData);</highlight></codeline>
<codeline lineno="3294"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(result<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="3295"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(result);</highlight></codeline>
<codeline lineno="3297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="3298"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3299"><highlight class="normal"></highlight></codeline>
<codeline lineno="3300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>Input<sp/>latency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3301"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a1f5339e0fef75cea66d9153235698399" kindref="member">inputLatency</ref><sp/>=</highlight></codeline>
<codeline lineno="3302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((double)<ref refid="pa__process_8c_1ae5a4104d7132396436e179825e2a3847" kindref="member">PaUtil_GetBufferProcessorInputLatencyFrames</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>)<sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>)</highlight></codeline>
<codeline lineno="3303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>((inputParameters)?stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref><sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="3304"><highlight class="normal"></highlight></codeline>
<codeline lineno="3305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>Output<sp/>latency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3306"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a372a81f39d90a85ae62225e9f57a7840" kindref="member">outputLatency</ref><sp/>=</highlight></codeline>
<codeline lineno="3307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((double)<ref refid="pa__process_8c_1a853a8cd0e8d214406aa83ef3ef3d1102" kindref="member">PaUtil_GetBufferProcessorOutputLatencyFrames</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>)<sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>)</highlight></codeline>
<codeline lineno="3308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>((outputParameters)?stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref><sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="3309"><highlight class="normal"></highlight></codeline>
<codeline lineno="3310"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>SR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3311"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a9200fdee790d9155bc35d03be51ee2dd" kindref="member">sampleRate</ref><sp/>=<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="3312"><highlight class="normal"></highlight></codeline>
<codeline lineno="3313"><highlight class="normal"><sp/><sp/><sp/><sp/>(*s)<sp/>=<sp/>(<ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*)stream;</highlight></codeline>
<codeline lineno="3314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="3315"><highlight class="normal"></highlight></codeline>
<codeline lineno="3316"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="3317"><highlight class="normal"></highlight></codeline>
<codeline lineno="3318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CloseStream(stream);</highlight></codeline>
<codeline lineno="3320"><highlight class="normal"></highlight></codeline>
<codeline lineno="3321"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="3322"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3323"><highlight class="normal"></highlight></codeline>
<codeline lineno="3324"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3325"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>CloseStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3326"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3327"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="3328"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)s;</highlight></codeline>
<codeline lineno="3329"><highlight class="normal"></highlight></codeline>
<codeline lineno="3330"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>abort<sp/>active<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3331"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsStreamActive(s))</highlight></codeline>
<codeline lineno="3332"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>AbortStream(s);</highlight></codeline>
<codeline lineno="3334"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3335"><highlight class="normal"></highlight></codeline>
<codeline lineno="3336"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a79c5cda43724aea8ff7d283a2ac66976" kindref="member">captureClientParent</ref>);</highlight></codeline>
<codeline lineno="3337"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a28a861cf6e64e4f1b45d4f774052cc42" kindref="member">renderClientParent</ref>);</highlight></codeline>
<codeline lineno="3338"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>);</highlight></codeline>
<codeline lineno="3339"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>);</highlight></codeline>
<codeline lineno="3340"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a035111d1e825146eae105bd83d810397" kindref="member">inVol</ref>);</highlight></codeline>
<codeline lineno="3341"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>);</highlight></codeline>
<codeline lineno="3342"><highlight class="normal"></highlight></codeline>
<codeline lineno="3343"><highlight class="normal"><sp/><sp/><sp/><sp/>CloseHandle(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>]);</highlight></codeline>
<codeline lineno="3344"><highlight class="normal"><sp/><sp/><sp/><sp/>CloseHandle(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>]);</highlight></codeline>
<codeline lineno="3345"><highlight class="normal"></highlight></codeline>
<codeline lineno="3346"><highlight class="normal"><sp/><sp/><sp/><sp/>_StreamCleanup(stream);</highlight></codeline>
<codeline lineno="3347"><highlight class="normal"></highlight></codeline>
<codeline lineno="3348"><highlight class="normal"><sp/><sp/><sp/><sp/>PaWasapi_FreeMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>);</highlight></codeline>
<codeline lineno="3349"><highlight class="normal"><sp/><sp/><sp/><sp/>PaWasapi_FreeMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>);</highlight></codeline>
<codeline lineno="3350"><highlight class="normal"></highlight></codeline>
<codeline lineno="3351"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>);</highlight></codeline>
<codeline lineno="3352"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1af13270a12d88b5a79a3f2929783a0611" kindref="member">tailBufferMemory</ref>);</highlight></codeline>
<codeline lineno="3353"><highlight class="normal"></highlight></codeline>
<codeline lineno="3354"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>);</highlight></codeline>
<codeline lineno="3355"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1af13270a12d88b5a79a3f2929783a0611" kindref="member">tailBufferMemory</ref>);</highlight></codeline>
<codeline lineno="3356"><highlight class="normal"></highlight></codeline>
<codeline lineno="3357"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1acf4e607f9c25ec2db5efd02ef1adb188" kindref="member">PaUtil_TerminateBufferProcessor</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>);</highlight></codeline>
<codeline lineno="3358"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1ac30f6c0d3138ef52c63c94fd1a53ea86" kindref="member">PaUtil_TerminateStreamRepresentation</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>);</highlight></codeline>
<codeline lineno="3359"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(stream);</highlight></codeline>
<codeline lineno="3360"><highlight class="normal"></highlight></codeline>
<codeline lineno="3361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="3362"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3363"><highlight class="normal"></highlight></codeline>
<codeline lineno="3364"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3365"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>UnmarshalSubStreamComPointers(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*substream)<sp/></highlight></codeline>
<codeline lineno="3366"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3367"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hResult<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="3368"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hFirstBadResult<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="3369"><highlight class="normal"><sp/><sp/><sp/><sp/>substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3370"><highlight class="normal"></highlight></codeline>
<codeline lineno="3371"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IAudioClient</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3372"><highlight class="normal"><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>CoGetInterfaceAndReleaseStream(substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" kindref="member">clientStream</ref>,<sp/>GetAudioClientIID(),<sp/>(LPVOID*)&amp;substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>);</highlight></codeline>
<codeline lineno="3373"><highlight class="normal"><sp/><sp/><sp/><sp/>substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" kindref="member">clientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3375"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hFirstBadResult<sp/>=<sp/>(hFirstBadResult<sp/>==<sp/>S_OK)<sp/>?<sp/>hResult<sp/>:<sp/>hFirstBadResult;</highlight></codeline>
<codeline lineno="3377"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3378"><highlight class="normal"></highlight></codeline>
<codeline lineno="3379"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hFirstBadResult;</highlight></codeline>
<codeline lineno="3380"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3381"><highlight class="normal"></highlight></codeline>
<codeline lineno="3382"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3383"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>UnmarshalStreamComPointers(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)<sp/></highlight></codeline>
<codeline lineno="3384"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3385"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hResult<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="3386"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hFirstBadResult<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="3387"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3388"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3389"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3390"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3391"><highlight class="normal"></highlight></codeline>
<codeline lineno="3392"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>!=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>)<sp/></highlight></codeline>
<codeline lineno="3393"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SubStream<sp/>pointers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>UnmarshalSubStreamComPointers(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>);</highlight></codeline>
<codeline lineno="3396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hFirstBadResult<sp/>=<sp/>(hFirstBadResult<sp/>==<sp/>S_OK)<sp/>?<sp/>hResult<sp/>:<sp/>hFirstBadResult;</highlight></codeline>
<codeline lineno="3399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3400"><highlight class="normal"></highlight></codeline>
<codeline lineno="3401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IAudioCaptureClient</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>CoGetInterfaceAndReleaseStream(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a315d06c7f23d23f05f90579a80d0530d" kindref="member">captureClientStream</ref>,<sp/>&amp;pa_IID_IAudioCaptureClient,<sp/>(LPVOID*)&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>);</highlight></codeline>
<codeline lineno="3403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a315d06c7f23d23f05f90579a80d0530d" kindref="member">captureClientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hFirstBadResult<sp/>=<sp/>(hFirstBadResult<sp/>==<sp/>S_OK)<sp/>?<sp/>hResult<sp/>:<sp/>hFirstBadResult;</highlight></codeline>
<codeline lineno="3407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3408"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3409"><highlight class="normal"></highlight></codeline>
<codeline lineno="3410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>!=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>)<sp/></highlight></codeline>
<codeline lineno="3411"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SubStream<sp/>pointers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>UnmarshalSubStreamComPointers(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>);</highlight></codeline>
<codeline lineno="3414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hFirstBadResult<sp/>=<sp/>(hFirstBadResult<sp/>==<sp/>S_OK)<sp/>?<sp/>hResult<sp/>:<sp/>hFirstBadResult;</highlight></codeline>
<codeline lineno="3417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3418"><highlight class="normal"></highlight></codeline>
<codeline lineno="3419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IAudioRenderClient</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>CoGetInterfaceAndReleaseStream(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad546e7693db4ddf90b1ad148c43292bd" kindref="member">renderClientStream</ref>,<sp/>&amp;pa_IID_IAudioRenderClient,<sp/>(LPVOID*)&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>);</highlight></codeline>
<codeline lineno="3421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad546e7693db4ddf90b1ad148c43292bd" kindref="member">renderClientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hFirstBadResult<sp/>=<sp/>(hFirstBadResult<sp/>==<sp/>S_OK)<sp/>?<sp/>hResult<sp/>:<sp/>hFirstBadResult;</highlight></codeline>
<codeline lineno="3425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3426"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3427"><highlight class="normal"></highlight></codeline>
<codeline lineno="3428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hFirstBadResult;</highlight></codeline>
<codeline lineno="3429"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3430"><highlight class="normal"></highlight></codeline>
<codeline lineno="3431"><highlight class="normal"></highlight><highlight class="comment">//<sp/>-----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3432"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ReleaseUnmarshaledSubComPointers(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*substream)<sp/></highlight></codeline>
<codeline lineno="3433"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3434"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>);</highlight></codeline>
<codeline lineno="3435"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3436"><highlight class="normal"></highlight></codeline>
<codeline lineno="3437"><highlight class="normal"></highlight><highlight class="comment">//<sp/>-----------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3438"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ReleaseUnmarshaledComPointers(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)<sp/></highlight></codeline>
<codeline lineno="3439"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3440"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>AudioClient<sp/>services<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3441"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>);</highlight></codeline>
<codeline lineno="3442"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>);</highlight></codeline>
<codeline lineno="3443"><highlight class="normal"></highlight></codeline>
<codeline lineno="3444"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>AudioClients</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3445"><highlight class="normal"><sp/><sp/><sp/><sp/>ReleaseUnmarshaledSubComPointers(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>);</highlight></codeline>
<codeline lineno="3446"><highlight class="normal"><sp/><sp/><sp/><sp/>ReleaseUnmarshaledSubComPointers(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>);</highlight></codeline>
<codeline lineno="3447"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3448"><highlight class="normal"></highlight></codeline>
<codeline lineno="3449"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3450"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>MarshalSubStreamComPointers(<ref refid="struct_pa_wasapi_sub_stream" kindref="compound">PaWasapiSubStream</ref><sp/>*substream)<sp/></highlight></codeline>
<codeline lineno="3451"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3452"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hResult;</highlight></codeline>
<codeline lineno="3453"><highlight class="normal"><sp/><sp/><sp/><sp/>substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" kindref="member">clientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3454"><highlight class="normal"></highlight></codeline>
<codeline lineno="3455"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IAudioClient</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3456"><highlight class="normal"><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>CoMarshalInterThreadInterfaceInStream(GetAudioClientIID(),<sp/>(LPUNKNOWN)substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>,<sp/>&amp;substream-&gt;<ref refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" kindref="member">clientStream</ref>);</highlight></codeline>
<codeline lineno="3457"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>marshal_sub_error;</highlight></codeline>
<codeline lineno="3459"><highlight class="normal"></highlight></codeline>
<codeline lineno="3460"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hResult;</highlight></codeline>
<codeline lineno="3461"><highlight class="normal"></highlight></codeline>
<codeline lineno="3462"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>marshaling<sp/>error<sp/>occurred,<sp/>make<sp/>sure<sp/>to<sp/>release<sp/>everything.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3463"><highlight class="normal">marshal_sub_error:</highlight></codeline>
<codeline lineno="3464"><highlight class="normal"></highlight></codeline>
<codeline lineno="3465"><highlight class="normal"><sp/><sp/><sp/><sp/>UnmarshalSubStreamComPointers(substream);</highlight></codeline>
<codeline lineno="3466"><highlight class="normal"><sp/><sp/><sp/><sp/>ReleaseUnmarshaledSubComPointers(substream);</highlight></codeline>
<codeline lineno="3467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hResult;</highlight></codeline>
<codeline lineno="3468"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3469"><highlight class="normal"></highlight></codeline>
<codeline lineno="3470"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3471"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>MarshalStreamComPointers(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)<sp/></highlight></codeline>
<codeline lineno="3472"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3473"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hResult<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="3474"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a315d06c7f23d23f05f90579a80d0530d" kindref="member">captureClientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3475"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" kindref="member">clientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3476"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad546e7693db4ddf90b1ad148c43292bd" kindref="member">renderClientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3477"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a218a9cb87b0ea5fcc68a1c04058d1923" kindref="member">clientStream</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3478"><highlight class="normal"></highlight></codeline>
<codeline lineno="3479"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>!=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>)<sp/></highlight></codeline>
<codeline lineno="3480"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SubStream<sp/>pointers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>MarshalSubStreamComPointers(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>);</highlight></codeline>
<codeline lineno="3483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>marshal_error;</highlight></codeline>
<codeline lineno="3485"><highlight class="normal"></highlight></codeline>
<codeline lineno="3486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IAudioCaptureClient</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>CoMarshalInterThreadInterfaceInStream(&amp;pa_IID_IAudioCaptureClient,<sp/>(LPUNKNOWN)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a79c5cda43724aea8ff7d283a2ac66976" kindref="member">captureClientParent</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a315d06c7f23d23f05f90579a80d0530d" kindref="member">captureClientStream</ref>);</highlight></codeline>
<codeline lineno="3488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>marshal_error;</highlight></codeline>
<codeline lineno="3490"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3491"><highlight class="normal"></highlight></codeline>
<codeline lineno="3492"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>!=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>)<sp/></highlight></codeline>
<codeline lineno="3493"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SubStream<sp/>pointers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>MarshalSubStreamComPointers(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>);</highlight></codeline>
<codeline lineno="3496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>marshal_error;</highlight></codeline>
<codeline lineno="3498"><highlight class="normal"></highlight></codeline>
<codeline lineno="3499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IAudioRenderClient</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hResult<sp/>=<sp/>CoMarshalInterThreadInterfaceInStream(&amp;pa_IID_IAudioRenderClient,<sp/>(LPUNKNOWN)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a28a861cf6e64e4f1b45d4f774052cc42" kindref="member">renderClientParent</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad546e7693db4ddf90b1ad148c43292bd" kindref="member">renderClientStream</ref>);</highlight></codeline>
<codeline lineno="3501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hResult<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>marshal_error;</highlight></codeline>
<codeline lineno="3503"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3504"><highlight class="normal"></highlight></codeline>
<codeline lineno="3505"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hResult;</highlight></codeline>
<codeline lineno="3506"><highlight class="normal"></highlight></codeline>
<codeline lineno="3507"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>marshaling<sp/>error<sp/>occurred,<sp/>make<sp/>sure<sp/>to<sp/>release<sp/>everything.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3508"><highlight class="normal">marshal_error:</highlight></codeline>
<codeline lineno="3509"><highlight class="normal"></highlight></codeline>
<codeline lineno="3510"><highlight class="normal"><sp/><sp/><sp/><sp/>UnmarshalStreamComPointers(stream);</highlight></codeline>
<codeline lineno="3511"><highlight class="normal"><sp/><sp/><sp/><sp/>ReleaseUnmarshaledComPointers(stream);</highlight></codeline>
<codeline lineno="3512"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hResult;</highlight></codeline>
<codeline lineno="3513"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3514"><highlight class="normal"></highlight></codeline>
<codeline lineno="3515"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3516"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StartStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3517"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3518"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="3519"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)s;</highlight></codeline>
<codeline lineno="3520"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="3521"><highlight class="normal"></highlight></codeline>
<codeline lineno="3522"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>stream<sp/>is<sp/>active<sp/>already</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3523"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsStreamActive(s))</highlight></codeline>
<codeline lineno="3524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a9e05b6974d01fcce82c5d94b575ff1b2" kindref="member">paStreamIsNotStopped</ref>;</highlight></codeline>
<codeline lineno="3525"><highlight class="normal"></highlight></codeline>
<codeline lineno="3526"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a454635d7cd026eec37f3ab3d27afc38e" kindref="member">PaUtil_ResetBufferProcessor</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>);</highlight></codeline>
<codeline lineno="3527"><highlight class="normal"></highlight></codeline>
<codeline lineno="3528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Cleanup<sp/>handles<sp/>(may<sp/>be<sp/>necessary<sp/>if<sp/>stream<sp/>was<sp/>stopped<sp/>by<sp/>itself<sp/>due<sp/>to<sp/>error)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3529"><highlight class="normal"><sp/><sp/><sp/><sp/>_StreamCleanup(stream);</highlight></codeline>
<codeline lineno="3530"><highlight class="normal"></highlight></codeline>
<codeline lineno="3531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>close<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref><sp/>=<sp/>CreateEvent(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/></highlight></codeline>
<codeline lineno="3533"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="3535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>start_error;</highlight></codeline>
<codeline lineno="3536"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3537"><highlight class="normal"></highlight></codeline>
<codeline lineno="3538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>thread</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3539"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2497dda1ef25d7673f3a67553c2b5a0e" kindref="member">bBlocking</ref>)</highlight></codeline>
<codeline lineno="3540"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>thread<sp/>events</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref><sp/>=<sp/>CreateEvent(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="3543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref><sp/><sp/>=<sp/>CreateEvent(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="3544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>||<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))</highlight></codeline>
<codeline lineno="3545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="3547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>start_error;</highlight></codeline>
<codeline lineno="3548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3549"><highlight class="normal"></highlight></codeline>
<codeline lineno="3550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Marshal<sp/>WASAPI<sp/>interface<sp/>pointers<sp/>for<sp/>safe<sp/>use<sp/>in<sp/>thread<sp/>created<sp/>below.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>MarshalStreamComPointers(stream))<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="3552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;Failed<sp/>marshaling<sp/>stream<sp/>COM<sp/>pointers.&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="3555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>nonblocking_start_error;</highlight></codeline>
<codeline lineno="3556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3557"><highlight class="normal"></highlight></codeline>
<codeline lineno="3558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/><sp/>&amp;&amp;<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>))<sp/>||</highlight></codeline>
<codeline lineno="3559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>&amp;&amp;<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1aa321f145187ba40bc71f219db48c7edf" kindref="member">streamFlags</ref><sp/>&amp;<sp/><ref refid="_audio_session_types_8h_1a1f3252c2e17707329779969ff615aa16" kindref="member">AUDCLNT_STREAMFLAGS_EVENTCALLBACK</ref>)))</highlight></codeline>
<codeline lineno="3560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad3e65e6b5962b82233fbe966a676c286" kindref="member">hThread</ref><sp/>=<sp/><ref refid="pa__win__wasapi_8c_1a0a9408819040e2ff021281f9e0971a35" kindref="member">CREATE_THREAD</ref>(<ref refid="pa__win__wasapi_8c_1ac575016ee1e9d6275cbc5004b2409036" kindref="member">ProcThreadEvent</ref>))<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/></highlight></codeline>
<codeline lineno="3562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;Failed<sp/>creating<sp/>thread:<sp/>ProcThreadEvent.&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="3565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>nonblocking_start_error;</highlight></codeline>
<codeline lineno="3566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad3e65e6b5962b82233fbe966a676c286" kindref="member">hThread</ref><sp/>=<sp/><ref refid="pa__win__wasapi_8c_1a0a9408819040e2ff021281f9e0971a35" kindref="member">CREATE_THREAD</ref>(<ref refid="pa__win__wasapi_8c_1aae20a143b3c891a38a7e918ee4b1d6b8" kindref="member">ProcThreadPoll</ref>))<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/></highlight></codeline>
<codeline lineno="3571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;Failed<sp/>creating<sp/>thread:<sp/>ProcThreadPoll.&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="3574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>nonblocking_start_error;</highlight></codeline>
<codeline lineno="3575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3577"><highlight class="normal"></highlight></codeline>
<codeline lineno="3578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wait<sp/>for<sp/>thread<sp/>to<sp/>start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref>,<sp/>60*1000)<sp/>==<sp/>WAIT_TIMEOUT)<sp/></highlight></codeline>
<codeline lineno="3580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;Failed<sp/>starting<sp/>thread:<sp/>timeout.&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="3583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>nonblocking_start_error;</highlight></codeline>
<codeline lineno="3584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3585"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3586"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3587"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>blocking<sp/>operation<sp/>events<sp/>(non-signaled<sp/>event<sp/>means<sp/>-<sp/>blocking<sp/>operation<sp/>is<sp/>pending)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/></highlight></codeline>
<codeline lineno="3590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0be8d98886549882563c9b16c2b3009f" kindref="member">hBlockingOpStreamWR</ref><sp/>=<sp/>CreateEvent(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/></highlight></codeline>
<codeline lineno="3592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="3594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>start_error;</highlight></codeline>
<codeline lineno="3595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/></highlight></codeline>
<codeline lineno="3598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2298014f2cc2a5af5608ce2171c46429" kindref="member">hBlockingOpStreamRD</ref><sp/>=<sp/>CreateEvent(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/></highlight></codeline>
<codeline lineno="3600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="3602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>start_error;</highlight></codeline>
<codeline lineno="3603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3605"><highlight class="normal"></highlight></codeline>
<codeline lineno="3606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>event<sp/>&amp;<sp/>start<sp/>INPUT<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_Start(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="3613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>start_error;</highlight></codeline>
<codeline lineno="3614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3616"><highlight class="normal"></highlight></codeline>
<codeline lineno="3617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>event<sp/>&amp;<sp/>start<sp/>OUTPUT<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_Start(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="3625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>start_error;</highlight></codeline>
<codeline lineno="3626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3628"><highlight class="normal"></highlight></codeline>
<codeline lineno="3629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>parent<sp/>to<sp/>working<sp/>pointers<sp/>to<sp/>use<sp/>shared<sp/>functions.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref><sp/><sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a79c5cda43724aea8ff7d283a2ac66976" kindref="member">captureClientParent</ref>;</highlight></codeline>
<codeline lineno="3631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref><sp/><sp/><sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a28a861cf6e64e4f1b45d4f774052cc42" kindref="member">renderClientParent</ref>;</highlight></codeline>
<codeline lineno="3632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/><sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>;</highlight></codeline>
<codeline lineno="3633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>;</highlight></codeline>
<codeline lineno="3634"><highlight class="normal"></highlight></codeline>
<codeline lineno="3635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Signal:<sp/>stream<sp/>running.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref><sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="3637"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3638"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a9c3f5727f8a7d4f8cad386d0625799cf" kindref="member">stopped</ref><sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="3639"><highlight class="normal"></highlight></codeline>
<codeline lineno="3640"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="3641"><highlight class="normal"></highlight></codeline>
<codeline lineno="3642"><highlight class="normal">nonblocking_start_error:</highlight></codeline>
<codeline lineno="3643"><highlight class="normal"></highlight></codeline>
<codeline lineno="3644"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>hThreadExit<sp/>event<sp/>to<sp/>prevent<sp/>blocking<sp/>during<sp/>cleanup</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3645"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref>);</highlight></codeline>
<codeline lineno="3646"><highlight class="normal"><sp/><sp/><sp/><sp/>UnmarshalStreamComPointers(stream);</highlight></codeline>
<codeline lineno="3647"><highlight class="normal"><sp/><sp/><sp/><sp/>ReleaseUnmarshaledComPointers(stream);</highlight></codeline>
<codeline lineno="3648"><highlight class="normal"></highlight></codeline>
<codeline lineno="3649"><highlight class="normal">start_error:</highlight></codeline>
<codeline lineno="3650"><highlight class="normal"></highlight></codeline>
<codeline lineno="3651"><highlight class="normal"><sp/><sp/><sp/><sp/>StopStream(s);</highlight></codeline>
<codeline lineno="3652"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="3653"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3654"><highlight class="normal"></highlight></codeline>
<codeline lineno="3655"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3656"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_StreamFinish(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)</highlight></codeline>
<codeline lineno="3657"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3658"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Issue<sp/>command<sp/>to<sp/>thread<sp/>to<sp/>stop<sp/>processing<sp/>and<sp/>wait<sp/>for<sp/>thread<sp/>exit</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3659"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2497dda1ef25d7673f3a67553c2b5a0e" kindref="member">bBlocking</ref>)</highlight></codeline>
<codeline lineno="3660"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SignalObjectAndWait(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref>,<sp/>INFINITE,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="3662"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3663"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3664"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Blocking<sp/>mode<sp/>does<sp/>not<sp/>own<sp/>thread</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3665"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Signal<sp/>close<sp/>event<sp/>and<sp/>wait<sp/>for<sp/>each<sp/>of<sp/>2<sp/>blocking<sp/>operations<sp/>to<sp/>complete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>)</highlight></codeline>
<codeline lineno="3668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SignalObjectAndWait(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0be8d98886549882563c9b16c2b3009f" kindref="member">hBlockingOpStreamWR</ref>,<sp/>INFINITE,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>);</highlight></codeline>
<codeline lineno="3669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>)</highlight></codeline>
<codeline lineno="3670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SignalObjectAndWait(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2298014f2cc2a5af5608ce2171c46429" kindref="member">hBlockingOpStreamRD</ref>,<sp/>INFINITE,<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>);</highlight></codeline>
<codeline lineno="3671"><highlight class="normal"></highlight></codeline>
<codeline lineno="3672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>stop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_StreamOnStop(stream);</highlight></codeline>
<codeline lineno="3674"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3675"><highlight class="normal"></highlight></codeline>
<codeline lineno="3676"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Cleanup<sp/>handles</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3677"><highlight class="normal"><sp/><sp/><sp/><sp/>_StreamCleanup(stream);</highlight></codeline>
<codeline lineno="3678"><highlight class="normal"></highlight></codeline>
<codeline lineno="3679"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref><sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="3680"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a9c3f5727f8a7d4f8cad386d0625799cf" kindref="member">stopped</ref><sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="3681"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3682"><highlight class="normal"></highlight></codeline>
<codeline lineno="3683"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3684"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_StreamCleanup(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)</highlight></codeline>
<codeline lineno="3685"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3686"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Close<sp/>thread<sp/>handles<sp/>to<sp/>allow<sp/>restart</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3687"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" kindref="member">SAFE_CLOSE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad3e65e6b5962b82233fbe966a676c286" kindref="member">hThread</ref>);</highlight></codeline>
<codeline lineno="3688"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" kindref="member">SAFE_CLOSE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref>);</highlight></codeline>
<codeline lineno="3689"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" kindref="member">SAFE_CLOSE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref>);</highlight></codeline>
<codeline lineno="3690"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" kindref="member">SAFE_CLOSE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>);</highlight></codeline>
<codeline lineno="3691"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" kindref="member">SAFE_CLOSE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2298014f2cc2a5af5608ce2171c46429" kindref="member">hBlockingOpStreamRD</ref>);</highlight></codeline>
<codeline lineno="3692"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad951b4a0c360e7157d8229beea6c6336" kindref="member">SAFE_CLOSE</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0be8d98886549882563c9b16c2b3009f" kindref="member">hBlockingOpStreamWR</ref>);</highlight></codeline>
<codeline lineno="3693"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3694"><highlight class="normal"></highlight></codeline>
<codeline lineno="3695"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3696"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StopStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3697"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3698"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Finish<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3699"><highlight class="normal"><sp/><sp/><sp/><sp/>_StreamFinish((<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)s);</highlight></codeline>
<codeline lineno="3700"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="3701"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3702"><highlight class="normal"></highlight></codeline>
<codeline lineno="3703"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3704"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>AbortStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3705"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3706"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Finish<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3707"><highlight class="normal"><sp/><sp/><sp/><sp/>_StreamFinish((<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)s);</highlight></codeline>
<codeline lineno="3708"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="3709"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3710"><highlight class="normal"></highlight></codeline>
<codeline lineno="3711"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3712"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamStopped(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3713"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3714"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)s)-&gt;stopped;</highlight></codeline>
<codeline lineno="3715"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3716"><highlight class="normal"></highlight></codeline>
<codeline lineno="3717"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3718"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamActive(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3719"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3720"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)s)-&gt;running;</highlight></codeline>
<codeline lineno="3721"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3722"><highlight class="normal"></highlight></codeline>
<codeline lineno="3723"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3724"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>GetStreamTime(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3725"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3726"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)s;</highlight></codeline>
<codeline lineno="3727"><highlight class="normal"></highlight></codeline>
<codeline lineno="3728"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>suppress<sp/>unused<sp/>variable<sp/>warnings<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3729"><highlight class="normal"><sp/><sp/><sp/><sp/>(<ref refid="lib_2expat_8h_1a3980d15795c6349fecd06c1b035c1ae9" kindref="member">void</ref>)<sp/>stream;</highlight></codeline>
<codeline lineno="3730"><highlight class="normal"></highlight></codeline>
<codeline lineno="3731"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__util_8h_1a9598384d28d22d589f607ca1069cc04c" kindref="member">PaUtil_GetTime</ref>();</highlight></codeline>
<codeline lineno="3732"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3733"><highlight class="normal"></highlight></codeline>
<codeline lineno="3734"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3735"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>GetStreamCpuLoad(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="3736"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3737"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__cpuload_8c_1af7bff59bbfe46a388e21633bf49ea0d6" kindref="member">PaUtil_GetCpuLoad</ref>(&amp;((<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)s)-&gt;cpuLoadMeasurer);</highlight></codeline>
<codeline lineno="3738"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3739"><highlight class="normal"></highlight></codeline>
<codeline lineno="3740"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3741"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__blocking_8c_1a9e7f111c33d1e80f40473846864e84fa" kindref="member">ReadStream</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*_buffer,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>)</highlight></codeline>
<codeline lineno="3742"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3743"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="3744"><highlight class="normal"></highlight></codeline>
<codeline lineno="3745"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="3746"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*user_buffer<sp/>=<sp/>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)_buffer;</highlight></codeline>
<codeline lineno="3747"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*wasapi_buffer<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3748"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>flags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3749"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<sp/>available,<sp/>sleep<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3750"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>processed;</highlight></codeline>
<codeline lineno="3751"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref><sp/>sched;</highlight></codeline>
<codeline lineno="3752"><highlight class="normal"></highlight></codeline>
<codeline lineno="3753"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>validate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3754"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref>)</highlight></codeline>
<codeline lineno="3755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a43201ac8bea6578d4a13024315c24117" kindref="member">paStreamIsStopped</ref>;</highlight></codeline>
<codeline lineno="3756"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aef50bc6456d8bcbd94d1690dfb8d447a" kindref="member">paBadStreamPtr</ref>;</highlight></codeline>
<codeline lineno="3758"><highlight class="normal"></highlight></codeline>
<codeline lineno="3759"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify<sp/>blocking<sp/>op<sp/>has<sp/>begun</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3760"><highlight class="normal"><sp/><sp/><sp/><sp/>ResetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2298014f2cc2a5af5608ce2171c46429" kindref="member">hBlockingOpStreamRD</ref>);</highlight></codeline>
<codeline lineno="3761"><highlight class="normal"></highlight></codeline>
<codeline lineno="3762"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>thread<sp/>scheduling<sp/>for<sp/>500<sp/>microseconds<sp/>(emulated)<sp/>when<sp/>wait<sp/>time<sp/>for<sp/>frames<sp/>is<sp/>less<sp/>than</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3763"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>milliseconds,<sp/>emulation<sp/>helps<sp/>to<sp/>normalize<sp/>CPU<sp/>consumption<sp/>and<sp/>avoids<sp/>too<sp/>busy<sp/>waiting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3764"><highlight class="normal"><sp/><sp/><sp/><sp/>ThreadIdleScheduler_Setup(&amp;sched,<sp/>1,<sp/>250</highlight><highlight class="comment">/*<sp/>microseconds<sp/>*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3765"><highlight class="normal"></highlight></codeline>
<codeline lineno="3766"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>a<sp/>local<sp/>copy<sp/>of<sp/>the<sp/>user<sp/>buffer<sp/>pointer(s),<sp/>this<sp/>is<sp/>necessary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>because<sp/>PaUtil_CopyOutput()<sp/>advances<sp/>these<sp/>pointers<sp/>every<sp/>time<sp/>it<sp/>is<sp/>called</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3768"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a08fb4a5b71ccc3aa1893d8e6c035d192" kindref="member">userInputIsInterleaved</ref>)</highlight></codeline>
<codeline lineno="3769"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_buffer<sp/>=<sp/>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)alloca(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref>);</highlight></codeline>
<codeline lineno="3771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(user_buffer<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="3773"><highlight class="normal"></highlight></codeline>
<codeline lineno="3774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)</highlight></codeline>
<codeline lineno="3775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>**)user_buffer)[i]<sp/>=<sp/>((<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>**)_buffer)[i];</highlight></codeline>
<codeline lineno="3776"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3777"><highlight class="normal"></highlight></codeline>
<codeline lineno="3778"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Findout<sp/>if<sp/>there<sp/>are<sp/>tail<sp/>frames,<sp/>flush<sp/>them<sp/>all<sp/>before<sp/>reading<sp/>hardware</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3779"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((available<sp/>=<sp/><ref refid="pa__ringbuffer_8c_1a40786e9932b9f988be2accfce19d5ea4" kindref="member">PaUtil_GetRingBufferReadAvailable</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>))<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="3780"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__ringbuffer_8h_1a56482b88e581ba588fe43b1568978b94" kindref="member">ring_buffer_size_t</ref><sp/>buf1_size<sp/>=<sp/>0,<sp/>buf2_size<sp/>=<sp/>0,<sp/>read,<sp/>desired;</highlight></codeline>
<codeline lineno="3782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*buf1<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*buf2<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3783"><highlight class="normal"></highlight></codeline>
<codeline lineno="3784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Limit<sp/>desired<sp/>to<sp/>amount<sp/>of<sp/>requested<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>desired<sp/>=<sp/>available;</highlight></codeline>
<codeline lineno="3786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)desired<sp/>&gt;<sp/>frames)</highlight></codeline>
<codeline lineno="3787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>desired<sp/>=<sp/>frames;</highlight></codeline>
<codeline lineno="3788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="3789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>pointers<sp/>to<sp/>read<sp/>regions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>read<sp/>=<sp/><ref refid="pa__ringbuffer_8c_1a0e1ef06e0ee328c9da54755cf889913d" kindref="member">PaUtil_GetRingBufferReadRegions</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>,<sp/>desired,<sp/>&amp;buf1,<sp/>&amp;buf1_size,<sp/>&amp;buf2,<sp/>&amp;buf2_size);</highlight></codeline>
<codeline lineno="3791"><highlight class="normal"></highlight></codeline>
<codeline lineno="3792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buf1<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>available<sp/>frames<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a0f0a94dec2b29ecb9843deb00a889bea" kindref="member">PaUtil_SetInputFrameCount</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>buf1_size);</highlight></codeline>
<codeline lineno="3796"><highlight class="normal"></highlight></codeline>
<codeline lineno="3797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>host<sp/>buffer<sp/>pointer<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1ab3b6507f21701058bd152f0c99f3c294" kindref="member">PaUtil_SetInterleavedInputChannels</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>0,<sp/>buf1,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref>);</highlight></codeline>
<codeline lineno="3799"><highlight class="normal"></highlight></codeline>
<codeline lineno="3800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Copy<sp/>user<sp/>data<sp/>to<sp/>host<sp/>buffer<sp/>(with<sp/>conversion<sp/>if<sp/>applicable)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>=<sp/><ref refid="pa__process_8c_1ad0eca03235f47de0591865f8097df4d0" kindref="member">PaUtil_CopyInput</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;user_buffer,<sp/>buf1_size);</highlight></codeline>
<codeline lineno="3802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/>processed;</highlight></codeline>
<codeline lineno="3803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3804"><highlight class="normal"></highlight></codeline>
<codeline lineno="3805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buf2<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>available<sp/>frames<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a0f0a94dec2b29ecb9843deb00a889bea" kindref="member">PaUtil_SetInputFrameCount</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>buf2_size);</highlight></codeline>
<codeline lineno="3809"><highlight class="normal"></highlight></codeline>
<codeline lineno="3810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>host<sp/>buffer<sp/>pointer<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1ab3b6507f21701058bd152f0c99f3c294" kindref="member">PaUtil_SetInterleavedInputChannels</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>0,<sp/>buf2,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref>);</highlight></codeline>
<codeline lineno="3812"><highlight class="normal"></highlight></codeline>
<codeline lineno="3813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Copy<sp/>user<sp/>data<sp/>to<sp/>host<sp/>buffer<sp/>(with<sp/>conversion<sp/>if<sp/>applicable)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>=<sp/><ref refid="pa__process_8c_1ad0eca03235f47de0591865f8097df4d0" kindref="member">PaUtil_CopyInput</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;user_buffer,<sp/>buf2_size);</highlight></codeline>
<codeline lineno="3815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/>processed;</highlight></codeline>
<codeline lineno="3816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3817"><highlight class="normal"></highlight></codeline>
<codeline lineno="3818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Advance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__ringbuffer_8c_1a7acc44292930d2911445b41f982a6a73" kindref="member">PaUtil_AdvanceRingBufferReadIndex</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>,<sp/>read);</highlight></codeline>
<codeline lineno="3820"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3821"><highlight class="normal"></highlight></codeline>
<codeline lineno="3822"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Read<sp/>hardware</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3823"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(frames<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="3824"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>blocking<sp/>call<sp/>must<sp/>be<sp/>interrupted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>sleep)<sp/>!=<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="3827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3828"><highlight class="normal"></highlight></codeline>
<codeline lineno="3829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>available<sp/>frames<sp/>(must<sp/>be<sp/>finding<sp/>out<sp/>available<sp/>frames<sp/>before<sp/>call<sp/>to<sp/>IAudioCaptureClient_GetBuffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>othervise<sp/>audio<sp/>glitches<sp/>will<sp/>occur<sp/>inExclusive<sp/>mode<sp/>as<sp/>it<sp/>seems<sp/>that<sp/>WASAPI<sp/>has<sp/>some<sp/>scheduling/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>processing<sp/>problems<sp/>when<sp/>such<sp/>busy<sp/>polling<sp/>with<sp/>IAudioCaptureClient_GetBuffer<sp/>occurs)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetInputFramesAvailable(stream,<sp/>&amp;available))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="3836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3837"><highlight class="normal"></highlight></codeline>
<codeline lineno="3838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wait<sp/>for<sp/>more<sp/>frames<sp/>to<sp/>become<sp/>available</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(available<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="3840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exclusive<sp/>mode<sp/>may<sp/>require<sp/>latency<sp/>of<sp/>1<sp/>millisecond,<sp/>thus<sp/>we<sp/>shall<sp/>sleep</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>around<sp/>500<sp/>microseconds<sp/>(emulated)<sp/>to<sp/>collect<sp/>packets<sp/>in<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>!=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>)</highlight></codeline>
<codeline lineno="3844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>sleep_frames<sp/>=<sp/>(frames<sp/>&lt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref><sp/>?<sp/>frames<sp/>:<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>);</highlight></codeline>
<codeline lineno="3846"><highlight class="normal"></highlight></codeline>
<codeline lineno="3847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/><sp/>=<sp/>GetFramesSleepTime(sleep_frames,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="3848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/>/=<sp/>4;<sp/></highlight><highlight class="comment">//<sp/>wait<sp/>only<sp/>for<sp/>1/4<sp/>of<sp/>the<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3849"><highlight class="normal"></highlight></codeline>
<codeline lineno="3850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>WASAPI<sp/>input<sp/>provides<sp/>packets,<sp/>thus<sp/>expiring<sp/>packet<sp/>will<sp/>result<sp/>in<sp/>bad<sp/>audio</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>limit<sp/>waiting<sp/>time<sp/>to<sp/>2<sp/>seconds<sp/>(will<sp/>always<sp/>work<sp/>for<sp/>smallest<sp/>buffer<sp/>in<sp/>Shared)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sleep<sp/>&gt;<sp/>2)</highlight></codeline>
<codeline lineno="3853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="3854"><highlight class="normal"></highlight></codeline>
<codeline lineno="3855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Avoid<sp/>busy<sp/>waiting,<sp/>schedule<sp/>next<sp/>1<sp/>millesecond<sp/>wait</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sleep<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="3857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/>=<sp/>ThreadIdleScheduler_NextSleep(&amp;sched);</highlight></codeline>
<codeline lineno="3858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((sleep<sp/>=<sp/>ThreadIdleScheduler_NextSleep(&amp;sched))<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="3862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="sysex_8c_1abf5d9eb2666eabd43f4644f60b7ed6f1" kindref="member">Sleep</ref>(sleep);</highlight></codeline>
<codeline lineno="3864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3867"><highlight class="normal"></highlight></codeline>
<codeline lineno="3868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3870"><highlight class="normal"></highlight></codeline>
<codeline lineno="3871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>available<sp/>data<sp/>in<sp/>the<sp/>shared<sp/>buffer.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>&amp;wasapi_buffer,<sp/>&amp;available,<sp/>&amp;flags,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Buffer<sp/>size<sp/>is<sp/>too<sp/>small,<sp/>waiting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/><ref refid="audioclient_8h_1aefe9792eb9de1c3607c05dca19c70a8c" kindref="member">AUDCLNT_S_BUFFER_EMPTY</ref>)</highlight></codeline>
<codeline lineno="3876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;</highlight></codeline>
<codeline lineno="3879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3880"><highlight class="normal"></highlight></codeline>
<codeline lineno="3881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3883"><highlight class="normal"></highlight></codeline>
<codeline lineno="3884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>available<sp/>frames<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a0f0a94dec2b29ecb9843deb00a889bea" kindref="member">PaUtil_SetInputFrameCount</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>available);</highlight></codeline>
<codeline lineno="3886"><highlight class="normal"></highlight></codeline>
<codeline lineno="3887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>host<sp/>buffer<sp/>pointer<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1ab3b6507f21701058bd152f0c99f3c294" kindref="member">PaUtil_SetInterleavedInputChannels</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>0,<sp/>wasapi_buffer,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref>);</highlight></codeline>
<codeline lineno="3889"><highlight class="normal"></highlight></codeline>
<codeline lineno="3890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Copy<sp/>user<sp/>data<sp/>to<sp/>host<sp/>buffer<sp/>(with<sp/>conversion<sp/>if<sp/>applicable)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>=<sp/><ref refid="pa__process_8c_1ad0eca03235f47de0591865f8097df4d0" kindref="member">PaUtil_CopyInput</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;user_buffer,<sp/>frames);</highlight></codeline>
<codeline lineno="3892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/>processed;</highlight></codeline>
<codeline lineno="3893"><highlight class="normal"></highlight></codeline>
<codeline lineno="3894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Save<sp/>tail<sp/>into<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((frames<sp/>==<sp/>0)<sp/>&amp;&amp;<sp/>(available<sp/>&gt;<sp/>processed))</highlight></codeline>
<codeline lineno="3896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>bytes_processed<sp/>=<sp/>processed<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nBlockAlign;</highlight></codeline>
<codeline lineno="3898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frames_to_save<sp/><sp/>=<sp/>available<sp/>-<sp/>processed;</highlight></codeline>
<codeline lineno="3899"><highlight class="normal"></highlight></codeline>
<codeline lineno="3900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__ringbuffer_8c_1a2767b217dc115e4f20db8ea206ca9520" kindref="member">PaUtil_WriteRingBuffer</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>,<sp/>wasapi_buffer<sp/>+<sp/>bytes_processed,<sp/>frames_to_save);</highlight></codeline>
<codeline lineno="3901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3902"><highlight class="normal"></highlight></codeline>
<codeline lineno="3903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>host<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3904"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>available))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;</highlight></codeline>
<codeline lineno="3908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3909"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3910"><highlight class="normal"></highlight></codeline>
<codeline lineno="3911"><highlight class="normal"><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>:</highlight></codeline>
<codeline lineno="3912"><highlight class="normal"></highlight></codeline>
<codeline lineno="3913"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify<sp/>blocking<sp/>op<sp/>has<sp/>ended</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3914"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2298014f2cc2a5af5608ce2171c46429" kindref="member">hBlockingOpStreamRD</ref>);</highlight></codeline>
<codeline lineno="3915"><highlight class="normal"></highlight></codeline>
<codeline lineno="3916"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK<sp/>?<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>:<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>);</highlight></codeline>
<codeline lineno="3917"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3918"><highlight class="normal"></highlight></codeline>
<codeline lineno="3919"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3920"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__blocking_8c_1a0cfb7772846808945bd521d23d5626eb" kindref="member">WriteStream</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*_buffer,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>)</highlight></codeline>
<codeline lineno="3921"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3922"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="3923"><highlight class="normal"></highlight></codeline>
<codeline lineno="3924"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//UINT32<sp/>frames;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3925"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*user_buffer<sp/>=<sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)_buffer;</highlight></codeline>
<codeline lineno="3926"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*wasapi_buffer;</highlight></codeline>
<codeline lineno="3927"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="3928"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<sp/>available,<sp/>sleep<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3929"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>processed;</highlight></codeline>
<codeline lineno="3930"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref><sp/>sched;</highlight></codeline>
<codeline lineno="3931"><highlight class="normal"></highlight></codeline>
<codeline lineno="3932"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>validate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3933"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref>)</highlight></codeline>
<codeline lineno="3934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a43201ac8bea6578d4a13024315c24117" kindref="member">paStreamIsStopped</ref>;</highlight></codeline>
<codeline lineno="3935"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aef50bc6456d8bcbd94d1690dfb8d447a" kindref="member">paBadStreamPtr</ref>;</highlight></codeline>
<codeline lineno="3937"><highlight class="normal"></highlight></codeline>
<codeline lineno="3938"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify<sp/>blocking<sp/>op<sp/>has<sp/>begun</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3939"><highlight class="normal"><sp/><sp/><sp/><sp/>ResetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0be8d98886549882563c9b16c2b3009f" kindref="member">hBlockingOpStreamWR</ref>);</highlight></codeline>
<codeline lineno="3940"><highlight class="normal"></highlight></codeline>
<codeline lineno="3941"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>thread<sp/>scheduling<sp/>for<sp/>500<sp/>microseconds<sp/>(emulated)<sp/>when<sp/>wait<sp/>time<sp/>for<sp/>frames<sp/>is<sp/>less<sp/>than</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3942"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>milliseconds,<sp/>emulation<sp/>helps<sp/>to<sp/>normalize<sp/>CPU<sp/>consumption<sp/>and<sp/>avoids<sp/>too<sp/>busy<sp/>waiting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3943"><highlight class="normal"><sp/><sp/><sp/><sp/>ThreadIdleScheduler_Setup(&amp;sched,<sp/>1,<sp/>500</highlight><highlight class="comment">/*<sp/>microseconds<sp/>*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3944"><highlight class="normal"></highlight></codeline>
<codeline lineno="3945"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>a<sp/>local<sp/>copy<sp/>of<sp/>the<sp/>user<sp/>buffer<sp/>pointer(s),<sp/>this<sp/>is<sp/>necessary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3946"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>because<sp/>PaUtil_CopyOutput()<sp/>advances<sp/>these<sp/>pointers<sp/>every<sp/>time<sp/>it<sp/>is<sp/>called</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3947"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a3be95f50566a88ebdc2697cde95d042e" kindref="member">userOutputIsInterleaved</ref>)</highlight></codeline>
<codeline lineno="3948"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_buffer<sp/>=<sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)alloca(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1af2c3ba9b0cc5bd8eb2fad8b73b40ad18" kindref="member">outputChannelCount</ref>);</highlight></codeline>
<codeline lineno="3950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(user_buffer<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="3952"><highlight class="normal"></highlight></codeline>
<codeline lineno="3953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1af2c3ba9b0cc5bd8eb2fad8b73b40ad18" kindref="member">outputChannelCount</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)</highlight></codeline>
<codeline lineno="3954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>**)user_buffer)[i]<sp/>=<sp/>((</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>**)_buffer)[i];</highlight></codeline>
<codeline lineno="3955"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3956"><highlight class="normal"></highlight></codeline>
<codeline lineno="3957"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Blocking<sp/>(potentially,<sp/>untill<sp/>&apos;frames&apos;<sp/>are<sp/>consumed)<sp/>loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3958"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(frames<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="3959"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>blocking<sp/>call<sp/>must<sp/>be<sp/>interrupted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>sleep)<sp/>!=<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="3962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3963"><highlight class="normal"></highlight></codeline>
<codeline lineno="3964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>frames<sp/>available</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetOutputFramesAvailable(stream,<sp/>&amp;available))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;</highlight></codeline>
<codeline lineno="3969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3970"><highlight class="normal"></highlight></codeline>
<codeline lineno="3971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wait<sp/>for<sp/>more<sp/>frames<sp/>to<sp/>become<sp/>available</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(available<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="3973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>sleep_frames<sp/>=<sp/>(frames<sp/>&lt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref><sp/>?<sp/>frames<sp/>:<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>);</highlight></codeline>
<codeline lineno="3975"><highlight class="normal"></highlight></codeline>
<codeline lineno="3976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/><sp/>=<sp/>GetFramesSleepTime(sleep_frames,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="3977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/>/=<sp/>2;<sp/></highlight><highlight class="comment">//<sp/>wait<sp/>only<sp/>for<sp/>half<sp/>of<sp/>the<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3978"><highlight class="normal"></highlight></codeline>
<codeline lineno="3979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Avoid<sp/>busy<sp/>waiting,<sp/>schedule<sp/>next<sp/>1<sp/>millesecond<sp/>wait</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sleep<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="3981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep<sp/>=<sp/>ThreadIdleScheduler_NextSleep(&amp;sched);</highlight></codeline>
<codeline lineno="3982"><highlight class="normal"></highlight></codeline>
<codeline lineno="3983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3985"><highlight class="normal"></highlight></codeline>
<codeline lineno="3986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Keep<sp/>in<sp/>&apos;frmaes&apos;<sp/>range</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(available<sp/>&gt;<sp/>frames)</highlight></codeline>
<codeline lineno="3988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>available<sp/>=<sp/>frames;</highlight></codeline>
<codeline lineno="3989"><highlight class="normal"></highlight></codeline>
<codeline lineno="3990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>pointer<sp/>to<sp/>host<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>available,<sp/>&amp;wasapi_buffer))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="3992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Buffer<sp/>size<sp/>is<sp/>too<sp/>big,<sp/>waiting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/><ref refid="audioclient_8h_1aba06602a1bcdc59e4a584f6119c5ce19" kindref="member">AUDCLNT_E_BUFFER_TOO_LARGE</ref>)</highlight></codeline>
<codeline lineno="3995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3996"><highlight class="normal"></highlight></codeline>
<codeline lineno="3997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="3998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;</highlight></codeline>
<codeline lineno="3999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4000"><highlight class="normal"></highlight></codeline>
<codeline lineno="4001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Keep<sp/>waiting<sp/>again<sp/>(on<sp/>Vista<sp/>it<sp/>was<sp/>noticed<sp/>that<sp/>WASAPI<sp/>could<sp/>SOMETIMES<sp/>return<sp/>NULL<sp/>pointer<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>to<sp/>buffer<sp/>without<sp/>returning<sp/>AUDCLNT_E_BUFFER_TOO_LARGE<sp/>instead)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wasapi_buffer<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4005"><highlight class="normal"></highlight></codeline>
<codeline lineno="4006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>available<sp/>frames<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a1dc65eb1e69dd6739e4dad4d74bf3785" kindref="member">PaUtil_SetOutputFrameCount</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>available);</highlight></codeline>
<codeline lineno="4008"><highlight class="normal"></highlight></codeline>
<codeline lineno="4009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>host<sp/>buffer<sp/>pointer<sp/>to<sp/>processor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1adba29b453fea9e5abfba02dbcb01bd09" kindref="member">PaUtil_SetInterleavedOutputChannels</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>0,<sp/>wasapi_buffer,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1af2c3ba9b0cc5bd8eb2fad8b73b40ad18" kindref="member">outputChannelCount</ref>);</highlight></codeline>
<codeline lineno="4011"><highlight class="normal"></highlight></codeline>
<codeline lineno="4012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Copy<sp/>user<sp/>data<sp/>to<sp/>host<sp/>buffer<sp/>(with<sp/>conversion<sp/>if<sp/>applicable),<sp/>this<sp/>call<sp/>will<sp/>advance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>pointer<sp/>&apos;user_buffer&apos;<sp/>to<sp/>consumed<sp/>portion<sp/>of<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>=<sp/><ref refid="pa__process_8c_1a61859778b9d4997a6be1de038136fcf4" kindref="member">PaUtil_CopyOutput</ref>(&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;user_buffer,<sp/>frames);</highlight></codeline>
<codeline lineno="4015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/>processed;</highlight></codeline>
<codeline lineno="4016"><highlight class="normal"></highlight></codeline>
<codeline lineno="4017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>host<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>available,<sp/>0))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;</highlight></codeline>
<codeline lineno="4022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4023"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4024"><highlight class="normal"></highlight></codeline>
<codeline lineno="4025"><highlight class="normal"><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>:</highlight></codeline>
<codeline lineno="4026"><highlight class="normal"></highlight></codeline>
<codeline lineno="4027"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify<sp/>blocking<sp/>op<sp/>has<sp/>ended</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4028"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0be8d98886549882563c9b16c2b3009f" kindref="member">hBlockingOpStreamWR</ref>);</highlight></codeline>
<codeline lineno="4029"><highlight class="normal"></highlight></codeline>
<codeline lineno="4030"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK<sp/>?<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>:<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>);</highlight></codeline>
<codeline lineno="4031"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4032"><highlight class="normal"></highlight></codeline>
<codeline lineno="4033" refid="pa__win__wasapi_8c_1afe88b93d518a48a088c658b7c8ab25b1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1afe88b93d518a48a088c658b7c8ab25b1" kindref="member">PaUtil_GetOutputFrameCount</ref>(<sp/><ref refid="struct_pa_util_buffer_processor" kindref="compound">PaUtilBufferProcessor</ref>*<sp/>bp<sp/>)</highlight></codeline>
<codeline lineno="4034"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4035"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>bp-&gt;<ref refid="struct_pa_util_buffer_processor_1ac5e048842fdfdee1764ab049a1306cfe" kindref="member">hostOutputFrameCount</ref>[0];</highlight></codeline>
<codeline lineno="4036"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4037"><highlight class="normal"></highlight></codeline>
<codeline lineno="4038"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4039"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__blocking_8c_1a82aa1e30985c7924247e8f45fc356d46" kindref="member">GetStreamReadAvailable</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="4040"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4041"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)s;</highlight></codeline>
<codeline lineno="4042"><highlight class="normal"></highlight></codeline>
<codeline lineno="4043"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4044"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/>available<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4045"><highlight class="normal"></highlight></codeline>
<codeline lineno="4046"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>validate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4047"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref>)</highlight></codeline>
<codeline lineno="4048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a43201ac8bea6578d4a13024315c24117" kindref="member">paStreamIsStopped</ref>;</highlight></codeline>
<codeline lineno="4049"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aef50bc6456d8bcbd94d1690dfb8d447a" kindref="member">paBadStreamPtr</ref>;</highlight></codeline>
<codeline lineno="4051"><highlight class="normal"></highlight></codeline>
<codeline lineno="4052"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>available<sp/>in<sp/>hardware<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4053"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetInputFramesAvailable(stream,<sp/>&amp;available))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4054"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4057"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4058"><highlight class="normal"></highlight></codeline>
<codeline lineno="4059"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>available<sp/>in<sp/>software<sp/>tail<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4060"><highlight class="normal"><sp/><sp/><sp/><sp/>available<sp/>+=<sp/><ref refid="pa__ringbuffer_8c_1a40786e9932b9f988be2accfce19d5ea4" kindref="member">PaUtil_GetRingBufferReadAvailable</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1adf3195bb40b64f9415239817b7342793" kindref="member">tailBuffer</ref>);</highlight></codeline>
<codeline lineno="4061"><highlight class="normal"></highlight></codeline>
<codeline lineno="4062"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>available;</highlight></codeline>
<codeline lineno="4063"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4064"><highlight class="normal"></highlight></codeline>
<codeline lineno="4065"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4066"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__blocking_8c_1ad7ee6bd74b3109101f1eb4ca0514c8b0" kindref="member">GetStreamWriteAvailable</ref>(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="4067"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4068"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)s;</highlight></codeline>
<codeline lineno="4069"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4070"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><sp/>available<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4071"><highlight class="normal"></highlight></codeline>
<codeline lineno="4072"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>validate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4073"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref>)</highlight></codeline>
<codeline lineno="4074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a43201ac8bea6578d4a13024315c24117" kindref="member">paStreamIsStopped</ref>;</highlight></codeline>
<codeline lineno="4075"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aef50bc6456d8bcbd94d1690dfb8d447a" kindref="member">paBadStreamPtr</ref>;</highlight></codeline>
<codeline lineno="4077"><highlight class="normal"></highlight></codeline>
<codeline lineno="4078"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetOutputFramesAvailable(stream,<sp/>&amp;available))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4079"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4082"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4083"><highlight class="normal"></highlight></codeline>
<codeline lineno="4084"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)available;</highlight></codeline>
<codeline lineno="4085"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4086"><highlight class="normal"></highlight></codeline>
<codeline lineno="4087"><highlight class="normal"></highlight></codeline>
<codeline lineno="4088"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4089"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>WaspiHostProcessingLoop(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*inputBuffer,<sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>inputFrames,</highlight></codeline>
<codeline lineno="4090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*outputBuffer,<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>outputFrames,</highlight></codeline>
<codeline lineno="4091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>)</highlight></codeline>
<codeline lineno="4092"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4093"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref>*)userData;</highlight></codeline>
<codeline lineno="4094"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_stream_callback_time_info" kindref="compound">PaStreamCallbackTimeInfo</ref><sp/>timeInfo<sp/>=<sp/>{0,0,0};</highlight></codeline>
<codeline lineno="4095"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>flags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4096"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>callbackResult;</highlight></codeline>
<codeline lineno="4097"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesProcessed;</highlight></codeline>
<codeline lineno="4098"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4099"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>pending;</highlight></codeline>
<codeline lineno="4100"><highlight class="normal"></highlight></codeline>
<codeline lineno="4101"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__cpuload_8c_1a83fdceefb7dff41725ba4f1f13a80f79" kindref="member">PaUtil_BeginCpuLoadMeasurement</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1aec37a2f4bcafd3f1a595a46e5393bd64" kindref="member">cpuLoadMeasurer</ref><sp/>);</highlight></codeline>
<codeline lineno="4102"><highlight class="normal"></highlight></codeline>
<codeline lineno="4103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="4104"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Pa_GetStreamTime:</highlight></codeline>
<codeline lineno="4105"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>generate<sp/>timing<sp/>information</highlight></codeline>
<codeline lineno="4106"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>handle<sp/>buffer<sp/>slips</highlight></codeline>
<codeline lineno="4107"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4108"><highlight class="normal"><sp/><sp/><sp/><sp/>timeInfo.<ref refid="struct_pa_stream_callback_time_info_1af21eb5482cadb212dae38fdbbd9bebfb" kindref="member">currentTime</ref><sp/>=<sp/><ref refid="pa__util_8h_1a9598384d28d22d589f607ca1069cc04c" kindref="member">PaUtil_GetTime</ref>();</highlight></codeline>
<codeline lineno="4109"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Query<sp/>input<sp/>latency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4111"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>pending_time;</highlight></codeline>
<codeline lineno="4113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_GetCurrentPadding(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>,<sp/>&amp;pending))<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="4114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pending_time<sp/>=<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)pending<sp/>/<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec;</highlight></codeline>
<codeline lineno="4115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pending_time<sp/>=<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref>;</highlight></codeline>
<codeline lineno="4117"><highlight class="normal"></highlight></codeline>
<codeline lineno="4118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timeInfo.<ref refid="struct_pa_stream_callback_time_info_1ad114a6d5e1cf2cdd75837c33c1c8bb4c" kindref="member">inputBufferAdcTime</ref><sp/>=<sp/>timeInfo.<ref refid="struct_pa_stream_callback_time_info_1af21eb5482cadb212dae38fdbbd9bebfb" kindref="member">currentTime</ref><sp/>+<sp/>pending_time;</highlight></codeline>
<codeline lineno="4119"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Query<sp/>output<sp/>current<sp/>latency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4122"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>pending_time;</highlight></codeline>
<codeline lineno="4124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_GetCurrentPadding(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>,<sp/>&amp;pending))<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="4125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pending_time<sp/>=<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)pending<sp/>/<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec;</highlight></codeline>
<codeline lineno="4126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pending_time<sp/>=<sp/>(<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a70abfd4a0f3aeef22983dfb49edb20f8" kindref="member">latencySeconds</ref>;</highlight></codeline>
<codeline lineno="4128"><highlight class="normal"></highlight></codeline>
<codeline lineno="4129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timeInfo.<ref refid="struct_pa_stream_callback_time_info_1aa2052c42394fca748e83517fc8942609" kindref="member">outputBufferDacTime</ref><sp/>=<sp/>timeInfo.<ref refid="struct_pa_stream_callback_time_info_1af21eb5482cadb212dae38fdbbd9bebfb" kindref="member">currentTime</ref><sp/>+<sp/>pending_time;</highlight></codeline>
<codeline lineno="4130"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4131"><highlight class="normal"></highlight></codeline>
<codeline lineno="4132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="4133"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>you<sp/>need<sp/>to<sp/>byte<sp/>swap<sp/>or<sp/>shift<sp/>inputBuffer<sp/>to<sp/>convert<sp/>it<sp/>into<sp/>a</highlight></codeline>
<codeline lineno="4134"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>portaudio<sp/>format,<sp/>do<sp/>it<sp/>here.</highlight></codeline>
<codeline lineno="4135"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4136"><highlight class="normal"></highlight></codeline>
<codeline lineno="4137"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a1388263b1c5b765797abe767af6dbe80" kindref="member">PaUtil_BeginBufferProcessing</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>&amp;timeInfo,<sp/>flags<sp/>);</highlight></codeline>
<codeline lineno="4138"><highlight class="normal"></highlight></codeline>
<codeline lineno="4139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="4140"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>depending<sp/>on<sp/>whether<sp/>the<sp/>host<sp/>buffers<sp/>are<sp/>interleaved,<sp/>non-interleaved</highlight></codeline>
<codeline lineno="4141"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>or<sp/>a<sp/>mixture,<sp/>you<sp/>will<sp/>want<sp/>to<sp/>call<sp/>PaUtil_SetInterleaved*Channels(),</highlight></codeline>
<codeline lineno="4142"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaUtil_SetNonInterleaved*Channel()<sp/>or<sp/>PaUtil_Set*Channel()<sp/>here.</highlight></codeline>
<codeline lineno="4143"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4144"><highlight class="normal"></highlight></codeline>
<codeline lineno="4145"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="4146"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a0f0a94dec2b29ecb9843deb00a889bea" kindref="member">PaUtil_SetInputFrameCount</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>inputFrames<sp/>);</highlight></codeline>
<codeline lineno="4148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1ab3b6507f21701058bd152f0c99f3c294" kindref="member">PaUtil_SetInterleavedInputChannels</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,</highlight></codeline>
<codeline lineno="4149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/></highlight><highlight class="comment">/*<sp/>first<sp/>channel<sp/>of<sp/>inputBuffer<sp/>is<sp/>channel<sp/>0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputBuffer,</highlight></codeline>
<codeline lineno="4151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0<sp/>);<sp/></highlight><highlight class="comment">/*<sp/>0<sp/>-<sp/>use<sp/>inputChannelCount<sp/>passed<sp/>to<sp/>init<sp/>buffer<sp/>processor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4152"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4153"><highlight class="normal"></highlight></codeline>
<codeline lineno="4154"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1af2c3ba9b0cc5bd8eb2fad8b73b40ad18" kindref="member">outputChannelCount</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="4155"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a1dc65eb1e69dd6739e4dad4d74bf3785" kindref="member">PaUtil_SetOutputFrameCount</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>outputFrames);</highlight></codeline>
<codeline lineno="4157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1adba29b453fea9e5abfba02dbcb01bd09" kindref="member">PaUtil_SetInterleavedOutputChannels</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,</highlight></codeline>
<codeline lineno="4158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/></highlight><highlight class="comment">/*<sp/>first<sp/>channel<sp/>of<sp/>outputBuffer<sp/>is<sp/>channel<sp/>0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputBuffer,</highlight></codeline>
<codeline lineno="4160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0<sp/>);<sp/></highlight><highlight class="comment">/*<sp/>0<sp/>-<sp/>use<sp/>outputChannelCount<sp/>passed<sp/>to<sp/>init<sp/>buffer<sp/>processor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4161"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4162"><highlight class="normal"></highlight></codeline>
<codeline lineno="4163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>you<sp/>must<sp/>pass<sp/>a<sp/>valid<sp/>value<sp/>of<sp/>callback<sp/>result<sp/>to<sp/>PaUtil_EndBufferProcessing()</highlight></codeline>
<codeline lineno="4164"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>in<sp/>general<sp/>you<sp/>would<sp/>pass<sp/>paContinue<sp/>for<sp/>normal<sp/>operation,<sp/>and</highlight></codeline>
<codeline lineno="4165"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paComplete<sp/>to<sp/>drain<sp/>the<sp/>buffer<sp/>processor&apos;s<sp/>internal<sp/>output<sp/>buffer.</highlight></codeline>
<codeline lineno="4166"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>You<sp/>can<sp/>check<sp/>whether<sp/>the<sp/>buffer<sp/>processor&apos;s<sp/>output<sp/>buffer<sp/>is<sp/>empty</highlight></codeline>
<codeline lineno="4167"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>using<sp/>PaUtil_IsBufferProcessorOuputEmpty(<sp/>bufferProcessor<sp/>)</highlight></codeline>
<codeline lineno="4168"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4169"><highlight class="normal"><sp/><sp/><sp/><sp/>callbackResult<sp/>=<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acba49cbf0e3bf605bb3deecef3b4fce3" kindref="member">paContinue</ref>;</highlight></codeline>
<codeline lineno="4170"><highlight class="normal"><sp/><sp/><sp/><sp/>framesProcessed<sp/>=<sp/><ref refid="pa__process_8c_1a2bce3edf65753593f4f4005e917ad9e4" kindref="member">PaUtil_EndBufferProcessing</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>,<sp/>&amp;callbackResult<sp/>);</highlight></codeline>
<codeline lineno="4171"><highlight class="normal"></highlight></codeline>
<codeline lineno="4172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="4173"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>you<sp/>need<sp/>to<sp/>byte<sp/>swap<sp/>or<sp/>shift<sp/>outputBuffer<sp/>to<sp/>convert<sp/>it<sp/>to</highlight></codeline>
<codeline lineno="4174"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>host<sp/>format,<sp/>do<sp/>it<sp/>here.</highlight></codeline>
<codeline lineno="4175"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4176"><highlight class="normal"></highlight></codeline>
<codeline lineno="4177"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__cpuload_8c_1a8c29cc1cf3b6fd9bf18a2c3fc9f0ef2a" kindref="member">PaUtil_EndCpuLoadMeasurement</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1aec37a2f4bcafd3f1a595a46e5393bd64" kindref="member">cpuLoadMeasurer</ref>,<sp/>framesProcessed<sp/>);</highlight></codeline>
<codeline lineno="4178"><highlight class="normal"></highlight></codeline>
<codeline lineno="4179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(callbackResult<sp/>==<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acba49cbf0e3bf605bb3deecef3b4fce3" kindref="member">paContinue</ref>)</highlight></codeline>
<codeline lineno="4180"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>nothing<sp/>special<sp/>to<sp/>do<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4182"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(callbackResult<sp/>==<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acaf141eb5d71420ffb4474da1dbd8de2" kindref="member">paAbort</ref>)</highlight></codeline>
<codeline lineno="4185"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>stop<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>);</highlight></codeline>
<codeline lineno="4188"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4189"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4190"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>stop<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>);</highlight></codeline>
<codeline lineno="4193"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4194"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4195"><highlight class="normal"></highlight></codeline>
<codeline lineno="4196"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4197" refid="pa__win__wasapi_8c_1aa8e7f1e1beb2ef450c45ca6d6b9234d7" refkind="member"><highlight class="normal"><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/><ref refid="pa__win__wasapi_8c_1aa8e7f1e1beb2ef450c45ca6d6b9234d7" kindref="member">MMCSS_activate</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="lib_2expat_8h_1a1b49b495b59f9e73205b69ad1a2965b0" kindref="member">name</ref>)</highlight></codeline>
<codeline lineno="4198"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4199"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>task_idx<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4200"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/>hTask<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1a892964d92daf945b57491f24eb331056" kindref="member">pAvSetMmThreadCharacteristics</ref>(name,<sp/>&amp;task_idx);</highlight></codeline>
<codeline lineno="4201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hTask<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4202"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>AvSetMmThreadCharacteristics<sp/>failed!\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4204"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4205"><highlight class="normal"></highlight></codeline>
<codeline lineno="4206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*BOOL<sp/>priority_ok<sp/>=<sp/>pAvSetMmThreadPriority(hTask,<sp/>AVRT_PRIORITY_NORMAL);</highlight></codeline>
<codeline lineno="4207"><highlight class="comment"><sp/><sp/><sp/><sp/>if<sp/>(priority_ok<sp/>==<sp/>FALSE)</highlight></codeline>
<codeline lineno="4208"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4209"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PRINT((&quot;WASAPI:<sp/>AvSetMmThreadPriority<sp/>failed!\n&quot;));</highlight></codeline>
<codeline lineno="4210"><highlight class="comment"><sp/><sp/><sp/><sp/>}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4211"><highlight class="normal"></highlight></codeline>
<codeline lineno="4212"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>debug</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4213"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/>cur_priority<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>GetThreadPriority(GetCurrentThread());</highlight></codeline>
<codeline lineno="4215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/><sp/>cur_priority_class<sp/>=<sp/>GetPriorityClass(GetCurrentProcess());</highlight></codeline>
<codeline lineno="4216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>thread[<sp/>priority-0x%X<sp/>class-0x%X<sp/>]\n&quot;</highlight><highlight class="normal">,<sp/>cur_priority,<sp/>cur_priority_class));</highlight></codeline>
<codeline lineno="4217"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4218"><highlight class="normal"></highlight></codeline>
<codeline lineno="4219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hTask;</highlight></codeline>
<codeline lineno="4220"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4221"><highlight class="normal"></highlight></codeline>
<codeline lineno="4222"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4223" refid="pa__win__wasapi_8c_1a32561c759b333bdffc1a7fe3fdf5dd04" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a32561c759b333bdffc1a7fe3fdf5dd04" kindref="member">MMCSS_deactivate</ref>(<ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/>hTask)</highlight></codeline>
<codeline lineno="4224"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!hTask)</highlight></codeline>
<codeline lineno="4226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4227"><highlight class="normal"></highlight></codeline>
<codeline lineno="4228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="pa__win__wasapi_8c_1a800438cc51e4a6661c2cdb986a16e093" kindref="member">pAvRevertMmThreadCharacteristics</ref>(hTask)<sp/>==<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>)</highlight></codeline>
<codeline lineno="4229"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>AvRevertMmThreadCharacteristics<sp/>failed!\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4231"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4232"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4233"><highlight class="normal"></highlight></codeline>
<codeline lineno="4234"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4235" refid="pa__win__wasapi_8c_1a2d48ae4d2124209ed8a6264c6febedc7" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__win__wasapi_8c_1a2d48ae4d2124209ed8a6264c6febedc7" kindref="member">PaWasapi_ThreadPriorityBoost</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**hTask,<sp/><ref refid="pa__win__wasapi_8h_1a561291b0188f6f29246ea669b48e2661" kindref="member">PaWasapiThreadPriority</ref><sp/>nPriorityClass)</highlight></codeline>
<codeline lineno="4236"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*mmcs_name[]<sp/>=</highlight></codeline>
<codeline lineno="4238"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="4240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Audio&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Capture&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Distribution&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Games&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Playback&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Pro<sp/>Audio&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Window<sp/>Manager&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4247"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="4248"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref><sp/>task;</highlight></codeline>
<codeline lineno="4249"><highlight class="normal"></highlight></codeline>
<codeline lineno="4250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hTask<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4252"><highlight class="normal"></highlight></codeline>
<codeline lineno="4253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)nPriorityClass<sp/>&gt;=<sp/><ref refid="pa__win__wasapi_8c_1a1ffa289724d1c8dbeefe0116b976158e" kindref="member">STATIC_ARRAY_SIZE</ref>(mmcs_name))</highlight></codeline>
<codeline lineno="4254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4255"><highlight class="normal"></highlight></codeline>
<codeline lineno="4256"><highlight class="normal"><sp/><sp/><sp/><sp/>task<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1aa8e7f1e1beb2ef450c45ca6d6b9234d7" kindref="member">MMCSS_activate</ref>(mmcs_name[nPriorityClass]);</highlight></codeline>
<codeline lineno="4257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(task<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4259"><highlight class="normal"></highlight></codeline>
<codeline lineno="4260"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hTask)<sp/>=<sp/>task;</highlight></codeline>
<codeline lineno="4261"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="4262"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4263"><highlight class="normal"></highlight></codeline>
<codeline lineno="4264"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4265" refid="pa__win__wasapi_8c_1ac5c875fb9165712ff696512f750f7de3" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__win__wasapi_8c_1ac5c875fb9165712ff696512f750f7de3" kindref="member">PaWasapi_ThreadPriorityRevert</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*hTask)</highlight></codeline>
<codeline lineno="4266"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hTask<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4269"><highlight class="normal"></highlight></codeline>
<codeline lineno="4270"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a32561c759b333bdffc1a7fe3fdf5dd04" kindref="member">MMCSS_deactivate</ref>((<ref refid="_sound_touch_d_l_l_8h_1aa8c0374618b33785ccb02f74bcfebc46" kindref="member">HANDLE</ref>)hTask);</highlight></codeline>
<codeline lineno="4271"><highlight class="normal"></highlight></codeline>
<codeline lineno="4272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="4273"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4274"><highlight class="normal"></highlight></codeline>
<codeline lineno="4275"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4276"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Described<sp/>at:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4277"><highlight class="normal"></highlight><highlight class="comment">//<sp/>http://msdn.microsoft.com/en-us/library/dd371387(v=VS.85).aspx</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4278"><highlight class="normal"></highlight></codeline>
<codeline lineno="4279" refid="pa__win__wasapi_8c_1a46583f8e4b1132c198e2451fd48f7490" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__win__wasapi_8c_1a46583f8e4b1132c198e2451fd48f7490" kindref="member">PaWasapi_GetJackCount</ref>(<ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>nDevice,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*jcount)</highlight></codeline>
<codeline lineno="4280"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4281"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ret;</highlight></codeline>
<codeline lineno="4282"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="4283"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>index;</highlight></codeline>
<codeline lineno="4284"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a4997c6c4616c3245d515eafd2ce686d0" kindref="member">IDeviceTopology</ref><sp/>*pDeviceTopology<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4285"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a51f898e3bb3480805837711f3fcf328b" kindref="member">IConnector</ref><sp/>*pConnFrom<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4286"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a51f898e3bb3480805837711f3fcf328b" kindref="member">IConnector</ref><sp/>*pConnTo<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4287"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1adabb5bd8e19759521e1498eef1d0b56f" kindref="member">IPart</ref><sp/>*pPart<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4288"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a309e1781c2a5279a8dcd39a197a59003" kindref="member">IKsJackDescription</ref><sp/>*pJackDesc<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4289"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a36cb3b01d81ffd844bbbfb54003e06ec" kindref="member">UINT</ref><sp/>jackCount<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4290"><highlight class="normal"></highlight></codeline>
<codeline lineno="4291"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi<sp/>=<sp/>_GetHostApi(&amp;ret);</highlight></codeline>
<codeline lineno="4292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a12769658a78482b4265673f7c08fbb57" kindref="member">paNotInitialized</ref>;</highlight></codeline>
<codeline lineno="4294"><highlight class="normal"></highlight></codeline>
<codeline lineno="4295"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>device<sp/>index.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4296"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="pa__front_8c_1a07ed030327e33935a807f671f4840936" kindref="member">PaUtil_DeviceIndexToHostApiDeviceIndex</ref>(&amp;index,<sp/>nDevice,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" kindref="member">inheritedHostApiRep</ref>);</highlight></codeline>
<codeline lineno="4297"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="4298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="4299"><highlight class="normal"></highlight></codeline>
<codeline lineno="4300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>index.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)index<sp/>&gt;=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>)</highlight></codeline>
<codeline lineno="4302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="4303"><highlight class="normal"></highlight></codeline>
<codeline lineno="4304"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>endpoint<sp/>device&apos;s<sp/>IDeviceTopology<sp/>interface.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4305"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[index].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>&amp;pa_IID_IDeviceTopology,</highlight></codeline>
<codeline lineno="4306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CLSCTX_INPROC_SERVER,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;pDeviceTopology);</highlight></codeline>
<codeline lineno="4307"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4308"><highlight class="normal"></highlight></codeline>
<codeline lineno="4309"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>device<sp/>topology<sp/>for<sp/>an<sp/>endpoint<sp/>device<sp/>always<sp/>contains<sp/>just<sp/>one<sp/>connector<sp/>(connector<sp/>number<sp/>0).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4310"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IDeviceTopology_GetConnector(pDeviceTopology,<sp/>0,<sp/>&amp;pConnFrom);</highlight></codeline>
<codeline lineno="4311"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4312"><highlight class="normal"></highlight></codeline>
<codeline lineno="4313"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Step<sp/>across<sp/>the<sp/>connection<sp/>to<sp/>the<sp/>jack<sp/>on<sp/>the<sp/>adapter.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4314"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IConnector_GetConnectedTo(pConnFrom,<sp/>&amp;pConnTo);</highlight></codeline>
<codeline lineno="4315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(HRESULT_FROM_WIN32(ERROR_PATH_NOT_FOUND)<sp/>==<sp/>hr)</highlight></codeline>
<codeline lineno="4316"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>adapter<sp/>device<sp/>is<sp/>not<sp/>currently<sp/>active.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>E_NOINTERFACE;</highlight></codeline>
<codeline lineno="4319"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4320"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4321"><highlight class="normal"></highlight></codeline>
<codeline lineno="4322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>connector&apos;s<sp/>IPart<sp/>interface.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4323"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IConnector_QueryInterface(pConnTo,<sp/>&amp;pa_IID_IPart,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;pPart);</highlight></codeline>
<codeline lineno="4324"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4325"><highlight class="normal"></highlight></codeline>
<codeline lineno="4326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Activate<sp/>the<sp/>connector&apos;s<sp/>IKsJackDescription<sp/>interface.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4327"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IPart_Activate(pPart,<sp/>CLSCTX_INPROC_SERVER,<sp/>&amp;pa_IID_IKsJackDescription,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;pJackDesc);</highlight></codeline>
<codeline lineno="4328"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4329"><highlight class="normal"></highlight></codeline>
<codeline lineno="4330"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Return<sp/>jack<sp/>count<sp/>for<sp/>this<sp/>device.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4331"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IKsJackDescription_GetJackCount(pJackDesc,<sp/>&amp;jackCount);</highlight></codeline>
<codeline lineno="4332"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4333"><highlight class="normal"></highlight></codeline>
<codeline lineno="4334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4335"><highlight class="normal"><sp/><sp/><sp/><sp/>(*jcount)<sp/>=<sp/>jackCount;</highlight></codeline>
<codeline lineno="4336"><highlight class="normal"></highlight></codeline>
<codeline lineno="4337"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Ok.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4338"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="4339"><highlight class="normal"></highlight></codeline>
<codeline lineno="4340"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="4341"><highlight class="normal"></highlight></codeline>
<codeline lineno="4342"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pDeviceTopology);</highlight></codeline>
<codeline lineno="4343"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pConnFrom);</highlight></codeline>
<codeline lineno="4344"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pConnTo);</highlight></codeline>
<codeline lineno="4345"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pPart);</highlight></codeline>
<codeline lineno="4346"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pJackDesc);</highlight></codeline>
<codeline lineno="4347"><highlight class="normal"></highlight></codeline>
<codeline lineno="4348"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4349"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="4350"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4351"><highlight class="normal"></highlight></codeline>
<codeline lineno="4352"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4353"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1" kindref="member">PaWasapiJackConnectionType</ref><sp/>ConvertJackConnectionTypeWASAPIToPA(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>connType)</highlight></codeline>
<codeline lineno="4354"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4355"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(connType)</highlight></codeline>
<codeline lineno="4356"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aac39b980eac4750a58a193b749dc14ecd" kindref="member">eConnTypeUnknown</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1aeef277daed454afbe5db9cc53b73822d" kindref="member">eJackConnTypeUnknown</ref>;</highlight></codeline>
<codeline lineno="4358"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>_KS_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aaf52e94260372d662d976af9da025f8da" kindref="member">eConnType3Point5mm</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1ab232edb9641629d2896357858df51c70" kindref="member">eJackConnType3Point5mm</ref>;</highlight></codeline>
<codeline lineno="4360"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>eConnTypeEighth:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1ab232edb9641629d2896357858df51c70" kindref="member">eJackConnType3Point5mm</ref>;</highlight></codeline>
<codeline lineno="4362"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aaf03611b19d97082fd632aefd5615e210" kindref="member">eConnTypeQuarter</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a76052cc9e64d066e286cc6bac00ed62b" kindref="member">eJackConnTypeQuarter</ref>;</highlight></codeline>
<codeline lineno="4364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aa31c5ec6ae21152cc965615de34618549" kindref="member">eConnTypeAtapiInternal</ref>:<sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a60e43ef61f0becd5b174e4e77f6ebed4" kindref="member">eJackConnTypeAtapiInternal</ref>;</highlight></codeline>
<codeline lineno="4365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aa5f7181314dbb519964f3fd47e543daf9" kindref="member">eConnTypeRCA</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a9d9d8d9349b9215e3e5656459a080eb0" kindref="member">eJackConnTypeRCA</ref>;</highlight></codeline>
<codeline lineno="4366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aa521ab2d3d01a35d043d60b3daed8808d" kindref="member">eConnTypeOptical</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a738576cd148978b962fdb7e201055ee1" kindref="member">eJackConnTypeOptical</ref>;</highlight></codeline>
<codeline lineno="4367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aa215253bd6ecb867fc4357b729b2551c0" kindref="member">eConnTypeOtherDigital</ref>:<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a3ba01b521ebfd66e06eb5d692ceaec00" kindref="member">eJackConnTypeOtherDigital</ref>;</highlight></codeline>
<codeline lineno="4368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aac6b675a5ca79ccdfc56da73ea069b077" kindref="member">eConnTypeOtherAnalog</ref>:<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a3a72f82f2ae0524a7554e75883a409cb" kindref="member">eJackConnTypeOtherAnalog</ref>;</highlight></codeline>
<codeline lineno="4369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aafc2a6d47360bc752e1907212210f982a" kindref="member">eConnTypeMultichannelAnalogDIN</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a7dfd87d41f3899e05ba4774429a2cf8c" kindref="member">eJackConnTypeMultichannelAnalogDIN</ref>;</highlight></codeline>
<codeline lineno="4370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aadc67c21e73c02876acdbdc25fe8ccaa5" kindref="member">eConnTypeXlrProfessional</ref>:<sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a8d87cf2183ba9a4d4bba0381956261e6" kindref="member">eJackConnTypeXlrProfessional</ref>;</highlight></codeline>
<codeline lineno="4371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aa00f21e78961c86e55fe4255ff9020e4f" kindref="member">eConnTypeRJ11Modem</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a25006a561a7f2ae7e56be76e69419a27" kindref="member">eJackConnTypeRJ11Modem</ref>;</highlight></codeline>
<codeline lineno="4372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1afdb69df12579db9b3a98e37df243c03aaa7ac5925f9f6e8956209dba624f6886d" kindref="member">eConnTypeCombination</ref>:<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1a1540849ce578ea9b5bae30674e41ec61" kindref="member">eJackConnTypeCombination</ref>;</highlight></codeline>
<codeline lineno="4373"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1a40b6ae7a53886196c59afe8b704695e1aeef277daed454afbe5db9cc53b73822d" kindref="member">eJackConnTypeUnknown</ref>;</highlight></codeline>
<codeline lineno="4375"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4376"><highlight class="normal"></highlight></codeline>
<codeline lineno="4377"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4378"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188" kindref="member">PaWasapiJackGeoLocation</ref><sp/>ConvertJackGeoLocationWASAPIToPA(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>geoLoc)</highlight></codeline>
<codeline lineno="4379"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(geoLoc)</highlight></codeline>
<codeline lineno="4381"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4382"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339a4ef5d8d39929a789f78ef704d8e6d307" kindref="member">eGeoLocRear</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188ab2aa90a453490f614b2cac1078bba16f" kindref="member">eJackGeoLocRear</ref>;</highlight></codeline>
<codeline lineno="4383"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339aa3c211d337520e66a86a6f77fe602f22" kindref="member">eGeoLocFront</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188ae813c94e9f55bd40a4ffead5584b4d0c" kindref="member">eJackGeoLocFront</ref>;</highlight></codeline>
<codeline lineno="4384"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339aad637fb696284323daf79e640e8a4021" kindref="member">eGeoLocLeft</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188afaa13db87519bd23faed247faa92f224" kindref="member">eJackGeoLocLeft</ref>;</highlight></codeline>
<codeline lineno="4385"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339acfa910b741a17a3fe4aa6c29a9a0ed2f" kindref="member">eGeoLocRight</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a43fa6750867dc867b58b163f3166e211" kindref="member">eJackGeoLocRight</ref>;</highlight></codeline>
<codeline lineno="4386"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339ac08843085881068618a0afacfe6f29b7" kindref="member">eGeoLocTop</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a15ebc49750feddc0d15580bb1459f2f4" kindref="member">eJackGeoLocTop</ref>;</highlight></codeline>
<codeline lineno="4387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339a14ec0ec2c536c227f05d0934a4bd991d" kindref="member">eGeoLocBottom</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188ad4f5d5252864353b5e34e4cb4df18847" kindref="member">eJackGeoLocBottom</ref>;</highlight></codeline>
<codeline lineno="4388"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>_KS_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4389"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339a44940b210b1f19f72d83ba9baf0df7b8" kindref="member">eGeoLocRearPanel</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a723c05df6b615324e42074c073776770" kindref="member">eJackGeoLocRearPanel</ref>;</highlight></codeline>
<codeline lineno="4390"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4391"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>eGeoLocRearOPanel:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a723c05df6b615324e42074c073776770" kindref="member">eJackGeoLocRearPanel</ref>;</highlight></codeline>
<codeline lineno="4392"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4393"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339a16780138d79c3a20b94cb939997fc673" kindref="member">eGeoLocRiser</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a8309ad278ca624ff91f595962665c217" kindref="member">eJackGeoLocRiser</ref>;</highlight></codeline>
<codeline lineno="4394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339abd2635117b8a5d9d78bcce9687cc411d" kindref="member">eGeoLocInsideMobileLid</ref>:<sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a665cc34b96ee78cc19a8fb8992b6f9a8" kindref="member">eJackGeoLocInsideMobileLid</ref>;</highlight></codeline>
<codeline lineno="4395"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339a1c5d76900e866301f9c6a3ef97a1340e" kindref="member">eGeoLocDrivebay</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188af2052f01078dd7b5d8f47bd58a298810" kindref="member">eJackGeoLocDrivebay</ref>;</highlight></codeline>
<codeline lineno="4396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339a8e7e1a3b20083ec5607c45a12150b39a" kindref="member">eGeoLocHDMI</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a4d6b118ab64ac8f84afce0fc3a69b64a" kindref="member">eJackGeoLocHDMI</ref>;</highlight></codeline>
<codeline lineno="4397"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339a6176763e50e67b25b788b466c7f2794b" kindref="member">eGeoLocOutsideMobileLid</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a8106e080eab9408b808fe6387b30d9cc" kindref="member">eJackGeoLocOutsideMobileLid</ref>;</highlight></codeline>
<codeline lineno="4398"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ac4fad76166b5421c84e297adebed1339ae38eed28445d62270f4f29ed9b1832d8" kindref="member">eGeoLocATAPI</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a52adf880d4923db0fdc393655ad4f613" kindref="member">eJackGeoLocATAPI</ref>;</highlight></codeline>
<codeline lineno="4399"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4400"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ae869986af2827bbd6257bca43d9a8188a82e965eb8f615dedafda89babed72551" kindref="member">eJackGeoLocUnk</ref>;</highlight></codeline>
<codeline lineno="4401"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4402"><highlight class="normal"></highlight></codeline>
<codeline lineno="4403"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4404"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cf" kindref="member">PaWasapiJackGenLocation</ref><sp/>ConvertJackGenLocationWASAPIToPA(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>genLoc)</highlight></codeline>
<codeline lineno="4405"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4406"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(genLoc)</highlight></codeline>
<codeline lineno="4407"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4408"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a9cd07cae0b9790b8d3a939abc010481aab049e4045b0d51eb0a77706faf655a68" kindref="member">eGenLocPrimaryBox</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cfafc1af7a35520874185bdcd3f918256ef" kindref="member">eJackGenLocPrimaryBox</ref>;</highlight></codeline>
<codeline lineno="4409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a9cd07cae0b9790b8d3a939abc010481aa296024c56eec00a309f881a763adc101" kindref="member">eGenLocInternal</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cfa65126aa4a47441566c85b3626b86e7f0" kindref="member">eJackGenLocInternal</ref>;</highlight></codeline>
<codeline lineno="4410"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>_KS_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4411"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a9cd07cae0b9790b8d3a939abc010481aa9c2c0a4bc5613cd1f6f15833093f2d08" kindref="member">eGenLocSeparate</ref>:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cfacd687d08859bcb461bab8085f1b43c77" kindref="member">eJackGenLocSeparate</ref>;</highlight></codeline>
<codeline lineno="4412"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4413"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>eGenLocSeperate:<sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cfacd687d08859bcb461bab8085f1b43c77" kindref="member">eJackGenLocSeparate</ref>;</highlight></codeline>
<codeline lineno="4414"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1a9cd07cae0b9790b8d3a939abc010481aa5d3615d33ee2080d6a8c050a25569720" kindref="member">eGenLocOther</ref>:<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cfadafdc4431fb41cab7d2f7e9079c11d8b" kindref="member">eJackGenLocOther</ref>;</highlight></codeline>
<codeline lineno="4416"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4417"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1ac205e0ea20ca795edcfd9f19135cf4cfafc1af7a35520874185bdcd3f918256ef" kindref="member">eJackGenLocPrimaryBox</ref>;</highlight></codeline>
<codeline lineno="4418"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4419"><highlight class="normal"></highlight></codeline>
<codeline lineno="4420"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4421"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1aa4c63b1465e5de66f108facd3ddf893d" kindref="member">PaWasapiJackPortConnection</ref><sp/>ConvertJackPortConnectionWASAPIToPA(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>portConn)</highlight></codeline>
<codeline lineno="4422"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4423"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(portConn)</highlight></codeline>
<codeline lineno="4424"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4425"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ab7563f14bc668f277cd1664d666d52a5acc254ed6154c217029257604983f8885" kindref="member">ePortConnJack</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1aa4c63b1465e5de66f108facd3ddf893da551246109a231fa4461f49a19b18648a" kindref="member">eJackPortConnJack</ref>;</highlight></codeline>
<codeline lineno="4426"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ab7563f14bc668f277cd1664d666d52a5ac46710806a8b656e0b7fb725603228c6" kindref="member">ePortConnIntegratedDevice</ref>:<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1aa4c63b1465e5de66f108facd3ddf893daef9f29f757f6c624178c248407be39e7" kindref="member">eJackPortConnIntegratedDevice</ref>;</highlight></codeline>
<codeline lineno="4427"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ab7563f14bc668f277cd1664d666d52a5a2394e2fb93acb24facb230ee8dbf8c71" kindref="member">ePortConnBothIntegratedAndJack</ref>:</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1aa4c63b1465e5de66f108facd3ddf893dabafdd05b8e51314766c0fcd3d754cd36" kindref="member">eJackPortConnBothIntegratedAndJack</ref>;</highlight></codeline>
<codeline lineno="4428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="ksmedia_8h_1ab7563f14bc668f277cd1664d666d52a5a0a97205d0a8c93a9c2ba72890d988b9b" kindref="member">ePortConnUnknown</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1aa4c63b1465e5de66f108facd3ddf893da6952e4865d35e1144884c803239b82f0" kindref="member">eJackPortConnUnknown</ref>;</highlight></codeline>
<codeline lineno="4429"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4430"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8h_1aa4c63b1465e5de66f108facd3ddf893da551246109a231fa4461f49a19b18648a" kindref="member">eJackPortConnJack</ref>;</highlight></codeline>
<codeline lineno="4431"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4432"><highlight class="normal"></highlight></codeline>
<codeline lineno="4433"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4434"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Described<sp/>at:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4435"><highlight class="normal"></highlight><highlight class="comment">//<sp/>http://msdn.microsoft.com/en-us/library/dd371387(v=VS.85).aspx</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4436"><highlight class="normal"></highlight></codeline>
<codeline lineno="4437" refid="pa__win__wasapi_8c_1a042829efac1aca1d77608d136a523465" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__win__wasapi_8c_1a042829efac1aca1d77608d136a523465" kindref="member">PaWasapi_GetJackDescription</ref>(<ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>nDevice,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>jindex,<sp/><ref refid="struct_pa_wasapi_jack_description" kindref="compound">PaWasapiJackDescription</ref><sp/>*pJackDescription)</highlight></codeline>
<codeline lineno="4438"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4439"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ret;</highlight></codeline>
<codeline lineno="4440"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="4441"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1ad79317e65bde63d76c4b8e711ac5a361" kindref="member">PaDeviceIndex</ref><sp/>index;</highlight></codeline>
<codeline lineno="4442"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a4997c6c4616c3245d515eafd2ce686d0" kindref="member">IDeviceTopology</ref><sp/>*pDeviceTopology<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4443"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a51f898e3bb3480805837711f3fcf328b" kindref="member">IConnector</ref><sp/>*pConnFrom<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4444"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a51f898e3bb3480805837711f3fcf328b" kindref="member">IConnector</ref><sp/>*pConnTo<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4445"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1adabb5bd8e19759521e1498eef1d0b56f" kindref="member">IPart</ref><sp/>*pPart<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4446"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="devicetopology_8h_1a309e1781c2a5279a8dcd39a197a59003" kindref="member">IKsJackDescription</ref><sp/>*pJackDesc<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4447"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n" kindref="compound">KSJACK_DESCRIPTION</ref><sp/>jack<sp/>=<sp/>{<sp/>0<sp/>};</highlight></codeline>
<codeline lineno="4448"><highlight class="normal"></highlight></codeline>
<codeline lineno="4449"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_api_representation" kindref="compound">PaWasapiHostApiRepresentation</ref><sp/>*paWasapi<sp/>=<sp/>_GetHostApi(&amp;ret);</highlight></codeline>
<codeline lineno="4450"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(paWasapi<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a12769658a78482b4265673f7c08fbb57" kindref="member">paNotInitialized</ref>;</highlight></codeline>
<codeline lineno="4452"><highlight class="normal"></highlight></codeline>
<codeline lineno="4453"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>device<sp/>index.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4454"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="pa__front_8c_1a07ed030327e33935a807f671f4840936" kindref="member">PaUtil_DeviceIndexToHostApiDeviceIndex</ref>(&amp;index,<sp/>nDevice,<sp/>&amp;paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1ad447d8ee0d61618450521f7d8204b733" kindref="member">inheritedHostApiRep</ref>);</highlight></codeline>
<codeline lineno="4455"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>)</highlight></codeline>
<codeline lineno="4456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="4457"><highlight class="normal"></highlight></codeline>
<codeline lineno="4458"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Validate<sp/>index.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4459"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref>)index<sp/>&gt;=<sp/>paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1aa1e79d8886b9e0a504e3d3501b9bea18" kindref="member">deviceCount</ref>)</highlight></codeline>
<codeline lineno="4460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="4461"><highlight class="normal"></highlight></codeline>
<codeline lineno="4462"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>endpoint<sp/>device&apos;s<sp/>IDeviceTopology<sp/>interface.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4463"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IMMDevice_Activate(paWasapi-&gt;<ref refid="struct_pa_wasapi_host_api_representation_1a69ec6c1449ce660d84a4d4d0653faf3e" kindref="member">devInfo</ref>[index].<ref refid="struct_pa_wasapi_device_info_1ae0c5e0acfb5e38e2c42f2dd11d8f0e80" kindref="member">device</ref>,<sp/>&amp;pa_IID_IDeviceTopology,</highlight></codeline>
<codeline lineno="4464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CLSCTX_INPROC_SERVER,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;pDeviceTopology);</highlight></codeline>
<codeline lineno="4465"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4466"><highlight class="normal"></highlight></codeline>
<codeline lineno="4467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>device<sp/>topology<sp/>for<sp/>an<sp/>endpoint<sp/>device<sp/>always<sp/>contains<sp/>just<sp/>one<sp/>connector<sp/>(connector<sp/>number<sp/>0).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4468"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IDeviceTopology_GetConnector(pDeviceTopology,<sp/>0,<sp/>&amp;pConnFrom);</highlight></codeline>
<codeline lineno="4469"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4470"><highlight class="normal"></highlight></codeline>
<codeline lineno="4471"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Step<sp/>across<sp/>the<sp/>connection<sp/>to<sp/>the<sp/>jack<sp/>on<sp/>the<sp/>adapter.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4472"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IConnector_GetConnectedTo(pConnFrom,<sp/>&amp;pConnTo);</highlight></codeline>
<codeline lineno="4473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(HRESULT_FROM_WIN32(ERROR_PATH_NOT_FOUND)<sp/>==<sp/>hr)</highlight></codeline>
<codeline lineno="4474"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>adapter<sp/>device<sp/>is<sp/>not<sp/>currently<sp/>active.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>E_NOINTERFACE;</highlight></codeline>
<codeline lineno="4477"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4478"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4479"><highlight class="normal"></highlight></codeline>
<codeline lineno="4480"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>connector&apos;s<sp/>IPart<sp/>interface.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4481"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IConnector_QueryInterface(pConnTo,<sp/>&amp;pa_IID_IPart,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;pPart);</highlight></codeline>
<codeline lineno="4482"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4483"><highlight class="normal"></highlight></codeline>
<codeline lineno="4484"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Activate<sp/>the<sp/>connector&apos;s<sp/>IKsJackDescription<sp/>interface.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4485"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IPart_Activate(pPart,<sp/>CLSCTX_INPROC_SERVER,<sp/>&amp;pa_IID_IKsJackDescription,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">**)&amp;pJackDesc);</highlight></codeline>
<codeline lineno="4486"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4487"><highlight class="normal"></highlight></codeline>
<codeline lineno="4488"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>to<sp/>return<sp/>jack<sp/>description<sp/>struct<sp/>for<sp/>index<sp/>0.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4489"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IKsJackDescription_GetJackDescription(pJackDesc,<sp/>jindex,<sp/>&amp;jack);</highlight></codeline>
<codeline lineno="4490"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a1e9952fda08455274b0399512ddd1830" kindref="member">IF_FAILED_JUMP</ref>(hr,<sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>);</highlight></codeline>
<codeline lineno="4491"><highlight class="normal"></highlight></codeline>
<codeline lineno="4492"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>WASAPI<sp/>values<sp/>to<sp/>PA<sp/>format.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4493"><highlight class="normal"><sp/><sp/><sp/><sp/>pJackDescription-&gt;<ref refid="struct_pa_wasapi_jack_description_1afc8865aab64ab827315a7ce645b627f4" kindref="member">channelMapping</ref><sp/>=<sp/>jack.<ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n_1aa1e44668e22712023045dbff11a5e5fe" kindref="member">ChannelMapping</ref>;</highlight></codeline>
<codeline lineno="4494"><highlight class="normal"><sp/><sp/><sp/><sp/>pJackDescription-&gt;<ref refid="struct_pa_wasapi_jack_description_1a2a0d9cd5e745192482afeda572941d15" kindref="member">color</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>jack.<ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n_1aa843c17518cd95420e28177647548e11" kindref="member">Color</ref>;</highlight></codeline>
<codeline lineno="4495"><highlight class="normal"><sp/><sp/><sp/><sp/>pJackDescription-&gt;<ref refid="struct_pa_wasapi_jack_description_1ae9fd6f09268cc8d3c510965305025a7e" kindref="member">connectionType</ref><sp/>=<sp/>ConvertJackConnectionTypeWASAPIToPA(jack.<ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n_1a4912c3ca11ce94f3b88606dbc346d711" kindref="member">ConnectionType</ref>);</highlight></codeline>
<codeline lineno="4496"><highlight class="normal"><sp/><sp/><sp/><sp/>pJackDescription-&gt;<ref refid="struct_pa_wasapi_jack_description_1a852b2bcb200801d995b4b250bb0bad6c" kindref="member">genLocation</ref><sp/><sp/><sp/><sp/>=<sp/>ConvertJackGenLocationWASAPIToPA(jack.<ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n_1ae906bb4ae773b628f2906d16b0daa2b3" kindref="member">GenLocation</ref>);</highlight></codeline>
<codeline lineno="4497"><highlight class="normal"><sp/><sp/><sp/><sp/>pJackDescription-&gt;<ref refid="struct_pa_wasapi_jack_description_1aed082cc704160dc568aec7da9b778328" kindref="member">geoLocation</ref><sp/><sp/><sp/><sp/>=<sp/>ConvertJackGeoLocationWASAPIToPA(jack.<ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n_1aa9295786f7e992d8f4db02d43bbdfc17" kindref="member">GeoLocation</ref>);</highlight></codeline>
<codeline lineno="4498"><highlight class="normal"><sp/><sp/><sp/><sp/>pJackDescription-&gt;<ref refid="struct_pa_wasapi_jack_description_1a76f80f4664be933cc4d760b37d1ff410" kindref="member">isConnected</ref><sp/><sp/><sp/><sp/>=<sp/>jack.<ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n_1a0840c033bb5af29e583a0edb0bbacc35" kindref="member">IsConnected</ref>;</highlight></codeline>
<codeline lineno="4499"><highlight class="normal"><sp/><sp/><sp/><sp/>pJackDescription-&gt;<ref refid="struct_pa_wasapi_jack_description_1a5c78feaba82b02de3997a698231b5f05" kindref="member">portConnection</ref><sp/>=<sp/>ConvertJackPortConnectionWASAPIToPA(jack.<ref refid="struct_k_s_j_a_c_k___d_e_s_c_r_i_p_t_i_o_n_1a8404a8021c3738727574ab02da9b70b2" kindref="member">PortConnection</ref>);</highlight></codeline>
<codeline lineno="4500"><highlight class="normal"></highlight></codeline>
<codeline lineno="4501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Ok.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4502"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="4503"><highlight class="normal"></highlight></codeline>
<codeline lineno="4504"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="4505"><highlight class="normal"></highlight></codeline>
<codeline lineno="4506"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pDeviceTopology);</highlight></codeline>
<codeline lineno="4507"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pConnFrom);</highlight></codeline>
<codeline lineno="4508"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pConnTo);</highlight></codeline>
<codeline lineno="4509"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pPart);</highlight></codeline>
<codeline lineno="4510"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1aaafc777c741d97e2d33f43fbdd949f2c" kindref="member">SAFE_RELEASE</ref>(pJackDesc);</highlight></codeline>
<codeline lineno="4511"><highlight class="normal"></highlight></codeline>
<codeline lineno="4512"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4513"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="4514"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4515"><highlight class="normal"></highlight></codeline>
<codeline lineno="4516"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4517"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>_PollGetOutputFramesAvailable(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>*available)</highlight></codeline>
<codeline lineno="4518"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4519"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4520"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frames<sp/><sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>,</highlight></codeline>
<codeline lineno="4521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="src_2flac_2main_8c_1a78dca952886227190969e885fbdd4fb4" kindref="member">padding</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4522"><highlight class="normal"></highlight></codeline>
<codeline lineno="4523"><highlight class="normal"><sp/><sp/><sp/><sp/>(*available)<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4524"><highlight class="normal"></highlight></codeline>
<codeline lineno="4525"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>read<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4526"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_GetCurrentPadding(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>,<sp/>&amp;<ref refid="src_2flac_2main_8c_1a78dca952886227190969e885fbdd4fb4" kindref="member">padding</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4528"><highlight class="normal"></highlight></codeline>
<codeline lineno="4529"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>available</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4530"><highlight class="normal"><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/><ref refid="src_2flac_2main_8c_1a78dca952886227190969e885fbdd4fb4" kindref="member">padding</ref>;</highlight></codeline>
<codeline lineno="4531"><highlight class="normal"></highlight></codeline>
<codeline lineno="4532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4533"><highlight class="normal"><sp/><sp/><sp/><sp/>(*available)<sp/>=<sp/>frames;</highlight></codeline>
<codeline lineno="4534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hr;</highlight></codeline>
<codeline lineno="4535"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4536"><highlight class="normal"></highlight></codeline>
<codeline lineno="4537"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4538"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>_PollGetInputFramesAvailable(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>*available)</highlight></codeline>
<codeline lineno="4539"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4540"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4541"><highlight class="normal"></highlight></codeline>
<codeline lineno="4542"><highlight class="normal"><sp/><sp/><sp/><sp/>(*available)<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4543"><highlight class="normal"></highlight></codeline>
<codeline lineno="4544"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>GetCurrentPadding()<sp/>has<sp/>opposite<sp/>meaning<sp/>to<sp/>Output<sp/>stream<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_GetCurrentPadding(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>,<sp/>available))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4547"><highlight class="normal"></highlight></codeline>
<codeline lineno="4548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hr;</highlight></codeline>
<codeline lineno="4549"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4550"><highlight class="normal"></highlight></codeline>
<codeline lineno="4551"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4552" refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" refkind="member"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/><ref refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" kindref="member">ProcessOutputBuffer</ref>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream,<sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/>*<ref refid="xmlparse_8c_1ae2e049b4850fa94870e78619701bbeb0" kindref="member">processor</ref>,<sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frames)</highlight></codeline>
<codeline lineno="4553"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4554"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4555"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*<ref refid="lib_2expat_8h_1ac39e72a1de1cb50dbdc54b08d0432a24" kindref="member">data</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4556"><highlight class="normal"></highlight></codeline>
<codeline lineno="4557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4558"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>frames,<sp/>&amp;data))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4559"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>)</highlight></codeline>
<codeline lineno="4561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Using<sp/>GetCurrentPadding<sp/>to<sp/>overcome<sp/>AUDCLNT_E_BUFFER_TOO_LARGE<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>shared<sp/>mode<sp/>results<sp/>in<sp/>no<sp/>sound<sp/>in<sp/>Event-driven<sp/>mode<sp/>(MSDN<sp/>does<sp/>not</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>document<sp/>this,<sp/>or<sp/>is<sp/>it<sp/>WASAPI<sp/>bug?),<sp/>thus<sp/>we<sp/>better</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>acquire<sp/>buffer<sp/>next<sp/>time<sp/>when<sp/>GetBuffer<sp/>allows<sp/>to<sp/>do<sp/>so.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4566"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>Read<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/><ref refid="src_2flac_2main_8c_1a78dca952886227190969e885fbdd4fb4" kindref="member">padding</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>IAudioClient_GetCurrentPadding(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>,<sp/>&amp;padding);</highlight></codeline>
<codeline lineno="4570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4572"><highlight class="normal"></highlight></codeline>
<codeline lineno="4573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>frames<sp/>to<sp/>write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/><ref refid="src_2flac_2main_8c_1a78dca952886227190969e885fbdd4fb4" kindref="member">padding</ref>;</highlight></codeline>
<codeline lineno="4575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frames<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="4576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>S_OK;</highlight></codeline>
<codeline lineno="4577"><highlight class="normal"></highlight></codeline>
<codeline lineno="4578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>frames,<sp/>&amp;data))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4580"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/><ref refid="audioclient_8h_1aba06602a1bcdc59e4a584f6119c5ce19" kindref="member">AUDCLNT_E_BUFFER_TOO_LARGE</ref>)</highlight></codeline>
<codeline lineno="4582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>S_OK;<sp/></highlight><highlight class="comment">//<sp/>be<sp/>silent<sp/>in<sp/>shared<sp/>mode,<sp/>try<sp/>again<sp/>next<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4583"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4587"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4588"><highlight class="normal"></highlight></codeline>
<codeline lineno="4589"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4590"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4591"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>expand<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>mono_frames_size<sp/>=<sp/>frames<sp/>*<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.wBitsPerSample<sp/>/<sp/>8);</highlight></codeline>
<codeline lineno="4594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mono_frames_size<sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref>)</highlight></codeline>
<codeline lineno="4595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>=<sp/>PaWasapi_ReallocateMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref><sp/>=<sp/>mono_frames_size));</highlight></codeline>
<codeline lineno="4596"><highlight class="normal"></highlight></codeline>
<codeline lineno="4597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>].<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>0,<sp/>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>frames,<sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>].<ref refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" kindref="member">userData</ref>);</highlight></codeline>
<codeline lineno="4599"><highlight class="normal"></highlight></codeline>
<codeline lineno="4600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mix<sp/>1<sp/>to<sp/>2<sp/>channels</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>(data,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>frames);</highlight></codeline>
<codeline lineno="4602"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4603"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4604"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>].<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>0,<sp/>data,<sp/>frames,<sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>].<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref>);</highlight></codeline>
<codeline lineno="4606"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4607"><highlight class="normal"></highlight></codeline>
<codeline lineno="4608"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4609"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>frames,<sp/>0))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4611"><highlight class="normal"></highlight></codeline>
<codeline lineno="4612"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hr;</highlight></codeline>
<codeline lineno="4613"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4614"><highlight class="normal"></highlight></codeline>
<codeline lineno="4615"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4616" refid="pa__win__wasapi_8c_1a37f64191221d539235537b8cfa71b456" refkind="member"><highlight class="normal"><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/><ref refid="pa__win__wasapi_8c_1a37f64191221d539235537b8cfa71b456" kindref="member">ProcessInputBuffer</ref>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream,<sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/>*<ref refid="xmlparse_8c_1ae2e049b4850fa94870e78619701bbeb0" kindref="member">processor</ref>)</highlight></codeline>
<codeline lineno="4617"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4618"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="4619"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frames;</highlight></codeline>
<codeline lineno="4620"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*<ref refid="lib_2expat_8h_1ac39e72a1de1cb50dbdc54b08d0432a24" kindref="member">data</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4621"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>flags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4622"><highlight class="normal"></highlight></codeline>
<codeline lineno="4623"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(;;)</highlight></codeline>
<codeline lineno="4624"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>blocking<sp/>call<sp/>must<sp/>be<sp/>interrupted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>0)<sp/>!=<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="4627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4628"><highlight class="normal"></highlight></codeline>
<codeline lineno="4629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Findout<sp/>if<sp/>any<sp/>frames<sp/>available</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetInputFramesAvailable(stream,<sp/>&amp;frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hr;</highlight></codeline>
<codeline lineno="4633"><highlight class="normal"></highlight></codeline>
<codeline lineno="4634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Empty/consumed<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frames<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="4636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4637"><highlight class="normal"></highlight></codeline>
<codeline lineno="4638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>available<sp/>data<sp/>in<sp/>the<sp/>shared<sp/>buffer.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>&amp;data,<sp/>&amp;frames,<sp/>&amp;flags,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/><ref refid="audioclient_8h_1aefe9792eb9de1c3607c05dca19c70a8c" kindref="member">AUDCLNT_S_BUFFER_EMPTY</ref>)</highlight></codeline>
<codeline lineno="4642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>S_OK;</highlight></codeline>
<codeline lineno="4644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>Empty/consumed<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4646"><highlight class="normal"></highlight></codeline>
<codeline lineno="4647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4650"><highlight class="normal"></highlight></codeline>
<codeline lineno="4651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Detect<sp/>silence</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>(flags<sp/>&amp;<sp/>AUDCLNT_BUFFERFLAGS_SILENT)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>data<sp/>=<sp/>NULL;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4654"><highlight class="normal"></highlight></codeline>
<codeline lineno="4655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>expand<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>mono_frames_size<sp/>=<sp/>frames<sp/>*<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.wBitsPerSample<sp/>/<sp/>8);</highlight></codeline>
<codeline lineno="4660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mono_frames_size<sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref>)</highlight></codeline>
<codeline lineno="4661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>=<sp/>PaWasapi_ReallocateMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref><sp/>=<sp/>mono_frames_size));</highlight></codeline>
<codeline lineno="4662"><highlight class="normal"></highlight></codeline>
<codeline lineno="4663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mix<sp/>1<sp/>to<sp/>2<sp/>channels</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>data,<sp/>frames);</highlight></codeline>
<codeline lineno="4665"><highlight class="normal"></highlight></codeline>
<codeline lineno="4666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>].<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref>((<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>frames,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>0,<sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>].<ref refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" kindref="member">userData</ref>);</highlight></codeline>
<codeline lineno="4668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>].<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref>(data,<sp/>frames,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>0,<sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>].<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref>);</highlight></codeline>
<codeline lineno="4672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4673"><highlight class="normal"></highlight></codeline>
<codeline lineno="4674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4677"><highlight class="normal"></highlight></codeline>
<codeline lineno="4678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//break;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4679"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4680"><highlight class="normal"></highlight></codeline>
<codeline lineno="4681"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hr;</highlight></codeline>
<codeline lineno="4682"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4683"><highlight class="normal"></highlight></codeline>
<codeline lineno="4684"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4685"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_StreamOnStop(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream)</highlight></codeline>
<codeline lineno="4686"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4687"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stop<sp/>INPUT/OUTPUT<sp/>clients</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4688"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stream-&gt;<ref refid="struct_pa_wasapi_stream_1a2497dda1ef25d7673f3a67553c2b5a0e" kindref="member">bBlocking</ref>)<sp/></highlight></codeline>
<codeline lineno="4689"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioClient_Stop(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>);</highlight></codeline>
<codeline lineno="4692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioClient_Stop(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>);</highlight></codeline>
<codeline lineno="4694"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="4695"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="4696"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioClient_Stop(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>);</highlight></codeline>
<codeline lineno="4699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioClient_Stop(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad21bfcde276613bdfd3d7950b9ea7755" kindref="member">clientParent</ref>);</highlight></codeline>
<codeline lineno="4701"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4702"><highlight class="normal"></highlight></codeline>
<codeline lineno="4703"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Restore<sp/>thread<sp/>priority</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4704"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1aae3a56871d156b6d8cfa2e070b408103" kindref="member">hAvTask</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4705"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ac5c875fb9165712ff696512f750f7de3" kindref="member">PaWasapi_ThreadPriorityRevert</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1aae3a56871d156b6d8cfa2e070b408103" kindref="member">hAvTask</ref>);</highlight></codeline>
<codeline lineno="4707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1aae3a56871d156b6d8cfa2e070b408103" kindref="member">hAvTask</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4708"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4709"><highlight class="normal"></highlight></codeline>
<codeline lineno="4710"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4711"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>.<ref refid="struct_pa_util_stream_representation_1a9132c3be1600907f747c38d64f4a4a3e" kindref="member">streamFinishedCallback</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>.<ref refid="struct_pa_util_stream_representation_1a9132c3be1600907f747c38d64f4a4a3e" kindref="member">streamFinishedCallback</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a05e4c67863aa5f87417a7c0ea031d1ee" kindref="member">streamRepresentation</ref>.<ref refid="struct_pa_util_stream_representation_1a5d47c8cae02066d877bc7c670adb61ad" kindref="member">userData</ref>);</highlight></codeline>
<codeline lineno="4713"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4714"><highlight class="normal"></highlight></codeline>
<codeline lineno="4715"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4716" refid="pa__win__wasapi_8c_1ac575016ee1e9d6275cbc5004b2409036" refkind="member"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1ad744bd36cb3631b1dc11beb41dcc238c" kindref="member">PA_THREAD_FUNC</ref><sp/><ref refid="pa__win__wasapi_8c_1ac575016ee1e9d6275cbc5004b2409036" kindref="member">ProcThreadEvent</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*param)</highlight></codeline>
<codeline lineno="4717"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4718"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/><ref refid="xmlparse_8c_1ae2e049b4850fa94870e78619701bbeb0" kindref="member">processor</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" kindref="member">S_COUNT</ref>];</highlight></codeline>
<codeline lineno="4719"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4720"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>dwResult;</highlight></codeline>
<codeline lineno="4721"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)param;</highlight></codeline>
<codeline lineno="4722"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/>defaultProcessor;</highlight></codeline>
<codeline lineno="4723"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>set_event[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" kindref="member">S_COUNT</ref>]<sp/>=<sp/>{<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref><sp/>};</highlight></codeline>
<codeline lineno="4724"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>bWaitAllEvents<sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="4725"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>bThreadComInitialized<sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="4726"><highlight class="normal"></highlight></codeline>
<codeline lineno="4727"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="4728"><highlight class="comment"><sp/><sp/><sp/><sp/>If<sp/>COM<sp/>is<sp/>already<sp/>initialized<sp/>CoInitialize<sp/>will<sp/>either<sp/>return</highlight></codeline>
<codeline lineno="4729"><highlight class="comment"><sp/><sp/><sp/><sp/>FALSE,<sp/>or<sp/>RPC_E_CHANGED_MODE<sp/>if<sp/>it<sp/>was<sp/>initialized<sp/>in<sp/>a<sp/>different</highlight></codeline>
<codeline lineno="4730"><highlight class="comment"><sp/><sp/><sp/><sp/>threading<sp/>mode.<sp/>In<sp/>either<sp/>case<sp/>we<sp/>shouldn&apos;t<sp/>consider<sp/>it<sp/>an<sp/>error</highlight></codeline>
<codeline lineno="4731"><highlight class="comment"><sp/><sp/><sp/><sp/>but<sp/>we<sp/>need<sp/>to<sp/>be<sp/>careful<sp/>to<sp/>not<sp/>call<sp/>CoUninitialize()<sp/>if<sp/></highlight></codeline>
<codeline lineno="4732"><highlight class="comment"><sp/><sp/><sp/><sp/>RPC_E_CHANGED_MODE<sp/>was<sp/>returned.</highlight></codeline>
<codeline lineno="4733"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4734"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>CoInitializeEx(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>COINIT_APARTMENTTHREADED);</highlight></codeline>
<codeline lineno="4735"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(FAILED(hr)<sp/>&amp;&amp;<sp/>(hr<sp/>!=<sp/>RPC_E_CHANGED_MODE))</highlight></codeline>
<codeline lineno="4736"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>failed<sp/>ProcThreadEvent<sp/>CoInitialize&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4739"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4740"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>RPC_E_CHANGED_MODE)</highlight></codeline>
<codeline lineno="4741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bThreadComInitialized<sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="4742"><highlight class="normal"></highlight></codeline>
<codeline lineno="4743"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Unmarshal<sp/>stream<sp/>pointers<sp/>for<sp/>safe<sp/>COM<sp/>operation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4744"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>UnmarshalStreamComPointers(stream);</highlight></codeline>
<codeline lineno="4745"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)<sp/>{</highlight></codeline>
<codeline lineno="4746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;Error<sp/>unmarshaling<sp/>stream<sp/>COM<sp/>pointers.<sp/>HRESULT:<sp/>%i\n&quot;</highlight><highlight class="normal">,<sp/>hr));</highlight></codeline>
<codeline lineno="4747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_end;</highlight></codeline>
<codeline lineno="4748"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4749"><highlight class="normal"></highlight></codeline>
<codeline lineno="4750"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Waiting<sp/>on<sp/>all<sp/>events<sp/>in<sp/>case<sp/>of<sp/>Full-Duplex/Exclusive<sp/>mode.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4751"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>&amp;&amp;<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))</highlight></codeline>
<codeline lineno="4752"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bWaitAllEvents<sp/>=<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="4754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>==<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2a61706fd6a73dd12048f31be3fdce90" kindref="member">AUDCLNT_SHAREMODE_EXCLUSIVE</ref>);</highlight></codeline>
<codeline lineno="4755"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4756"><highlight class="normal"></highlight></codeline>
<codeline lineno="4757"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Setup<sp/>data<sp/>processors</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4758"><highlight class="normal"><sp/><sp/><sp/><sp/>defaultProcessor.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>=<sp/>WaspiHostProcessingLoop;</highlight></codeline>
<codeline lineno="4759"><highlight class="normal"><sp/><sp/><sp/><sp/>defaultProcessor.<ref refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" kindref="member">userData</ref><sp/><sp/>=<sp/>stream;</highlight></codeline>
<codeline lineno="4760"><highlight class="normal"><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>]<sp/>=<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" kindref="member">hostProcessOverrideInput</ref>.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>?<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" kindref="member">hostProcessOverrideInput</ref><sp/>:<sp/>defaultProcessor);</highlight></codeline>
<codeline lineno="4761"><highlight class="normal"><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>]<sp/>=<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" kindref="member">hostProcessOverrideOutput</ref>.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>?<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" kindref="member">hostProcessOverrideOutput</ref><sp/>:<sp/>defaultProcessor);</highlight></codeline>
<codeline lineno="4762"><highlight class="normal"></highlight></codeline>
<codeline lineno="4763"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Boost<sp/>thread<sp/>priority</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4764"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a2d48ae4d2124209ed8a6264c6febedc7" kindref="member">PaWasapi_ThreadPriorityBoost</ref>((</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1aae3a56871d156b6d8cfa2e070b408103" kindref="member">hAvTask</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref>);</highlight></codeline>
<codeline lineno="4765"><highlight class="normal"></highlight></codeline>
<codeline lineno="4766"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>events</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>]<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4768"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>]<sp/>=<sp/>CreateEvent(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>FALSE,<sp/>FALSE,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>set_event[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>]<sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="4771"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4772"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>]<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4773"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>]<sp/><sp/>=<sp/>CreateEvent(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>FALSE,<sp/>FALSE,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>set_event[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>]<sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="4776"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4777"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>]<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>||<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>]<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))</highlight></codeline>
<codeline lineno="4778"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI<sp/>Thread:<sp/>failed<sp/>creating<sp/>Input/Output<sp/>event<sp/>handle\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4781"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4782"><highlight class="normal"></highlight></codeline>
<codeline lineno="4783"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>event<sp/>&amp;<sp/>start<sp/>INPUT<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4784"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>)</highlight></codeline>
<codeline lineno="4785"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>&amp;<sp/>set<sp/>handle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(set_event[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>])</highlight></codeline>
<codeline lineno="4788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_SetEventHandle(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[S_INPUT]))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4795"><highlight class="normal"></highlight></codeline>
<codeline lineno="4796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_Start(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4802"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4803"><highlight class="normal"></highlight></codeline>
<codeline lineno="4804"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>event<sp/>&amp;<sp/>start<sp/>OUTPUT<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4805"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>)</highlight></codeline>
<codeline lineno="4806"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>&amp;<sp/>set<sp/>handle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(set_event[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>])</highlight></codeline>
<codeline lineno="4809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_SetEventHandle(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>[S_OUTPUT]))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4816"><highlight class="normal"></highlight></codeline>
<codeline lineno="4817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preload<sp/>buffer<sp/>before<sp/>start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" kindref="member">ProcessOutputBuffer</ref>(stream,<sp/>processor,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4823"><highlight class="normal"></highlight></codeline>
<codeline lineno="4824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_Start(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4830"><highlight class="normal"></highlight></codeline>
<codeline lineno="4831"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4832"><highlight class="normal"></highlight></codeline>
<codeline lineno="4833"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Signal:<sp/>stream<sp/>running</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4834"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref><sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="4835"><highlight class="normal"></highlight></codeline>
<codeline lineno="4836"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify:<sp/>thread<sp/>started</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4837"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref>);</highlight></codeline>
<codeline lineno="4838"><highlight class="normal"></highlight></codeline>
<codeline lineno="4839"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Processing<sp/>Loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4840"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(;;)</highlight></codeline>
<codeline lineno="4841"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>10<sp/>sec<sp/>timeout<sp/>(on<sp/>timeout<sp/>stream<sp/>will<sp/>auto-stop<sp/>when<sp/>processed<sp/>by<sp/>WAIT_TIMEOUT<sp/>case)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dwResult<sp/>=<sp/>WaitForMultipleObjects(<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" kindref="member">S_COUNT</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac69c31cb5e9c6bb1b6736c660533cbfa" kindref="member">event</ref>,<sp/>bWaitAllEvents,<sp/>10*1000);</highlight></codeline>
<codeline lineno="4844"><highlight class="normal"></highlight></codeline>
<codeline lineno="4845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>for<sp/>close<sp/>event<sp/>(after<sp/>wait<sp/>for<sp/>buffers<sp/>to<sp/>avoid<sp/>any<sp/>calls<sp/>to<sp/>user</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>callback<sp/>when<sp/>hCloseRequest<sp/>was<sp/>set)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>0)<sp/>!=<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="4848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4849"><highlight class="normal"></highlight></codeline>
<codeline lineno="4850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>S_INPUT/S_OUTPUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(dwResult)</highlight></codeline>
<codeline lineno="4852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WAIT_TIMEOUT:<sp/>{</highlight></codeline>
<codeline lineno="4854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI<sp/>Thread:<sp/>WAIT_TIMEOUT<sp/>-<sp/>probably<sp/>bad<sp/>audio<sp/>driver<sp/>or<sp/>Vista<sp/>x64<sp/>bug:<sp/>use<sp/>paWinWasapiPolling<sp/>instead\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_end;</highlight></codeline>
<codeline lineno="4856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="4857"><highlight class="normal"></highlight></codeline>
<codeline lineno="4858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Input<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WAIT_OBJECT_0<sp/>+<sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>:<sp/>{</highlight></codeline>
<codeline lineno="4860"><highlight class="normal"></highlight></codeline>
<codeline lineno="4861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4863"><highlight class="normal"></highlight></codeline>
<codeline lineno="4864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1a37f64191221d539235537b8cfa71b456" kindref="member">ProcessInputBuffer</ref>(stream,<sp/>processor))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4869"><highlight class="normal"></highlight></codeline>
<codeline lineno="4870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="4871"><highlight class="normal"></highlight></codeline>
<codeline lineno="4872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Output<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WAIT_OBJECT_0<sp/>+<sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>:<sp/>{</highlight></codeline>
<codeline lineno="4874"><highlight class="normal"></highlight></codeline>
<codeline lineno="4875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="4876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4877"><highlight class="normal"></highlight></codeline>
<codeline lineno="4878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" kindref="member">ProcessOutputBuffer</ref>(stream,<sp/>processor,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="4879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="4881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="4882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4883"><highlight class="normal"></highlight></codeline>
<codeline lineno="4884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="4885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4886"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4887"><highlight class="normal"></highlight></codeline>
<codeline lineno="4888"><highlight class="normal">thread_end:</highlight></codeline>
<codeline lineno="4889"><highlight class="normal"></highlight></codeline>
<codeline lineno="4890"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>stop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4891"><highlight class="normal"><sp/><sp/><sp/><sp/>_StreamOnStop(stream);</highlight></codeline>
<codeline lineno="4892"><highlight class="normal"></highlight></codeline>
<codeline lineno="4893"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>unmarshaled<sp/>COM<sp/>pointers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4894"><highlight class="normal"><sp/><sp/><sp/><sp/>ReleaseUnmarshaledComPointers(stream);</highlight></codeline>
<codeline lineno="4895"><highlight class="normal"></highlight></codeline>
<codeline lineno="4896"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Cleanup<sp/>COM<sp/>for<sp/>this<sp/>thread</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4897"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bThreadComInitialized<sp/>==<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>)</highlight></codeline>
<codeline lineno="4898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoUninitialize();</highlight></codeline>
<codeline lineno="4899"><highlight class="normal"></highlight></codeline>
<codeline lineno="4900"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify:<sp/>not<sp/>running</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4901"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref><sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="4902"><highlight class="normal"></highlight></codeline>
<codeline lineno="4903"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify:<sp/>thread<sp/>exited</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4904"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref>);</highlight></codeline>
<codeline lineno="4905"><highlight class="normal"></highlight></codeline>
<codeline lineno="4906"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="4907"><highlight class="normal"></highlight></codeline>
<codeline lineno="4908"><highlight class="normal">thread_error:</highlight></codeline>
<codeline lineno="4909"><highlight class="normal"></highlight></codeline>
<codeline lineno="4910"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Prevent<sp/>deadlocking<sp/>in<sp/>Pa_StreamStart</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4911"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref>);</highlight></codeline>
<codeline lineno="4912"><highlight class="normal"></highlight></codeline>
<codeline lineno="4913"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exit</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4914"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_end;</highlight></codeline>
<codeline lineno="4915"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4916"><highlight class="normal"></highlight></codeline>
<codeline lineno="4917"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4918" refid="pa__win__wasapi_8c_1aae20a143b3c891a38a7e918ee4b1d6b8" refkind="member"><highlight class="normal"><ref refid="pa__win__wasapi_8c_1ad744bd36cb3631b1dc11beb41dcc238c" kindref="member">PA_THREAD_FUNC</ref><sp/><ref refid="pa__win__wasapi_8c_1aae20a143b3c891a38a7e918ee4b1d6b8" kindref="member">ProcThreadPoll</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*param)</highlight></codeline>
<codeline lineno="4919"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4920"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/><ref refid="xmlparse_8c_1ae2e049b4850fa94870e78619701bbeb0" kindref="member">processor</ref>[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" kindref="member">S_COUNT</ref>];</highlight></codeline>
<codeline lineno="4921"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="px__win__ds_8c_1a6ad46d30b0323d7b029e41f32f8a2571" kindref="member">HRESULT</ref><sp/>hr;</highlight></codeline>
<codeline lineno="4922"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_wasapi_stream" kindref="compound">PaWasapiStream</ref><sp/>*)param;</highlight></codeline>
<codeline lineno="4923"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_wasapi_host_processor" kindref="compound">PaWasapiHostProcessor</ref><sp/>defaultProcessor;</highlight></codeline>
<codeline lineno="4924"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespaceportaudio_1a30bc71f065706d41a5d9208ea861e4a6a6dd61123fe207d74b9af1bc56ade8108" kindref="member">INT32</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="4925"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_thread_idle_scheduler" kindref="compound">ThreadIdleScheduler</ref><sp/>scheduler;</highlight></codeline>
<codeline lineno="4926"><highlight class="normal"></highlight></codeline>
<codeline lineno="4927"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>the<sp/>actual<sp/>duration<sp/>of<sp/>the<sp/>allocated<sp/>buffer.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4928"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>sleep_ms<sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4929"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>sleep_ms_in;</highlight></codeline>
<codeline lineno="4930"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>sleep_ms_out;</highlight></codeline>
<codeline lineno="4931"><highlight class="normal"></highlight></codeline>
<codeline lineno="4932"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>bThreadComInitialized<sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="4933"><highlight class="normal"></highlight></codeline>
<codeline lineno="4934"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="4935"><highlight class="comment"><sp/><sp/><sp/><sp/>If<sp/>COM<sp/>is<sp/>already<sp/>initialized<sp/>CoInitialize<sp/>will<sp/>either<sp/>return</highlight></codeline>
<codeline lineno="4936"><highlight class="comment"><sp/><sp/><sp/><sp/>FALSE,<sp/>or<sp/>RPC_E_CHANGED_MODE<sp/>if<sp/>it<sp/>was<sp/>initialized<sp/>in<sp/>a<sp/>different</highlight></codeline>
<codeline lineno="4937"><highlight class="comment"><sp/><sp/><sp/><sp/>threading<sp/>mode.<sp/>In<sp/>either<sp/>case<sp/>we<sp/>shouldn&apos;t<sp/>consider<sp/>it<sp/>an<sp/>error</highlight></codeline>
<codeline lineno="4938"><highlight class="comment"><sp/><sp/><sp/><sp/>but<sp/>we<sp/>need<sp/>to<sp/>be<sp/>careful<sp/>to<sp/>not<sp/>call<sp/>CoUninitialize()<sp/>if<sp/></highlight></codeline>
<codeline lineno="4939"><highlight class="comment"><sp/><sp/><sp/><sp/>RPC_E_CHANGED_MODE<sp/>was<sp/>returned.</highlight></codeline>
<codeline lineno="4940"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4941"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>CoInitializeEx(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>COINIT_APARTMENTTHREADED);</highlight></codeline>
<codeline lineno="4942"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(FAILED(hr)<sp/>&amp;&amp;<sp/>(hr<sp/>!=<sp/>RPC_E_CHANGED_MODE))</highlight></codeline>
<codeline lineno="4943"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;WASAPI:<sp/>failed<sp/>ProcThreadPoll<sp/>CoInitialize&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="4946"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4947"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>RPC_E_CHANGED_MODE)</highlight></codeline>
<codeline lineno="4948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bThreadComInitialized<sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="4949"><highlight class="normal"></highlight></codeline>
<codeline lineno="4950"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Unmarshal<sp/>stream<sp/>pointers<sp/>for<sp/>safe<sp/>COM<sp/>operation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4951"><highlight class="normal"><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>UnmarshalStreamComPointers(stream);</highlight></codeline>
<codeline lineno="4952"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)<sp/></highlight></codeline>
<codeline lineno="4953"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1ad61844ab25ea35139950e67e9693bc9f" kindref="member">PRINT</ref>((</highlight><highlight class="stringliteral">&quot;Error<sp/>unmarshaling<sp/>stream<sp/>COM<sp/>pointers.<sp/>HRESULT:<sp/>%i\n&quot;</highlight><highlight class="normal">,<sp/>hr));</highlight></codeline>
<codeline lineno="4955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="4956"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4957"><highlight class="normal"></highlight></codeline>
<codeline lineno="4958"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>timeout<sp/>for<sp/>next<sp/>polling<sp/>attempt.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4959"><highlight class="normal"><sp/><sp/><sp/><sp/>sleep_ms_in<sp/><sp/>=<sp/>GetFramesSleepTime(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>/<ref refid="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8a7b6c7e83009a14df464dd680e87feaf2" kindref="member">WASAPI_PACKETS_PER_INPUT_BUFFER</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="4960"><highlight class="normal"><sp/><sp/><sp/><sp/>sleep_ms_out<sp/>=<sp/>GetFramesSleepTime(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="4961"><highlight class="normal"></highlight></codeline>
<codeline lineno="4962"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>WASAPI<sp/>Input<sp/>packets<sp/>tend<sp/>to<sp/>expire<sp/>very<sp/>easily,<sp/>let&apos;s<sp/>limit<sp/>sleep<sp/>time<sp/>to<sp/>2<sp/>milliseconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4963"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>all<sp/>cases.<sp/>Please<sp/>propose<sp/>better<sp/>solution<sp/>if<sp/>any.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4964"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sleep_ms_in<sp/>&gt;<sp/>2)</highlight></codeline>
<codeline lineno="4965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms_in<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="4966"><highlight class="normal"></highlight></codeline>
<codeline lineno="4967"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Adjust<sp/>polling<sp/>time<sp/>for<sp/>non-paUtilFixedHostBufferSize.<sp/>Input<sp/>stream<sp/>is<sp/>not<sp/>adjustable<sp/>as<sp/>it<sp/>is<sp/>being</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4968"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>polled<sp/>according<sp/>its<sp/>packet<sp/>length.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4969"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a4fcab5da3c205bf8b13519a37d771e7a" kindref="member">bufferMode</ref><sp/>!=<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa5e79e1ea4d8f114cfe83caa9b08610d8" kindref="member">paUtilFixedHostBufferSize</ref>)</highlight></codeline>
<codeline lineno="4970"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//sleep_ms_in<sp/>=<sp/>GetFramesSleepTime(stream-&gt;bufferProcessor.framesPerUserBuffer,<sp/>stream-&gt;in.wavex.Format.nSamplesPerSec);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms_out<sp/>=<sp/>GetFramesSleepTime(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a2a61168f6d216e6aaade39b77452bcb9" kindref="member">framesPerUserBuffer</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="4973"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4974"><highlight class="normal"></highlight></codeline>
<codeline lineno="4975"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Choose<sp/>smallest</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4976"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((sleep_ms_in<sp/>!=<sp/>0)<sp/>&amp;&amp;<sp/>(sleep_ms_out<sp/>!=<sp/>0))</highlight></codeline>
<codeline lineno="4977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>(sleep_ms_in,<sp/>sleep_ms_out);</highlight></codeline>
<codeline lineno="4978"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4979"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms<sp/>=<sp/>(sleep_ms_in<sp/>?<sp/>sleep_ms_in<sp/>:<sp/>sleep_ms_out);</highlight></codeline>
<codeline lineno="4981"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4982"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>not<sp/>0,<sp/>othervise<sp/>use<sp/>ThreadIdleScheduler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4983"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sleep_ms<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="4984"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms_in<sp/><sp/>=<sp/>GetFramesSleepTimeMicroseconds(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ae1b80bba3ceb65c33e96962755839868" kindref="member">framesPerHostCallback</ref>/<ref refid="pa__win__wasapi_8c_1a4eeeead548222804e141df8f1b205ca8a7b6c7e83009a14df464dd680e87feaf2" kindref="member">WASAPI_PACKETS_PER_INPUT_BUFFER</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="4986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms_out<sp/>=<sp/>GetFramesSleepTimeMicroseconds(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae7e8fbc3c2a11f64f16a7f393c5e9c63" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a2a61168f6d216e6aaade39b77452bcb9" kindref="member">framesPerUserBuffer</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.nSamplesPerSec);</highlight></codeline>
<codeline lineno="4987"><highlight class="normal"></highlight></codeline>
<codeline lineno="4988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Choose<sp/>smallest</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((sleep_ms_in<sp/>!=<sp/>0)<sp/>&amp;&amp;<sp/>(sleep_ms_out<sp/>!=<sp/>0))</highlight></codeline>
<codeline lineno="4990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>(sleep_ms_in,<sp/>sleep_ms_out);</highlight></codeline>
<codeline lineno="4991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms<sp/>=<sp/>(sleep_ms_in<sp/>?<sp/>sleep_ms_in<sp/>:<sp/>sleep_ms_out);</highlight></codeline>
<codeline lineno="4994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4995"><highlight class="normal"></highlight></codeline>
<codeline lineno="4996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Setup<sp/>thread<sp/>sleep<sp/>scheduler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ThreadIdleScheduler_Setup(&amp;scheduler,<sp/>1,<sp/>sleep_ms</highlight><highlight class="comment">/*<sp/>microseconds<sp/>here<sp/>*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep_ms<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4999"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5000"><highlight class="normal"></highlight></codeline>
<codeline lineno="5001"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Setup<sp/>data<sp/>processors</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5002"><highlight class="normal"><sp/><sp/><sp/><sp/>defaultProcessor.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>=<sp/>WaspiHostProcessingLoop;</highlight></codeline>
<codeline lineno="5003"><highlight class="normal"><sp/><sp/><sp/><sp/>defaultProcessor.<ref refid="struct_pa_wasapi_host_processor_1abb4a8d12910d22829a9e75159b379298" kindref="member">userData</ref><sp/><sp/>=<sp/>stream;</highlight></codeline>
<codeline lineno="5004"><highlight class="normal"><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>]<sp/>=<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" kindref="member">hostProcessOverrideInput</ref>.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>?<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a07ec66d5779ded1801200467021884e1" kindref="member">hostProcessOverrideInput</ref><sp/>:<sp/>defaultProcessor);</highlight></codeline>
<codeline lineno="5005"><highlight class="normal"><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>]<sp/>=<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" kindref="member">hostProcessOverrideOutput</ref>.<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>?<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ae0471e5b5c15f54c59c57980d9faec48" kindref="member">hostProcessOverrideOutput</ref><sp/>:<sp/>defaultProcessor);</highlight></codeline>
<codeline lineno="5006"><highlight class="normal"></highlight></codeline>
<codeline lineno="5007"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Boost<sp/>thread<sp/>priority</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5008"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a2d48ae4d2124209ed8a6264c6febedc7" kindref="member">PaWasapi_ThreadPriorityBoost</ref>((</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**)&amp;stream-&gt;<ref refid="struct_pa_wasapi_stream_1aae3a56871d156b6d8cfa2e070b408103" kindref="member">hAvTask</ref>,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a49a89c3dc97a1a541891b75f303ef7f0" kindref="member">nThreadPriority</ref>);</highlight></codeline>
<codeline lineno="5009"><highlight class="normal"></highlight></codeline>
<codeline lineno="5010"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>event<sp/>&amp;<sp/>start<sp/>INPUT<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5011"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>)</highlight></codeline>
<codeline lineno="5012"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_Start(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5018"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5019"><highlight class="normal"></highlight></codeline>
<codeline lineno="5020"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>event<sp/>&amp;<sp/>start<sp/>OUTPUT<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5021"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>)</highlight></codeline>
<codeline lineno="5022"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preload<sp/>buffer<sp/>(obligatory,<sp/>othervise<sp/>-&gt;Start()<sp/>will<sp/>fail),<sp/>avoid<sp/>processing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>when<sp/>in<sp/>full-duplex<sp/>mode<sp/>as<sp/>it<sp/>requires<sp/>input<sp/>processing<sp/>as<sp/>well</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="pa__win__wasapi_8c_1af46190c73acf456c64118d4df2afd503" kindref="member">PA_WASAPI__IS_FULLDUPLEX</ref>(stream))</highlight></codeline>
<codeline lineno="5026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frames<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetOutputFramesAvailable(stream,<sp/>&amp;frames))<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="5029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a4fcab5da3c205bf8b13519a37d771e7a" kindref="member">bufferMode</ref><sp/>==<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa5e79e1ea4d8f114cfe83caa9b08610d8" kindref="member">paUtilFixedHostBufferSize</ref>)</highlight></codeline>
<codeline lineno="5031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frames<sp/>&gt;=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>)</highlight></codeline>
<codeline lineno="5033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>;</highlight></codeline>
<codeline lineno="5035"><highlight class="normal"></highlight></codeline>
<codeline lineno="5036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" kindref="member">ProcessOutputBuffer</ref>(stream,<sp/>processor,<sp/>frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);<sp/></highlight><highlight class="comment">//<sp/>not<sp/>fatal,<sp/>just<sp/>log</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frames<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="5045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" kindref="member">ProcessOutputBuffer</ref>(stream,<sp/>processor,<sp/>frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);<sp/></highlight><highlight class="comment">//<sp/>not<sp/>fatal,<sp/>just<sp/>log</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);<sp/></highlight><highlight class="comment">//<sp/>not<sp/>fatal,<sp/>just<sp/>log</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5058"><highlight class="normal"></highlight></codeline>
<codeline lineno="5059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioClient_Start(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a0a866d34fa348461a94eee93dbc7769e" kindref="member">clientProc</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5065"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5066"><highlight class="normal"></highlight></codeline>
<codeline lineno="5067"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Signal:<sp/>stream<sp/>running</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5068"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref><sp/>=<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>;</highlight></codeline>
<codeline lineno="5069"><highlight class="normal"></highlight></codeline>
<codeline lineno="5070"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify:<sp/>thread<sp/>started</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5071"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref>);</highlight></codeline>
<codeline lineno="5072"><highlight class="normal"></highlight></codeline>
<codeline lineno="5073"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="pa__win__wasapi_8c_1af46190c73acf456c64118d4df2afd503" kindref="member">PA_WASAPI__IS_FULLDUPLEX</ref>(stream))</highlight></codeline>
<codeline lineno="5074"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Processing<sp/>Loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>next_sleep<sp/>=<sp/>sleep_ms;</highlight></codeline>
<codeline lineno="5077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>next_sleep)<sp/>==<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="5078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>next<sp/>sleep<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sleep_ms<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="5081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_sleep<sp/>=<sp/>ThreadIdleScheduler_NextSleep(&amp;scheduler);</highlight></codeline>
<codeline lineno="5083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5084"><highlight class="normal"></highlight></codeline>
<codeline lineno="5085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0acac8c5a7329bfb86776b1d827f2f2e83" kindref="member">S_COUNT</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)</highlight></codeline>
<codeline lineno="5086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>S_INPUT/S_OUTPUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(i)</highlight></codeline>
<codeline lineno="5089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Input<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a217b06ba7bf37ab6dc9d9751f1cf6b24" kindref="member">S_INPUT</ref>:<sp/>{</highlight></codeline>
<codeline lineno="5092"><highlight class="normal"></highlight></codeline>
<codeline lineno="5093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="5094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5095"><highlight class="normal"></highlight></codeline>
<codeline lineno="5096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1a37f64191221d539235537b8cfa71b456" kindref="member">ProcessInputBuffer</ref>(stream,<sp/>processor))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5101"><highlight class="normal"></highlight></codeline>
<codeline lineno="5102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="5103"><highlight class="normal"></highlight></codeline>
<codeline lineno="5104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Output<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a9c7ef9e6df306bfb79b635afee6c1adf" kindref="member">S_OUTPUT</ref>:<sp/>{</highlight></codeline>
<codeline lineno="5106"><highlight class="normal"></highlight></codeline>
<codeline lineno="5107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>frames;</highlight></codeline>
<codeline lineno="5108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="5109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5110"><highlight class="normal"></highlight></codeline>
<codeline lineno="5111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>available<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetOutputFramesAvailable(stream,<sp/>&amp;frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5117"><highlight class="normal"></highlight></codeline>
<codeline lineno="5118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>output</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a4fcab5da3c205bf8b13519a37d771e7a" kindref="member">bufferMode</ref><sp/>==<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa5e79e1ea4d8f114cfe83caa9b08610d8" kindref="member">paUtilFixedHostBufferSize</ref>)</highlight></codeline>
<codeline lineno="5120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(frames<sp/>&gt;=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>)</highlight></codeline>
<codeline lineno="5122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" kindref="member">ProcessOutputBuffer</ref>(stream,<sp/>processor,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5128"><highlight class="normal"></highlight></codeline>
<codeline lineno="5129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a49cb0fd8c4261d2ac381cb27311de59b" kindref="member">framesPerBuffer</ref>;</highlight></codeline>
<codeline lineno="5130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frames<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="5135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/><ref refid="pa__win__wasapi_8c_1afd01325e0f1dc8cdc8429695848cd320" kindref="member">ProcessOutputBuffer</ref>(stream,<sp/>processor,<sp/>frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5143"><highlight class="normal"></highlight></codeline>
<codeline lineno="5144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="5145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5148"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5150"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5151"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Processing<sp/>Loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>1)<sp/>==<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="5154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>i_frames<sp/>=<sp/>0,<sp/>i_processed<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*i_data<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*o_data<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*o_data_host<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="5157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>i_flags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>o_frames<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5159"><highlight class="normal"></highlight></codeline>
<codeline lineno="5160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>host<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>&amp;i_data,<sp/>&amp;i_frames,<sp/>&amp;i_flags,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/><ref refid="audioclient_8h_1aefe9792eb9de1c3607c05dca19c70a8c" kindref="member">AUDCLNT_S_BUFFER_EMPTY</ref>)</highlight></codeline>
<codeline lineno="5164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>no<sp/>data<sp/>in<sp/>capture<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5165"><highlight class="normal"></highlight></codeline>
<codeline lineno="5166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5169"><highlight class="normal"></highlight></codeline>
<codeline lineno="5170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>available<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetOutputFramesAvailable(stream,<sp/>&amp;o_frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="5175"><highlight class="normal"></highlight></codeline>
<codeline lineno="5176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5179"><highlight class="normal"></highlight></codeline>
<codeline lineno="5180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process<sp/>equal<sp/>ammount<sp/>of<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(o_frames<sp/>&gt;=<sp/>i_frames)</highlight></codeline>
<codeline lineno="5182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process<sp/>input<sp/>ammount<sp/>of<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>o_processed<sp/>=<sp/>i_frames;</highlight></codeline>
<codeline lineno="5185"><highlight class="normal"></highlight></codeline>
<codeline lineno="5186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>host<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_GetBuffer(stream-&gt;procRCClient,<sp/>o_processed,<sp/>&amp;o_data))<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="5188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>processed<sp/>amount<sp/>of<sp/>i_frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i_processed<sp/>=<sp/>i_frames;</highlight></codeline>
<codeline lineno="5191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>o_data_host<sp/>=<sp/>o_data;</highlight></codeline>
<codeline lineno="5192"><highlight class="normal"></highlight></codeline>
<codeline lineno="5193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>convert<sp/>output<sp/>mono</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>)</highlight></codeline>
<codeline lineno="5195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>mono_frames_size<sp/>=<sp/>o_processed<sp/>*<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.wBitsPerSample<sp/>/<sp/>8);</highlight></codeline>
<codeline lineno="5197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>expand<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mono_frames_size<sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref>)</highlight></codeline>
<codeline lineno="5199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>=<sp/>PaWasapi_ReallocateMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref><sp/>=<sp/>mono_frames_size));</highlight></codeline>
<codeline lineno="5201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="5202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="5205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="5207"><highlight class="normal"></highlight></codeline>
<codeline lineno="5208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(<ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>);</highlight></codeline>
<codeline lineno="5209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5212"><highlight class="normal"></highlight></codeline>
<codeline lineno="5213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>replace<sp/>buffer<sp/>pointer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>o_data<sp/>=<sp/>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>;</highlight></codeline>
<codeline lineno="5215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5216"><highlight class="normal"></highlight></codeline>
<codeline lineno="5217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>convert<sp/>input<sp/>mono</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>)</highlight></codeline>
<codeline lineno="5219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>mono_frames_size<sp/>=<sp/>i_processed<sp/>*<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.wBitsPerSample<sp/>/<sp/>8);</highlight></codeline>
<codeline lineno="5221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>expand<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mono_frames_size<sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref>)</highlight></codeline>
<codeline lineno="5223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>=<sp/>PaWasapi_ReallocateMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref><sp/>=<sp/>mono_frames_size));</highlight></codeline>
<codeline lineno="5225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="5226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="5229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="5231"><highlight class="normal"></highlight></codeline>
<codeline lineno="5232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(<ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>);</highlight></codeline>
<codeline lineno="5233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5236"><highlight class="normal"></highlight></codeline>
<codeline lineno="5237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mix<sp/>2<sp/>to<sp/>1<sp/>input<sp/>channels</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>i_data,<sp/>i_processed);</highlight></codeline>
<codeline lineno="5239"><highlight class="normal"></highlight></codeline>
<codeline lineno="5240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>replace<sp/>buffer<sp/>pointer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i_data<sp/>=<sp/>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>;</highlight></codeline>
<codeline lineno="5242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5243"><highlight class="normal"></highlight></codeline>
<codeline lineno="5244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a973c488a4609f21d89d641b762de9fe7" kindref="member">S_FULLDUPLEX</ref>].<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref>(i_data,<sp/>i_processed,<sp/>o_data,<sp/>o_processed,<sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a973c488a4609f21d89d641b762de9fe7" kindref="member">S_FULLDUPLEX</ref>].<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref>);</highlight></codeline>
<codeline lineno="5246"><highlight class="normal"></highlight></codeline>
<codeline lineno="5247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mix<sp/>1<sp/>to<sp/>2<sp/>output<sp/>channels</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>)</highlight></codeline>
<codeline lineno="5249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>(o_data_host,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>o_processed);</highlight></codeline>
<codeline lineno="5250"><highlight class="normal"></highlight></codeline>
<codeline lineno="5251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>host<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>o_processed,<sp/>0))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>!=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>)</highlight></codeline>
<codeline lineno="5258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);<sp/></highlight><highlight class="comment">//<sp/>be<sp/>silent<sp/>in<sp/>shared<sp/>mode,<sp/>try<sp/>again<sp/>next<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5261"><highlight class="normal"></highlight></codeline>
<codeline lineno="5262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>host<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>i_processed))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5269"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Processing<sp/>Loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>next_sleep<sp/>=<sp/>sleep_ms;</highlight></codeline>
<codeline lineno="5272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(WaitForSingleObject(stream-&gt;<ref refid="struct_pa_wasapi_stream_1afae3ff3b21cdba0ada40c7f8660d667b" kindref="member">hCloseRequest</ref>,<sp/>next_sleep)<sp/>==<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="5273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>i_frames<sp/>=<sp/>0,<sp/>i_processed<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*i_data<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*o_data<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*o_data_host<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="5276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="mapinls_8h_1ad342ac907eb044443153a22f964bf0af" kindref="member">DWORD</ref><sp/>i_flags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>o_frames<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5278"><highlight class="normal"></highlight></codeline>
<codeline lineno="5279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>next<sp/>sleep<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sleep_ms<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="5281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_sleep<sp/>=<sp/>ThreadIdleScheduler_NextSleep(&amp;scheduler);</highlight></codeline>
<codeline lineno="5283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5284"><highlight class="normal"></highlight></codeline>
<codeline lineno="5285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>available<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>_PollGetOutputFramesAvailable(stream,<sp/>&amp;o_frames))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5291"><highlight class="normal"></highlight></codeline>
<codeline lineno="5292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(o_frames<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="5293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>host<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>&amp;i_data,<sp/>&amp;i_frames,<sp/>&amp;i_flags,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>==<sp/><ref refid="audioclient_8h_1aefe9792eb9de1c3607c05dca19c70a8c" kindref="member">AUDCLNT_S_BUFFER_EMPTY</ref>)</highlight></codeline>
<codeline lineno="5298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>no<sp/>data<sp/>in<sp/>capture<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5299"><highlight class="normal"></highlight></codeline>
<codeline lineno="5300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5303"><highlight class="normal"></highlight></codeline>
<codeline lineno="5304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process<sp/>equal<sp/>ammount<sp/>of<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(o_frames<sp/>&gt;=<sp/>i_frames)</highlight></codeline>
<codeline lineno="5306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process<sp/>input<sp/>ammount<sp/>of<sp/>frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>o_processed<sp/>=<sp/>i_frames;</highlight></codeline>
<codeline lineno="5309"><highlight class="normal"></highlight></codeline>
<codeline lineno="5310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>host<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_GetBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>o_processed,<sp/>&amp;o_data))<sp/>==<sp/>S_OK)</highlight></codeline>
<codeline lineno="5312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>processed<sp/>amount<sp/>of<sp/>i_frames</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i_processed<sp/>=<sp/>i_frames;</highlight></codeline>
<codeline lineno="5315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>o_data_host<sp/>=<sp/>o_data;</highlight></codeline>
<codeline lineno="5316"><highlight class="normal"></highlight></codeline>
<codeline lineno="5317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>convert<sp/>output<sp/>mono</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>)</highlight></codeline>
<codeline lineno="5319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>mono_frames_size<sp/>=<sp/>o_processed<sp/>*<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.wBitsPerSample<sp/>/<sp/>8);</highlight></codeline>
<codeline lineno="5321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>expand<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mono_frames_size<sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref>)</highlight></codeline>
<codeline lineno="5323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>=<sp/>PaWasapi_ReallocateMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref><sp/>=<sp/>mono_frames_size));</highlight></codeline>
<codeline lineno="5325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="5326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="5329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="5331"><highlight class="normal"></highlight></codeline>
<codeline lineno="5332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(<ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>);</highlight></codeline>
<codeline lineno="5333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5336"><highlight class="normal"></highlight></codeline>
<codeline lineno="5337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>replace<sp/>buffer<sp/>pointer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>o_data<sp/>=<sp/>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>;</highlight></codeline>
<codeline lineno="5339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5340"><highlight class="normal"></highlight></codeline>
<codeline lineno="5341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>convert<sp/>input<sp/>mono</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>)</highlight></codeline>
<codeline lineno="5343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_nyq_1ab39e8701b04b7cff62d700999f9f5691" kindref="member">UINT32</ref><sp/>mono_frames_size<sp/>=<sp/>i_processed<sp/>*<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a67dc95f3c6d0de9a8f7e85e5a98daada" kindref="member">wavex</ref>.Format.wBitsPerSample<sp/>/<sp/>8);</highlight></codeline>
<codeline lineno="5345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>expand<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mono_frames_size<sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref>)</highlight></codeline>
<codeline lineno="5347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>=<sp/>PaWasapi_ReallocateMemory(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a77cc5c618182aa3fabb0821790b0d11e" kindref="member">monoBufferSize</ref><sp/>=<sp/>mono_frames_size));</highlight></codeline>
<codeline lineno="5349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="5350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="5353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="5355"><highlight class="normal"></highlight></codeline>
<codeline lineno="5356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a633e8a11ad96f367826d8cadb02236c2" kindref="member">LogPaError</ref>(<ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>);</highlight></codeline>
<codeline lineno="5357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_error;</highlight></codeline>
<codeline lineno="5358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5360"><highlight class="normal"></highlight></codeline>
<codeline lineno="5361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mix<sp/>2<sp/>to<sp/>1<sp/>input<sp/>channels</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>i_data,<sp/>i_processed);</highlight></codeline>
<codeline lineno="5363"><highlight class="normal"></highlight></codeline>
<codeline lineno="5364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>replace<sp/>buffer<sp/>pointer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i_data<sp/>=<sp/>(<ref refid="mapinls_8h_1a4ae1dab0fb4b072a66584546209e7d58" kindref="member">BYTE</ref><sp/>*)stream-&gt;<ref refid="struct_pa_wasapi_stream_1a0800ee4bf755e3ea24aa501c1ae4edc9" kindref="member">in</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>;</highlight></codeline>
<codeline lineno="5366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5367"><highlight class="normal"></highlight></codeline>
<codeline lineno="5368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a973c488a4609f21d89d641b762de9fe7" kindref="member">S_FULLDUPLEX</ref>].<ref refid="struct_pa_wasapi_host_processor_1a536e48cc36c6a8649c75916464a036e7" kindref="member">processor</ref>(i_data,<sp/>i_processed,<sp/>o_data,<sp/>o_processed,<sp/>processor[<ref refid="pa__win__wasapi_8c_1ad1df9dc2600f2dda7e99d31c00fd73e0a973c488a4609f21d89d641b762de9fe7" kindref="member">S_FULLDUPLEX</ref>].<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref>);</highlight></codeline>
<codeline lineno="5370"><highlight class="normal"></highlight></codeline>
<codeline lineno="5371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mix<sp/>1<sp/>to<sp/>2<sp/>output<sp/>channels</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>)</highlight></codeline>
<codeline lineno="5373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a5e3eaa16893281c5b4f2ed1382fd214a" kindref="member">monoMixer</ref>(o_data_host,<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1a7933875c3daf995e66b0506e7ebb1331" kindref="member">monoBuffer</ref>,<sp/>o_processed);</highlight></codeline>
<codeline lineno="5374"><highlight class="normal"></highlight></codeline>
<codeline lineno="5375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>host<sp/>output<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioRenderClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a6abc7bc5a7514d6de28dec4a623c2e93" kindref="member">renderClient</ref>,<sp/>o_processed,<sp/>0))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5378"><highlight class="normal"></highlight></codeline>
<codeline lineno="5379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>o_frames<sp/>-=<sp/>o_processed;</highlight></codeline>
<codeline lineno="5380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a995c67eb832e26e5f9e092e06d93799d" kindref="member">out</ref>.<ref refid="struct_pa_wasapi_sub_stream_1ad4e1044e8ccb66d75465e791d2e34590" kindref="member">shareMode</ref><sp/>!=<sp/><ref refid="_audio_session_types_8h_1a548638eefd5def05af7b7c778bcba95ba2654c35ff9bb1ca0c8f78c9d392ecec3" kindref="member">AUDCLNT_SHAREMODE_SHARED</ref>)</highlight></codeline>
<codeline lineno="5384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);<sp/></highlight><highlight class="comment">//<sp/>be<sp/>silent<sp/>in<sp/>shared<sp/>mode,<sp/>try<sp/>again<sp/>next<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i_processed<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>fd_release_buffer_in;</highlight></codeline>
<codeline lineno="5391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5392"><highlight class="normal"></highlight></codeline>
<codeline lineno="5393"><highlight class="normal">fd_release_buffer_in:</highlight></codeline>
<codeline lineno="5394"><highlight class="normal"></highlight></codeline>
<codeline lineno="5395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>release<sp/>host<sp/>input<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hr<sp/>=<sp/>IAudioCaptureClient_ReleaseBuffer(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a39f6a52addd1b6454fc7e151446fcd2c" kindref="member">captureClient</ref>,<sp/>i_processed))<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5401"><highlight class="normal"></highlight></codeline>
<codeline lineno="5402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>break<sp/>processing,<sp/>input<sp/>hasn&apos;t<sp/>been<sp/>accumulated<sp/>yet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(i_processed<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="5404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5407"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5408"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5409"><highlight class="normal"></highlight></codeline>
<codeline lineno="5410"><highlight class="normal">thread_end:</highlight></codeline>
<codeline lineno="5411"><highlight class="normal"></highlight></codeline>
<codeline lineno="5412"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>stop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5413"><highlight class="normal"><sp/><sp/><sp/><sp/>_StreamOnStop(stream);</highlight></codeline>
<codeline lineno="5414"><highlight class="normal"></highlight></codeline>
<codeline lineno="5415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Release<sp/>unmarshaled<sp/>COM<sp/>pointers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5416"><highlight class="normal"><sp/><sp/><sp/><sp/>ReleaseUnmarshaledComPointers(stream);</highlight></codeline>
<codeline lineno="5417"><highlight class="normal"></highlight></codeline>
<codeline lineno="5418"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Cleanup<sp/>COM<sp/>for<sp/>this<sp/>thread</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bThreadComInitialized<sp/>==<sp/><ref refid="cext_8h_1aa8cecfc5c5c054d2875c03e77b7be15d" kindref="member">TRUE</ref>)</highlight></codeline>
<codeline lineno="5420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CoUninitialize();</highlight></codeline>
<codeline lineno="5421"><highlight class="normal"></highlight></codeline>
<codeline lineno="5422"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify:<sp/>not<sp/>running</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5423"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1ac1313a56adbfbc1ce31b0f1ff30ab207" kindref="member">running</ref><sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="5424"><highlight class="normal"></highlight></codeline>
<codeline lineno="5425"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify:<sp/>thread<sp/>exited</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5426"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1ad03150fdcbb572f9faf8fed472333e50" kindref="member">hThreadExit</ref>);</highlight></codeline>
<codeline lineno="5427"><highlight class="normal"></highlight></codeline>
<codeline lineno="5428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="5429"><highlight class="normal"></highlight></codeline>
<codeline lineno="5430"><highlight class="normal">thread_error:</highlight></codeline>
<codeline lineno="5431"><highlight class="normal"></highlight></codeline>
<codeline lineno="5432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Prevent<sp/>deadlocking<sp/>in<sp/>Pa_StreamStart</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5433"><highlight class="normal"><sp/><sp/><sp/><sp/>SetEvent(stream-&gt;<ref refid="struct_pa_wasapi_stream_1a868659eb654efd86e5bd0ed49c623656" kindref="member">hThreadStart</ref>);</highlight></codeline>
<codeline lineno="5434"><highlight class="normal"></highlight></codeline>
<codeline lineno="5435"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exit</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5436"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>thread_end;</highlight></codeline>
<codeline lineno="5437"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5438"><highlight class="normal"></highlight></codeline>
<codeline lineno="5439"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5440"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*PaWasapi_ReallocateMemory(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*ptr,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref>)</highlight></codeline>
<codeline lineno="5441"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5442"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>realloc(ptr,<sp/>size);</highlight></codeline>
<codeline lineno="5443"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5444"><highlight class="normal"></highlight></codeline>
<codeline lineno="5445"><highlight class="normal"></highlight><highlight class="comment">//<sp/>------------------------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5446"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaWasapi_FreeMemory(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*ptr)</highlight></codeline>
<codeline lineno="5447"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5448"><highlight class="normal"><sp/><sp/><sp/><sp/>free(ptr);</highlight></codeline>
<codeline lineno="5449"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5450"><highlight class="normal"></highlight></codeline>
<codeline lineno="5451"><highlight class="normal"></highlight><highlight class="comment">//#endif<sp/>//VC<sp/>2005</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5452"><highlight class="normal"></highlight></codeline>
<codeline lineno="5453"><highlight class="normal"></highlight></codeline>
<codeline lineno="5454"><highlight class="normal"></highlight></codeline>
<codeline lineno="5455"><highlight class="normal"></highlight></codeline>
<codeline lineno="5456"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(bFirst)<sp/>{</highlight></codeline>
<codeline lineno="5458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>masteur;</highlight></codeline>
<codeline lineno="5459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;GetMasterVolumeLevelScalar(&amp;masteur);</highlight></codeline>
<codeline lineno="5460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>chan1,<sp/>chan2;</highlight></codeline>
<codeline lineno="5463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;GetChannelVolumeLevelScalar(0,<sp/>&amp;chan1);</highlight></codeline>
<codeline lineno="5464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;GetChannelVolumeLevelScalar(1,<sp/>&amp;chan2);</highlight></codeline>
<codeline lineno="5467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5469"><highlight class="normal"></highlight></codeline>
<codeline lineno="5470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nfilterkit_8h_1a3be13892ae7076009afcf121347dd319" kindref="member">BOOL</ref><sp/>bMute;</highlight></codeline>
<codeline lineno="5471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hr<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;GetMute(&amp;bMute);</highlight></codeline>
<codeline lineno="5472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hr<sp/>!=<sp/>S_OK)</highlight></codeline>
<codeline lineno="5473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__win__wasapi_8c_1a5dfbea2594297c34125d552ea1338244" kindref="member">LogHostError</ref>(hr);</highlight></codeline>
<codeline lineno="5474"><highlight class="normal"></highlight></codeline>
<codeline lineno="5475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;SetMasterVolumeLevelScalar(0.5,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;SetChannelVolumeLevelScalar(0,<sp/>0.5,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;SetChannelVolumeLevelScalar(1,<sp/>0.5,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_wasapi_stream_1a91aaed1fbd340608a77d1515e4445214" kindref="member">outVol</ref>-&gt;SetMute(<ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bFirst<sp/>=<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="5480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5481"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/wasapi/pa_win_wasapi.c"/>
  </compounddef>
</doxygen>
