<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="serd_2waflib_2_tools_2msvc_8py" kind="file" language="Python">
    <compoundname>msvc.py</compoundname>
    <innernamespace refid="namespacewaflib_1_1_tools_1_1msvc">waflib::Tools::msvc</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">#!<sp/>/usr/bin/env<sp/>python</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">#<sp/>encoding:<sp/>utf-8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#<sp/>WARNING!<sp/>Do<sp/>not<sp/>edit!<sp/>http://waf.googlecode.com/git/docs/wafbook/single.html#_obtaining_the_waf_file</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os,sys,re,tempfile</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>waflib<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Utils,Task,Logs,Options,Errors</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_logs" kindref="compound">waflib.Logs</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>debug,warn</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_task_gen" kindref="compound">waflib.TaskGen</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>after_method,feature</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_configure" kindref="compound">waflib.Configure</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>conf</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_tools" kindref="compound">waflib.Tools</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ccroot,c,cxx,ar,winres</highlight></codeline>
<codeline lineno="11"><highlight class="normal">g_msvc_systemlibs=</highlight><highlight class="stringliteral">&apos;&apos;&apos;</highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral">aclui<sp/>activeds<sp/>ad1<sp/>adptif<sp/>adsiid<sp/>advapi32<sp/>asycfilt<sp/>authz<sp/>bhsupp<sp/>bits<sp/>bufferoverflowu<sp/>cabinet</highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral">cap<sp/>certadm<sp/>certidl<sp/>ciuuid<sp/>clusapi<sp/>comctl32<sp/>comdlg32<sp/>comsupp<sp/>comsuppd<sp/>comsuppw<sp/>comsuppwd<sp/>comsvcs</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral">credui<sp/>crypt32<sp/>cryptnet<sp/>cryptui<sp/>d3d8thk<sp/>daouuid<sp/>dbgeng<sp/>dbghelp<sp/>dciman32<sp/>ddao35<sp/>ddao35d</highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral">ddao35u<sp/>ddao35ud<sp/>delayimp<sp/>dhcpcsvc<sp/>dhcpsapi<sp/>dlcapi<sp/>dnsapi<sp/>dsprop<sp/>dsuiext<sp/>dtchelp</highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral">faultrep<sp/>fcachdll<sp/>fci<sp/>fdi<sp/>framedyd<sp/>framedyn<sp/>gdi32<sp/>gdiplus<sp/>glauxglu32<sp/>gpedit<sp/>gpmuuid</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral">gtrts32w<sp/>gtrtst32hlink<sp/>htmlhelp<sp/>httpapi<sp/>icm32<sp/>icmui<sp/>imagehlp<sp/>imm32<sp/>iphlpapi<sp/>iprop</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral">kernel32<sp/>ksguid<sp/>ksproxy<sp/>ksuser<sp/>libcmt<sp/>libcmtd<sp/>libcpmt<sp/>libcpmtd<sp/>loadperf<sp/>lz32<sp/>mapi</highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral">mapi32<sp/>mgmtapi<sp/>minidump<sp/>mmc<sp/>mobsync<sp/>mpr<sp/>mprapi<sp/>mqoa<sp/>mqrt<sp/>msacm32<sp/>mscms<sp/>mscoree</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral">msdasc<sp/>msimg32<sp/>msrating<sp/>mstask<sp/>msvcmrt<sp/>msvcurt<sp/>msvcurtd<sp/>mswsock<sp/>msxml2<sp/>mtx<sp/>mtxdm</highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral">netapi32<sp/>nmapinmsupp<sp/>npptools<sp/>ntdsapi<sp/>ntdsbcli<sp/>ntmsapi<sp/>ntquery<sp/>odbc32<sp/>odbcbcp</highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral">odbccp32<sp/>oldnames<sp/>ole32<sp/>oleacc<sp/>oleaut32<sp/>oledb<sp/>oledlgolepro32<sp/>opends60<sp/>opengl32</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral">osptk<sp/>parser<sp/>pdh<sp/>penter<sp/>pgobootrun<sp/>pgort<sp/>powrprof<sp/>psapi<sp/>ptrustm<sp/>ptrustmd<sp/>ptrustu</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral">ptrustud<sp/>qosname<sp/>rasapi32<sp/>rasdlg<sp/>rassapi<sp/>resutils<sp/>riched20<sp/>rpcndr<sp/>rpcns4<sp/>rpcrt4<sp/>rtm</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral">rtutils<sp/>runtmchk<sp/>scarddlg<sp/>scrnsave<sp/>scrnsavw<sp/>secur32<sp/>sensapi<sp/>setupapi<sp/>sfc<sp/>shell32</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral">shfolder<sp/>shlwapi<sp/>sisbkup<sp/>snmpapi<sp/>sporder<sp/>srclient<sp/>sti<sp/>strsafe<sp/>svcguid<sp/>tapi32<sp/>thunk32</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral">traffic<sp/>unicows<sp/>url<sp/>urlmon<sp/>user32<sp/>userenv<sp/>usp10<sp/>uuid<sp/>uxtheme<sp/>vcomp<sp/>vcompd<sp/>vdmdbg</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral">version<sp/>vfw32<sp/>wbemuuid<sp/><sp/>webpost<sp/>wiaguid<sp/>wininet<sp/>winmm<sp/>winscard<sp/>winspool<sp/>winstrm</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral">wintrust<sp/>wldap32<sp/>wmiutils<sp/>wow32<sp/>ws2_32<sp/>wsnmp32<sp/>wsock32<sp/>wst<sp/>wtsapi32<sp/>xaswitch<sp/>xolehlp</highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral">&apos;&apos;&apos;</highlight><highlight class="normal">.split()</highlight></codeline>
<codeline lineno="31"><highlight class="normal">all_msvc_platforms=[(</highlight><highlight class="stringliteral">&apos;x64&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;amd64&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;ia64&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;ia64&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;x86_amd64&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;amd64&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;x86_ia64&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;ia64&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;x86_arm&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;arm&apos;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="32"><highlight class="normal">all_wince_platforms=[(</highlight><highlight class="stringliteral">&apos;armv4&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;arm&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;armv4i&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;arm&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;mipsii&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;mips&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;mipsii_fp&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;mips&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;mipsiv&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;mips&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;mipsiv_fp&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;mips&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;sh4&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;sh&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;cex86&apos;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="33"><highlight class="normal">all_icl_platforms=[(</highlight><highlight class="stringliteral">&apos;intel64&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;amd64&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;em64t&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;amd64&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;ia32&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;Itanium&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;ia64&apos;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a2c0fdbc609fbe0cb5a325b101835a489" kindref="member">options</ref>(opt):</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/>opt.add_option(</highlight><highlight class="stringliteral">&apos;--msvc_version&apos;</highlight><highlight class="normal">,type=</highlight><highlight class="stringliteral">&apos;string&apos;</highlight><highlight class="normal">,help=</highlight><highlight class="stringliteral">&apos;msvc<sp/>version,<sp/>eg:<sp/>&quot;msvc<sp/>10.0,msvc<sp/>9.0&quot;&apos;</highlight><highlight class="normal">,default=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>opt.add_option(</highlight><highlight class="stringliteral">&apos;--msvc_targets&apos;</highlight><highlight class="normal">,type=</highlight><highlight class="stringliteral">&apos;string&apos;</highlight><highlight class="normal">,help=</highlight><highlight class="stringliteral">&apos;msvc<sp/>targets,<sp/>eg:<sp/>&quot;x64,arm&quot;&apos;</highlight><highlight class="normal">,default=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1afba1206992858f99b00e632f2e0c2c1d" kindref="member">setup_msvc</ref>(conf,versions,arch=False):</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>platforms=getattr(Options.options,</highlight><highlight class="stringliteral">&apos;msvc_targets&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">).split(</highlight><highlight class="stringliteral">&apos;,&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>platforms==[</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>platforms=Utils.to_list(conf.env[</highlight><highlight class="stringliteral">&apos;MSVC_TARGETS&apos;</highlight><highlight class="normal">])</highlight><highlight class="keywordflow">or</highlight><highlight class="normal">[i<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i,j<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_msvc_platforms+all_icl_platforms+all_wince_platforms]</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/>desired_versions=getattr(Options.options,</highlight><highlight class="stringliteral">&apos;msvc_version&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">).split(</highlight><highlight class="stringliteral">&apos;,&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>desired_versions==[</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>desired_versions=conf.env[</highlight><highlight class="stringliteral">&apos;MSVC_VERSIONS&apos;</highlight><highlight class="normal">]</highlight><highlight class="keywordflow">or</highlight><highlight class="normal">[v<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>v,_<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>versions][::-1]</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>versiondict=dict(versions)</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>version<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>desired_versions:</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets=dict(versiondict[version])</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>platforms:</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arch,(p1,p2,p3)=targets[target]</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>compiler,revision=version.rsplit(</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">,1)</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>arch:</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>compiler,revision,p1,p2,p3,arch</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>compiler,revision,p1,p2,p3</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:</highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:</highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.fatal(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>Impossible<sp/>to<sp/>find<sp/>a<sp/>valid<sp/>architecture<sp/>for<sp/>building<sp/>(in<sp/>setup_msvc)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="59"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a6f31284847049b4f0be838fc7fd06786" kindref="member">get_msvc_version</ref>(conf,compiler,version,target,vcvars):</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="src_2flac_2main_8c_1a6f11ce505641910527169e5b39d693cc" kindref="member">debug</ref>(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>get_msvc_version:<sp/>%r<sp/>%r<sp/>%r&apos;</highlight><highlight class="normal">,compiler,version,target)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>batfile=conf.bldnode.make_node(</highlight><highlight class="stringliteral">&apos;waf-print-msvc.bat&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>batfile.write(</highlight><highlight class="stringliteral">&quot;&quot;&quot;@echo<sp/>off</highlight></codeline>
<codeline lineno="64"><highlight class="stringliteral">set<sp/>INCLUDE=</highlight></codeline>
<codeline lineno="65"><highlight class="stringliteral">set<sp/>LIB=</highlight></codeline>
<codeline lineno="66"><highlight class="stringliteral">call<sp/>&quot;%s&quot;<sp/>%s</highlight></codeline>
<codeline lineno="67"><highlight class="stringliteral">echo<sp/>PATH=%%PATH%%</highlight></codeline>
<codeline lineno="68"><highlight class="stringliteral">echo<sp/>INCLUDE=%%INCLUDE%%</highlight></codeline>
<codeline lineno="69"><highlight class="stringliteral">echo<sp/>LIB=%%LIB%%;%%LIBPATH%%</highlight></codeline>
<codeline lineno="70"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal">%(vcvars,target))</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>sout=conf.cmd_and_log([</highlight><highlight class="stringliteral">&apos;cmd&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/E:on&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/V:on&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/C&apos;</highlight><highlight class="normal">,batfile.abspath()])</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/>lines=sout.splitlines()</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>lines[0]:</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines.pop(0)</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>MSVC_PATH=MSVC_INCDIR=MSVC_LIBDIR=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>lines:</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>line.startswith(</highlight><highlight class="stringliteral">&apos;PATH=&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path=line[5:]</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSVC_PATH=path.split(</highlight><highlight class="stringliteral">&apos;;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>line.startswith(</highlight><highlight class="stringliteral">&apos;INCLUDE=&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSVC_INCDIR=[i<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>line[8:].split(</highlight><highlight class="stringliteral">&apos;;&apos;</highlight><highlight class="normal">)</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i]</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>line.startswith(</highlight><highlight class="stringliteral">&apos;LIB=&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSVC_LIBDIR=[i<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>line[4:].split(</highlight><highlight class="stringliteral">&apos;;&apos;</highlight><highlight class="normal">)</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i]</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/><ref refid="1-single-block_8c_1a18b1d64a94008e3c56953d279b8095e2" kindref="member">in</ref>(MSVC_PATH,MSVC_INCDIR,MSVC_LIBDIR):</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.fatal(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>Could<sp/>not<sp/>find<sp/>a<sp/>valid<sp/>architecture<sp/>for<sp/>building<sp/>(get_msvc_version_3)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>env=dict(os.environ)</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>env.update(PATH=path)</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>compiler_name,linker_name,lib_name=_get_prog_names(conf,compiler)</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>cxx=conf.find_program(compiler_name,path_list=MSVC_PATH)</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>cxx=conf.cmd_to_list(cxx)</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="stringliteral">&apos;CL&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>env:</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del(env[</highlight><highlight class="stringliteral">&apos;CL&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.cmd_and_log(cxx+[</highlight><highlight class="stringliteral">&apos;/help&apos;</highlight><highlight class="normal">],env=env)</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception<sp/>,e:</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="src_2flac_2main_8c_1a6f11ce505641910527169e5b39d693cc" kindref="member">debug</ref>(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>get_msvc_version:<sp/>%r<sp/>%r<sp/>%r<sp/>-&gt;<sp/>failure&apos;</highlight><highlight class="normal">%(compiler,version,target))</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="src_2flac_2main_8c_1a6f11ce505641910527169e5b39d693cc" kindref="member">debug</ref>(<ref refid="sndfile__save_8m_1a4b99ff73a8a869319570237b5c57ab03" kindref="member">str</ref>(e))</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.fatal(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>cannot<sp/>run<sp/>the<sp/>compiler<sp/>(in<sp/>get_msvc_version)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="src_2flac_2main_8c_1a6f11ce505641910527169e5b39d693cc" kindref="member">debug</ref>(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>get_msvc_version:<sp/>%r<sp/>%r<sp/>%r<sp/>-&gt;<sp/>OK&apos;</highlight><highlight class="normal">,compiler,version,target)</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.env[compiler_name]=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a9842e92184417c07866419916b2b3ce3" kindref="member">return</ref>(MSVC_PATH,MSVC_INCDIR,MSVC_LIBDIR)</highlight></codeline>
<codeline lineno="105"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a3d32a702d53caab847ca6e867019a30c" kindref="member">gather_wsdk_versions</ref>(conf,versions):</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>version_pattern=re.compile(</highlight><highlight class="stringliteral">&apos;^v..?.?\...?.?&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Wow6432node\\Microsoft\\Microsoft<sp/>SDKs\\Windows&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Microsoft\\Microsoft<sp/>SDKs\\Windows&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>index=0</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version=Utils.winreg.EnumKey(all_versions,index)</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index=index+1</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>version_pattern.match(version):</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msvc_version=Utils.winreg.OpenKey(all_versions,version)</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,type=Utils.winreg.QueryValueEx(msvc_version,</highlight><highlight class="stringliteral">&apos;InstallationFolder&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(os.path.join(path,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;SetEnv.cmd&apos;</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets=[]</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target,arch<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_msvc_platforms:</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((target,(arch,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;wsdk&apos;</highlight><highlight class="normal">,version,</highlight><highlight class="stringliteral">&apos;/&apos;</highlight><highlight class="normal">+target,os.path.join(path,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;SetEnv.cmd&apos;</highlight><highlight class="normal">)))))</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError:</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>versions.append((</highlight><highlight class="stringliteral">&apos;wsdk<sp/>&apos;</highlight><highlight class="normal">+version[1:],targets))</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a28005f4305bcbdb7a1a59d22b185c2ce" kindref="member">gather_wince_supported_platforms</ref>():</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/>supported_wince_platforms=[]</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ce_sdk=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Wow6432node\\Microsoft\\Windows<sp/>CE<sp/>Tools\\SDKs&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ce_sdk=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Microsoft\\Windows<sp/>CE<sp/>Tools\\SDKs&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ce_sdk=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>ce_sdk:</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>supported_wince_platforms</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/>ce_index=0</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sdk_device=Utils.winreg.EnumKey(ce_sdk,ce_index)</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ce_index=ce_index+1</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sdk=Utils.winreg.OpenKey(ce_sdk,sdk_device)</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,type=Utils.winreg.QueryValueEx(sdk,</highlight><highlight class="stringliteral">&apos;SDKRootDir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,type=Utils.winreg.QueryValueEx(sdk,</highlight><highlight class="stringliteral">&apos;SDKInformation&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,xml=os.path.split(path)</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path=<ref refid="sndfile__save_8m_1a4b99ff73a8a869319570237b5c57ab03" kindref="member">str</ref>(path)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,device=os.path.split(path)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>device:</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,device=os.path.split(path)</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>arch,compiler<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_wince_platforms:</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>platforms=[]</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isdir(os.path.join(path,device,</highlight><highlight class="stringliteral">&apos;Lib&apos;</highlight><highlight class="normal">,arch)):</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>platforms.append((arch,compiler,os.path.join(path,device,</highlight><highlight class="stringliteral">&apos;Include&apos;</highlight><highlight class="normal">,arch),os.path.join(path,device,</highlight><highlight class="stringliteral">&apos;Lib&apos;</highlight><highlight class="normal">,arch)))</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>platforms:</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>supported_wince_platforms.append((device,platforms))</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>supported_wince_platforms</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1aff791d3a81321fa3dab5f4a07b931619" kindref="member">gather_msvc_detected_versions</ref>():</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>version_pattern=re.compile(</highlight><highlight class="stringliteral">&apos;^(\d\d?\.\d\d?)(Exp)?$&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>detected_versions=[]</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>vcver,vcvar<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal">[(</highlight><highlight class="stringliteral">&apos;VCExpress&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Exp&apos;</highlight><highlight class="normal">),(</highlight><highlight class="stringliteral">&apos;VisualStudio&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)]:</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prefix=</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Wow6432node\\Microsoft\\&apos;</highlight><highlight class="normal">+vcver</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,prefix)</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prefix=</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Microsoft\\&apos;</highlight><highlight class="normal">+vcver</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,prefix)</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index=0</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version=Utils.winreg.EnumKey(all_versions,index)</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index=index+1</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match=version_pattern.match(version)</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>match:</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>versionnumber=float(match.group(1))</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detected_versions.append((versionnumber,version+vcvar,prefix+</highlight><highlight class="stringliteral">&quot;\\&quot;</highlight><highlight class="normal">+version))</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">fun(tup):</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>tup[0]</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>detected_versions.sort(key=fun)</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>detected_versions</highlight></codeline>
<codeline lineno="205"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1af9be199299cf9f16cca30ae8b169d4d5" kindref="member">gather_msvc_targets</ref>(conf,versions,version,vc_path):</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/>targets=[]</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(os.path.join(vc_path,</highlight><highlight class="stringliteral">&apos;vcvarsall.bat&apos;</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target,realtarget<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_msvc_platforms[::-1]:</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((target,(realtarget,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="normal">,version,target,os.path.join(vc_path,</highlight><highlight class="stringliteral">&apos;vcvarsall.bat&apos;</highlight><highlight class="normal">)))))</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError:</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>os.path.isfile(os.path.join(vc_path,</highlight><highlight class="stringliteral">&apos;Common7&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Tools&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;vsvars32.bat&apos;</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,(</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="normal">,version,</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,os.path.join(vc_path,</highlight><highlight class="stringliteral">&apos;Common7&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Tools&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;vsvars32.bat&apos;</highlight><highlight class="normal">)))))</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError:</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>os.path.isfile(os.path.join(vc_path,</highlight><highlight class="stringliteral">&apos;Bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;vcvars32.bat&apos;</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,(</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="normal">,version,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,os.path.join(vc_path,</highlight><highlight class="stringliteral">&apos;Bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;vcvars32.bat&apos;</highlight><highlight class="normal">)))))</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError:</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>targets:</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>versions.append((</highlight><highlight class="stringliteral">&apos;msvc<sp/>&apos;</highlight><highlight class="normal">+version,targets))</highlight></codeline>
<codeline lineno="226"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a8fa5731e2eceb49992ad6e3a0f0d0e51" kindref="member">gather_wince_targets</ref>(conf,versions,version,vc_path,vsvars,supported_platforms):</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>device,platforms<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>supported_platforms:</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cetargets=[]</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>platform,compiler,include,lib<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>platforms:</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>winCEpath=os.path.join(vc_path,</highlight><highlight class="stringliteral">&apos;ce&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.isdir(winCEpath):</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>common_bindirs,_1,_2=conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="normal">,version,</highlight><highlight class="stringliteral">&apos;x86&apos;</highlight><highlight class="normal">,vsvars)</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError:</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isdir(os.path.join(winCEpath,</highlight><highlight class="stringliteral">&apos;lib&apos;</highlight><highlight class="normal">,platform)):</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bindirs=[os.path.join(winCEpath,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,compiler),os.path.join(winCEpath,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;x86_&apos;</highlight><highlight class="normal">+compiler)]+common_bindirs</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>incdirs=[os.path.join(winCEpath,</highlight><highlight class="stringliteral">&apos;include&apos;</highlight><highlight class="normal">),os.path.join(winCEpath,</highlight><highlight class="stringliteral">&apos;atlmfc&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;include&apos;</highlight><highlight class="normal">),include]</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>libdirs=[os.path.join(winCEpath,</highlight><highlight class="stringliteral">&apos;lib&apos;</highlight><highlight class="normal">,platform),os.path.join(winCEpath,</highlight><highlight class="stringliteral">&apos;atlmfc&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;lib&apos;</highlight><highlight class="normal">,platform),lib]</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cetargets.append((platform,(platform,(bindirs,incdirs,libdirs))))</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>cetargets:</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>versions.append((device+</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">+version,cetargets))</highlight></codeline>
<codeline lineno="245"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a6a24a12a1b399800a1f44756e45f5f9e" kindref="member">gather_winphone_targets</ref>(conf,versions,version,vc_path,vsvars):</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>targets=[]</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target,realtarget<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_msvc_platforms[::-1]:</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((target,(realtarget,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;winphone&apos;</highlight><highlight class="normal">,version,target,vsvars))))</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError<sp/>,e:</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>targets:</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>versions.append((</highlight><highlight class="stringliteral">&apos;winphone<sp/>&apos;</highlight><highlight class="normal">+version,targets))</highlight></codeline>
<codeline lineno="255"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1afb920b4d44d2cf1a0c571bdbead2d7ad" kindref="member">gather_msvc_versions</ref>(conf,versions):</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>vc_paths=[]</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1af69473f95324d0c0f91fdfb1d1a00360" kindref="member">for</ref>(v,version,reg)</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_tools_1_1msvc_1aff791d3a81321fa3dab5f4a07b931619" kindref="member">gather_msvc_detected_versions</ref>():</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msvc_version=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,reg+</highlight><highlight class="stringliteral">&quot;\\Setup\\VC&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msvc_version=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,reg+</highlight><highlight class="stringliteral">&quot;\\Setup\\Microsoft<sp/>Visual<sp/>C++&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,type=Utils.winreg.QueryValueEx(msvc_version,</highlight><highlight class="stringliteral">&apos;ProductDir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vc_paths.append((version,os.path.abspath(<ref refid="sndfile__save_8m_1a4b99ff73a8a869319570237b5c57ab03" kindref="member">str</ref>(path))))</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>wince_supported_platforms=<ref refid="namespacewaflib_1_1_tools_1_1msvc_1a28005f4305bcbdb7a1a59d22b185c2ce" kindref="member">gather_wince_supported_platforms</ref>()</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>version,vc_path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>vc_paths:</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vs_path=os.path.dirname(vc_path)</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vsvars=os.path.join(vs_path,</highlight><highlight class="stringliteral">&apos;Common7&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;Tools&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;vsvars32.bat&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>wince_supported_platforms<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>os.path.isfile(vsvars):</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.gather_wince_targets(versions,version,vc_path,vsvars,wince_supported_platforms)</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vsvars=os.path.join(vs_path,</highlight><highlight class="stringliteral">&apos;VC&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;WPSDK&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;WP80&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;vcvarsphoneall.bat&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(vsvars):</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.gather_winphone_targets(versions,</highlight><highlight class="stringliteral">&apos;8.0&apos;</highlight><highlight class="normal">,vc_path,vsvars)</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>version,vc_path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>vc_paths:</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vs_path=os.path.dirname(vc_path)</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.gather_msvc_targets(versions,version,vc_path)</highlight></codeline>
<codeline lineno="280"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a69c07457130fd493f174ddbbd29eafce" kindref="member">gather_icl_versions</ref>(conf,versions):</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>version_pattern=re.compile(</highlight><highlight class="stringliteral">&apos;^...?.?\....?.?&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Wow6432node\\Intel\\Compilers\\C++&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Intel\\Compilers\\C++&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>index=0</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version=Utils.winreg.EnumKey(all_versions,index)</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index=index+1</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>version_pattern.match(version):</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets=[]</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target,arch<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_icl_platforms:</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>target==</highlight><highlight class="stringliteral">&apos;intel64&apos;</highlight><highlight class="normal">:targetDir=</highlight><highlight class="stringliteral">&apos;EM64T_NATIVE&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:targetDir=target</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Utils.winreg.OpenKey(all_versions,version+</highlight><highlight class="stringliteral">&apos;\\&apos;</highlight><highlight class="normal">+targetDir)</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>icl_version=Utils.winreg.OpenKey(all_versions,version)</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,type=Utils.winreg.QueryValueEx(icl_version,</highlight><highlight class="stringliteral">&apos;ProductDir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>batch_file=os.path.join(path,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;iclvars.bat&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(batch_file):</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((target,(arch,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;intel&apos;</highlight><highlight class="normal">,version,target,batch_file))))</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError:</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target,arch<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_icl_platforms:</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>icl_version=Utils.winreg.OpenKey(all_versions,version+</highlight><highlight class="stringliteral">&apos;\\&apos;</highlight><highlight class="normal">+target)</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,type=Utils.winreg.QueryValueEx(icl_version,</highlight><highlight class="stringliteral">&apos;ProductDir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>batch_file=os.path.join(path,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;iclvars.bat&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(batch_file):</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((target,(arch,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;intel&apos;</highlight><highlight class="normal">,version,target,batch_file))))</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError:</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>major=version[0:2]</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>versions.append((</highlight><highlight class="stringliteral">&apos;intel<sp/>&apos;</highlight><highlight class="normal">+major,targets))</highlight></codeline>
<codeline lineno="329"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a03b2739135f225e530b0272fa62c05de" kindref="member">gather_intel_composer_versions</ref>(conf,versions):</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>version_pattern=re.compile(</highlight><highlight class="stringliteral">&apos;^...?.?\...?.?.?&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Wow6432node\\Intel\\Suites&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_versions=Utils.winreg.OpenKey(Utils.winreg.HKEY_LOCAL_MACHINE,</highlight><highlight class="stringliteral">&apos;SOFTWARE\\Intel\\Suites&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>index=0</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version=Utils.winreg.EnumKey(all_versions,index)</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index=index+1</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>version_pattern.match(version):</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets=[]</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target,arch<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_icl_platforms:</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>target==</highlight><highlight class="stringliteral">&apos;intel64&apos;</highlight><highlight class="normal">:targetDir=</highlight><highlight class="stringliteral">&apos;EM64T_NATIVE&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:targetDir=target</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>defaults=Utils.winreg.OpenKey(all_versions,version+</highlight><highlight class="stringliteral">&apos;\\Defaults\\C++\\&apos;</highlight><highlight class="normal">+targetDir)</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>targetDir==</highlight><highlight class="stringliteral">&apos;EM64T_NATIVE&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>defaults=Utils.winreg.OpenKey(all_versions,version+</highlight><highlight class="stringliteral">&apos;\\Defaults\\C++\\EM64T&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>WindowsError</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uid,type=Utils.winreg.QueryValueEx(defaults,</highlight><highlight class="stringliteral">&apos;SubKey&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Utils.winreg.OpenKey(all_versions,version+</highlight><highlight class="stringliteral">&apos;\\&apos;</highlight><highlight class="normal">+uid+</highlight><highlight class="stringliteral">&apos;\\C++\\&apos;</highlight><highlight class="normal">+targetDir)</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>icl_version=Utils.winreg.OpenKey(all_versions,version+</highlight><highlight class="stringliteral">&apos;\\&apos;</highlight><highlight class="normal">+uid+</highlight><highlight class="stringliteral">&apos;\\C++&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path,type=Utils.winreg.QueryValueEx(icl_version,</highlight><highlight class="stringliteral">&apos;ProductDir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>batch_file=os.path.join(path,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;iclvars.bat&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(batch_file):</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targets.append((target,(arch,conf.get_msvc_version(</highlight><highlight class="stringliteral">&apos;intel&apos;</highlight><highlight class="normal">,version,target,batch_file))))</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>conf.errors.ConfigurationError<sp/>,e:</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>compilervars_warning_attr=</highlight><highlight class="stringliteral">&apos;_compilervars_warning_key&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>version[0:2]==</highlight><highlight class="stringliteral">&apos;13&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>getattr(conf,compilervars_warning_attr,</highlight><highlight class="keyword">True</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setattr(conf,compilervars_warning_attr,</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>patch_url=</highlight><highlight class="stringliteral">&apos;http://software.intel.com/en-us/forums/topic/328487&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>compilervars_arch=os.path.join(path,</highlight><highlight class="stringliteral">&apos;bin&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;compilervars_arch.bat&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>vscomntool<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal">[</highlight><highlight class="stringliteral">&apos;VS110COMNTOOLS&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;VS100COMNTOOLS&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>vscomntool<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>os.environ:</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vs_express_path=os.environ[vscomntool]+</highlight><highlight class="stringliteral">r&apos;..\IDE\VSWinExpress.exe&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dev_env_path=os.environ[vscomntool]+</highlight><highlight class="stringliteral">r&apos;..\IDE\devenv.exe&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref>(</highlight><highlight class="stringliteral">r&apos;if<sp/>exist<sp/>&quot;%VS110COMNTOOLS%..\IDE\VSWinExpress.exe&quot;&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>Utils.readf(compilervars_arch)</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(vs_express_path)</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(dev_env_path)):</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Logs.warn((</highlight><highlight class="stringliteral">&apos;The<sp/>Intel<sp/>compilervar_arch.bat<sp/>only<sp/>checks<sp/>for<sp/>one<sp/>Visual<sp/>Studio<sp/>SKU<sp/>&apos;</highlight><highlight class="stringliteral">&apos;(VSWinExpress.exe)<sp/>but<sp/>it<sp/>does<sp/>not<sp/>seem<sp/>to<sp/>be<sp/>installed<sp/>at<sp/>%r.<sp/>&apos;</highlight><highlight class="stringliteral">&apos;The<sp/>intel<sp/>command<sp/>line<sp/>set<sp/>up<sp/>will<sp/>fail<sp/>to<sp/>configure<sp/>unless<sp/>the<sp/>file<sp/>%r&apos;</highlight><highlight class="stringliteral">&apos;is<sp/>patched.<sp/>See:<sp/>%s&apos;</highlight><highlight class="normal">)%(vs_express_path,compilervars_arch,patch_url))</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>WindowsError:</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>major=version[0:2]</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>versions.append((</highlight><highlight class="stringliteral">&apos;intel<sp/>&apos;</highlight><highlight class="normal">+major,targets))</highlight></codeline>
<codeline lineno="385"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="386"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a5f32cceb3c4842a224fb09d9d3a1d8f8" kindref="member">get_msvc_versions</ref>(conf):</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>conf.env[</highlight><highlight class="stringliteral">&apos;MSVC_INSTALLED_VERSIONS&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lst=[]</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.gather_icl_versions(lst)</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.gather_intel_composer_versions(lst)</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.gather_wsdk_versions(lst)</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.gather_msvc_versions(lst)</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.env[</highlight><highlight class="stringliteral">&apos;MSVC_INSTALLED_VERSIONS&apos;</highlight><highlight class="normal">]=lst</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>conf.env[</highlight><highlight class="stringliteral">&apos;MSVC_INSTALLED_VERSIONS&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="395"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="396"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1aae9744b7e465d33a2b06ac41e14aa88e" kindref="member">print_all_msvc_detected</ref>(conf):</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>version,targets<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>conf.env[</highlight><highlight class="stringliteral">&apos;MSVC_INSTALLED_VERSIONS&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Logs.info(version)</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>target,l<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>targets:</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Logs.info(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">+target)</highlight></codeline>
<codeline lineno="401"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a7adf5c56dbfc937e2923df5aa71b2087" kindref="member">detect_msvc</ref>(conf,arch=False):</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/>versions=<ref refid="namespacewaflib_1_1_tools_1_1msvc_1a5f32cceb3c4842a224fb09d9d3a1d8f8" kindref="member">get_msvc_versions</ref>(conf)</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_tools_1_1msvc_1afba1206992858f99b00e632f2e0c2c1d" kindref="member">setup_msvc</ref>(conf,versions,arch)</highlight></codeline>
<codeline lineno="405"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1ad777b6d5d98f37e7a5d020c657d17da8" kindref="member">find_lt_names_msvc</ref>(self,libname,is_static=False):</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/>lt_names=[</highlight><highlight class="stringliteral">&apos;lib%s.la&apos;</highlight><highlight class="normal">%libname,</highlight><highlight class="stringliteral">&apos;%s.la&apos;</highlight><highlight class="normal">%libname,]</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.env[</highlight><highlight class="stringliteral">&apos;LIBPATH&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>la<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>lt_names:</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>laf=os.path.join(path,la)</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dll=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.exists(laf):</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ltdict=Utils.read_la_file(laf)</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lt_libdir=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ltdict.get(</highlight><highlight class="stringliteral">&apos;libdir&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lt_libdir=ltdict[</highlight><highlight class="stringliteral">&apos;libdir&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>is_static<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>ltdict.get(</highlight><highlight class="stringliteral">&apos;library_names&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dllnames=ltdict[</highlight><highlight class="stringliteral">&apos;library_names&apos;</highlight><highlight class="normal">].split()</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dll=dllnames[0].lower()</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dll=re.sub(</highlight><highlight class="stringliteral">&apos;\.dll$&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,dll)</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a9842e92184417c07866419916b2b3ce3" kindref="member">return</ref>(lt_libdir,dll,</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>ltdict.get(</highlight><highlight class="stringliteral">&apos;old_library&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olib=ltdict[</highlight><highlight class="stringliteral">&apos;old_library&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.exists(os.path.join(path,olib)):</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a9842e92184417c07866419916b2b3ce3" kindref="member">return</ref>(path,olib,</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>lt_libdir!=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>os.path.exists(os.path.join(lt_libdir,olib)):</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a9842e92184417c07866419916b2b3ce3" kindref="member">return</ref>(lt_libdir,olib,</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a9842e92184417c07866419916b2b3ce3" kindref="member">return</ref>(</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,olib,</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>self.errors.WafError(</highlight><highlight class="stringliteral">&apos;invalid<sp/>libtool<sp/>object<sp/>file:<sp/>%s&apos;</highlight><highlight class="normal">%laf)</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a9842e92184417c07866419916b2b3ce3" kindref="member">return</ref>(</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="433"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a32b62a01e3283caae31fa9d7d8372d0b" kindref="member">libname_msvc</ref>(self,libname,is_static=False):</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/>lib=libname.lower()</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/>lib=re.sub(</highlight><highlight class="stringliteral">&apos;\.lib$&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,lib)</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>lib<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>g_msvc_systemlibs:</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lib</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/>lib=re.sub(</highlight><highlight class="stringliteral">&apos;^lib&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,lib)</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>lib==</highlight><highlight class="stringliteral">&apos;m&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/>(lt_path,lt_libname,lt_static)=self.find_lt_names_msvc(lib,is_static)</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>lt_path!=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>lt_libname!=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>lt_static==</highlight><highlight class="keyword">True</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>os.path.join(lt_path,lt_libname)</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>lt_path!=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_libpaths=[lt_path]+self.env[</highlight><highlight class="stringliteral">&apos;LIBPATH&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_libpaths=self.env[</highlight><highlight class="stringliteral">&apos;LIBPATH&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/>static_libs=[</highlight><highlight class="stringliteral">&apos;lib%ss.lib&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;lib%s.lib&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;%ss.lib&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;%s.lib&apos;</highlight><highlight class="normal">%lib,]</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/>dynamic_libs=[</highlight><highlight class="stringliteral">&apos;lib%s.dll.lib&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;lib%s.dll.a&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;%s.dll.lib&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;%s.dll.a&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;lib%s_d.lib&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;%s_d.lib&apos;</highlight><highlight class="normal">%lib,</highlight><highlight class="stringliteral">&apos;%s.lib&apos;</highlight><highlight class="normal">%lib,]</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/>libnames=static_libs</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>is_static:</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>libnames=dynamic_libs+static_libs</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_libpaths:</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>libn<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>libnames:</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.exists(os.path.join(path,libn)):</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="src_2flac_2main_8c_1a6f11ce505641910527169e5b39d693cc" kindref="member">debug</ref>(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>lib<sp/>found:<sp/>%s&apos;</highlight><highlight class="normal">%os.path.join(path,libn))</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>re.sub(</highlight><highlight class="stringliteral">&apos;\.lib$&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,libn)</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/>self.fatal(</highlight><highlight class="stringliteral">&quot;The<sp/>library<sp/>%r<sp/>could<sp/>not<sp/>be<sp/>found&quot;</highlight><highlight class="normal">%libname)</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>re.sub(</highlight><highlight class="stringliteral">&apos;\.lib$&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,libname)</highlight></codeline>
<codeline lineno="462"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a714b88608b6a79e74d6393e1b8a1da0f" kindref="member">check_lib_msvc</ref>(self,libname,is_static=False,uselib_store=None):</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/>libn=self.libname_msvc(libname,is_static)</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>uselib_store:</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uselib_store=libname.upper()</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>is_static:</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env[</highlight><highlight class="stringliteral">&apos;STLIB_&apos;</highlight><highlight class="normal">+uselib_store]=[libn]</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env[</highlight><highlight class="stringliteral">&apos;LIB_&apos;</highlight><highlight class="normal">+uselib_store]=[libn]</highlight></codeline>
<codeline lineno="471"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1af4be6dfee11a1812dd2f458e782afabb" kindref="member">check_libs_msvc</ref>(self,libnames,is_static=False):</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>libname<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>Utils.to_list(libnames):</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.check_lib_msvc(libname,is_static)</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1ae7b47fda406289f0cfa519a383f06a01" kindref="member">configure</ref>(conf):</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.autodetect(</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.find_msvc()</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.msvc_common_flags()</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.cc_load_tools()</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.cxx_load_tools()</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.cc_add_flags()</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.cxx_add_flags()</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.link_add_flags()</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.visual_studio_add_flags()</highlight></codeline>
<codeline lineno="485"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1af06d3c92ed056902afe0287918dbbe6d" kindref="member">no_autodetect</ref>(conf):</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.env.NO_MSVC_DETECT=1</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_tools_1_1msvc_1ae7b47fda406289f0cfa519a383f06a01" kindref="member">configure</ref>(conf)</highlight></codeline>
<codeline lineno="489"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a9c695245f349965fd6aacf868589e7bf" kindref="member">autodetect</ref>(conf,arch=False):</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/>v=conf.env</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>v.NO_MSVC_DETECT:</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>arch:</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>compiler,version,path,includes,libdirs,arch=conf.detect_msvc(</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;DEST_CPU&apos;</highlight><highlight class="normal">]=arch</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>compiler,version,path,includes,libdirs=conf.detect_msvc()</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;PATH&apos;</highlight><highlight class="normal">]=path</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;INCLUDES&apos;</highlight><highlight class="normal">]=includes</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;LIBPATH&apos;</highlight><highlight class="normal">]=libdirs</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;MSVC_COMPILER&apos;</highlight><highlight class="normal">]=compiler</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;MSVC_VERSION&apos;</highlight><highlight class="normal">]=float(version)</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception:</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;MSVC_VERSION&apos;</highlight><highlight class="normal">]=float(version[:-3])</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">_get_prog_names(conf,compiler):</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>compiler==</highlight><highlight class="stringliteral">&apos;intel&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>compiler_name=</highlight><highlight class="stringliteral">&apos;ICL&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linker_name=</highlight><highlight class="stringliteral">&apos;XILINK&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lib_name=</highlight><highlight class="stringliteral">&apos;XILIB&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>compiler_name=</highlight><highlight class="stringliteral">&apos;CL&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linker_name=</highlight><highlight class="stringliteral">&apos;LINK&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lib_name=</highlight><highlight class="stringliteral">&apos;LIB&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>compiler_name,linker_name,lib_name</highlight></codeline>
<codeline lineno="517"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a8f9c87e3929e466da896514026ec0b6a" kindref="member">find_msvc</ref>(conf):</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sys.platform==</highlight><highlight class="stringliteral">&apos;cygwin&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.fatal(</highlight><highlight class="stringliteral">&apos;MSVC<sp/>module<sp/>does<sp/>not<sp/>work<sp/>under<sp/>cygwin<sp/>Python!&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/>v=conf.env</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/>path=v[</highlight><highlight class="stringliteral">&apos;PATH&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/>compiler=v[</highlight><highlight class="stringliteral">&apos;MSVC_COMPILER&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/>version=v[</highlight><highlight class="stringliteral">&apos;MSVC_VERSION&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/>compiler_name,linker_name,lib_name=_get_prog_names(conf,compiler)</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/>v.MSVC_MANIFEST=(compiler==</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>version&gt;=8)or(compiler==</highlight><highlight class="stringliteral">&apos;wsdk&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>version&gt;=6)or(compiler==</highlight><highlight class="stringliteral">&apos;intel&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>version&gt;=11)</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/>cxx=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>v[</highlight><highlight class="stringliteral">&apos;CXX&apos;</highlight><highlight class="normal">]:cxx=v[</highlight><highlight class="stringliteral">&apos;CXX&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="stringliteral">&apos;CXX&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>conf.environ:cxx=conf.environ[</highlight><highlight class="stringliteral">&apos;CXX&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/>cxx=conf.find_program(compiler_name,var=</highlight><highlight class="stringliteral">&apos;CXX&apos;</highlight><highlight class="normal">,path_list=path)</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/>cxx=conf.cmd_to_list(cxx)</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/>env=dict(conf.environ)</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>path:env.update(PATH=</highlight><highlight class="stringliteral">&apos;;&apos;</highlight><highlight class="normal">.join(path))</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>conf.cmd_and_log(cxx+[</highlight><highlight class="stringliteral">&apos;/nologo&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/help&apos;</highlight><highlight class="normal">],env=env):</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.fatal(</highlight><highlight class="stringliteral">&apos;the<sp/>msvc<sp/>compiler<sp/>could<sp/>not<sp/>be<sp/>identified&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CC&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXX&apos;</highlight><highlight class="normal">]=cxx</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CC_NAME&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXX_NAME&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>v[</highlight><highlight class="stringliteral">&apos;LINK_CXX&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link=conf.find_program(linker_name,path_list=path)</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>link:v[</highlight><highlight class="stringliteral">&apos;LINK_CXX&apos;</highlight><highlight class="normal">]=link</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:conf.fatal(</highlight><highlight class="stringliteral">&apos;%s<sp/>was<sp/>not<sp/>found<sp/>(linker)&apos;</highlight><highlight class="normal">%linker_name)</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;LINK&apos;</highlight><highlight class="normal">]=link</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>v[</highlight><highlight class="stringliteral">&apos;LINK_CC&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;LINK_CC&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;LINK_CXX&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>v[</highlight><highlight class="stringliteral">&apos;AR&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stliblink=conf.find_program(lib_name,path_list=path,var=</highlight><highlight class="stringliteral">&apos;AR&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>stliblink:</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;ARFLAGS&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/NOLOGO&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>v.MSVC_MANIFEST:</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.find_program(</highlight><highlight class="stringliteral">&apos;MT&apos;</highlight><highlight class="normal">,path_list=path,var=</highlight><highlight class="stringliteral">&apos;MT&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;MTFLAGS&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/NOLOGO&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conf.load(</highlight><highlight class="stringliteral">&apos;winres&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Errors.WafError:</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_logs_1acfc4c59a3011ba34982faddeba664944" kindref="member">warn</ref>(</highlight><highlight class="stringliteral">&apos;Resource<sp/>compiler<sp/>not<sp/>found.<sp/>Compiling<sp/>resource<sp/>file<sp/>is<sp/>disabled&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="556"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="557"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a2612f0340f9749fa3aaa1da5a4f758da" kindref="member">visual_studio_add_flags</ref>(self):</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/>v=self.env</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:v.prepend_value(</highlight><highlight class="stringliteral">&apos;INCLUDES&apos;</highlight><highlight class="normal">,[x<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.environ[</highlight><highlight class="stringliteral">&apos;INCLUDE&apos;</highlight><highlight class="normal">].split(</highlight><highlight class="stringliteral">&apos;;&apos;</highlight><highlight class="normal">)</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>x])</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception:</highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:v.prepend_value(</highlight><highlight class="stringliteral">&apos;LIBPATH&apos;</highlight><highlight class="normal">,[x<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.environ[</highlight><highlight class="stringliteral">&apos;LIB&apos;</highlight><highlight class="normal">].split(</highlight><highlight class="stringliteral">&apos;;&apos;</highlight><highlight class="normal">)</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>x])</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception:</highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="564"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a061b632c6b5d14ccc16c85a38478a66f" kindref="member">msvc_common_flags</ref>(conf):</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/>v=conf.env</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;DEST_BINFMT&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;pe&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/>v.append_value(</highlight><highlight class="stringliteral">&apos;CFLAGS&apos;</highlight><highlight class="normal">,[</highlight><highlight class="stringliteral">&apos;/nologo&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/>v.append_value(</highlight><highlight class="stringliteral">&apos;CXXFLAGS&apos;</highlight><highlight class="normal">,[</highlight><highlight class="stringliteral">&apos;/nologo&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;DEFINES_ST&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;/D%s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CC_SRC_F&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CC_TGT_F&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/c&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/Fo&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CXX_SRC_F&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CXX_TGT_F&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/c&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/Fo&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref>(v.MSVC_COMPILER==</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>v.MSVC_VERSION&gt;=8)or(v.MSVC_COMPILER==</highlight><highlight class="stringliteral">&apos;wsdk&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>v.MSVC_VERSION&gt;=6):</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CC_TGT_F&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/FC&apos;</highlight><highlight class="normal">]+v[</highlight><highlight class="stringliteral">&apos;CC_TGT_F&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CXX_TGT_F&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/FC&apos;</highlight><highlight class="normal">]+v[</highlight><highlight class="stringliteral">&apos;CXX_TGT_F&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CPPPATH_ST&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;/I%s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;AR_TGT_F&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CCLNK_TGT_F&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXLNK_TGT_F&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;/OUT:&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_CONSOLE&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_CONSOLE&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/SUBSYSTEM:CONSOLE&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_NATIVE&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_NATIVE&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/SUBSYSTEM:NATIVE&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_POSIX&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_POSIX&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/SUBSYSTEM:POSIX&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_WINDOWS&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_WINDOWS&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/SUBSYSTEM:WINDOWS&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_WINDOWSCE&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_WINDOWSCE&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/SUBSYSTEM:WINDOWSCE&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_CRT_MULTITHREADED&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_CRT_MULTITHREADED&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/MT&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_CRT_MULTITHREADED_DLL&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_CRT_MULTITHREADED_DLL&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/MD&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_CRT_MULTITHREADED_DBG&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_CRT_MULTITHREADED_DBG&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/MTd&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_CRT_MULTITHREADED_DLL_DBG&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_CRT_MULTITHREADED_DLL_DBG&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/MDd&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;LIB_ST&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;%s.lib&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;LIBPATH_ST&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;/LIBPATH:%s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;STLIB_ST&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;%s.lib&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;STLIBPATH_ST&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;/LIBPATH:%s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/>v.append_value(</highlight><highlight class="stringliteral">&apos;LINKFLAGS&apos;</highlight><highlight class="normal">,[</highlight><highlight class="stringliteral">&apos;/NOLOGO&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>v[</highlight><highlight class="stringliteral">&apos;MSVC_MANIFEST&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v.append_value(</highlight><highlight class="stringliteral">&apos;LINKFLAGS&apos;</highlight><highlight class="normal">,[</highlight><highlight class="stringliteral">&apos;/MANIFEST&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CFLAGS_cshlib&apos;</highlight><highlight class="normal">]=[]</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;CXXFLAGS_cxxshlib&apos;</highlight><highlight class="normal">]=[]</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;LINKFLAGS_cshlib&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;LINKFLAGS_cxxshlib&apos;</highlight><highlight class="normal">]=[</highlight><highlight class="stringliteral">&apos;/DLL&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;cshlib_PATTERN&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;cxxshlib_PATTERN&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;%s.dll&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;implib_PATTERN&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;%s.lib&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;IMPLIB_ST&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;/IMPLIB:%s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;LINKFLAGS_cstlib&apos;</highlight><highlight class="normal">]=[]</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;cstlib_PATTERN&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;cxxstlib_PATTERN&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;%s.lib&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>v[</highlight><highlight class="stringliteral">&apos;cprogram_PATTERN&apos;</highlight><highlight class="normal">]=v[</highlight><highlight class="stringliteral">&apos;cxxprogram_PATTERN&apos;</highlight><highlight class="normal">]=</highlight><highlight class="stringliteral">&apos;%s.exe&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="604"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a3411cecc8687a44154a45078c3224fb7" kindref="member">after_method</ref>(</highlight><highlight class="stringliteral">&apos;apply_link&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="605"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a839f18f16539f3131cbe573262099bf1" kindref="member">feature</ref>(</highlight><highlight class="stringliteral">&apos;c&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;cxx&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="606"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1afc3769991c03c5bd7ee6cc2750dfb438" kindref="member">apply_flags_msvc</ref>(self):</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.env.CC_NAME!=</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>getattr(self,</highlight><highlight class="stringliteral">&apos;link_task&apos;</highlight><highlight class="normal">,</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/>is_static=isinstance(self.link_task,ccroot.stlink_task)</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/>subsystem=getattr(self,</highlight><highlight class="stringliteral">&apos;subsystem&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>subsystem:</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subsystem=</highlight><highlight class="stringliteral">&apos;/subsystem:%s&apos;</highlight><highlight class="normal">%subsystem</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flags=is_static<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="stringliteral">&apos;ARFLAGS&apos;</highlight><highlight class="keywordflow">or</highlight><highlight class="stringliteral">&apos;LINKFLAGS&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env.append_value(flags,subsystem)</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>is_static:</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>f<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.env.LINKFLAGS:</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d=f.lower()</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>d[1:]==</highlight><highlight class="stringliteral">&apos;debug&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pdbnode=self.link_task.outputs[0].change_ext(</highlight><highlight class="stringliteral">&apos;.pdb&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.link_task.outputs.append(pdbnode)</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.install_task.source.append(pdbnode)</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>AttributeError:</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="626"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a839f18f16539f3131cbe573262099bf1" kindref="member">feature</ref>(</highlight><highlight class="stringliteral">&apos;cprogram&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;cshlib&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;cxxprogram&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;cxxshlib&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="627"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a3411cecc8687a44154a45078c3224fb7" kindref="member">after_method</ref>(</highlight><highlight class="stringliteral">&apos;apply_link&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="628"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1ab42908ff68ba51a419f4c36751d0535d" kindref="member">apply_manifest</ref>(self):</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.env.CC_NAME==</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>self.env.MSVC_MANIFEST<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>getattr(self,</highlight><highlight class="stringliteral">&apos;link_task&apos;</highlight><highlight class="normal">,</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out_node=self.link_task.outputs[0]</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>man_node=out_node.parent.find_or_declare(out_node.name+</highlight><highlight class="stringliteral">&apos;.manifest&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.link_task.outputs.append(man_node)</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.link_task.do_manifest=</highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="634"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a06fd303962ebc6664ef99c2171a4ea49" kindref="member">exec_mf</ref>(self):</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/>env=self.env</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/>mtool=env[</highlight><highlight class="stringliteral">&apos;MT&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>mtool:</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/>self.do_manifest=</highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/>outfile=self.outputs[0].abspath()</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/>manifest=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>out_node<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.outputs:</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>out_node.name.endswith(</highlight><highlight class="stringliteral">&apos;.manifest&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>manifest=out_node.abspath()</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>manifest<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/>mode=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="stringliteral">&apos;cprogram&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.generator.features<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="stringliteral">&apos;cxxprogram&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.generator.features:</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mode=</highlight><highlight class="stringliteral">&apos;1&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="stringliteral">&apos;cshlib&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.generator.features<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="stringliteral">&apos;cxxshlib&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.generator.features:</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mode=</highlight><highlight class="stringliteral">&apos;2&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="src_2flac_2main_8c_1a6f11ce505641910527169e5b39d693cc" kindref="member">debug</ref>(</highlight><highlight class="stringliteral">&apos;msvc:<sp/>embedding<sp/>manifest<sp/>in<sp/>mode<sp/>%r&apos;</highlight><highlight class="normal">%mode)</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/>lst=[]</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/>lst.append(env[</highlight><highlight class="stringliteral">&apos;MT&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/>lst.extend(Utils.to_list(env[</highlight><highlight class="stringliteral">&apos;MTFLAGS&apos;</highlight><highlight class="normal">]))</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/>lst.extend([</highlight><highlight class="stringliteral">&apos;-manifest&apos;</highlight><highlight class="normal">,manifest])</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/>lst.append(</highlight><highlight class="stringliteral">&apos;-outputresource:%s;%s&apos;</highlight><highlight class="normal">%(outfile,mode))</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/>lst=[lst]</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.exec_command(*lst)</highlight></codeline>
<codeline lineno="661"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a3accf73dc1db52f81c6f170f2a552718" kindref="member">quote_response_command</ref>(self,flag):</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>flag.find(</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">)&gt;-1:</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/><ref refid="1-single-block_8c_1a18b1d64a94008e3c56953d279b8095e2" kindref="member">in</ref>(</highlight><highlight class="stringliteral">&apos;/LIBPATH:&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/IMPLIB:&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/OUT:&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/I&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>flag.startswith(x):</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flag=</highlight><highlight class="stringliteral">&apos;%s&quot;%s&quot;&apos;</highlight><highlight class="normal">%(x,flag[len(x):])</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flag=</highlight><highlight class="stringliteral">&apos;&quot;%s&quot;&apos;</highlight><highlight class="normal">%flag</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>flag</highlight></codeline>
<codeline lineno="670"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a05f3fa5b6aaec55466b65420441a0649" kindref="member">exec_response_command</ref>(self,cmd,**kw):</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sys.platform.startswith(</highlight><highlight class="stringliteral">&apos;win&apos;</highlight><highlight class="normal">)</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>isinstance(cmd,list)</highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>len(</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(cmd))&gt;=8192:</highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>program=cmd[0]</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd=[self.quote_response_command(x)</highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>cmd]</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(fd,tmp)=tempfile.mkstemp()</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.write(fd,</highlight><highlight class="stringliteral">&apos;\r\n&apos;</highlight><highlight class="normal">.join(i.replace(</highlight><highlight class="stringliteral">&apos;\\&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;\\\\&apos;</highlight><highlight class="normal">)</highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>cmd[1:]))</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.close(fd)</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd=[program,</highlight><highlight class="stringliteral">&apos;@&apos;</highlight><highlight class="normal">+tmp]</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret=self.generator.bld.exec_command(cmd,**kw)</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>tmp:</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.remove(tmp)</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>OSError:</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret</highlight></codeline>
<codeline lineno="688"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a3be3049317d31cd6bd6f292f58cdc5b5" kindref="member">exec_command_msvc</ref>(self,*k,**kw):</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(k[0],list):</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lst=[]</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>carry=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>a<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>k[0]:</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>a==</highlight><highlight class="stringliteral">&apos;/Fo&apos;</highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>a==</highlight><highlight class="stringliteral">&apos;/doc&apos;</highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>a[-1]==</highlight><highlight class="stringliteral">&apos;:&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>carry=a</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lst.append(carry+a)</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>carry=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>k=[lst]</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.env[</highlight><highlight class="stringliteral">&apos;PATH&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>env=dict(self.env.env<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>os.environ)</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>env.update(PATH=</highlight><highlight class="stringliteral">&apos;;&apos;</highlight><highlight class="normal">.join(self.env[</highlight><highlight class="stringliteral">&apos;PATH&apos;</highlight><highlight class="normal">]))</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kw[</highlight><highlight class="stringliteral">&apos;env&apos;</highlight><highlight class="normal">]=env</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/>bld=self.generator.bld</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>kw.get(</highlight><highlight class="stringliteral">&apos;cwd&apos;</highlight><highlight class="normal">,</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kw[</highlight><highlight class="stringliteral">&apos;cwd&apos;</highlight><highlight class="normal">]=bld.cwd</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>AttributeError:</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bld.cwd=kw[</highlight><highlight class="stringliteral">&apos;cwd&apos;</highlight><highlight class="normal">]=bld.variant_dir</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/>ret=self.exec_response_command(k[0],**kw)</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>ret<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>getattr(self,</highlight><highlight class="stringliteral">&apos;do_manifest&apos;</highlight><highlight class="normal">,</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret=self.exec_mf()</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret</highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a9f4e48294a54177f979fd2859b38f9ab" kindref="member">wrap_class</ref>(class_name):</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/>cls=Task.classes.get(class_name,</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>cls:</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/>derived_class=<ref refid="namespacewaflib_1_1_tools_1_1tex_1a7638d43e3ce55594540ea118202a9a40" kindref="member">type</ref>(class_name,(cls,),{})</highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">exec_command(self,*k,**kw):</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.env[</highlight><highlight class="stringliteral">&apos;CC_NAME&apos;</highlight><highlight class="normal">]==</highlight><highlight class="stringliteral">&apos;msvc&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.exec_command_msvc(*k,**kw)</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>super(derived_class,self).exec_command(*k,**kw)</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/>derived_class.exec_command=exec_command</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/>derived_class.exec_response_command=exec_response_command</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/>derived_class.quote_response_command=quote_response_command</highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/>derived_class.exec_command_msvc=exec_command_msvc</highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/>derived_class.exec_mf=exec_mf</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>derived_class</highlight></codeline>
<codeline lineno="729"><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>k<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="stringliteral">&apos;c<sp/>cxx<sp/>cprogram<sp/>cxxprogram<sp/>cshlib<sp/>cxxshlib<sp/>cstlib<sp/>cxxstlib&apos;</highlight><highlight class="normal">.split():</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a9f4e48294a54177f979fd2859b38f9ab" kindref="member">wrap_class</ref>(k)</highlight></codeline>
<codeline lineno="731"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a742af4128566150a296d3a049856ab87" kindref="member">make_winapp</ref>(self,family):</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/>append=self.env.append_unique</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/>append(</highlight><highlight class="stringliteral">&apos;DEFINES&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;WINAPI_FAMILY=%s&apos;</highlight><highlight class="normal">%family)</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/>append(</highlight><highlight class="stringliteral">&apos;CXXFLAGS&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/ZW&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/>append(</highlight><highlight class="stringliteral">&apos;CXXFLAGS&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/TP&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lib_path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.env.LIBPATH:</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>append(</highlight><highlight class="stringliteral">&apos;CXXFLAGS&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/AI%s&apos;</highlight><highlight class="normal">%lib_path)</highlight></codeline>
<codeline lineno="738"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a839f18f16539f3131cbe573262099bf1" kindref="member">feature</ref>(</highlight><highlight class="stringliteral">&apos;winphoneapp&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="739"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a3411cecc8687a44154a45078c3224fb7" kindref="member">after_method</ref>(</highlight><highlight class="stringliteral">&apos;process_use&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="740"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a3411cecc8687a44154a45078c3224fb7" kindref="member">after_method</ref>(</highlight><highlight class="stringliteral">&apos;propagate_uselib_vars&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="741"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a6775cde1a9e529ef8ec67073ab4ac321" kindref="member">make_winphone_app</ref>(self):</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a742af4128566150a296d3a049856ab87" kindref="member">make_winapp</ref>(self,</highlight><highlight class="stringliteral">&apos;WINAPI_FAMILY_PHONE_APP&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.env.append_unique(</highlight><highlight class="stringliteral">&apos;LINKFLAGS&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;/NODEFAULTLIB:ole32.lib&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/>conf.env.append_unique(</highlight><highlight class="stringliteral">&apos;LINKFLAGS&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;PhoneAppModelHost.lib&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="745"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a839f18f16539f3131cbe573262099bf1" kindref="member">feature</ref>(</highlight><highlight class="stringliteral">&apos;winapp&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="746"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a3411cecc8687a44154a45078c3224fb7" kindref="member">after_method</ref>(</highlight><highlight class="stringliteral">&apos;process_use&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="747"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a3411cecc8687a44154a45078c3224fb7" kindref="member">after_method</ref>(</highlight><highlight class="stringliteral">&apos;propagate_uselib_vars&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="748"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1msvc_1aabfc9de92701f46cc9cf6580af3ec7b4" kindref="member">make_windows_app</ref>(self):</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_tools_1_1msvc_1a742af4128566150a296d3a049856ab87" kindref="member">make_winapp</ref>(self,</highlight><highlight class="stringliteral">&apos;WINAPI_FAMILY_DESKTOP_APP&apos;</highlight><highlight class="normal">)</highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/serd/waflib/Tools/msvc.py"/>
  </compounddef>
</doxygen>
