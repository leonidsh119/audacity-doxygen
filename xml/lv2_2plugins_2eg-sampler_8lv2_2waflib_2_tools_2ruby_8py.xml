<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="lv2_2plugins_2eg-sampler_8lv2_2waflib_2_tools_2ruby_8py" kind="file" language="Python">
    <compoundname>ruby.py</compoundname>
    <innerclass refid="classwaflib_1_1_tools_1_1ruby_1_1run__ruby" prot="public">waflib::Tools::ruby::run_ruby</innerclass>
    <innernamespace refid="namespacewaflib_1_1_tools_1_1ruby">waflib::Tools::ruby</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">#!<sp/>/usr/bin/env<sp/>python</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">#<sp/>encoding:<sp/>utf-8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#<sp/>WARNING!<sp/>Do<sp/>not<sp/>edit!<sp/>http://waf.googlecode.com/git/docs/wafbook/single.html#_obtaining_the_waf_file</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>waflib<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Task,Options,Utils</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_task_gen" kindref="compound">waflib.TaskGen</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>before_method,feature,after_method,Task,extension</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_configure" kindref="compound">waflib.Configure</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>conf</highlight></codeline>
<codeline lineno="9"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a839f18f16539f3131cbe573262099bf1" kindref="member">feature</ref>(</highlight><highlight class="stringliteral">&apos;rubyext&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="10"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a56d188988dd3babc77f1d283e1f8c1b1" kindref="member">before_method</ref>(</highlight><highlight class="stringliteral">&apos;apply_incpaths&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;apply_lib_vars&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;apply_bundle&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;apply_link&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1ruby_1aefe90baeace8b05bd0038dec33a25d4f" kindref="member">init_rubyext</ref>(self):</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/>self.install_path=</highlight><highlight class="stringliteral">&apos;${ARCHDIR_RUBY}&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/>self.uselib=self.to_list(getattr(self,</highlight><highlight class="stringliteral">&apos;uselib&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="stringliteral">&apos;RUBY&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.uselib:</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.uselib.append(</highlight><highlight class="stringliteral">&apos;RUBY&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="stringliteral">&apos;RUBYEXT&apos;</highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.uselib:</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.uselib.append(</highlight><highlight class="stringliteral">&apos;RUBYEXT&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="18"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a839f18f16539f3131cbe573262099bf1" kindref="member">feature</ref>(</highlight><highlight class="stringliteral">&apos;rubyext&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="19"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1a56d188988dd3babc77f1d283e1f8c1b1" kindref="member">before_method</ref>(</highlight><highlight class="stringliteral">&apos;apply_link&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;propagate_uselib&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1ruby_1a91ccae4c2fd8fd022d9cf0b408b30ba5" kindref="member">apply_ruby_so_name</ref>(self):</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env[</highlight><highlight class="stringliteral">&apos;cshlib_PATTERN&apos;</highlight><highlight class="normal">]=self.env[</highlight><highlight class="stringliteral">&apos;cxxshlib_PATTERN&apos;</highlight><highlight class="normal">]=self.env[</highlight><highlight class="stringliteral">&apos;rubyext_PATTERN&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="22"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1ruby_1a6b1426d0a007a1d029dd549463f35792" kindref="member">check_ruby_version</ref>(self,minver=()):</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>Options.options.rubybinary:</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env.RUBY=Options.options.rubybinary</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.find_program(</highlight><highlight class="stringliteral">&apos;ruby&apos;</highlight><highlight class="normal">,var=</highlight><highlight class="stringliteral">&apos;RUBY&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>ruby=self.env.RUBY</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version=self.cmd_and_log([ruby,</highlight><highlight class="stringliteral">&apos;-e&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;puts<sp/>defined?(VERSION)<sp/>?<sp/>VERSION<sp/>:<sp/>RUBY_VERSION&apos;</highlight><highlight class="normal">]).strip()</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception:</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.fatal(</highlight><highlight class="stringliteral">&apos;could<sp/>not<sp/>determine<sp/>ruby<sp/>version&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.RUBY_VERSION=version</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ver=tuple(<ref refid="structmap" kindref="compound">map</ref>(int,version.split(</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception:</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.fatal(</highlight><highlight class="stringliteral">&apos;unsupported<sp/>ruby<sp/>version<sp/>%r&apos;</highlight><highlight class="normal">%version)</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>cver=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>minver:</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ver&lt;minver:</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.fatal(</highlight><highlight class="stringliteral">&apos;ruby<sp/>is<sp/>too<sp/>old<sp/>%r&apos;</highlight><highlight class="normal">%ver)</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cver=</highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">.join([<ref refid="sndfile__save_8m_1a4b99ff73a8a869319570237b5c57ab03" kindref="member">str</ref>(x)</highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>minver])</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cver=ver</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>self.msg(</highlight><highlight class="stringliteral">&apos;Checking<sp/>for<sp/>ruby<sp/>version<sp/>%s&apos;</highlight><highlight class="normal">%<ref refid="sndfile__save_8m_1a4b99ff73a8a869319570237b5c57ab03" kindref="member">str</ref>(minver<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">),cver)</highlight></codeline>
<codeline lineno="46"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1ruby_1a1152f26b41ce01670cf061540c07642a" kindref="member">check_ruby_ext_devel</ref>(self):</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.env.RUBY:</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.fatal(</highlight><highlight class="stringliteral">&apos;ruby<sp/>detection<sp/>is<sp/>required<sp/>first&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.env.CC_NAME<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.env.CXX_NAME:</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.fatal(</highlight><highlight class="stringliteral">&apos;load<sp/>a<sp/>c/c++<sp/>compiler<sp/>first&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>version=tuple(<ref refid="structmap" kindref="compound">map</ref>(int,self.env.RUBY_VERSION.split(</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">read_out(cmd):</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>Utils.to_list(self.cmd_and_log([self.env.RUBY,</highlight><highlight class="stringliteral">&apos;-rrbconfig&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;-e&apos;</highlight><highlight class="normal">,cmd]))</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">read_config(key):</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>read_out(</highlight><highlight class="stringliteral">&apos;puts<sp/>Config::CONFIG[%r]&apos;</highlight><highlight class="normal">%key)</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>ruby=self.env[</highlight><highlight class="stringliteral">&apos;RUBY&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>archdir=read_config(</highlight><highlight class="stringliteral">&apos;archdir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>cpppath=archdir</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>version&gt;=(1,9,0):</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ruby_hdrdir=read_config(</highlight><highlight class="stringliteral">&apos;rubyhdrdir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cpppath+=ruby_hdrdir</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cpppath+=[os.path.join(ruby_hdrdir[0],read_config(</highlight><highlight class="stringliteral">&apos;arch&apos;</highlight><highlight class="normal">)[0])]</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>self.check(header_name=</highlight><highlight class="stringliteral">&apos;ruby.h&apos;</highlight><highlight class="normal">,includes=cpppath,errmsg=</highlight><highlight class="stringliteral">&apos;could<sp/>not<sp/>find<sp/>ruby<sp/>header<sp/>file&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.LIBPATH_RUBYEXT=read_config(</highlight><highlight class="stringliteral">&apos;libdir&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.LIBPATH_RUBYEXT+=archdir</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.INCLUDES_RUBYEXT=cpppath</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.CFLAGS_RUBYEXT=read_config(</highlight><highlight class="stringliteral">&apos;CCDLFLAGS&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.rubyext_PATTERN=</highlight><highlight class="stringliteral">&apos;%s.&apos;</highlight><highlight class="normal">+read_config(</highlight><highlight class="stringliteral">&apos;DLEXT&apos;</highlight><highlight class="normal">)[0]</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/>flags=read_config(</highlight><highlight class="stringliteral">&apos;LDSHARED&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>flags<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>flags[0][0]!=</highlight><highlight class="stringliteral">&apos;-&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flags=flags[1:]</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(flags)&gt;1<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>flags[1]==</highlight><highlight class="stringliteral">&quot;ppc&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flags=flags[2:]</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.LINKFLAGS_RUBYEXT=flags</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.LINKFLAGS_RUBYEXT+=read_config(</highlight><highlight class="stringliteral">&apos;LIBS&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>self.env.LINKFLAGS_RUBYEXT+=read_config(</highlight><highlight class="stringliteral">&apos;LIBRUBYARG_SHARED&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>Options.options.rubyarchdir:</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env.ARCHDIR_RUBY=Options.options.rubyarchdir</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env.ARCHDIR_RUBY=read_config(</highlight><highlight class="stringliteral">&apos;sitearchdir&apos;</highlight><highlight class="normal">)[0]</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>Options.options.rubylibdir:</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env.LIBDIR_RUBY=Options.options.rubylibdir</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.env.LIBDIR_RUBY=read_config(</highlight><highlight class="stringliteral">&apos;sitelibdir&apos;</highlight><highlight class="normal">)[0]</highlight></codeline>
<codeline lineno="86"><highlight class="normal">@conf</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1ruby_1a56fd37d84970b70e399a27f937a3c8c6" kindref="member">check_ruby_module</ref>(self,module_name):</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>self.start_msg(</highlight><highlight class="stringliteral">&apos;Ruby<sp/>module<sp/>%s&apos;</highlight><highlight class="normal">%module_name)</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.cmd_and_log([self.env[</highlight><highlight class="stringliteral">&apos;RUBY&apos;</highlight><highlight class="normal">],</highlight><highlight class="stringliteral">&apos;-e&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;require<sp/>\&apos;%s\&apos;;puts<sp/>1&apos;</highlight><highlight class="normal">%module_name])</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception:</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.end_msg(</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.fatal(</highlight><highlight class="stringliteral">&apos;Could<sp/>not<sp/>find<sp/>the<sp/>ruby<sp/>module<sp/>%r&apos;</highlight><highlight class="normal">%module_name)</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>self.end_msg(</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="95"><highlight class="normal">@<ref refid="namespacewaflib_1_1_task_gen_1ab4b159e661d17937cf1be8254dedb12f" kindref="member">extension</ref>(</highlight><highlight class="stringliteral">&apos;.rb&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1ruby_1abc8e4baeca74633f0dc718700b547b88" kindref="member">process</ref>(self,node):</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>tsk=self.create_task(</highlight><highlight class="stringliteral">&apos;run_ruby&apos;</highlight><highlight class="normal">,node)</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">run_ruby(Task.Task):</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/>run_str=</highlight><highlight class="stringliteral">&apos;${RUBY}<sp/>${RBFLAGS}<sp/>-I<sp/>${SRC[0].parent.abspath()}<sp/>${SRC}&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacewaflib_1_1_tools_1_1ruby_1a81332d72c1973177fb7f913b94ea205d" kindref="member">options</ref>(opt):</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>opt.add_option(</highlight><highlight class="stringliteral">&apos;--with-ruby-archdir&apos;</highlight><highlight class="normal">,type=</highlight><highlight class="stringliteral">&apos;string&apos;</highlight><highlight class="normal">,dest=</highlight><highlight class="stringliteral">&apos;rubyarchdir&apos;</highlight><highlight class="normal">,help=</highlight><highlight class="stringliteral">&apos;Specify<sp/>directory<sp/>where<sp/>to<sp/>install<sp/>arch<sp/>specific<sp/>files&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>opt.add_option(</highlight><highlight class="stringliteral">&apos;--with-ruby-libdir&apos;</highlight><highlight class="normal">,type=</highlight><highlight class="stringliteral">&apos;string&apos;</highlight><highlight class="normal">,dest=</highlight><highlight class="stringliteral">&apos;rubylibdir&apos;</highlight><highlight class="normal">,help=</highlight><highlight class="stringliteral">&apos;Specify<sp/>alternate<sp/>ruby<sp/>library<sp/>path&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/>opt.add_option(</highlight><highlight class="stringliteral">&apos;--with-ruby-binary&apos;</highlight><highlight class="normal">,type=</highlight><highlight class="stringliteral">&apos;string&apos;</highlight><highlight class="normal">,dest=</highlight><highlight class="stringliteral">&apos;rubybinary&apos;</highlight><highlight class="normal">,help=</highlight><highlight class="stringliteral">&apos;Specify<sp/>alternate<sp/>ruby<sp/>binary&apos;</highlight><highlight class="normal">)</highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-sampler.lv2/waflib/Tools/ruby.py"/>
  </compounddef>
</doxygen>
