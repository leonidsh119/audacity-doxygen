<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="_track_panel_8cpp" kind="file" language="C++">
    <compoundname>TrackPanel.cpp</compoundname>
    <includes refid="_audacity_8h" local="yes">Audacity.h</includes>
    <includes refid="_experimental_8h" local="yes">Experimental.h</includes>
    <includes refid="_track_panel_8h" local="yes">TrackPanel.h</includes>
    <includes local="no">wx/fontenum.h</includes>
    <includes local="no">wx/numdlg.h</includes>
    <includes local="no">wx/spinctrl.h</includes>
    <includes refid="_freq_window_8h" local="yes">FreqWindow.h</includes>
    <includes refid="_a_color_8h" local="yes">AColor.h</includes>
    <includes refid="_all_theme_resources_8h" local="yes">AllThemeResources.h</includes>
    <includes refid="_audio_i_o_8h" local="yes">AudioIO.h</includes>
    <includes refid="src_2_envelope_8h" local="yes">Envelope.h</includes>
    <includes refid="float__cast_8h" local="yes">float_cast.h</includes>
    <includes refid="_label_track_8h" local="yes">LabelTrack.h</includes>
    <includes refid="_mixer_board_8h" local="yes">MixerBoard.h</includes>
    <includes refid="_note_track_8h" local="yes">NoteTrack.h</includes>
    <includes refid="_number_scale_8h" local="yes">NumberScale.h</includes>
    <includes refid="_prefs_8h" local="yes">Prefs.h</includes>
    <includes refid="_snap_8h" local="yes">Snap.h</includes>
    <includes refid="_shuttle_gui_8h" local="yes">ShuttleGui.h</includes>
    <includes refid="_time_track_8h" local="yes">TimeTrack.h</includes>
    <includes refid="_track_artist_8h" local="yes">TrackArtist.h</includes>
    <includes refid="_track_panel_ax_8h" local="yes">TrackPanelAx.h</includes>
    <includes refid="_undo_manager_8h" local="yes">UndoManager.h</includes>
    <includes refid="_wave_track_8h" local="yes">WaveTrack.h</includes>
    <includes refid="_keyboard_8h" local="yes">commands/Keyboard.h</includes>
    <includes refid="_o_d_manager_8h" local="yes">ondemand/ODManager.h</includes>
    <includes refid="_prefs_dialog_8h" local="yes">prefs/PrefsDialog.h</includes>
    <includes refid="_spectrum_prefs_8h" local="yes">prefs/SpectrumPrefs.h</includes>
    <includes refid="_waveform_prefs_8h" local="yes">prefs/WaveformPrefs.h</includes>
    <includes refid="_control_tool_bar_8h" local="yes">toolbars/ControlToolBar.h</includes>
    <includes refid="_tools_tool_bar_8h" local="yes">toolbars/ToolsToolBar.h</includes>
    <includes refid="_cursors_8h" local="yes">../images/Cursors.h</includes>
    <incdepgraph>
      <node id="57149">
        <label>wx/dir.h</label>
      </node>
      <node id="57156">
        <label>wx/choice.h</label>
      </node>
      <node id="57127">
        <label>WaveClip.h</label>
        <link refid="_wave_clip_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57061" relation="include">
        </childnode>
        <childnode refid="57128" relation="include">
        </childnode>
        <childnode refid="57125" relation="include">
        </childnode>
        <childnode refid="57062" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57131" relation="include">
        </childnode>
        <childnode refid="57059" relation="include">
        </childnode>
        <childnode refid="57060" relation="include">
        </childnode>
        <childnode refid="57132" relation="include">
        </childnode>
        <childnode refid="57133" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
      </node>
      <node id="57181">
        <label>wx/treebook.h</label>
      </node>
      <node id="57198">
        <label>Cursors32/LabelCursorLeft.xpm</label>
      </node>
      <node id="57111">
        <label>effects/TimeWarper.h</label>
        <link refid="_time_warper_8h"/>
      </node>
      <node id="57187">
        <label>toolbars/ControlToolBar.h</label>
        <link refid="_control_tool_bar_8h"/>
        <childnode refid="57188" relation="include">
        </childnode>
        <childnode refid="57087" relation="include">
        </childnode>
      </node>
      <node id="57183">
        <label>PrefsPanel.h</label>
        <link refid="_prefs_panel_8h"/>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
      </node>
      <node id="57102">
        <label>wx/hashmap.h</label>
      </node>
      <node id="57173">
        <label>toolbars/SelectionBarListener.h</label>
        <link refid="_selection_bar_listener_8h"/>
      </node>
      <node id="57110">
        <label>NoteTrack.h</label>
        <link refid="_note_track_8h"/>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57058" relation="include">
        </childnode>
        <childnode refid="57111" relation="include">
        </childnode>
      </node>
      <node id="57067">
        <label>wx/numdlg.h</label>
      </node>
      <node id="57130">
        <label>wx/gauge.h</label>
      </node>
      <node id="57065">
        <label>wx/ffile.h</label>
      </node>
      <node id="57050">
        <label>wx/event.h</label>
      </node>
      <node id="57075">
        <label>wx/font.h</label>
      </node>
      <node id="57167">
        <label>audacity/ModuleInterface.h</label>
        <link refid="_module_interface_8h"/>
        <childnode refid="57045" relation="include">
        </childnode>
        <childnode refid="57160" relation="include">
        </childnode>
        <childnode refid="57168" relation="include">
        </childnode>
      </node>
      <node id="57136">
        <label>ODTask.h</label>
        <link refid="_o_d_task_8h"/>
        <childnode refid="57125" relation="include">
        </childnode>
        <childnode refid="57137" relation="include">
        </childnode>
        <childnode refid="57139" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57178" relation="include">
        </childnode>
      </node>
      <node id="57107">
        <label>wx/dcclient.h</label>
      </node>
      <node id="57148">
        <label>wx/cmdline.h</label>
      </node>
      <node id="57098">
        <label>LabelTrack.h</label>
        <link refid="_label_track_8h"/>
        <childnode refid="57053" relation="include">
        </childnode>
        <childnode refid="57058" relation="include">
        </childnode>
        <childnode refid="57070" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57075" relation="include">
        </childnode>
        <childnode refid="57074" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57099" relation="include">
        </childnode>
      </node>
      <node id="57106">
        <label>ImageRoll.h</label>
        <link refid="_image_roll_8h"/>
        <childnode refid="57083" relation="include">
        </childnode>
        <childnode refid="57107" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57108" relation="include">
        </childnode>
      </node>
      <node id="57090">
        <label>AudioIO.h</label>
        <link refid="_audio_i_o_8h"/>
        <childnode refid="57091" relation="include">
        </childnode>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57092" relation="include">
        </childnode>
        <childnode refid="57061" relation="include">
        </childnode>
      </node>
      <node id="57078">
        <label>wx/slider.h</label>
      </node>
      <node id="57159">
        <label>audacity/EffectInterface.h</label>
        <link refid="_effect_interface_8h"/>
        <childnode refid="57045" relation="include">
        </childnode>
        <childnode refid="57160" relation="include">
        </childnode>
        <childnode refid="57161" relation="include">
        </childnode>
        <childnode refid="57162" relation="include">
        </childnode>
        <childnode refid="57073" relation="include">
        </childnode>
      </node>
      <node id="57186">
        <label>WaveformSettings.h</label>
        <link refid="_waveform_settings_8h"/>
      </node>
      <node id="57096">
        <label>Internat.h</label>
        <link refid="_internat_8h"/>
        <childnode refid="57047" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57060" relation="include">
        </childnode>
      </node>
      <node id="57062">
        <label>xml/XMLTagHandler.h</label>
        <link refid="_x_m_l_tag_handler_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57063" relation="include">
        </childnode>
        <childnode refid="57064" relation="include">
        </childnode>
      </node>
      <node id="57037">
        <label>TrackPanel.h</label>
        <link refid="_track_panel_8h"/>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57041" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57043" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57045" relation="include">
        </childnode>
        <childnode refid="57048" relation="include">
        </childnode>
        <childnode refid="57053" relation="include">
        </childnode>
        <childnode refid="57056" relation="include">
        </childnode>
        <childnode refid="57057" relation="include">
        </childnode>
        <childnode refid="57058" relation="include">
        </childnode>
      </node>
      <node id="57094">
        <label>stdlib.h</label>
      </node>
      <node id="57195">
        <label>Cursors32/DrawCursor.xpm</label>
      </node>
      <node id="57142">
        <label>TrackPanelListener.h</label>
        <link refid="_track_panel_listener_8h"/>
      </node>
      <node id="57054">
        <label>wx/wxchar.h</label>
      </node>
      <node id="57089">
        <label>wx/image.h</label>
      </node>
      <node id="57074">
        <label>wx/pen.h</label>
      </node>
      <node id="57071">
        <label>wx/frame.h</label>
      </node>
      <node id="57196">
        <label>Cursors32/ZoomInCursor.xpm</label>
      </node>
      <node id="57125">
        <label>ondemand/ODTaskThread.h</label>
        <link refid="_o_d_task_thread_8h"/>
        <childnode refid="57092" relation="include">
        </childnode>
        <childnode refid="57034" relation="include">
        </childnode>
      </node>
      <node id="57161">
        <label>audacity/ConfigInterface.h</label>
        <link refid="_config_interface_8h"/>
        <childnode refid="57045" relation="include">
        </childnode>
      </node>
      <node id="57192">
        <label>Cursors32/EnvCursor.xpm</label>
      </node>
      <node id="57080">
        <label>wx/utils.h</label>
      </node>
      <node id="57113">
        <label>cmath</label>
      </node>
      <node id="57135">
        <label>ondemand/ODManager.h</label>
        <link refid="_o_d_manager_8h"/>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57136" relation="include">
        </childnode>
        <childnode refid="57125" relation="include">
        </childnode>
        <childnode refid="57092" relation="include">
        </childnode>
        <childnode refid="57178" relation="include">
        </childnode>
      </node>
      <node id="57129">
        <label>wx/evtloop.h</label>
      </node>
      <node id="57120">
        <label>WrappedType.h</label>
        <link refid="_wrapped_type_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
      </node>
      <node id="57035">
        <label>Experimental.h</label>
        <link refid="_experimental_8h"/>
        <childnode refid="57036" relation="include">
        </childnode>
      </node>
      <node id="57043">
        <label>wx/timer.h</label>
      </node>
      <node id="57194">
        <label>Cursors32/IBeamCursor.xpm</label>
      </node>
      <node id="57059">
        <label>wx/gdicmn.h</label>
      </node>
      <node id="57193">
        <label>Cursors32/TimeCursor.xpm</label>
      </node>
      <node id="57112">
        <label>NumberScale.h</label>
        <link refid="_number_scale_8h"/>
        <childnode refid="57095" relation="include">
        </childnode>
        <childnode refid="57113" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57114" relation="include">
        </childnode>
      </node>
      <node id="57141">
        <label>ViewInfo.h</label>
        <link refid="_view_info_8h"/>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57053" relation="include">
        </childnode>
      </node>
      <node id="57172">
        <label>../Shuttle.h</label>
        <link refid="_shuttle_8h"/>
      </node>
      <node id="57117">
        <label>wx/fileconf.h</label>
      </node>
      <node id="57165">
        <label>map</label>
      </node>
      <node id="57123">
        <label>TrackPanelAx.h</label>
        <link refid="_track_panel_ax_8h"/>
        <childnode refid="57044" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57037" relation="include">
        </childnode>
      </node>
      <node id="57086">
        <label>MacroMagic.h</label>
        <link refid="_macro_magic_8h"/>
        <childnode refid="57087" relation="include">
        </childnode>
      </node>
      <node id="57056">
        <label>WaveTrackLocation.h</label>
        <link refid="_wave_track_location_8h"/>
      </node>
      <node id="57134">
        <label>commands/Keyboard.h</label>
        <link refid="_keyboard_8h"/>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
      </node>
      <node id="57168">
        <label>audacity/PluginInterface.h</label>
        <link refid="_plugin_interface_8h"/>
        <childnode refid="57045" relation="include">
        </childnode>
        <childnode refid="57161" relation="include">
        </childnode>
        <childnode refid="57159" relation="include">
        </childnode>
        <childnode refid="57160" relation="include">
        </childnode>
        <childnode refid="57166" relation="include">
        </childnode>
        <childnode refid="57167" relation="include">
        </childnode>
      </node>
      <node id="57076">
        <label>wx/scrolbar.h</label>
      </node>
      <node id="57083">
        <label>wx/dc.h</label>
      </node>
      <node id="57131">
        <label>RealFFTf.h</label>
        <link refid="_real_f_f_tf_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
      </node>
      <node id="57174">
        <label>toolbars/SpectralSelectionBarListener.h</label>
        <link refid="_spectral_selection_bar_listener_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
      </node>
      <node id="57051">
        <label>wx/stattext.h</label>
      </node>
      <node id="57154">
        <label>wx/socket.h</label>
      </node>
      <node id="57197">
        <label>Cursors32/ZoomOutCursor.xpm</label>
      </node>
      <node id="57176">
        <label>wx/generic/dragimgg.h</label>
      </node>
      <node id="57085">
        <label>AllThemeResources.h</label>
        <link refid="_all_theme_resources_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57086" relation="include">
        </childnode>
      </node>
      <node id="57160">
        <label>audacity/IdentInterface.h</label>
        <link refid="_ident_interface_8h"/>
        <childnode refid="57045" relation="include">
        </childnode>
      </node>
      <node id="57132">
        <label>wx/list.h</label>
      </node>
      <node id="57072">
        <label>wx/checkbox.h</label>
      </node>
      <node id="57145">
        <label>wx/menu.h</label>
      </node>
      <node id="57036">
        <label>wx/defs.h</label>
      </node>
      <node id="57044">
        <label>wx/window.h</label>
      </node>
      <node id="57201">
        <label>Cursors32/TopFrequencyCursor.xpm</label>
      </node>
      <node id="57151">
        <label>wx/intl.h</label>
      </node>
      <node id="57128">
        <label>widgets/ProgressDialog.h</label>
        <link refid="_progress_dialog_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57073" relation="include">
        </childnode>
        <childnode refid="57129" relation="include">
        </childnode>
        <childnode refid="57130" relation="include">
        </childnode>
        <childnode refid="57051" relation="include">
        </childnode>
        <childnode refid="57080" relation="include">
        </childnode>
      </node>
      <node id="57101">
        <label>wx/bmpbuttn.h</label>
      </node>
      <node id="57185">
        <label>prefs/WaveformPrefs.h</label>
        <link refid="_waveform_prefs_8h"/>
        <childnode refid="57183" relation="include">
        </childnode>
        <childnode refid="57186" relation="include">
        </childnode>
      </node>
      <node id="57045">
        <label>audacity/Types.h</label>
        <link refid="include_2audacity_2_types_8h"/>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57047" relation="include">
        </childnode>
      </node>
      <node id="57137">
        <label>../BlockFile.h</label>
        <link refid="_block_file_8h"/>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57065" relation="include">
        </childnode>
        <childnode refid="57138" relation="include">
        </childnode>
        <childnode refid="57062" relation="include">
        </childnode>
        <childnode refid="57064" relation="include">
        </childnode>
        <childnode refid="57061" relation="include">
        </childnode>
      </node>
      <node id="57109">
        <label>widgets/ASlider.h</label>
        <link refid="_a_slider_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
        <childnode refid="57073" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57043" relation="include">
        </childnode>
      </node>
      <node id="57164">
        <label>../PluginManager.h</label>
        <link refid="_plugin_manager_8h"/>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57117" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57165" relation="include">
        </childnode>
        <childnode refid="57159" relation="include">
        </childnode>
        <childnode refid="57166" relation="include">
        </childnode>
        <childnode refid="57167" relation="include">
        </childnode>
        <childnode refid="57168" relation="include">
        </childnode>
      </node>
      <node id="57073">
        <label>wx/dialog.h</label>
      </node>
      <node id="57105">
        <label>widgets/AButton.h</label>
        <link refid="_a_button_8h"/>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57089" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
        <childnode refid="57106" relation="include">
        </childnode>
      </node>
      <node id="57066">
        <label>wx/fontenum.h</label>
      </node>
      <node id="57138">
        <label>wx/filename.h</label>
      </node>
      <node id="57157">
        <label>effects/EffectManager.h</label>
        <link refid="_effect_manager_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57156" relation="include">
        </childnode>
        <childnode refid="57073" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57158" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57159" relation="include">
        </childnode>
        <childnode refid="57164" relation="include">
        </childnode>
        <childnode refid="57169" relation="include">
        </childnode>
      </node>
      <node id="57057">
        <label>Snap.h</label>
        <link refid="_snap_8h"/>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57048" relation="include">
        </childnode>
      </node>
      <node id="57088">
        <label>wx/colour.h</label>
      </node>
      <node id="57048">
        <label>widgets/NumericTextCtrl.h</label>
        <link refid="_numeric_text_ctrl_8h"/>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57051" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57052" relation="include">
        </childnode>
        <childnode refid="57034" relation="include">
        </childnode>
      </node>
      <node id="57162">
        <label>audacity/EffectAutomationParameters.h</label>
        <link refid="_effect_automation_parameters_8h"/>
        <childnode refid="57163" relation="include">
        </childnode>
        <childnode refid="57148" relation="include">
        </childnode>
        <childnode refid="57117" relation="include">
        </childnode>
        <childnode refid="57151" relation="include">
        </childnode>
      </node>
      <node id="57115">
        <label>Prefs.h</label>
        <link refid="_prefs_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57116" relation="include">
        </childnode>
        <childnode refid="57117" relation="include">
        </childnode>
      </node>
      <node id="57070">
        <label>wx/brush.h</label>
      </node>
      <node id="57114">
        <label>wx/debug.h</label>
      </node>
      <node id="57069">
        <label>FreqWindow.h</label>
        <link refid="_freq_window_8h"/>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57070" relation="include">
        </childnode>
        <childnode refid="57041" relation="include">
        </childnode>
        <childnode refid="57071" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57072" relation="include">
        </childnode>
        <childnode refid="57073" relation="include">
        </childnode>
        <childnode refid="57059" relation="include">
        </childnode>
        <childnode refid="57074" relation="include">
        </childnode>
        <childnode refid="57075" relation="include">
        </childnode>
        <childnode refid="57076" relation="include">
        </childnode>
        <childnode refid="57077" relation="include">
        </childnode>
        <childnode refid="57078" relation="include">
        </childnode>
        <childnode refid="57051" relation="include">
        </childnode>
        <childnode refid="57079" relation="include">
        </childnode>
        <childnode refid="57052" relation="include">
        </childnode>
        <childnode refid="57080" relation="include">
        </childnode>
        <childnode refid="57081" relation="include">
        </childnode>
      </node>
      <node id="57199">
        <label>Cursors32/LabelCursorRight.xpm</label>
      </node>
      <node id="57144">
        <label>commands/CommandManager.h</label>
        <link refid="_command_manager_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57145" relation="include">
        </childnode>
        <childnode refid="57102" relation="include">
        </childnode>
        <childnode refid="57146" relation="include">
        </childnode>
        <childnode refid="57062" relation="include">
        </childnode>
        <childnode refid="57045" relation="include">
        </childnode>
      </node>
      <node id="57034">
        <label>Audacity.h</label>
        <link refid="_audacity_8h"/>
      </node>
      <node id="57119">
        <label>wx/grid.h</label>
      </node>
      <node id="57103">
        <label>wx/scrolwin.h</label>
      </node>
      <node id="57040">
        <label>vector</label>
      </node>
      <node id="57169">
        <label>Effect.h</label>
        <link refid="src_2effects_2_effect_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57170" relation="include">
        </childnode>
        <childnode refid="57101" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57151" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57171" relation="include">
        </childnode>
        <childnode refid="57161" relation="include">
        </childnode>
        <childnode refid="57159" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57053" relation="include">
        </childnode>
        <childnode refid="57172" relation="include">
        </childnode>
        <childnode refid="57096" relation="include">
        </childnode>
        <childnode refid="57128" relation="include">
        </childnode>
      </node>
      <node id="57188">
        <label>ToolBar.h</label>
        <link refid="_tool_bar_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57077" relation="include">
        </childnode>
        <childnode refid="57087" relation="include">
        </childnode>
      </node>
      <node id="57049">
        <label>wx/dynarray.h</label>
      </node>
      <node id="57179">
        <label>prefs/PrefsDialog.h</label>
        <link refid="_prefs_dialog_8h"/>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57180" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57073" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57181" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
      </node>
      <node id="57139">
        <label>../Project.h</label>
        <link refid="_project_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57140" relation="include">
        </childnode>
        <childnode refid="57141" relation="include">
        </childnode>
        <childnode refid="57142" relation="include">
        </childnode>
        <childnode refid="57143" relation="include">
        </childnode>
        <childnode refid="57144" relation="include">
        </childnode>
        <childnode refid="57157" relation="include">
        </childnode>
        <childnode refid="57062" relation="include">
        </childnode>
        <childnode refid="57173" relation="include">
        </childnode>
        <childnode refid="57174" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57153" relation="include">
        </childnode>
        <childnode refid="57175" relation="include">
        </childnode>
        <childnode refid="57176" relation="include">
        </childnode>
        <childnode refid="57071" relation="include">
        </childnode>
        <childnode refid="57151" relation="include">
        </childnode>
        <childnode refid="57107" relation="include">
        </childnode>
        <childnode refid="57177" relation="include">
        </childnode>
      </node>
      <node id="57166">
        <label>audacity/ImporterInterface.h</label>
        <link refid="_importer_interface_8h"/>
        <childnode refid="57045" relation="include">
        </childnode>
        <childnode refid="57161" relation="include">
        </childnode>
        <childnode refid="57160" relation="include">
        </childnode>
      </node>
      <node id="57087">
        <label>Theme.h</label>
        <link refid="_theme_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57082" relation="include">
        </childnode>
        <childnode refid="57088" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57075" relation="include">
        </childnode>
        <childnode refid="57089" relation="include">
        </childnode>
      </node>
      <node id="57084">
        <label>AColor.h</label>
        <link refid="_a_color_8h"/>
        <childnode refid="57070" relation="include">
        </childnode>
        <childnode refid="57074" relation="include">
        </childnode>
      </node>
      <node id="57046">
        <label>wx/string.h</label>
      </node>
      <node id="57146">
        <label>../AudacityApp.h</label>
        <link refid="_audacity_app_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57147" relation="include">
        </childnode>
        <childnode refid="57148" relation="include">
        </childnode>
        <childnode refid="57149" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57150" relation="include">
        </childnode>
        <childnode refid="57151" relation="include">
        </childnode>
        <childnode refid="57152" relation="include">
        </childnode>
        <childnode refid="57153" relation="include">
        </childnode>
        <childnode refid="57154" relation="include">
        </childnode>
        <childnode refid="57043" relation="include">
        </childnode>
        <childnode refid="57155" relation="include">
        </childnode>
        <childnode refid="57125" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
      </node>
      <node id="57158">
        <label>wx/listbox.h</label>
      </node>
      <node id="57133">
        <label>wx/msgdlg.h</label>
      </node>
      <node id="57093">
        <label>Envelope.h</label>
        <link refid="src_2_envelope_8h"/>
        <childnode refid="57094" relation="include">
        </childnode>
        <childnode refid="57095" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57070" relation="include">
        </childnode>
        <childnode refid="57074" relation="include">
        </childnode>
        <childnode refid="57062" relation="include">
        </childnode>
        <childnode refid="57096" relation="include">
        </childnode>
      </node>
      <node id="57091">
        <label>portaudio.h</label>
        <link refid="portaudio_8h"/>
      </node>
      <node id="57153">
        <label>wx/log.h</label>
      </node>
      <node id="57200">
        <label>Cursors32/BottomFrequencyCursor.xpm</label>
      </node>
      <node id="57055">
        <label>math.h</label>
      </node>
      <node id="57100">
        <label>MixerBoard.h</label>
        <link refid="_mixer_board_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57071" relation="include">
        </childnode>
        <childnode refid="57101" relation="include">
        </childnode>
        <childnode refid="57102" relation="include">
        </childnode>
        <childnode refid="57089" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57103" relation="include">
        </childnode>
        <childnode refid="57104" relation="include">
        </childnode>
        <childnode refid="57051" relation="include">
        </childnode>
        <childnode refid="57105" relation="include">
        </childnode>
        <childnode refid="57109" relation="include">
        </childnode>
      </node>
      <node id="57140">
        <label>DirManager.h</label>
        <link refid="_dir_manager_8h"/>
        <childnode refid="57132" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57138" relation="include">
        </childnode>
        <childnode refid="57102" relation="include">
        </childnode>
        <childnode refid="57080" relation="include">
        </childnode>
        <childnode refid="57045" relation="include">
        </childnode>
        <childnode refid="57062" relation="include">
        </childnode>
      </node>
      <node id="57053">
        <label>SelectedRegion.h</label>
        <link refid="_selected_region_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57054" relation="include">
        </childnode>
        <childnode refid="57055" relation="include">
        </childnode>
      </node>
      <node id="57047">
        <label>wx/arrstr.h</label>
      </node>
      <node id="57116">
        <label>wx/config.h</label>
      </node>
      <node id="57033">
        <label>C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp</label>
        <link refid="TrackPanel.cpp"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57037" relation="include">
        </childnode>
        <childnode refid="57066" relation="include">
        </childnode>
        <childnode refid="57067" relation="include">
        </childnode>
        <childnode refid="57068" relation="include">
        </childnode>
        <childnode refid="57069" relation="include">
        </childnode>
        <childnode refid="57084" relation="include">
        </childnode>
        <childnode refid="57085" relation="include">
        </childnode>
        <childnode refid="57090" relation="include">
        </childnode>
        <childnode refid="57093" relation="include">
        </childnode>
        <childnode refid="57097" relation="include">
        </childnode>
        <childnode refid="57098" relation="include">
        </childnode>
        <childnode refid="57100" relation="include">
        </childnode>
        <childnode refid="57110" relation="include">
        </childnode>
        <childnode refid="57112" relation="include">
        </childnode>
        <childnode refid="57115" relation="include">
        </childnode>
        <childnode refid="57057" relation="include">
        </childnode>
        <childnode refid="57118" relation="include">
        </childnode>
        <childnode refid="57121" relation="include">
        </childnode>
        <childnode refid="57122" relation="include">
        </childnode>
        <childnode refid="57123" relation="include">
        </childnode>
        <childnode refid="57124" relation="include">
        </childnode>
        <childnode refid="57126" relation="include">
        </childnode>
        <childnode refid="57134" relation="include">
        </childnode>
        <childnode refid="57135" relation="include">
        </childnode>
        <childnode refid="57179" relation="include">
        </childnode>
        <childnode refid="57182" relation="include">
        </childnode>
        <childnode refid="57185" relation="include">
        </childnode>
        <childnode refid="57187" relation="include">
        </childnode>
        <childnode refid="57189" relation="include">
        </childnode>
        <childnode refid="57190" relation="include">
        </childnode>
      </node>
      <node id="57202">
        <label>Cursors32/BandWidthCursor.xpm</label>
      </node>
      <node id="57077">
        <label>wx/sizer.h</label>
      </node>
      <node id="57178">
        <label>wx/wx.h</label>
      </node>
      <node id="57152">
        <label>wx/snglinst.h</label>
      </node>
      <node id="57121">
        <label>TimeTrack.h</label>
        <link refid="_time_track_8h"/>
        <childnode refid="57058" relation="include">
        </childnode>
        <childnode refid="57070" relation="include">
        </childnode>
        <childnode refid="57074" relation="include">
        </childnode>
        <childnode refid="57095" relation="include">
        </childnode>
      </node>
      <node id="57097">
        <label>float_cast.h</label>
        <link refid="float__cast_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57055" relation="include">
        </childnode>
      </node>
      <node id="57058">
        <label>Track.h</label>
        <link refid="src_2track_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57059" relation="include">
        </childnode>
        <childnode refid="57060" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57061" relation="include">
        </childnode>
        <childnode refid="57062" relation="include">
        </childnode>
      </node>
      <node id="57092">
        <label>wx/thread.h</label>
      </node>
      <node id="57175">
        <label>wx/dragimag.h</label>
      </node>
      <node id="57079">
        <label>wx/statusbr.h</label>
      </node>
      <node id="57184">
        <label>SpectrogramSettings.h</label>
        <link refid="_spectrogram_settings_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
      </node>
      <node id="57104">
        <label>wx/statbmp.h</label>
      </node>
      <node id="57171">
        <label>wx/tglbtn.h</label>
      </node>
      <node id="57099">
        <label>wx/clipbrd.h</label>
      </node>
      <node id="57122">
        <label>TrackArtist.h</label>
        <link refid="_track_artist_8h"/>
        <childnode refid="57070" relation="include">
        </childnode>
        <childnode refid="57074" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57045" relation="include">
        </childnode>
      </node>
      <node id="57180">
        <label>wx/button.h</label>
      </node>
      <node id="57038">
        <label>MemoryX.h</label>
        <link refid="_memory_x_8h"/>
        <childnode refid="57039" relation="include">
        </childnode>
      </node>
      <node id="57118">
        <label>ShuttleGui.h</label>
        <link refid="_shuttle_gui_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57119" relation="include">
        </childnode>
        <childnode refid="57077" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57120" relation="include">
        </childnode>
        <childnode refid="57076" relation="include">
        </childnode>
      </node>
      <node id="57068">
        <label>wx/spinctrl.h</label>
      </node>
      <node id="57191">
        <label>Cursors32/DisabledCursor.xpm</label>
      </node>
      <node id="57155">
        <label>widgets/FileHistory.h</label>
        <link refid="_file_history_8h"/>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57156" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57119" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
      </node>
      <node id="57170">
        <label>set</label>
      </node>
      <node id="57177">
        <label>Menus.h</label>
        <link refid="_menus_8h"/>
        <childnode refid="57035" relation="include">
        </childnode>
      </node>
      <node id="57147">
        <label>wx/app.h</label>
        <link refid="app_8h"/>
      </node>
      <node id="57060">
        <label>wx/longlong.h</label>
      </node>
      <node id="57042">
        <label>wx/panel.h</label>
      </node>
      <node id="57126">
        <label>WaveTrack.h</label>
        <link refid="_wave_track_8h"/>
        <childnode refid="57058" relation="include">
        </childnode>
        <childnode refid="57061" relation="include">
        </childnode>
        <childnode refid="57127" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57128" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57059" relation="include">
        </childnode>
        <childnode refid="57060" relation="include">
        </childnode>
        <childnode refid="57092" relation="include">
        </childnode>
        <childnode refid="57056" relation="include">
        </childnode>
      </node>
      <node id="57082">
        <label>wx/bitmap.h</label>
      </node>
      <node id="57095">
        <label>algorithm</label>
      </node>
      <node id="57124">
        <label>UndoManager.h</label>
        <link refid="_undo_manager_8h"/>
        <childnode refid="57038" relation="include">
        </childnode>
        <childnode refid="57040" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57125" relation="include">
        </childnode>
        <childnode refid="57053" relation="include">
        </childnode>
      </node>
      <node id="57189">
        <label>toolbars/ToolsToolBar.h</label>
        <link refid="_tools_tool_bar_8h"/>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57188" relation="include">
        </childnode>
        <childnode refid="57087" relation="include">
        </childnode>
      </node>
      <node id="57063">
        <label>stdio.h</label>
      </node>
      <node id="57108">
        <label>wx/version.h</label>
      </node>
      <node id="57052">
        <label>wx/textctrl.h</label>
      </node>
      <node id="57061">
        <label>SampleFormat.h</label>
        <link refid="_sample_format_8h"/>
        <childnode refid="57034" relation="include">
        </childnode>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57045" relation="include">
        </childnode>
      </node>
      <node id="57163">
        <label>locale.h</label>
      </node>
      <node id="57150">
        <label>wx/docview.h</label>
      </node>
      <node id="57190">
        <label>../images/Cursors.h</label>
        <link refid="_cursors_8h"/>
        <childnode refid="57191" relation="include">
        </childnode>
        <childnode refid="57192" relation="include">
        </childnode>
        <childnode refid="57193" relation="include">
        </childnode>
        <childnode refid="57194" relation="include">
        </childnode>
        <childnode refid="57195" relation="include">
        </childnode>
        <childnode refid="57196" relation="include">
        </childnode>
        <childnode refid="57197" relation="include">
        </childnode>
        <childnode refid="57198" relation="include">
        </childnode>
        <childnode refid="57199" relation="include">
        </childnode>
        <childnode refid="57200" relation="include">
        </childnode>
        <childnode refid="57201" relation="include">
        </childnode>
        <childnode refid="57202" relation="include">
        </childnode>
      </node>
      <node id="57041">
        <label>wx/dcmemory.h</label>
      </node>
      <node id="57081">
        <label>widgets/Ruler.h</label>
        <link refid="_ruler_8h"/>
        <childnode refid="57082" relation="include">
        </childnode>
        <childnode refid="57083" relation="include">
        </childnode>
        <childnode refid="57041" relation="include">
        </childnode>
        <childnode refid="57050" relation="include">
        </childnode>
        <childnode refid="57075" relation="include">
        </childnode>
        <childnode refid="57042" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
      </node>
      <node id="57039">
        <label>memory</label>
      </node>
      <node id="57064">
        <label>XMLWriter.h</label>
        <link refid="_x_m_l_writer_8h"/>
        <childnode refid="57047" relation="include">
        </childnode>
        <childnode refid="57049" relation="include">
        </childnode>
        <childnode refid="57065" relation="include">
        </childnode>
      </node>
      <node id="57182">
        <label>prefs/SpectrumPrefs.h</label>
        <link refid="_spectrum_prefs_8h"/>
        <childnode refid="57036" relation="include">
        </childnode>
        <childnode refid="57046" relation="include">
        </childnode>
        <childnode refid="57044" relation="include">
        </childnode>
        <childnode refid="57035" relation="include">
        </childnode>
        <childnode refid="57183" relation="include">
        </childnode>
        <childnode refid="57184" relation="include">
        </childnode>
      </node>
      <node id="57143">
        <label>AudioIOListener.h</label>
        <link refid="_audio_i_o_listener_8h"/>
        <childnode refid="57046" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innerclass refid="class_view_settings_dialog" prot="public">ViewSettingsDialog</innerclass>
    <innerclass refid="class_track_panel_font_enumerator" prot="public">TrackPanelFontEnumerator</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" prot="public" static="no">
        <name>ZOOMLIMIT</name>
        <initializer>0.001f</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="198" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="198" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="enum">
      <memberdef kind="enum" id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796" prot="public" static="no">
        <name>@347</name>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" prot="public">
          <name>kLeftInset</name>
          <initializer>= 4</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796aab9a830c18ced8b35e7ea11354f1e168" prot="public">
          <name>kRightInset</name>
          <initializer>= kLeftInset</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" prot="public">
          <name>kTopInset</name>
          <initializer>= 4</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" prot="public">
          <name>kShadowThickness</name>
          <initializer>= 1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" prot="public">
          <name>kBorderThickness</name>
          <initializer>= 1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" prot="public">
          <name>kTopMargin</name>
          <initializer>= kTopInset + kBorderThickness</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" prot="public">
          <name>kBottomMargin</name>
          <initializer>= kShadowThickness + kBorderThickness</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ad2ccfac30caa5459ba58082187577146" prot="public">
          <name>kLeftMargin</name>
          <initializer>= kLeftInset + kBorderThickness</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" prot="public">
          <name>kRightMargin</name>
          <initializer>= kRightInset + kShadowThickness + kBorderThickness</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a004ffd768278ee9c9a78ae35835fdc85" prot="public">
          <name>kTimerInterval</name>
          <initializer>= 50</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ac22796cffaa71790d270ae6de466774b" prot="public">
          <name>kOneSecondCountdown</name>
          <initializer>= 1000 / kTimerInterval</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="258" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="258" bodyend="271"/>
      </memberdef>
      <memberdef kind="enum" id="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855" prot="public" static="no">
        <name>@348</name>
        <enumvalue id="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a485b14b589ff0ea3f160823d54d4ccce" prot="public">
          <name>SCRUBBING_PIXEL_TOLERANCE</name>
          <initializer>= 10</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a5ce300bd11671e2ae59e9a91a4bf8739" prot="public">
          <name>ScrubSpeedStepsPerOctave</name>
          <initializer>= 4</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="273" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="273" bodyend="282"/>
      </memberdef>
      <memberdef kind="enum" id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61" prot="public" static="no">
        <name>@349</name>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7007a1d7117eaad547371b1a2f8638f6" prot="public">
          <name>TrackPanelFirstID</name>
          <initializer>= 2000</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ddaba585f35e22fbb4ce7f017f0b6ad" prot="public">
          <name>OnSetNameID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae7dbe59e412e660607ddb28cb03b4464" prot="public">
          <name>OnSetFontID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad781ffda3075b971f26483311fe506ae" prot="public">
          <name>OnMoveUpID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ab184908e548cefe0ea27c0f12390c0f8" prot="public">
          <name>OnMoveDownID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac4946484a27cc46670834bdc3d8e08ab" prot="public">
          <name>OnMoveTopID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2f1133cee583410fe1121f57980b5add" prot="public">
          <name>OnMoveBottomID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6cc8f9ad4c0ff6600f9cbb53262149fc" prot="public">
          <name>OnUpOctaveID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8a40c66fb44fb22922b2c4fbc43d5a04" prot="public">
          <name>OnDownOctaveID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeae4ed7d29cbab95d9c2cdbd4c72e57c" prot="public">
          <name>OnChannelLeftID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" prot="public">
          <name>OnChannelRightID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeb81f02f8b3e274935d4b9fa864765c1" prot="public">
          <name>OnChannelMonoID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aefb7e2e0c50a86122b83fa8b8dd68086" prot="public">
          <name>OnRate8ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61afbcef4e96d17e895132d32d02f0b133d" prot="public">
          <name>OnRate11ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a01d127b3730f3daf3115bf2cc47e3adb" prot="public">
          <name>OnRate16ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad3a7b24424c05a64f2ad83e5c7fb1171" prot="public">
          <name>OnRate22ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8de06b9867cde6dcdb488ace78edc2f0" prot="public">
          <name>OnRate44ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a763096bb423ae3950b350cefaad7f7fb" prot="public">
          <name>OnRate48ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4a10baf94dcf8075ec10cf1446c0448e" prot="public">
          <name>OnRate88ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af233bbad81c8dff20587b379df8142e5" prot="public">
          <name>OnRate96ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4867d65750c43bab28e67527676f8278" prot="public">
          <name>OnRate176ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a606bab1ae8b3a2edd7ce4bff1eedb6d8" prot="public">
          <name>OnRate192ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a087627b6f2b7b8345efa8f4d9fd6a495" prot="public">
          <name>OnRate352ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8af9906f0e3a387c143c3a758701fe9e" prot="public">
          <name>OnRate384ID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aa34e718ffff0fb7f81dd5df722344674" prot="public">
          <name>OnRateOtherID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a277454ef2627523e78245ea07550f9dc" prot="public">
          <name>On16BitID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac7e189eced3f209bb48e606b166b8fea" prot="public">
          <name>On24BitID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4f7cdf8dd4dcce5be8d8cd972e3de710" prot="public">
          <name>OnFloatID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac08c6b7ae5c6e30226f7512ff0123037" prot="public">
          <name>OnWaveformID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a86c5bfe045792bba915af0d2cceb53da" prot="public">
          <name>OnWaveformDBID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac914784d8cbbb1789af612dc70e06acd" prot="public">
          <name>OnSpectrumID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae58578c1d0f405fa039fa34d20fc8a9d" prot="public">
          <name>OnSpectrogramSettingsID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aaa68f7243bd4c74caf5402a8c4a96dfb" prot="public">
          <name>OnSplitStereoID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a74c22f542d18fb7ee573748a4669ec1a" prot="public">
          <name>OnSplitStereoMonoID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ad784ff9ce99b40087f63dff61b282e" prot="public">
          <name>OnMergeStereoID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af589f96236ab336de6fe1de0b2e071d6" prot="public">
          <name>OnSwapChannelsID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af67502b033a66614e9c7d0682094c61b" prot="public">
          <name>OnSetTimeTrackRangeID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a5a5f9a31d18e3ef8bd32400f8504f856" prot="public">
          <name>OnTimeTrackLinID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aab54102776a5a7d34947f83e180cb3e4" prot="public">
          <name>OnTimeTrackLogID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a47b3a9c92aebd73eb16c9ecc40144ac3" prot="public">
          <name>OnTimeTrackLogIntID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad8599d18e8a5c41d385547ef7a321874" prot="public">
          <name>OnFirstWaveformScaleID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a0c513e949c529583013efd63a1e88dcc" prot="public">
          <name>OnLastWaveformScaleID</name>
          <initializer>= OnFirstWaveformScaleID + 9</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1cb27731327caaf24bf61d12a07f75ff" prot="public">
          <name>OnFirstSpectrumScaleID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2137c31bab5da20c0370631bfe4d75f2" prot="public">
          <name>OnLastSpectrumScaleID</name>
          <initializer>= OnFirstSpectrumScaleID + 19</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae656e0beae2fdd9c0e1d5f09cfc3fff3" prot="public">
          <name>OnZoomInVerticalID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1efe09881810d5a0a6d6d57355bed707" prot="public">
          <name>OnZoomOutVerticalID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6be651161f793f51d95679059fcfb57a" prot="public">
          <name>OnZoomFitVerticalID</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="310" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="310" bodyend="372"/>
      </memberdef>
      <memberdef kind="enum" id="_track_panel_8cpp_1ad2d3a7869c500e9ee6bfbdcc1cd8ff46" prot="public" static="no">
        <name>@350</name>
        <enumvalue id="_track_panel_8cpp_1ad2d3a7869c500e9ee6bfbdcc1cd8ff46abab198a93564721fbb1b49be9dbe2b30" prot="public">
          <name>FREQ_SNAP_DISTANCE</name>
          <initializer>= 10</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="3426" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="3426" bodyend="3426"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="_track_panel_8cpp_1a63096d6582a75d647088db680060c12a" prot="public" static="no" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char *</type>
        <definition>const char* pXpm[36]</definition>
        <argsstring>[36]</argsstring>
        <name>pXpm</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="421" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="421" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1a8e3bc98230a8c07cf1fa538be2180afb" prot="public" static="no" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>const char int HotX</definition>
        <argsstring></argsstring>
        <name>HotX</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="421" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="421" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1a9614b5e020cb0112ddffb09edf5f6253" prot="public" static="no" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>const char int int HotY</definition>
        <argsstring></argsstring>
        <name>HotY</name>
        <initializer>{
   wxCursor * <ref refid="_track_panel_8cpp_1a05b64122c94645f8a4cefd4d93b47f1e" kindref="member">pCursor</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="421" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="422" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1ad5bc86b19e27ab2dabb6581286ed059c" prot="public" static="no" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>const int HotAdjust</definition>
        <argsstring></argsstring>
        <name>HotAdjust</name>
        <initializer>=0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="426" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="426" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" prot="public" static="no" mutable="no">
        <type>wxImage</type>
        <definition>wxImage Image</definition>
        <argsstring></argsstring>
        <name>Image</name>
        <initializer>= wxImage(wxBitmap(<ref refid="_track_panel_8cpp_1a63096d6582a75d647088db680060c12a" kindref="member">pXpm</ref>).ConvertToImage())</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="431" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="431" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1a05b64122c94645f8a4cefd4d93b47f1e" prot="public" static="no" mutable="no">
        <type></type>
        <definition>return pCursor</definition>
        <argsstring></argsstring>
        <name>pCursor</name>
        <initializer>= new wxCursor( <ref refid="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" kindref="member">Image</ref> )</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="437" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="437" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1ad49ec371d0c77a469cc14aa6f44b232e" prot="public" static="yes" mutable="no">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int channels[]</definition>
        <argsstring>[]</argsstring>
        <name>channels</name>
        <initializer>= { <ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fa4cc8a2bb7bc243eab53ba2abd757d9da" kindref="member">Track::LeftChannel</ref>, <ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362faa9c6ea023df4504361ffa1a31238c87e" kindref="member">Track::RightChannel</ref>,
   <ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fad1d594e80888976c85f7a4a258dc2f19" kindref="member">Track::MonoChannel</ref>
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Handle the menu options that change a track between left channel, right channel, and mono. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="8680" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="8680" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1a2dccf4fa5b36d427149cdef1e5b1854c" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> wxChar *</type>
        <definition>const wxChar* channelmsgs[]</definition>
        <argsstring>[]</argsstring>
        <name>channelmsgs</name>
        <initializer>= { <ref refid="vr32_8c_1ae4dfd7b0d66121016d6466d2ff10e8ba" kindref="member">_</ref>(&quot;Left Channel&quot;), _(&quot;Right Channel&quot;),
   _(&quot;Mono&quot;)
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="8684" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="8684" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1a3de95f88110d982efab006ba65ba37ec" prot="public" static="no" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>const int nRates</definition>
        <argsstring></argsstring>
        <name>nRates</name>
        <initializer>=12</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="9049" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="9049" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1a7576910e342b0fad98cb94bd81a031cf" prot="public" static="yes" mutable="no">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int gRates[nRates]</definition>
        <argsstring>[nRates]</argsstring>
        <name>gRates</name>
        <initializer>= { 8000, 11025, 16000, 22050, 44100, 48000, 88200, 96000,
                       176400, 192000, 352800, 384000 }</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>gRates MUST CORRESPOND DIRECTLY TO THE RATES AS LISTED IN THE MENU!! IN THE SAME ORDER!! </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="9053" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="9053" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1a5a1a6983f9a8b5ab92b35ed29f708e07" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>const int kTrackInfoWidth</definition>
        <argsstring></argsstring>
        <name>kTrackInfoWidth</name>
        <initializer>= 100</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="9695" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="9695" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="_track_panel_8cpp_1af290c1270e71b58117918781bc92ded6" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>const int kTrackInfoBtnSize</definition>
        <argsstring></argsstring>
        <name>kTrackInfoBtnSize</name>
        <initializer>= 16</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="9696" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="9696" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>class <ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a955f504eccf76b4eb2489c0adab03121" kindref="member">A</ref></type>
          </param>
          <param>
            <type>class <ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a111da81ae5883147168bbb8366377b10" kindref="member">B</ref></type>
          </param>
          <param>
            <type>class DIST</type>
          </param>
        </templateparamlist>
        <type><ref refid="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
        <definition>bool within</definition>
        <argsstring>(A a, B b, DIST d)</argsstring>
        <name>within</name>
        <param>
          <type><ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a955f504eccf76b4eb2489c0adab03121" kindref="member">A</ref></type>
          <declname>a</declname>
        </param>
        <param>
          <type><ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a111da81ae5883147168bbb8366377b10" kindref="member">B</ref></type>
          <declname>b</declname>
        </param>
        <param>
          <type>DIST</type>
          <declname>d</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="285" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="285" bodyend="288"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>class LOW</type>
          </param>
          <param>
            <type>class MID</type>
          </param>
          <param>
            <type>class HIGH</type>
          </param>
        </templateparamlist>
        <type><ref refid="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
        <definition>bool between_incexc</definition>
        <argsstring>(LOW l, MID m, HIGH h)</argsstring>
        <name>between_incexc</name>
        <param>
          <type>LOW</type>
          <declname>l</declname>
        </param>
        <param>
          <type>MID</type>
          <declname>m</declname>
        </param>
        <param>
          <type>HIGH</type>
          <declname>h</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="291" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="291" bodyend="294"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1ae727a553a0cbf21f301b84a544c70aca" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>class CLIPPEE</type>
          </param>
          <param>
            <type>class CLIPVAL</type>
          </param>
        </templateparamlist>
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void clip_top</definition>
        <argsstring>(CLIPPEE &amp;clippee, CLIPVAL val)</argsstring>
        <name>clip_top</name>
        <param>
          <type>CLIPPEE &amp;</type>
          <declname>clippee</declname>
        </param>
        <param>
          <type>CLIPVAL</type>
          <declname>val</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="297" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="297" bodyend="301"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1aeb6c6687a1c2f164448cdd651d694849" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>class CLIPPEE</type>
          </param>
          <param>
            <type>class CLIPVAL</type>
          </param>
        </templateparamlist>
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void clip_bottom</definition>
        <argsstring>(CLIPPEE &amp;clippee, CLIPVAL val)</argsstring>
        <name>clip_bottom</name>
        <param>
          <type>CLIPPEE &amp;</type>
          <declname>clippee</declname>
        </param>
        <param>
          <type>CLIPVAL</type>
          <declname>val</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="304" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="304" bodyend="308"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>EVT_MENU_RANGE</definition>
        <argsstring>(OnChannelLeftID, OnChannelMonoID, TrackPanel::OnChannelChange) wxCursor *MakeCursor(int WXUNUSED(CursorId)</argsstring>
        <name>EVT_MENU_RANGE</name>
        <param>
          <type><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeae4ed7d29cbab95d9c2cdbd4c72e57c" kindref="member">OnChannelLeftID</ref></type>
        </param>
        <param>
          <type><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeb81f02f8b3e274935d4b9fa864765c1" kindref="member">OnChannelMonoID</ref></type>
        </param>
        <param>
          <type><ref refid="class_track_panel_1aa575d9021c5b4893cd4020a1becf498d" kindref="member">TrackPanel::OnChannelChange</ref></type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Makes a cursor from an XPM, uses CursorId as a fallback. TODO: Move this function to some other source file for reuse elsewhere. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="393" column="1"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1a14453f00b9411c0791353c15fc6d9990" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" kindref="member">Image</ref></type>
        <definition>Image SetMaskColour</definition>
        <argsstring>(255, 0, 0)</argsstring>
        <name>SetMaskColour</name>
        <param>
          <type>255</type>
        </param>
        <param>
          <type>0</type>
        </param>
        <param>
          <type>0</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="432" column="1"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1a798fca3c5159f3a011132156bc4f56aa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" kindref="member">Image</ref></type>
        <definition>Image SetMask</definition>
        <argsstring>()</argsstring>
        <name>SetMask</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="433" column="1"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1a74a65b060223e97138bf395172ca2520" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" kindref="member">Image</ref></type>
        <definition>Image SetOption</definition>
        <argsstring>(wxIMAGE_OPTION_CUR_HOTSPOT_X, HotX-HotAdjust)</argsstring>
        <name>SetOption</name>
        <param>
          <type>wxIMAGE_OPTION_CUR_HOTSPOT_X</type>
        </param>
        <param>
          <type><ref refid="_track_panel_8cpp_1a8e3bc98230a8c07cf1fa538be2180afb" kindref="member">HotX</ref>-</type>
          <declname>HotAdjust</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="435" column="1"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1afe73cd8abf3b46ca6b5501768ad042f2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" kindref="member">Image</ref></type>
        <definition>Image SetOption</definition>
        <argsstring>(wxIMAGE_OPTION_CUR_HOTSPOT_Y, HotY-HotAdjust)</argsstring>
        <name>SetOption</name>
        <param>
          <type>wxIMAGE_OPTION_CUR_HOTSPOT_Y</type>
        </param>
        <param>
          <type><ref refid="_track_panel_8cpp_1a9614b5e020cb0112ddffb09edf5f6253" kindref="member">HotY</ref>-</type>
          <declname>HotAdjust</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="436" column="1"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>typename <ref refid="xmltchar_8h_1a16a0f7e7053a679c9bf4289b441a2be7" kindref="member">T</ref></type>
          </param>
        </templateparamlist>
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void SetIfNotNull</definition>
        <argsstring>(T *pValue, const T Value)</argsstring>
        <name>SetIfNotNull</name>
        <param>
          <type><ref refid="xmltchar_8h_1a16a0f7e7053a679c9bf4289b441a2be7" kindref="member">T</ref> *</type>
          <declname>pValue</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="xmltchar_8h_1a16a0f7e7053a679c9bf4289b441a2be7" kindref="member">T</ref></type>
          <declname>Value</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="3472" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="3472" bodyend="3477"/>
      </memberdef>
      <memberdef kind="function" id="_track_panel_8cpp_1ae391a05b5b5e2cb264b542243f7f7c86" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_track_panel" kindref="compound">TrackPanel</ref> *</type>
        <definition>static TrackPanel* TrackPanelFactory</definition>
        <argsstring>(wxWindow *parent, wxWindowID id, const wxPoint &amp;pos, const wxSize &amp;size, TrackList *tracks, ViewInfo *viewInfo, TrackPanelListener *listener, AdornedRulerPanel *ruler)</argsstring>
        <name>TrackPanelFactory</name>
        <param>
          <type>wxWindow *</type>
          <declname>parent</declname>
        </param>
        <param>
          <type>wxWindowID</type>
          <declname>id</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> wxPoint &amp;</type>
          <declname>pos</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> wxSize &amp;</type>
          <declname>size</declname>
        </param>
        <param>
          <type><ref refid="class_track_list" kindref="compound">TrackList</ref> *</type>
          <declname>tracks</declname>
        </param>
        <param>
          <type><ref refid="class_view_info" kindref="compound">ViewInfo</ref> *</type>
          <declname>viewInfo</declname>
        </param>
        <param>
          <type><ref refid="class_track_panel_listener" kindref="compound">TrackPanelListener</ref> *</type>
          <declname>listener</declname>
        </param>
        <param>
          <type><ref refid="class_adorned_ruler_panel" kindref="compound">AdornedRulerPanel</ref> *</type>
          <declname>ruler</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" line="10063" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp" bodystart="10063" bodyend="10082"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>Implements <ref refid="class_track_panel" kindref="compound">TrackPanel</ref> and <ref refid="class_track_info" kindref="compound">TrackInfo</ref>. </para>    </briefdescription>
    <detaileddescription>
<para><xrefsect id="todo_1_todo000052"><xreftitle>Todo</xreftitle><xrefdescription><para>Refactoring of the <ref refid="class_track_panel" kindref="compound">TrackPanel</ref>, possibly as described in <ref refid="TrackPanelRefactor" kindref="compound">Track Panel Refactor</ref></para></xrefdescription></xrefsect></para><para><ref refid="_track_panel_8cpp" kindref="compound">TrackPanel.cpp</ref> is currently some of the worst code in Audacity. It&apos;s not really unreadable, there&apos;s just way too much stuff in this one file. Rather than apply a quick fix, the long-term plan is to create a GUITrack class that knows how to draw itself and handle events. Then this class just helps coordinate between tracks.</para><para>Plans under discussion are described in <ref refid="TrackPanelRefactor" kindref="compound">Track Panel Refactor</ref> </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment"></highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/><sp/>Audacity:<sp/>A<sp/>Digital<sp/>Audio<sp/>Editor</highlight></codeline>
<codeline lineno="4"><highlight class="comment"></highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/><sp/>TrackPanel.cpp</highlight></codeline>
<codeline lineno="6"><highlight class="comment"></highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/><sp/>Dominic<sp/>Mazzoni</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/><sp/>and<sp/>lots<sp/>of<sp/>other<sp/>contributors</highlight></codeline>
<codeline lineno="9"><highlight class="comment"></highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/><sp/>Implements<sp/>TrackPanel<sp/>and<sp/>TrackInfo.</highlight></codeline>
<codeline lineno="11"><highlight class="comment"></highlight></codeline>
<codeline lineno="12"><highlight class="comment">********************************************************************/</highlight><highlight class="comment">/*****************************************************************/</highlight><highlight class="comment">/********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Documentation:<sp/>Rather<sp/>than<sp/>have<sp/>a<sp/>lengthy<sp/>\todo<sp/>section,<sp/>having</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="comment">//<sp/>a<sp/>\todo<sp/>a<sp/>\file<sp/>and<sp/>a<sp/>\page<sp/>in<sp/>EXACTLY<sp/>that<sp/>order<sp/>gets<sp/>Doxygen<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">//<sp/>put<sp/>the<sp/>following<sp/>lengthy<sp/>description<sp/>of<sp/>refactoring<sp/>on<sp/>a<sp/>NEW<sp/>page</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="comment">//<sp/>and<sp/>link<sp/>to<sp/>it<sp/>from<sp/>the<sp/>docs.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="comment">/*****************************************************************/</highlight><highlight class="comment">/*****************************************************************/</highlight><highlight class="comment">/**************************************************************/</highlight><highlight class="comment">/**************************************************************/</highlight><highlight class="comment">/**************************************************************/</highlight><highlight class="comment">/**************************************************************/</highlight><highlight class="comment">/**************************************************************/</highlight><highlight class="comment">/*****************************************************************/</highlight><highlight class="comment">/*****************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_audacity_8h" kindref="compound">Audacity.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_experimental_8h" kindref="compound">Experimental.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_track_panel_8h" kindref="compound">TrackPanel.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight><highlight class="comment">//#define<sp/>DEBUG_DRAW_TIMING<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="comment">//<sp/>#define<sp/>SPECTRAL_EDITING_ESC_KEY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;wx/fontenum.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;wx/numdlg.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;wx/spinctrl.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_freq_window_8h" kindref="compound">FreqWindow.h</ref>&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>for<sp/>SpectrumAnalyst</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_a_color_8h" kindref="compound">AColor.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_all_theme_resources_8h" kindref="compound">AllThemeResources.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_audio_i_o_8h" kindref="compound">AudioIO.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="src_2_envelope_8h" kindref="compound">Envelope.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="float__cast_8h" kindref="compound">float_cast.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_label_track_8h" kindref="compound">LabelTrack.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_mixer_board_8h" kindref="compound">MixerBoard.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_note_track_8h" kindref="compound">NoteTrack.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_number_scale_8h" kindref="compound">NumberScale.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_prefs_8h" kindref="compound">Prefs.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_snap_8h" kindref="compound">Snap.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_shuttle_gui_8h" kindref="compound">ShuttleGui.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_time_track_8h" kindref="compound">TimeTrack.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_track_artist_8h" kindref="compound">TrackArtist.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_track_panel_ax_8h" kindref="compound">TrackPanelAx.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_undo_manager_8h" kindref="compound">UndoManager.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_wave_track_8h" kindref="compound">WaveTrack.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_keyboard_8h" kindref="compound">commands/Keyboard.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_o_d_manager_8h" kindref="compound">ondemand/ODManager.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_prefs_dialog_8h" kindref="compound">prefs/PrefsDialog.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_spectrum_prefs_8h" kindref="compound">prefs/SpectrumPrefs.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_waveform_prefs_8h" kindref="compound">prefs/WaveformPrefs.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_control_tool_bar_8h" kindref="compound">toolbars/ControlToolBar.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_tools_tool_bar_8h" kindref="compound">toolbars/ToolsToolBar.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198" refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ZOOMLIMIT<sp/>0.001f</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight><highlight class="comment">//This<sp/>loads<sp/>the<sp/>appropriate<sp/>set<sp/>of<sp/>cursors,<sp/>depending<sp/>on<sp/>platform.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;../images/Cursors.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><ref refid="_audacity_app_8cpp_1acc4d5c7c1aac56df05e7969028118e4b" kindref="member">DEFINE_EVENT_TYPE</ref>(EVT_TRACK_PANEL_TIMER)</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="206"><highlight class="comment"></highlight></codeline>
<codeline lineno="207"><highlight class="comment">This<sp/>is<sp/>a<sp/>diagram<sp/>of<sp/>TrackPanel&apos;s<sp/>division<sp/>of<sp/>one<sp/>(non-stereo)<sp/>track<sp/>rectangle.</highlight></codeline>
<codeline lineno="208"><highlight class="comment">Total<sp/>height<sp/>equals<sp/>Track::GetHeight()&apos;s<sp/>value.<sp/><sp/>Total<sp/>width<sp/>is<sp/>the<sp/>wxWindow&apos;s<sp/>width.</highlight></codeline>
<codeline lineno="209"><highlight class="comment">Each<sp/>charater<sp/>that<sp/>is<sp/>not<sp/>.<sp/>represents<sp/>one<sp/>pixel.</highlight></codeline>
<codeline lineno="210"><highlight class="comment"></highlight></codeline>
<codeline lineno="211"><highlight class="comment">Inset<sp/>space<sp/>of<sp/>this<sp/>track,<sp/>and<sp/>top<sp/>inset<sp/>of<sp/>the<sp/>next<sp/>track,<sp/>are<sp/>used<sp/>to<sp/>draw<sp/>the<sp/>focus<sp/>highlight.</highlight></codeline>
<codeline lineno="212"><highlight class="comment"></highlight></codeline>
<codeline lineno="213"><highlight class="comment">Top<sp/>inset<sp/>of<sp/>the<sp/>right<sp/>channel<sp/>of<sp/>a<sp/>stereo<sp/>track,<sp/>and<sp/>bottom<sp/>shadow<sp/>line<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="214"><highlight class="comment">left<sp/>channel,<sp/>are<sp/>used<sp/>for<sp/>the<sp/>channel<sp/>separator.</highlight></codeline>
<codeline lineno="215"><highlight class="comment"></highlight></codeline>
<codeline lineno="216"><highlight class="comment">TrackInfo::GetTrackInfoWidth()<sp/>==<sp/>GetVRulerOffset()</highlight></codeline>
<codeline lineno="217"><highlight class="comment">counts<sp/>columns<sp/>from<sp/>the<sp/>left<sp/>edge<sp/>up<sp/>to<sp/>and<sp/>including<sp/>controls,<sp/>and<sp/>is<sp/>a<sp/>constant.</highlight></codeline>
<codeline lineno="218"><highlight class="comment"></highlight></codeline>
<codeline lineno="219"><highlight class="comment">GetVRulerWidth()<sp/>is<sp/>variable<sp/>--<sp/>all<sp/>tracks<sp/>have<sp/>the<sp/>same<sp/>ruler<sp/>width<sp/>at<sp/>any<sp/>time,</highlight></codeline>
<codeline lineno="220"><highlight class="comment">but<sp/>that<sp/>width<sp/>may<sp/>be<sp/>adjusted<sp/>when<sp/>tracks<sp/>change<sp/>their<sp/>vertical<sp/>scales.</highlight></codeline>
<codeline lineno="221"><highlight class="comment"></highlight></codeline>
<codeline lineno="222"><highlight class="comment">GetLabelWidth()<sp/>counts<sp/>columns<sp/>up<sp/>to<sp/>and<sp/>including<sp/>the<sp/>VRuler.</highlight></codeline>
<codeline lineno="223"><highlight class="comment">GetLeftOffset()<sp/>is<sp/>yet<sp/>one<sp/>more<sp/>--<sp/>it<sp/>counts<sp/>the<sp/>&quot;one<sp/>pixel&quot;<sp/>column.</highlight></codeline>
<codeline lineno="224"><highlight class="comment"></highlight></codeline>
<codeline lineno="225"><highlight class="comment">FindTrack()<sp/>for<sp/>label<sp/>returns<sp/>a<sp/>rectangle<sp/>up<sp/>to<sp/>and<sp/>including<sp/>the<sp/>One<sp/>Pixel<sp/>column,</highlight></codeline>
<codeline lineno="226"><highlight class="comment">but<sp/>OMITS<sp/>left<sp/>and<sp/>top<sp/>insets</highlight></codeline>
<codeline lineno="227"><highlight class="comment"></highlight></codeline>
<codeline lineno="228"><highlight class="comment">FindTrack()<sp/>for<sp/>!label<sp/>returns<sp/>a<sp/>rectangle<sp/>with<sp/>x<sp/>==<sp/>GetLeftOffset(),<sp/>and<sp/>INCLUDES</highlight></codeline>
<codeline lineno="229"><highlight class="comment">right<sp/>and<sp/>top<sp/>insets</highlight></codeline>
<codeline lineno="230"><highlight class="comment"></highlight></codeline>
<codeline lineno="231"><highlight class="comment">+---------------<sp/>...<sp/>------<sp/>...<sp/>---------------------<sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>-------------+</highlight></codeline>
<codeline lineno="232"><highlight class="comment">|<sp/>Top<sp/>Inset<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|</highlight></codeline>
<codeline lineno="233"><highlight class="comment">|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|</highlight></codeline>
<codeline lineno="234"><highlight class="comment">|<sp/><sp/>+------------<sp/>...<sp/>------<sp/>...<sp/>---------------------<sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>----------+<sp/><sp/>|</highlight></codeline>
<codeline lineno="235"><highlight class="comment">|<sp/>L|+-Border----<sp/>...<sp/>------<sp/>...<sp/>---------------------<sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>-Border-+<sp/>|R<sp/>|</highlight></codeline>
<codeline lineno="236"><highlight class="comment">|<sp/>e||+----------<sp/>...<sp/>-++---<sp/>...<sp/>-+++-----------------<sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>-------+|<sp/>|i<sp/>|</highlight></codeline>
<codeline lineno="237"><highlight class="comment">|<sp/>f|B|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|BS|g<sp/>|</highlight></codeline>
<codeline lineno="238"><highlight class="comment">|<sp/>t|o|<sp/>Controls<sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>V<sp/><sp/><sp/><sp/><sp/><sp/><sp/>|O|<sp/><sp/>The<sp/>good<sp/>stuff<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|oh|h<sp/>|</highlight></codeline>
<codeline lineno="239"><highlight class="comment">|<sp/><sp/>|r|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>R<sp/><sp/><sp/><sp/><sp/><sp/><sp/>|n|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|ra|t<sp/>|</highlight></codeline>
<codeline lineno="240"><highlight class="comment">|<sp/>I|d|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>u<sp/><sp/><sp/><sp/><sp/><sp/><sp/>|e|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|dd|<sp/><sp/>|</highlight></codeline>
<codeline lineno="241"><highlight class="comment">|<sp/>n|e|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>l<sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/>|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|eo|I<sp/>|</highlight></codeline>
<codeline lineno="242"><highlight class="comment">|<sp/>s|r|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>e<sp/><sp/><sp/><sp/><sp/><sp/><sp/>|P|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|rw|n<sp/>|</highlight></codeline>
<codeline lineno="243"><highlight class="comment">|<sp/>e|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>r<sp/><sp/><sp/><sp/><sp/><sp/><sp/>|i|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||||s<sp/>|</highlight></codeline>
<codeline lineno="244"><highlight class="comment">|<sp/>t|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|x|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||||e<sp/>|</highlight></codeline>
<codeline lineno="245"><highlight class="comment">|<sp/><sp/>|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|e|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||||t<sp/>|</highlight></codeline>
<codeline lineno="246"><highlight class="comment">|<sp/><sp/>|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|l|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||||<sp/><sp/>|</highlight></codeline>
<codeline lineno="247"><highlight class="comment">|<sp/><sp/>|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||||<sp/><sp/>|</highlight></codeline>
<codeline lineno="248"><highlight class="comment"></highlight></codeline>
<codeline lineno="249"><highlight class="comment">.<sp/><sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>..<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>....<sp/><sp/>.</highlight></codeline>
<codeline lineno="250"><highlight class="comment">.<sp/><sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>..<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>....<sp/><sp/>.</highlight></codeline>
<codeline lineno="251"><highlight class="comment">.<sp/><sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>..<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>....<sp/><sp/>.</highlight></codeline>
<codeline lineno="252"><highlight class="comment"></highlight></codeline>
<codeline lineno="253"><highlight class="comment">|<sp/><sp/>|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|||<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||||<sp/><sp/>|</highlight></codeline>
<codeline lineno="254"><highlight class="comment">|<sp/><sp/>||+----------<sp/><sp/><sp/><sp/><sp/>-++--<sp/><sp/>...<sp/>-+++-----------------<sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>-------+|||<sp/><sp/>|</highlight></codeline>
<codeline lineno="255"><highlight class="comment">|<sp/><sp/>|+-Border----<sp/>...<sp/>-----<sp/><sp/>...<sp/>---------------------<sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>-Border-+||<sp/><sp/>|</highlight></codeline>
<codeline lineno="256"><highlight class="comment">|<sp/><sp/>|<sp/><sp/>Shadow----<sp/>...<sp/>-----<sp/><sp/>...<sp/>---------------------<sp/>...<sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>--Shadow-+|<sp/><sp/>|</highlight></codeline>
<codeline lineno="257"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal">enum<sp/>{</highlight></codeline>
<codeline lineno="259" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref><sp/>=<sp/>4,</highlight></codeline>
<codeline lineno="260" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796aab9a830c18ced8b35e7ea11354f1e168" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796aab9a830c18ced8b35e7ea11354f1e168" kindref="member">kRightInset</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>,</highlight></codeline>
<codeline lineno="261" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref><sp/>=<sp/>4,</highlight></codeline>
<codeline lineno="262" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" kindref="member">kShadowThickness</ref><sp/>=<sp/>1,</highlight></codeline>
<codeline lineno="263" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" kindref="member">kBorderThickness</ref><sp/>=<sp/>1,</highlight></codeline>
<codeline lineno="264" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" kindref="member">kBorderThickness</ref>,</highlight></codeline>
<codeline lineno="265" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" kindref="member">kShadowThickness</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" kindref="member">kBorderThickness</ref>,</highlight></codeline>
<codeline lineno="266" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ad2ccfac30caa5459ba58082187577146" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ad2ccfac30caa5459ba58082187577146" kindref="member">kLeftMargin</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" kindref="member">kBorderThickness</ref>,</highlight></codeline>
<codeline lineno="267" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" kindref="member">kRightMargin</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796aab9a830c18ced8b35e7ea11354f1e168" kindref="member">kRightInset</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" kindref="member">kShadowThickness</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" kindref="member">kBorderThickness</ref>,</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a004ffd768278ee9c9a78ae35835fdc85" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a004ffd768278ee9c9a78ae35835fdc85" kindref="member">kTimerInterval</ref><sp/>=<sp/>50,<sp/></highlight><highlight class="comment">//<sp/>milliseconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270" refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ac22796cffaa71790d270ae6de466774b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ac22796cffaa71790d270ae6de466774b" kindref="member">kOneSecondCountdown</ref><sp/>=<sp/>1000<sp/>/<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a004ffd768278ee9c9a78ae35835fdc85" kindref="member">kTimerInterval</ref>,</highlight></codeline>
<codeline lineno="271"><highlight class="normal">};</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PRL:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Mouse<sp/>must<sp/>move<sp/>at<sp/>least<sp/>this<sp/>far<sp/>to<sp/>distinguish<sp/>ctrl-drag<sp/>to<sp/>scrub</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>from<sp/>ctrl-click<sp/>for<sp/>playback.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="277" refid="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a485b14b589ff0ea3f160823d54d4ccce" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a485b14b589ff0ea3f160823d54d4ccce" kindref="member">SCRUBBING_PIXEL_TOLERANCE</ref><sp/>=<sp/>10,</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SCROLL_WHEEL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280" refid="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a5ce300bd11671e2ae59e9a91a4bf8739" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a5ce300bd11671e2ae59e9a91a4bf8739" kindref="member">ScrubSpeedStepsPerOctave</ref><sp/>=<sp/>4,</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal">};</highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Is<sp/>the<sp/>distance<sp/>between<sp/>A<sp/>and<sp/>B<sp/>less<sp/>than<sp/>D?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="285" refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>A,<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>B,<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>DIST<sp/>&gt;<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(<ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a955f504eccf76b4eb2489c0adab03121" kindref="member">A</ref><sp/><ref refid="poly-fir_8h_1a8d3c3518d793541417a4845125da1ae1" kindref="member">a</ref>,<sp/><ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a111da81ae5883147168bbb8366377b10" kindref="member">B</ref><sp/><ref refid="poly-fir_8h_1ab2d05693952610f937e5acb3c4a8fa1b" kindref="member">b</ref>,<sp/>DIST<sp/><ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>)</highlight></codeline>
<codeline lineno="286"><highlight class="normal">{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(a<sp/>&gt;<sp/>b<sp/>-<sp/>d)<sp/>&amp;&amp;<sp/>(a<sp/>&lt;<sp/>b<sp/>+<sp/><ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>);</highlight></codeline>
<codeline lineno="288"><highlight class="normal">}</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>LOW,<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>MID,<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>HIGH<sp/>&gt;</highlight></codeline>
<codeline lineno="291" refid="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" kindref="member">between_incexc</ref>(LOW<sp/><ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>,<sp/>MID<sp/><ref refid="layer3_8c_1a4b8bfe70f28d6faddcb10d6ecf8c1989" kindref="member">m</ref>,<sp/>HIGH<sp/>h)</highlight></codeline>
<codeline lineno="292"><highlight class="normal">{</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(m<sp/>&gt;=<sp/>l<sp/>&amp;&amp;<sp/>m<sp/>&lt;<sp/>h);</highlight></codeline>
<codeline lineno="294"><highlight class="normal">}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>CLIPPEE,<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>CLIPVAL<sp/>&gt;</highlight></codeline>
<codeline lineno="297" refid="_track_panel_8cpp_1ae727a553a0cbf21f301b84a544c70aca" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ae727a553a0cbf21f301b84a544c70aca" kindref="member">clip_top</ref>(CLIPPEE<sp/>&amp;<sp/>clippee,<sp/>CLIPVAL<sp/>val)</highlight></codeline>
<codeline lineno="298"><highlight class="normal">{</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clippee<sp/>&gt;<sp/>val)</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clippee<sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="301"><highlight class="normal">}</highlight></codeline>
<codeline lineno="302"><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>CLIPPEE,<sp/></highlight><highlight class="keyword">class</highlight><highlight class="normal"><sp/>CLIPVAL<sp/>&gt;</highlight></codeline>
<codeline lineno="304" refid="_track_panel_8cpp_1aeb6c6687a1c2f164448cdd651d694849" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1aeb6c6687a1c2f164448cdd651d694849" kindref="member">clip_bottom</ref>(CLIPPEE<sp/>&amp;<sp/>clippee,<sp/>CLIPVAL<sp/>val)</highlight></codeline>
<codeline lineno="305"><highlight class="normal">{</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clippee<sp/>&lt;<sp/>val)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clippee<sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="308"><highlight class="normal">}</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="311" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7007a1d7117eaad547371b1a2f8638f6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7007a1d7117eaad547371b1a2f8638f6" kindref="member">TrackPanelFirstID</ref><sp/>=<sp/>2000,</highlight></codeline>
<codeline lineno="312" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ddaba585f35e22fbb4ce7f017f0b6ad" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ddaba585f35e22fbb4ce7f017f0b6ad" kindref="member">OnSetNameID</ref>,</highlight></codeline>
<codeline lineno="313" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae7dbe59e412e660607ddb28cb03b4464" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae7dbe59e412e660607ddb28cb03b4464" kindref="member">OnSetFontID</ref>,</highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight></codeline>
<codeline lineno="315" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad781ffda3075b971f26483311fe506ae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad781ffda3075b971f26483311fe506ae" kindref="member">OnMoveUpID</ref>,</highlight></codeline>
<codeline lineno="316" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ab184908e548cefe0ea27c0f12390c0f8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ab184908e548cefe0ea27c0f12390c0f8" kindref="member">OnMoveDownID</ref>,</highlight></codeline>
<codeline lineno="317" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac4946484a27cc46670834bdc3d8e08ab" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac4946484a27cc46670834bdc3d8e08ab" kindref="member">OnMoveTopID</ref>,</highlight></codeline>
<codeline lineno="318" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2f1133cee583410fe1121f57980b5add" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2f1133cee583410fe1121f57980b5add" kindref="member">OnMoveBottomID</ref>,</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight></codeline>
<codeline lineno="320" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6cc8f9ad4c0ff6600f9cbb53262149fc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6cc8f9ad4c0ff6600f9cbb53262149fc" kindref="member">OnUpOctaveID</ref>,</highlight></codeline>
<codeline lineno="321" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8a40c66fb44fb22922b2c4fbc43d5a04" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8a40c66fb44fb22922b2c4fbc43d5a04" kindref="member">OnDownOctaveID</ref>,</highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeae4ed7d29cbab95d9c2cdbd4c72e57c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeae4ed7d29cbab95d9c2cdbd4c72e57c" kindref="member">OnChannelLeftID</ref>,</highlight></codeline>
<codeline lineno="324" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" kindref="member">OnChannelRightID</ref>,</highlight></codeline>
<codeline lineno="325" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeb81f02f8b3e274935d4b9fa864765c1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeb81f02f8b3e274935d4b9fa864765c1" kindref="member">OnChannelMonoID</ref>,</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="327" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aefb7e2e0c50a86122b83fa8b8dd68086" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aefb7e2e0c50a86122b83fa8b8dd68086" kindref="member">OnRate8ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>&lt;---</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61afbcef4e96d17e895132d32d02f0b133d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61afbcef4e96d17e895132d32d02f0b133d" kindref="member">OnRate11ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a01d127b3730f3daf3115bf2cc47e3adb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a01d127b3730f3daf3115bf2cc47e3adb" kindref="member">OnRate16ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad3a7b24424c05a64f2ad83e5c7fb1171" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad3a7b24424c05a64f2ad83e5c7fb1171" kindref="member">OnRate22ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="331" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8de06b9867cde6dcdb488ace78edc2f0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8de06b9867cde6dcdb488ace78edc2f0" kindref="member">OnRate44ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="332" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a763096bb423ae3950b350cefaad7f7fb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a763096bb423ae3950b350cefaad7f7fb" kindref="member">OnRate48ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|<sp/>Leave<sp/>these<sp/>in<sp/>order</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4a10baf94dcf8075ec10cf1446c0448e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4a10baf94dcf8075ec10cf1446c0448e" kindref="member">OnRate88ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af233bbad81c8dff20587b379df8142e5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af233bbad81c8dff20587b379df8142e5" kindref="member">OnRate96ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4867d65750c43bab28e67527676f8278" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4867d65750c43bab28e67527676f8278" kindref="member">OnRate176ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|<sp/>see<sp/>OnTrackMenu()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a606bab1ae8b3a2edd7ce4bff1eedb6d8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a606bab1ae8b3a2edd7ce4bff1eedb6d8" kindref="member">OnRate192ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="337" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a087627b6f2b7b8345efa8f4d9fd6a495" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a087627b6f2b7b8345efa8f4d9fd6a495" kindref="member">OnRate352ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="338" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8af9906f0e3a387c143c3a758701fe9e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8af9906f0e3a387c143c3a758701fe9e" kindref="member">OnRate384ID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="339" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aa34e718ffff0fb7f81dd5df722344674" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aa34e718ffff0fb7f81dd5df722344674" kindref="member">OnRateOtherID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="341" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a277454ef2627523e78245ea07550f9dc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a277454ef2627523e78245ea07550f9dc" kindref="member">On16BitID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="342" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac7e189eced3f209bb48e606b166b8fea" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac7e189eced3f209bb48e606b166b8fea" kindref="member">On24BitID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4f7cdf8dd4dcce5be8d8cd972e3de710" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4f7cdf8dd4dcce5be8d8cd972e3de710" kindref="member">OnFloatID</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>&lt;---</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight></codeline>
<codeline lineno="345" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac08c6b7ae5c6e30226f7512ff0123037" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac08c6b7ae5c6e30226f7512ff0123037" kindref="member">OnWaveformID</ref>,</highlight></codeline>
<codeline lineno="346" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a86c5bfe045792bba915af0d2cceb53da" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a86c5bfe045792bba915af0d2cceb53da" kindref="member">OnWaveformDBID</ref>,</highlight></codeline>
<codeline lineno="347" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac914784d8cbbb1789af612dc70e06acd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac914784d8cbbb1789af612dc70e06acd" kindref="member">OnSpectrumID</ref>,</highlight></codeline>
<codeline lineno="348" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae58578c1d0f405fa039fa34d20fc8a9d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae58578c1d0f405fa039fa34d20fc8a9d" kindref="member">OnSpectrogramSettingsID</ref>,</highlight></codeline>
<codeline lineno="349"><highlight class="normal"></highlight></codeline>
<codeline lineno="350" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aaa68f7243bd4c74caf5402a8c4a96dfb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aaa68f7243bd4c74caf5402a8c4a96dfb" kindref="member">OnSplitStereoID</ref>,</highlight></codeline>
<codeline lineno="351" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a74c22f542d18fb7ee573748a4669ec1a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a74c22f542d18fb7ee573748a4669ec1a" kindref="member">OnSplitStereoMonoID</ref>,</highlight></codeline>
<codeline lineno="352" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ad784ff9ce99b40087f63dff61b282e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ad784ff9ce99b40087f63dff61b282e" kindref="member">OnMergeStereoID</ref>,</highlight></codeline>
<codeline lineno="353" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af589f96236ab336de6fe1de0b2e071d6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af589f96236ab336de6fe1de0b2e071d6" kindref="member">OnSwapChannelsID</ref>,</highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight></codeline>
<codeline lineno="355" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af67502b033a66614e9c7d0682094c61b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af67502b033a66614e9c7d0682094c61b" kindref="member">OnSetTimeTrackRangeID</ref>,</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a5a5f9a31d18e3ef8bd32400f8504f856" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a5a5f9a31d18e3ef8bd32400f8504f856" kindref="member">OnTimeTrackLinID</ref>,</highlight></codeline>
<codeline lineno="358" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aab54102776a5a7d34947f83e180cb3e4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aab54102776a5a7d34947f83e180cb3e4" kindref="member">OnTimeTrackLogID</ref>,</highlight></codeline>
<codeline lineno="359" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a47b3a9c92aebd73eb16c9ecc40144ac3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a47b3a9c92aebd73eb16c9ecc40144ac3" kindref="member">OnTimeTrackLogIntID</ref>,</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reserve<sp/>an<sp/>ample<sp/>block<sp/>of<sp/>ids<sp/>for<sp/>waveform<sp/>scale<sp/>types</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="362" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad8599d18e8a5c41d385547ef7a321874" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad8599d18e8a5c41d385547ef7a321874" kindref="member">OnFirstWaveformScaleID</ref>,</highlight></codeline>
<codeline lineno="363" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a0c513e949c529583013efd63a1e88dcc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a0c513e949c529583013efd63a1e88dcc" kindref="member">OnLastWaveformScaleID</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad8599d18e8a5c41d385547ef7a321874" kindref="member">OnFirstWaveformScaleID</ref><sp/>+<sp/>9,</highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reserve<sp/>an<sp/>ample<sp/>block<sp/>of<sp/>ids<sp/>for<sp/>spectrum<sp/>scale<sp/>types</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1cb27731327caaf24bf61d12a07f75ff" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1cb27731327caaf24bf61d12a07f75ff" kindref="member">OnFirstSpectrumScaleID</ref>,</highlight></codeline>
<codeline lineno="367" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2137c31bab5da20c0370631bfe4d75f2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2137c31bab5da20c0370631bfe4d75f2" kindref="member">OnLastSpectrumScaleID</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1cb27731327caaf24bf61d12a07f75ff" kindref="member">OnFirstSpectrumScaleID</ref><sp/>+<sp/>19,</highlight></codeline>
<codeline lineno="368"><highlight class="normal"></highlight></codeline>
<codeline lineno="369" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae656e0beae2fdd9c0e1d5f09cfc3fff3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae656e0beae2fdd9c0e1d5f09cfc3fff3" kindref="member">OnZoomInVerticalID</ref>,</highlight></codeline>
<codeline lineno="370" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1efe09881810d5a0a6d6d57355bed707" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1efe09881810d5a0a6d6d57355bed707" kindref="member">OnZoomOutVerticalID</ref>,</highlight></codeline>
<codeline lineno="371" refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6be651161f793f51d95679059fcfb57a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6be651161f793f51d95679059fcfb57a" kindref="member">OnZoomFitVerticalID</ref>,</highlight></codeline>
<codeline lineno="372"><highlight class="normal">};</highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal">BEGIN_EVENT_TABLE(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>,<sp/>wxWindow)</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MOUSE_EVENTS(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnMouseEvent)</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MOUSE_CAPTURE_LOST(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnCaptureLost)</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_COMMAND(wxID_ANY,<sp/>EVT_CAPTURE_KEY,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnCaptureKey)</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_KEY_DOWN(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnKeyDown)</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_KEY_UP(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnKeyUp)</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_CHAR(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnChar)</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_SIZE(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSize)</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_PAINT(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnPaint)</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_SET_FOCUS(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSetFocus)</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_KILL_FOCUS(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnKillFocus)</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_CONTEXT_MENU(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnContextMenu)</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ddaba585f35e22fbb4ce7f017f0b6ad" kindref="member">OnSetNameID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSetName)</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae7dbe59e412e660607ddb28cb03b4464" kindref="member">OnSetFontID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSetFont)</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af67502b033a66614e9c7d0682094c61b" kindref="member">OnSetTimeTrackRangeID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSetTimeTrackRange)</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad781ffda3075b971f26483311fe506ae" kindref="member">OnMoveUpID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ab184908e548cefe0ea27c0f12390c0f8" kindref="member">OnMoveDownID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnMoveTrack)</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac4946484a27cc46670834bdc3d8e08ab" kindref="member">OnMoveTopID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2f1133cee583410fe1121f57980b5add" kindref="member">OnMoveBottomID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnMoveTrack)</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6cc8f9ad4c0ff6600f9cbb53262149fc" kindref="member">OnUpOctaveID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8a40c66fb44fb22922b2c4fbc43d5a04" kindref="member">OnDownOctaveID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnChangeOctave)</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeae4ed7d29cbab95d9c2cdbd4c72e57c" kindref="member">OnChannelLeftID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeb81f02f8b3e274935d4b9fa864765c1" kindref="member">OnChannelMonoID</ref>,</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnChannelChange)</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac08c6b7ae5c6e30226f7512ff0123037" kindref="member">OnWaveformID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac914784d8cbbb1789af612dc70e06acd" kindref="member">OnSpectrumID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSetDisplay)</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae58578c1d0f405fa039fa34d20fc8a9d" kindref="member">OnSpectrogramSettingsID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSpectrogramSettings)</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aefb7e2e0c50a86122b83fa8b8dd68086" kindref="member">OnRate8ID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8af9906f0e3a387c143c3a758701fe9e" kindref="member">OnRate384ID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnRateChange)</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a277454ef2627523e78245ea07550f9dc" kindref="member">On16BitID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4f7cdf8dd4dcce5be8d8cd972e3de710" kindref="member">OnFloatID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnFormatChange)</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aa34e718ffff0fb7f81dd5df722344674" kindref="member">OnRateOtherID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnRateOther)</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af589f96236ab336de6fe1de0b2e071d6" kindref="member">OnSwapChannelsID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSwapChannels)</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aaa68f7243bd4c74caf5402a8c4a96dfb" kindref="member">OnSplitStereoID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSplitStereo)</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a74c22f542d18fb7ee573748a4669ec1a" kindref="member">OnSplitStereoMonoID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSplitStereoMono)</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a7ad784ff9ce99b40087f63dff61b282e" kindref="member">OnMergeStereoID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnMergeStereo)</highlight></codeline>
<codeline lineno="404"><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a5a5f9a31d18e3ef8bd32400f8504f856" kindref="member">OnTimeTrackLinID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnTimeTrackLin)</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aab54102776a5a7d34947f83e180cb3e4" kindref="member">OnTimeTrackLogID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnTimeTrackLog)</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a47b3a9c92aebd73eb16c9ecc40144ac3" kindref="member">OnTimeTrackLogIntID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnTimeTrackLogInt)</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad8599d18e8a5c41d385547ef7a321874" kindref="member">OnFirstWaveformScaleID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a0c513e949c529583013efd63a1e88dcc" kindref="member">OnLastWaveformScaleID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnWaveformScaleType)</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a71b7571eb34f9bd037742769f46ceee9" kindref="member">EVT_MENU_RANGE</ref>(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1cb27731327caaf24bf61d12a07f75ff" kindref="member">OnFirstSpectrumScaleID</ref>,<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a2137c31bab5da20c0370631bfe4d75f2" kindref="member">OnLastSpectrumScaleID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnSpectrumScaleType)</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ae656e0beae2fdd9c0e1d5f09cfc3fff3" kindref="member">OnZoomInVerticalID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnZoomInVertical)</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1efe09881810d5a0a6d6d57355bed707" kindref="member">OnZoomOutVerticalID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnZoomOutVertical)</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_MENU(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a6be651161f793f51d95679059fcfb57a" kindref="member">OnZoomFitVerticalID</ref>,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnZoomFitVertical)</highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/>EVT_TIMER(wxID_ANY,<sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref>::OnTimer)</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><ref refid="_batch_command_dialog_8cpp_1a8c3469324b3e5d3e6c44c23a418ab937" kindref="member">END_EVENT_TABLE</ref>()</highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="421" refid="_track_panel_8cpp_1a63096d6582a75d647088db680060c12a" refkind="member"><highlight class="normal">wxCursor<sp/>*<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>WXUNUSED(CursorId),<sp/><ref refid="getopt_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<sp/><ref refid="_track_panel_8cpp_1a63096d6582a75d647088db680060c12a" kindref="member">pXpm</ref>[36],<sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1a8e3bc98230a8c07cf1fa538be2180afb" kindref="member">HotX</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1a9614b5e020cb0112ddffb09edf5f6253" kindref="member">HotY</ref><sp/>)</highlight></codeline>
<codeline lineno="422" refid="_track_panel_8cpp_1a9614b5e020cb0112ddffb09edf5f6253" refkind="member"><highlight class="normal">{</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/>wxCursor<sp/>*<sp/><ref refid="_track_panel_8cpp_1a05b64122c94645f8a4cefd4d93b47f1e" kindref="member">pCursor</ref>;</highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>CURSORS_SIZE32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="426" refid="_track_panel_8cpp_1ad5bc86b19e27ab2dabb6581286ed059c" refkind="member"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad5bc86b19e27ab2dabb6581286ed059c" kindref="member">HotAdjust</ref><sp/>=0;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>HotAdjust<sp/>=8;</highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight></codeline>
<codeline lineno="431" refid="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" refkind="member"><highlight class="normal"><sp/><sp/><sp/>wxImage<sp/><ref refid="_track_panel_8cpp_1ada56b55720b370c07ae23c07d31516d1" kindref="member">Image</ref><sp/>=<sp/>wxImage(wxBitmap(pXpm).ConvertToImage());</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/>Image.SetMaskColour(255,0,0);</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/>Image.SetMask();</highlight><highlight class="comment">//<sp/>Enable<sp/>mask.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/>Image.SetOption(<sp/>wxIMAGE_OPTION_CUR_HOTSPOT_X,<sp/>HotX-HotAdjust<sp/>);</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/>Image.SetOption(<sp/>wxIMAGE_OPTION_CUR_HOTSPOT_Y,<sp/>HotY-HotAdjust<sp/>);</highlight></codeline>
<codeline lineno="437" refid="_track_panel_8cpp_1a05b64122c94645f8a4cefd4d93b47f1e" refkind="member"><highlight class="normal"><sp/><sp/><sp/>pCursor<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxCursor(<sp/>Image<sp/>);</highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1a05b64122c94645f8a4cefd4d93b47f1e" kindref="member">pCursor</ref>;</highlight></codeline>
<codeline lineno="440"><highlight class="normal">}</highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Don&apos;t<sp/>warn<sp/>us<sp/>about<sp/>using<sp/>&apos;this&apos;<sp/>in<sp/>the<sp/>base<sp/>member<sp/>initializer<sp/>list.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>__WXGTK__<sp/>//Get<sp/>rid<sp/>if<sp/>this<sp/>pragma<sp/>for<sp/>gtk</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight><highlight class="preprocessor">#pragma<sp/>warning(<sp/>disable:<sp/>4355<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="448" refid="class_track_panel_1a1b553c63e4513509a67e5a63eb61fffa" refkind="member"><highlight class="normal"><ref refid="class_track_panel_1a1b553c63e4513509a67e5a63eb61fffa" kindref="member">TrackPanel::TrackPanel</ref>(wxWindow<sp/>*<sp/>parent,<sp/>wxWindowID<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxPoint<sp/>&amp;<sp/>pos,</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxSize<sp/>&amp;<sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref>,</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list" kindref="compound">TrackList</ref><sp/>*<sp/>tracks,</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_view_info" kindref="compound">ViewInfo</ref><sp/>*<sp/>viewInfo,</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_listener" kindref="compound">TrackPanelListener</ref><sp/>*<sp/>listener,</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_adorned_ruler_panel" kindref="compound">AdornedRulerPanel</ref><sp/>*<sp/>ruler)</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/>:<sp/>wxPanel(parent,<sp/>id,<sp/>pos,<sp/>size,<sp/>wxWANTS_CHARS<sp/>|<sp/>wxNO_BORDER),</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mTrackInfo(this),</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mListener(listener),</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mTracks(tracks),</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mViewInfo(viewInfo),</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mRuler(ruler),</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mTrackArtist(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>),</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mBacking(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>),</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mResizeBacking(<ref refid="ordinals_8h_1a65e9886d74aaee76545e83dd09011727" kindref="member">false</ref>),</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mRefreshBacking(<ref refid="ordinals_8h_1a65e9886d74aaee76545e83dd09011727" kindref="member">false</ref>),</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mConverter(<ref refid="class_numeric_converter" kindref="compound">NumericConverter</ref>::TIME),</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mAutoScrolling(<ref refid="ordinals_8h_1a65e9886d74aaee76545e83dd09011727" kindref="member">false</ref>),</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>mVertScrollRemainder(0),</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>vrulerSize(36,0)</highlight></codeline>
<codeline lineno="469"><highlight class="normal">#ifndef<sp/>__WXGTK__<sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>rid<sp/>if<sp/>this<sp/>pragma<sp/>for<sp/>gtk</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal">#pragma<sp/>warning(<sp/>default:<sp/>4355<sp/>)</highlight></codeline>
<codeline lineno="471"><highlight class="normal">#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref></highlight></codeline>
<codeline lineno="472"><highlight class="normal">{</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/>SetLabel(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Track<sp/>Panel&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/>SetName(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Track<sp/>Panel&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/>SetBackgroundStyle(wxBG_STYLE_PAINT);</highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1af348cec23cce5263e8a0acd36e7d594e" kindref="member">TrackPanelAx</ref>(<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="478"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>wxUSE_ACCESSIBILITY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/>SetAccessible(<sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref><sp/>);</highlight></codeline>
<codeline lineno="480"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preinit<sp/>the<sp/>backing<sp/>DC<sp/>and<sp/>bitmap<sp/>so<sp/>routines<sp/>that<sp/>require<sp/>it<sp/>will</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>not<sp/>cause<sp/>a<sp/>crash<sp/>if<sp/>they<sp/>run<sp/>before<sp/>the<sp/>panel<sp/>is<sp/>fully<sp/>initialized.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxBitmap(1,<sp/>1);</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>.SelectObject(*<ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>);</highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a02afbbe38ff6d95074c04ec433a31262" kindref="member">mSlideUpDownOnly</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a42584f68b419de73ce42c7b15d7a4828" kindref="member">mLabelTrackStartXPos</ref>=-1;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1af02524f80a857fce1fc05853ea880e76" kindref="member">mCircularTrackNavigation</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="491"><highlight class="normal"></highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a1a326663822597a30806a592922c06b1" kindref="member">UpdatePrefs</ref>();</highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad93db3f8c1d1e4460292b4ebc9bdffad" kindref="member">mRedrawAfterStop</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="495"><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aa6e6a57e571eec0f9842558b04945b1c" kindref="member">mPencilCursor</ref><sp/><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_PENCIL,<sp/><sp/><sp/><sp/>DrawCursorXpm,<sp/><sp/><sp/><sp/>12,<sp/>22);</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a791215c5f5f6a0263f23e10eb971205c" kindref="member">mSelectCursor</ref><sp/><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_IBEAM,<sp/><sp/><sp/><sp/><sp/>IBeamCursorXpm,<sp/><sp/><sp/>17,<sp/>16);</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae120daf4a0e3c0249ab1a98094edff28" kindref="member">mEnvelopeCursor</ref>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_ARROW,<sp/><sp/><sp/><sp/><sp/>EnvCursorXpm,<sp/><sp/><sp/><sp/><sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_NO_ENTRY,<sp/><sp/>DisabledCursorXpm,16,<sp/>16);</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aeb18d7c6402c4b5c7c626fab5bcec748" kindref="member">mSlideCursor</ref><sp/><sp/><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_SIZEWE,<sp/><sp/><sp/><sp/>TimeCursorXpm,<sp/><sp/><sp/><sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a48bdb309d319ab126fc86691a86ca9bc" kindref="member">mZoomInCursor</ref><sp/><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_MAGNIFIER,<sp/>ZoomInCursorXpm,<sp/><sp/>19,<sp/>15);</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2e34ef324bc6b3ccb8229f644750aac8" kindref="member">mZoomOutCursor</ref><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_MAGNIFIER,<sp/>ZoomOutCursorXpm,<sp/>19,<sp/>15);</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a35f8f3d317049476e9aa1beff2a4fcfe" kindref="member">mLabelCursorLeft</ref><sp/><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_ARROW,<sp/><sp/>LabelCursorLeftXpm,<sp/>19,<sp/>15);</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a24629f89f4075b5592bccf528b0b9ed7" kindref="member">mLabelCursorRight</ref><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_ARROW,<sp/><sp/>LabelCursorRightXpm,<sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1af59ffe3dcaa79ea7d3f650a77a3a668b" kindref="member">mBottomFrequencyCursor</ref><sp/>=</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_ARROW,<sp/><sp/>BottomFrequencyCursorXpm,<sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a870e2ab664262b1033b6ab96acc82c02" kindref="member">mTopFrequencyCursor</ref><sp/>=</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_ARROW,<sp/><sp/>TopFrequencyCursorXpm,<sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a94be9bdea6c34977d0d74514458468ab" kindref="member">mBandWidthCursor</ref><sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_ARROW,<sp/><sp/>BandWidthCursorXpm,<sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="512"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/>mStretchMode<sp/>=<sp/>stretchCenter;</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/>mStretching<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/>mStretched<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/>mStretchStart<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/>mStretchCursor<sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_BULLSEYE,<sp/><sp/>StretchCursorXpm,<sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/>mStretchLeftCursor<sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_BULLSEYE,</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StretchLeftCursorXpm,<sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/>mStretchRightCursor<sp/>=<sp/><ref refid="_cursors_8h_1a6f0eb65caf5ba60aff271091774c9712" kindref="member">MakeCursor</ref>(<sp/>wxCURSOR_BULLSEYE,</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StretchRightCursorXpm,<sp/>16,<sp/>16);</highlight></codeline>
<codeline lineno="524"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aeb8e3a8ba37bb6113d378e37dd90d910" kindref="member">mArrowCursor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxCursor(wxCURSOR_ARROW);</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a30fd1afbc5cb7aeed61bffb0e5d472e2" kindref="member">mSmoothCursor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxCursor(wxCURSOR_SPRAYCAN);</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2a074a10dd9eddf34ddfb55956b7fca7" kindref="member">mResizeCursor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxCursor(wxCURSOR_SIZENS);</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a854ecb221e26a9f55cde793a134894d9" kindref="member">mRearrangeCursor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxCursor(wxCURSOR_HAND);</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a285bee406a7006b3446a184e4b82ef7a" kindref="member">mAdjustLeftSelectionCursor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxCursor(wxCURSOR_POINT_LEFT);</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3d6d67cfbb88101960b3854cc6ec14c2" kindref="member">mAdjustRightSelectionCursor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxCursor(wxCURSOR_POINT_RIGHT);</highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a847d9d632b66b1f203b2ca2a8afde94e" kindref="member">mChannelItemsInsertionPoint</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5e797a078579ae83a2953dc3cdd4e267" kindref="member">mRulerWaveformMenu</ref><sp/>=<sp/><ref refid="class_track_panel_1aaae33e2c9a2354384a4d70672d404074" kindref="member">mRulerSpectrumMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7589c02239fa75a32f8bfcc78b9a6e63" kindref="member">BuildMenus</ref>();</highlight></codeline>
<codeline lineno="543"><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_track_artist" kindref="compound">TrackArtist</ref>();</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1a7f6b12455815aebb388d9731a85f5740" kindref="member">SetInset</ref>(1,<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>,<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" kindref="member">kRightMargin</ref>,<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="549"><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac49fa36d784ff704edbf92cafca23b7c" kindref="member">mTimeCount</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab8dd1b9f070a6331441767ae27564ad5" kindref="member">mTimer</ref>.<ref refid="class_track_panel_1_1_audacity_timer_1a27a92324083fac464bbf0612bfbed543" kindref="member">parent</ref><sp/>=<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab8dd1b9f070a6331441767ae27564ad5" kindref="member">mTimer</ref>.Start(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a004ffd768278ee9c9a78ae35835fdc85" kindref="member">kTimerInterval</ref>,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="553"><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Initialize<sp/>a<sp/>member<sp/>variable<sp/>pointing<sp/>to<sp/>the<sp/>current</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//drawing<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref><sp/>=<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//More<sp/>initializations,<sp/>some<sp/>of<sp/>these<sp/>for<sp/>no<sp/>other<sp/>reason<sp/>than</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//to<sp/>prevent<sp/>runtime<sp/>memory<sp/>check<sp/>warnings</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5e5f21ee396e4dcddb50cec279b35dca" kindref="member">mPrevWidth</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2f4409a90287cd2316f2a1aa26608108" kindref="member">mPrevHeight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="564"><highlight class="normal"></highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>is<sp/>used<sp/>to<sp/>snap<sp/>the<sp/>cursor<sp/>to<sp/>the<sp/>nearest<sp/>track<sp/>that</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>lines<sp/>up<sp/>with<sp/>it.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="570"><highlight class="normal"></highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref><sp/>=<sp/><ref refid="class_track_panel_1ab7dd0b337b738f9ed53c4cfa4375c604" kindref="member">mNewCursorX</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>=<sp/><ref refid="class_track_panel_1a3c48a491488b35dd70426d11b264955e" kindref="member">mNewIndicatorX</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae4269832b66adecb9fb64fbf9263d170" kindref="member">mCursorTime</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3db59897498463b3928e03fe5847a0aa" kindref="member">mOldQPIndicatorPos</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Register<sp/>for<sp/>tracklist<sp/>updates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;Connect(EVT_TRACKLIST_RESIZED,</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxCommandEventHandler(<ref refid="class_track_panel_1abb3ee974c78d75af2f7131d4fefefac2" kindref="member">TrackPanel::OnTrackListResized</ref>),</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;Connect(EVT_TRACKLIST_UPDATED,</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxCommandEventHandler(<ref refid="class_track_panel_1ab05904aa3f0df40bff7406b1138bff25" kindref="member">TrackPanel::OnTrackListUpdated</ref>),</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="585"><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa57e7db3a8296b8f4b70661b69d76ef26" kindref="member">FREQ_SEL_INVALID</ref>;</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac8edbb1e21b215c81157c4ba59e6c6d2" kindref="member">mFrequencySnapper</ref>.reset(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_spectrum_analyst" kindref="compound">SpectrumAnalyst</ref>());</highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aeb356a00eec72d012430064d6bc7d1b4" kindref="member">mLastF0</ref><sp/>=<sp/><ref refid="class_track_panel_1a40bb7daf14dcfad80db2488157da31f0" kindref="member">mLastF1</ref><sp/>=<sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>;</highlight></codeline>
<codeline lineno="591"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="595"><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1af56e383d9608b0ee7500fbe10c5d8369" kindref="member">mScrubToken</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae463294b215dacd0cb93f54bc360ecde" kindref="member">mScrubStartClockTimeMillis</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref><sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae30f39b53fd3947ccb99b048a6efd4e3" kindref="member">mScrubHasFocus</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a8082a55b36f3365b1dceefdc77da0067" kindref="member">mScrubSeekPress</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"></highlight></codeline>
<codeline lineno="606"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="609"><highlight class="normal"></highlight></codeline>
<codeline lineno="610"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SCROLL_WHEEL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a8588a9e934cd4cf2933b446c8eae5679" kindref="member">mLogMaxScrubSpeed</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="612"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2040148c3f847c66400e829f65eb9397" kindref="member">mInitialTrackSelection</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>std::vector&lt;bool&gt;;</highlight></codeline>
<codeline lineno="615"><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="app_8h_1a01fd2cb0a8fbaade87800e71a50e855d" kindref="member">wxTheApp</ref>)</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="app_8h_1a01fd2cb0a8fbaade87800e71a50e855d" kindref="member">wxTheApp</ref>-&gt;Connect</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(wxEVT_ACTIVATE_APP,</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxActivateEventHandler(<ref refid="class_track_panel_1a4065eaeb541297e7e9f2e43d04d17ae5" kindref="member">TrackPanel::OnActivateOrDeactivateApp</ref>),<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="620"><highlight class="normal">}</highlight></codeline>
<codeline lineno="621"><highlight class="normal"></highlight></codeline>
<codeline lineno="622"><highlight class="normal"></highlight></codeline>
<codeline lineno="623" refid="class_track_panel_1a1bdbcb07fd3b1ef964eb4e769be4a161" refkind="member"><highlight class="normal"><ref refid="class_track_panel_1a1bdbcb07fd3b1ef964eb4e769be4a161" kindref="member">TrackPanel::~TrackPanel</ref>()</highlight></codeline>
<codeline lineno="624"><highlight class="normal">{</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab8dd1b9f070a6331441767ae27564ad5" kindref="member">mTimer</ref>.Stop();</highlight></codeline>
<codeline lineno="626"><highlight class="normal"></highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="app_8h_1a01fd2cb0a8fbaade87800e71a50e855d" kindref="member">wxTheApp</ref>)</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="app_8h_1a01fd2cb0a8fbaade87800e71a50e855d" kindref="member">wxTheApp</ref>-&gt;Disconnect</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(wxEVT_ACTIVATE_APP,</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxActivateEventHandler(<ref refid="class_track_panel_1a4065eaeb541297e7e9f2e43d04d17ae5" kindref="member">TrackPanel::OnActivateOrDeactivateApp</ref>),<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="631"><highlight class="normal"></highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Unregister<sp/>for<sp/>tracklist<sp/>updates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;Disconnect(EVT_TRACKLIST_UPDATED,</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxCommandEventHandler(<ref refid="class_track_panel_1ab05904aa3f0df40bff7406b1138bff25" kindref="member">TrackPanel::OnTrackListUpdated</ref>),</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;Disconnect(EVT_TRACKLIST_RESIZED,</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxCommandEventHandler(<ref refid="class_track_panel_1abb3ee974c78d75af2f7131d4fefefac2" kindref="member">TrackPanel::OnTrackListResized</ref>),</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="641"><highlight class="normal"></highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>can<sp/>happen<sp/>if<sp/>a<sp/>label<sp/>is<sp/>being<sp/>edited<sp/>and<sp/>the<sp/>user<sp/>presses</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ALT+F4<sp/>or<sp/>Command+Q</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(HasCapture())</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ReleaseMouse();</highlight></codeline>
<codeline lineno="646"><highlight class="normal"></highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>)</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>.SelectObject(<sp/>wxNullBitmap<sp/>);</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>;</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>;</highlight></codeline>
<codeline lineno="653"><highlight class="normal"></highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aeb8e3a8ba37bb6113d378e37dd90d910" kindref="member">mArrowCursor</ref>;</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa6e6a57e571eec0f9842558b04945b1c" kindref="member">mPencilCursor</ref>;</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a791215c5f5f6a0263f23e10eb971205c" kindref="member">mSelectCursor</ref>;</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae120daf4a0e3c0249ab1a98094edff28" kindref="member">mEnvelopeCursor</ref>;</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref>;</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aeb18d7c6402c4b5c7c626fab5bcec748" kindref="member">mSlideCursor</ref>;</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a2a074a10dd9eddf34ddfb55956b7fca7" kindref="member">mResizeCursor</ref>;</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a30fd1afbc5cb7aeed61bffb0e5d472e2" kindref="member">mSmoothCursor</ref>;</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a48bdb309d319ab126fc86691a86ca9bc" kindref="member">mZoomInCursor</ref>;</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a2e34ef324bc6b3ccb8229f644750aac8" kindref="member">mZoomOutCursor</ref>;</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a35f8f3d317049476e9aa1beff2a4fcfe" kindref="member">mLabelCursorLeft</ref>;</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a24629f89f4075b5592bccf528b0b9ed7" kindref="member">mLabelCursorRight</ref>;</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a854ecb221e26a9f55cde793a134894d9" kindref="member">mRearrangeCursor</ref>;</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a285bee406a7006b3446a184e4b82ef7a" kindref="member">mAdjustLeftSelectionCursor</ref>;</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a3d6d67cfbb88101960b3854cc6ec14c2" kindref="member">mAdjustRightSelectionCursor</ref>;</highlight></codeline>
<codeline lineno="669"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1af59ffe3dcaa79ea7d3f650a77a3a668b" kindref="member">mBottomFrequencyCursor</ref>;</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a870e2ab664262b1033b6ab96acc82c02" kindref="member">mTopFrequencyCursor</ref>;</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a94be9bdea6c34977d0d74514458468ab" kindref="member">mBandWidthCursor</ref>;</highlight></codeline>
<codeline lineno="673"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>mStretchCursor;</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>mStretchLeftCursor;</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>mStretchRightCursor;</highlight></codeline>
<codeline lineno="678"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"></highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>;</highlight></codeline>
<codeline lineno="681"><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1af7bfecf9618f80f743ed761a7c1be8e8" kindref="member">DeleteMenus</ref>();</highlight></codeline>
<codeline lineno="683"><highlight class="normal"></highlight></codeline>
<codeline lineno="684"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>!wxUSE_ACCESSIBILITY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>;</highlight></codeline>
<codeline lineno="686"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"></highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a2040148c3f847c66400e829f65eb9397" kindref="member">mInitialTrackSelection</ref>;</highlight></codeline>
<codeline lineno="689"><highlight class="normal">}</highlight></codeline>
<codeline lineno="690"><highlight class="normal"></highlight></codeline>
<codeline lineno="691" refid="class_track_panel_1a7589c02239fa75a32f8bfcc78b9a6e63" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a7589c02239fa75a32f8bfcc78b9a6e63" kindref="member">TrackPanel::BuildMenus</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="692"><highlight class="normal">{</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>rid<sp/>of<sp/>existing<sp/>menus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1af7bfecf9618f80f743ed761a7c1be8e8" kindref="member">DeleteMenus</ref>();</highlight></codeline>
<codeline lineno="695"><highlight class="normal"></highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>AppendCheckItem<sp/>so<sp/>we<sp/>can<sp/>have<sp/>ticks<sp/>beside<sp/>the<sp/>items.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>would<sp/>use<sp/>AppendRadioItem<sp/>but<sp/>it<sp/>only<sp/>currently<sp/>works<sp/>on<sp/>windows<sp/>and<sp/>GTK.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(OnRate8ID,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;8000<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61afbcef4e96d17e895132d32d02f0b133d" kindref="member">OnRate11ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;11025<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a01d127b3730f3daf3115bf2cc47e3adb" kindref="member">OnRate16ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;16000<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad3a7b24424c05a64f2ad83e5c7fb1171" kindref="member">OnRate22ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;22050<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8de06b9867cde6dcdb488ace78edc2f0" kindref="member">OnRate44ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;44100<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a763096bb423ae3950b350cefaad7f7fb" kindref="member">OnRate48ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;48000<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4a10baf94dcf8075ec10cf1446c0448e" kindref="member">OnRate88ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;88200<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61af233bbad81c8dff20587b379df8142e5" kindref="member">OnRate96ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;96000<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4867d65750c43bab28e67527676f8278" kindref="member">OnRate176ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;176400<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a606bab1ae8b3a2edd7ce4bff1eedb6d8" kindref="member">OnRate192ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;192000<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a087627b6f2b7b8345efa8f4d9fd6a495" kindref="member">OnRate352ID</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;352800<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(OnRate384ID,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;384000<sp/>Hz&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>-&gt;AppendRadioItem(OnRateOtherID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Other...&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="712"><highlight class="normal"></highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed53844c5faeabefd25618317866160a" kindref="member">mFormatMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed53844c5faeabefd25618317866160a" kindref="member">mFormatMenu</ref>-&gt;AppendRadioItem(On16BitID,<sp/><ref refid="_sample_format_8cpp_1aa1e05d8c243fe96c1bee978d1ec73b57" kindref="member">GetSampleFormatStr</ref>(<ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba99d110ae36be71bbf3cb9ad3af4550" kindref="member">int16Sample</ref>));</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed53844c5faeabefd25618317866160a" kindref="member">mFormatMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac7e189eced3f209bb48e606b166b8fea" kindref="member">On24BitID</ref>,<sp/><ref refid="_sample_format_8cpp_1aa1e05d8c243fe96c1bee978d1ec73b57" kindref="member">GetSampleFormatStr</ref>(<ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792af7d5dcd7629454f6c6f3d7be44068a5f" kindref="member">int24Sample</ref>));</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed53844c5faeabefd25618317866160a" kindref="member">mFormatMenu</ref>-&gt;AppendRadioItem(OnFloatID,<sp/><ref refid="_sample_format_8cpp_1aa1e05d8c243fe96c1bee978d1ec73b57" kindref="member">GetSampleFormatStr</ref>(<ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>));</highlight></codeline>
<codeline lineno="717"><highlight class="normal"></highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>build<sp/>the<sp/>pop-down<sp/>menu<sp/>used<sp/>on<sp/>wave<sp/>(sampled<sp/>audio)<sp/>tracks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a47fbe24cbead00d10a83a1b411132d35" kindref="member">BuildCommonDropMenuItems</ref>(<ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>does<sp/>name,<sp/>up/down<sp/>etc</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendRadioItem(OnWaveformID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Wa&amp;veform&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a86c5bfe045792bba915af0d2cceb53da" kindref="member">OnWaveformDBID</ref>,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Waveform<sp/>(dB)&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendRadioItem(OnSpectrumID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Spectrogram&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;Append(OnSpectrogramSettingsID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;S&amp;pectrogram<sp/>Settings...&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendSeparator();</highlight></codeline>
<codeline lineno="726"><highlight class="normal"></highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>include<sp/>both<sp/>mono<sp/>and<sp/>stereo<sp/>items<sp/>as<sp/>a<sp/>work<sp/>around<sp/>for<sp/>bug<sp/>1250</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="728"><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendRadioItem(OnChannelMonoID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Mono&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendRadioItem(OnChannelLeftID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Left<sp/>Channel&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendRadioItem(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" kindref="member">OnChannelRightID</ref>,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Right<sp/>Channel&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;Append(OnMergeStereoID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Ma&amp;ke<sp/>Stereo<sp/>Track&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;Append(OnSwapChannelsID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Swap<sp/>Stereo<sp/>&amp;Channels&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;Append(OnSplitStereoID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Spl&amp;it<sp/>Stereo<sp/>Track&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;Append(OnSplitStereoMonoID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Split<sp/>Stereo<sp/>to<sp/>Mo&amp;no&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendSeparator();</highlight></codeline>
<codeline lineno="737"><highlight class="normal"></highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;Append(0,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Format&quot;</highlight><highlight class="normal">),<sp/><ref refid="class_track_panel_1aed53844c5faeabefd25618317866160a" kindref="member">mFormatMenu</ref>);</highlight></codeline>
<codeline lineno="739"><highlight class="normal"></highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;AppendSeparator();</highlight></codeline>
<codeline lineno="741"><highlight class="normal"></highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>-&gt;Append(0,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Rat&amp;e&quot;</highlight><highlight class="normal">),<sp/><ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>);</highlight></codeline>
<codeline lineno="743"><highlight class="normal"></highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>build<sp/>the<sp/>pop-down<sp/>menu<sp/>used<sp/>on<sp/>note<sp/>(MIDI)<sp/>tracks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a47fbe24cbead00d10a83a1b411132d35" kindref="member">BuildCommonDropMenuItems</ref>(<ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>does<sp/>name,<sp/>up/down<sp/>etc</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref>-&gt;Append(OnUpOctaveID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Up<sp/>&amp;Octave&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref>-&gt;Append(OnDownOctaveID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Down<sp/>Octa&amp;ve&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="749"><highlight class="normal"></highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>build<sp/>the<sp/>pop-down<sp/>menu<sp/>used<sp/>on<sp/>label<sp/>tracks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a47fbe24cbead00d10a83a1b411132d35" kindref="member">BuildCommonDropMenuItems</ref>(<ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>does<sp/>name,<sp/>up/down<sp/>etc</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref>-&gt;Append(OnSetFontID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Font...&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>build<sp/>the<sp/>pop-down<sp/>menu<sp/>used<sp/>on<sp/>time<sp/>warping<sp/>tracks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a47fbe24cbead00d10a83a1b411132d35" kindref="member">BuildCommonDropMenuItems</ref>(<ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>does<sp/>name,<sp/>up/down<sp/>etc</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>-&gt;Append(OnTimeTrackLinID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Linear&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>-&gt;Append(OnTimeTrackLogID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;L&amp;ogarithmic&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>-&gt;AppendSeparator();</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>-&gt;Append(OnSetTimeTrackRangeID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Range...&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>-&gt;AppendCheckItem(OnTimeTrackLogIntID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Logarithmic<sp/>&amp;Interpolation&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="763"><highlight class="normal"></highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5e797a078579ae83a2953dc3cdd4e267" kindref="member">mRulerWaveformMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a6706d07cc464d81bf05575a1f3028644" kindref="member">BuildVRulerMenuItems</ref></highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a5e797a078579ae83a2953dc3cdd4e267" kindref="member">mRulerWaveformMenu</ref>,<sp/>OnFirstWaveformScaleID,</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_waveform_settings_1aa8a239cf44808f3ebd93cb7f1e7ba572" kindref="member">WaveformSettings::GetScaleNames</ref>());</highlight></codeline>
<codeline lineno="768"><highlight class="normal"></highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaae33e2c9a2354384a4d70672d404074" kindref="member">mRulerSpectrumMenu</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxMenu();</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a6706d07cc464d81bf05575a1f3028644" kindref="member">BuildVRulerMenuItems</ref></highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1aaae33e2c9a2354384a4d70672d404074" kindref="member">mRulerSpectrumMenu</ref>,<sp/>OnFirstSpectrumScaleID,</highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_spectrogram_settings_1a7d6121037a1502d5eb402e0ce6f6d1ef" kindref="member">SpectrogramSettings::GetScaleNames</ref>());</highlight></codeline>
<codeline lineno="773"><highlight class="normal">}</highlight></codeline>
<codeline lineno="774"><highlight class="normal"></highlight></codeline>
<codeline lineno="775" refid="class_track_panel_1a47fbe24cbead00d10a83a1b411132d35" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a47fbe24cbead00d10a83a1b411132d35" kindref="member">TrackPanel::BuildCommonDropMenuItems</ref>(wxMenu<sp/>*<sp/>menu)</highlight></codeline>
<codeline lineno="776"><highlight class="normal">{</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnSetNameID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;&amp;Name...&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;AppendSeparator();</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnMoveUpID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Move<sp/>Track<sp/>&amp;Up&quot;</highlight><highlight class="normal">)<sp/>+<sp/>wxT(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">)<sp/>+<sp/></highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;GetCommandManager()-&gt;GetKeyFromName(wxT(</highlight><highlight class="stringliteral">&quot;TrackMoveUp&quot;</highlight><highlight class="normal">))));</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnMoveDownID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Move<sp/>Track<sp/>&amp;Down&quot;</highlight><highlight class="normal">)<sp/>+<sp/>wxT(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">)<sp/>+<sp/></highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;GetCommandManager()-&gt;GetKeyFromName(wxT(</highlight><highlight class="stringliteral">&quot;TrackMoveDown&quot;</highlight><highlight class="normal">))));</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnMoveTopID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Move<sp/>Track<sp/>to<sp/>&amp;Top&quot;</highlight><highlight class="normal">)<sp/>+<sp/>wxT(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">)<sp/>+<sp/></highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;GetCommandManager()-&gt;GetKeyFromName(wxT(</highlight><highlight class="stringliteral">&quot;TrackMoveTop&quot;</highlight><highlight class="normal">))));</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnMoveBottomID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Move<sp/>Track<sp/>to<sp/>&amp;Bottom&quot;</highlight><highlight class="normal">)<sp/>+<sp/>wxT(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">)<sp/>+<sp/></highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;GetCommandManager()-&gt;GetKeyFromName(wxT(</highlight><highlight class="stringliteral">&quot;TrackMoveBottom&quot;</highlight><highlight class="normal">))));</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;AppendSeparator();</highlight></codeline>
<codeline lineno="788"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal">}</highlight></codeline>
<codeline lineno="790"><highlight class="normal"></highlight></codeline>
<codeline lineno="791"><highlight class="normal"></highlight><highlight class="comment">//<sp/>static</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="792"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a6706d07cc464d81bf05575a1f3028644" kindref="member">TrackPanel::BuildVRulerMenuItems</ref></highlight></codeline>
<codeline lineno="793" refid="class_track_panel_1a6706d07cc464d81bf05575a1f3028644" refkind="member"><highlight class="normal">(wxMenu<sp/>*<sp/>menu,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>firstId,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxArrayString<sp/>&amp;names)</highlight></codeline>
<codeline lineno="794"><highlight class="normal">{</highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/>firstId;</highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0,<sp/>nn<sp/>=<sp/>names.size();<sp/>ii<sp/>&lt;<sp/>nn;<sp/>++ii)</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>menu-&gt;AppendRadioItem(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">++,<sp/>names[ii]);</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;AppendSeparator();</highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnZoomInVerticalID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Zoom<sp/>In\tLeft-Click/Left-Drag&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnZoomOutVerticalID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Zoom<sp/>Out\tShift-Left-Click&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/>menu-&gt;Append(OnZoomFitVerticalID,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Zoom<sp/>to<sp/>Fit\tShift-Right-Click&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="802"><highlight class="normal">}</highlight></codeline>
<codeline lineno="803"><highlight class="normal"></highlight></codeline>
<codeline lineno="804" refid="class_track_panel_1af7bfecf9618f80f743ed761a7c1be8e8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1af7bfecf9618f80f743ed761a7c1be8e8" kindref="member">TrackPanel::DeleteMenus</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="805"><highlight class="normal">{</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Note<sp/>that<sp/>the<sp/>submenus<sp/>(mRateMenu,<sp/>...)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>are<sp/>deleted<sp/>by<sp/>their<sp/>parent</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>)<sp/>{</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>;</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="812"><highlight class="normal"></highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref>)<sp/>{</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref>;</highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="817"><highlight class="normal"></highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref>)<sp/>{</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref>;</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="822"><highlight class="normal"></highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>)<sp/>{</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>;</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="827"><highlight class="normal"></highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a5e797a078579ae83a2953dc3cdd4e267" kindref="member">mRulerWaveformMenu</ref>;</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aaae33e2c9a2354384a4d70672d404074" kindref="member">mRulerSpectrumMenu</ref>;</highlight></codeline>
<codeline lineno="830"><highlight class="normal">}</highlight></codeline>
<codeline lineno="831"><highlight class="normal"></highlight></codeline>
<codeline lineno="832"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="833"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackPanel::UpdateVirtualStereoOrder()</highlight></codeline>
<codeline lineno="834"><highlight class="normal">{</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>temp;</highlight></codeline>
<codeline lineno="838"><highlight class="normal"></highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>&amp;&amp;<sp/>t-&gt;<ref refid="class_track_1a9c988f7695a546bf52ee2dc859db0345" kindref="member">GetChannel</ref>()<sp/>==<sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fad1d594e80888976c85f7a4a258dc2f19" kindref="member">Track::MonoChannel</ref>){</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wt<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)t;</highlight></codeline>
<codeline lineno="842"><highlight class="normal"></highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(WaveTrack::mMonoAsVirtualStereo<sp/>&amp;&amp;<sp/>wt-&gt;<ref refid="class_wave_track_1a39fb6133b9ead187e3eb8127fd8966c0" kindref="member">GetPan</ref>()<sp/>!=<sp/>0){</highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>wt-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(temp*wt-&gt;GetVirtualTrackPercentage());</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(temp<sp/>-<sp/>wt-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>(),</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!WaveTrack::mMonoAsVirtualStereo<sp/>&amp;&amp;<sp/>wt-&gt;<ref refid="class_wave_track_1a39fb6133b9ead187e3eb8127fd8966c0" kindref="member">GetPan</ref>()<sp/>!=<sp/>0){</highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(wt-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>+<sp/>wt-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t){</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;ReorderList(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="856"><highlight class="normal">}</highlight></codeline>
<codeline lineno="857"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="858"><highlight class="normal"></highlight></codeline>
<codeline lineno="859" refid="class_track_panel_1a1a326663822597a30806a592922c06b1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a1a326663822597a30806a592922c06b1" kindref="member">TrackPanel::UpdatePrefs</ref>()</highlight></codeline>
<codeline lineno="860"><highlight class="normal">{</highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Read(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/AutoScroll&quot;</highlight><highlight class="normal">),<sp/>&amp;<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a32de00c7e8d82498b5f34b792fb51b94" kindref="member">bUpdateTrackIndicator</ref>,</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Read(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/AdjustSelectionEdges&quot;</highlight><highlight class="normal">),<sp/>&amp;<ref refid="class_track_panel_1aaf3e6420d428eefbd10dc13f558fba06" kindref="member">mAdjustSelectionEdges</ref>,</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Read(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/CircularTrackNavigation&quot;</highlight><highlight class="normal">),<sp/>&amp;<ref refid="class_track_panel_1af02524f80a857fce1fc05853ea880e76" kindref="member">mCircularTrackNavigation</ref>,</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Read(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/Solo&quot;</highlight><highlight class="normal">),<sp/>&amp;<ref refid="class_track_panel_1ad89b7920398dbf82965379e2d0ba0013" kindref="member">mSoloPref</ref>,<sp/>wxT(</highlight><highlight class="stringliteral">&quot;Simple&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="868"><highlight class="normal"></highlight></codeline>
<codeline lineno="869"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>temp<sp/>=<sp/>WaveTrack::mMonoAsVirtualStereo;</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Read(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/MonoAsVirtualStereo&quot;</highlight><highlight class="normal">),<sp/>&amp;WaveTrack::mMonoAsVirtualStereo,</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="873"><highlight class="normal"></highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(WaveTrack::mMonoAsVirtualStereo<sp/>!=<sp/>temp)</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>UpdateVirtualStereoOrder();</highlight></codeline>
<codeline lineno="876"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="877"><highlight class="normal"></highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a836900fa1e645d7f271ebe7e612d2b2a" kindref="member">UpdatePrefs</ref>();</highlight></codeline>
<codeline lineno="879"><highlight class="normal"></highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>)<sp/>{</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1a933ebde770fbf92ac754ea68b01c55b5" kindref="member">UpdatePrefs</ref>();</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="883"><highlight class="normal"></highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>All<sp/>vertical<sp/>rulers<sp/>must<sp/>be<sp/>recalculated<sp/>since<sp/>the<sp/>minimum<sp/>and<sp/>maximum</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>frequences<sp/>may<sp/>have<sp/>been<sp/>changed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac2d7a00f2dc191f5b6f3e2804b05aaa5" kindref="member">UpdateVRulers</ref>();</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>();</highlight></codeline>
<codeline lineno="888"><highlight class="normal">}</highlight></codeline>
<codeline lineno="889"><highlight class="normal"></highlight></codeline>
<codeline lineno="893" refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">TrackPanel::SetCapturedTrack</ref>(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7b" kindref="member">MouseCaptureEnum</ref><sp/>MouseCapture<sp/>)</highlight></codeline>
<codeline lineno="894"><highlight class="normal">{</highlight></codeline>
<codeline lineno="895"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXDEBUG__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(MouseCapture<sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>);</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(MouseCapture<sp/>!=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>);</highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="902"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/>MouseCapture;</highlight></codeline>
<codeline lineno="905"><highlight class="normal">}</highlight></codeline>
<codeline lineno="906"><highlight class="normal"></highlight></codeline>
<codeline lineno="907" refid="class_track_panel_1a942c08d24411790207fd1e275448516e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a942c08d24411790207fd1e275448516e" kindref="member">TrackPanel::SelectNone</ref>()</highlight></codeline>
<codeline lineno="908"><highlight class="normal">{</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(t)<sp/>{</highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_track_1a194ddc15cc66ade28b85d2417dc1694a" kindref="member">SetSelected</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>();</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="915"><highlight class="normal">}</highlight></codeline>
<codeline lineno="916"><highlight class="normal"></highlight></codeline>
<codeline lineno="918" refid="class_track_panel_1af32af2eefcb2cfde13efdd76a7749aae" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1af32af2eefcb2cfde13efdd76a7749aae" kindref="member">TrackPanel::SelectTracksByLabel</ref>(<sp/><ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*lt<sp/>)</highlight></codeline>
<codeline lineno="919"><highlight class="normal">{</highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="922"><highlight class="normal"></highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//do<sp/>nothing<sp/>if<sp/>at<sp/>least<sp/>one<sp/>other<sp/>track<sp/>is<sp/>selected</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(t)<sp/>{</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>()<sp/>&amp;&amp;<sp/>t<sp/>!=<sp/>lt<sp/>)</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>();</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//otherwise,<sp/>select<sp/>all<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>t<sp/>)</highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_track_1a194ddc15cc66ade28b85d2417dc1694a" kindref="member">SetSelected</ref>(<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>();</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="937"><highlight class="normal">}</highlight></codeline>
<codeline lineno="938"><highlight class="normal"></highlight></codeline>
<codeline lineno="939"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Set<sp/>selection<sp/>length<sp/>to<sp/>the<sp/>length<sp/>of<sp/>a<sp/>track<sp/>--<sp/>but<sp/>if<sp/>sync-lock<sp/>is<sp/>turned</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="940"><highlight class="normal"></highlight><highlight class="comment">//<sp/>on,<sp/>use<sp/>the<sp/>largest<sp/>possible<sp/>selection<sp/>in<sp/>the<sp/>sync-lock<sp/>group.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="941"><highlight class="normal"></highlight><highlight class="comment">//<sp/>If<sp/>it&apos;s<sp/>a<sp/>stereo<sp/>track,<sp/>do<sp/>the<sp/>same<sp/>for<sp/>the<sp/>stereo<sp/>channels.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="942" refid="class_track_panel_1ae4c957bea9775488e085c370710cd566" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae4c957bea9775488e085c370710cd566" kindref="member">TrackPanel::SelectTrackLength</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)</highlight></codeline>
<codeline lineno="943"><highlight class="normal">{</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="_project_8cpp_1a897aa047b58617a9acc187fc882e3bb4" kindref="member">GetActiveProject</ref>();</highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_sync_locked_tracks_iterator" kindref="compound">SyncLockedTracksIterator</ref><sp/><ref refid="conv2dtest_8m_1a4b223b47b1bd746a69ed8ac37c4b16db" kindref="member">it</ref>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*t1<sp/>=<sp/>it.<ref refid="class_sync_locked_tracks_iterator_1aa53e5be7c38eca13ad9030c8e497164c" kindref="member">StartWith</ref>(t);</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>minOffset<sp/>=<sp/>t-&gt;<ref refid="class_track_1a7dd93b99ae92788d10c3010127002e6e" kindref="member">GetOffset</ref>();</highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxEnd<sp/>=<sp/>t-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>();</highlight></codeline>
<codeline lineno="949"><highlight class="normal"></highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>we<sp/>have<sp/>a<sp/>sync-lock<sp/>group<sp/>and<sp/>sync-lock<sp/>linking<sp/>is<sp/>on,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>the<sp/>sync-lock<sp/>group<sp/>tracks.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p-&gt;<ref refid="class_audacity_project_1aa24fdad451943202139086ff4c4f48bc" kindref="member">IsSyncLocked</ref>()<sp/>&amp;&amp;<sp/>t1<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/>;<sp/>t1;<sp/>t1<sp/>=<sp/>it.<ref refid="class_sync_locked_tracks_iterator_1a09ddbd2c99421aa60ec63c1ec0ce3f51" kindref="member">Next</ref>())</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t1-&gt;<ref refid="class_track_1a7dd93b99ae92788d10c3010127002e6e" kindref="member">GetOffset</ref>()<sp/>&lt;<sp/>minOffset)</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>minOffset<sp/>=<sp/>t1-&gt;<ref refid="class_track_1a7dd93b99ae92788d10c3010127002e6e" kindref="member">GetOffset</ref>();</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t1-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>()<sp/>&gt;<sp/>maxEnd)</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxEnd<sp/>=<sp/>t1-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>();</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Otherwise,<sp/>check<sp/>for<sp/>a<sp/>stereo<sp/>pair</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t1<sp/>=<sp/>t-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t1)</highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t1-&gt;<ref refid="class_track_1a7dd93b99ae92788d10c3010127002e6e" kindref="member">GetOffset</ref>()<sp/>&lt;<sp/>minOffset)</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>minOffset<sp/>=<sp/>t1-&gt;<ref refid="class_track_1a7dd93b99ae92788d10c3010127002e6e" kindref="member">GetOffset</ref>();</highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t1-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>()<sp/>&gt;<sp/>maxEnd)</highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxEnd<sp/>=<sp/>t1-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>();</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="974"><highlight class="normal"></highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PRL:<sp/>double<sp/>click<sp/>or<sp/>click<sp/>on<sp/>track<sp/>control.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>should<sp/>this<sp/>select<sp/>all<sp/>frequencies<sp/>too?<sp/><sp/>I<sp/>think<sp/>not.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a21a6af7b052d9d6bd39cc1db088e8f5d" kindref="member">setTimes</ref>(minOffset,<sp/>maxEnd);</highlight></codeline>
<codeline lineno="978"><highlight class="normal">}</highlight></codeline>
<codeline lineno="979"><highlight class="normal"></highlight></codeline>
<codeline lineno="980" refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">TrackPanel::GetTracksUsableArea</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*width,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*height)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="981"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/>GetSize(width,<sp/>height);</highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(width)<sp/>{</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*width<sp/>-=<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>();</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*width<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" kindref="member">kRightMargin</ref>;</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*width<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0,<sp/>*width);</highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="988"><highlight class="normal">}</highlight></codeline>
<codeline lineno="989"><highlight class="normal"></highlight></codeline>
<codeline lineno="992" refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" refkind="member"><highlight class="normal"><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">TrackPanel::GetProject</ref>()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="993"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//JKC<sp/>casting<sp/>away<sp/>constness<sp/>here.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Do<sp/>it<sp/>in<sp/>two<sp/>stages<sp/>in<sp/>case<sp/>&apos;this&apos;<sp/>is<sp/>not<sp/>a<sp/>wxWindow.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//when<sp/>the<sp/>compiler<sp/>will<sp/>flag<sp/>the<sp/>error.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/>wxWindow<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>pConstWind<sp/>=<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/>wxWindow<sp/>*<sp/>pWind=(wxWindow*)pConstWind;</highlight></codeline>
<codeline lineno="999"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_NOTEBOOK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/>pWind<sp/>=<sp/>pWind-&gt;GetParent();<sp/></highlight><highlight class="comment">//Page</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<sp/>pWind<sp/>);</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/>pWind<sp/>=<sp/>pWind-&gt;GetParent();<sp/></highlight><highlight class="comment">//Notebook</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<sp/>pWind<sp/>);</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/>pWind<sp/>=<sp/>pWind-&gt;GetParent();<sp/></highlight><highlight class="comment">//MainPanel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<sp/>pWind<sp/>);</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/>pWind<sp/>=<sp/>pWind-&gt;GetParent();<sp/></highlight><highlight class="comment">//Project</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<sp/>pWind<sp/>);</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="class_audacity_project" kindref="compound">AudacityProject</ref>*)pWind;</highlight></codeline>
<codeline lineno="1010"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"></highlight></codeline>
<codeline lineno="1013" refid="class_track_panel_1a8cddb063467280ce559807d31493b67a" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8cddb063467280ce559807d31493b67a" kindref="member">TrackPanel::OnTimer</ref>(wxTimerEvent&amp;<sp/>)</highlight></codeline>
<codeline lineno="1014"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac49fa36d784ff704edbf92cafca23b7c" kindref="member">mTimeCount</ref>++;</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>If<sp/>the<sp/>user<sp/>is<sp/>dragging<sp/>the<sp/>mouse<sp/>and<sp/>there<sp/>is<sp/>a<sp/>track<sp/>that</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>has<sp/>captured<sp/>the<sp/>mouse,<sp/>then<sp/>scroll<sp/>the<sp/>screen,<sp/>as<sp/>necessary.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1018"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>==<ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf90290bb93700a5564c87b3c6d056fd6" kindref="member">IsSelecting</ref>)<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8d0d7d27b645b0ca5bbc393fd83a0098" kindref="member">ScrollDuringDrag</ref>();</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"></highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>();</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"></highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>whether<sp/>we<sp/>were<sp/>playing<sp/>or<sp/>recording,<sp/>but<sp/>the<sp/>stream<sp/>has<sp/>stopped.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1025"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p-&gt;<ref refid="class_audacity_project_1a0c43e740f2b1e8f08d1d74bf38fd8abd" kindref="member">GetAudioIOToken</ref>()&gt;0<sp/>&amp;&amp;<sp/>!<ref refid="class_track_panel_1ac869cf3afecdf74bd6b9faf18c85e6fc" kindref="member">IsAudioActive</ref>())</highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//the<sp/>stream<sp/>may<sp/>have<sp/>been<sp/>started<sp/>up<sp/>after<sp/>this<sp/>one<sp/>finished<sp/>(by<sp/>some<sp/>other<sp/>project)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//in<sp/>that<sp/>case<sp/>reset<sp/>the<sp/>buttons<sp/>don&apos;t<sp/>stop<sp/>the<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1a42b3845e8ab4f0e32fa04be54562d0c1" kindref="member">GetControlToolBar</ref>()-&gt;<ref refid="class_control_tool_bar_1a4aab4234b15a2dd82baad56119e7d0c0" kindref="member">StopPlaying</ref>(!<ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a07490d6ae881910c5ea13cdf011835f3" kindref="member">IsStreamActive</ref>());</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"></highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Next,<sp/>check<sp/>to<sp/>see<sp/>if<sp/>we<sp/>were<sp/>playing<sp/>or<sp/>recording</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>audio,<sp/>but<sp/>now<sp/>Audio<sp/>I/O<sp/>is<sp/>completely<sp/>finished.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p-&gt;<ref refid="class_audacity_project_1a0c43e740f2b1e8f08d1d74bf38fd8abd" kindref="member">GetAudioIOToken</ref>()&gt;0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!<ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1ae38ba2eafdaf5a1579366d788fd669d9" kindref="member">IsAudioTokenActive</ref>(p-&gt;<ref refid="class_audacity_project_1a0c43e740f2b1e8f08d1d74bf38fd8abd" kindref="member">GetAudioIOToken</ref>()))</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1adf3f9d557e8b2a9334eed04b3398ad21" kindref="member">FixScrollbars</ref>();</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1a82a9634b37418bbd1181f81a47f75e7e" kindref="member">SetAudioIOToken</ref>(0);</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1ad06c48692cfa4c2e099f1895b98ca7bf" kindref="member">RedrawProject</ref>();</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"></highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad93db3f8c1d1e4460292b4ebc9bdffad" kindref="member">mRedrawAfterStop</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"></highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//ANSWER-ME:<sp/>Was<sp/>DisplaySelection<sp/>added<sp/>to<sp/>solve<sp/>a<sp/>repaint<sp/>problem?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"></highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Notify<sp/>listeners<sp/>for<sp/>timer<sp/>ticks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxCommandEvent<sp/><ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>(EVT_TRACK_PANEL_TIMER);</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;GetEventHandler()-&gt;ProcessEvent(e);</highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"></highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>playPos<sp/>=<sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1adaf7977e341e8012b03dca8c733f24e1" kindref="member">GetStreamTime</ref>();</highlight></codeline>
<codeline lineno="1054"><highlight class="normal"></highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>sequence<sp/>of<sp/>the<sp/>next<sp/>two<sp/>is<sp/>important.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1056"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a4c24a3389932e326341a16bfeec01242" kindref="member">TimerUpdateScrubbing</ref>(playPos);</highlight></codeline>
<codeline lineno="1058"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a662d3dfeb567ae08aa8970e646ae719d" kindref="member">TimerUpdateIndicator</ref>(playPos);</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"></highlight></codeline>
<codeline lineno="1061"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad3c380c2377c504b2b86cdbdee4f3d5f" kindref="member">DrawOverlays</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1062"><highlight class="normal"></highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="class_track_panel_1ac869cf3afecdf74bd6b9faf18c85e6fc" kindref="member">IsAudioActive</ref>()<sp/>&amp;&amp;<sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a841f37644672ecb5ea445bfb52907c1f" kindref="member">GetNumCaptureChannels</ref>())<sp/>{</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"></highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Periodically<sp/>update<sp/>the<sp/>display<sp/>while<sp/>recording</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1066"><highlight class="normal"></highlight></codeline>
<codeline lineno="1067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1ad93db3f8c1d1e4460292b4ebc9bdffad" kindref="member">mRedrawAfterStop</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad93db3f8c1d1e4460292b4ebc9bdffad" kindref="member">mRedrawAfterStop</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a5f3cb2e6b4a5ba7817d392f4fa986b42" kindref="member">TP_ScrollUpDown</ref>(<sp/>99999999<sp/>);</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="class_track_panel_1ac49fa36d784ff704edbf92cafca23b7c" kindref="member">mTimeCount</ref><sp/>%<sp/>5)<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Must<sp/>tell<sp/>OnPaint()<sp/>to<sp/>recreate<sp/>the<sp/>backing<sp/>bitmap</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>since<sp/>we&apos;ve<sp/>not<sp/>done<sp/>a<sp/>full<sp/>refresh.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9c034b23c400af061256ab309776baf4" kindref="member">mRefreshBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="class_track_panel_1ac49fa36d784ff704edbf92cafca23b7c" kindref="member">mTimeCount</ref><sp/>&gt;<sp/>1000)</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac49fa36d784ff704edbf92cafca23b7c" kindref="member">mTimeCount</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1084"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"></highlight></codeline>
<codeline lineno="1089" refid="class_track_panel_1a8d0d7d27b645b0ca5bbc393fd83a0098" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8d0d7d27b645b0ca5bbc393fd83a0098" kindref="member">TrackPanel::ScrollDuringDrag</ref>()</highlight></codeline>
<codeline lineno="1090"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>If<sp/>we&apos;re<sp/>&quot;autoscrolling&quot;<sp/>(which<sp/>means<sp/>that<sp/>we&apos;re<sp/>scrolling</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1092"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>because<sp/>the<sp/>user<sp/>dragged<sp/>from<sp/>inside<sp/>to<sp/>outside<sp/>the<sp/>window,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>not<sp/>because<sp/>the<sp/>user<sp/>clicked<sp/>in<sp/>the<sp/>scroll<sp/>bar),<sp/>then</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>the<sp/>selection<sp/>code<sp/>needs<sp/>to<sp/>be<sp/>handled<sp/>slightly<sp/>differently.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1095"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>We<sp/>set<sp/>this<sp/>flag<sp/>(&quot;mAutoScrolling&quot;)<sp/>to<sp/>tell<sp/>the<sp/>selecting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>code<sp/>that<sp/>we<sp/>didn&apos;t<sp/>get<sp/>here<sp/>as<sp/>a<sp/>result<sp/>of<sp/>a<sp/>mouse<sp/>event,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>and<sp/>therefore<sp/>it<sp/>should<sp/>ignore<sp/>the<sp/>mouseEvent<sp/>parameter,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>and<sp/>instead<sp/>use<sp/>the<sp/>last<sp/>known<sp/>mouse<sp/>position.<sp/><sp/>Setting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>this<sp/>flag<sp/>also<sp/>causes<sp/>the<sp/>Mac<sp/>to<sp/>redraw<sp/>immediately<sp/>rather</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1100"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>than<sp/>waiting<sp/>for<sp/>the<sp/>next<sp/>update<sp/>event;<sp/>this<sp/>makes<sp/>scrolling</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>smoother<sp/>on<sp/>MacOS<sp/>9.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1102"><highlight class="normal"></highlight></codeline>
<codeline lineno="1103"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a2b9d69055e7480fd704146b70509f790" kindref="member">mMouseMostRecentX</ref><sp/>&gt;=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>.x<sp/>+<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>.width)<sp/>{</highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1af42dc2695096873789d9963aa6bdd61e" kindref="member">TP_ScrollRight</ref>();</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a2b9d69055e7480fd704146b70509f790" kindref="member">mMouseMostRecentX</ref><sp/>&lt;<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>.x)<sp/>{</highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a61ff8716044b54ab0dcc3e4bad15d05b" kindref="member">TP_ScrollLeft</ref>();</highlight></codeline>
<codeline lineno="1110"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1111"><highlight class="normal"></highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>To<sp/>keep<sp/>the<sp/>selection<sp/>working<sp/>properly<sp/>as<sp/>we<sp/>scroll,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>we<sp/>fake<sp/>a<sp/>mouse<sp/>event<sp/>(remember,<sp/>this<sp/>method<sp/>is<sp/>called</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>from<sp/>a<sp/>timer<sp/>tick).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1116"><highlight class="normal"></highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>For<sp/>some<sp/>reason,<sp/>GCC<sp/>won&apos;t<sp/>let<sp/>us<sp/>pass<sp/>this<sp/>directly.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxMouseEvent<sp/><ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>(wxEVT_MOTION);</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a16fa8c66608b0fc61d96d855b77f589e" kindref="member">HandleSelect</ref>(e);</highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1122"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"></highlight></codeline>
<codeline lineno="1124" refid="class_track_panel_1ace5b33aeb78931e4525122bcbd64e16d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ace5b33aeb78931e4525122bcbd64e16d" kindref="member">TrackPanel::DrawQuickPlayIndicator</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>snapped)</highlight></codeline>
<codeline lineno="1125"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"></highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Erase<sp/>the<sp/>old<sp/>indicator.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a3db59897498463b3928e03fe5847a0aa" kindref="member">mOldQPIndicatorPos</ref><sp/>!=<sp/>x)<sp/>{</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>OSX,<sp/>if<sp/>a<sp/>HiDPI<sp/>resolution<sp/>is<sp/>being<sp/>used,<sp/>the<sp/>line<sp/>will<sp/>actually<sp/>take<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>more<sp/>than<sp/>1<sp/>pixel<sp/>(even<sp/>though<sp/>it<sp/>is<sp/>drawn<sp/>as<sp/>1),<sp/>so<sp/>we<sp/>restore<sp/>the<sp/>surrounding</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>pixels<sp/>as<sp/>well.<sp/><sp/>(This<sp/>is<sp/>because<sp/>the<sp/>wxClientDC<sp/>doesn&apos;t<sp/>know<sp/>about<sp/>the<sp/>scaling.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(<ref refid="class_track_panel_1a3db59897498463b3928e03fe5847a0aa" kindref="member">mOldQPIndicatorPos</ref><sp/>-<sp/>1,<sp/>0,<sp/>3,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight(),<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/><ref refid="class_track_panel_1a3db59897498463b3928e03fe5847a0aa" kindref="member">mOldQPIndicatorPos</ref><sp/>-<sp/>1,<sp/>0);</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(mOldQPIndicatorPos,<sp/>0,<sp/>1,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight(),<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/><ref refid="class_track_panel_1a3db59897498463b3928e03fe5847a0aa" kindref="member">mOldQPIndicatorPos</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1138"><highlight class="normal"></highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mOldQPIndicatorPos<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"></highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(x<sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>snapped<sp/>?<sp/><ref refid="class_a_color_1a4bd15996d1b16cbecaf10bf016cd9646" kindref="member">AColor::SnapGuidePen</ref>(&amp;dc)<sp/>:<sp/><ref refid="class_a_color_1a3d6f7afabbb757c3630619df34761e1b" kindref="member">AColor::Light</ref>(&amp;dc,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"></highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>indicator<sp/>in<sp/>all<sp/>visible<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_visible_track_iterator" kindref="compound">VisibleTrackIterator</ref><sp/>iter(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>());</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>())</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>virtual<sp/>coordinate<sp/>to<sp/>physical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"></highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>the<sp/>NEW<sp/>indicator<sp/>in<sp/>its<sp/>new<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(dc,</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x,</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>,</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x,</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Minus<sp/>one<sp/>more<sp/>because<sp/>AColor::Line<sp/>includes<sp/>both<sp/>endpoints</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>+<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref><sp/>-<sp/>1<sp/>);</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"></highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3db59897498463b3928e03fe5847a0aa" kindref="member">mOldQPIndicatorPos</ref><sp/>=<sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>;</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1163"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"></highlight></codeline>
<codeline lineno="1165" refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">TrackPanel::GetScreenEndTime</ref>()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="1166"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width;</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(&amp;width,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(width,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1170"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"></highlight></codeline>
<codeline lineno="1172" refid="class_track_panel_1a662d3dfeb567ae08aa8970e646ae719d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a662d3dfeb567ae08aa8970e646ae719d" kindref="member">TrackPanel::TimerUpdateIndicator</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>playPos)</highlight></codeline>
<codeline lineno="1173"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1ac869cf3afecdf74bd6b9faf18c85e6fc" kindref="member">IsAudioActive</ref>())</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3c48a491488b35dd70426d11b264955e" kindref="member">mNewIndicatorX</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>the<sp/>horizontal<sp/>position<sp/>of<sp/>the<sp/>indicator</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1178"><highlight class="normal"></highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>();</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>onScreen<sp/>=<sp/>playPos<sp/>&gt;=<sp/>0.0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" kindref="member">between_incexc</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>,</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>playPos,</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>());</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"></highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>displays<sp/>the<sp/>audio<sp/>time,<sp/>too...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"></highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>BG:<sp/>Scroll<sp/>screen<sp/>if<sp/>option<sp/>is<sp/>set</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>msmeyer:<sp/>But<sp/>only<sp/>if<sp/>not<sp/>playing<sp/>looped<sp/>or<sp/>in<sp/>one-second<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a32de00c7e8d82498b5f34b792fb51b94" kindref="member">bUpdateTrackIndicator</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1a2d83eeb120fa6b141d0343a1a8792c96" kindref="member">mLastPlayMode</ref><sp/>!=<sp/><ref refid="_project_8h_1a188092ed559d356ade9a517d60ec3f34ad53cd4444a1569bf088f2b33b44ed310" kindref="member">loopedPlay</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1a2d83eeb120fa6b141d0343a1a8792c96" kindref="member">mLastPlayMode</ref><sp/>!=<sp/><ref refid="_project_8h_1a188092ed559d356ade9a517d60ec3f34a931336041b5c3f273ec3b7c9a13b069a" kindref="member">oneSecondPlay</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>playPos<sp/>&gt;=<sp/>0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!onScreen<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!<ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1aa83356a7bb2153f67f4c82b72ed5185b" kindref="member">IsPaused</ref>()<sp/>)</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ab4427ec0211190e135643aee17b82083" kindref="member">TP_ScrollWindow</ref>(<sp/>playPos<sp/>);</highlight></codeline>
<codeline lineno="1199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1200"><highlight class="normal"></highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Always<sp/>update<sp/>scrollbars<sp/>even<sp/>if<sp/>not<sp/>scrolling<sp/>the<sp/>window.<sp/>This<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>important<sp/>when<sp/>NEW<sp/>audio<sp/>is<sp/>recorded,<sp/>because<sp/>this<sp/>can<sp/>change<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>length<sp/>of<sp/>the<sp/>project<sp/>and<sp/>therefore<sp/>the<sp/>appearance<sp/>of<sp/>the<sp/>scrollbar.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"></highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3c48a491488b35dd70426d11b264955e" kindref="member">mNewIndicatorX</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(playPos,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1208"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"></highlight></codeline>
<codeline lineno="1210" refid="class_track_panel_1a3c7126ed6ae625ba2c409c490a7b70e6" refkind="member"><highlight class="normal">std::pair&lt;wxRect,<sp/>bool&gt;<sp/><ref refid="class_track_panel_1a3c7126ed6ae625ba2c409c490a7b70e6" kindref="member">TrackPanel::GetIndicatorRectangle</ref>()</highlight></codeline>
<codeline lineno="1211"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(<ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref>,<sp/>0,<sp/>1,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight());</highlight></codeline>
<codeline lineno="1213"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1214"><highlight class="normal"><sp/><sp/><sp/>rect.Inflate(1,<sp/>0);</highlight></codeline>
<codeline lineno="1215"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1216"><highlight class="normal"></highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std::make_pair(</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect,</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>!=<sp/><ref refid="class_track_panel_1a3c48a491488b35dd70426d11b264955e" kindref="member">mNewIndicatorX</ref></highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="1221"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"></highlight></codeline>
<codeline lineno="1223" refid="class_track_panel_1a024ccb44ef28e5ae33815fa67923447e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a024ccb44ef28e5ae33815fa67923447e" kindref="member">TrackPanel::UndrawIndicator</ref>(wxDC<sp/>&amp;<sp/>dc)</highlight></codeline>
<codeline lineno="1224"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>The<sp/>&quot;indicator&quot;<sp/>is<sp/>the<sp/>little<sp/>graphical<sp/>mark<sp/>shown<sp/>in<sp/>the<sp/>ruler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1226"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>that<sp/>indicates<sp/>where<sp/>the<sp/>current<sp/>play/record<sp/>position<sp/>is.<sp/>(This<sp/>also</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>draws<sp/>the<sp/>moving<sp/>vertical<sp/>line.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1228"><highlight class="normal"></highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Erase<sp/>the<sp/>old<sp/>indicator.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>!=<sp/>-1)</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width;</highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(&amp;width,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>onScreen<sp/>=<sp/><ref refid="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" kindref="member">between_incexc</ref>(<ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>(),</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref>,</highlight></codeline>
<codeline lineno="1237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()<sp/>+<sp/>width);</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(onScreen)</highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>LL:<sp/><sp/>Keep<sp/>from<sp/>trying<sp/>to<sp/>blit<sp/>outsize<sp/>of<sp/>the<sp/>source<sp/>DC.<sp/><sp/>This<sp/>results<sp/>in<sp/>a<sp/>crash<sp/>on</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>OSX<sp/>due<sp/>to<sp/>allocating<sp/>memory<sp/>using<sp/>negative<sp/>sizes<sp/>and<sp/>can<sp/>be<sp/>caused<sp/>by<sp/>resizing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>project<sp/>window<sp/>while<sp/>recording<sp/>or<sp/>playing.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>w<sp/>=<sp/>dc.GetSize().GetWidth();</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>&gt;=<sp/>w)<sp/>{</highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>=<sp/>w<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"></highlight></codeline>
<codeline lineno="1248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Restore<sp/>the<sp/>old<sp/>position<sp/>from<sp/>the<sp/>backing<sp/>DC.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1249"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>OSX,<sp/>if<sp/>a<sp/>HiDPI<sp/>resolution<sp/>is<sp/>being<sp/>used,<sp/>the<sp/>line<sp/>will<sp/>actually<sp/>take<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>more<sp/>than<sp/>1<sp/>pixel<sp/>(even<sp/>though<sp/>it<sp/>is<sp/>drawn<sp/>as<sp/>1),<sp/>so<sp/>we<sp/>restore<sp/>the<sp/>surrounding</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>pixels<sp/>as<sp/>well.<sp/><sp/>(This<sp/>is<sp/>because<sp/>the<sp/>wxClientDC<sp/>doesn&apos;t<sp/>know<sp/>about<sp/>the<sp/>scaling.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(<ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>-<sp/>1,<sp/>0,<sp/>3,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight(),<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>-<sp/>1,<sp/>0);</highlight></codeline>
<codeline lineno="1254"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(mLastIndicatorX,<sp/>0,<sp/>1,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight(),<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="1256"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1258"><highlight class="normal"></highlight></codeline>
<codeline lineno="1259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0c030045e204ac35bb3066a260831ce3" kindref="member">mRuler</ref>-&gt;<ref refid="class_adorned_ruler_panel_1af657d63db45813bd346b0b45ac1c35d4" kindref="member">ClearIndicator</ref>();</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1261"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"></highlight></codeline>
<codeline lineno="1263" refid="class_track_panel_1a8ec4102237c8d4e852ef0f641712882d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8ec4102237c8d4e852ef0f641712882d" kindref="member">TrackPanel::DoDrawIndicator</ref>(wxDC<sp/>&amp;<sp/>dc)</highlight></codeline>
<codeline lineno="1264"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1265"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>=<sp/><ref refid="class_track_panel_1a3c48a491488b35dd70426d11b264955e" kindref="member">mNewIndicatorX</ref>;</highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref><sp/>==<sp/>-1)</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1268"><highlight class="normal"></highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>pos<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(<ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref>,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"></highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>play/record<sp/>color</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>rec<sp/>=<sp/>(<ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a841f37644672ecb5ea445bfb52907c1f" kindref="member">GetNumCaptureChannels</ref>()<sp/>&gt;<sp/>0);</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a311b84ba609f62044681f52ef2e075cf" kindref="member">AColor::IndicatorColor</ref>(<sp/>&amp;dc,<sp/>!rec);</highlight></codeline>
<codeline lineno="1274"><highlight class="normal"></highlight></codeline>
<codeline lineno="1275"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0c030045e204ac35bb3066a260831ce3" kindref="member">mRuler</ref>-&gt;<ref refid="class_adorned_ruler_panel_1a85f502d7af3de69507aeb394177c12f6" kindref="member">DrawIndicator</ref>(<sp/>pos,<sp/>rec<sp/>);</highlight></codeline>
<codeline lineno="1276"><highlight class="normal"></highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Ensure<sp/>that<sp/>we<sp/>don&apos;t<sp/>draw<sp/>through<sp/>the<sp/>TrackInfo<sp/>or<sp/>vertical<sp/>ruler.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>clip<sp/>=<sp/>GetRect();</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>leftCutoff<sp/>=<sp/>clip.x<sp/>+<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>();</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>rightCutoff<sp/>=<sp/>clip.x<sp/>+<sp/>clip.width<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" kindref="member">kRightMargin</ref>;</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" kindref="member">between_incexc</ref>(leftCutoff,<sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref>,<sp/>rightCutoff))</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"></highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>indicator<sp/>in<sp/>all<sp/>visible<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1287"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_visible_track_iterator" kindref="compound">VisibleTrackIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()<sp/>);</highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>()<sp/>)</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Don&apos;t<sp/>draw<sp/>the<sp/>indicator<sp/>in<sp/>label<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetKind()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref><sp/>)</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"></highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>virtual<sp/>coordinate<sp/>to<sp/>physical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="1298"><highlight class="normal"></highlight></codeline>
<codeline lineno="1299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>the<sp/>NEW<sp/>indicator<sp/>in<sp/>its<sp/>new<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(dc,</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref>,</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>,</highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a30d53afc3d2f99fbd024056c50e292bc" kindref="member">mLastIndicatorX</ref>,</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Minus<sp/>one<sp/>more<sp/>because<sp/>AColor::Line<sp/>includes<sp/>both<sp/>endpoints</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>+<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref><sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1307"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1308"><highlight class="normal"></highlight></codeline>
<codeline lineno="1309"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1310"><highlight class="normal"></highlight><highlight class="comment">//<sp/>now<sp/>unused</highlight></codeline>
<codeline lineno="1315"><highlight class="comment"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackPanel::DrawCursor()</highlight></codeline>
<codeline lineno="1316"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aff33f2fa5cda0ffb92a1dd41758e418c" kindref="member">DoDrawCursor</ref>(<sp/>dc<sp/>);</highlight></codeline>
<codeline lineno="1319"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1321"><highlight class="normal"></highlight></codeline>
<codeline lineno="1322" refid="class_track_panel_1a8e37a1fde074f6a21b55ec239214a9a6" refkind="member"><highlight class="normal">std::pair&lt;wxRect,<sp/>bool&gt;<sp/><ref refid="class_track_panel_1a8e37a1fde074f6a21b55ec239214a9a6" kindref="member">TrackPanel::GetCursorRectangle</ref>()</highlight></codeline>
<codeline lineno="1323"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ad98c3c19684309127345db2dc9ea7165" kindref="member">isPoint</ref>())<sp/>{</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae4269832b66adecb9fb64fbf9263d170" kindref="member">mCursorTime</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab7dd0b337b738f9ed53c4cfa4375c604" kindref="member">mNewCursorX</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae4269832b66adecb9fb64fbf9263d170" kindref="member">mCursorTime</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>();</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab7dd0b337b738f9ed53c4cfa4375c604" kindref="member">mNewCursorX</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(<ref refid="class_track_panel_1ae4269832b66adecb9fb64fbf9263d170" kindref="member">mCursorTime</ref>,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"></highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(<ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref>,<sp/>0,<sp/>1,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight());</highlight></codeline>
<codeline lineno="1334"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/>rect.Inflate(1,<sp/>0);</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1337"><highlight class="normal"></highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std::make_pair(</highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect,</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref><sp/>!=<sp/><ref refid="class_track_panel_1ab7dd0b337b738f9ed53c4cfa4375c604" kindref="member">mNewCursorX</ref></highlight></codeline>
<codeline lineno="1341"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="1342"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1343"><highlight class="normal"></highlight></codeline>
<codeline lineno="1344" refid="class_track_panel_1ab20a415139f6edd83cb0d19b74878a8b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab20a415139f6edd83cb0d19b74878a8b" kindref="member">TrackPanel::UndrawCursor</ref>(wxDC<sp/>&amp;<sp/>dc)</highlight></codeline>
<codeline lineno="1345"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>onScreen;</highlight></codeline>
<codeline lineno="1347"><highlight class="normal"></highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref><sp/>!=<sp/>-1<sp/>)</highlight></codeline>
<codeline lineno="1349"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width;</highlight></codeline>
<codeline lineno="1351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(&amp;width,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="1352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>onScreen<sp/>=<sp/><ref refid="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" kindref="member">between_incexc</ref>(<ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>(),</highlight></codeline>
<codeline lineno="1353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref>,</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()<sp/>+<sp/>width);</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>onScreen<sp/>)</highlight></codeline>
<codeline lineno="1356"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>OSX,<sp/>if<sp/>a<sp/>HiDPI<sp/>resolution<sp/>is<sp/>being<sp/>used,<sp/>the<sp/>line<sp/>will<sp/>actually<sp/>take<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>more<sp/>than<sp/>1<sp/>pixel<sp/>(even<sp/>though<sp/>it<sp/>is<sp/>drawn<sp/>as<sp/>1),<sp/>so<sp/>we<sp/>restore<sp/>the<sp/>surrounding</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>pixels<sp/>as<sp/>well.<sp/><sp/>(This<sp/>is<sp/>because<sp/>the<sp/>wxClientDC<sp/>doesn&apos;t<sp/>know<sp/>about<sp/>the<sp/>scaling.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(<ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref><sp/>-<sp/>1,<sp/>0,<sp/>3,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight(),<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref><sp/>-<sp/>1,<sp/>0);</highlight></codeline>
<codeline lineno="1361"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(mLastCursorX,<sp/>0,<sp/>1,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight(),<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1364"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1365"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"></highlight></codeline>
<codeline lineno="1367" refid="class_track_panel_1aff33f2fa5cda0ffb92a1dd41758e418c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aff33f2fa5cda0ffb92a1dd41758e418c" kindref="member">TrackPanel::DoDrawCursor</ref>(wxDC<sp/>&amp;<sp/>dc)</highlight></codeline>
<codeline lineno="1368"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref><sp/>=<sp/><ref refid="class_track_panel_1ab7dd0b337b738f9ed53c4cfa4375c604" kindref="member">mNewCursorX</ref>;</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref><sp/>==<sp/>-1)</highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"></highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>onScreen<sp/>=<sp/><ref refid="_track_panel_8cpp_1afcdedea96419683c76415bb68bb93564" kindref="member">between_incexc</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>,</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae4269832b66adecb9fb64fbf9263d170" kindref="member">mCursorTime</ref>,</highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>()<sp/>);</highlight></codeline>
<codeline lineno="1377"><highlight class="normal"></highlight></codeline>
<codeline lineno="1378"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!onScreen<sp/>)</highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1380"><highlight class="normal"></highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a4fb0784322e48591f0f980293489829d" kindref="member">AColor::CursorColor</ref>(&amp;dc);</highlight></codeline>
<codeline lineno="1382"><highlight class="normal"></highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>cursor<sp/>in<sp/>all<sp/>selected<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_visible_track_iterator" kindref="compound">VisibleTrackIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()<sp/>);</highlight></codeline>
<codeline lineno="1385"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>()<sp/>)</highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetSelected()<sp/>||<sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>-&gt;<ref refid="class_track_panel_ax_1a4301f83ada002e0605da20a5441e8f36" kindref="member">IsFocused</ref>(<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>)<sp/>)</highlight></codeline>
<codeline lineno="1388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxCoord<sp/>top<sp/>=<sp/>y<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>;</highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Minus<sp/>one<sp/>more<sp/>because<sp/>AColor::Line<sp/>includes<sp/>both<sp/>endpoints</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxCoord<sp/>bottom<sp/>=<sp/>y<sp/>+<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref><sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1393"><highlight class="normal"></highlight></codeline>
<codeline lineno="1394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MB:<sp/>warp()<sp/>is<sp/>not<sp/>needed<sp/>here<sp/>as<sp/>far<sp/>as<sp/>I<sp/>know,<sp/>in<sp/>fact<sp/>it<sp/>creates<sp/>a<sp/>bug.<sp/>Removing<sp/>it<sp/>fixes<sp/>that.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(dc,<sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref>,<sp/>top,<sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref>,<sp/>bottom);<sp/></highlight><highlight class="comment">//<sp/>&lt;--<sp/>The<sp/>whole<sp/>point<sp/>of<sp/>this<sp/>routine.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1396"><highlight class="normal"></highlight></codeline>
<codeline lineno="1397"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)){</highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>top<sp/>=<sp/>y<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="1401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bottom<sp/>=<sp/>y<sp/>+<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="1402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(<sp/>dc,<sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref>,<sp/>top,<sp/><ref refid="class_track_panel_1a8230d698d20caedc299b1dc46b76a009" kindref="member">mLastCursorX</ref>,<sp/>bottom<sp/>);</highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1404"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1405"><highlight class="normal"></highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"></highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>Ah,<sp/>no,<sp/>this<sp/>is<sp/>where<sp/>we<sp/>draw<sp/>the<sp/>blinky<sp/>thing<sp/>in<sp/>the<sp/>ruler.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1410"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0c030045e204ac35bb3066a260831ce3" kindref="member">mRuler</ref>-&gt;<ref refid="class_adorned_ruler_panel_1a88db37689afaa4bf8311a9b79c6caf5d" kindref="member">DrawCursor</ref>(<ref refid="class_track_panel_1ae4269832b66adecb9fb64fbf9263d170" kindref="member">mCursorTime</ref>);</highlight></codeline>
<codeline lineno="1411"><highlight class="normal"></highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="1413"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1414"><highlight class="normal"></highlight></codeline>
<codeline lineno="1416" refid="class_track_panel_1ae9a51cf72d4da3e01256eb1ef379c192" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae9a51cf72d4da3e01256eb1ef379c192" kindref="member">TrackPanel::OnSize</ref>(wxSizeEvent<sp/>&amp;<sp/></highlight><highlight class="comment">/*<sp/>event<sp/>*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1417"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Tell<sp/>OnPaint()<sp/>to<sp/>recreate<sp/>the<sp/>backing<sp/>bitmap</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac5ec620aefdae3ab8b54bfe08e0fbf34" kindref="member">mResizeBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"></highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Refresh<sp/>the<sp/>entire<sp/>area.<sp/><sp/>Really<sp/>only<sp/>need<sp/>to<sp/>refresh<sp/>when</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1422"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>expanding...is<sp/>it<sp/>worth<sp/>the<sp/>trouble?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>();</highlight></codeline>
<codeline lineno="1424"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1425"><highlight class="normal"></highlight></codeline>
<codeline lineno="1428" refid="class_track_panel_1acec42866dbc6e990300c70787539ad2e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acec42866dbc6e990300c70787539ad2e" kindref="member">TrackPanel::OnPaint</ref>(wxPaintEvent<sp/>&amp;<sp/></highlight><highlight class="comment">/*<sp/>event<sp/>*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1429"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>DEBUG_DRAW_TIMING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1431"><highlight class="normal"><sp/><sp/><sp/>wxStopWatch<sp/>sw;</highlight></codeline>
<codeline lineno="1432"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1433"><highlight class="normal"></highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxPaintDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1436"><highlight class="normal"></highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Retrieve<sp/>the<sp/>damage<sp/>rectangle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>box<sp/>=<sp/>GetUpdateRegion().GetBox();</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"></highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recreate<sp/>the<sp/>backing<sp/>bitmap<sp/>if<sp/>we<sp/>have<sp/>a<sp/>full<sp/>refresh</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(See<sp/>TrackPanel::Refresh())</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a9c034b23c400af061256ab309776baf4" kindref="member">mRefreshBacking</ref><sp/>||<sp/>(box<sp/>==<sp/>GetRect()))</highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reset<sp/>(should<sp/>a<sp/>mutex<sp/>be<sp/>used???)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9c034b23c400af061256ab309776baf4" kindref="member">mRefreshBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"></highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ac5ec620aefdae3ab8b54bfe08e0fbf34" kindref="member">mResizeBacking</ref>)</highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reset</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac5ec620aefdae3ab8b54bfe08e0fbf34" kindref="member">mResizeBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1451"><highlight class="normal"></highlight></codeline>
<codeline lineno="1452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Delete<sp/>the<sp/>backing<sp/>bitmap</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>)</highlight></codeline>
<codeline lineno="1454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>.SelectObject(wxNullBitmap);</highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>;</highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1459"><highlight class="normal"></highlight></codeline>
<codeline lineno="1460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxSize<sp/>sz<sp/>=<sp/>GetClientSize();</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>wxBitmap();</highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;Create(sz.x,<sp/>sz.y);<sp/></highlight><highlight class="comment">//,<sp/>*dc);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>.SelectObject(*<ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>);</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1465"><highlight class="normal"></highlight></codeline>
<codeline lineno="1466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Redraw<sp/>the<sp/>backing<sp/>bitmap</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aaa5b6851ca776625e829a355d685910e" kindref="member">DrawTracks</ref>(&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>);</highlight></codeline>
<codeline lineno="1468"><highlight class="normal"></highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Copy<sp/>it<sp/>to<sp/>the<sp/>display</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(0,<sp/>0,<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetWidth(),<sp/><ref refid="class_track_panel_1a8006fb5dcc7b4611aab348b0f03ef9d2" kindref="member">mBacking</ref>-&gt;GetHeight(),<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Copy<sp/>full,<sp/>possibly<sp/>clipped,<sp/>damage<sp/>rectangle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(box.x,<sp/>box.y,<sp/>box.width,<sp/>box.height,<sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,<sp/>box.x,<sp/>box.y);</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"></highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Done<sp/>with<sp/>the<sp/>clipped<sp/>DC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"></highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Drawing<sp/>now<sp/>goes<sp/>directly<sp/>to<sp/>the<sp/>client<sp/>area.<sp/><sp/>It<sp/>can&apos;t<sp/>use<sp/>the<sp/>paint<sp/>DC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>becuase<sp/>the<sp/>paint<sp/>DC<sp/>might<sp/>be<sp/>clipped<sp/>and<sp/>DrawOverlays()<sp/>may<sp/>need<sp/>to<sp/>draw</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1483"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>outside<sp/>the<sp/>clipped<sp/>region.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1484"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad3c380c2377c504b2b86cdbdee4f3d5f" kindref="member">DrawOverlays</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1485"><highlight class="normal"></highlight></codeline>
<codeline lineno="1486"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>DEBUG_DRAW_TIMING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/>sw.Pause();</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"><sp/><sp/><sp/>wxLogDebug(wxT(</highlight><highlight class="stringliteral">&quot;Total:<sp/>%ld<sp/>milliseconds&quot;</highlight><highlight class="normal">),<sp/>sw.Time());</highlight></codeline>
<codeline lineno="1489"><highlight class="normal"><sp/><sp/><sp/>wxPrintf(wxT(</highlight><highlight class="stringliteral">&quot;Total:<sp/>%ld<sp/>milliseconds\n&quot;</highlight><highlight class="normal">),<sp/>sw.Time());</highlight></codeline>
<codeline lineno="1490"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1491"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1492"><highlight class="normal"></highlight></codeline>
<codeline lineno="1495" refid="class_track_panel_1a838383d5bd0899de960777e50f12154c" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">TrackPanel::MakeParentPushState</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxString<sp/>&amp;<ref refid="_export_p_c_m_8cpp_1a717c8108dd6ce1ecc369d9bac2f471f2" kindref="member">desc</ref>,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxString<sp/>&amp;shortDesc,</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114" kindref="member">UndoPush</ref><sp/>flags)</highlight></codeline>
<codeline lineno="1497"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1498"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a6521874a9bd4ea7e9421fdbbbd9b1662" kindref="member">TP_PushState</ref>(desc,<sp/>shortDesc,<sp/>flags);</highlight></codeline>
<codeline lineno="1499"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1500"><highlight class="normal"></highlight></codeline>
<codeline lineno="1501" refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">TrackPanel::MakeParentPushState</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxString<sp/>&amp;<ref refid="_export_p_c_m_8cpp_1a717c8108dd6ce1ecc369d9bac2f471f2" kindref="member">desc</ref>,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxString<sp/>&amp;shortDesc)</highlight></codeline>
<codeline lineno="1502"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1503"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(desc,<sp/>shortDesc,<sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114a0650fde039d6d9101c53ade11ecafcd3" kindref="member">UndoPush::AUTOSAVE</ref>);</highlight></codeline>
<codeline lineno="1504"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1505"><highlight class="normal"></highlight></codeline>
<codeline lineno="1506" refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">TrackPanel::MakeParentModifyState</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bWantsAutoSave)</highlight></codeline>
<codeline lineno="1507"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ace0960ab8be8fde5e4f133a45b6b016f" kindref="member">TP_ModifyState</ref>(bWantsAutoSave);</highlight></codeline>
<codeline lineno="1509"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"></highlight></codeline>
<codeline lineno="1511" refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">TrackPanel::MakeParentRedrawScrollbars</ref>()</highlight></codeline>
<codeline lineno="1512"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ac48ce73b3c15b138c757460e701a61c7" kindref="member">TP_RedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="1514"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1515"><highlight class="normal"></highlight></codeline>
<codeline lineno="1516" refid="class_track_panel_1a56ac00621d5ee5be4cd3a585dde8e468" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a56ac00621d5ee5be4cd3a585dde8e468" kindref="member">TrackPanel::HandleEscapeKey</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down)</highlight></codeline>
<codeline lineno="1517"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!down)</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"></highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>)</highlight></codeline>
<codeline lineno="1522"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1523"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf90290bb93700a5564c87b3c6d056fd6" kindref="member">IsSelecting</ref>:</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;bool&gt;::const_iterator</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="conv2dtest_8m_1a4b223b47b1bd746a69ed8ac37c4b16db" kindref="member">it</ref><sp/>=<sp/><ref refid="class_track_panel_1a2040148c3f847c66400e829f65eb9397" kindref="member">mInitialTrackSelection</ref>-&gt;begin(),</highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref><sp/>=<sp/><ref refid="class_track_panel_1a2040148c3f847c66400e829f65eb9397" kindref="member">mInitialTrackSelection</ref>-&gt;end();</highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(it<sp/>!=<sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>);</highlight></codeline>
<codeline lineno="1531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;SetSelected(*it++);</highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref><sp/>=<sp/><ref refid="class_track_panel_1a5ad524f4ba9c00b92b9eebc81d016efe" kindref="member">mInitialSelection</ref>;</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f346151e922233e8a785750e14199e" kindref="member">IsZooming</ref>:</highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba70d8f72bedc78a86e6068438f14f79a0" kindref="member">IsVZooming</ref>:</highlight></codeline>
<codeline lineno="1538"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//case<sp/>IsAdjustingSample:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1540"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf19cc2d88ae2024dcbf71408c71636b2" kindref="member">IsResizing</ref>:</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(<ref refid="class_track_panel_1a869fb10d3f2ab3181553b3047f664ac6" kindref="member">mInitialActualHeight</ref>);</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(<ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref>);</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba1cc893666c65afe6a5a9724174fb50f6" kindref="member">IsResizingBetweenLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref><sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(<ref refid="class_track_panel_1aeeb50d3d2469be1829175425b1dc58c3" kindref="member">mInitialUpperActualHeight</ref>);</highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(<ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref>);</highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>next-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(<ref refid="class_track_panel_1a869fb10d3f2ab3181553b3047f664ac6" kindref="member">mInitialActualHeight</ref>);</highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>next-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(<ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref>);</highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f6de2f6ce3b06fca6ecc61ca664ce5" kindref="member">IsResizingBelowLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>prev<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(<ref refid="class_track_panel_1a869fb10d3f2ab3181553b3047f664ac6" kindref="member">mInitialActualHeight</ref>);</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(<ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref>);</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>prev-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(<ref refid="class_track_panel_1aeeb50d3d2469be1829175425b1dc58c3" kindref="member">mInitialUpperActualHeight</ref>);</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>prev-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(<ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref>);</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1565"><highlight class="normal"></highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Common<sp/>part<sp/>in<sp/>all<sp/>cases<sp/>that<sp/>do<sp/>anything</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1567"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>);</highlight></codeline>
<codeline lineno="1568"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(HasCapture())</highlight></codeline>
<codeline lineno="1569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ReleaseMouse();</highlight></codeline>
<codeline lineno="1570"><highlight class="normal"><sp/><sp/><sp/>wxMouseEvent<sp/><ref refid="database_8c_1a4497856461b72aa327a367542f73bff3" kindref="member">dummy</ref>;</highlight></codeline>
<codeline lineno="1571"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">HandleCursor</ref>(dummy);</highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1573"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1574"><highlight class="normal"></highlight></codeline>
<codeline lineno="1575" refid="class_track_panel_1a4bb51bc8c4fab9e485916ebb2a8e30b3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4bb51bc8c4fab9e485916ebb2a8e30b3" kindref="member">TrackPanel::HandleAltKey</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down)</highlight></codeline>
<codeline lineno="1576"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5979c1a1b36df3e78c7974e0dfc07c02" kindref="member">mLastMouseEvent</ref>.m_altDown<sp/>=<sp/>down;</highlight></codeline>
<codeline lineno="1578"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0c0e6d1eaac710cb875181e10ce867b0" kindref="member">HandleCursorForLastMouseEvent</ref>();</highlight></codeline>
<codeline lineno="1579"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1580"><highlight class="normal"></highlight></codeline>
<codeline lineno="1581" refid="class_track_panel_1a87d0b14734af33fd1f9c900b36c16a18" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a87d0b14734af33fd1f9c900b36c16a18" kindref="member">TrackPanel::HandleShiftKey</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down)</highlight></codeline>
<codeline lineno="1582"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5979c1a1b36df3e78c7974e0dfc07c02" kindref="member">mLastMouseEvent</ref>.m_shiftDown<sp/>=<sp/>down;</highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0c0e6d1eaac710cb875181e10ce867b0" kindref="member">HandleCursorForLastMouseEvent</ref>();</highlight></codeline>
<codeline lineno="1585"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1586"><highlight class="normal"></highlight></codeline>
<codeline lineno="1587" refid="class_track_panel_1aad125fe23ac8546f37eaab04696b227e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aad125fe23ac8546f37eaab04696b227e" kindref="member">TrackPanel::HandleControlKey</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down)</highlight></codeline>
<codeline lineno="1588"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1589"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5979c1a1b36df3e78c7974e0dfc07c02" kindref="member">mLastMouseEvent</ref>.m_controlDown<sp/>=<sp/>down;</highlight></codeline>
<codeline lineno="1590"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0c0e6d1eaac710cb875181e10ce867b0" kindref="member">HandleCursorForLastMouseEvent</ref>();</highlight></codeline>
<codeline lineno="1591"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1592"><highlight class="normal"></highlight></codeline>
<codeline lineno="1593" refid="class_track_panel_1a0bc11f32c1bf93bed8afcd25803b666f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0bc11f32c1bf93bed8afcd25803b666f" kindref="member">TrackPanel::HandlePageUpKey</ref>()</highlight></codeline>
<codeline lineno="1594"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1595"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ab4427ec0211190e135643aee17b82083" kindref="member">TP_ScrollWindow</ref>(<ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>());</highlight></codeline>
<codeline lineno="1596"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"></highlight></codeline>
<codeline lineno="1598" refid="class_track_panel_1a706dd6b1e9328bad9925cb6b4dea57fb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a706dd6b1e9328bad9925cb6b4dea57fb" kindref="member">TrackPanel::HandlePageDownKey</ref>()</highlight></codeline>
<codeline lineno="1599"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1600"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ab4427ec0211190e135643aee17b82083" kindref="member">TP_ScrollWindow</ref>(2<sp/>*<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>-<sp/><ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>());</highlight></codeline>
<codeline lineno="1601"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"></highlight></codeline>
<codeline lineno="1603" refid="class_track_panel_1a0c0e6d1eaac710cb875181e10ce867b0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0c0e6d1eaac710cb875181e10ce867b0" kindref="member">TrackPanel::HandleCursorForLastMouseEvent</ref>()</highlight></codeline>
<codeline lineno="1604"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">HandleCursor</ref>(<ref refid="class_track_panel_1a5979c1a1b36df3e78c7974e0dfc07c02" kindref="member">mLastMouseEvent</ref>);</highlight></codeline>
<codeline lineno="1606"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"></highlight></codeline>
<codeline lineno="1608" refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" refkind="member"><highlight class="normal"><ref refid="class_mixer_board" kindref="compound">MixerBoard</ref>*<sp/><ref refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" kindref="member">TrackPanel::GetMixerBoard</ref>()</highlight></codeline>
<codeline lineno="1609"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>();</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(p);</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>p-&gt;<ref refid="class_audacity_project_1a5bfffbb3a00c097dbf8bb047ad6025a4" kindref="member">GetMixerBoard</ref>();</highlight></codeline>
<codeline lineno="1613"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1614"><highlight class="normal"></highlight></codeline>
<codeline lineno="1618" refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">TrackPanel::IsUnsafe</ref>()</highlight></codeline>
<codeline lineno="1619"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac869cf3afecdf74bd6b9faf18c85e6fc" kindref="member">IsAudioActive</ref>();</highlight></codeline>
<codeline lineno="1621"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"></highlight></codeline>
<codeline lineno="1623" refid="class_track_panel_1ac869cf3afecdf74bd6b9faf18c85e6fc" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac869cf3afecdf74bd6b9faf18c85e6fc" kindref="member">TrackPanel::IsAudioActive</ref>()</highlight></codeline>
<codeline lineno="1624"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1625"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>();</highlight></codeline>
<codeline lineno="1626"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>p-&gt;<ref refid="class_audacity_project_1a393f7f316ce766e73323d1c92d0b496e" kindref="member">IsAudioActive</ref>();</highlight></codeline>
<codeline lineno="1627"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1628"><highlight class="normal"></highlight></codeline>
<codeline lineno="1629"><highlight class="normal"></highlight></codeline>
<codeline lineno="1633" refid="class_track_panel_1a16f030d9d1ef9352ca6f0405aa9d52f1" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a16f030d9d1ef9352ca6f0405aa9d52f1" kindref="member">TrackPanel::SetCursorByActivity</ref>(<sp/>)</highlight></codeline>
<codeline lineno="1634"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1635"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>unsafe<sp/>=<sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>();</highlight></codeline>
<codeline lineno="1636"><highlight class="normal"></highlight></codeline>
<codeline lineno="1637"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>)</highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1639"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf90290bb93700a5564c87b3c6d056fd6" kindref="member">IsSelecting</ref>:</highlight></codeline>
<codeline lineno="1640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1a791215c5f5f6a0263f23e10eb971205c" kindref="member">mSelectCursor</ref>);</highlight></codeline>
<codeline lineno="1641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1642"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad69d99a254d131489723ad0ec04810a0" kindref="member">IsSliding</ref>:</highlight></codeline>
<codeline lineno="1643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(<sp/>unsafe<sp/>?<sp/>*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1aeb18d7c6402c4b5c7c626fab5bcec748" kindref="member">mSlideCursor</ref>);</highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1645"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba77f6cb3939bae5856630fb30abf9a11d" kindref="member">IsEnveloping</ref>:</highlight></codeline>
<codeline lineno="1646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(<sp/>unsafe<sp/>?<sp/>*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1ae120daf4a0e3c0249ab1a98094edff28" kindref="member">mEnvelopeCursor</ref>);</highlight></codeline>
<codeline lineno="1647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba2c36e63ff445ad7e7b6734bd90ae09e0" kindref="member">IsRearranging</ref>:</highlight></codeline>
<codeline lineno="1649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(<sp/>unsafe<sp/>?<sp/>*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1a854ecb221e26a9f55cde793a134894d9" kindref="member">mRearrangeCursor</ref>);</highlight></codeline>
<codeline lineno="1650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1651"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba12838422ae18f81ab8ba62476c507b16" kindref="member">IsAdjustingLabel</ref>:</highlight></codeline>
<codeline lineno="1652"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baa1f3b2748161591b3423f765401b496b" kindref="member">IsSelectingLabelText</ref>:</highlight></codeline>
<codeline lineno="1653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1654"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1655"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>IsStretching:</highlight></codeline>
<codeline lineno="1656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(<sp/>unsafe<sp/>?<sp/>*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref><sp/>:<sp/>*mStretchCursor);</highlight></codeline>
<codeline lineno="1657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1658"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1659"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1661"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1662"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1663"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1664"><highlight class="normal"></highlight></codeline>
<codeline lineno="1665" refid="class_track_panel_1a2a9f4c3f7d9e69e93b52b013f5608b9b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a2a9f4c3f7d9e69e93b52b013f5608b9b" kindref="member">TrackPanel::SetCursorForCutline</ref>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*<sp/>track,<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="1666"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1667"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1af6620f64f51ea8ceef45fbf34dbedccc" kindref="member">IsOverCutline</ref>(track,<sp/>rect,<sp/>event))<sp/>{</highlight></codeline>
<codeline lineno="1668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>unsafe<sp/>=<sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>();</highlight></codeline>
<codeline lineno="1669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(unsafe<sp/>?<sp/>*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1aeb8e3a8ba37bb6113d378e37dd90d910" kindref="member">mArrowCursor</ref>);</highlight></codeline>
<codeline lineno="1670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>No<sp/>tip<sp/>string?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1672"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1674"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"></highlight></codeline>
<codeline lineno="1678" refid="class_track_panel_1a602ea41daa207e8731cf277fdc90a5b3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a602ea41daa207e8731cf277fdc90a5b3" kindref="member">TrackPanel::SetCursorAndTipWhenInLabel</ref>(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxMouseEvent<sp/>&amp;event,<sp/>wxString<sp/>&amp;tip<sp/>)</highlight></codeline>
<codeline lineno="1680"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1681"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_x<sp/>&gt;=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>()<sp/>&amp;&amp;<sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>)</highlight></codeline>
<codeline lineno="1682"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>to<sp/>vertically<sp/>zoom<sp/>in.<sp/>Shift-click<sp/>to<sp/>zoom<sp/>out.<sp/>Drag<sp/>to<sp/>specify<sp/>a<sp/>zoom<sp/>region.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(event.ShiftDown()?<sp/>*<ref refid="class_track_panel_1a2e34ef324bc6b3ccb8229f644750aac8" kindref="member">mZoomOutCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1a48bdb309d319ab126fc86691a86ca9bc" kindref="member">mZoomInCursor</ref>);</highlight></codeline>
<codeline lineno="1685"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1686"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1687"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_x<sp/>&gt;=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>()<sp/>&amp;&amp;<sp/>t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note)<sp/>{</highlight></codeline>
<codeline lineno="1688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>to<sp/>verticaly<sp/>zoom<sp/>in,<sp/>Shift-click<sp/>to<sp/>zoom<sp/>out,<sp/>Drag<sp/>to<sp/>create<sp/>a<sp/>particular<sp/>zoom<sp/>region.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(event.ShiftDown()<sp/>?<sp/>*<ref refid="class_track_panel_1a2e34ef324bc6b3ccb8229f644750aac8" kindref="member">mZoomOutCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1a48bdb309d319ab126fc86691a86ca9bc" kindref="member">mZoomInCursor</ref>);</highlight></codeline>
<codeline lineno="1690"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1691"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>a<sp/>status<sp/>message<sp/>if<sp/>over<sp/>TrackInfo.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Drag<sp/>the<sp/>track<sp/>vertically<sp/>to<sp/>change<sp/>the<sp/>order<sp/>of<sp/>the<sp/>tracks.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1aeb8e3a8ba37bb6113d378e37dd90d910" kindref="member">mArrowCursor</ref>);</highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1697"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1698"><highlight class="normal"></highlight></codeline>
<codeline lineno="1700" refid="class_track_panel_1a58ff067a7bd41439d1315d231926d739" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a58ff067a7bd41439d1315d231926d739" kindref="member">TrackPanel::SetCursorAndTipWhenInVResizeArea</ref>(<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bLinked,<sp/>wxString<sp/>&amp;tip<sp/>)</highlight></codeline>
<codeline lineno="1701"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1702"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>to<sp/>see<sp/>whether<sp/>it<sp/>is<sp/>the<sp/>first<sp/>channel<sp/>of<sp/>a<sp/>stereo<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1703"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bLinked)<sp/>{</highlight></codeline>
<codeline lineno="1704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>we<sp/>are<sp/>in<sp/>the<sp/>label<sp/>we<sp/>got<sp/>here<sp/>&apos;by<sp/>mistake&apos;<sp/>and<sp/>we&apos;re</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>not<sp/>actually<sp/>in<sp/>the<sp/>resize<sp/>area<sp/>at<sp/>all.<sp/><sp/>(The<sp/>resize<sp/>area</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>is<sp/>shorter<sp/>when<sp/>it<sp/>is<sp/>between<sp/>stereo<sp/>tracks).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1707"><highlight class="normal"></highlight></codeline>
<codeline lineno="1708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>adjust<sp/>relative<sp/>size<sp/>of<sp/>stereo<sp/>tracks.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1a2a074a10dd9eddf34ddfb55956b7fca7" kindref="member">mResizeCursor</ref>);</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>resize<sp/>the<sp/>track.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1a2a074a10dd9eddf34ddfb55956b7fca7" kindref="member">mResizeCursor</ref>);</highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1714"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1715"><highlight class="normal"></highlight></codeline>
<codeline lineno="1718" refid="class_track_panel_1a9c9a5efbb00766367f6d04675b04194e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a9c9a5efbb00766367f6d04675b04194e" kindref="member">TrackPanel::SetCursorAndTipWhenInLabelTrack</ref>(<sp/><ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*<sp/>pLT,</highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxMouseEvent<sp/>&amp;<sp/>event,<sp/>wxString<sp/>&amp;tip<sp/>)</highlight></codeline>
<codeline lineno="1720"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>edge=pLT-&gt;<ref refid="class_label_track_1a81e427da36fb83c52c3edcf78ace5576" kindref="member">OverGlyph</ref>(event.m_x,<sp/>event.m_y);</highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(edge<sp/>!=0)</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1aeb8e3a8ba37bb6113d378e37dd90d910" kindref="member">mArrowCursor</ref>);</highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1726"><highlight class="normal"></highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//KLUDGE:<sp/>We<sp/>refresh<sp/>the<sp/>whole<sp/>Label<sp/>track<sp/>when<sp/>the<sp/>icon<sp/>hovered<sp/>over</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//changes<sp/>colouration.<sp/><sp/>As<sp/>well<sp/>as<sp/>being<sp/>inefficient<sp/>we<sp/>are<sp/>also</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1729"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//doing<sp/>stuff<sp/>that<sp/>should<sp/>be<sp/>delegated<sp/>to<sp/>the<sp/>label<sp/>track<sp/>itself.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/>edge<sp/>+=<sp/>pLT-&gt;<ref refid="class_label_track_1acd6d833a85610bf24cb008932585839f" kindref="member">mbHitCenter</ref><sp/>?<sp/>4:0;</highlight></codeline>
<codeline lineno="1731"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>edge<sp/>!=<sp/>pLT-&gt;<ref refid="class_label_track_1a8e2ceac066c4986b80213070c8950016" kindref="member">mOldEdge</ref><sp/>)</highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pLT-&gt;<ref refid="class_label_track_1a8e2ceac066c4986b80213070c8950016" kindref="member">mOldEdge</ref><sp/>=<sp/>edge;</highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(<sp/>pLT<sp/>);</highlight></codeline>
<codeline lineno="1735"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IF<sp/>edge!=0<sp/>THEN<sp/>we&apos;ve<sp/>set<sp/>the<sp/>cursor<sp/>and<sp/>we&apos;re<sp/>done.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1737"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>signal<sp/>this<sp/>by<sp/>setting<sp/>the<sp/>tip.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>edge<sp/>!=<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="1739"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=</highlight></codeline>
<codeline lineno="1741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pLT-&gt;<ref refid="class_label_track_1acd6d833a85610bf24cb008932585839f" kindref="member">mbHitCenter</ref><sp/>)<sp/>?</highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Drag<sp/>one<sp/>or<sp/>more<sp/>label<sp/>boundaries.&quot;</highlight><highlight class="normal">)<sp/>:</highlight></codeline>
<codeline lineno="1743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Drag<sp/>label<sp/>boundary.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1745"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1746"><highlight class="normal"></highlight></codeline>
<codeline lineno="1747"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1748"><highlight class="normal"></highlight></codeline>
<codeline lineno="1749"><highlight class="normal"></highlight><highlight class="comment">//<sp/>This<sp/>returns<sp/>true<sp/>if<sp/>we&apos;re<sp/>a<sp/>spectral<sp/>editing<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1750"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isSpectralSelectionTrack(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack)<sp/>{</highlight></codeline>
<codeline lineno="1751"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keyword">const<sp/></highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_spectrogram_settings" kindref="compound">SpectrogramSettings</ref><sp/>&amp;settings<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>();</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>display<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>();</highlight></codeline>
<codeline lineno="1756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(display<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5ac0941a4c239c9e4a1d487f31786fbbc9" kindref="member">WaveTrack::Spectrum</ref>)<sp/>&amp;&amp;<sp/>settings.<ref refid="class_spectrogram_settings_1a3da0925d9ef43e50e04df908923ae48b" kindref="member">SpectralSelectionEnabled</ref>();</highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1758"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1761"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1762"><highlight class="normal"></highlight></codeline>
<codeline lineno="1763"><highlight class="normal">}<sp/></highlight><highlight class="comment">//<sp/>namespace</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1764"><highlight class="normal"></highlight></codeline>
<codeline lineno="1765"><highlight class="normal"></highlight><highlight class="comment">//<sp/>If<sp/>we&apos;re<sp/>in<sp/>OnDemand<sp/>mode,<sp/>we<sp/>may<sp/>change<sp/>the<sp/>tip.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1766" refid="class_track_panel_1a5f33eeac1ae61a62b09aacf9d9f7e928" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a5f33eeac1ae61a62b09aacf9d9f7e928" kindref="member">TrackPanel::MaySetOnDemandTip</ref>(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxString<sp/>&amp;tip<sp/>)</highlight></codeline>
<codeline lineno="1767"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="1769"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//For<sp/>OD<sp/>regions,<sp/>we<sp/>need<sp/>to<sp/>override<sp/>and<sp/>display<sp/>the<sp/>percent<sp/>complete<sp/>for<sp/>this<sp/>task.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1770"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//first,<sp/>make<sp/>sure<sp/>it&apos;s<sp/>a<sp/>wavetrack.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1771"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="1772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1773"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//see<sp/>if<sp/>the<sp/>wavetrack<sp/>exists<sp/>in<sp/>the<sp/>ODManager<sp/>(if<sp/>the<sp/>ODManager<sp/>exists)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1774"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!<ref refid="class_o_d_manager_1a6647fc26402ceed611a794b7224063a5" kindref="member">ODManager::IsInstanceCreated</ref>())</highlight></codeline>
<codeline lineno="1775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//ask<sp/>the<sp/>wavetrack<sp/>for<sp/>the<sp/>corresponding<sp/>tip<sp/>-<sp/>it<sp/>may<sp/>not<sp/>change<sp/>tip,<sp/>but<sp/>that&apos;s<sp/>fine.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1777"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_o_d_manager_1aef1bcdded223f015b22a0d1d439c23ad" kindref="member">ODManager::Instance</ref>()-&gt;<ref refid="class_o_d_manager_1a76c4c9a6b2b98e3a4f7256667d15b61a" kindref="member">FillTipForWaveTrack</ref>(static_cast&lt;WaveTrack*&gt;(t),<sp/>tip);</highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1779"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1780"><highlight class="normal"></highlight></codeline>
<codeline lineno="1781"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1782"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab57df1d31a1abfd5c7d78cc3699133bc" kindref="member">TrackPanel::HandleCenterFrequencyCursor</ref></highlight></codeline>
<codeline lineno="1783" refid="class_track_panel_1ab57df1d31a1abfd5c7d78cc3699133bc" refkind="member"><highlight class="normal">(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>shiftDown,<sp/>wxString<sp/>&amp;tip,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxCursor<sp/>**<sp/>ppCursor)</highlight></codeline>
<codeline lineno="1784"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>SPECTRAL_EDITING_ESC_KEY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1786"><highlight class="normal"><sp/><sp/><sp/>tip<sp/>=</highlight></codeline>
<codeline lineno="1787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>shiftDown<sp/>?</highlight></codeline>
<codeline lineno="1788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>move<sp/>center<sp/>selection<sp/>frequency.&quot;</highlight><highlight class="normal">)<sp/>:</highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>move<sp/>center<sp/>selection<sp/>frequency<sp/>to<sp/>a<sp/>spectral<sp/>peak.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1790"><highlight class="normal"></highlight></codeline>
<codeline lineno="1791"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/>shiftDown;</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"></highlight></codeline>
<codeline lineno="1794"><highlight class="normal"><sp/><sp/><sp/>tip<sp/>=</highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>move<sp/>center<sp/>selection<sp/>frequency.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1796"><highlight class="normal"></highlight></codeline>
<codeline lineno="1797"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1798"><highlight class="normal"></highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1ae120daf4a0e3c0249ab1a98094edff28" kindref="member">mEnvelopeCursor</ref>;</highlight></codeline>
<codeline lineno="1800"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1801"><highlight class="normal"></highlight></codeline>
<codeline lineno="1802"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a499cc4987c0eef5d2ba8c7888581c5c9" kindref="member">TrackPanel::HandleCenterFrequencyClick</ref></highlight></codeline>
<codeline lineno="1803" refid="class_track_panel_1a499cc4987c0eef5d2ba8c7888581c5c9" refkind="member"><highlight class="normal">(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>shiftDown,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>)</highlight></codeline>
<codeline lineno="1804"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1805"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(shiftDown)<sp/>{</highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Disable<sp/>time<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="1809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="1810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaf98d9f2a60fab6713bcc796dfe41fff8" kindref="member">FREQ_SEL_DRAG_CENTER</ref>;</highlight></codeline>
<codeline lineno="1811"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1812"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1813"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>SPECTRAL_EDITING_ESC_KEY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>center<sp/>snapping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="1816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Turn<sp/>center<sp/>snapping<sp/>on<sp/>(the<sp/>only<sp/>way<sp/>to<sp/>do<sp/>this)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa993fb1a686f5aa32359fcebbc97dfc65" kindref="member">FREQ_SEL_SNAPPING_CENTER</ref>;</highlight></codeline>
<codeline lineno="1818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Disable<sp/>time<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2d3b5f434fa616850942dc3e93d606e7" kindref="member">StartSnappingFreqSelection</ref>(wt);</highlight></codeline>
<codeline lineno="1821"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1822"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1823"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1824"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1825"><highlight class="normal"></highlight></codeline>
<codeline lineno="1826"><highlight class="normal"></highlight><highlight class="comment">//<sp/>The<sp/>select<sp/>tool<sp/>can<sp/>have<sp/>different<sp/>cursors<sp/>and<sp/>prompts<sp/>depending<sp/>on<sp/>what</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1827"><highlight class="normal"></highlight><highlight class="comment">//<sp/>we<sp/>hover<sp/>over,<sp/>most<sp/>notably<sp/>when<sp/>hovering<sp/>over<sp/>the<sp/>selction<sp/>boundaries.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1828"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Determine<sp/>and<sp/>set<sp/>the<sp/>cursor<sp/>and<sp/>tip<sp/>accordingly.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1829" refid="class_track_panel_1aeba082d58c890da9c7f43c201a72b411" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aeba082d58c890da9c7f43c201a72b411" kindref="member">TrackPanel::SetCursorAndTipWhenSelectTool</ref>(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,</highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxMouseEvent<sp/>&amp;<sp/>event,<sp/>wxRect<sp/>&amp;rect,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bMultiToolMode,</highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/>&amp;tip,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxCursor<sp/>**<sp/>ppCursor<sp/>)</highlight></codeline>
<codeline lineno="1832"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>not<sp/>set<sp/>the<sp/>default<sp/>cursor<sp/>here<sp/>and<sp/>re-set<sp/>later,<sp/>that<sp/>causes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1834"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>flashing.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1835"><highlight class="normal"><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1a791215c5f5f6a0263f23e10eb971205c" kindref="member">mSelectCursor</ref>;</highlight></codeline>
<codeline lineno="1836"><highlight class="normal"></highlight></codeline>
<codeline lineno="1837"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//In<sp/>Multi-tool<sp/>mode,<sp/>give<sp/>multitool<sp/>prompt<sp/>if<sp/>no-special-hit.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1838"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bMultiToolMode<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Look<sp/>up<sp/>the<sp/>current<sp/>key<sp/>binding<sp/>for<sp/>Preferences.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(Don&apos;t<sp/>assume<sp/>it&apos;s<sp/>the<sp/>default!)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/>keyStr</highlight></codeline>
<codeline lineno="1842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;GetCommandManager()-&gt;GetKeyFromName(wxT(</highlight><highlight class="stringliteral">&quot;Preferences&quot;</highlight><highlight class="normal">)));</highlight></codeline>
<codeline lineno="1843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(keyStr.IsEmpty())</highlight></codeline>
<codeline lineno="1844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>No<sp/>keyboard<sp/>preference<sp/>defined<sp/>for<sp/>opening<sp/>Preferences<sp/>dialog</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>These<sp/>are<sp/>the<sp/>names<sp/>of<sp/>a<sp/>menu<sp/>and<sp/>a<sp/>command<sp/>in<sp/>that<sp/>menu<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>keyStr<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Edit,<sp/>Preferences...&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>keyStr<sp/>=<sp/><ref refid="_keyboard_8cpp_1a40f3809d631b0b0d1bdeaf2dcc30d9b8" kindref="member">KeyStringDisplay</ref>(keyStr);</highlight></codeline>
<codeline lineno="1849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>%s<sp/>is<sp/>usually<sp/>replaced<sp/>by<sp/>&quot;Ctrl+P&quot;<sp/>for<sp/>Windows/Linux,<sp/>&quot;Command+,&quot;<sp/>for<sp/>Mac<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/>wxString::Format(</highlight></codeline>
<codeline lineno="1851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Multi-Tool<sp/>Mode:<sp/>%s<sp/>for<sp/>Mouse<sp/>and<sp/>Keyboard<sp/>Preferences.&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="1852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>keyStr.c_str());</highlight></codeline>
<codeline lineno="1853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Later<sp/>in<sp/>this<sp/>function<sp/>we<sp/>may<sp/>point<sp/>to<sp/>some<sp/>other<sp/>string<sp/>instead.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1854"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1855"><highlight class="normal"></highlight></codeline>
<codeline lineno="1856"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>over<sp/>a<sp/>track?<sp/><sp/>Get<sp/>out<sp/>of<sp/>here.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1857"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!t)</highlight></codeline>
<codeline lineno="1858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1859"><highlight class="normal"></highlight></codeline>
<codeline lineno="1860"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Make<sp/>sure<sp/>we<sp/>are<sp/>within<sp/>the<sp/>selected<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1861"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Adjusting<sp/>the<sp/>selection<sp/>edges<sp/>can<sp/>be<sp/>turned<sp/>off<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1862"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>preferences...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1863"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>!t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>()<sp/>||<sp/>!<ref refid="class_track_panel_1aaf3e6420d428eefbd10dc13f558fba06" kindref="member">mAdjustSelectionEdges</ref>)</highlight></codeline>
<codeline lineno="1864"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5f33eeac1ae61a62b09aacf9d9f7e928" kindref="member">MaySetOnDemandTip</ref>(<sp/>t,<sp/>tip<sp/>);</highlight></codeline>
<codeline lineno="1866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1867"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1868"><highlight class="normal"></highlight></codeline>
<codeline lineno="1869"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>leftSel<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>(),<sp/>rect.x);</highlight></codeline>
<codeline lineno="1871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>rightSel<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>(),<sp/>rect.x);</highlight></codeline>
<codeline lineno="1872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Something<sp/>is<sp/>wrong<sp/>if<sp/>right<sp/>edge<sp/>comes<sp/>before<sp/>left<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(!(rightSel<sp/>&lt;<sp/>leftSel));</highlight></codeline>
<codeline lineno="1874"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1875"><highlight class="normal"></highlight></codeline>
<codeline lineno="1876"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bShiftDown<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.ShiftDown();</highlight></codeline>
<codeline lineno="1877"><highlight class="normal"></highlight></codeline>
<codeline lineno="1878"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1879"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa993fb1a686f5aa32359fcebbc97dfc65" kindref="member">FREQ_SEL_SNAPPING_CENTER</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>isSpectralSelectionTrack(t))<sp/>{</highlight></codeline>
<codeline lineno="1881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>shift-down,<sp/>but<sp/>center<sp/>frequency<sp/>snapping<sp/>toggle<sp/>is<sp/>on</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>set<sp/>frequency<sp/>bandwidth.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1ae120daf4a0e3c0249ab1a98094edff28" kindref="member">mEnvelopeCursor</ref>;</highlight></codeline>
<codeline lineno="1884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1885"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1886"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1887"><highlight class="normal"></highlight></codeline>
<codeline lineno="1888"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>not<sp/>shift-down<sp/>and<sp/>not<sp/>snapping<sp/>center,<sp/>then</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1889"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>choose<sp/>boundaries<sp/>only<sp/>in<sp/>snapping<sp/>tolerance,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1890"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>may<sp/>choose<sp/>center.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1891"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>But<sp/>don&apos;t<sp/>change<sp/>the<sp/>cursor<sp/>when<sp/>scrubbing.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1892"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faef" kindref="member">SelectionBoundary</ref><sp/>boundary<sp/>=</highlight></codeline>
<codeline lineno="1893"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>()</highlight></codeline>
<codeline lineno="1895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa43f1ff076139ea939168d6a19f5894de" kindref="member">SBNone</ref></highlight></codeline>
<codeline lineno="1896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>:</highlight></codeline>
<codeline lineno="1897"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a38c1a22080626e8b1af8cce7fcf10dae" kindref="member">ChooseBoundary</ref>(event,<sp/>t,<sp/>rect,<sp/>!bShiftDown,<sp/>!bShiftDown);</highlight></codeline>
<codeline lineno="1899"><highlight class="normal"></highlight></codeline>
<codeline lineno="1900"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1901"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>MIDI<sp/>HitTest<sp/>will<sp/>only<sp/>succeed<sp/>if<sp/>we<sp/>are<sp/>on<sp/>a<sp/>midi<sp/>track,<sp/>so<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1902"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>typically<sp/>we<sp/>will<sp/>fall<sp/>through.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1903"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>boundary)<sp/>{</highlight></codeline>
<codeline lineno="1904"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa43f1ff076139ea939168d6a19f5894de" kindref="member">SBNone</ref>:</highlight></codeline>
<codeline lineno="1905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa0e2983ab8187d8aaa75f76e50622ac9e" kindref="member">SBLeft</ref>:</highlight></codeline>
<codeline lineno="1906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaf9ac100db15716ed99fea50cfed80455" kindref="member">SBRight</ref>:</highlight></codeline>
<codeline lineno="1907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>HitTestStretch(t,<sp/>rect,<sp/>event))<sp/>{</highlight></codeline>
<codeline lineno="1908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>stretch<sp/>within<sp/>selected<sp/>region.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ppCursor<sp/>=<sp/>mStretchCursor;</highlight></codeline>
<codeline lineno="1910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1915"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1916"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1917"><highlight class="normal"></highlight></codeline>
<codeline lineno="1918"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(boundary)<sp/>{</highlight></codeline>
<codeline lineno="1919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa43f1ff076139ea939168d6a19f5894de" kindref="member">SBNone</ref>:</highlight></codeline>
<codeline lineno="1920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bShiftDown<sp/>){</highlight></codeline>
<codeline lineno="1921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>wxASSERT(<sp/>false<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Same<sp/>message<sp/>is<sp/>used<sp/>for<sp/>moving<sp/>left<sp/>right<sp/>top<sp/>or<sp/>bottom<sp/>edge.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>to<sp/>move<sp/>selection<sp/>boundary<sp/>to<sp/>cursor.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>No<sp/>cursor<sp/>change.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa0e2983ab8187d8aaa75f76e50622ac9e" kindref="member">SBLeft</ref>:</highlight></codeline>
<codeline lineno="1929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>move<sp/>left<sp/>selection<sp/>boundary.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1a285bee406a7006b3446a184e4b82ef7a" kindref="member">mAdjustLeftSelectionCursor</ref>;</highlight></codeline>
<codeline lineno="1931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaf9ac100db15716ed99fea50cfed80455" kindref="member">SBRight</ref>:</highlight></codeline>
<codeline lineno="1933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>move<sp/>right<sp/>selection<sp/>boundary.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1a3d6d67cfbb88101960b3854cc6ec14c2" kindref="member">mAdjustRightSelectionCursor</ref>;</highlight></codeline>
<codeline lineno="1935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1936"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaad9f7cd5fd67e9ebeba91878771585ea" kindref="member">SBBottom</ref>:</highlight></codeline>
<codeline lineno="1938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>move<sp/>bottom<sp/>selection<sp/>frequency.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1af59ffe3dcaa79ea7d3f650a77a3a668b" kindref="member">mBottomFrequencyCursor</ref>;</highlight></codeline>
<codeline lineno="1940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa2569d529dc75d78f48336c3434a68f1b" kindref="member">SBTop</ref>:</highlight></codeline>
<codeline lineno="1942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>move<sp/>top<sp/>selection<sp/>frequency.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1a870e2ab664262b1033b6ab96acc82c02" kindref="member">mTopFrequencyCursor</ref>;</highlight></codeline>
<codeline lineno="1944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa90557190a1b0cdc2478aef8e1bc37aaa" kindref="member">SBCenter</ref>:</highlight></codeline>
<codeline lineno="1946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab57df1d31a1abfd5c7d78cc3699133bc" kindref="member">HandleCenterFrequencyCursor</ref>(bShiftDown,<sp/>tip,<sp/>ppCursor);</highlight></codeline>
<codeline lineno="1947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefab720d85f3623565f8867e123b68086b8" kindref="member">SBWidth</ref>:</highlight></codeline>
<codeline lineno="1949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>adjust<sp/>frequency<sp/>bandwidth.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ppCursor<sp/>=<sp/><ref refid="class_track_panel_1a94be9bdea6c34977d0d74514458468ab" kindref="member">mBandWidthCursor</ref>;</highlight></codeline>
<codeline lineno="1951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1952"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1955"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="comment">//<sp/>switch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1956"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Falls<sp/>through<sp/>the<sp/>switch<sp/>if<sp/>there<sp/>was<sp/>no<sp/>boundary<sp/>found.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1957"><highlight class="normal"></highlight></codeline>
<codeline lineno="1958"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5f33eeac1ae61a62b09aacf9d9f7e928" kindref="member">MaySetOnDemandTip</ref>(<sp/>t,<sp/>tip<sp/>);</highlight></codeline>
<codeline lineno="1959"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1960"><highlight class="normal"></highlight></codeline>
<codeline lineno="1963" refid="class_track_panel_1a8182c520cbff18464a755ae8ee69ee29" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8182c520cbff18464a755ae8ee69ee29" kindref="member">TrackPanel::SetCursorAndTipByTool</ref>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>tool,</highlight></codeline>
<codeline lineno="1964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxMouseEvent<sp/>&amp;<sp/>event,<sp/>wxString&amp;<sp/>)</highlight></codeline>
<codeline lineno="1965"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1966"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>unsafe<sp/>=<sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>();</highlight></codeline>
<codeline lineno="1967"><highlight class="normal"></highlight></codeline>
<codeline lineno="1968"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Change<sp/>the<sp/>cursor<sp/>based<sp/>on<sp/>the<sp/>active<sp/>tool.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1969"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(tool)<sp/>{</highlight></codeline>
<codeline lineno="1970"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad2abf425de60833a72cf4289440fbd6b" kindref="member">selectTool</ref>:</highlight></codeline>
<codeline lineno="1971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxFAIL;</highlight><highlight class="comment">//<sp/>should<sp/>have<sp/>already<sp/>been<sp/>handled</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1973"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad4963af29a1644a7d90b99b1de4802be" kindref="member">envelopeTool</ref>:</highlight></codeline>
<codeline lineno="1974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(unsafe<sp/>?<sp/>*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1ae120daf4a0e3c0249ab1a98094edff28" kindref="member">mEnvelopeCursor</ref>);</highlight></codeline>
<codeline lineno="1975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1976"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748a74de0207d819bb60cfa251d696759994" kindref="member">slideTool</ref>:</highlight></codeline>
<codeline lineno="1977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(unsafe<sp/>?<sp/>*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1aeb18d7c6402c4b5c7c626fab5bcec748" kindref="member">mSlideCursor</ref>);</highlight></codeline>
<codeline lineno="1978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1979"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748a68d9a0eebbd7ecb9b7c7fc5deb442b91" kindref="member">zoomTool</ref>:</highlight></codeline>
<codeline lineno="1980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(event.ShiftDown()?<sp/>*<ref refid="class_track_panel_1a2e34ef324bc6b3ccb8229f644750aac8" kindref="member">mZoomOutCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1a48bdb309d319ab126fc86691a86ca9bc" kindref="member">mZoomInCursor</ref>);</highlight></codeline>
<codeline lineno="1981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1982"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac02cdeab443a3cb8401c4ef92ec42328" kindref="member">drawTool</ref>:</highlight></codeline>
<codeline lineno="1983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(unsafe)</highlight></codeline>
<codeline lineno="1984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1a5552caee45635cb3bae1338fbe51b18c" kindref="member">mDisabledCursor</ref>);</highlight></codeline>
<codeline lineno="1985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(event.AltDown()?<sp/>*<ref refid="class_track_panel_1a30fd1afbc5cb7aeed61bffb0e5d472e2" kindref="member">mSmoothCursor</ref><sp/>:<sp/>*<ref refid="class_track_panel_1aa6e6a57e571eec0f9842558b04945b1c" kindref="member">mPencilCursor</ref>);</highlight></codeline>
<codeline lineno="1987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1988"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1989"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>doesn&apos;t<sp/>actually<sp/>change<sp/>the<sp/>tip<sp/>itself,<sp/>but<sp/>it<sp/>could<sp/>(should?)<sp/>do<sp/>at<sp/>some</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1990"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>future<sp/>date.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1991"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1992"><highlight class="normal"></highlight></codeline>
<codeline lineno="1996" refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">TrackPanel::HandleCursor</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="1997"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1998"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5979c1a1b36df3e78c7974e0dfc07c02" kindref="member">mLastMouseEvent</ref><sp/>=<sp/>event;</highlight></codeline>
<codeline lineno="1999"><highlight class="normal"></highlight></codeline>
<codeline lineno="2000"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(1),<sp/>If<sp/>possible,<sp/>set<sp/>the<sp/>cursor<sp/>based<sp/>on<sp/>the<sp/>current<sp/>activity</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2001"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>(<sp/>leave<sp/>the<sp/>StatusBar<sp/>alone<sp/>).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2002"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a16f030d9d1ef9352ca6f0405aa9d52f1" kindref="member">SetCursorByActivity</ref>()<sp/>)</highlight></codeline>
<codeline lineno="2003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2004"><highlight class="normal"></highlight></codeline>
<codeline lineno="2005"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(2)<sp/>If<sp/>we<sp/>are<sp/>not<sp/>over<sp/>a<sp/>track<sp/>at<sp/>all,<sp/>set<sp/>the<sp/>cursor<sp/>to<sp/>Arrow<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2006"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>clear<sp/>the<sp/>StatusBar,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2007"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>labelRect,<sp/>trackRect;</highlight></codeline>
<codeline lineno="2008"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="_tags_8cpp_1a0a3345b0d4574d7adffe113dacd8ccec" kindref="member">label</ref><sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>&amp;labelRect);</highlight></codeline>
<codeline lineno="2009"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>nonlabel<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;trackRect);</highlight></codeline>
<codeline lineno="2010"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>track<sp/>=<sp/>label<sp/>?<sp/>label<sp/>:<sp/>nonlabel;</highlight></codeline>
<codeline lineno="2011"><highlight class="normal"></highlight></codeline>
<codeline lineno="2012"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!track)<sp/>{</highlight></codeline>
<codeline lineno="2013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1aeb8e3a8ba37bb6113d378e37dd90d910" kindref="member">mArrowCursor</ref>);</highlight></codeline>
<codeline lineno="2014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a314b71fdc6da3866223ae7351786c18d" kindref="member">TP_DisplayStatusMessage</ref>(wxT(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="2015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2016"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2017"><highlight class="normal"></highlight></codeline>
<codeline lineno="2018"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(3)<sp/>The<sp/>easy<sp/>cases<sp/>are<sp/>done.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2019"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>we&apos;ve<sp/>got<sp/>to<sp/>hit-test<sp/>against<sp/>a<sp/>number<sp/>of<sp/>different<sp/>possibilities.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2020"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>could<sp/>be<sp/>over<sp/>the<sp/>label<sp/>or<sp/>a<sp/>vertical<sp/>ruler<sp/>etc...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2021"><highlight class="normal"></highlight></codeline>
<codeline lineno="2022"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Strategy<sp/>here<sp/>is<sp/>to<sp/>set<sp/>the<sp/>tip<sp/>when<sp/>we<sp/>have<sp/>determined<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2023"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>correct<sp/>cursor.<sp/><sp/>We<sp/>stop<sp/>doing<sp/>tests<sp/>for<sp/>what<sp/>we&apos;ve</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2024"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>hit<sp/>once<sp/>the<sp/>tip<sp/>is<sp/>not<sp/>NULL.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2025"><highlight class="normal"></highlight></codeline>
<codeline lineno="2026"><highlight class="normal"><sp/><sp/><sp/>wxString<sp/>tip;</highlight></codeline>
<codeline lineno="2027"><highlight class="normal"></highlight></codeline>
<codeline lineno="2028"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Are<sp/>we<sp/>within<sp/>the<sp/>vertical<sp/>resize<sp/>area?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2029"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nonlabel</highlight></codeline>
<codeline lineno="2030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(event.m_y,<sp/>trackRect.y<sp/>+<sp/>trackRect.height,<sp/><ref refid="_track_panel_8h_1a77c6eedc985ef68d1fb9551d9f7254e8" kindref="member">TRACK_RESIZE_REGION</ref>)</highlight></codeline>
<codeline lineno="2031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(event.m_y,<sp/>labelRect.y<sp/>+<sp/>labelRect.height,<sp/><ref refid="_track_panel_8h_1a77c6eedc985ef68d1fb9551d9f7254e8" kindref="member">TRACK_RESIZE_REGION</ref>))</highlight></codeline>
<codeline lineno="2032"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a58ff067a7bd41439d1315d231926d739" kindref="member">SetCursorAndTipWhenInVResizeArea</ref>(nonlabel<sp/>&amp;&amp;<sp/>track-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>(),<sp/>tip);</highlight></codeline>
<codeline lineno="2034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>tip<sp/>may<sp/>still<sp/>be<sp/>NULL<sp/>at<sp/>this<sp/>point,<sp/>in<sp/>which<sp/>case<sp/>we<sp/>go<sp/>on<sp/>looking.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2035"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2036"><highlight class="normal"></highlight></codeline>
<codeline lineno="2037"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((tip<sp/>==<sp/>wxString())<sp/>&amp;&amp;<sp/><ref refid="_tags_8cpp_1a0a3345b0d4574d7adffe113dacd8ccec" kindref="member">label</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a602ea41daa207e8731cf277fdc90a5b3" kindref="member">SetCursorAndTipWhenInLabel</ref>(<sp/>label,<sp/>event,<sp/>tip<sp/>);</highlight></codeline>
<codeline lineno="2039"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2040"><highlight class="normal"></highlight></codeline>
<codeline lineno="2041"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Otherwise,<sp/>we<sp/>must<sp/>be<sp/>over<sp/>a<sp/>track<sp/>of<sp/>some<sp/>kind</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2042"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Is<sp/>it<sp/>a<sp/>label<sp/>track?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2043"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((tip<sp/>==<sp/>wxString())<sp/>&amp;&amp;<sp/>(track-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>))</highlight></codeline>
<codeline lineno="2044"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>are<sp/>over<sp/>a<sp/>label<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9c9a5efbb00766367f6d04675b04194e" kindref="member">SetCursorAndTipWhenInLabelTrack</ref>(<sp/>static_cast&lt;LabelTrack*&gt;(track),<sp/>event,<sp/>tip<sp/>);</highlight></codeline>
<codeline lineno="2047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>..and<sp/>if<sp/>we<sp/>haven&apos;t<sp/>yet<sp/>determined<sp/>the<sp/>cursor,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>go<sp/>on<sp/>to<sp/>do<sp/>all<sp/>the<sp/>standard<sp/>track<sp/>hit<sp/>tests.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2049"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2050"><highlight class="normal"></highlight></codeline>
<codeline lineno="2051"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((tip<sp/>==<sp/>wxString())<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>nonlabel<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>nonlabel-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2a9f4c3f7d9e69e93b52b013f5608b9b" kindref="member">SetCursorForCutline</ref>(static_cast&lt;WaveTrack*&gt;(nonlabel),<sp/>trackRect,<sp/>event))</highlight></codeline>
<codeline lineno="2055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2056"><highlight class="normal"></highlight></codeline>
<codeline lineno="2057"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>tip<sp/>==<sp/>wxString()<sp/>)</highlight></codeline>
<codeline lineno="2058"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_tools_tool_bar" kindref="compound">ToolsToolBar</ref><sp/>*<sp/>ttb<sp/>=<sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1acf3d6b30e8eefb02d6524223a1e70545" kindref="member">TP_GetToolsToolBar</ref>();</highlight></codeline>
<codeline lineno="2060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ttb<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)</highlight></codeline>
<codeline lineno="2061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JKC:<sp/>DetermineToolToUse<sp/>is<sp/>called<sp/>whenever<sp/>the<sp/>mouse</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>moves.<sp/><sp/>I<sp/>had<sp/>some<sp/>worries<sp/>about<sp/>calling<sp/>it<sp/>when<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>multimode<sp/>as<sp/>it<sp/>then<sp/>has<sp/>to<sp/>hit-test<sp/>all<sp/>&apos;objects&apos;<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>track<sp/>panel,<sp/>but<sp/>performance<sp/>seems<sp/>fine<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>practice<sp/>(on<sp/>a<sp/>P500).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>tool<sp/>=<sp/><ref refid="class_track_panel_1ae5f00fa573c7c333e78da8fbd5e9c03f" kindref="member">DetermineToolToUse</ref>(<sp/>ttb,<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="2068"><highlight class="normal"></highlight></codeline>
<codeline lineno="2069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tip<sp/>=<sp/>ttb-&gt;<ref refid="class_tools_tool_bar_1a044a1fdcf73e2c079b604bfdfe59cc35" kindref="member">GetMessageForTool</ref>(tool);</highlight></codeline>
<codeline lineno="2070"><highlight class="normal"></highlight></codeline>
<codeline lineno="2071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>don&apos;t<sp/>include<sp/>the<sp/>select<sp/>tool<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SetCursorAndTipByTool()<sp/>because<sp/>it&apos;s<sp/>more<sp/>complex<sp/>than</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>other<sp/>tool<sp/>cases.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>tool<sp/>!=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad2abf425de60833a72cf4289440fbd6b" kindref="member">selectTool</ref><sp/>)</highlight></codeline>
<codeline lineno="2075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8182c520cbff18464a755ae8ee69ee29" kindref="member">SetCursorAndTipByTool</ref>(<sp/>tool,<sp/>event,<sp/>tip);</highlight></codeline>
<codeline lineno="2077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bMultiToolMode<sp/>=<sp/>ttb-&gt;<ref refid="class_tools_tool_bar_1a2d8c3ea8e829b4e8af34a848dcab38ae" kindref="member">IsDown</ref>(<ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac010717a868fce968a7046a9db152b55" kindref="member">multiTool</ref>);</highlight></codeline>
<codeline lineno="2081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxCursor<sp/>*pSelection<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aeba082d58c890da9c7f43c201a72b411" kindref="member">SetCursorAndTipWhenSelectTool</ref></highlight></codeline>
<codeline lineno="2083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<sp/>track,<sp/>event,<sp/>trackRect,<sp/>bMultiToolMode,<sp/>tip,<sp/>&amp;pSelection<sp/>);</highlight></codeline>
<codeline lineno="2084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSelection)</highlight></codeline>
<codeline lineno="2085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>cursor<sp/>once<sp/>only<sp/>here,<sp/>to<sp/>avoid<sp/>flashing<sp/>during<sp/>drags</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*pSelection);</highlight></codeline>
<codeline lineno="2087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2088"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2089"><highlight class="normal"></highlight></codeline>
<codeline lineno="2090"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tip<sp/>!=<sp/>wxString())</highlight></codeline>
<codeline lineno="2091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a314b71fdc6da3866223ae7351786c18d" kindref="member">TP_DisplayStatusMessage</ref>(tip);</highlight></codeline>
<codeline lineno="2092"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2093"><highlight class="normal"></highlight></codeline>
<codeline lineno="2094"><highlight class="normal"></highlight></codeline>
<codeline lineno="2098" refid="class_track_panel_1a16fa8c66608b0fc61d96d855b77f589e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a16fa8c66608b0fc61d96d855b77f589e" kindref="member">TrackPanel::HandleSelect</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="2099"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2100"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="2101"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="2102"><highlight class="normal"></highlight></codeline>
<codeline lineno="2103"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>Ok,<sp/>did<sp/>the<sp/>user<sp/>just<sp/>click<sp/>the<sp/>mouse,<sp/>release<sp/>the<sp/>mouse,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2104"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>or<sp/>drag?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2105"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown()<sp/>||</highlight></codeline>
<codeline lineno="2106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">event</highlight><highlight class="normal">.LeftDClick()<sp/>&amp;&amp;<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.CmdDown()))<sp/>{</highlight></codeline>
<codeline lineno="2107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>Now,<sp/>did<sp/>they<sp/>click<sp/>in<sp/>a<sp/>track<sp/>somewhere?<sp/><sp/>If<sp/>so,<sp/>we<sp/>want</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>to<sp/>extend<sp/>the<sp/>current<sp/>selection<sp/>or<sp/>start<sp/>a<sp/>NEW<sp/>selection,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>depending<sp/>on<sp/>the<sp/>shift<sp/>key.<sp/><sp/>If<sp/>not,<sp/>cancel<sp/>all<sp/>selections.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t)</highlight></codeline>
<codeline lineno="2111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1accf5fa5e64ce4ad8c27f583cbec05892" kindref="member">SelectionHandleClick</ref>(event,<sp/>t,<sp/>rect);</highlight></codeline>
<codeline lineno="2112"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.RightUp())<sp/>{</highlight></codeline>
<codeline lineno="2113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>;</highlight></codeline>
<codeline lineno="2115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>not<sp/>draw<sp/>yellow<sp/>lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>!=<sp/>-1<sp/>||<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>!=<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="2119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2122"><highlight class="normal"></highlight></codeline>
<codeline lineno="2123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="2124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Send<sp/>the<sp/>NEW<sp/>selection<sp/>state<sp/>to<sp/>the<sp/>undo/redo<sp/>stack:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2126"><highlight class="normal"></highlight></codeline>
<codeline lineno="2127"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>stops<sp/>center<sp/>snapping<sp/>with<sp/>mouse<sp/>movement</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa57e7db3a8296b8f4b70661b69d76ef26" kindref="member">FREQ_SEL_INVALID</ref>;</highlight></codeline>
<codeline lineno="2130"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2131"><highlight class="normal"></highlight></codeline>
<codeline lineno="2132"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDClick()<sp/>&amp;&amp;<sp/>!</highlight><highlight class="keyword">event</highlight><highlight class="normal">.ShiftDown()</highlight></codeline>
<codeline lineno="2133"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!</highlight><highlight class="keyword">event</highlight><highlight class="normal">.CmdDown()</highlight></codeline>
<codeline lineno="2135"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="2137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="2139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=</highlight></codeline>
<codeline lineno="2140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="2141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="2142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2144"><highlight class="normal"></highlight></codeline>
<codeline lineno="2145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Deselect<sp/>all<sp/>other<sp/>tracks<sp/>and<sp/>select<sp/>this<sp/>one.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a942c08d24411790207fd1e275448516e" kindref="member">SelectNone</ref>();</highlight></codeline>
<codeline lineno="2147"><highlight class="normal"></highlight></codeline>
<codeline lineno="2148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="2149"><highlight class="normal"></highlight></codeline>
<codeline lineno="2150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Default<sp/>behavior:<sp/>select<sp/>whole<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae4c957bea9775488e085c370710cd566" kindref="member">SelectTrackLength</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="2152"><highlight class="normal"></highlight></codeline>
<codeline lineno="2153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Special<sp/>case:<sp/>if<sp/>we&apos;re<sp/>over<sp/>a<sp/>clip<sp/>in<sp/>a<sp/>WaveTrack,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>select<sp/>just<sp/>that<sp/>clip</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*w<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="2157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*selectedClip<sp/>=<sp/>w-&gt;<ref refid="class_wave_track_1a6f2397064c743a2265ecbc4c9e35fea7" kindref="member">GetClipAtX</ref>(event.m_x);</highlight></codeline>
<codeline lineno="2158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(selectedClip)<sp/>{</highlight></codeline>
<codeline lineno="2159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a21a6af7b052d9d6bd39cc1db088e8f5d" kindref="member">setTimes</ref>(</highlight></codeline>
<codeline lineno="2160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>selectedClip-&gt;<ref refid="class_wave_clip_1a070d7b2328a78c6ddaecc2f60ad4567f" kindref="member">GetOffset</ref>(),<sp/>selectedClip-&gt;<ref refid="class_wave_clip_1a7c878143bdd7641be183325944d02f39" kindref="member">GetEndTime</ref>());</highlight></codeline>
<codeline lineno="2161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Also,<sp/>capture<sp/>this<sp/>track<sp/>for<sp/>dragging<sp/>until<sp/>we<sp/>up-click.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.Add(<ref refid="class_track_clip" kindref="compound">TrackClip</ref>(w,<sp/>selectedClip));</highlight></codeline>
<codeline lineno="2164"><highlight class="normal"></highlight></codeline>
<codeline lineno="2165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad69d99a254d131489723ad0ec04810a0" kindref="member">IsSliding</ref>;</highlight></codeline>
<codeline lineno="2166"><highlight class="normal"></highlight></codeline>
<codeline lineno="2167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af4fa94589c343988e22bad24c7f05ed8" kindref="member">StartSlide</ref>(event);</highlight></codeline>
<codeline lineno="2169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="2170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2171"><highlight class="normal"></highlight></codeline>
<codeline lineno="2172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="2174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2175"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2176"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2177"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>SPECTRAL_EDITING_ESC_KEY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2178"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!event.IsButton()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa993fb1a686f5aa32359fcebbc97dfc65" kindref="member">FREQ_SEL_SNAPPING_CENTER</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ad98c3c19684309127345db2dc9ea7165" kindref="member">isPoint</ref>())</highlight></codeline>
<codeline lineno="2181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a49be30774780343754f3de5719cfd1dc" kindref="member">MoveSnappingFreqSelection</ref>(event.m_y,<sp/>rect.y,<sp/>rect.height,<sp/>t);</highlight></codeline>
<codeline lineno="2182"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2183"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2184"><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>:</highlight></codeline>
<codeline lineno="2185"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a256e9294a7633273eb11bf4f5bc0d4fe" kindref="member">SelectionHandleDrag</ref>(event,<sp/>t);</highlight></codeline>
<codeline lineno="2186"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2187"><highlight class="normal"></highlight></codeline>
<codeline lineno="2188"><highlight class="normal"></highlight></codeline>
<codeline lineno="2189"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Made<sp/>obsolete<sp/>by<sp/>scrubbing:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2190"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2191"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackPanel::StartOrJumpPlayback(wxMouseEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="2192"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2193"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="_project_8cpp_1a897aa047b58617a9acc187fc882e3bb4" kindref="member">GetActiveProject</ref>();</highlight></codeline>
<codeline lineno="2194"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p)<sp/>{</highlight></codeline>
<codeline lineno="2195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>clicktime<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="2196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>();</highlight></codeline>
<codeline lineno="2197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Play<sp/>to<sp/>end<sp/>of<sp/>selection,<sp/>or<sp/>if<sp/>that<sp/>is<sp/>not<sp/>right<sp/>of<sp/>the<sp/>pick,<sp/>end<sp/>of<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>endtime<sp/>=<sp/>clicktime<sp/>&lt;<sp/>t1<sp/>?<sp/>t1<sp/>:<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a7183cfda6c309fdba18c625cce4378b7" kindref="member">total</ref>;</highlight></codeline>
<codeline lineno="2199"><highlight class="normal"></highlight></codeline>
<codeline lineno="2200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Behavior<sp/>should<sp/>differ<sp/>depending<sp/>upon<sp/>whether<sp/>we<sp/>are</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//currently<sp/>in<sp/>playback<sp/>mode<sp/>or<sp/>not.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2202"><highlight class="normal"></highlight></codeline>
<codeline lineno="2203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>busy<sp/>=<sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a10f4e839ded338c433a4cd46a6ba41b1" kindref="member">IsBusy</ref>();</highlight></codeline>
<codeline lineno="2204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!busy)</highlight></codeline>
<codeline lineno="2205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>aren&apos;t<sp/>currently<sp/>playing<sp/>back,<sp/>start<sp/>playing<sp/>back<sp/>at</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//the<sp/>clicked<sp/>point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_control_tool_bar" kindref="compound">ControlToolBar</ref><sp/>*<sp/>ctb<sp/>=<sp/>p-&gt;<ref refid="class_audacity_project_1a42b3845e8ab4f0e32fa04be54562d0c1" kindref="member">GetControlToolBar</ref>();</highlight></codeline>
<codeline lineno="2209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//ctb-&gt;SetPlay(true);//<sp/>Not<sp/>needed<sp/>as<sp/>done<sp/>in<sp/>PlayPlayRegion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctb-&gt;<ref refid="class_control_tool_bar_1a27e498f7d4b6ff791649e18297e51e66" kindref="member">PlayPlayRegion</ref></highlight></codeline>
<codeline lineno="2211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_selected_region" kindref="compound">SelectedRegion</ref>(clicktime,<sp/>endtime),<sp/>p-&gt;<ref refid="class_audacity_project_1aab258cf005aa9ef7df136e8491590c27" kindref="member">GetDefaultPlayOptions</ref>());</highlight></codeline>
<codeline lineno="2212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>are<sp/>playing<sp/>back,<sp/>stop<sp/>and<sp/>move<sp/>playback</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//to<sp/>the<sp/>clicked<sp/>point.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//This<sp/>unpauses<sp/>paused<sp/>audio<sp/>as<sp/>well.<sp/><sp/>The<sp/>right<sp/>thing<sp/>to<sp/>do<sp/>might<sp/>be<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//leave<sp/>it<sp/>paused<sp/>but<sp/>move<sp/>the<sp/>point.<sp/><sp/>This<sp/>would<sp/>probably</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//require<sp/>a<sp/>NEW<sp/>method<sp/>in<sp/>ControlToolBar:<sp/>SetPause();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_control_tool_bar" kindref="compound">ControlToolBar</ref><sp/>*<sp/>ctb<sp/>=<sp/>p-&gt;<ref refid="class_audacity_project_1a42b3845e8ab4f0e32fa04be54562d0c1" kindref="member">GetControlToolBar</ref>();</highlight></codeline>
<codeline lineno="2221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctb-&gt;<ref refid="class_control_tool_bar_1a4aab4234b15a2dd82baad56119e7d0c0" kindref="member">StopPlaying</ref>();</highlight></codeline>
<codeline lineno="2222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctb-&gt;<ref refid="class_control_tool_bar_1a27e498f7d4b6ff791649e18297e51e66" kindref="member">PlayPlayRegion</ref>(<ref refid="class_selected_region" kindref="compound">SelectedRegion</ref>(clicktime,<sp/>endtime),<sp/>p-&gt;<ref refid="class_audacity_project_1aab258cf005aa9ef7df136e8491590c27" kindref="member">GetDefaultPlayOptions</ref>());</highlight></codeline>
<codeline lineno="2223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2224"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2225"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2226"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2227"><highlight class="normal"></highlight></codeline>
<codeline lineno="2228"><highlight class="normal"></highlight></codeline>
<codeline lineno="2229"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2230" refid="class_track_panel_1ada36085585f713f52e23065a1d03a16e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ada36085585f713f52e23065a1d03a16e" kindref="member">TrackPanel::FindScrubSpeed</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>timeAtMouse)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="2231"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="2232"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Map<sp/>a<sp/>time<sp/>(which<sp/>was<sp/>mapped<sp/>from<sp/>a<sp/>mouse<sp/>position)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2233"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>to<sp/>a<sp/>speed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2234"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Map<sp/>times<sp/>to<sp/>positive<sp/>and<sp/>negative<sp/>speeds,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2235"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>with<sp/>the<sp/>time<sp/>at<sp/>the<sp/>midline<sp/>of<sp/>the<sp/>screen<sp/>mapping<sp/>to<sp/>0,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2236"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>the<sp/>extremes<sp/>to<sp/>the<sp/>maximum<sp/>scrub<sp/>speed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2237"><highlight class="normal"></highlight></codeline>
<codeline lineno="2238"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Width<sp/>of<sp/>visible<sp/>track<sp/>area,<sp/>in<sp/>time<sp/>terms:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2239"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>screen<sp/>=<sp/><ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>;</highlight></codeline>
<codeline lineno="2240"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>origin<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>+<sp/>screen<sp/>/<sp/>2.0;</highlight></codeline>
<codeline lineno="2241"><highlight class="normal"></highlight></codeline>
<codeline lineno="2242"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>There<sp/>are<sp/>various<sp/>snapping<sp/>zones<sp/>that<sp/>are<sp/>this<sp/>fraction<sp/>of<sp/>screen:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2243"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>snap<sp/>=<sp/>0.05;</highlight></codeline>
<codeline lineno="2244"><highlight class="normal"></highlight></codeline>
<codeline lineno="2245"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>By<sp/>shrinking<sp/>denom<sp/>a<sp/>bit,<sp/>we<sp/>make<sp/>margins<sp/>left<sp/>and<sp/>right</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2246"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>that<sp/>snap<sp/>to<sp/>maximum<sp/>and<sp/>negative<sp/>maximum<sp/>speeds.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2247"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>factor<sp/>=<sp/>1.0<sp/>-<sp/>(snap<sp/>*<sp/>2);</highlight></codeline>
<codeline lineno="2248"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>denom<sp/>=<sp/>factor<sp/>*<sp/>screen<sp/>/<sp/>2.0;</highlight></codeline>
<codeline lineno="2249"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="rate_8h_1a4fe9291634c41107f940e7393fba4603" kindref="member">fraction</ref><sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(1.0,<sp/>fabs(timeAtMouse<sp/>-<sp/>origin)<sp/>/<sp/>denom);</highlight></codeline>
<codeline lineno="2250"><highlight class="normal"></highlight></codeline>
<codeline lineno="2251"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Snap<sp/>to<sp/>1.0<sp/>and<sp/>-1.0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2252"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>unity<sp/>=<sp/>1.0<sp/>/<sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref>;</highlight></codeline>
<codeline lineno="2253"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>tolerance<sp/>=<sp/>snap<sp/>/<sp/>factor;</highlight></codeline>
<codeline lineno="2254"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>speeds<sp/>near<sp/>1<sp/>available<sp/>too<sp/>by<sp/>remapping<sp/>fractions<sp/>outside</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2255"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>snap<sp/>zone</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2256"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fraction<sp/>&lt;=<sp/>unity<sp/>-<sp/>tolerance)</highlight></codeline>
<codeline lineno="2257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>fraction<sp/>*=<sp/>unity<sp/>/<sp/>(unity<sp/>-<sp/>tolerance);</highlight></codeline>
<codeline lineno="2258"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fraction<sp/>&lt;<sp/>unity<sp/>+<sp/>tolerance)</highlight></codeline>
<codeline lineno="2259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>fraction<sp/>=<sp/>unity;</highlight></codeline>
<codeline lineno="2260"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>fraction<sp/>=<sp/>unity<sp/>+<sp/>(fraction<sp/>-<sp/>(unity<sp/>+<sp/>tolerance))<sp/>*</highlight></codeline>
<codeline lineno="2262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(1.0<sp/>-<sp/>unity)<sp/>/<sp/>(1.0<sp/>-<sp/>(unity<sp/>+<sp/>tolerance));</highlight></codeline>
<codeline lineno="2263"><highlight class="normal"></highlight></codeline>
<codeline lineno="2264"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>result<sp/>=<sp/>fraction<sp/>*<sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref>;</highlight></codeline>
<codeline lineno="2265"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(timeAtMouse<sp/>&lt;<sp/>origin)</highlight></codeline>
<codeline lineno="2266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>*=<sp/>-1.0;</highlight></codeline>
<codeline lineno="2267"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2268"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2269"><highlight class="normal"></highlight></codeline>
<codeline lineno="2270" refid="class_track_panel_1a700982026d45a87971910757d0e9b730" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a700982026d45a87971910757d0e9b730" kindref="member">TrackPanel::FindSeekSpeed</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>timeAtMouse)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="2271"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="2272"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Map<sp/>a<sp/>time<sp/>(which<sp/>was<sp/>mapped<sp/>from<sp/>a<sp/>mouse<sp/>position)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2273"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>to<sp/>a<sp/>signed<sp/>skip<sp/>speed:<sp/>a<sp/>multiplier<sp/>of<sp/>the<sp/>stutter<sp/>duration,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2274"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>by<sp/>which<sp/>to<sp/>advance<sp/>the<sp/>play<sp/>position.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2275"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(The<sp/>stutter<sp/>will<sp/>play<sp/>at<sp/>unit<sp/>speed.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2276"><highlight class="normal"></highlight></codeline>
<codeline lineno="2277"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Times<sp/>near<sp/>the<sp/>midline<sp/>of<sp/>the<sp/>screen<sp/>map<sp/>to<sp/>skip-less<sp/>play,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2278"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>the<sp/>extremes<sp/>to<sp/>a<sp/>value<sp/>proportional<sp/>to<sp/>maximum<sp/>scrub<sp/>speed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2279"><highlight class="normal"></highlight></codeline>
<codeline lineno="2280"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>the<sp/>maximum<sp/>scrubbing<sp/>speed<sp/>defaults<sp/>to<sp/>1.0<sp/>when<sp/>you<sp/>begin<sp/>to<sp/>scroll-scrub,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2281"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>extreme<sp/>skipping<sp/>for<sp/>scroll-seek<sp/>needs<sp/>to<sp/>be<sp/>larger<sp/>to<sp/>be<sp/>useful.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2282"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ARBITRARY_MULTIPLIER<sp/>=<sp/>10.0;</highlight></codeline>
<codeline lineno="2283"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>extreme<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(1.0,<sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref><sp/>*<sp/>ARBITRARY_MULTIPLIER);</highlight></codeline>
<codeline lineno="2284"><highlight class="normal"></highlight></codeline>
<codeline lineno="2285"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Width<sp/>of<sp/>visible<sp/>track<sp/>area,<sp/>in<sp/>time<sp/>terms:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2286"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>screen<sp/>=<sp/><ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>;</highlight></codeline>
<codeline lineno="2287"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>halfScreen<sp/>=<sp/>screen<sp/>/<sp/>2.0;</highlight></codeline>
<codeline lineno="2288"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>origin<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>+<sp/>halfScreen;</highlight></codeline>
<codeline lineno="2289"><highlight class="normal"></highlight></codeline>
<codeline lineno="2290"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>snapping<sp/>zone<sp/>is<sp/>this<sp/>fraction<sp/>of<sp/>screen,<sp/>on<sp/>each<sp/>side<sp/>of<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2291"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>center<sp/>line:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2292"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>snap<sp/>=<sp/>0.05;</highlight></codeline>
<codeline lineno="2293"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="rate_8h_1a4fe9291634c41107f940e7393fba4603" kindref="member">fraction</ref><sp/>=</highlight></codeline>
<codeline lineno="2294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(snap,<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(1.0,<sp/>fabs(timeAtMouse<sp/>-<sp/>origin)<sp/>/<sp/>halfScreen));</highlight></codeline>
<codeline lineno="2295"><highlight class="normal"></highlight></codeline>
<codeline lineno="2296"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>result<sp/>=<sp/>1.0<sp/>+<sp/>((fraction<sp/>-<sp/>snap)<sp/>/<sp/>(1.0<sp/>-<sp/>snap))<sp/>*<sp/>(extreme<sp/>-<sp/>1.0);</highlight></codeline>
<codeline lineno="2297"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(timeAtMouse<sp/>&lt;<sp/>origin)</highlight></codeline>
<codeline lineno="2298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>*=<sp/>-1.0;</highlight></codeline>
<codeline lineno="2299"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2300"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2301"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2302"><highlight class="normal"></highlight></codeline>
<codeline lineno="2303"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2304" refid="class_track_panel_1a17b626c88077b5c998567797bbda9722" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a17b626c88077b5c998567797bbda9722" kindref="member">TrackPanel::PollIsSeeking</ref>()</highlight></codeline>
<codeline lineno="2305"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2306"><highlight class="normal"><sp/><sp/><sp/><ref refid="window_8cpp_1a6fb42677c51d509690e7062b9dadaa25" kindref="member">return ::wxGetMouseState</ref>().LeftIsDown();</highlight></codeline>
<codeline lineno="2307"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2308"><highlight class="normal"></highlight></codeline>
<codeline lineno="2309" refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">TrackPanel::IsScrubbing</ref>()</highlight></codeline>
<codeline lineno="2310"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2311"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1af56e383d9608b0ee7500fbe10c5d8369" kindref="member">mScrubToken</ref><sp/>&lt;=<sp/>0)</highlight></codeline>
<codeline lineno="2312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2313"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1af56e383d9608b0ee7500fbe10c5d8369" kindref="member">mScrubToken</ref><sp/>==<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;GetAudioIOToken())</highlight></codeline>
<codeline lineno="2314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2315"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af56e383d9608b0ee7500fbe10c5d8369" kindref="member">mScrubToken</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2318"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2320"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2322"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2323"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2324"><highlight class="normal"></highlight></codeline>
<codeline lineno="2325" refid="class_track_panel_1ab8a413612048411de7c8f9624141afd9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab8a413612048411de7c8f9624141afd9" kindref="member">TrackPanel::MarkScrubStart</ref>(</highlight></codeline>
<codeline lineno="2326"><highlight class="normal"><sp/><sp/><sp/>wxCoord<sp/>xx</highlight></codeline>
<codeline lineno="2327"><highlight class="normal">#ifdef<sp/><ref refid="_experimental_8h_1a305dce02d84a96501c789fc53839daf6" kindref="member">EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</ref></highlight></codeline>
<codeline lineno="2328"><highlight class="normal"><sp/><sp/><sp/>,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>smoothScrolling</highlight></codeline>
<codeline lineno="2329"><highlight class="normal">#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref></highlight></codeline>
<codeline lineno="2330"><highlight class="normal">)</highlight></codeline>
<codeline lineno="2331"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2332"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Don&apos;t<sp/>actually<sp/>start<sp/>scrubbing,<sp/>but<sp/>collect<sp/>some<sp/>information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2333"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>needed<sp/>for<sp/>the<sp/>decision<sp/>to<sp/>start<sp/>scrubbing<sp/>later<sp/>when<sp/>handling</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2334"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>drag<sp/>events.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2335"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2336"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref><sp/>=<sp/>smoothScrolling;</highlight></codeline>
<codeline lineno="2337"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2338"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref><sp/>=<sp/>xx;</highlight></codeline>
<codeline lineno="2339"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae463294b215dacd0cb93f54bc360ecde" kindref="member">mScrubStartClockTimeMillis</ref><sp/>=<sp/>::wxGetLocalTimeMillis();</highlight></codeline>
<codeline lineno="2340"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2341"><highlight class="normal"></highlight></codeline>
<codeline lineno="2342" refid="class_track_panel_1a68761c50276e717cca92431728377760" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a68761c50276e717cca92431728377760" kindref="member">TrackPanel::MaybeStartScrubbing</ref>(wxMouseEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="2343"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2344"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>())</highlight></codeline>
<codeline lineno="2345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2346"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref><sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="2347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>busy<sp/>=<sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a10f4e839ded338c433a4cd46a6ba41b1" kindref="member">IsBusy</ref>();</highlight></codeline>
<codeline lineno="2348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(busy<sp/>&amp;&amp;<sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a841f37644672ecb5ea445bfb52907c1f" kindref="member">GetNumCaptureChannels</ref>()<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="2349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>not<sp/>stop<sp/>recording,<sp/>and<sp/>don&apos;t<sp/>try<sp/>to<sp/>start<sp/>scrubbing<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>recording<sp/>stops</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2354"><highlight class="normal"></highlight></codeline>
<codeline lineno="2355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxCoord<sp/><ref refid="structposition" kindref="compound">position</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="2356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="_project_8cpp_1a897aa047b58617a9acc187fc882e3bb4" kindref="member">GetActiveProject</ref>();</highlight></codeline>
<codeline lineno="2357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>abs(<ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref><sp/>-<sp/>position)<sp/>&gt;=<sp/><ref refid="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a485b14b589ff0ea3f160823d54d4ccce" kindref="member">SCRUBBING_PIXEL_TOLERANCE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_control_tool_bar" kindref="compound">ControlToolBar</ref><sp/>*<sp/>ctb<sp/>=<sp/>p-&gt;<ref refid="class_audacity_project_1a42b3845e8ab4f0e32fa04be54562d0c1" kindref="member">GetControlToolBar</ref>();</highlight></codeline>
<codeline lineno="2360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxTime<sp/>=<sp/>p-&gt;<ref refid="class_audacity_project_1afaedffb2cf04d79c1ee7ff5f941b3644" kindref="member">GetTracks</ref>()-&gt;<ref refid="class_track_list_1a363c0208ea73546e90ca49887cefc5a8" kindref="member">GetEndTime</ref>();</highlight></codeline>
<codeline lineno="2361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>time0<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxTime,</highlight></codeline>
<codeline lineno="2362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(<ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref>,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>())</highlight></codeline>
<codeline lineno="2363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="2364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>time1<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxTime,</highlight></codeline>
<codeline lineno="2365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(position,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>())</highlight></codeline>
<codeline lineno="2366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="2367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(time1<sp/>!=<sp/>time0)</highlight></codeline>
<codeline lineno="2368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(busy)</highlight></codeline>
<codeline lineno="2370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctb-&gt;<ref refid="class_control_tool_bar_1a4aab4234b15a2dd82baad56119e7d0c0" kindref="member">StopPlaying</ref>();</highlight></codeline>
<codeline lineno="2371"><highlight class="normal"></highlight></codeline>
<codeline lineno="2372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_audio_i_o_start_stream_options" kindref="compound">AudioIOStartStreamOptions</ref><sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>(p-&gt;<ref refid="class_audacity_project_1aab258cf005aa9ef7df136e8491590c27" kindref="member">GetDefaultPlayOptions</ref>());</highlight></codeline>
<codeline lineno="2373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>.timeTrack<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>.scrubDelay<sp/>=<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a004ffd768278ee9c9a78ae35835fdc85" kindref="member">kTimerInterval</ref><sp/>/<sp/>1000.0);</highlight></codeline>
<codeline lineno="2375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>.scrubStartClockTimeMillis<sp/>=<sp/><ref refid="class_track_panel_1ae463294b215dacd0cb93f54bc360ecde" kindref="member">mScrubStartClockTimeMillis</ref>;</highlight></codeline>
<codeline lineno="2376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>.minScrubStutter<sp/>=<sp/>0.2;</highlight></codeline>
<codeline lineno="2377"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Take<sp/>the<sp/>starting<sp/>speed<sp/>limit<sp/>from<sp/>the<sp/>transcription<sp/>toolbar,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>but<sp/>it<sp/>may<sp/>be<sp/>varied<sp/>during<sp/>the<sp/>scrub.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref><sp/>=<sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>.maxScrubSpeed<sp/>=</highlight></codeline>
<codeline lineno="2381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1ae3d92b0f0bbb00792b1ada522b70611f" kindref="member">GetTranscriptionToolBar</ref>()-&gt;<ref refid="class_transcription_tool_bar_1a1d2811562c029111eadcd9ef30235a33" kindref="member">GetPlaySpeed</ref>();</highlight></codeline>
<codeline lineno="2382"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>That<sp/>idea<sp/>seems<sp/>unpopular...<sp/>just<sp/>make<sp/>it<sp/>one</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref><sp/>=<sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>.maxScrubSpeed<sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="2385"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>.maxScrubTime<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a363c0208ea73546e90ca49887cefc5a8" kindref="member">GetEndTime</ref>();</highlight></codeline>
<codeline lineno="2387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>cutPreview<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>backwards<sp/>=<sp/>time1<sp/>&lt;<sp/>time0;</highlight></codeline>
<codeline lineno="2389"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SCROLL_WHEEL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxScrubSpeedBase<sp/>=</highlight></codeline>
<codeline lineno="2391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pow(2.0,<sp/>1.0<sp/>/<sp/><ref refid="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a5ce300bd11671e2ae59e9a91a4bf8739" kindref="member">ScrubSpeedStepsPerOctave</ref>);</highlight></codeline>
<codeline lineno="2392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8588a9e934cd4cf2933b446c8eae5679" kindref="member">mLogMaxScrubSpeed</ref><sp/>=<sp/>floor(0.5<sp/>+</highlight></codeline>
<codeline lineno="2393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log(<ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref>)<sp/>/<sp/>log(maxScrubSpeedBase)</highlight></codeline>
<codeline lineno="2394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="2395"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af56e383d9608b0ee7500fbe10c5d8369" kindref="member">mScrubToken</ref><sp/>=</highlight></codeline>
<codeline lineno="2398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctb-&gt;<ref refid="class_control_tool_bar_1a27e498f7d4b6ff791649e18297e51e66" kindref="member">PlayPlayRegion</ref>(<ref refid="class_selected_region" kindref="compound">SelectedRegion</ref>(time0,<sp/>time1),<sp/><ref refid="namespacewaflib_1_1_options_1a59b9c00933a268d11c1c960cd109e113" kindref="member">options</ref>,<sp/>cutPreview,<sp/>backwards);</highlight></codeline>
<codeline lineno="2399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wait<sp/>to<sp/>test<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae463294b215dacd0cb93f54bc360ecde" kindref="member">mScrubStartClockTimeMillis</ref><sp/>=<sp/>::wxGetLocalTimeMillis();</highlight></codeline>
<codeline lineno="2404"><highlight class="normal"></highlight></codeline>
<codeline lineno="2405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>())<sp/>{</highlight></codeline>
<codeline lineno="2406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae30f39b53fd3947ccb99b048a6efd4e3" kindref="member">mScrubHasFocus</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//mMouseCapture<sp/>=<sp/>IsMiddleButtonScrubbing;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//CaptureMouse();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>();</highlight></codeline>
<codeline lineno="2411"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2412"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2414"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2415"><highlight class="normal"></highlight></codeline>
<codeline lineno="2416" refid="class_track_panel_1a9b004c2baf47cbe9013b27c19dd164b9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a9b004c2baf47cbe9013b27c19dd164b9" kindref="member">TrackPanel::ContinueScrubbing</ref>(wxCoord<sp/><ref refid="structposition" kindref="compound">position</ref>,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>hasFocus,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>seek)</highlight></codeline>
<codeline lineno="2417"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2418"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>we<sp/>don&apos;t<sp/>have<sp/>focus,<sp/>enqueue<sp/>silent<sp/>scrubs<sp/>until<sp/>we<sp/>regain<sp/>focus.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2419"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!hasFocus)</highlight></codeline>
<codeline lineno="2420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1aa5680009162f44b9156622851767e328" kindref="member">EnqueueScrubBySignedSpeed</ref>(0,<sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2421"><highlight class="normal"></highlight></codeline>
<codeline lineno="2422"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepyportmidi_1_1midi_1ad2426758f88d23d7208984d5c99ec050" kindref="member">time</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(position,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="2423"><highlight class="normal"></highlight></codeline>
<codeline lineno="2424"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(seek)</highlight></codeline>
<codeline lineno="2425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Cause<sp/>OnTimer()<sp/>to<sp/>suppress<sp/>the<sp/>speed<sp/>display</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2427"><highlight class="normal"></highlight></codeline>
<codeline lineno="2428"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2429"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>speed<sp/>=<sp/>seek<sp/>?<sp/><ref refid="class_track_panel_1a700982026d45a87971910757d0e9b730" kindref="member">FindSeekSpeed</ref>(time)<sp/>:<sp/><ref refid="class_track_panel_1ada36085585f713f52e23065a1d03a16e" kindref="member">FindScrubSpeed</ref>(time);</highlight></codeline>
<codeline lineno="2431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1aa5680009162f44b9156622851767e328" kindref="member">EnqueueScrubBySignedSpeed</ref>(speed,<sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref>,<sp/>seek);</highlight></codeline>
<codeline lineno="2432"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2433"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2434"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a89c8c6c8da819d583b92e32508fbae7b" kindref="member">EnqueueScrubByPosition</ref></highlight></codeline>
<codeline lineno="2436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(time,<sp/>seek<sp/>?<sp/>1.0<sp/>:<sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref>,<sp/>seek);</highlight></codeline>
<codeline lineno="2437"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2438"><highlight class="normal"></highlight></codeline>
<codeline lineno="2439" refid="class_track_panel_1a920c19185763a5cf27fe883ceb683db4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a920c19185763a5cf27fe883ceb683db4" kindref="member">TrackPanel::StopScrubbing</ref>()</highlight></codeline>
<codeline lineno="2440"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2441"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>())</highlight></codeline>
<codeline lineno="2442"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="_audio_i_o_8cpp_1a142d4fde5f1429059adcac9ea1f63425" kindref="member">gAudioIO</ref>-&gt;<ref refid="class_audio_i_o_1a10f4e839ded338c433a4cd46a6ba41b1" kindref="member">IsBusy</ref>())<sp/>{</highlight></codeline>
<codeline lineno="2444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="_project_8cpp_1a897aa047b58617a9acc187fc882e3bb4" kindref="member">GetActiveProject</ref>();</highlight></codeline>
<codeline lineno="2445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p)<sp/>{</highlight></codeline>
<codeline lineno="2446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_control_tool_bar" kindref="compound">ControlToolBar</ref><sp/>*<sp/>ctb<sp/>=<sp/>p-&gt;<ref refid="class_audacity_project_1a42b3845e8ab4f0e32fa04be54562d0c1" kindref="member">GetControlToolBar</ref>();</highlight></codeline>
<codeline lineno="2447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctb-&gt;<ref refid="class_control_tool_bar_1a4aab4234b15a2dd82baad56119e7d0c0" kindref="member">StopPlaying</ref>();</highlight></codeline>
<codeline lineno="2448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2451"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2452"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2454"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2455"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2456"><highlight class="normal"></highlight></codeline>
<codeline lineno="2457"><highlight class="normal"></highlight></codeline>
<codeline lineno="2460" refid="class_track_panel_1accf5fa5e64ce4ad8c27f583cbec05892" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1accf5fa5e64ce4ad8c27f583cbec05892" kindref="member">TrackPanel::SelectionHandleClick</ref>(wxMouseEvent<sp/>&amp;<sp/>event,</highlight></codeline>
<codeline lineno="2461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>pTrack,<sp/>wxRect<sp/>rect)</highlight></codeline>
<codeline lineno="2462"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2463"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*rightTrack<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="2464"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/>pTrack;</highlight></codeline>
<codeline lineno="2465"><highlight class="normal"><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>;</highlight></codeline>
<codeline lineno="2466"><highlight class="normal"><sp/><sp/><sp/>rect.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>;</highlight></codeline>
<codeline lineno="2467"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="2468"><highlight class="normal"></highlight></codeline>
<codeline lineno="2469"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>=<ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf90290bb93700a5564c87b3c6d056fd6" kindref="member">IsSelecting</ref>;</highlight></codeline>
<codeline lineno="2470"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5ad524f4ba9c00b92b9eebc81d016efe" kindref="member">mInitialSelection</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>;</highlight></codeline>
<codeline lineno="2471"><highlight class="normal"></highlight></codeline>
<codeline lineno="2472"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Save<sp/>initial<sp/>state<sp/>of<sp/>track<sp/>selections,<sp/>also,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2473"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>the<sp/>shift<sp/>button<sp/>is<sp/>down<sp/>and<sp/>no<sp/>track<sp/>is<sp/>selected<sp/>yet,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2474"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>at<sp/>least<sp/>select<sp/>the<sp/>track<sp/>we<sp/>clicked<sp/>into.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2475"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isAtLeastOneTrackSelected<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2476"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2040148c3f847c66400e829f65eb9397" kindref="member">mInitialTrackSelection</ref>-&gt;clear();</highlight></codeline>
<codeline lineno="2477"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>nextTrackIsLinkFromPTrack<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="2480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="2481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isSelected<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetSelected();</highlight></codeline>
<codeline lineno="2482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2040148c3f847c66400e829f65eb9397" kindref="member">mInitialTrackSelection</ref>-&gt;push_back(isSelected);</highlight></codeline>
<codeline lineno="2483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isSelected)<sp/>{</highlight></codeline>
<codeline lineno="2484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isAtLeastOneTrackSelected<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!isAtLeastOneTrackSelected)<sp/>{</highlight></codeline>
<codeline lineno="2487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>==<sp/>pTrack<sp/>&amp;&amp;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLinked())<sp/>{</highlight></codeline>
<codeline lineno="2488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nextTrackIsLinkFromPTrack<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nextTrackIsLinkFromPTrack)<sp/>{</highlight></codeline>
<codeline lineno="2491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rightTrack<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="2492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nextTrackIsLinkFromPTrack<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2496"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2497"><highlight class="normal"></highlight></codeline>
<codeline lineno="2498"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>create<sp/>a<sp/>NEW<sp/>snap<sp/>manager<sp/>in<sp/>case<sp/>any<sp/>snap-points<sp/>have<sp/>changed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2499"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>)</highlight></codeline>
<codeline lineno="2500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>;</highlight></codeline>
<codeline lineno="2501"><highlight class="normal"></highlight></codeline>
<codeline lineno="2502"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_snap_manager" kindref="compound">SnapManager</ref>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>);</highlight></codeline>
<codeline lineno="2503"><highlight class="normal"></highlight></codeline>
<codeline lineno="2504"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2505"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2506"><highlight class="normal"></highlight></codeline>
<codeline lineno="2507"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2508"><highlight class="normal"><sp/><sp/><sp/>mStretching<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2509"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>stretch<sp/>=<sp/>HitTestStretch(pTrack,<sp/>rect,<sp/>event);</highlight></codeline>
<codeline lineno="2510"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2511"><highlight class="normal"></highlight></codeline>
<codeline lineno="2512"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ShiftDown()</highlight></codeline>
<codeline lineno="2513"><highlight class="normal"></highlight></codeline>
<codeline lineno="2514"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!stretch</highlight></codeline>
<codeline lineno="2516"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2517"><highlight class="normal"><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="2518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!isAtLeastOneTrackSelected)<sp/>{</highlight></codeline>
<codeline lineno="2519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_track_1a194ddc15cc66ade28b85d2417dc1694a" kindref="member">SetSelected</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rightTrack)</highlight></codeline>
<codeline lineno="2521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rightTrack-&gt;<ref refid="class_track_1a194ddc15cc66ade28b85d2417dc1694a" kindref="member">SetSelected</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>())</highlight></codeline>
<codeline lineno="2523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()-&gt;<ref refid="class_track_1a194ddc15cc66ade28b85d2417dc1694a" kindref="member">SetSelected</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2525"><highlight class="normal"></highlight></codeline>
<codeline lineno="2526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="2527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Shift-click,<sp/>choose<sp/>closest<sp/>boundary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faef" kindref="member">SelectionBoundary</ref><sp/>boundary<sp/>=</highlight></codeline>
<codeline lineno="2529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a38c1a22080626e8b1af8cce7fcf10dae" kindref="member">ChooseBoundary</ref>(event,<sp/>pTrack,<sp/>rect,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;value);</highlight></codeline>
<codeline lineno="2530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(boundary)<sp/>{</highlight></codeline>
<codeline lineno="2531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa0e2983ab8187d8aaa75f76e50622ac9e" kindref="member">SBLeft</ref>:</highlight></codeline>
<codeline lineno="2532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaf9ac100db15716ed99fea50cfed80455" kindref="member">SBRight</ref>:</highlight></codeline>
<codeline lineno="2533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2534"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>drag<sp/>starts,<sp/>change<sp/>time<sp/>selection<sp/>only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(also<sp/>exit<sp/>frequency<sp/>snapping)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa57e7db3a8296b8f4b70661b69d76ef26" kindref="member">FREQ_SEL_INVALID</ref>;</highlight></codeline>
<codeline lineno="2538"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="2541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5cf09e7e916859a38c285041fbfcc8e8" kindref="member">ExtendSelection</ref>(event.m_x,<sp/>rect.x,<sp/>pTrack);</highlight></codeline>
<codeline lineno="2542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2544"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaad9f7cd5fd67e9ebeba91878771585ea" kindref="member">SBBottom</ref>:</highlight></codeline>
<codeline lineno="2546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa2569d529dc75d78f48336c3434a68f1b" kindref="member">SBTop</ref>:</highlight></codeline>
<codeline lineno="2547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keyword">const<sp/></highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="2549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="2550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=</highlight></codeline>
<codeline lineno="2551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(boundary<sp/>==<sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaad9f7cd5fd67e9ebeba91878771585ea" kindref="member">SBBottom</ref>)</highlight></codeline>
<codeline lineno="2552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaeb6a73fe18e359fd7186206c691262db" kindref="member">FREQ_SEL_BOTTOM_FREE</ref><sp/>:<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa98fb66233144b6eb5b66bae9c1a0decd" kindref="member">FREQ_SEL_TOP_FREE</ref>;</highlight></codeline>
<codeline lineno="2553"><highlight class="normal"></highlight></codeline>
<codeline lineno="2554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Drag<sp/>frequency<sp/>only,<sp/>not<sp/>time:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e1f62ee006d97df0013c871df0bbb4c" kindref="member">ExtendFreqSelection</ref>(event.m_y,<sp/>rect.y,<sp/>rect.height);</highlight></codeline>
<codeline lineno="2557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa90557190a1b0cdc2478aef8e1bc37aaa" kindref="member">SBCenter</ref>:</highlight></codeline>
<codeline lineno="2560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a499cc4987c0eef5d2ba8c7888581c5c9" kindref="member">HandleCenterFrequencyClick</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>pTrack,<sp/>value);</highlight></codeline>
<codeline lineno="2561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2562"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="2566"><highlight class="normal"></highlight></codeline>
<codeline lineno="2567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a6999c7cb8ccf65bb81c6fe93c8c9ac03" kindref="member">UpdateSelectionDisplay</ref>();</highlight></codeline>
<codeline lineno="2568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>persistence<sp/>of<sp/>the<sp/>selection<sp/>change:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2571"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2572"><highlight class="normal"></highlight></codeline>
<codeline lineno="2573"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(event.CmdDown()</highlight></codeline>
<codeline lineno="2574"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!stretch</highlight></codeline>
<codeline lineno="2576"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2577"><highlight class="normal"><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="2578"><highlight class="normal"></highlight></codeline>
<codeline lineno="2579"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="2581"><highlight class="normal">#ifdef<sp/><ref refid="_experimental_8h_1a305dce02d84a96501c789fc53839daf6" kindref="member">EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</ref></highlight></codeline>
<codeline lineno="2582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event.LeftDClick()<sp/>||</highlight></codeline>
<codeline lineno="2583"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.LeftDown())<sp/>{</highlight></codeline>
<codeline lineno="2585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab8a413612048411de7c8f9624141afd9" kindref="member">MarkScrubStart</ref>(</highlight></codeline>
<codeline lineno="2586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event.m_x</highlight></codeline>
<codeline lineno="2587"><highlight class="normal">#ifdef<sp/><ref refid="_experimental_8h_1a305dce02d84a96501c789fc53839daf6" kindref="member">EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</ref></highlight></codeline>
<codeline lineno="2588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>,<sp/>event.LeftDClick()</highlight></codeline>
<codeline lineno="2589"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="2591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2593"><highlight class="normal"></highlight></codeline>
<codeline lineno="2594"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2595"><highlight class="normal"></highlight></codeline>
<codeline lineno="2596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>StartOrJumpPlayback(event);</highlight></codeline>
<codeline lineno="2597"><highlight class="normal"></highlight></codeline>
<codeline lineno="2598"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2599"><highlight class="normal"></highlight></codeline>
<codeline lineno="2600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>starting<sp/>a<sp/>drag</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>);</highlight></codeline>
<codeline lineno="2602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2603"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2604"><highlight class="normal"></highlight></codeline>
<codeline lineno="2605"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Make<sp/>sure<sp/>you<sp/>are<sp/>within<sp/>the<sp/>selected<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2606"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>startNewSelection<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2607"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;<sp/>pTrack-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>())<sp/>{</highlight></codeline>
<codeline lineno="2608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Adjusting<sp/>selection<sp/>edges<sp/>can<sp/>be<sp/>turned<sp/>off<sp/>in<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>preferences<sp/>now</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aaf3e6420d428eefbd10dc13f558fba06" kindref="member">mAdjustSelectionEdges</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2611"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa993fb1a686f5aa32359fcebbc97dfc65" kindref="member">FREQ_SEL_SNAPPING_CENTER</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isSpectralSelectionTrack(pTrack))<sp/>{</highlight></codeline>
<codeline lineno="2614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Ignore<sp/>whether<sp/>we<sp/>are<sp/>inside<sp/>the<sp/>time<sp/>selection.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Exit<sp/>center-snapping,<sp/>start<sp/>dragging<sp/>the<sp/>width.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa8fc9214ed21df78d59aa648fc8100a69" kindref="member">FREQ_SEL_PINNED_CENTER</ref>;</highlight></codeline>
<codeline lineno="2617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="2618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1abf0dba56cc4ec584bacceaa98926cf36" kindref="member">fc</ref>();</highlight></codeline>
<codeline lineno="2619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>not<sp/>adjust<sp/>time<sp/>boundaries</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e1f62ee006d97df0013c871df0bbb4c" kindref="member">ExtendFreqSelection</ref>(event.m_y,<sp/>rect.y,<sp/>rect.height);</highlight></codeline>
<codeline lineno="2622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a6999c7cb8ccf65bb81c6fe93c8c9ac03" kindref="member">UpdateSelectionDisplay</ref>();</highlight></codeline>
<codeline lineno="2623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Frequency<sp/>selection<sp/>persists<sp/>too,<sp/>so<sp/>do<sp/>this:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2625"><highlight class="normal"></highlight></codeline>
<codeline lineno="2626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2629"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>shift-down,<sp/>choose<sp/>boundary<sp/>only<sp/>within<sp/>snapping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="2633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faef" kindref="member">SelectionBoundary</ref><sp/>boundary<sp/>=</highlight></codeline>
<codeline lineno="2634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a38c1a22080626e8b1af8cce7fcf10dae" kindref="member">ChooseBoundary</ref>(event,<sp/>pTrack,<sp/>rect,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>&amp;value);</highlight></codeline>
<codeline lineno="2635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(boundary)<sp/>{</highlight></codeline>
<codeline lineno="2636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa43f1ff076139ea939168d6a19f5894de" kindref="member">SBNone</ref>:</highlight></codeline>
<codeline lineno="2637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>startNewSelection<sp/>remains<sp/>true</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa0e2983ab8187d8aaa75f76e50622ac9e" kindref="member">SBLeft</ref>:</highlight></codeline>
<codeline lineno="2640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaf9ac100db15716ed99fea50cfed80455" kindref="member">SBRight</ref>:</highlight></codeline>
<codeline lineno="2641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>startNewSelection<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2642"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Disable<sp/>frequency<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa57e7db3a8296b8f4b70661b69d76ef26" kindref="member">FREQ_SEL_INVALID</ref>;</highlight></codeline>
<codeline lineno="2645"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="2648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2649"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaad9f7cd5fd67e9ebeba91878771585ea" kindref="member">SBBottom</ref>:</highlight></codeline>
<codeline lineno="2651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa2569d529dc75d78f48336c3434a68f1b" kindref="member">SBTop</ref>:</highlight></codeline>
<codeline lineno="2652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefab720d85f3623565f8867e123b68086b8" kindref="member">SBWidth</ref>:</highlight></codeline>
<codeline lineno="2653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>startNewSelection<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Disable<sp/>time<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keyword">const<sp/></highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="2657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a4a30a13b813682e68c5b689b45c65971" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="2658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=</highlight></codeline>
<codeline lineno="2659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(boundary<sp/>==<sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefab720d85f3623565f8867e123b68086b8" kindref="member">SBWidth</ref>)<sp/>?<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa8fc9214ed21df78d59aa648fc8100a69" kindref="member">FREQ_SEL_PINNED_CENTER</ref><sp/>:</highlight></codeline>
<codeline lineno="2660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(boundary<sp/>==<sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaad9f7cd5fd67e9ebeba91878771585ea" kindref="member">SBBottom</ref>)<sp/>?<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaeb6a73fe18e359fd7186206c691262db" kindref="member">FREQ_SEL_BOTTOM_FREE</ref><sp/>:</highlight></codeline>
<codeline lineno="2661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa98fb66233144b6eb5b66bae9c1a0decd" kindref="member">FREQ_SEL_TOP_FREE</ref>;</highlight></codeline>
<codeline lineno="2662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa90557190a1b0cdc2478aef8e1bc37aaa" kindref="member">SBCenter</ref>:</highlight></codeline>
<codeline lineno="2664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a499cc4987c0eef5d2ba8c7888581c5c9" kindref="member">HandleCenterFrequencyClick</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>pTrack,<sp/>value);</highlight></codeline>
<codeline lineno="2665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>startNewSelection<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2667"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="comment">//<sp/>mAdjustSelectionEdges</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2673"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2674"><highlight class="normal"></highlight></codeline>
<codeline lineno="2675"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2676"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stretch)<sp/>{</highlight></codeline>
<codeline lineno="2677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*nt<sp/>=<sp/>(<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>pTrack;</highlight></codeline>
<codeline lineno="2678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>find<sp/>nearest<sp/>beat<sp/>to<sp/>sel0,<sp/>sel1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>minPeriod<sp/>=<sp/>0.05;<sp/></highlight><highlight class="comment">//<sp/>minimum<sp/>beat<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>qBeat0,<sp/>qBeat1;</highlight></codeline>
<codeline lineno="2681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>centerBeat<sp/>=<sp/>0.0f;</highlight></codeline>
<codeline lineno="2682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mStretchSel0<sp/>=<sp/>nt-&gt;NearestBeatTime(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>(),<sp/>&amp;qBeat0);</highlight></codeline>
<codeline lineno="2683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mStretchSel1<sp/>=<sp/>nt-&gt;NearestBeatTime(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>(),<sp/>&amp;qBeat1);</highlight></codeline>
<codeline lineno="2684"><highlight class="normal"></highlight></codeline>
<codeline lineno="2685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>there<sp/>is<sp/>not<sp/>(almost)<sp/>a<sp/>beat<sp/>to<sp/>stretch<sp/>that<sp/>is<sp/>slower</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>than<sp/>20<sp/>beats<sp/>per<sp/>second,<sp/>don&apos;t<sp/>stretch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(qBeat0,<sp/>qBeat1,<sp/>0.9)<sp/>||</highlight></codeline>
<codeline lineno="2688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(mStretchSel1<sp/>-<sp/>mStretchSel0)<sp/>/<sp/>(qBeat1<sp/>-<sp/>qBeat0)<sp/>&lt;<sp/>minPeriod)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2689"><highlight class="normal"></highlight></codeline>
<codeline lineno="2690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(startNewSelection)<sp/>{<sp/></highlight><highlight class="comment">//<sp/>mouse<sp/>is<sp/>not<sp/>at<sp/>an<sp/>edge,<sp/>but<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>quantization,<sp/>we<sp/>could<sp/>be<sp/>indicating<sp/>the<sp/>selection<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0.0,<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>rect.x));</highlight></codeline>
<codeline lineno="2694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchStart<sp/>=<sp/>nt-&gt;NearestBeatTime(<ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>,<sp/>&amp;centerBeat);</highlight></codeline>
<codeline lineno="2695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(qBeat0,<sp/>centerBeat,<sp/>0.1))<sp/>{</highlight></codeline>
<codeline lineno="2696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a314b71fdc6da3866223ae7351786c18d" kindref="member">TP_DisplayStatusMessage</ref>(</highlight></codeline>
<codeline lineno="2697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>stretch<sp/>selected<sp/>region.&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="2698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*mStretchLeftCursor);</highlight></codeline>
<codeline lineno="2699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mStretchMode<sp/>=<sp/>stretchLeft;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>();</highlight></codeline>
<codeline lineno="2701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>condition<sp/>that<sp/>implies<sp/>stretchLeft</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>startNewSelection<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(qBeat1,<sp/>centerBeat,<sp/>0.1))<sp/>{</highlight></codeline>
<codeline lineno="2704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a314b71fdc6da3866223ae7351786c18d" kindref="member">TP_DisplayStatusMessage</ref>(</highlight></codeline>
<codeline lineno="2705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Click<sp/>and<sp/>drag<sp/>to<sp/>stretch<sp/>selected<sp/>region.&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="2706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*mStretchRightCursor);</highlight></codeline>
<codeline lineno="2707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mStretchMode<sp/>=<sp/>stretchRight;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>();</highlight></codeline>
<codeline lineno="2709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>condition<sp/>that<sp/>implies<sp/>stretchRight</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>startNewSelection<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2713"><highlight class="normal"></highlight></codeline>
<codeline lineno="2714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(startNewSelection)<sp/>{</highlight></codeline>
<codeline lineno="2715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchMode<sp/>=<sp/>stretchCenter;</highlight></codeline>
<codeline lineno="2716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchLeftBeats<sp/>=<sp/>qBeat1<sp/>-<sp/>centerBeat;</highlight></codeline>
<codeline lineno="2717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchRightBeats<sp/>=<sp/>centerBeat<sp/>-<sp/>qBeat0;</highlight></codeline>
<codeline lineno="2718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>()<sp/>==<sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>note<sp/>that<sp/>at<sp/>this<sp/>point,<sp/>mSelStart<sp/>is<sp/>at<sp/>the<sp/>opposite</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>end<sp/>of<sp/>the<sp/>selection<sp/>from<sp/>the<sp/>cursor.<sp/>If<sp/>the<sp/>cursor<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>over<sp/>sel0,<sp/>then<sp/>mSelStart<sp/>is<sp/>at<sp/>sel1.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchMode<sp/>=<sp/>stretchLeft;</highlight></codeline>
<codeline lineno="2723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchMode<sp/>=<sp/>stretchRight;</highlight></codeline>
<codeline lineno="2725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2726"><highlight class="normal"></highlight></codeline>
<codeline lineno="2727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mStretchMode<sp/>==<sp/>stretchLeft)<sp/>{</highlight></codeline>
<codeline lineno="2728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchLeftBeats<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchRightBeats<sp/>=<sp/>qBeat1<sp/>-<sp/>qBeat0;</highlight></codeline>
<codeline lineno="2730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mStretchMode<sp/>==<sp/>stretchRight)<sp/>{</highlight></codeline>
<codeline lineno="2731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchLeftBeats<sp/>=<sp/>qBeat1<sp/>-<sp/>qBeat0;</highlight></codeline>
<codeline lineno="2732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mStretchRightBeats<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a21a6af7b052d9d6bd39cc1db088e8f5d" kindref="member">setTimes</ref>(mStretchSel0,<sp/>mStretchSel1);</highlight></codeline>
<codeline lineno="2735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mStretching<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mStretched<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2737"><highlight class="normal"></highlight></codeline>
<codeline lineno="2738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>(noun)<sp/>The<sp/>track<sp/>that<sp/>is<sp/>used<sp/>for<sp/>MIDI<sp/>notes<sp/>which<sp/>can<sp/>be</highlight></codeline>
<codeline lineno="2739"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>dragged<sp/>to<sp/>change<sp/>their<sp/>duration.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Stretch<sp/>Note<sp/>Track&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="2741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>In<sp/>the<sp/>history<sp/>list,<sp/>indicates<sp/>a<sp/>MIDI<sp/>note<sp/>has</highlight></codeline>
<codeline lineno="2742"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>been<sp/>dragged<sp/>to<sp/>change<sp/>its<sp/>duration<sp/>(stretch<sp/>it).<sp/>Using<sp/>either<sp/>past</highlight></codeline>
<codeline lineno="2743"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>or<sp/>present<sp/>tense<sp/>is<sp/>fine<sp/>here.<sp/><sp/>If<sp/>unsure,<sp/>go<sp/>for<sp/>whichever<sp/>is</highlight></codeline>
<codeline lineno="2744"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>shorter.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Stretch&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="2746"><highlight class="normal"></highlight></codeline>
<codeline lineno="2747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Full<sp/>refresh<sp/>since<sp/>the<sp/>label<sp/>area<sp/>may<sp/>need<sp/>to<sp/>indicate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>newly<sp/>selected<sp/>tracks.<sp/>(I&apos;m<sp/>really<sp/>not<sp/>sure<sp/>if<sp/>the<sp/>label<sp/>area</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>needs<sp/>to<sp/>be<sp/>refreshed<sp/>or<sp/>how<sp/>to<sp/>just<sp/>refresh<sp/>non-label<sp/>areas.-RBD)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2751"><highlight class="normal"></highlight></codeline>
<codeline lineno="2752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>the<sp/>ruler<sp/>follows<sp/>suit.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0c030045e204ac35bb3066a260831ce3" kindref="member">mRuler</ref>-&gt;<ref refid="class_adorned_ruler_panel_1a898f63c541ddcc3c900096d03921f1b1" kindref="member">DrawSelection</ref>();</highlight></codeline>
<codeline lineno="2754"><highlight class="normal"></highlight></codeline>
<codeline lineno="2755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>As<sp/>well<sp/>as<sp/>the<sp/>SelectionBar.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="2757"><highlight class="normal"></highlight></codeline>
<codeline lineno="2758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2759"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2760"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2761"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(startNewSelection)<sp/>{</highlight></codeline>
<codeline lineno="2762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>we<sp/>didn&apos;t<sp/>move<sp/>a<sp/>selection<sp/>boundary,<sp/>start<sp/>a<sp/>NEW<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a942c08d24411790207fd1e275448516e" kindref="member">SelectNone</ref>();</highlight></codeline>
<codeline lineno="2764"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3b7e87dc5fb6cd9d90ea40bf8e9a0cd5" kindref="member">StartFreqSelection</ref><sp/>(event.m_y,<sp/>rect.y,<sp/>rect.height,<sp/>pTrack);</highlight></codeline>
<codeline lineno="2766"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1393ba16f6bf7ef757de651a5c088a47" kindref="member">StartSelection</ref>(event.m_x,<sp/>rect.x);</highlight></codeline>
<codeline lineno="2768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(pTrack);</highlight></codeline>
<codeline lineno="2769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(pTrack);</highlight></codeline>
<codeline lineno="2770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//On-Demand:<sp/>check<sp/>to<sp/>see<sp/>if<sp/>there<sp/>is<sp/>an<sp/>OD<sp/>thing<sp/>associated<sp/>with<sp/>this<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="class_o_d_manager_1a6647fc26402ceed611a794b7224063a5" kindref="member">ODManager::IsInstanceCreated</ref>())</highlight></codeline>
<codeline lineno="2773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_o_d_manager_1aef1bcdded223f015b22a0d1d439c23ad" kindref="member">ODManager::Instance</ref>()-&gt;<ref refid="class_o_d_manager_1ae41ea7d62f686735fffdda90d55d50fd" kindref="member">DemandTrackUpdate</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)pTrack,<ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>);</highlight></codeline>
<codeline lineno="2774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="2776"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2777"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2778"><highlight class="normal"></highlight></codeline>
<codeline lineno="2779"><highlight class="normal"></highlight></codeline>
<codeline lineno="2781" refid="class_track_panel_1a1393ba16f6bf7ef757de651a5c088a47" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a1393ba16f6bf7ef757de651a5c088a47" kindref="member">TrackPanel::StartSelection</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseXCoordinate,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackLeftEdge)</highlight></codeline>
<codeline lineno="2782"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2783"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2784"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0.0,<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(mouseXCoordinate,<sp/>trackLeftEdge));</highlight></codeline>
<codeline lineno="2785"><highlight class="normal"></highlight></codeline>
<codeline lineno="2786"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>=<sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>;</highlight></codeline>
<codeline lineno="2787"><highlight class="normal"></highlight></codeline>
<codeline lineno="2788"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>snappedPoint,<sp/>snappedTime;</highlight></codeline>
<codeline lineno="2792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>-&gt;<ref refid="class_snap_manager_1af00969f70773cf5d532c670916e85269" kindref="member">Snap</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;s,<sp/>&amp;snappedPoint,<sp/>&amp;snappedTime))<sp/>{</highlight></codeline>
<codeline lineno="2794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(snappedPoint)</highlight></codeline>
<codeline lineno="2795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(s,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="2796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2797"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2798"><highlight class="normal"></highlight></codeline>
<codeline lineno="2799"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a21a6af7b052d9d6bd39cc1db088e8f5d" kindref="member">setTimes</ref>(s,<sp/>s);</highlight></codeline>
<codeline lineno="2800"><highlight class="normal"></highlight></codeline>
<codeline lineno="2801"><highlight class="normal"><sp/><sp/><sp/><ref refid="_note_track_8h_1a911962e9cb2cf27adfe81f5120955285" kindref="member">SonifyBeginModifyState</ref>();</highlight></codeline>
<codeline lineno="2802"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2803"><highlight class="normal"><sp/><sp/><sp/><ref refid="_note_track_8h_1aecf42d926f5f1c3c5216373e6472a9c4" kindref="member">SonifyEndModifyState</ref>();</highlight></codeline>
<codeline lineno="2804"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2805"><highlight class="normal"></highlight></codeline>
<codeline lineno="2807" refid="class_track_panel_1a5cf09e7e916859a38c285041fbfcc8e8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a5cf09e7e916859a38c285041fbfcc8e8" kindref="member">TrackPanel::ExtendSelection</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseXCoordinate,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackLeftEdge,</highlight></codeline>
<codeline lineno="2808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack)</highlight></codeline>
<codeline lineno="2809"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2810"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref>)</highlight></codeline>
<codeline lineno="2811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Must<sp/>be<sp/>dragging<sp/>frequency<sp/>bounds<sp/>only.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2813"><highlight class="normal"></highlight></codeline>
<codeline lineno="2814"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>selend<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0.0,<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(mouseXCoordinate,<sp/>trackLeftEdge));</highlight></codeline>
<codeline lineno="2815"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1aeb6c6687a1c2f164448cdd651d694849" kindref="member">clip_bottom</ref>(selend,<sp/>0.0);</highlight></codeline>
<codeline lineno="2816"><highlight class="normal"></highlight></codeline>
<codeline lineno="2817"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>origSel0,<sp/>origSel1;</highlight></codeline>
<codeline lineno="2818"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>sel0,<sp/>sel1;</highlight></codeline>
<codeline lineno="2819"><highlight class="normal"></highlight></codeline>
<codeline lineno="2820"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="2821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pTrack<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="2822"><highlight class="normal"></highlight></codeline>
<codeline lineno="2823"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>&lt;<sp/>selend)<sp/>{</highlight></codeline>
<codeline lineno="2824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>sel0<sp/>=<sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>;</highlight></codeline>
<codeline lineno="2825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>sel1<sp/>=<sp/>selend;</highlight></codeline>
<codeline lineno="2826"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2827"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>sel1<sp/>=<sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>;</highlight></codeline>
<codeline lineno="2829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>sel0<sp/>=<sp/>selend;</highlight></codeline>
<codeline lineno="2830"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2831"><highlight class="normal"></highlight></codeline>
<codeline lineno="2832"><highlight class="normal"><sp/><sp/><sp/>origSel0<sp/>=<sp/>sel0;</highlight></codeline>
<codeline lineno="2833"><highlight class="normal"><sp/><sp/><sp/>origSel1<sp/>=<sp/>sel1;</highlight></codeline>
<codeline lineno="2834"><highlight class="normal"></highlight></codeline>
<codeline lineno="2835"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>snappedPoint,<sp/>snappedTime;</highlight></codeline>
<codeline lineno="2839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>-&gt;<ref refid="class_snap_manager_1af00969f70773cf5d532c670916e85269" kindref="member">Snap</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/>sel0,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;sel0,<sp/>&amp;snappedPoint,<sp/>&amp;snappedTime))<sp/>{</highlight></codeline>
<codeline lineno="2841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(snappedPoint)</highlight></codeline>
<codeline lineno="2842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(sel0,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="2843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>-&gt;<ref refid="class_snap_manager_1af00969f70773cf5d532c670916e85269" kindref="member">Snap</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/>sel1,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;sel1,<sp/>&amp;snappedPoint,<sp/>&amp;snappedTime))<sp/>{</highlight></codeline>
<codeline lineno="2846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(snappedPoint)</highlight></codeline>
<codeline lineno="2847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(sel1,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="2848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2849"><highlight class="normal"></highlight></codeline>
<codeline lineno="2850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>selection<sp/>endpoints<sp/>are<sp/>too<sp/>close<sp/>together<sp/>to<sp/>snap<sp/>(unless</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>using<sp/>snap-to-time<sp/>--<sp/>then<sp/>we<sp/>always<sp/>accept<sp/>the<sp/>snap<sp/>results)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>-<sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>&lt;<sp/>3<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!snappedTime)<sp/>{</highlight></codeline>
<codeline lineno="2854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sel0<sp/>=<sp/>origSel0;</highlight></codeline>
<codeline lineno="2855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sel1<sp/>=<sp/>origSel1;</highlight></codeline>
<codeline lineno="2856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="2858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2859"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2860"><highlight class="normal"></highlight></codeline>
<codeline lineno="2861"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a21a6af7b052d9d6bd39cc1db088e8f5d" kindref="member">setTimes</ref>(sel0,<sp/>sel1);</highlight></codeline>
<codeline lineno="2862"><highlight class="normal"></highlight></codeline>
<codeline lineno="2863"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//On-Demand:<sp/>check<sp/>to<sp/>see<sp/>if<sp/>there<sp/>is<sp/>an<sp/>OD<sp/>thing<sp/>associated<sp/>with<sp/>this<sp/>track.<sp/><sp/>If<sp/>so<sp/>we<sp/>want<sp/>to<sp/>update<sp/>the<sp/>focal<sp/>point<sp/>for<sp/>the<sp/>task.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2864"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;<sp/>(pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>&amp;&amp;<sp/><ref refid="class_o_d_manager_1a6647fc26402ceed611a794b7224063a5" kindref="member">ODManager::IsInstanceCreated</ref>())</highlight></codeline>
<codeline lineno="2865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_o_d_manager_1aef1bcdded223f015b22a0d1d439c23ad" kindref="member">ODManager::Instance</ref>()-&gt;<ref refid="class_o_d_manager_1ae41ea7d62f686735fffdda90d55d50fd" kindref="member">DemandTrackUpdate</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)pTrack,sel0);<sp/></highlight><highlight class="comment">//sel0<sp/>is<sp/>sometimes<sp/>less<sp/>than<sp/>mSelStart</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2866"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2867"><highlight class="normal"></highlight></codeline>
<codeline lineno="2868" refid="class_track_panel_1a6999c7cb8ccf65bb81c6fe93c8c9ac03" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a6999c7cb8ccf65bb81c6fe93c8c9ac03" kindref="member">TrackPanel::UpdateSelectionDisplay</ref>()</highlight></codeline>
<codeline lineno="2869"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2870"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Full<sp/>refresh<sp/>since<sp/>the<sp/>label<sp/>area<sp/>may<sp/>need<sp/>to<sp/>indicate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2871"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>newly<sp/>selected<sp/>tracks.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2872"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2873"><highlight class="normal"></highlight></codeline>
<codeline lineno="2874"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>the<sp/>ruler<sp/>follows<sp/>suit.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2875"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0c030045e204ac35bb3066a260831ce3" kindref="member">mRuler</ref>-&gt;<ref refid="class_adorned_ruler_panel_1a898f63c541ddcc3c900096d03921f1b1" kindref="member">DrawSelection</ref>();</highlight></codeline>
<codeline lineno="2876"><highlight class="normal"></highlight></codeline>
<codeline lineno="2877"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>As<sp/>well<sp/>as<sp/>the<sp/>SelectionBar.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2878"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="2879"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2880"><highlight class="normal"></highlight></codeline>
<codeline lineno="2881" refid="class_track_panel_1a4ae519c0a1506e9ec7de57e63141fc1c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4ae519c0a1506e9ec7de57e63141fc1c" kindref="member">TrackPanel::UpdateAccessibility</ref>()</highlight></codeline>
<codeline lineno="2882"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2883"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>)</highlight></codeline>
<codeline lineno="2884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>-&gt;<ref refid="class_track_panel_ax_1adb7e2ddf8acf8bddb5401b7ac0f99f1e" kindref="member">Updated</ref>();</highlight></codeline>
<codeline lineno="2885"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2886"><highlight class="normal"></highlight></codeline>
<codeline lineno="2887"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2888"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="2889"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="2890"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>findMaxRatio(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>center,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>)</highlight></codeline>
<codeline lineno="2891"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2892"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>minFrequency<sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="2893"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxFrequency<sp/>=<sp/>(rate<sp/>/<sp/>2.0);</highlight></codeline>
<codeline lineno="2894"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>frequency<sp/>=</highlight></codeline>
<codeline lineno="2895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxFrequency,</highlight></codeline>
<codeline lineno="2896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(minFrequency,<sp/>center));</highlight></codeline>
<codeline lineno="2897"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(frequency<sp/>/<sp/>minFrequency,<sp/>maxFrequency<sp/>/<sp/>frequency);</highlight></codeline>
<codeline lineno="2899"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2900"><highlight class="normal"></highlight></codeline>
<codeline lineno="2901"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2902"><highlight class="normal"></highlight></codeline>
<codeline lineno="2903" refid="class_track_panel_1a22ab2290703b148a0fac924257b5ee2a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a22ab2290703b148a0fac924257b5ee2a" kindref="member">TrackPanel::SnapCenterOnce</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*pTrack,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>up)</highlight></codeline>
<codeline lineno="2904"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2905"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_spectrogram_settings" kindref="compound">SpectrogramSettings</ref><sp/>&amp;settings<sp/>=<sp/>pTrack-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>();</highlight></codeline>
<codeline lineno="2906"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>windowSize<sp/>=<sp/>settings.<ref refid="class_spectrogram_settings_1a35321029bb4e809eedb8721db80c448e" kindref="member">GetFFTLength</ref>();</highlight></codeline>
<codeline lineno="2907"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>pTrack-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="2908"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>nyq<sp/>=<sp/>rate<sp/>/<sp/>2.0;</highlight></codeline>
<codeline lineno="2909"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>binFrequency<sp/>=<sp/>rate<sp/>/<sp/>windowSize;</highlight></codeline>
<codeline lineno="2910"><highlight class="normal"></highlight></codeline>
<codeline lineno="2911"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a821c5a808c950dc3a4db33297c9e088c" kindref="member">f1</ref>();</highlight></codeline>
<codeline lineno="2912"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>centerFrequency<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1abf0dba56cc4ec584bacceaa98926cf36" kindref="member">fc</ref>();</highlight></codeline>
<codeline lineno="2913"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(centerFrequency<sp/>&lt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="2914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>centerFrequency<sp/>=<sp/>up<sp/>?<sp/>binFrequency<sp/>:<sp/>nyq;</highlight></codeline>
<codeline lineno="2915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>f1<sp/>=<sp/>centerFrequency<sp/>*<sp/>sqrt(2.0);</highlight></codeline>
<codeline lineno="2916"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2917"><highlight class="normal"></highlight></codeline>
<codeline lineno="2918"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ratio<sp/>=<sp/>f1<sp/>/<sp/>centerFrequency;</highlight></codeline>
<codeline lineno="2919"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>originalBin<sp/>=<sp/>floor(0.5<sp/>+<sp/>centerFrequency<sp/>/<sp/>binFrequency);</highlight></codeline>
<codeline lineno="2920"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>limitingBin<sp/>=<sp/>up<sp/>?<sp/>floor(0.5<sp/>+<sp/>nyq<sp/>/<sp/>binFrequency)<sp/>:<sp/>1;</highlight></codeline>
<codeline lineno="2921"><highlight class="normal"></highlight></codeline>
<codeline lineno="2922"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>is<sp/>crude<sp/>and<sp/>wasteful,<sp/>doing<sp/>the<sp/>FFT<sp/>each<sp/>time<sp/>the<sp/>command<sp/>is<sp/>called.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2923"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>It<sp/>would<sp/>be<sp/>better<sp/>to<sp/>cache<sp/>the<sp/>data,<sp/>but<sp/>then<sp/>invalidation<sp/>of<sp/>the<sp/>cache<sp/>would</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2924"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>need<sp/>doing<sp/>in<sp/>all<sp/>places<sp/>that<sp/>change<sp/>the<sp/>time<sp/>selection.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2925"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2d3b5f434fa616850942dc3e93d606e7" kindref="member">StartSnappingFreqSelection</ref>(pTrack);</highlight></codeline>
<codeline lineno="2926"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>snappedFrequency<sp/>=<sp/>centerFrequency;</highlight></codeline>
<codeline lineno="2927"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>bin<sp/>=<sp/>originalBin;</highlight></codeline>
<codeline lineno="2928"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(up)<sp/>{</highlight></codeline>
<codeline lineno="2929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(snappedFrequency<sp/>&lt;=<sp/>centerFrequency<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bin<sp/>&lt;<sp/>limitingBin)</highlight></codeline>
<codeline lineno="2931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>snappedFrequency<sp/>=<sp/><ref refid="class_track_panel_1ac8edbb1e21b215c81157c4ba59e6c6d2" kindref="member">mFrequencySnapper</ref>-&gt;FindPeak(++bin<sp/>*<sp/>binFrequency,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="2932"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2933"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(snappedFrequency<sp/>&gt;=<sp/>centerFrequency<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bin<sp/>&gt;<sp/>limitingBin)</highlight></codeline>
<codeline lineno="2936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>snappedFrequency<sp/>=<sp/><ref refid="class_track_panel_1ac8edbb1e21b215c81157c4ba59e6c6d2" kindref="member">mFrequencySnapper</ref>-&gt;FindPeak(--bin<sp/>*<sp/>binFrequency,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="2937"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2938"><highlight class="normal"></highlight></codeline>
<codeline lineno="2939"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref></highlight></codeline>
<codeline lineno="2940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(snappedFrequency<sp/>/<sp/>ratio,<sp/>snappedFrequency<sp/>*<sp/>ratio);</highlight></codeline>
<codeline lineno="2941"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2942"><highlight class="normal"></highlight></codeline>
<codeline lineno="2943" refid="class_track_panel_1a2d3b5f434fa616850942dc3e93d606e7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a2d3b5f434fa616850942dc3e93d606e7" kindref="member">TrackPanel::StartSnappingFreqSelection</ref><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*pTrack)</highlight></codeline>
<codeline lineno="2944"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2945"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/>minLength<sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="2946"><highlight class="normal"></highlight></codeline>
<codeline lineno="2947"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>pTrack-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="2948"><highlight class="normal"></highlight></codeline>
<codeline lineno="2949"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Grab<sp/>samples,<sp/>just<sp/>for<sp/>this<sp/>track,<sp/>at<sp/>these<sp/>times</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2950"><highlight class="normal"><sp/><sp/><sp/>std::vector&lt;float&gt;<sp/>frequencySnappingData;</highlight></codeline>
<codeline lineno="2951"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/><ref refid="seqread_8c_1ac503262ae470564980711da4f78b1181" kindref="member">start</ref><sp/>=</highlight></codeline>
<codeline lineno="2952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_wave_track_1afe621ba06a0396725da44e937143972f" kindref="member">TimeToLongSamples</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>());</highlight></codeline>
<codeline lineno="2953"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref><sp/>=</highlight></codeline>
<codeline lineno="2954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_wave_track_1afe621ba06a0396725da44e937143972f" kindref="member">TimeToLongSamples</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>());</highlight></codeline>
<codeline lineno="2955"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1ac94dc16b22556ba5fa815655f27442da" kindref="member">length</ref><sp/>=</highlight></codeline>
<codeline lineno="2956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(<ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref>(frequencySnappingData.max_size()),</highlight></codeline>
<codeline lineno="2957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(<ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref>(10485760),<sp/></highlight><highlight class="comment">//<sp/>as<sp/>in<sp/>FreqWindow.cpp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end<sp/>-<sp/><ref refid="seqread_8c_1ac503262ae470564980711da4f78b1181" kindref="member">start</ref>));</highlight></codeline>
<codeline lineno="2959"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/>effectiveLength<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(minLength,<sp/>length);</highlight></codeline>
<codeline lineno="2960"><highlight class="normal"><sp/><sp/><sp/>frequencySnappingData.resize(effectiveLength,<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>);</highlight></codeline>
<codeline lineno="2961"><highlight class="normal"><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_wave_track_1a989e55726466fa1d8ec9aa4322f1c950" kindref="member">Get</ref>(</highlight></codeline>
<codeline lineno="2962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>reinterpret_cast&lt;samplePtr&gt;(&amp;frequencySnappingData[0]),</highlight></codeline>
<codeline lineno="2963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>,<sp/>start,<sp/>length);</highlight></codeline>
<codeline lineno="2964"><highlight class="normal"></highlight></codeline>
<codeline lineno="2965"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>same<sp/>settings<sp/>as<sp/>are<sp/>now<sp/>used<sp/>for<sp/>spectrogram<sp/>display,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2966"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>except,<sp/>shrink<sp/>the<sp/>window<sp/>as<sp/>needed<sp/>so<sp/>we<sp/>get<sp/>some<sp/>answers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2967"><highlight class="normal"></highlight></codeline>
<codeline lineno="2968"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_spectrogram_settings" kindref="compound">SpectrogramSettings</ref><sp/>&amp;settings<sp/>=<sp/>pTrack-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>();</highlight></codeline>
<codeline lineno="2969"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>windowSize<sp/>=<sp/>settings.<ref refid="class_spectrogram_settings_1a35321029bb4e809eedb8721db80c448e" kindref="member">GetFFTLength</ref>();</highlight></codeline>
<codeline lineno="2970"><highlight class="normal"></highlight></codeline>
<codeline lineno="2971"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(windowSize<sp/>&gt;<sp/>effectiveLength)</highlight></codeline>
<codeline lineno="2972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>windowSize<sp/>&gt;&gt;=<sp/>1;</highlight></codeline>
<codeline lineno="2973"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespace__sbsms___1a62c9e6ed284aa8472274a48cccd777f1" kindref="member">windowType</ref><sp/>=<sp/>settings.<ref refid="class_spectrogram_settings_1a7fbea69cb9478dd7d894d9399561c736" kindref="member">windowType</ref>;</highlight></codeline>
<codeline lineno="2974"><highlight class="normal"></highlight></codeline>
<codeline lineno="2975"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac8edbb1e21b215c81157c4ba59e6c6d2" kindref="member">mFrequencySnapper</ref>-&gt;Calculate(</highlight></codeline>
<codeline lineno="2976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_spectrum_analyst_1a316d97b25a7683913eec8e08d5645105a51772a1aa7ef73eecabd7338ca46892d" kindref="member">SpectrumAnalyst::Spectrum</ref>,<sp/>windowType,<sp/>windowSize,<sp/>rate,</highlight></codeline>
<codeline lineno="2977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&amp;frequencySnappingData[0],<sp/>length);</highlight></codeline>
<codeline lineno="2978"><highlight class="normal"></highlight></codeline>
<codeline lineno="2979"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>can<sp/>now<sp/>throw<sp/>away<sp/>the<sp/>sample<sp/>data<sp/>but<sp/>we<sp/>keep<sp/>the<sp/>spectrum.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2980"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2981"><highlight class="normal"></highlight></codeline>
<codeline lineno="2982" refid="class_track_panel_1a49be30774780343754f3de5719cfd1dc" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a49be30774780343754f3de5719cfd1dc" kindref="member">TrackPanel::MoveSnappingFreqSelection</ref><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseYCoordinate,</highlight></codeline>
<codeline lineno="2983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackTopEdge,</highlight></codeline>
<codeline lineno="2984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackHeight,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack)</highlight></codeline>
<codeline lineno="2985"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2986"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isSpectralSelectionTrack(pTrack))<sp/>{</highlight></codeline>
<codeline lineno="2989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="2990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PRL:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>What<sp/>happens<sp/>if<sp/>center<sp/>snapping<sp/>selection<sp/>began<sp/>in<sp/>one<sp/>spectrogram<sp/>track,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>then<sp/>continues<sp/>inside<sp/>another?<sp/><sp/>We<sp/>do<sp/>not<sp/>then<sp/>recalculate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>spectrum<sp/>(as<sp/>was<sp/>done<sp/>in<sp/>StartSnappingFreqSelection)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>but<sp/>snap<sp/>according<sp/>to<sp/>the<sp/>peaks<sp/>in<sp/>the<sp/>old<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>I<sp/>am<sp/>not<sp/>worrying<sp/>about<sp/>that<sp/>odd<sp/>case.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="2997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>frequency<sp/>=</highlight></codeline>
<codeline lineno="2998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a93091b8efeeefbc10953a52175becc7e" kindref="member">PositionToFrequency</ref>(wt,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>mouseYCoordinate,</highlight></codeline>
<codeline lineno="2999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackTopEdge,<sp/>trackHeight);</highlight></codeline>
<codeline lineno="3000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>snappedFrequency<sp/>=</highlight></codeline>
<codeline lineno="3001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac8edbb1e21b215c81157c4ba59e6c6d2" kindref="member">mFrequencySnapper</ref>-&gt;FindPeak(frequency,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="3002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxRatio<sp/>=<sp/>findMaxRatio(snappedFrequency,<sp/>rate);</highlight></codeline>
<codeline lineno="3003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ratio<sp/>=<sp/>2.0;<sp/></highlight><highlight class="comment">//<sp/>An<sp/>arbitrary<sp/>octave<sp/>on<sp/>each<sp/>side,<sp/>at<sp/>most</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a04b91be00d5df7ef6fd08161dd6f1ec4" kindref="member">f0</ref>();</highlight></codeline>
<codeline lineno="3006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a821c5a808c950dc3a4db33297c9e088c" kindref="member">f1</ref>();</highlight></codeline>
<codeline lineno="3007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(f1<sp/>&gt;=<sp/>f0<sp/>&amp;&amp;<sp/>f0<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="3008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preserve<sp/>already<sp/>chosen<sp/>ratio<sp/>instead</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ratio<sp/>=<sp/>sqrt(f1<sp/>/<sp/>f0);</highlight></codeline>
<codeline lineno="3010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ratio<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(ratio,<sp/>maxRatio);</highlight></codeline>
<codeline lineno="3012"><highlight class="normal"></highlight></codeline>
<codeline lineno="3013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>snappedFrequency;</highlight></codeline>
<codeline lineno="3014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref>(</highlight></codeline>
<codeline lineno="3015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>snappedFrequency<sp/>/<sp/>ratio,<sp/>snappedFrequency<sp/>*<sp/>ratio);</highlight></codeline>
<codeline lineno="3016"><highlight class="normal"></highlight></codeline>
<codeline lineno="3017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>=<sp/>wt;</highlight></codeline>
<codeline lineno="3018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SelectNone();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mTracks-&gt;Select(pTrack);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(pTrack);</highlight></codeline>
<codeline lineno="3021"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3022"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3023"><highlight class="normal"></highlight></codeline>
<codeline lineno="3024" refid="class_track_panel_1a3b7e87dc5fb6cd9d90ea40bf8e9a0cd5" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a3b7e87dc5fb6cd9d90ea40bf8e9a0cd5" kindref="member">TrackPanel::StartFreqSelection</ref><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseYCoordinate,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackTopEdge,</highlight></codeline>
<codeline lineno="3025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackHeight,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack)</highlight></codeline>
<codeline lineno="3026"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3027"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3028"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa57e7db3a8296b8f4b70661b69d76ef26" kindref="member">FREQ_SEL_INVALID</ref>;</highlight></codeline>
<codeline lineno="3029"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>;</highlight></codeline>
<codeline lineno="3030"><highlight class="normal"></highlight></codeline>
<codeline lineno="3031"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isSpectralSelectionTrack(pTrack))<sp/>{</highlight></codeline>
<codeline lineno="3032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="3033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>=<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaf796a01bdaf14dc7af8d83149a5ed589" kindref="member">FREQ_SEL_FREE</ref>;</highlight></codeline>
<codeline lineno="3034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=</highlight></codeline>
<codeline lineno="3035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a93091b8efeeefbc10953a52175becc7e" kindref="member">PositionToFrequency</ref>(<ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>mouseYCoordinate,</highlight></codeline>
<codeline lineno="3036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackTopEdge,<sp/>trackHeight);</highlight></codeline>
<codeline lineno="3037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref>(<ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref>,<sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref>);</highlight></codeline>
<codeline lineno="3038"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3039"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3040"><highlight class="normal"></highlight></codeline>
<codeline lineno="3041" refid="class_track_panel_1a8e1f62ee006d97df0013c871df0bbb4c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8e1f62ee006d97df0013c871df0bbb4c" kindref="member">TrackPanel::ExtendFreqSelection</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseYCoordinate,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackTopEdge,</highlight></codeline>
<codeline lineno="3042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackHeight)</highlight></codeline>
<codeline lineno="3043"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3044"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>dragWidth<sp/>is<sp/>true,<sp/>and<sp/>not<sp/>dragging<sp/>the<sp/>center,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3045"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>adjust<sp/>both<sp/>top<sp/>and<sp/>bottom<sp/>about<sp/>geometric<sp/>mean.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3046"><highlight class="normal"></highlight></codeline>
<codeline lineno="3047"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa57e7db3a8296b8f4b70661b69d76ef26" kindref="member">FREQ_SEL_INVALID</ref><sp/>||</highlight></codeline>
<codeline lineno="3048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa993fb1a686f5aa32359fcebbc97dfc65" kindref="member">FREQ_SEL_SNAPPING_CENTER</ref>)</highlight></codeline>
<codeline lineno="3049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3050"><highlight class="normal"></highlight></codeline>
<codeline lineno="3051"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Extension<sp/>happens<sp/>only<sp/>when<sp/>dragging<sp/>in<sp/>the<sp/>same<sp/>track<sp/>in<sp/>which<sp/>we</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3052"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>started,<sp/>and<sp/>that<sp/>is<sp/>of<sp/>a<sp/>spectrogram<sp/>display<sp/>type.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3053"><highlight class="normal"></highlight></codeline>
<codeline lineno="3054"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*<sp/>wt<sp/>=<sp/><ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref>;</highlight></codeline>
<codeline lineno="3055"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="3056"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>frequency<sp/>=</highlight></codeline>
<codeline lineno="3057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a93091b8efeeefbc10953a52175becc7e" kindref="member">PositionToFrequency</ref>(wt,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>mouseYCoordinate,</highlight></codeline>
<codeline lineno="3058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackTopEdge,<sp/>trackHeight);</highlight></codeline>
<codeline lineno="3059"><highlight class="normal"></highlight></codeline>
<codeline lineno="3060"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Dragging<sp/>center?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3061"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaf98d9f2a60fab6713bcc796dfe41fff8" kindref="member">FREQ_SEL_DRAG_CENTER</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frequency<sp/>==<sp/>rate<sp/>||<sp/>frequency<sp/>&lt;<sp/>1.0)</highlight></codeline>
<codeline lineno="3063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>snapped<sp/>to<sp/>top<sp/>or<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref>(</highlight></codeline>
<codeline lineno="3065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>,</highlight></codeline>
<codeline lineno="3066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>);</highlight></codeline>
<codeline lineno="3067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mFreqSelPin<sp/>holds<sp/>the<sp/>ratio<sp/>of<sp/>top<sp/>to<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxRatio<sp/>=<sp/>findMaxRatio(frequency,<sp/>rate);</highlight></codeline>
<codeline lineno="3070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ratio<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxRatio,<sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref>);</highlight></codeline>
<codeline lineno="3071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref>(</highlight></codeline>
<codeline lineno="3072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frequency<sp/>/<sp/>ratio,<sp/>frequency<sp/>*<sp/>ratio);</highlight></codeline>
<codeline lineno="3073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3074"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3075"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa8fc9214ed21df78d59aa648fc8100a69" kindref="member">FREQ_SEL_PINNED_CENTER</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="3077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Change<sp/>both<sp/>upper<sp/>and<sp/>lower<sp/>edges<sp/>leaving<sp/>centre<sp/>where<sp/>it<sp/>is.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frequency<sp/>==<sp/>rate<sp/>||<sp/>frequency<sp/>&lt;<sp/>1.0)</highlight></codeline>
<codeline lineno="3079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>snapped<sp/>to<sp/>top<sp/>or<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref>(</highlight></codeline>
<codeline lineno="3081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>,</highlight></codeline>
<codeline lineno="3082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>);</highlight></codeline>
<codeline lineno="3083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given<sp/>center<sp/>and<sp/>mouse<sp/>position,<sp/>find<sp/>ratio<sp/>of<sp/>the<sp/>larger<sp/>to<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>smaller,<sp/>limit<sp/>that<sp/>to<sp/>the<sp/>frequency<sp/>scale<sp/>bounds,<sp/>and<sp/>adjust</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>top<sp/>and<sp/>bottom<sp/>accordingly.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxRatio<sp/>=<sp/>findMaxRatio(<ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref>,<sp/>rate);</highlight></codeline>
<codeline lineno="3088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ratio<sp/>=<sp/>frequency<sp/>/<sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref>;</highlight></codeline>
<codeline lineno="3089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;<sp/>1.0)</highlight></codeline>
<codeline lineno="3090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ratio<sp/>=<sp/>1.0<sp/>/<sp/>ratio;</highlight></codeline>
<codeline lineno="3091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ratio<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxRatio,<sp/>ratio);</highlight></codeline>
<codeline lineno="3092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref>(</highlight></codeline>
<codeline lineno="3093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>/<sp/>ratio,<sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>*<sp/>ratio);</highlight></codeline>
<codeline lineno="3094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3096"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3097"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Dragging<sp/>of<sp/>upper<sp/>or<sp/>lower.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bottomDefined<sp/>=</highlight></codeline>
<codeline lineno="3100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa98fb66233144b6eb5b66bae9c1a0decd" kindref="member">FREQ_SEL_TOP_FREE</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>&lt;<sp/>0);</highlight></codeline>
<codeline lineno="3101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>topDefined<sp/>=</highlight></codeline>
<codeline lineno="3102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaeb6a73fe18e359fd7186206c691262db" kindref="member">FREQ_SEL_BOTTOM_FREE</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>&lt;<sp/>0);</highlight></codeline>
<codeline lineno="3103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!bottomDefined<sp/>||<sp/>(topDefined<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>&lt;<sp/>frequency))<sp/>{</highlight></codeline>
<codeline lineno="3104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Adjust<sp/>top</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frequency<sp/>==<sp/>rate)</highlight></codeline>
<codeline lineno="3106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>snapped<sp/>high;<sp/>upper<sp/>frequency<sp/>is<sp/>undefined</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a6dad3e6b4004146604dba1204a04a174" kindref="member">setF1</ref>(<ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>);</highlight></codeline>
<codeline lineno="3108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a6dad3e6b4004146604dba1204a04a174" kindref="member">setF1</ref>(<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(1.0,<sp/>frequency));</highlight></codeline>
<codeline lineno="3110"><highlight class="normal"></highlight></codeline>
<codeline lineno="3111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a4e54cca21c8d9eb3b204c73014938687" kindref="member">setF0</ref>(<ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref>);</highlight></codeline>
<codeline lineno="3112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Adjust<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frequency<sp/>&lt;<sp/>1.0)</highlight></codeline>
<codeline lineno="3116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>snapped<sp/>low;<sp/>lower<sp/>frequency<sp/>is<sp/>undefined</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a4e54cca21c8d9eb3b204c73014938687" kindref="member">setF0</ref>(<ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>);</highlight></codeline>
<codeline lineno="3118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a4e54cca21c8d9eb3b204c73014938687" kindref="member">setF0</ref>(<ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(rate<sp/>/<sp/>2.0,<sp/>frequency));</highlight></codeline>
<codeline lineno="3120"><highlight class="normal"></highlight></codeline>
<codeline lineno="3121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a6dad3e6b4004146604dba1204a04a174" kindref="member">setF1</ref>(<ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref>);</highlight></codeline>
<codeline lineno="3122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3123"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3124"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3125"><highlight class="normal"></highlight></codeline>
<codeline lineno="3126" refid="class_track_panel_1a4f68a782df06c159370e9e77d0468f0a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4f68a782df06c159370e9e77d0468f0a" kindref="member">TrackPanel::ToggleSpectralSelection</ref>()</highlight></codeline>
<codeline lineno="3127"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3128"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_selected_region" kindref="compound">SelectedRegion</ref><sp/>&amp;region<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>;</highlight></codeline>
<codeline lineno="3129"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f0<sp/>=<sp/>region.<ref refid="class_selected_region_1a04b91be00d5df7ef6fd08161dd6f1ec4" kindref="member">f0</ref>();</highlight></codeline>
<codeline lineno="3130"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f1<sp/>=<sp/>region.<ref refid="class_selected_region_1a821c5a808c950dc3a4db33297c9e088c" kindref="member">f1</ref>();</highlight></codeline>
<codeline lineno="3131"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>haveSpectralSelection<sp/>=</highlight></codeline>
<codeline lineno="3132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>!(f0<sp/>==<sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f1<sp/>==<sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>);</highlight></codeline>
<codeline lineno="3134"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(haveSpectralSelection)</highlight></codeline>
<codeline lineno="3135"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aeb356a00eec72d012430064d6bc7d1b4" kindref="member">mLastF0</ref><sp/>=<sp/>f0;</highlight></codeline>
<codeline lineno="3137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a40bb7daf14dcfad80db2488157da31f0" kindref="member">mLastF1</ref><sp/>=<sp/>f1;</highlight></codeline>
<codeline lineno="3138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>region.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref></highlight></codeline>
<codeline lineno="3139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>,<sp/><ref refid="class_selected_region_1aeb44ed227fd0a3396dc40f57efe3d432" kindref="member">SelectedRegion::UndefinedFrequency</ref>);</highlight></codeline>
<codeline lineno="3140"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3141"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>region.<ref refid="class_selected_region_1ac7c4ed5aeefaf152086aff362e367781" kindref="member">setFrequencies</ref>(<ref refid="class_track_panel_1aeb356a00eec72d012430064d6bc7d1b4" kindref="member">mLastF0</ref>,<sp/><ref refid="class_track_panel_1a40bb7daf14dcfad80db2488157da31f0" kindref="member">mLastF1</ref>);</highlight></codeline>
<codeline lineno="3143"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3144"><highlight class="normal"></highlight></codeline>
<codeline lineno="3145" refid="class_track_panel_1a10db23a23dec17d9c79ab80a5b68f6ed" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a10db23a23dec17d9c79ab80a5b68f6ed" kindref="member">TrackPanel::ResetFreqSelectionPin</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>hintFrequency,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>logF)</highlight></codeline>
<codeline lineno="3146"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3147"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3148"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa57e7db3a8296b8f4b70661b69d76ef26" kindref="member">FREQ_SEL_INVALID</ref>:</highlight></codeline>
<codeline lineno="3149"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa993fb1a686f5aa32359fcebbc97dfc65" kindref="member">FREQ_SEL_SNAPPING_CENTER</ref>:</highlight></codeline>
<codeline lineno="3150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="3151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3152"><highlight class="normal"></highlight></codeline>
<codeline lineno="3153"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa8fc9214ed21df78d59aa648fc8100a69" kindref="member">FREQ_SEL_PINNED_CENTER</ref>:</highlight></codeline>
<codeline lineno="3154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1abf0dba56cc4ec584bacceaa98926cf36" kindref="member">fc</ref>();</highlight></codeline>
<codeline lineno="3155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3156"><highlight class="normal"></highlight></codeline>
<codeline lineno="3157"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaf98d9f2a60fab6713bcc796dfe41fff8" kindref="member">FREQ_SEL_DRAG_CENTER</ref>:</highlight></codeline>
<codeline lineno="3158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Re-pin<sp/>the<sp/>width</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a04b91be00d5df7ef6fd08161dd6f1ec4" kindref="member">f0</ref>();</highlight></codeline>
<codeline lineno="3161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a821c5a808c950dc3a4db33297c9e088c" kindref="member">f1</ref>();</highlight></codeline>
<codeline lineno="3162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(f0<sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/>f1<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="3163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>sqrt(f1<sp/>/<sp/>f0);</highlight></codeline>
<codeline lineno="3164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="3166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3168"><highlight class="normal"></highlight></codeline>
<codeline lineno="3169"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaf796a01bdaf14dc7af8d83149a5ed589" kindref="member">FREQ_SEL_FREE</ref>:</highlight></codeline>
<codeline lineno="3170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Pin<sp/>which?<sp/><sp/>Farther<sp/>from<sp/>the<sp/>hint<sp/>which<sp/>is<sp/>the<sp/>presumed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mouse<sp/>position.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a04b91be00d5df7ef6fd08161dd6f1ec4" kindref="member">f0</ref>();</highlight></codeline>
<codeline lineno="3174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a821c5a808c950dc3a4db33297c9e088c" kindref="member">f1</ref>();</highlight></codeline>
<codeline lineno="3175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(logF)<sp/>{</highlight></codeline>
<codeline lineno="3176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(f1<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="3177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>f0;</highlight></codeline>
<codeline lineno="3178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>logf1<sp/>=<sp/>log(<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(1.0,<sp/>f1));</highlight></codeline>
<codeline lineno="3180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>logf0<sp/>=<sp/>log(<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(1.0,<sp/>f0));</highlight></codeline>
<codeline lineno="3181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>logHint<sp/>=<sp/>log(<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(1.0,<sp/>hintFrequency));</highlight></codeline>
<codeline lineno="3182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(std::abs<sp/>(logHint<sp/>-<sp/>logf1)<sp/>&lt;<sp/>std::abs<sp/>(logHint<sp/>-<sp/>logf0))</highlight></codeline>
<codeline lineno="3183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>f0;</highlight></codeline>
<codeline lineno="3184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>f1;</highlight></codeline>
<codeline lineno="3186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(f1<sp/>&lt;<sp/>0<sp/>||</highlight></codeline>
<codeline lineno="3190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::abs<sp/>(hintFrequency<sp/>-<sp/>f1)<sp/>&lt;<sp/>std::abs<sp/>(hintFrequency<sp/>-<sp/>f0))</highlight></codeline>
<codeline lineno="3191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>f0;</highlight></codeline>
<codeline lineno="3192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/>f1;</highlight></codeline>
<codeline lineno="3194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3197"><highlight class="normal"></highlight></codeline>
<codeline lineno="3198"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa98fb66233144b6eb5b66bae9c1a0decd" kindref="member">FREQ_SEL_TOP_FREE</ref>:</highlight></codeline>
<codeline lineno="3199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a04b91be00d5df7ef6fd08161dd6f1ec4" kindref="member">f0</ref>();</highlight></codeline>
<codeline lineno="3200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3201"><highlight class="normal"></highlight></codeline>
<codeline lineno="3202"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfaeb6a73fe18e359fd7186206c691262db" kindref="member">FREQ_SEL_BOTTOM_FREE</ref>:</highlight></codeline>
<codeline lineno="3203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4c34df1995d225287fa9140e4cb42ef4" kindref="member">mFreqSelPin</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a821c5a808c950dc3a4db33297c9e088c" kindref="member">f1</ref>();</highlight></codeline>
<codeline lineno="3204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3205"><highlight class="normal"></highlight></codeline>
<codeline lineno="3206"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="3207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3208"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3209"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3210"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3211"><highlight class="normal"></highlight></codeline>
<codeline lineno="3212"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3213"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackPanel::Stretch(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseXCoordinate,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackLeftEdge,</highlight></codeline>
<codeline lineno="3214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack)</highlight></codeline>
<codeline lineno="3215"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3216"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mStretched)<sp/>{<sp/></highlight><highlight class="comment">//<sp/>Undo<sp/>stretch<sp/>and<sp/>redo<sp/>it<sp/>with<sp/>NEW<sp/>mouse<sp/>coordinates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Drag<sp/>handling<sp/>was<sp/>not<sp/>originally<sp/>implemented<sp/>with<sp/>Undo<sp/>in<sp/>mind<sp/>--</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>there<sp/>are<sp/>saved<sp/>pointers<sp/>to<sp/>tracks<sp/>that<sp/>are<sp/>not<sp/>supposed<sp/>to<sp/>change.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Undo<sp/>will<sp/>change<sp/>tracks,<sp/>so<sp/>convert<sp/>pTrack,<sp/>mCapturedTrack<sp/>to<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>values,<sp/>then<sp/>look<sp/>them<sp/>up<sp/>after<sp/>the<sp/>Undo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="3222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pTrackIndex<sp/>=<sp/>pTrack-&gt;<ref refid="class_track_1a1e60222eef94930890417a8cf178153a" kindref="member">GetIndex</ref>();</highlight></codeline>
<codeline lineno="3223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>capturedTrackIndex<sp/>=</highlight></codeline>
<codeline lineno="3224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>?<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a1e60222eef94930890417a8cf178153a" kindref="member">GetIndex</ref>()<sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="3225"><highlight class="normal"></highlight></codeline>
<codeline lineno="3226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;<ref refid="class_audacity_project_1a85f5546cfa8874856b3515bbf8a4e951" kindref="member">OnUndo</ref>();</highlight></codeline>
<codeline lineno="3227"><highlight class="normal"></highlight></codeline>
<codeline lineno="3228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Undo<sp/>brings<sp/>us<sp/>back<sp/>to<sp/>the<sp/>pre-click<sp/>state,<sp/>but<sp/>we<sp/>want<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>quantize<sp/>selected<sp/>region<sp/>to<sp/>integer<sp/>beat<sp/>boundaries.<sp/>These</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>were<sp/>saved<sp/>in<sp/>mStretchSel[12]<sp/>variables:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a21a6af7b052d9d6bd39cc1db088e8f5d" kindref="member">setTimes</ref>(mStretchSel0,<sp/>mStretchSel1);</highlight></codeline>
<codeline lineno="3232"><highlight class="normal"></highlight></codeline>
<codeline lineno="3233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mStretched<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>index<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="3236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(index<sp/>==<sp/>pTrackIndex)<sp/>pTrack<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="3237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>&amp;&amp;<sp/>index<sp/>==<sp/>capturedTrackIndex)<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="3238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index++;</highlight></codeline>
<codeline lineno="3239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3240"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3241"><highlight class="normal"></highlight></codeline>
<codeline lineno="3242"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pTrack<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="3244"><highlight class="normal"></highlight></codeline>
<codeline lineno="3245"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pTrack<sp/>||<sp/>pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/>Track::Note)<sp/>{</highlight></codeline>
<codeline lineno="3246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3247"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3248"><highlight class="normal"></highlight></codeline>
<codeline lineno="3249"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*pNt<sp/>=<sp/>(<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>pTrack;</highlight></codeline>
<codeline lineno="3250"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>moveto<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0.0,<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(mouseXCoordinate,<sp/>trackLeftEdge));</highlight></codeline>
<codeline lineno="3251"><highlight class="normal"></highlight></codeline>
<codeline lineno="3252"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>to<sp/>make<sp/>sure<sp/>tempo<sp/>is<sp/>not<sp/>higher<sp/>than<sp/>20<sp/>beats<sp/>per<sp/>second</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3253"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(In<sp/>principle,<sp/>tempo<sp/>can<sp/>be<sp/>higher,<sp/>but<sp/>not<sp/>infinity.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3254"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>minPeriod<sp/>=<sp/>0.05;<sp/></highlight><highlight class="comment">//<sp/>minimum<sp/>beat<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3255"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>qBeat0,<sp/>qBeat1;</highlight></codeline>
<codeline lineno="3256"><highlight class="normal"><sp/><sp/><sp/>pNt-&gt;NearestBeatTime(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>(),<sp/>&amp;qBeat0);<sp/></highlight><highlight class="comment">//<sp/>get<sp/>beat</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3257"><highlight class="normal"><sp/><sp/><sp/>pNt-&gt;NearestBeatTime(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>(),<sp/>&amp;qBeat1);</highlight></codeline>
<codeline lineno="3258"><highlight class="normal"></highlight></codeline>
<codeline lineno="3259"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>could<sp/>be<sp/>moving<sp/>3<sp/>things:<sp/>left<sp/>edge,<sp/>right<sp/>edge,<sp/>a<sp/>point<sp/>between</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3260"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(mStretchMode)<sp/>{</highlight></codeline>
<codeline lineno="3261"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>stretchLeft:<sp/>{</highlight></codeline>
<codeline lineno="3262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>target<sp/>duration<sp/>is<sp/>not<sp/>too<sp/>short</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="seqread_8c_1a3c79b5a9ee81c3835b8de9b0d900d2de" kindref="member">dur</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>()<sp/>-<sp/>moveto;</highlight></codeline>
<codeline lineno="3264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dur<sp/>&lt;<sp/>mStretchRightBeats<sp/>*<sp/>minPeriod)<sp/>{</highlight></codeline>
<codeline lineno="3265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dur<sp/>=<sp/>mStretchRightBeats<sp/>*<sp/>minPeriod;</highlight></codeline>
<codeline lineno="3266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>moveto<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>()<sp/>-<sp/><ref refid="seqread_8c_1a3c79b5a9ee81c3835b8de9b0d900d2de" kindref="member">dur</ref>;</highlight></codeline>
<codeline lineno="3267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pNt-&gt;StretchRegion(mStretchSel0,<sp/>mStretchSel1,<sp/>dur))<sp/>{</highlight></codeline>
<codeline lineno="3269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pNt-&gt;SetOffset(pNt-&gt;GetOffset()<sp/>+<sp/>moveto<sp/>-<sp/>mStretchSel0);</highlight></codeline>
<codeline lineno="3270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ad1c6a578cb52f4a2d91952656a17b574" kindref="member">setT0</ref>(moveto);</highlight></codeline>
<codeline lineno="3271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3273"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3274"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>stretchRight:<sp/>{</highlight></codeline>
<codeline lineno="3275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>target<sp/>duration<sp/>is<sp/>not<sp/>too<sp/>short</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="seqread_8c_1a3c79b5a9ee81c3835b8de9b0d900d2de" kindref="member">dur</ref><sp/>=<sp/>moveto<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>();</highlight></codeline>
<codeline lineno="3277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dur<sp/>&lt;<sp/>mStretchLeftBeats<sp/>*<sp/>minPeriod)<sp/>{</highlight></codeline>
<codeline lineno="3278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dur<sp/>=<sp/>mStretchLeftBeats<sp/>*<sp/>minPeriod;</highlight></codeline>
<codeline lineno="3279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>moveto<sp/>=<sp/>mStretchSel0<sp/>+<sp/><ref refid="seqread_8c_1a3c79b5a9ee81c3835b8de9b0d900d2de" kindref="member">dur</ref>;</highlight></codeline>
<codeline lineno="3280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pNt-&gt;StretchRegion(mStretchSel0,<sp/>mStretchSel1,<sp/>dur))<sp/>{</highlight></codeline>
<codeline lineno="3282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ae32e3f4d254e58372548619e069da39c" kindref="member">setT1</ref>(moveto);</highlight></codeline>
<codeline lineno="3283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3285"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3286"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>stretchCenter:<sp/>{</highlight></codeline>
<codeline lineno="3287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>both<sp/>left<sp/>and<sp/>right<sp/>target<sp/>durations<sp/>are<sp/>not<sp/>too<sp/>short</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>left_dur<sp/>=<sp/>moveto<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>();</highlight></codeline>
<codeline lineno="3289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>right_dur<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>()<sp/>-<sp/>moveto;</highlight></codeline>
<codeline lineno="3290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>centerBeat;</highlight></codeline>
<codeline lineno="3291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pNt-&gt;NearestBeatTime(<ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>,<sp/>&amp;centerBeat);</highlight></codeline>
<codeline lineno="3292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(left_dur<sp/>&lt;<sp/>mStretchLeftBeats<sp/>*<sp/>minPeriod)<sp/>{</highlight></codeline>
<codeline lineno="3293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>left_dur<sp/>=<sp/>mStretchLeftBeats<sp/>*<sp/>minPeriod;</highlight></codeline>
<codeline lineno="3294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>moveto<sp/>=<sp/>mStretchSel0<sp/>+<sp/>left_dur;</highlight></codeline>
<codeline lineno="3295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(right_dur<sp/>&lt;<sp/>mStretchRightBeats<sp/>*<sp/>minPeriod)<sp/>{</highlight></codeline>
<codeline lineno="3297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>right_dur<sp/>=<sp/>mStretchRightBeats<sp/>*<sp/>minPeriod;</highlight></codeline>
<codeline lineno="3298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>moveto<sp/>=<sp/>mStretchSel1<sp/>-<sp/>right_dur;</highlight></codeline>
<codeline lineno="3299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pNt-&gt;StretchRegion(mStretchStart,<sp/>mStretchSel1,<sp/>right_dur);</highlight></codeline>
<codeline lineno="3301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pNt-&gt;StretchRegion(mStretchSel0,<sp/>mStretchStart,<sp/>left_dur);</highlight></codeline>
<codeline lineno="3302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3303"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3304"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="3305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3307"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3308"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Stretch<sp/>Note<sp/>Track&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Stretch&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="3309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref><sp/>|<sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114a0650fde039d6d9101c53ade11ecafcd3" kindref="member">UndoPush::AUTOSAVE</ref>);</highlight></codeline>
<codeline lineno="3310"><highlight class="normal"><sp/><sp/><sp/>mStretched<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3311"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3312"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3313"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3314"><highlight class="normal"></highlight></codeline>
<codeline lineno="3318" refid="class_track_panel_1a256e9294a7633273eb11bf4f5bc0d4fe" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a256e9294a7633273eb11bf4f5bc0d4fe" kindref="member">TrackPanel::SelectionHandleDrag</ref>(wxMouseEvent<sp/>&amp;<sp/>event,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*clickedTrack)</highlight></codeline>
<codeline lineno="3319"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3320"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3321"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a42bcca5177786a6bef89d3314337fa6e" kindref="member">mScrubStartPosition</ref><sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="3322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a68761c50276e717cca92431728377760" kindref="member">MaybeStartScrubbing</ref>(event);</highlight></codeline>
<codeline lineno="3323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>nothing<sp/>more,<sp/>don&apos;t<sp/>change<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3325"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3326"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3327"><highlight class="normal"></highlight></codeline>
<codeline lineno="3328"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>If<sp/>we&apos;re<sp/>not<sp/>in<sp/>the<sp/>process<sp/>of<sp/>selecting<sp/>(set<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3329"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>the<sp/>SelectionHandleClick<sp/>above),<sp/>fuhggeddaboudit.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3330"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>!=<ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf90290bb93700a5564c87b3c6d056fd6" kindref="member">IsSelecting</ref>)</highlight></codeline>
<codeline lineno="3331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3332"><highlight class="normal"></highlight></codeline>
<codeline lineno="3333"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Also<sp/>fuhggeddaboudit<sp/>if<sp/>we&apos;re<sp/>not<sp/>dragging<sp/>and<sp/>not<sp/>autoscrolling.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3334"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!event.Dragging()<sp/>&amp;&amp;<sp/>!<ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref>)</highlight></codeline>
<codeline lineno="3335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3336"><highlight class="normal"></highlight></codeline>
<codeline lineno="3337"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.CmdDown())<sp/>{</highlight></codeline>
<codeline lineno="3338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Ctrl-drag<sp/>has<sp/>no<sp/>meaning,<sp/>fuhggeddaboudit</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3340"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3341"><highlight class="normal"></highlight></codeline>
<codeline lineno="3342"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="3343"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="3344"><highlight class="normal"></highlight></codeline>
<codeline lineno="3345"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pTrack)<sp/>{</highlight></codeline>
<codeline lineno="3346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="3347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>;</highlight></codeline>
<codeline lineno="3348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>;</highlight></codeline>
<codeline lineno="3349"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3350"><highlight class="normal"></highlight></codeline>
<codeline lineno="3351"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Also<sp/>fuhggeddaboudit<sp/>if<sp/>not<sp/>in<sp/>a<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3352"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pTrack)</highlight></codeline>
<codeline lineno="3353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3354"><highlight class="normal"></highlight></codeline>
<codeline lineno="3355"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref><sp/>=<sp/><ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref><sp/>?<sp/><ref refid="class_track_panel_1a2b9d69055e7480fd704146b70509f790" kindref="member">mMouseMostRecentX</ref><sp/>:<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="3356"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/><ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref><sp/>?<sp/><ref refid="class_track_panel_1abfab1d7c9b5b41de69c41e03a826dc12" kindref="member">mMouseMostRecentY</ref><sp/>:<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="3357"><highlight class="normal"></highlight></codeline>
<codeline lineno="3358"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JKC:<sp/>Logic<sp/>to<sp/>prevent<sp/>a<sp/>selection<sp/>smaller<sp/>than<sp/>5<sp/>pixels<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3359"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>prevent<sp/>accidental<sp/>dragging<sp/>when<sp/>selecting.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3360"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(if<sp/>user<sp/>really<sp/>wants<sp/>a<sp/>tiny<sp/>selection,<sp/>they<sp/>should<sp/>zoom<sp/>in).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3361"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Can<sp/>someone<sp/>make<sp/>this<sp/>value<sp/>of<sp/>&apos;5&apos;<sp/>configurable<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3362"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>preferences?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3363"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>minimumSizedSelection<sp/>=<sp/>5;<sp/></highlight><highlight class="comment">//measured<sp/>in<sp/>pixels</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3364"><highlight class="normal"></highlight></codeline>
<codeline lineno="3365"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Might<sp/>be<sp/>dragging<sp/>frequency<sp/>bounds<sp/>only,<sp/>test</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3366"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>SelStart<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(<ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref>,<sp/>rect.x);<sp/></highlight><highlight class="comment">//cvt<sp/>time<sp/>to<sp/>pixels.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Abandon<sp/>this<sp/>drag<sp/>if<sp/>selecting<sp/>&lt;<sp/>5<sp/>pixels.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wxLongLong(SelStart-x).Abs()<sp/>&lt;<sp/>minimumSizedSelection</highlight></codeline>
<codeline lineno="3370"><highlight class="normal">#ifdef<sp/><ref refid="mac_2config_2i386_2src_2configunix_8h_1abe42f070a2d262c97b548828a01615d1" kindref="member">USE_MIDI</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>limiting<sp/>selection<sp/>size<sp/>is<sp/>good,<sp/>and<sp/>not<sp/>starting</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!mStretching<sp/></highlight><highlight class="comment">//<sp/>stretch<sp/>unless<sp/>mouse<sp/>moves<sp/>5<sp/>pixels<sp/>is<sp/>good,<sp/>but</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3372"><highlight class="normal">#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>once<sp/>stretching<sp/>starts,<sp/>it&apos;s<sp/>ok<sp/>to<sp/>move<sp/>even<sp/>1<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="3374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3375"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3376"><highlight class="normal"></highlight></codeline>
<codeline lineno="3377"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Handle<sp/>which<sp/>tracks<sp/>are<sp/>selected</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3378"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*sTrack<sp/>=<sp/>pTrack;</highlight></codeline>
<codeline lineno="3379"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*eTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(x,<sp/>y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>))<sp/>{</highlight></codeline>
<codeline lineno="3380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Swap<sp/>the<sp/>track<sp/>pointers<sp/>if<sp/>needed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(eTrack-&gt;GetIndex()<sp/>&lt;<sp/>sTrack-&gt;<ref refid="class_track_1a1e60222eef94930890417a8cf178153a" kindref="member">GetIndex</ref>())<sp/>{</highlight></codeline>
<codeline lineno="3382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>eTrack;</highlight></codeline>
<codeline lineno="3383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eTrack<sp/>=<sp/>sTrack;</highlight></codeline>
<codeline lineno="3384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sTrack<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="3385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3386"><highlight class="normal"></highlight></codeline>
<codeline lineno="3387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="3388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>sTrack<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a4eea44fac9add00ff978213df1652441" kindref="member">StartWith</ref>(sTrack);</highlight></codeline>
<codeline lineno="3389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(sTrack);</highlight></codeline>
<codeline lineno="3391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sTrack<sp/>==<sp/>eTrack)<sp/>{</highlight></codeline>
<codeline lineno="3392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3394"><highlight class="normal"></highlight></codeline>
<codeline lineno="3395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sTrack<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>();</highlight></codeline>
<codeline lineno="3396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(sTrack);</highlight></codeline>
<codeline lineno="3397"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3398"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3399"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mStretching)<sp/>{</highlight></codeline>
<codeline lineno="3400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>following<sp/>is<sp/>also<sp/>in<sp/>ExtendSelection,<sp/>called<sp/>below</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>probably<sp/>a<sp/>good<sp/>idea<sp/>to<sp/>&quot;hoist&quot;<sp/>the<sp/>code<sp/>to<sp/>before<sp/>this<sp/>&quot;if&quot;<sp/>stmt</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clickedTrack<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clickedTrack<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="3404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Stretch(x,<sp/>rect.x,<sp/>clickedTrack);</highlight></codeline>
<codeline lineno="3405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3406"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3407"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3408"><highlight class="normal"></highlight></codeline>
<codeline lineno="3409"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3410"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>SPECTRAL_EDITING_ESC_KEY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3411"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a7001647bc10f3a935bc31f1afeb6ce53" kindref="member">mFreqSelMode</ref><sp/>==<sp/><ref refid="class_track_panel_1a84990c0ee0f5d646ae93808d15f458bfa993fb1a686f5aa32359fcebbc97dfc65" kindref="member">FREQ_SEL_SNAPPING_CENTER</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>!<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ad98c3c19684309127345db2dc9ea7165" kindref="member">isPoint</ref>())</highlight></codeline>
<codeline lineno="3413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a49be30774780343754f3de5719cfd1dc" kindref="member">MoveSnappingFreqSelection</ref>(y,<sp/>rect.y,<sp/>rect.height,<sp/>pTrack);</highlight></codeline>
<codeline lineno="3414"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3415"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3416"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad7968d9248b67245cfb4182255d1de48" kindref="member">mFreqSelTrack</ref><sp/>==<sp/>pTrack)</highlight></codeline>
<codeline lineno="3417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e1f62ee006d97df0013c871df0bbb4c" kindref="member">ExtendFreqSelection</ref>(y,<sp/>rect.y,<sp/>rect.height);</highlight></codeline>
<codeline lineno="3418"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3419"><highlight class="normal"></highlight></codeline>
<codeline lineno="3420"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5cf09e7e916859a38c285041fbfcc8e8" kindref="member">ExtendSelection</ref>(x,<sp/>rect.x,<sp/>clickedTrack);</highlight></codeline>
<codeline lineno="3421"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a6999c7cb8ccf65bb81c6fe93c8c9ac03" kindref="member">UpdateSelectionDisplay</ref>();</highlight></codeline>
<codeline lineno="3422"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3423"><highlight class="normal"></highlight></codeline>
<codeline lineno="3424"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3425"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Seems<sp/>4<sp/>is<sp/>too<sp/>small<sp/>to<sp/>work<sp/>at<sp/>the<sp/>top.<sp/><sp/>Why?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3426" refid="_track_panel_8cpp_1ad2d3a7869c500e9ee6bfbdcc1cd8ff46abab198a93564721fbb1b49be9dbe2b30" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{<sp/><ref refid="_track_panel_8cpp_1ad2d3a7869c500e9ee6bfbdcc1cd8ff46abab198a93564721fbb1b49be9dbe2b30" kindref="member">FREQ_SNAP_DISTANCE</ref><sp/>=<sp/>10<sp/>};</highlight></codeline>
<codeline lineno="3427"><highlight class="normal"></highlight></codeline>
<codeline lineno="3430" refid="class_track_panel_1a93091b8efeeefbc10953a52175becc7e" refkind="member"><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a93091b8efeeefbc10953a52175becc7e" kindref="member">TrackPanel::PositionToFrequency</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wt,</highlight></codeline>
<codeline lineno="3431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>maySnap,</highlight></codeline>
<codeline lineno="3432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>mouseYCoordinate,</highlight></codeline>
<codeline lineno="3433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>trackTopEdge,</highlight></codeline>
<codeline lineno="3434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackHeight)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="3435"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="3436"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="3437"><highlight class="normal"></highlight></codeline>
<codeline lineno="3438"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Handle<sp/>snapping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3439"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(maySnap<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mouseYCoordinate<sp/>-<sp/>trackTopEdge<sp/>&lt;<sp/><ref refid="_track_panel_8cpp_1ad2d3a7869c500e9ee6bfbdcc1cd8ff46abab198a93564721fbb1b49be9dbe2b30" kindref="member">FREQ_SNAP_DISTANCE</ref>)</highlight></codeline>
<codeline lineno="3441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>;</highlight></codeline>
<codeline lineno="3442"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(maySnap<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackTopEdge<sp/>+<sp/>trackHeight<sp/>-<sp/>mouseYCoordinate<sp/>&lt;<sp/><ref refid="_track_panel_8cpp_1ad2d3a7869c500e9ee6bfbdcc1cd8ff46abab198a93564721fbb1b49be9dbe2b30" kindref="member">FREQ_SNAP_DISTANCE</ref>)</highlight></codeline>
<codeline lineno="3444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="3445"><highlight class="normal"></highlight></codeline>
<codeline lineno="3446"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_spectrogram_settings" kindref="compound">SpectrogramSettings</ref><sp/>&amp;settings<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>();</highlight></codeline>
<codeline lineno="3447"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>minFreq,<sp/>maxFreq;</highlight></codeline>
<codeline lineno="3448"><highlight class="normal"><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a6c31cef06f382857502ce036b2dc795b" kindref="member">GetSpectrumBounds</ref>(&amp;minFreq,<sp/>&amp;maxFreq);</highlight></codeline>
<codeline lineno="3449"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_number_scale" kindref="compound">NumberScale</ref><sp/>numberScale(settings.<ref refid="class_spectrogram_settings_1aa0c8fbbe53db1ede59a834438a3ee375" kindref="member">GetScale</ref>(minFreq,<sp/>maxFreq,<sp/>rate,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3450"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/>double(mouseYCoordinate<sp/>-<sp/>trackTopEdge)<sp/>/<sp/>trackHeight;</highlight></codeline>
<codeline lineno="3451"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>numberScale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(1.0<sp/>-<sp/>p);</highlight></codeline>
<codeline lineno="3452"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3453"><highlight class="normal"></highlight></codeline>
<codeline lineno="3455" refid="class_track_panel_1a02a66231db305d328e5187723c67e3b4" refkind="member"><highlight class="normal">wxInt64<sp/><ref refid="class_track_panel_1a02a66231db305d328e5187723c67e3b4" kindref="member">TrackPanel::FrequencyToPosition</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wt,</highlight></codeline>
<codeline lineno="3456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>frequency,</highlight></codeline>
<codeline lineno="3457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>trackTopEdge,</highlight></codeline>
<codeline lineno="3458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackHeight)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="3459"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="3460"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="3461"><highlight class="normal"></highlight></codeline>
<codeline lineno="3462"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_spectrogram_settings" kindref="compound">SpectrogramSettings</ref><sp/>&amp;settings<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>();</highlight></codeline>
<codeline lineno="3463"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>minFreq,<sp/>maxFreq;</highlight></codeline>
<codeline lineno="3464"><highlight class="normal"><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a6c31cef06f382857502ce036b2dc795b" kindref="member">GetSpectrumBounds</ref>(&amp;minFreq,<sp/>&amp;maxFreq);</highlight></codeline>
<codeline lineno="3465"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_number_scale" kindref="compound">NumberScale</ref><sp/>numberScale(settings.<ref refid="class_spectrogram_settings_1aa0c8fbbe53db1ede59a834438a3ee375" kindref="member">GetScale</ref>(minFreq,<sp/>maxFreq,<sp/>rate,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3466"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/>numberScale.<ref refid="class_number_scale_1a007f1093c973cd24b57e06b678613fd3" kindref="member">ValueToPosition</ref>(frequency);</highlight></codeline>
<codeline lineno="3467"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>trackTopEdge<sp/>+<sp/>wxInt64((1.0<sp/>-<sp/>p)<sp/>*<sp/>trackHeight);</highlight></codeline>
<codeline lineno="3468"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3469"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3470"><highlight class="normal"></highlight></codeline>
<codeline lineno="3471"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;</highlight><highlight class="keyword">typename</highlight><highlight class="normal"><sp/>T&gt;</highlight></codeline>
<codeline lineno="3472" refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(<sp/><ref refid="xmltchar_8h_1a16a0f7e7053a679c9bf4289b441a2be7" kindref="member">T</ref><sp/>*<sp/>pValue,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="xmltchar_8h_1a16a0f7e7053a679c9bf4289b441a2be7" kindref="member">T</ref><sp/>Value<sp/>)</highlight></codeline>
<codeline lineno="3473"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3474"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>pValue<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)</highlight></codeline>
<codeline lineno="3475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3476"><highlight class="normal"><sp/><sp/><sp/>*pValue<sp/>=<sp/>Value;</highlight></codeline>
<codeline lineno="3477"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3478"><highlight class="normal"></highlight></codeline>
<codeline lineno="3479"><highlight class="normal"></highlight></codeline>
<codeline lineno="3480"><highlight class="normal"><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faef" kindref="member">TrackPanel::SelectionBoundary</ref><sp/><ref refid="class_track_panel_1a90779078f1520016955e0d2bfe2e3dd1" kindref="member">TrackPanel::ChooseTimeBoundary</ref></highlight></codeline>
<codeline lineno="3481" refid="class_track_panel_1a90779078f1520016955e0d2bfe2e3dd1" refkind="member"><highlight class="normal">(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>selend,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>onlyWithinSnapDistance,</highlight></codeline>
<codeline lineno="3482"><highlight class="normal"><sp/>wxInt64<sp/>*pPixelDist,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*pPinValue)<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3483"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3484"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>();</highlight></codeline>
<codeline lineno="3485"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>();</highlight></codeline>
<codeline lineno="3486"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>posS<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(selend);</highlight></codeline>
<codeline lineno="3487"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>pos0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(t0);</highlight></codeline>
<codeline lineno="3488"><highlight class="normal"><sp/><sp/><sp/>wxInt64<sp/>pixelDist<sp/>=<sp/>std::abs(posS<sp/>-<sp/>pos0);</highlight></codeline>
<codeline lineno="3489"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>chooseLeft<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3490"><highlight class="normal"></highlight></codeline>
<codeline lineno="3491"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ad98c3c19684309127345db2dc9ea7165" kindref="member">isPoint</ref>())</highlight></codeline>
<codeline lineno="3492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Special<sp/>case<sp/>when<sp/>selection<sp/>is<sp/>a<sp/>point,<sp/>and<sp/>thus<sp/>left</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>right<sp/>distances<sp/>are<sp/>the<sp/>same</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>chooseLeft<sp/>=<sp/>(selend<sp/>&lt;<sp/>t0);</highlight></codeline>
<codeline lineno="3495"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>pos1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(t1);</highlight></codeline>
<codeline lineno="3497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>rightDist<sp/>=<sp/>std::abs(posS<sp/>-<sp/>pos1);</highlight></codeline>
<codeline lineno="3498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rightDist<sp/>&lt;<sp/>pixelDist)</highlight></codeline>
<codeline lineno="3499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chooseLeft<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>pixelDist<sp/>=<sp/>rightDist;</highlight></codeline>
<codeline lineno="3500"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3501"><highlight class="normal"></highlight></codeline>
<codeline lineno="3502"><highlight class="normal"><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(pPixelDist,<sp/>pixelDist);</highlight></codeline>
<codeline lineno="3503"><highlight class="normal"></highlight></codeline>
<codeline lineno="3504"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(onlyWithinSnapDistance<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pixelDist<sp/>&gt;=<sp/><ref refid="_track_panel_8h_1a76c0e6be983bf1027135271d08809372" kindref="member">SELECTION_RESIZE_REGION</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(<sp/>pPinValue,<sp/>-1.0);</highlight></codeline>
<codeline lineno="3507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa43f1ff076139ea939168d6a19f5894de" kindref="member">SBNone</ref>;</highlight></codeline>
<codeline lineno="3508"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3509"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(chooseLeft)<sp/>{</highlight></codeline>
<codeline lineno="3510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(<sp/>pPinValue,<sp/>t1);</highlight></codeline>
<codeline lineno="3511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa0e2983ab8187d8aaa75f76e50622ac9e" kindref="member">SBLeft</ref>;</highlight></codeline>
<codeline lineno="3512"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3513"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(<sp/>pPinValue,<sp/>t0);</highlight></codeline>
<codeline lineno="3515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaf9ac100db15716ed99fea50cfed80455" kindref="member">SBRight</ref>;</highlight></codeline>
<codeline lineno="3516"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3517"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3518"><highlight class="normal"></highlight></codeline>
<codeline lineno="3519"><highlight class="normal"></highlight></codeline>
<codeline lineno="3520"><highlight class="normal"><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faef" kindref="member">TrackPanel::SelectionBoundary</ref><sp/><ref refid="class_track_panel_1a38c1a22080626e8b1af8cce7fcf10dae" kindref="member">TrackPanel::ChooseBoundary</ref></highlight></codeline>
<codeline lineno="3521" refid="class_track_panel_1a38c1a22080626e8b1af8cce7fcf10dae" refkind="member"><highlight class="normal">(wxMouseEvent<sp/>&amp;<sp/>event,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;rect,</highlight></codeline>
<codeline lineno="3522"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mayDragWidth,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>onlyWithinSnapDistance,</highlight></codeline>
<codeline lineno="3523"><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*pPinValue)<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3524"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3525"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Choose<sp/>one<sp/>of<sp/>four<sp/>boundaries<sp/>to<sp/>adjust,<sp/>or<sp/>the<sp/>center<sp/>frequency.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3526"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>May<sp/>choose<sp/>frequencies<sp/>only<sp/>if<sp/>in<sp/>a<sp/>spectrogram<sp/>view<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3527"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>within<sp/>the<sp/>time<sp/>boundaries.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3528"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>May<sp/>choose<sp/>no<sp/>boundary<sp/>if<sp/>onlyWithinSnapDistance<sp/>is<sp/>true.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3529"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Otherwise<sp/>choose<sp/>the<sp/>eligible<sp/>boundary<sp/>nearest<sp/>the<sp/>mouse<sp/>click.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3530"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>selend<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>rect.x);</highlight></codeline>
<codeline lineno="3531"><highlight class="normal"><sp/><sp/><sp/>wxInt64<sp/>pixelDist<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3532"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faef" kindref="member">SelectionBoundary</ref><sp/>boundary<sp/>=</highlight></codeline>
<codeline lineno="3533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a90779078f1520016955e0d2bfe2e3dd1" kindref="member">ChooseTimeBoundary</ref>(selend,<sp/>onlyWithinSnapDistance,</highlight></codeline>
<codeline lineno="3534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&amp;pixelDist,<sp/>pPinValue);</highlight></codeline>
<codeline lineno="3535"><highlight class="normal"></highlight></codeline>
<codeline lineno="3536"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SPECTRAL_EDITING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3537"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>();</highlight></codeline>
<codeline lineno="3538"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>();</highlight></codeline>
<codeline lineno="3539"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a04b91be00d5df7ef6fd08161dd6f1ec4" kindref="member">f0</ref>();</highlight></codeline>
<codeline lineno="3540"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>f1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a821c5a808c950dc3a4db33297c9e088c" kindref="member">f1</ref>();</highlight></codeline>
<codeline lineno="3541"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>fc<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1abf0dba56cc4ec584bacceaa98926cf36" kindref="member">fc</ref>();</highlight></codeline>
<codeline lineno="3542"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ratio<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3543"><highlight class="normal"></highlight></codeline>
<codeline lineno="3544"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>chooseTime<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3545"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>chooseBottom<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3546"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>chooseCenter<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3547"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Consider<sp/>adjustment<sp/>of<sp/>frequencies<sp/>only<sp/>if<sp/>mouse<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3548"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>within<sp/>the<sp/>time<sp/>boundaries</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3549"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1ad98c3c19684309127345db2dc9ea7165" kindref="member">isPoint</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>&lt;=<sp/>selend<sp/>&amp;&amp;<sp/>selend<sp/>&lt;<sp/>t1<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isSpectralSelectionTrack(pTrack))<sp/>{</highlight></codeline>
<codeline lineno="3552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keyword">const<sp/></highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="3553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>bottomSel<sp/>=<sp/>(f0<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="3554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="class_track_panel_1a02a66231db305d328e5187723c67e3b4" kindref="member">FrequencyToPosition</ref>(wt,<sp/>f0,<sp/>rect.y,<sp/>rect.height)</highlight></codeline>
<codeline lineno="3555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>rect.y<sp/>+<sp/>rect.height;</highlight></codeline>
<codeline lineno="3556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>topSel<sp/>=<sp/>(f1<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="3557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="class_track_panel_1a02a66231db305d328e5187723c67e3b4" kindref="member">FrequencyToPosition</ref>(wt,<sp/>f1,<sp/>rect.y,<sp/>rect.height)</highlight></codeline>
<codeline lineno="3558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>rect.y;</highlight></codeline>
<codeline lineno="3559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>signedBottomDist<sp/>=<sp/><ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>(event.m_y<sp/>-<sp/>bottomSel);</highlight></codeline>
<codeline lineno="3560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxInt64<sp/>verticalDist<sp/>=<sp/>std::abs(signedBottomDist);</highlight></codeline>
<codeline lineno="3561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bottomSel<sp/>==<sp/>topSel)</highlight></codeline>
<codeline lineno="3562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Top<sp/>and<sp/>bottom<sp/>are<sp/>too<sp/>close<sp/>to<sp/>resolve<sp/>on<sp/>screen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chooseBottom<sp/>=<sp/>(signedBottomDist<sp/>&gt;=<sp/>0);</highlight></codeline>
<codeline lineno="3564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>topDist<sp/>=<sp/>abs(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">(event.m_y<sp/>-<sp/>topSel));</highlight></codeline>
<codeline lineno="3566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(topDist<sp/>&lt;<sp/>verticalDist)</highlight></codeline>
<codeline lineno="3567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chooseBottom<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>verticalDist<sp/>=<sp/>topDist;</highlight></codeline>
<codeline lineno="3568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fc<sp/>&gt;<sp/>0</highlight></codeline>
<codeline lineno="3570"><highlight class="normal">#ifdef<sp/>SPECTRAL_EDITING_ESC_KEY</highlight></codeline>
<codeline lineno="3571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>mayDragWidth</highlight></codeline>
<codeline lineno="3572"><highlight class="normal">#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref></highlight></codeline>
<codeline lineno="3573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="3574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>centerSel<sp/>=</highlight></codeline>
<codeline lineno="3575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a02a66231db305d328e5187723c67e3b4" kindref="member">FrequencyToPosition</ref>(wt,<sp/>fc,<sp/>rect.y,<sp/>rect.height);</highlight></codeline>
<codeline lineno="3576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>centerDist<sp/>=<sp/>abs(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">(event.m_y<sp/>-<sp/>centerSel));</highlight></codeline>
<codeline lineno="3577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(centerDist<sp/>&lt;<sp/>verticalDist)</highlight></codeline>
<codeline lineno="3578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chooseCenter<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>verticalDist<sp/>=<sp/>centerDist,</highlight></codeline>
<codeline lineno="3579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ratio<sp/>=<sp/>f1<sp/>/<sp/>fc;</highlight></codeline>
<codeline lineno="3580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(verticalDist<sp/>&gt;=<sp/>0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verticalDist<sp/>&lt;<sp/>pixelDist)<sp/>{</highlight></codeline>
<codeline lineno="3583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pixelDist<sp/>=<sp/>verticalDist;</highlight></codeline>
<codeline lineno="3584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chooseTime<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3586"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3587"><highlight class="normal"></highlight></codeline>
<codeline lineno="3588"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!chooseTime)<sp/>{</highlight></codeline>
<codeline lineno="3589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PRL:<sp/><sp/>Seems<sp/>I<sp/>need<sp/>a<sp/>larger<sp/>tolerance<sp/>to<sp/>make<sp/>snapping<sp/>work</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>at<sp/>top<sp/>of<sp/>track,<sp/>not<sp/>sure<sp/>why</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(onlyWithinSnapDistance<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pixelDist<sp/>&gt;=<sp/><ref refid="_track_panel_8cpp_1ad2d3a7869c500e9ee6bfbdcc1cd8ff46abab198a93564721fbb1b49be9dbe2b30" kindref="member">FREQ_SNAP_DISTANCE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(<sp/>pPinValue,<sp/>-1.0);</highlight></codeline>
<codeline lineno="3594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa43f1ff076139ea939168d6a19f5894de" kindref="member">SBNone</ref>;</highlight></codeline>
<codeline lineno="3595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(chooseCenter)<sp/>{</highlight></codeline>
<codeline lineno="3597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(<sp/>pPinValue,<sp/>ratio);</highlight></codeline>
<codeline lineno="3598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa90557190a1b0cdc2478aef8e1bc37aaa" kindref="member">SBCenter</ref>;</highlight></codeline>
<codeline lineno="3599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mayDragWidth<sp/>&amp;&amp;<sp/>fc<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="3601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(pPinValue,<sp/>fc);</highlight></codeline>
<codeline lineno="3602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefab720d85f3623565f8867e123b68086b8" kindref="member">SBWidth</ref>;</highlight></codeline>
<codeline lineno="3603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(chooseBottom)<sp/>{</highlight></codeline>
<codeline lineno="3605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(<sp/>pPinValue,<sp/>f1<sp/>);</highlight></codeline>
<codeline lineno="3606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefaad9f7cd5fd67e9ebeba91878771585ea" kindref="member">SBBottom</ref>;</highlight></codeline>
<codeline lineno="3607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a07aa4410f8fd1fbac865a15892b9a736" kindref="member">SetIfNotNull</ref>(pPinValue,<sp/>f0);</highlight></codeline>
<codeline lineno="3610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a29bda3ec7c887e805fa032c215b8faefa2569d529dc75d78f48336c3434a68f1b" kindref="member">SBTop</ref>;</highlight></codeline>
<codeline lineno="3611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3612"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3613"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3614"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3615"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>boundary;</highlight></codeline>
<codeline lineno="3617"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3618"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3619"><highlight class="normal"></highlight></codeline>
<codeline lineno="3622" refid="class_track_panel_1ac1edb4292cfaec717846b6c880bdf4e6" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac1edb4292cfaec717846b6c880bdf4e6" kindref="member">TrackPanel::HandleEnvelope</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="3623"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3624"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown())<sp/>{</highlight></codeline>
<codeline lineno="3625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="3626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="3627"><highlight class="normal"></highlight></codeline>
<codeline lineno="3628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pTrack)</highlight></codeline>
<codeline lineno="3629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3630"><highlight class="normal"></highlight></codeline>
<codeline lineno="3631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(pTrack,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba77f6cb3939bae5856630fb30abf9a11d" kindref="member">IsEnveloping</ref>);</highlight></codeline>
<codeline lineno="3632"><highlight class="normal"></highlight></codeline>
<codeline lineno="3633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="3634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aee4ad2084155a0cda2ec1e96cf63b30f" kindref="member">mCapturedEnvelope</ref><sp/>=</highlight></codeline>
<codeline lineno="3636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)-&gt;GetEnvelopeAtX(event.GetX());</highlight></codeline>
<codeline lineno="3637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aee4ad2084155a0cda2ec1e96cf63b30f" kindref="member">mCapturedEnvelope</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3640"><highlight class="normal"></highlight></codeline>
<codeline lineno="3641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="3642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>;</highlight></codeline>
<codeline lineno="3643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>;</highlight></codeline>
<codeline lineno="3644"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3645"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>if<sp/>there&apos;s<sp/>actually<sp/>a<sp/>selected<sp/>track,<sp/>then<sp/>forward<sp/>all<sp/>of<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3646"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>mouse<sp/>events<sp/>to<sp/>its<sp/>envelope.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3647"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="3648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a16909324712a250b69a230cebc9eb00f" kindref="member">ForwardEventToEnvelope</ref>(event);</highlight></codeline>
<codeline lineno="3649"><highlight class="normal"></highlight></codeline>
<codeline lineno="3650"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="3651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(</highlight></codeline>
<codeline lineno="3653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>(verb)<sp/>Audacity<sp/>has<sp/>just<sp/>adjusted<sp/>the<sp/>envelope<sp/>.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Adjusted<sp/>envelope.&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="3655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>The<sp/>envelope<sp/>is<sp/>a<sp/>curve<sp/>that<sp/>controls<sp/>the<sp/>audio<sp/>loudness.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Envelope&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="3657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="3658"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3659"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3660"><highlight class="normal"></highlight></codeline>
<codeline lineno="3663" refid="class_track_panel_1a7d71bc92018613b6fb233f69acd47780" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a7d71bc92018613b6fb233f69acd47780" kindref="member">TrackPanel::ForwardEventToTimeTrackEnvelope</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="3664"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3665"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_time_track" kindref="compound">TimeTrack</ref><sp/>*ptimetrack<sp/>=<sp/>(<ref refid="class_time_track" kindref="compound">TimeTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="3666"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_envelope" kindref="compound">Envelope</ref><sp/>*pspeedenvelope<sp/>=<sp/>ptimetrack-&gt;<ref refid="class_time_track_1abacec6fca980b03f0bf7a4f96310704a" kindref="member">GetEnvelope</ref>();</highlight></codeline>
<codeline lineno="3667"><highlight class="normal"></highlight></codeline>
<codeline lineno="3668"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>envRect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="3669"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>lower<sp/>=<sp/>ptimetrack-&gt;<ref refid="class_time_track_1a4b1f56611ba90a95691a0b47107e4d22" kindref="member">GetRangeLower</ref>(),<sp/>upper<sp/>=<sp/>ptimetrack-&gt;<ref refid="class_time_track_1a8d16c30d6a49657b1e3125ba16a3fae8" kindref="member">GetRangeUpper</ref>();</highlight></codeline>
<codeline lineno="3670"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>dBRange<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a0437d7c445b980d89c8055be40577997" kindref="member">dBr</ref>;</highlight></codeline>
<codeline lineno="3671"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptimetrack-&gt;<ref refid="class_time_track_1abae5d14db9f5a3f3ffc6c6c99278ed3a" kindref="member">GetDisplayLog</ref>())<sp/>{</highlight></codeline>
<codeline lineno="3672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MB:<sp/>silly<sp/>way<sp/>to<sp/>undo<sp/>the<sp/>work<sp/>of<sp/>GetWaveYPos<sp/>while<sp/>still<sp/>getting<sp/>a<sp/>logarithmic<sp/>scale</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>lower<sp/>=<sp/><ref refid="_audacity_8h_1a6dfdc8f6b4fa2e8f244f18cedb607b8e" kindref="member">LINEAR_TO_DB</ref>(<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(1.0<ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>-7,<sp/>lower))<sp/>/<sp/>dBRange<sp/>+<sp/>1.0;</highlight></codeline>
<codeline lineno="3674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>upper<sp/>=<sp/><ref refid="_audacity_8h_1a6dfdc8f6b4fa2e8f244f18cedb607b8e" kindref="member">LINEAR_TO_DB</ref>(<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(1.0<ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>-7,<sp/>upper))<sp/>/<sp/>dBRange<sp/>+<sp/>1.0;</highlight></codeline>
<codeline lineno="3675"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3676"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>needUpdate<sp/>=</highlight></codeline>
<codeline lineno="3677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pspeedenvelope-&gt;<ref refid="class_envelope_1a2f3f0bb42830e4116b493db3b86b9e51" kindref="member">MouseEvent</ref>(</highlight></codeline>
<codeline lineno="3678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event,<sp/>envRect,</highlight></codeline>
<codeline lineno="3679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,</highlight></codeline>
<codeline lineno="3680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptimetrack-&gt;<ref refid="class_time_track_1abae5d14db9f5a3f3ffc6c6c99278ed3a" kindref="member">GetDisplayLog</ref>(),<sp/>dBRange,<sp/>lower,<sp/>upper);</highlight></codeline>
<codeline lineno="3681"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(needUpdate)<sp/>{</highlight></codeline>
<codeline lineno="3682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="3683"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3684"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3685"><highlight class="normal"></highlight></codeline>
<codeline lineno="3688" refid="class_track_panel_1a41415550107327b73b139d9ed0846df8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a41415550107327b73b139d9ed0846df8" kindref="member">TrackPanel::ForwardEventToWaveTrackEnvelope</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="3689"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3690"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*pwavetrack<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="3691"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_envelope" kindref="compound">Envelope</ref><sp/>*penvelope<sp/>=<sp/><ref refid="class_track_panel_1aee4ad2084155a0cda2ec1e96cf63b30f" kindref="member">mCapturedEnvelope</ref>;</highlight></codeline>
<codeline lineno="3692"><highlight class="normal"></highlight></codeline>
<codeline lineno="3693"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Possibly<sp/>no-envelope,<sp/>for<sp/>example<sp/>when<sp/>in<sp/>spectrum<sp/>view<sp/>mode.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3694"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>so,<sp/>then<sp/>bail<sp/>out.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3695"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!penvelope)</highlight></codeline>
<codeline lineno="3696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3697"><highlight class="normal"></highlight></codeline>
<codeline lineno="3698"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>WaveTracks<sp/>can<sp/>be<sp/>displayed<sp/>in<sp/>several<sp/>different<sp/>formats.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3699"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>This<sp/>asks<sp/>which<sp/>one<sp/>is<sp/>in<sp/>use.<sp/>(ie,<sp/>Wave,<sp/>Spectrum,<sp/>etc)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3700"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>display<sp/>=<sp/>pwavetrack-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>();</highlight></codeline>
<codeline lineno="3701"><highlight class="normal"></highlight></codeline>
<codeline lineno="3702"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(display<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>dB<sp/>=<sp/>!pwavetrack-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1ae4f07aa847f89f72a127ba5e357f1e78" kindref="member">isLinear</ref>();</highlight></codeline>
<codeline lineno="3704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>dBRange<sp/>=<sp/>pwavetrack-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>;</highlight></codeline>
<codeline lineno="3705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>needUpdate;</highlight></codeline>
<codeline lineno="3706"><highlight class="normal"></highlight></codeline>
<codeline lineno="3707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>Then<sp/>forward<sp/>our<sp/>mouse<sp/>event<sp/>to<sp/>the<sp/>envelope.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>It&apos;ll<sp/>recalculate<sp/>and<sp/>then<sp/>tell<sp/>us<sp/>whether<sp/>or<sp/>not<sp/>to<sp/>redraw.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>envRect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="3710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>zoomMin,<sp/>zoomMax;</highlight></codeline>
<codeline lineno="3711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pwavetrack-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;zoomMin,<sp/>&amp;zoomMax);</highlight></codeline>
<codeline lineno="3712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>needUpdate<sp/>=<sp/>penvelope-&gt;<ref refid="class_envelope_1a2f3f0bb42830e4116b493db3b86b9e51" kindref="member">MouseEvent</ref>(</highlight></codeline>
<codeline lineno="3713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event,<sp/>envRect,</highlight></codeline>
<codeline lineno="3714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,</highlight></codeline>
<codeline lineno="3715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dB,<sp/>dBRange,<sp/>zoomMin,<sp/>zoomMax);</highlight></codeline>
<codeline lineno="3716"><highlight class="normal"></highlight></codeline>
<codeline lineno="3717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>this<sp/>track<sp/>is<sp/>linked<sp/>to<sp/>another<sp/>track,<sp/>make<sp/>the<sp/>identical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>change<sp/>to<sp/>the<sp/>linked<sp/>envelope:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*link<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="3720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link)<sp/>{</highlight></codeline>
<codeline lineno="3721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_envelope" kindref="compound">Envelope</ref><sp/>*e2<sp/>=<sp/>link-&gt;<ref refid="class_wave_track_1ab5377b2d185a54c4c8f5eb334f1c4285" kindref="member">GetEnvelopeAtX</ref>(event.GetX());</highlight></codeline>
<codeline lineno="3722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>There<sp/>isn&apos;t<sp/>necessarily<sp/>an<sp/>envelope<sp/>there;<sp/>no<sp/>guarantee<sp/>a</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>linked<sp/>track<sp/>has<sp/>the<sp/>same<sp/>WaveClip<sp/>structure...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>updateNeeded<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(e2)<sp/>{</highlight></codeline>
<codeline lineno="3726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>envRect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="3727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>zoomMin,<sp/>zoomMax;</highlight></codeline>
<codeline lineno="3728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwavetrack-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;zoomMin,<sp/>&amp;zoomMax);</highlight></codeline>
<codeline lineno="3729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>updateNeeded<sp/>=<sp/>e2-&gt;<ref refid="class_envelope_1a2f3f0bb42830e4116b493db3b86b9e51" kindref="member">MouseEvent</ref>(event,<sp/>envRect,</highlight></codeline>
<codeline lineno="3730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,<sp/>dB,<sp/>dBRange,</highlight></codeline>
<codeline lineno="3731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zoomMin,<sp/>zoomMax);</highlight></codeline>
<codeline lineno="3732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>needUpdate<sp/>|=<sp/>updateNeeded;</highlight></codeline>
<codeline lineno="3733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!e2<sp/>||<sp/>!updateNeeded)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>no<sp/>envelope<sp/>found<sp/>at<sp/>this<sp/>x<sp/>point,<sp/>or<sp/>found<sp/>but<sp/>not<sp/>updated</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(e2<sp/>=<sp/>link-&gt;<ref refid="class_wave_track_1ad051f6b5dea67bc6926eef457052f3e4" kindref="member">GetActiveEnvelope</ref>())<sp/>!=<sp/>0<sp/>)<sp/><sp/></highlight><highlight class="comment">//<sp/>search<sp/>for<sp/>any<sp/>active<sp/>DragPoint</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>envRect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="3739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>zoomMin,<sp/>zoomMax;</highlight></codeline>
<codeline lineno="3740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pwavetrack-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;zoomMin,<sp/>&amp;zoomMax);</highlight></codeline>
<codeline lineno="3741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>needUpdate<sp/>|=<sp/>e2-&gt;<ref refid="class_envelope_1a2f3f0bb42830e4116b493db3b86b9e51" kindref="member">MouseEvent</ref>(event,<sp/>envRect,</highlight></codeline>
<codeline lineno="3742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,<sp/>dB,<sp/>dBRange,</highlight></codeline>
<codeline lineno="3743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zoomMin,<sp/>zoomMax);</highlight></codeline>
<codeline lineno="3744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3747"><highlight class="normal"></highlight></codeline>
<codeline lineno="3748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(needUpdate)<sp/>{</highlight></codeline>
<codeline lineno="3749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="3750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3751"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3752"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3753"><highlight class="normal"></highlight></codeline>
<codeline lineno="3754"><highlight class="normal"></highlight></codeline>
<codeline lineno="3758"><highlight class="normal"></highlight></codeline>
<codeline lineno="3759"><highlight class="normal"></highlight><highlight class="comment">//<sp/>AS:<sp/>I&apos;m<sp/>not<sp/>sure<sp/>why<sp/>we<sp/>can&apos;t<sp/>let<sp/>the<sp/>Envelope<sp/>take<sp/>care<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3760"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>redrawing<sp/>itself.<sp/><sp/>?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3761"><highlight class="normal"></highlight></codeline>
<codeline lineno="3762" refid="class_track_panel_1a16909324712a250b69a230cebc9eb00f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a16909324712a250b69a230cebc9eb00f" kindref="member">TrackPanel::ForwardEventToEnvelope</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="3763"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3764"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efa2348e03ba06177fe4dbcf87e27d82e33" kindref="member">Track::Time</ref>)</highlight></codeline>
<codeline lineno="3765"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7d71bc92018613b6fb233f69acd47780" kindref="member">ForwardEventToTimeTrackEnvelope</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="3767"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3768"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="3769"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a41415550107327b73b139d9ed0846df8" kindref="member">ForwardEventToWaveTrackEnvelope</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="3771"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3772"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3773"><highlight class="normal"></highlight></codeline>
<codeline lineno="3774" refid="class_track_panel_1a9278a17ad01e70d0e878db5f91ab48ce" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a9278a17ad01e70d0e878db5f91ab48ce" kindref="member">TrackPanel::HandleSlide</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="3775"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3776"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown())</highlight></codeline>
<codeline lineno="3777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af4fa94589c343988e22bad24c7f05ed8" kindref="member">StartSlide</ref>(event);</highlight></codeline>
<codeline lineno="3778"><highlight class="normal"></highlight></codeline>
<codeline lineno="3779"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>!=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad69d99a254d131489723ad0ec04810a0" kindref="member">IsSliding</ref>)</highlight></codeline>
<codeline lineno="3780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3781"><highlight class="normal"></highlight></codeline>
<codeline lineno="3782"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging()<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="3783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3cae193e3956f928b5efc04dde37d508" kindref="member">DoSlide</ref>(event);</highlight></codeline>
<codeline lineno="3784"><highlight class="normal"></highlight></codeline>
<codeline lineno="3785"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="3786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>0;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>++)</highlight></codeline>
<codeline lineno="3787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_clip" kindref="compound">TrackClip</ref><sp/>&amp;trackClip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];</highlight></codeline>
<codeline lineno="3789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref>*<sp/>pWaveClip<sp/>=<sp/>trackClip.<ref refid="class_track_clip_1aa182c2e271beb63aac6cd8c63cd0f3b5" kindref="member">clip</ref>;</highlight></codeline>
<codeline lineno="3790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Note<sp/>that<sp/>per<sp/>TrackPanel::AddClipsToCaptured(Track<sp/>*t,<sp/>double<sp/>t0,<sp/>double<sp/>t1),</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>the<sp/>non-WaveTrack<sp/>case,<sp/>the<sp/>code<sp/>adds<sp/>a<sp/>NULL<sp/>clip<sp/>to<sp/>mCapturedClipArray,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>so<sp/>we<sp/>have<sp/>to<sp/>check<sp/>for<sp/>that<sp/>any<sp/>time<sp/>we&apos;re<sp/>going<sp/>to<sp/>deref<sp/>it.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Previous<sp/>code<sp/>did<sp/>not<sp/>check<sp/>it<sp/>here,<sp/>and<sp/>that<sp/>caused<sp/>bug<sp/>367<sp/>crash.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pWaveClip<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackClip.<ref refid="class_track_clip_1a3539d37f715d74f8400bbede3be13c6a" kindref="member">track</ref><sp/>!=<sp/>trackClip.<ref refid="class_track_clip_1ace9065ae4c6576cc7d93346d6fa9718a" kindref="member">origTrack</ref>)</highlight></codeline>
<codeline lineno="3796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>that<sp/>user<sp/>has<sp/>dropped<sp/>the<sp/>clip<sp/>into<sp/>a<sp/>different<sp/>track,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>the<sp/>sample<sp/>rate<sp/>matches<sp/>the<sp/>destination<sp/>track<sp/>(mCapturedTrack).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pWaveClip-&gt;<ref refid="class_wave_clip_1ada848d3405e07d83918b614a42a1799b" kindref="member">Resample</ref>(static_cast&lt;WaveTrack*&gt;(trackClip.<ref refid="class_track_clip_1a3539d37f715d74f8400bbede3be13c6a" kindref="member">track</ref>)-&gt;GetRate());</highlight></codeline>
<codeline lineno="3800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pWaveClip-&gt;<ref refid="class_wave_clip_1a272fcb9bb28b53329674c6ba14026c7b" kindref="member">MarkChanged</ref>();</highlight></codeline>
<codeline lineno="3801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3803"><highlight class="normal"></highlight></codeline>
<codeline lineno="3804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="3805"><highlight class="normal"></highlight></codeline>
<codeline lineno="3806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>;</highlight></codeline>
<codeline lineno="3808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3810"><highlight class="normal"></highlight></codeline>
<codeline lineno="3811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>not<sp/>draw<sp/>yellow<sp/>lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>!=<sp/>-1<sp/>||<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>!=<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="3813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="3814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3816"><highlight class="normal"></highlight></codeline>
<codeline lineno="3817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1ab732e997531f9dbf44e50e8f97eda6ee" kindref="member">mDidSlideVertically</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>==0)</highlight></codeline>
<codeline lineno="3818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3819"><highlight class="normal"></highlight></codeline>
<codeline lineno="3820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="3821"><highlight class="normal"></highlight></codeline>
<codeline lineno="3822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/>msg;</highlight></codeline>
<codeline lineno="3823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>consolidate;</highlight></codeline>
<codeline lineno="3824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ab732e997531f9dbf44e50e8f97eda6ee" kindref="member">mDidSlideVertically</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.Printf(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Moved<sp/>clips<sp/>to<sp/>another<sp/>track&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="3826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>consolidate<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/>direction<sp/>=<sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>&gt;0<sp/>?</highlight></codeline>
<codeline lineno="3830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>a<sp/>direction<sp/>as<sp/>in<sp/>left<sp/>or<sp/>right.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;right&quot;</highlight><highlight class="normal">)<sp/>:</highlight></codeline>
<codeline lineno="3832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>a<sp/>direction<sp/>as<sp/>in<sp/>left<sp/>or<sp/>right.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;left&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>%s<sp/>is<sp/>a<sp/>direction<sp/>like<sp/>left<sp/>or<sp/>right<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.Printf(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Time<sp/>shifted<sp/>tracks/clips<sp/>%s<sp/>%.02f<sp/>seconds&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="3836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>direction.c_str(),<sp/>fabs(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>));</highlight></codeline>
<codeline lineno="3837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>consolidate<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(msg,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Time-Shift&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="3840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>consolidate<sp/>?<sp/>(<ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref>)<sp/>:<sp/>(<ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114a0650fde039d6d9101c53ade11ecafcd3" kindref="member">UndoPush::AUTOSAVE</ref>));</highlight></codeline>
<codeline lineno="3841"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3842"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3843"><highlight class="normal"></highlight></codeline>
<codeline lineno="3844"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="3845"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Don&apos;t<sp/>count<sp/>right<sp/>channels.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3846"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*NthAudioTrack(<ref refid="class_track_list" kindref="compound">TrackList</ref><sp/>&amp;list,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nn)</highlight></codeline>
<codeline lineno="3847"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nn<sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="3849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_of_kind_iterator" kindref="compound">TrackListOfKindIterator</ref><sp/>iter(<ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>,<sp/>&amp;list);</highlight></codeline>
<codeline lineno="3850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack<sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="3851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;<sp/>nn--)</highlight></codeline>
<codeline lineno="3852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack<sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="3854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3855"><highlight class="normal"></highlight></codeline>
<codeline lineno="3856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3857"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3858"><highlight class="normal"></highlight></codeline>
<codeline lineno="3859"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Don&apos;t<sp/>count<sp/>right<sp/>channels.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3860"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>TrackPosition(<ref refid="class_track_list" kindref="compound">TrackList</ref><sp/>&amp;list,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pFindTrack)</highlight></codeline>
<codeline lineno="3861"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>partner<sp/>=<sp/>pFindTrack-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="3863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_of_kind_iterator" kindref="compound">TrackListOfKindIterator</ref><sp/>iter(<ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>,<sp/>&amp;list);</highlight></codeline>
<codeline lineno="3864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nn<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="3865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack<sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();<sp/>pTrack;<sp/>pTrack<sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">),<sp/>++nn)<sp/>{</highlight></codeline>
<codeline lineno="3866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>==<sp/>pFindTrack<sp/>||</highlight></codeline>
<codeline lineno="3867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack<sp/>==<sp/>partner)</highlight></codeline>
<codeline lineno="3868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nn;</highlight></codeline>
<codeline lineno="3869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="3871"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3872"><highlight class="normal"></highlight></codeline>
<codeline lineno="3873"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*FindClipAtTime(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*pTrack,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepyportmidi_1_1midi_1ad2426758f88d23d7208984d5c99ec050" kindref="member">time</ref>)</highlight></codeline>
<codeline lineno="3874"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack)<sp/>{</highlight></codeline>
<codeline lineno="3876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>WaveClip::GetClipAtX<sp/>doesn&apos;t<sp/>work<sp/>unless<sp/>the<sp/>clip<sp/>is<sp/>on<sp/>the<sp/>screen<sp/>and<sp/>can<sp/>return<sp/>bad<sp/>info<sp/>otherwise</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>instead<sp/>calculate<sp/>the<sp/>time<sp/>manually</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>pTrack-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="3879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/>s0<sp/>=<sp/>(<ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref>)(time<sp/>*<sp/>rate<sp/>+<sp/>0.5);</highlight></codeline>
<codeline lineno="3880"><highlight class="normal"></highlight></codeline>
<codeline lineno="3881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s0<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="3882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pTrack-&gt;<ref refid="class_wave_track_1aa57f503b09b51617bc6b1fd27ac54421" kindref="member">GetClipAtSample</ref>(s0);</highlight></codeline>
<codeline lineno="3883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3884"><highlight class="normal"></highlight></codeline>
<codeline lineno="3885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="3886"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3887"><highlight class="normal">}</highlight></codeline>
<codeline lineno="3888"><highlight class="normal"></highlight></codeline>
<codeline lineno="3890" refid="class_track_panel_1af4fa94589c343988e22bad24c7f05ed8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1af4fa94589c343988e22bad24c7f05ed8" kindref="member">TrackPanel::StartSlide</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="3891"><highlight class="normal">{</highlight></codeline>
<codeline lineno="3892"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="3893"><highlight class="normal"></highlight></codeline>
<codeline lineno="3894"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="3895"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab732e997531f9dbf44e50e8f97eda6ee" kindref="member">mDidSlideVertically</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3896"><highlight class="normal"></highlight></codeline>
<codeline lineno="3897"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a04816694a363342378cae5293114b5d2" kindref="member">mTrackExclusions</ref>.Clear();</highlight></codeline>
<codeline lineno="3898"><highlight class="normal"></highlight></codeline>
<codeline lineno="3899"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*vt<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="3900"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!vt)</highlight></codeline>
<codeline lineno="3901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3902"><highlight class="normal"></highlight></codeline>
<codeline lineno="3903"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_tools_tool_bar" kindref="compound">ToolsToolBar</ref><sp/>*<sp/>ttb<sp/>=<sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1acf3d6b30e8eefb02d6524223a1e70545" kindref="member">TP_GetToolsToolBar</ref>();</highlight></codeline>
<codeline lineno="3904"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>multiToolModeActive<sp/>=<sp/>(ttb<sp/>&amp;&amp;<sp/>ttb-&gt;<ref refid="class_tools_tool_bar_1a2d8c3ea8e829b4e8af34a848dcab38ae" kindref="member">IsDown</ref>(<ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac010717a868fce968a7046a9db152b55" kindref="member">multiTool</ref>));</highlight></codeline>
<codeline lineno="3905"><highlight class="normal"></highlight></codeline>
<codeline lineno="3906"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>clickTime<sp/>=</highlight></codeline>
<codeline lineno="3907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="3908"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a14d1fdd24fac6a8e5bc3e741d3fb72ce" kindref="member">mCapturedClipIsSelection</ref><sp/>=</highlight></codeline>
<codeline lineno="3909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(vt-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clickTime<sp/>&gt;<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="3911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clickTime<sp/>&lt;<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>());</highlight></codeline>
<codeline lineno="3912"><highlight class="normal"></highlight></codeline>
<codeline lineno="3913"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((vt-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref></highlight></codeline>
<codeline lineno="3914"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>vt-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note</highlight></codeline>
<codeline lineno="3916"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>&amp;&amp;<sp/>!event.ShiftDown())</highlight></codeline>
<codeline lineno="3918"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3919"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(vt-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3921"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*<sp/>wt<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)vt;</highlight></codeline>
<codeline lineno="3923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref><sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a6f2397064c743a2265ecbc4c9e35fea7" kindref="member">GetClipAtX</ref>(event.m_x);</highlight></codeline>
<codeline lineno="3924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="3925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="3926"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="3930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3931"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>captured<sp/>clip<sp/>is<sp/>the<sp/>focus,<sp/>but<sp/>we<sp/>need<sp/>to<sp/>create<sp/>a<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>all<sp/>clips<sp/>that<sp/>have<sp/>to<sp/>move,<sp/>also...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3934"><highlight class="normal"></highlight></codeline>
<codeline lineno="3935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.Clear();</highlight></codeline>
<codeline lineno="3936"><highlight class="normal"></highlight></codeline>
<codeline lineno="3937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>First,<sp/>if<sp/>click<sp/>was<sp/>in<sp/>selection,<sp/>capture<sp/>selected<sp/>clips;<sp/>otherwise</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>just<sp/>the<sp/>clicked-on<sp/>clip</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a14d1fdd24fac6a8e5bc3e741d3fb72ce" kindref="member">mCapturedClipIsSelection</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="3941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="3942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetSelected())<sp/>{</highlight></codeline>
<codeline lineno="3943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" kindref="member">AddClipsToCaptured</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="3944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetKind()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="3945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a04816694a363342378cae5293114b5d2" kindref="member">mTrackExclusions</ref>.Add(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="3946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="3950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.Add(<ref refid="class_track_clip" kindref="compound">TrackClip</ref>(vt,<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>));</highlight></codeline>
<codeline lineno="3951"><highlight class="normal"></highlight></codeline>
<codeline lineno="3952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>for<sp/>stereo<sp/>partner</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*partner<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(vt);</highlight></codeline>
<codeline lineno="3954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref><sp/>&amp;&amp;<sp/>partner<sp/>&amp;&amp;<sp/>partner-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>clip<sp/>=</highlight></codeline>
<codeline lineno="3956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FindClipAtTime(static_cast&lt;WaveTrack*&gt;(partner),</highlight></codeline>
<codeline lineno="3957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()));</highlight></codeline>
<codeline lineno="3958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clip)</highlight></codeline>
<codeline lineno="3959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.Add(<ref refid="class_track_clip" kindref="compound">TrackClip</ref>(partner,<sp/>clip));</highlight></codeline>
<codeline lineno="3960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3962"><highlight class="normal"></highlight></codeline>
<codeline lineno="3963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now,<sp/>if<sp/>sync-lock<sp/>is<sp/>enabled,<sp/>capture<sp/>any<sp/>clip<sp/>that&apos;s<sp/>linked<sp/>to<sp/>a</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>captured<sp/>clip.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;IsSyncLocked())<sp/>{</highlight></codeline>
<codeline lineno="3966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AWD:<sp/>mCapturedClipArray<sp/>expands<sp/>as<sp/>the<sp/>loop<sp/>runs,<sp/>so<sp/>newly-added</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>clips<sp/>are<sp/>considered<sp/>(the<sp/>effect<sp/>is<sp/>like<sp/>recursion<sp/>and<sp/>terminates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>because<sp/>AddClipsToCaptured<sp/>doesn&apos;t<sp/>add<sp/>duplicate<sp/>clips);<sp/>to<sp/>remove</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>behavior<sp/>just<sp/>store<sp/>the<sp/>array<sp/>size<sp/>beforehand.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>0;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline lineno="3971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Capture<sp/>based<sp/>on<sp/>tracks<sp/>that<sp/>have<sp/>clips<sp/>--<sp/>that<sp/>means<sp/>we</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>capture<sp/>based<sp/>on<sp/>links<sp/>to<sp/>label<sp/>tracks<sp/>for<sp/>now<sp/>(until</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>can<sp/>treat<sp/>individual<sp/>labels<sp/>as<sp/>clips)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].clip)<sp/>{</highlight></codeline>
<codeline lineno="3975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Iterate<sp/>over<sp/>sync-lock<sp/>group<sp/>tracks.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_sync_locked_tracks_iterator" kindref="compound">SyncLockedTracksIterator</ref><sp/>git(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="3977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>git.<ref refid="class_sync_locked_tracks_iterator_1aa53e5be7c38eca13ad9030c8e497164c" kindref="member">StartWith</ref>(<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].track);</highlight></codeline>
<codeline lineno="3978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>git.<ref refid="class_sync_locked_tracks_iterator_1a09ddbd2c99421aa60ec63c1ec0ce3f51" kindref="member">Next</ref>()<sp/>)</highlight></codeline>
<codeline lineno="3979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" kindref="member">AddClipsToCaptured</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,</highlight></codeline>
<codeline lineno="3981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[i].clip-&gt;GetStartTime(),</highlight></codeline>
<codeline lineno="3982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].clip-&gt;GetEndTime()<sp/>);</highlight></codeline>
<codeline lineno="3983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetKind()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="3984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a04816694a363342378cae5293114b5d2" kindref="member">mTrackExclusions</ref>.Add(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="3985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3987"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Capture<sp/>additional<sp/>clips<sp/>from<sp/>NoteTracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*nt<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].track;</highlight></codeline>
<codeline lineno="3990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nt-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note)<sp/>{</highlight></codeline>
<codeline lineno="3991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Iterate<sp/>over<sp/>sync-lock<sp/>group<sp/>tracks.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_sync_locked_tracks_iterator" kindref="compound">SyncLockedTracksIterator</ref><sp/>git(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="3993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>git.<ref refid="class_sync_locked_tracks_iterator_1aa53e5be7c38eca13ad9030c8e497164c" kindref="member">StartWith</ref>(nt);<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>git.<ref refid="class_sync_locked_tracks_iterator_1a09ddbd2c99421aa60ec63c1ec0ce3f51" kindref="member">Next</ref>())</highlight></codeline>
<codeline lineno="3994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="3995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" kindref="member">AddClipsToCaptured</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>nt-&gt;<ref refid="class_track_1a764ce3c8ef7dd892b8cf64022a946cd5" kindref="member">GetStartTime</ref>(),<sp/>nt-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>());</highlight></codeline>
<codeline lineno="3996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetKind()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="3997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a04816694a363342378cae5293114b5d2" kindref="member">mTrackExclusions</ref>.Add(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="3998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="3999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4000"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4003"><highlight class="normal"></highlight></codeline>
<codeline lineno="4004"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.Clear();</highlight></codeline>
<codeline lineno="4007"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4008"><highlight class="normal"></highlight></codeline>
<codeline lineno="4009"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a02afbbe38ff6d95074c04ec433a31262" kindref="member">mSlideUpDownOnly</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.CmdDown()<sp/>&amp;&amp;<sp/>!multiToolModeActive;</highlight></codeline>
<codeline lineno="4010"><highlight class="normal"></highlight></codeline>
<codeline lineno="4011"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/>vt;</highlight></codeline>
<codeline lineno="4012"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="4013"><highlight class="normal"></highlight></codeline>
<codeline lineno="4014"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad1b0688c67fc8193b1424ebf050ca138" kindref="member">mMouseClickX</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="4015"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a18c3e3324891b40b39724a2d010a4331" kindref="member">mMouseClickY</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="4016"><highlight class="normal"></highlight></codeline>
<codeline lineno="4017"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ace0a09f928fd1f5a8c3d742df9b3592d" kindref="member">mSelStartValid</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4018"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>rect.x);</highlight></codeline>
<codeline lineno="4019"><highlight class="normal"></highlight></codeline>
<codeline lineno="4020"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>)</highlight></codeline>
<codeline lineno="4021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>;</highlight></codeline>
<codeline lineno="4022"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_snap_manager" kindref="compound">SnapManager</ref>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,</highlight></codeline>
<codeline lineno="4023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,</highlight></codeline>
<codeline lineno="4024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>,</highlight></codeline>
<codeline lineno="4025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;<ref refid="class_track_panel_1a04816694a363342378cae5293114b5d2" kindref="member">mTrackExclusions</ref>,</highlight></codeline>
<codeline lineno="4026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);<sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>snap<sp/>to<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4027"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="4028"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="4029"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a38bacce5d4afbdf8fd05ec65cdd3b0d3" kindref="member">mSnapPreferRightEdge</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4030"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fabs(<ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>-<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>-&gt;<ref refid="class_wave_clip_1a7c878143bdd7641be183325944d02f39" kindref="member">GetEndTime</ref>())<sp/>&lt;</highlight></codeline>
<codeline lineno="4032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fabs(<ref refid="class_track_panel_1a0d47f68da414e772c1074543a35fe759" kindref="member">mSelStart</ref><sp/>-<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>-&gt;<ref refid="class_wave_clip_1a839a293df9246f7a9bb6fcf4d8be7b40" kindref="member">GetStartTime</ref>()))</highlight></codeline>
<codeline lineno="4033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a38bacce5d4afbdf8fd05ec65cdd3b0d3" kindref="member">mSnapPreferRightEdge</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4034"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4035"><highlight class="normal"></highlight></codeline>
<codeline lineno="4036"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad69d99a254d131489723ad0ec04810a0" kindref="member">IsSliding</ref>;</highlight></codeline>
<codeline lineno="4037"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4038"><highlight class="normal"></highlight></codeline>
<codeline lineno="4039"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Helper<sp/>for<sp/>the<sp/>above,<sp/>adds<sp/>a<sp/>track&apos;s<sp/>clips<sp/>to<sp/>mCapturedClipArray<sp/>(eliminates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4040"><highlight class="normal"></highlight><highlight class="comment">//<sp/>duplication<sp/>of<sp/>this<sp/>logic)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4041" refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" kindref="member">TrackPanel::AddClipsToCaptured</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>withinSelection)</highlight></codeline>
<codeline lineno="4042"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4043"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(withinSelection)</highlight></codeline>
<codeline lineno="4044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" kindref="member">AddClipsToCaptured</ref>(t,<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>(),</highlight></codeline>
<codeline lineno="4045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>());</highlight></codeline>
<codeline lineno="4046"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" kindref="member">AddClipsToCaptured</ref>(t,<sp/>t-&gt;<ref refid="class_track_1a764ce3c8ef7dd892b8cf64022a946cd5" kindref="member">GetStartTime</ref>(),<sp/>t-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>());</highlight></codeline>
<codeline lineno="4048"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4049"><highlight class="normal"></highlight></codeline>
<codeline lineno="4050"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Adds<sp/>a<sp/>track&apos;s<sp/>clips<sp/>to<sp/>mCapturedClipArray<sp/>within<sp/>a<sp/>specified<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4051" refid="class_track_panel_1a305b45ca9779e60f07349b83db5fa5c8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa50f5d930f529eb7666784ed2327ad96" kindref="member">TrackPanel::AddClipsToCaptured</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t0,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t1)</highlight></codeline>
<codeline lineno="4052"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4053"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="4054"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>WaveClipList::compatibility_iterator<sp/><ref refid="conv2dtest_8m_1a4b223b47b1bd746a69ed8ac37c4b16db" kindref="member">it</ref><sp/>=</highlight></codeline>
<codeline lineno="4056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)t)-&gt;GetClipIterator();</highlight></codeline>
<codeline lineno="4057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(it)</highlight></codeline>
<codeline lineno="4058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*clip<sp/>=<sp/>it-&gt;GetData();</highlight></codeline>
<codeline lineno="4060"><highlight class="normal"></highlight></codeline>
<codeline lineno="4061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>!<sp/>clip-&gt;<ref refid="class_wave_clip_1a75a19f4c77475b0926936fd1932f5911" kindref="member">AfterClip</ref>(t0)<sp/>&amp;&amp;<sp/>!<sp/>clip-&gt;<ref refid="class_wave_clip_1a52706d68f2addb697e9a4fb4d3c14220" kindref="member">BeforeClip</ref>(t1)<sp/>)</highlight></codeline>
<codeline lineno="4062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Avoid<sp/>getting<sp/>clips<sp/>that<sp/>were<sp/>already<sp/>captured</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>newClip<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>0;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].clip<sp/>==<sp/>clip)<sp/>{</highlight></codeline>
<codeline lineno="4067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newClip<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4071"><highlight class="normal"></highlight></codeline>
<codeline lineno="4072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newClip)</highlight></codeline>
<codeline lineno="4073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.Add(<ref refid="class_track_clip" kindref="compound">TrackClip</ref>(t,<sp/>clip));</highlight></codeline>
<codeline lineno="4074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>it<sp/>=<sp/>it-&gt;GetNext();</highlight></codeline>
<codeline lineno="4076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4077"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4078"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4079"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>handles<sp/>label<sp/>tracks<sp/>rather<sp/>heavy-handedly<sp/>--<sp/>it<sp/>would<sp/>be<sp/>nice<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>treat<sp/>individual<sp/>labels<sp/>like<sp/>clips</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4082"><highlight class="normal"></highlight></codeline>
<codeline lineno="4083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Avoid<sp/>adding<sp/>a<sp/>track<sp/>twice</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>newClip<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>0;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].track<sp/>==<sp/>t)<sp/>{</highlight></codeline>
<codeline lineno="4087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newClip<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4091"><highlight class="normal"></highlight></codeline>
<codeline lineno="4092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newClip)<sp/>{</highlight></codeline>
<codeline lineno="4093"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>do<sp/>not<sp/>add<sp/>NoteTrack<sp/>if<sp/>the<sp/>data<sp/>is<sp/>outside<sp/>of<sp/>time<sp/>bounds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note)<sp/>{</highlight></codeline>
<codeline lineno="4096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>()<sp/>&lt;<sp/>t0<sp/>||<sp/>t-&gt;<ref refid="class_track_1a764ce3c8ef7dd892b8cf64022a946cd5" kindref="member">GetStartTime</ref>()<sp/>&gt;<sp/>t1)</highlight></codeline>
<codeline lineno="4097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4099"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.Add(<ref refid="class_track_clip" kindref="compound">TrackClip</ref>(t,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>));</highlight></codeline>
<codeline lineno="4101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4102"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4103"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4104"><highlight class="normal"></highlight></codeline>
<codeline lineno="4107"><highlight class="normal"></highlight></codeline>
<codeline lineno="4108"><highlight class="normal"></highlight><highlight class="comment">//<sp/>GM:<sp/>DoSlide<sp/>now<sp/>implementing<sp/>snap-to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4109"><highlight class="normal"></highlight><highlight class="comment">//<sp/>samples<sp/>functionality<sp/>based<sp/>on<sp/>sample<sp/>rate.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4110" refid="class_track_panel_1a3cae193e3956f928b5efc04dde37d508" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a3cae193e3956f928b5efc04dde37d508" kindref="member">TrackPanel::DoSlide</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="4111"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4112"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="4113"><highlight class="normal"></highlight></codeline>
<codeline lineno="4114"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>find<sp/>which<sp/>track<sp/>the<sp/>mouse<sp/>is<sp/>currently<sp/>in<sp/>(mouseTrack)<sp/>-</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4115"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>may<sp/>not<sp/>be<sp/>the<sp/>same<sp/>as<sp/>the<sp/>one<sp/>we<sp/>started<sp/>in...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4116"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*mouseTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4117"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mouseTrack<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Allow<sp/>sliding<sp/>if<sp/>the<sp/>pointer<sp/>is<sp/>not<sp/>over<sp/>any<sp/>track,<sp/>but<sp/>only<sp/>if<sp/>x<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>within<sp/>the<sp/>bounds<sp/>of<sp/>the<sp/>tracks<sp/>area.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width;</highlight></codeline>
<codeline lineno="4121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(&amp;width,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_x<sp/>&gt;=<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()<sp/>&amp;&amp;<sp/>event.m_x<sp/>&lt;<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()<sp/>+<sp/>width)</highlight></codeline>
<codeline lineno="4123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mouseTrack<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="4124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4126"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4127"><highlight class="normal"></highlight></codeline>
<codeline lineno="4128"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>by<sp/>undoing<sp/>the<sp/>current<sp/>slide<sp/>amount;<sp/>everything</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4129"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>happens<sp/>relative<sp/>to<sp/>the<sp/>original<sp/>horizontal<sp/>position<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4130"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>each<sp/>clip...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4131"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4132"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size())</highlight></codeline>
<codeline lineno="4133"><highlight class="normal">#</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4134"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>)</highlight></codeline>
<codeline lineno="4135"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4136"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;<sp/>i&lt;<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="4138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[i].clip)</highlight></codeline>
<codeline lineno="4139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].clip-&gt;Offset(-<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].track-&gt;Offset(-<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4143"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4144"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a0c71dd844bec490b9a291af9ec2bc127" kindref="member">Offset</ref>(-<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref>*<sp/>link<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="4147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link)</highlight></codeline>
<codeline lineno="4148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link-&gt;<ref refid="class_track_1a0c71dd844bec490b9a291af9ec2bc127" kindref="member">Offset</ref>(-<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4149"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4150"><highlight class="normal"></highlight></codeline>
<codeline lineno="4151"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a14d1fdd24fac6a8e5bc3e741d3fb72ce" kindref="member">mCapturedClipIsSelection</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Slide<sp/>the<sp/>selection,<sp/>too</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aee27874f44f87a0772adae7a966a09b9" kindref="member">move</ref>(-<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4154"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4155"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="4156"><highlight class="normal"></highlight></codeline>
<codeline lineno="4157"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Implement<sp/>sliding<sp/>within<sp/>the<sp/>track(s)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4158"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4159"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a02afbbe38ff6d95074c04ec433a31262" kindref="member">mSlideUpDownOnly</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>desiredSlideAmount<sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="4161"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4162"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>desiredSlideAmount<sp/>=</highlight></codeline>
<codeline lineno="4164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x)<sp/>-</highlight></codeline>
<codeline lineno="4165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(<ref refid="class_track_panel_1ad1b0688c67fc8193b1424ebf050ca138" kindref="member">mMouseClickX</ref>);</highlight></codeline>
<codeline lineno="4166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>trySnap<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>clipLeft<sp/>=<sp/>0,<sp/>clipRight<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4168"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mouseTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*mtw<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)mouseTrack;</highlight></codeline>
<codeline lineno="4171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>desiredSlideAmount<sp/>=<sp/>rint(mtw-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>()<sp/>*<sp/>desiredSlideAmount)<sp/>/</highlight></codeline>
<codeline lineno="4172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mtw-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();<sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>it<sp/>to<sp/>a<sp/>sample<sp/>point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Adjust<sp/>desiredSlideAmount<sp/>using<sp/>SnapManager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size())<sp/>{</highlight></codeline>
<codeline lineno="4176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trySnap<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clipLeft<sp/>=<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>-&gt;<ref refid="class_wave_clip_1a839a293df9246f7a9bb6fcf4d8be7b40" kindref="member">GetStartTime</ref>()<sp/>+<sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clipRight<sp/>=<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>-&gt;<ref refid="class_wave_clip_1a7c878143bdd7641be183325944d02f39" kindref="member">GetEndTime</ref>()<sp/>+<sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clipLeft<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a764ce3c8ef7dd892b8cf64022a946cd5" kindref="member">GetStartTime</ref>()<sp/>+<sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clipRight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a94b9fd13ee5b04493ed1024715e9c62b" kindref="member">GetEndTime</ref>()<sp/>+<sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4186"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trySnap<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>desiredSlideAmount<sp/>=<sp/>rint(mouseTrack-&gt;GetRate()<sp/>*<sp/>desiredSlideAmount)<sp/>/</highlight></codeline>
<codeline lineno="4190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mouseTrack-&gt;GetRate();<sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>it<sp/>to<sp/>a<sp/>sample<sp/>point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clipLeft<sp/>=<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>-&gt;<ref refid="class_wave_clip_1a839a293df9246f7a9bb6fcf4d8be7b40" kindref="member">GetStartTime</ref>()<sp/>+<sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clipRight<sp/>=<sp/><ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>-&gt;<ref refid="class_wave_clip_1a7c878143bdd7641be183325944d02f39" kindref="member">GetEndTime</ref>()<sp/>+<sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4196"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trySnap)<sp/>{</highlight></codeline>
<codeline lineno="4198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>newClipLeft<sp/>=<sp/>clipLeft;</highlight></codeline>
<codeline lineno="4199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>newClipRight<sp/>=<sp/>clipRight;</highlight></codeline>
<codeline lineno="4200"><highlight class="normal"></highlight></codeline>
<codeline lineno="4201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>dummy1,<sp/>dummy2;</highlight></codeline>
<codeline lineno="4202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>-&gt;<ref refid="class_snap_manager_1af00969f70773cf5d532c670916e85269" kindref="member">Snap</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/>clipLeft,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;newClipLeft,</highlight></codeline>
<codeline lineno="4203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;dummy1,<sp/>&amp;dummy2);</highlight></codeline>
<codeline lineno="4204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref>-&gt;<ref refid="class_snap_manager_1af00969f70773cf5d532c670916e85269" kindref="member">Snap</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/>clipRight,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;newClipRight,</highlight></codeline>
<codeline lineno="4205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;dummy1,<sp/>&amp;dummy2);</highlight></codeline>
<codeline lineno="4206"><highlight class="normal"></highlight></codeline>
<codeline lineno="4207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>one<sp/>of<sp/>them<sp/>is<sp/>allowed<sp/>to<sp/>snap</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newClipLeft<sp/>!=<sp/>clipLeft<sp/>&amp;&amp;<sp/>newClipRight<sp/>!=<sp/>clipRight)<sp/>{</highlight></codeline>
<codeline lineno="4209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a38bacce5d4afbdf8fd05ec65cdd3b0d3" kindref="member">mSnapPreferRightEdge</ref>)</highlight></codeline>
<codeline lineno="4210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newClipLeft<sp/>=<sp/>clipLeft;</highlight></codeline>
<codeline lineno="4211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newClipRight<sp/>=<sp/>clipRight;</highlight></codeline>
<codeline lineno="4213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4214"><highlight class="normal"></highlight></codeline>
<codeline lineno="4215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Take<sp/>whichever<sp/>one<sp/>snapped<sp/>(if<sp/>any)<sp/>and<sp/>compute<sp/>the<sp/>NEW<sp/>desiredSlideAmount</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="4217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="4218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newClipLeft<sp/>!=<sp/>clipLeft)<sp/>{</highlight></codeline>
<codeline lineno="4219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>difference<sp/>=<sp/>(newClipLeft<sp/>-<sp/>clipLeft);</highlight></codeline>
<codeline lineno="4220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>desiredSlideAmount<sp/>+=<sp/>difference;</highlight></codeline>
<codeline lineno="4221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(newClipLeft,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="4222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newClipRight<sp/>!=<sp/>clipRight)<sp/>{</highlight></codeline>
<codeline lineno="4224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>difference<sp/>=<sp/>(newClipRight<sp/>-<sp/>clipRight);</highlight></codeline>
<codeline lineno="4225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>desiredSlideAmount<sp/>+=<sp/>difference;</highlight></codeline>
<codeline lineno="4226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(newClipRight,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="4227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4229"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4230"><highlight class="normal"></highlight></codeline>
<codeline lineno="4231"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Scroll<sp/>during<sp/>vertical<sp/>drag.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4232"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>EnsureVisible(mouseTrack);<sp/>//vvv<sp/>Gale<sp/>says<sp/>this<sp/>has<sp/>problems<sp/>on<sp/>Linux,<sp/>per<sp/>bug<sp/>393<sp/>thread.<sp/>Revert<sp/>for<sp/>2.0.2.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4233"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>slidVertically<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4234"><highlight class="normal"></highlight></codeline>
<codeline lineno="4235"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>the<sp/>mouse<sp/>is<sp/>over<sp/>a<sp/>track<sp/>that<sp/>isn&apos;t<sp/>the<sp/>captured<sp/>track,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4236"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>decide<sp/>which<sp/>tracks<sp/>the<sp/>captured<sp/>clips<sp/>should<sp/>go<sp/>to.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4237"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref><sp/>&amp;&amp;<sp/>mouseTrack<sp/>!=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/></highlight><highlight class="comment">/*&amp;&amp;</highlight></codeline>
<codeline lineno="4238"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!mCapturedClipIsSelection*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="4239"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>diff<sp/>=</highlight></codeline>
<codeline lineno="4241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TrackPosition(*<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,<sp/>mouseTrack)<sp/>-</highlight></codeline>
<codeline lineno="4242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TrackPosition(*<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="4243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0,<sp/>nn<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>ii<sp/>&lt;<sp/>nn;<sp/>++ii)<sp/>{</highlight></codeline>
<codeline lineno="4244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_clip" kindref="compound">TrackClip</ref><sp/>&amp;trackClip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[ii];</highlight></codeline>
<codeline lineno="4245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trackClip.<ref refid="class_track_clip_1aa182c2e271beb63aac6cd8c63cd0f3b5" kindref="member">clip</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Move<sp/>all<sp/>clips<sp/>up<sp/>or<sp/>down<sp/>by<sp/>an<sp/>equal<sp/>count<sp/>of<sp/>audio<sp/>tracks.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>pSrcTrack<sp/>=<sp/>trackClip.<ref refid="class_track_clip_1a3539d37f715d74f8400bbede3be13c6a" kindref="member">track</ref>;</highlight></codeline>
<codeline lineno="4248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pDstTrack<sp/>=<sp/>NthAudioTrack(*<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,</highlight></codeline>
<codeline lineno="4249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>diff<sp/>+<sp/>TrackPosition(*<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,<sp/>pSrcTrack));</highlight></codeline>
<codeline lineno="4250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Can<sp/>only<sp/>move<sp/>mono<sp/>to<sp/>mono,<sp/>or<sp/>left<sp/>to<sp/>left,<sp/>or<sp/>right<sp/>to<sp/>right</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>And<sp/>that<sp/>must<sp/>be<sp/>so<sp/>for<sp/>each<sp/>captured<sp/>clip</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>stereo<sp/>=<sp/>(pSrcTrack-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()<sp/>!=<sp/>0);</highlight></codeline>
<codeline lineno="4253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pDstTrack<sp/>&amp;&amp;<sp/>stereo<sp/>&amp;&amp;<sp/>!pSrcTrack-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())</highlight></codeline>
<codeline lineno="4254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pDstTrack<sp/>=<sp/>pDstTrack-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="4255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ok<sp/>=<sp/>pDstTrack<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="4256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(stereo<sp/>==<sp/>(pDstTrack-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()<sp/>!=<sp/>0))<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="4257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(!stereo<sp/>||<sp/>(pSrcTrack-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()<sp/>==<sp/>pDstTrack-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()));</highlight></codeline>
<codeline lineno="4258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ok)</highlight></codeline>
<codeline lineno="4259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackClip.<ref refid="class_track_clip_1a0039c193ffc00858abbe6a34eb77eb5f" kindref="member">dstTrack</ref><sp/>=<sp/>pDstTrack;</highlight></codeline>
<codeline lineno="4260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4264"><highlight class="normal"></highlight></codeline>
<codeline lineno="4265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Having<sp/>passed<sp/>that<sp/>test,<sp/>remove<sp/>clips<sp/>temporarily<sp/>from<sp/>their</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>tracks,<sp/>so<sp/>moving<sp/>clips<sp/>don&apos;t<sp/>interfere<sp/>with<sp/>each<sp/>other</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>when<sp/>we<sp/>call<sp/>CanInsertClip()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0,<sp/>nn<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>ii<sp/>&lt;<sp/>nn;<sp/><sp/>++ii)<sp/>{</highlight></codeline>
<codeline lineno="4269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_clip" kindref="compound">TrackClip</ref><sp/>&amp;trackClip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[ii];</highlight></codeline>
<codeline lineno="4270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>pSrcClip<sp/>=<sp/>trackClip.<ref refid="class_track_clip_1aa182c2e271beb63aac6cd8c63cd0f3b5" kindref="member">clip</ref>;</highlight></codeline>
<codeline lineno="4271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSrcClip)</highlight></codeline>
<codeline lineno="4272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(trackClip.<ref refid="class_track_clip_1a3539d37f715d74f8400bbede3be13c6a" kindref="member">track</ref>)-&gt;MoveClipToTrack(pSrcClip,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4274"><highlight class="normal"></highlight></codeline>
<codeline lineno="4275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>check<sp/>that<sp/>the<sp/>move<sp/>is<sp/>possible</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ok<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0,<sp/>nn<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>ok<sp/>&amp;&amp;<sp/>ii<sp/>&lt;<sp/>nn;<sp/>++ii)<sp/>{</highlight></codeline>
<codeline lineno="4278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_clip" kindref="compound">TrackClip</ref><sp/>&amp;trackClip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[ii];</highlight></codeline>
<codeline lineno="4279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>pSrcClip<sp/>=<sp/>trackClip.<ref refid="class_track_clip_1aa182c2e271beb63aac6cd8c63cd0f3b5" kindref="member">clip</ref>;</highlight></codeline>
<codeline lineno="4280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSrcClip)</highlight></codeline>
<codeline lineno="4281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ok<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(trackClip.<ref refid="class_track_clip_1a0039c193ffc00858abbe6a34eb77eb5f" kindref="member">dstTrack</ref>)-&gt;CanInsertClip(pSrcClip);</highlight></codeline>
<codeline lineno="4282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="4284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ok)<sp/>{</highlight></codeline>
<codeline lineno="4285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Failure<sp/>--<sp/>put<sp/>clips<sp/>back<sp/>where<sp/>they<sp/>were</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0,<sp/>nn<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>ii<sp/>&lt;<sp/>nn;<sp/><sp/>++ii)<sp/>{</highlight></codeline>
<codeline lineno="4287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_clip" kindref="compound">TrackClip</ref><sp/>&amp;trackClip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[ii];</highlight></codeline>
<codeline lineno="4288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>pSrcClip<sp/>=<sp/>trackClip.<ref refid="class_track_clip_1aa182c2e271beb63aac6cd8c63cd0f3b5" kindref="member">clip</ref>;</highlight></codeline>
<codeline lineno="4289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSrcClip)<sp/>{</highlight></codeline>
<codeline lineno="4290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(trackClip.<ref refid="class_track_clip_1a3539d37f715d74f8400bbede3be13c6a" kindref="member">track</ref>)-&gt;AddClip(pSrcClip);</highlight></codeline>
<codeline lineno="4291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Do<sp/>the<sp/>vertical<sp/>moves<sp/>of<sp/>clips</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0,<sp/>nn<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>ii<sp/>&lt;<sp/>nn;<sp/>++ii)<sp/>{</highlight></codeline>
<codeline lineno="4298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_clip" kindref="compound">TrackClip</ref><sp/>&amp;trackClip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[ii];</highlight></codeline>
<codeline lineno="4299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>pSrcClip<sp/>=<sp/>trackClip.<ref refid="class_track_clip_1aa182c2e271beb63aac6cd8c63cd0f3b5" kindref="member">clip</ref>;</highlight></codeline>
<codeline lineno="4300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pSrcClip)<sp/>{</highlight></codeline>
<codeline lineno="4301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>dstTrack<sp/>=<sp/>trackClip.<ref refid="class_track_clip_1a0039c193ffc00858abbe6a34eb77eb5f" kindref="member">dstTrack</ref>;</highlight></codeline>
<codeline lineno="4302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(dstTrack)-&gt;AddClip(pSrcClip);</highlight></codeline>
<codeline lineno="4303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackClip.<ref refid="class_track_clip_1a3539d37f715d74f8400bbede3be13c6a" kindref="member">track</ref><sp/>=<sp/>dstTrack;</highlight></codeline>
<codeline lineno="4304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4306"><highlight class="normal"></highlight></codeline>
<codeline lineno="4307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/>mouseTrack;</highlight></codeline>
<codeline lineno="4308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab732e997531f9dbf44e50e8f97eda6ee" kindref="member">mDidSlideVertically</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4309"><highlight class="normal"></highlight></codeline>
<codeline lineno="4310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>the<sp/>offset<sp/>permanent;<sp/>start<sp/>from<sp/>a<sp/>&quot;clean<sp/>slate&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad1b0688c67fc8193b1424ebf050ca138" kindref="member">mMouseClickX</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="4312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4313"><highlight class="normal"></highlight></codeline>
<codeline lineno="4314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>done<sp/>yet,<sp/>check<sp/>for<sp/>horizontal<sp/>movement.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>slidVertically<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4316"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4317"><highlight class="normal"></highlight></codeline>
<codeline lineno="4318"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(desiredSlideAmount<sp/>==<sp/>0.0)<sp/>{</highlight></codeline>
<codeline lineno="4319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4321"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4322"><highlight class="normal"></highlight></codeline>
<codeline lineno="4323"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>=<sp/>desiredSlideAmount;</highlight></codeline>
<codeline lineno="4324"><highlight class="normal"></highlight></codeline>
<codeline lineno="4325"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4326"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size())</highlight></codeline>
<codeline lineno="4327"><highlight class="normal">#</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4328"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0c786efdea5ce22b4cba0cd0d5616e19" kindref="member">mCapturedClip</ref>)</highlight></codeline>
<codeline lineno="4329"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4330"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>allowed;</highlight></codeline>
<codeline lineno="4332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>initialAllowed;</highlight></codeline>
<codeline lineno="4333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>safeBigDistance<sp/>=<sp/>1000<sp/>+<sp/>2.0<sp/>*<sp/>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a363c0208ea73546e90ca49887cefc5a8" kindref="member">GetEndTime</ref>()<sp/>-</highlight></codeline>
<codeline lineno="4334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af5e21bb6b08a8ccc2e14e1aec3ad80e2" kindref="member">GetStartTime</ref>());</highlight></codeline>
<codeline lineno="4335"><highlight class="normal"></highlight></codeline>
<codeline lineno="4336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">//<sp/>loop<sp/>to<sp/>compute<sp/>allowed,<sp/>does<sp/>not<sp/>actually<sp/>move<sp/>anything<sp/>yet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initialAllowed<sp/>=<sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>;</highlight></codeline>
<codeline lineno="4338"><highlight class="normal"></highlight></codeline>
<codeline lineno="4339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<sp/>j;</highlight></codeline>
<codeline lineno="4340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;<sp/>i&lt;<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="4341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*track<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[i].track;</highlight></codeline>
<codeline lineno="4342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*clip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].clip;</highlight></codeline>
<codeline lineno="4343"><highlight class="normal"></highlight></codeline>
<codeline lineno="4344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clip)<sp/>{<sp/></highlight><highlight class="comment">//<sp/>only<sp/>audio<sp/>clips<sp/>are<sp/>used<sp/>to<sp/>compute<sp/>allowed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Move<sp/>all<sp/>other<sp/>selected<sp/>clips<sp/>totally<sp/>out<sp/>of<sp/>the<sp/>way</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>temporarily<sp/>because<sp/>they&apos;re<sp/>all<sp/>moving<sp/>together<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>want<sp/>to<sp/>find<sp/>out<sp/>if<sp/>OTHER<sp/>clips<sp/>are<sp/>in<sp/>the<sp/>way,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>not<sp/>one<sp/>of<sp/>the<sp/>moving<sp/>ones</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=0;<sp/>j&lt;<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>j++)<sp/>{</highlight></codeline>
<codeline lineno="4350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*clip2<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[j].clip;</highlight></codeline>
<codeline lineno="4351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clip2<sp/>&amp;&amp;<sp/>clip2<sp/>!=<sp/>clip)</highlight></codeline>
<codeline lineno="4352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clip2-&gt;<ref refid="class_wave_clip_1a02ede29411c67eb9bc3193e6f1f453eb" kindref="member">Offset</ref>(-safeBigDistance);</highlight></codeline>
<codeline lineno="4353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4354"><highlight class="normal"></highlight></codeline>
<codeline lineno="4355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(track-&gt;<ref refid="class_wave_track_1aa3263588cf2b126720215ee551df12d2" kindref="member">CanOffsetClip</ref>(clip,<sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>,<sp/>&amp;allowed))<sp/>{</highlight></codeline>
<codeline lineno="4356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>!=<sp/>allowed)<sp/>{</highlight></codeline>
<codeline lineno="4357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>=<sp/>allowed;</highlight></codeline>
<codeline lineno="4358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;<sp/></highlight><highlight class="comment">//<sp/>see<sp/>bug<sp/>1067</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="4363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>=<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>=<sp/>-1;<sp/></highlight><highlight class="comment">//<sp/>see<sp/>bug<sp/>1067</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4365"><highlight class="normal"></highlight></codeline>
<codeline lineno="4366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=0;<sp/>j&lt;<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>j++)<sp/>{</highlight></codeline>
<codeline lineno="4367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*clip2<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[j].clip;</highlight></codeline>
<codeline lineno="4368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clip2<sp/>&amp;&amp;<sp/>clip2<sp/>!=<sp/>clip)</highlight></codeline>
<codeline lineno="4369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clip2-&gt;<ref refid="class_wave_clip_1a02ede29411c67eb9bc3193e6f1f453eb" kindref="member">Offset</ref>(safeBigDistance);</highlight></codeline>
<codeline lineno="4370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>!=<sp/>initialAllowed);</highlight></codeline>
<codeline lineno="4374"><highlight class="normal"></highlight></codeline>
<codeline lineno="4375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>!=<sp/>0.0)<sp/>{<sp/></highlight><highlight class="comment">//<sp/>finally,<sp/>here<sp/>is<sp/>where<sp/>clips<sp/>are<sp/>moved</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="4377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;<sp/>i&lt;<ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>.size();<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="4378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*track<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].track;</highlight></codeline>
<codeline lineno="4379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_clip" kindref="compound">WaveClip</ref><sp/>*clip<sp/>=<sp/><ref refid="class_track_panel_1ad37e89caa368c3907a8d4dab00e4e34a" kindref="member">mCapturedClipArray</ref>[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].clip;</highlight></codeline>
<codeline lineno="4380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clip)</highlight></codeline>
<codeline lineno="4381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clip-&gt;<ref refid="class_wave_clip_1a02ede29411c67eb9bc3193e6f1f453eb" kindref="member">Offset</ref>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>track-&gt;<ref refid="class_track_1a0c71dd844bec490b9a291af9ec2bc127" kindref="member">Offset</ref>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4386"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4387"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>Shift<sp/>key<sp/>down,<sp/>or</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>non<sp/>wavetracks,<sp/>specifically<sp/>label<sp/>tracks<sp/>...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a0c71dd844bec490b9a291af9ec2bc127" kindref="member">Offset</ref>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref>*<sp/>link<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="4392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link)</highlight></codeline>
<codeline lineno="4393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link-&gt;<ref refid="class_track_1a0c71dd844bec490b9a291af9ec2bc127" kindref="member">Offset</ref>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4394"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4395"><highlight class="normal"></highlight></codeline>
<codeline lineno="4396"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a14d1fdd24fac6a8e5bc3e741d3fb72ce" kindref="member">mCapturedClipIsSelection</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Slide<sp/>the<sp/>selection,<sp/>too</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aee27874f44f87a0772adae7a966a09b9" kindref="member">move</ref>(<ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref>);</highlight></codeline>
<codeline lineno="4399"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4400"><highlight class="normal"></highlight></codeline>
<codeline lineno="4401"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(slidVertically)<sp/>{</highlight></codeline>
<codeline lineno="4402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>NEW<sp/>origin</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a120c208ec3fc115a2ce631120f2398b1" kindref="member">mHSlideAmount</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4404"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4405"><highlight class="normal"></highlight></codeline>
<codeline lineno="4406"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4407"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4408"><highlight class="normal"></highlight></codeline>
<codeline lineno="4409"><highlight class="normal"></highlight></codeline>
<codeline lineno="4420" refid="class_track_panel_1aa37492e65fcad57608da9b0d3d84c19b" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa37492e65fcad57608da9b0d3d84c19b" kindref="member">TrackPanel::HandleZoom</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="4421"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4422"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonDown()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.LeftDClick())<sp/>{</highlight></codeline>
<codeline lineno="4423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2debe4005f486ca0f9d4ef785dcc8daf" kindref="member">HandleZoomClick</ref>(event);</highlight></codeline>
<codeline lineno="4424"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4425"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f346151e922233e8a785750e14199e" kindref="member">IsZooming</ref>)<sp/>{</highlight></codeline>
<codeline lineno="4426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="4427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a77d487d05df28488a84e67f88318fc5a" kindref="member">HandleZoomDrag</ref>(event);</highlight></codeline>
<codeline lineno="4428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonUp())<sp/>{</highlight></codeline>
<codeline lineno="4430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1a1924b2e5577eb5889c9f8169b2115a" kindref="member">HandleZoomButtonUp</ref>(event);</highlight></codeline>
<codeline lineno="4431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4432"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4433"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4434"><highlight class="normal"></highlight></codeline>
<codeline lineno="4436" refid="class_track_panel_1a2debe4005f486ca0f9d4ef785dcc8daf" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a2debe4005f486ca0f9d4ef785dcc8daf" kindref="member">TrackPanel::HandleZoomClick</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="4437"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4438"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="4439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4440"><highlight class="normal"></highlight></codeline>
<codeline lineno="4441"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;<ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>);</highlight></codeline>
<codeline lineno="4443"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="4444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4445"><highlight class="normal"></highlight></codeline>
<codeline lineno="4446"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f346151e922233e8a785750e14199e" kindref="member">IsZooming</ref>);</highlight></codeline>
<codeline lineno="4447"><highlight class="normal"></highlight></codeline>
<codeline lineno="4448"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="4449"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="4450"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4451"><highlight class="normal"></highlight></codeline>
<codeline lineno="4453" refid="class_track_panel_1a77d487d05df28488a84e67f88318fc5a" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a77d487d05df28488a84e67f88318fc5a" kindref="member">TrackPanel::HandleZoomDrag</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="4454"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4455"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>left<sp/>=<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>();</highlight></codeline>
<codeline lineno="4456"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>right<sp/>=<sp/>GetSize().x<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" kindref="member">kRightMargin</ref><sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="4457"><highlight class="normal"></highlight></codeline>
<codeline lineno="4458"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="4459"><highlight class="normal"></highlight></codeline>
<codeline lineno="4460"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_x<sp/>&lt;<sp/>left)<sp/>{</highlight></codeline>
<codeline lineno="4461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/>left;</highlight></codeline>
<codeline lineno="4462"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4463"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_x<sp/>&gt;<sp/>right)<sp/>{</highlight></codeline>
<codeline lineno="4464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/>right;</highlight></codeline>
<codeline lineno="4465"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4466"><highlight class="normal"></highlight></codeline>
<codeline lineno="4467"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a31af7885bade5968669ad90c848b5909" kindref="member">IsDragZooming</ref>())<sp/>{</highlight></codeline>
<codeline lineno="4468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4469"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4470"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4471"><highlight class="normal"></highlight></codeline>
<codeline lineno="4473" refid="class_track_panel_1a1a1924b2e5577eb5889c9f8169b2115a" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a1a1924b2e5577eb5889c9f8169b2115a" kindref="member">TrackPanel::HandleZoomButtonUp</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="4474"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4475"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>&lt;<sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>)</highlight></codeline>
<codeline lineno="4476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::swap(<ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>,<sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>);</highlight></codeline>
<codeline lineno="4477"><highlight class="normal"></highlight></codeline>
<codeline lineno="4478"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a31af7885bade5968669ad90c848b5909" kindref="member">IsDragZooming</ref>())</highlight></codeline>
<codeline lineno="4479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a33b48bb03223b65631a1082756b7a029" kindref="member">DragZoom</ref>(event,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="4480"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a81709530372aa825194618eca5e6b6c2" kindref="member">DoZoomInOut</ref>(event,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="4482"><highlight class="normal"></highlight></codeline>
<codeline lineno="4483"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4484"><highlight class="normal"></highlight></codeline>
<codeline lineno="4485"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4486"><highlight class="normal"></highlight></codeline>
<codeline lineno="4487"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="4488"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4489"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4490"><highlight class="normal"></highlight></codeline>
<codeline lineno="4492" refid="class_track_panel_1a2fd64dc9fb162d0ec44b10e05f5e562b" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a31af7885bade5968669ad90c848b5909" kindref="member">TrackPanel::IsDragZooming</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>zoomStart,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>zoomEnd)</highlight></codeline>
<codeline lineno="4493"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4494"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(abs(zoomEnd<sp/>-<sp/>zoomStart)<sp/>&gt;<sp/><ref refid="_track_panel_8h_1a91866175d6748a726ed32ed695b3af25" kindref="member">DragThreshold</ref>);</highlight></codeline>
<codeline lineno="4495"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4496"><highlight class="normal"></highlight></codeline>
<codeline lineno="4498" refid="class_track_panel_1a203a9ed7a4dfdc58ee55285085ac8f2d" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a203a9ed7a4dfdc58ee55285085ac8f2d" kindref="member">TrackPanel::IsMouseCaptured</ref>()</highlight></codeline>
<codeline lineno="4499"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4500"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>!=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref><sp/>||<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4501"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4502"><highlight class="normal"></highlight></codeline>
<codeline lineno="4503"><highlight class="normal"></highlight></codeline>
<codeline lineno="4506" refid="class_track_panel_1a33b48bb03223b65631a1082756b7a029" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a33b48bb03223b65631a1082756b7a029" kindref="member">TrackPanel::DragZoom</ref>(wxMouseEvent<sp/>&amp;<sp/>event,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackLeftEdge)</highlight></codeline>
<codeline lineno="4507"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4508"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>left<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(<ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="4509"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>right<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(<ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="4510"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>multiplier<sp/>=<sp/>(<ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>)<sp/>/<sp/>(right<sp/>-<sp/>left);</highlight></codeline>
<codeline lineno="4511"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ShiftDown())</highlight></codeline>
<codeline lineno="4512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>multiplier<sp/>=<sp/>1.0<sp/>/<sp/>multiplier;</highlight></codeline>
<codeline lineno="4513"><highlight class="normal"></highlight></codeline>
<codeline lineno="4514"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae3d12affa4d45347738614b5f51f5937" kindref="member">ZoomBy</ref>(multiplier);</highlight></codeline>
<codeline lineno="4515"><highlight class="normal"></highlight></codeline>
<codeline lineno="4516"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>=<sp/>left;</highlight></codeline>
<codeline lineno="4517"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4518"><highlight class="normal"></highlight></codeline>
<codeline lineno="4522" refid="class_track_panel_1a81709530372aa825194618eca5e6b6c2" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a81709530372aa825194618eca5e6b6c2" kindref="member">TrackPanel::DoZoomInOut</ref>(wxMouseEvent<sp/>&amp;<sp/>event,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackLeftEdge)</highlight></codeline>
<codeline lineno="4523"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4524"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>center_h<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="4525"><highlight class="normal"></highlight></codeline>
<codeline lineno="4526"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>multiplier<sp/>=</highlight></codeline>
<codeline lineno="4527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">event</highlight><highlight class="normal">.RightUp()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.RightDClick()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.ShiftDown())</highlight></codeline>
<codeline lineno="4528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>0.5<sp/>:<sp/>2.0;</highlight></codeline>
<codeline lineno="4529"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae3d12affa4d45347738614b5f51f5937" kindref="member">ZoomBy</ref>(multiplier);</highlight></codeline>
<codeline lineno="4530"><highlight class="normal"></highlight></codeline>
<codeline lineno="4531"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.MiddleUp()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.MiddleDClick())</highlight></codeline>
<codeline lineno="4532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ac2078ac51a3c9904d3ba445cd3ed35fa" kindref="member">SetZoom</ref>(<ref refid="class_zoom_info_1a4508413dd55cf328c8e772dc8d0964a1" kindref="member">ZoomInfo::GetDefaultZoom</ref>());<sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>Reset<sp/>zoom.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4533"><highlight class="normal"></highlight></codeline>
<codeline lineno="4534"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>new_center_h<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="4535"><highlight class="normal"></highlight></codeline>
<codeline lineno="4536"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>+=<sp/>(center_h<sp/>-<sp/>new_center_h);</highlight></codeline>
<codeline lineno="4537"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4538"><highlight class="normal"></highlight></codeline>
<codeline lineno="4541" refid="class_track_panel_1a4320ed3afd10c94dcd24d7b0b73f83be" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4320ed3afd10c94dcd24d7b0b73f83be" kindref="member">TrackPanel::HandleVZoom</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="4542"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4543"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonDown()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.ButtonDClick())<sp/>{</highlight></codeline>
<codeline lineno="4544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a889172a3ce408fc9c281d1cd6c9411a1" kindref="member">HandleVZoomClick</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="4545"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4546"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="4547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a18fe003fca9e947c606085f1d549f3c6" kindref="member">HandleVZoomDrag</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="4548"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4549"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonUp())<sp/>{</highlight></codeline>
<codeline lineno="4550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af7c6a5d774333b9f3df8ae3e5ac130f4" kindref="member">HandleVZoomButtonUp</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="4551"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4552"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//TODO-MB:<sp/>add<sp/>timetrack<sp/>zooming<sp/>here!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4553"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4554"><highlight class="normal"></highlight></codeline>
<codeline lineno="4556" refid="class_track_panel_1a889172a3ce408fc9c281d1cd6c9411a1" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a889172a3ce408fc9c281d1cd6c9411a1" kindref="member">TrackPanel::HandleVZoomClick</ref>(<sp/>wxMouseEvent<sp/>&amp;<sp/>event<sp/>)</highlight></codeline>
<codeline lineno="4557"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4558"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="4559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4560"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="4561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;<ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>);</highlight></codeline>
<codeline lineno="4562"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="4563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4564"><highlight class="normal"></highlight></codeline>
<codeline lineno="4565"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref></highlight></codeline>
<codeline lineno="4566"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note</highlight></codeline>
<codeline lineno="4568"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="4570"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba70d8f72bedc78a86e6068438f14f79a0" kindref="member">IsVZooming</ref>;</highlight></codeline>
<codeline lineno="4572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="4573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="4574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>change<sp/>note<sp/>track<sp/>to<sp/>zoom<sp/>like<sp/>audio<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(mCapturedTrack-&gt;GetKind()<sp/>==<sp/>Track::Note)<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((NoteTrack<sp/>*)<sp/>mCapturedTrack)-&gt;StartVScroll();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4580"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4581"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4582"><highlight class="normal"></highlight></codeline>
<codeline lineno="4584" refid="class_track_panel_1a18fe003fca9e947c606085f1d549f3c6" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a18fe003fca9e947c606085f1d549f3c6" kindref="member">TrackPanel::HandleVZoomDrag</ref>(<sp/>wxMouseEvent<sp/>&amp;<sp/>event<sp/>)</highlight></codeline>
<codeline lineno="4585"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4586"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="4587"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a31af7885bade5968669ad90c848b5909" kindref="member">IsDragZooming</ref>()){</highlight></codeline>
<codeline lineno="4588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>changed<sp/>Note<sp/>track<sp/>to<sp/>work<sp/>like<sp/>audio<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(mCapturedTrack<sp/>&amp;&amp;<sp/>mCapturedTrack-&gt;GetKind()<sp/>==<sp/>Track::Note)<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((NoteTrack<sp/>*)<sp/>mCapturedTrack)-&gt;VScroll(mZoomStart,<sp/>mZoomEnd);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4595"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4596"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4597"><highlight class="normal"></highlight></codeline>
<codeline lineno="4603" refid="class_track_panel_1af7c6a5d774333b9f3df8ae3e5ac130f4" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1af7c6a5d774333b9f3df8ae3e5ac130f4" kindref="member">TrackPanel::HandleVZoomButtonUp</ref>(<sp/>wxMouseEvent<sp/>&amp;<sp/>event<sp/>)</highlight></codeline>
<codeline lineno="4604"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4605"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)</highlight></codeline>
<codeline lineno="4606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4607"><highlight class="normal"></highlight></codeline>
<codeline lineno="4608"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>;</highlight></codeline>
<codeline lineno="4609"><highlight class="normal"></highlight></codeline>
<codeline lineno="4610"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4611"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>handle<sp/>vertical<sp/>scrolling<sp/>in<sp/>Note<sp/>Track.<sp/>This<sp/>is<sp/>so<sp/>different<sp/>from</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4612"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>zooming<sp/>in<sp/>audio<sp/>tracks<sp/>that<sp/>it<sp/>is<sp/>handled<sp/>as<sp/>a<sp/>special<sp/>case<sp/>from</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4613"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>which<sp/>we<sp/>then<sp/>return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4614"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note)<sp/>{</highlight></codeline>
<codeline lineno="4615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*nt<sp/>=<sp/>(<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="4616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a31af7885bade5968669ad90c848b5909" kindref="member">IsDragZooming</ref>())<sp/>{</highlight></codeline>
<codeline lineno="4617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nt-&gt;ZoomTo(<ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>,<sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>);</highlight></codeline>
<codeline lineno="4618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ShiftDown()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.RightUp())<sp/>{</highlight></codeline>
<codeline lineno="4619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nt-&gt;ZoomOut(<ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>);</highlight></codeline>
<codeline lineno="4620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nt-&gt;ZoomIn(<ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>);</highlight></codeline>
<codeline lineno="4622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4628"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4629"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4630"><highlight class="normal"></highlight></codeline>
<codeline lineno="4631"><highlight class="normal"></highlight></codeline>
<codeline lineno="4632"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>do<sp/>anything<sp/>if<sp/>track<sp/>is<sp/>not<sp/>wave</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4633"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="4634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4635"><highlight class="normal"></highlight></codeline>
<codeline lineno="4636"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="4637"><highlight class="comment"><sp/><sp/><sp/>if<sp/>(event.RightUp()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="4638"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!(event.ShiftDown()<sp/>||<sp/>event.CmdDown()))<sp/>{</highlight></codeline>
<codeline lineno="4639"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>OnVRulerMenu(mCapturedTrack,<sp/>&amp;event);</highlight></codeline>
<codeline lineno="4640"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>return;</highlight></codeline>
<codeline lineno="4641"><highlight class="comment"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4642"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4643"><highlight class="normal"></highlight></codeline>
<codeline lineno="4644"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">HandleWaveTrackVZoom</ref>(static_cast&lt;WaveTrack*&gt;(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>),</highlight></codeline>
<codeline lineno="4645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>event.ShiftDown(),<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.RightUp());</highlight></codeline>
<codeline lineno="4646"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4647"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4648"><highlight class="normal"></highlight></codeline>
<codeline lineno="4649" refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">TrackPanel::HandleWaveTrackVZoom</ref>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*track,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>shiftDown,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>rightUp)</highlight></codeline>
<codeline lineno="4650"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4651"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">HandleWaveTrackVZoom</ref>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>,<sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>,<sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>,</highlight></codeline>
<codeline lineno="4652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>track,<sp/>shiftDown,<sp/>rightUp,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4653"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4654"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(track);</highlight></codeline>
<codeline lineno="4655"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4656"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="4657"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4658"><highlight class="normal"></highlight></codeline>
<codeline lineno="4659"><highlight class="normal"></highlight><highlight class="comment">//static</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4660"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">TrackPanel::HandleWaveTrackVZoom</ref></highlight></codeline>
<codeline lineno="4661" refid="class_track_panel_1a7feaaf7ca9539aed78d76cc560dc1e7c" refkind="member"><highlight class="normal">(<ref refid="class_track_list" kindref="compound">TrackList</ref><sp/>*tracks,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;rect,</highlight></codeline>
<codeline lineno="4662"><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>zoomStart,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>zoomEnd,</highlight></codeline>
<codeline lineno="4663"><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*track,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>shiftDown,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>rightUp,</highlight></codeline>
<codeline lineno="4664"><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>fixedMousePoint)</highlight></codeline>
<codeline lineno="4665"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4666"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>partner<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(tracks-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(track));</highlight></codeline>
<codeline lineno="4667"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>height<sp/>=<sp/>track-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="4668"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ypos<sp/>=<sp/>rect.y<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796acb6c4347365946fb1f9c06a761c7637d" kindref="member">kBorderThickness</ref>;</highlight></codeline>
<codeline lineno="4669"><highlight class="normal"></highlight></codeline>
<codeline lineno="4670"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Ensure<sp/>start<sp/>and<sp/>end<sp/>are<sp/>in<sp/>order<sp/>(swap<sp/>if<sp/>not).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4671"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(zoomEnd<sp/>&lt;<sp/>zoomStart)</highlight></codeline>
<codeline lineno="4672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::swap(zoomStart,<sp/>zoomEnd);</highlight></codeline>
<codeline lineno="4673"><highlight class="normal"></highlight></codeline>
<codeline lineno="4674"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>,<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>,<sp/>minBand<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4675"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>track-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="4676"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>halfrate<sp/>=<sp/>rate<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="4677"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_spectrogram_settings" kindref="compound">SpectrogramSettings</ref><sp/>&amp;settings<sp/>=<sp/>track-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>();</highlight></codeline>
<codeline lineno="4678"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_number_scale" kindref="compound">NumberScale</ref><sp/><ref refid="seqread_8c_1aa2a8c6fbe5ed24f9523eb4e01368e4bc" kindref="member">scale</ref>;</highlight></codeline>
<codeline lineno="4679"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>spectral<sp/>=<sp/>(track-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>()<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5ac0941a4c239c9e4a1d487f31786fbbc9" kindref="member">WaveTrack::Spectrum</ref>);</highlight></codeline>
<codeline lineno="4680"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>spectrumLinear<sp/>=<sp/>spectral<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="4681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(track-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>().<ref refid="class_spectrogram_settings_1a8c6871ffc9d2f3f645e9d14c24920e04" kindref="member">scaleType</ref><sp/>==<sp/><ref refid="class_spectrogram_settings_1ad80cc088bcf7afb4176fd7195d4691fca409b06214bb9e020d4252d6981947acf" kindref="member">SpectrogramSettings::stLinear</ref>);</highlight></codeline>
<codeline lineno="4682"><highlight class="normal"></highlight></codeline>
<codeline lineno="4683"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(spectral)<sp/>{</highlight></codeline>
<codeline lineno="4684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>track-&gt;<ref refid="class_wave_track_1a6c31cef06f382857502ce036b2dc795b" kindref="member">GetSpectrumBounds</ref>(&amp;min,<sp/>&amp;max);</highlight></codeline>
<codeline lineno="4685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>scale<sp/>=<sp/>(settings.<ref refid="class_spectrogram_settings_1aa0c8fbbe53db1ede59a834438a3ee375" kindref="member">GetScale</ref>(min,<sp/>max,<sp/>rate,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>fftLength<sp/>=<sp/>settings.<ref refid="class_spectrogram_settings_1a35321029bb4e809eedb8721db80c448e" kindref="member">GetFFTLength</ref>();</highlight></codeline>
<codeline lineno="4687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>binSize<sp/>=<sp/>rate<sp/>/<sp/>fftLength;</highlight></codeline>
<codeline lineno="4688"><highlight class="normal"></highlight></codeline>
<codeline lineno="4689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JKC:<sp/><sp/>Following<sp/>discussions<sp/>of<sp/>Bug<sp/>1208<sp/>I&apos;m<sp/>allowing<sp/>zooming<sp/>in<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>down<sp/>to<sp/>one<sp/>bin.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4691"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>const<sp/>int<sp/>minBins<sp/>=</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4692"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::min(10,<sp/>fftLength<sp/>/<sp/>2);<sp/>//minimum<sp/>10<sp/>freq<sp/>bins,<sp/>unless<sp/>there<sp/>are<sp/>less</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>minBins<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="4694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>minBand<sp/>=<sp/>minBins<sp/>*<sp/>binSize;</highlight></codeline>
<codeline lineno="4695"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4696"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>track-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;min,<sp/>&amp;max);</highlight></codeline>
<codeline lineno="4698"><highlight class="normal"></highlight></codeline>
<codeline lineno="4699"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a31af7885bade5968669ad90c848b5909" kindref="member">IsDragZooming</ref>(zoomStart,<sp/>zoomEnd))<sp/>{</highlight></codeline>
<codeline lineno="4700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Drag<sp/>Zoom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>tmin<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>,<sp/>tmax<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>;</highlight></codeline>
<codeline lineno="4702"><highlight class="normal"></highlight></codeline>
<codeline lineno="4703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(spectral)<sp/>{</highlight></codeline>
<codeline lineno="4704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="xlftab_8c_1ad6baced6c7338d266c50d863c4cf25c2" kindref="member">xmin</ref><sp/>=<sp/>1<sp/>-<sp/>(zoomEnd<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="xlftab_8c_1aadf9ecb45d2990cd32bf88edabe7cc37" kindref="member">xmax</ref><sp/>=<sp/>1<sp/>-<sp/>(zoomStart<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>middle<sp/>=<sp/>(xmin<sp/>+<sp/><ref refid="xlftab_8c_1aadf9ecb45d2990cd32bf88edabe7cc37" kindref="member">xmax</ref>)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="4707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>middleValue<sp/>=<sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(middle);</highlight></codeline>
<codeline lineno="4708"><highlight class="normal"></highlight></codeline>
<codeline lineno="4709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(spectrumLinear<sp/>?<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>:<sp/>1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>,</highlight></codeline>
<codeline lineno="4710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(middleValue<sp/>-<sp/>minBand<sp/>/<sp/>2,</highlight></codeline>
<codeline lineno="4711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(xmin)</highlight></codeline>
<codeline lineno="4712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>));</highlight></codeline>
<codeline lineno="4713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(halfrate,</highlight></codeline>
<codeline lineno="4714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(middleValue<sp/>+<sp/>minBand<sp/>/<sp/>2,</highlight></codeline>
<codeline lineno="4715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(xmax)</highlight></codeline>
<codeline lineno="4716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>));</highlight></codeline>
<codeline lineno="4717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref><sp/>=<sp/>(zoomStart<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="sound_8c_1a938e6a2861f684cc1f7e2de661446e35" kindref="member">p2</ref><sp/>=<sp/>(zoomEnd<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>(tmax<sp/>*<sp/>(1.0-<ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref>)<sp/>+<sp/>tmin<sp/>*<sp/>p1);</highlight></codeline>
<codeline lineno="4722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>(tmax<sp/>*<sp/>(1.0-<ref refid="sound_8c_1a938e6a2861f684cc1f7e2de661446e35" kindref="member">p2</ref>)<sp/>+<sp/>tmin<sp/>*<sp/>p2);</highlight></codeline>
<codeline lineno="4723"><highlight class="normal"></highlight></codeline>
<codeline lineno="4724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Waveform<sp/>view<sp/>-<sp/>allow<sp/>zooming<sp/>down<sp/>to<sp/>a<sp/>range<sp/>of<sp/>ZOOMLIMIT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(max<sp/>-<sp/>min<sp/>&lt;<sp/><ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>)<sp/>{<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>user<sp/>attempts<sp/>to<sp/>go<sp/>smaller...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref><sp/>=<sp/>(min+<ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>)/2;<sp/><sp/></highlight><highlight class="comment">//<sp/>...set<sp/>centre<sp/>of<sp/>view<sp/>to<sp/>centre<sp/>of<sp/>dragged<sp/>area<sp/>and<sp/>top/bottom<sp/>to<sp/>ZOOMLIMIT/2<sp/>above/below</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>c<sp/>-<sp/><ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>/2.0;</highlight></codeline>
<codeline lineno="4728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>c<sp/>+<sp/><ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>/2.0;</highlight></codeline>
<codeline lineno="4729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4731"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4732"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(shiftDown<sp/>||<sp/>rightUp)<sp/>{</highlight></codeline>
<codeline lineno="4733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(spectral)<sp/>{</highlight></codeline>
<codeline lineno="4735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(shiftDown<sp/>&amp;&amp;<sp/>rightUp)<sp/>{</highlight></codeline>
<codeline lineno="4736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>out<sp/>full</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>spectrumLinear<sp/>?<sp/>0.0f<sp/>:<sp/>1.0f;</highlight></codeline>
<codeline lineno="4738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>halfrate;</highlight></codeline>
<codeline lineno="4739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>out</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4742"><highlight class="normal"></highlight></codeline>
<codeline lineno="4743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref><sp/>=<sp/>(zoomStart<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(Used<sp/>to<sp/>zoom<sp/>out<sp/>centered<sp/>at<sp/>midline,<sp/>ignoring<sp/>the<sp/>click,<sp/>if<sp/>linear<sp/>view.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>I<sp/>think<sp/>it<sp/>is<sp/>better<sp/>to<sp/>be<sp/>consistent.<sp/><sp/>PRL)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Center<sp/>zoom-out<sp/>at<sp/>the<sp/>midline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>middle<sp/>=<sp/></highlight><highlight class="comment">//<sp/>spectrumLinear<sp/>?<sp/>0.5f<sp/>:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0f<sp/>-<sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref>;</highlight></codeline>
<codeline lineno="4749"><highlight class="normal"></highlight></codeline>
<codeline lineno="4750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fixedMousePoint)<sp/>{</highlight></codeline>
<codeline lineno="4751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(spectrumLinear<sp/>?<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>:<sp/>1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>,<sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(-middle));</highlight></codeline>
<codeline lineno="4752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(halfrate,<sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(1.0f<sp/>+<sp/>p1));</highlight></codeline>
<codeline lineno="4753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(spectrumLinear<sp/>?<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>:<sp/>1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>,<sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(middle<sp/>-<sp/>1.0f));</highlight></codeline>
<codeline lineno="4756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(halfrate,<sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(middle<sp/>+<sp/>1.0f));</highlight></codeline>
<codeline lineno="4757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>out<sp/>to<sp/>-1.0...1.0<sp/>first,<sp/>then,<sp/>and<sp/>only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>then,<sp/>if<sp/>they<sp/>click<sp/>again,<sp/>allow<sp/>one<sp/>more</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>zoom<sp/>out.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(shiftDown<sp/>&amp;&amp;<sp/>rightUp)<sp/>{</highlight></codeline>
<codeline lineno="4765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>out<sp/>full</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="4767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="4768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>out</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_waveform_settings" kindref="compound">WaveformSettings</ref><sp/>&amp;settings<sp/>=<sp/>track-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>();</highlight></codeline>
<codeline lineno="4772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>linear<sp/>=<sp/>settings.<ref refid="class_waveform_settings_1ae4f07aa847f89f72a127ba5e357f1e78" kindref="member">isLinear</ref>();</highlight></codeline>
<codeline lineno="4773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>top<sp/>=<sp/>linear</highlight></codeline>
<codeline lineno="4774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>2.0</highlight></codeline>
<codeline lineno="4775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>(<ref refid="_audacity_8h_1a6dfdc8f6b4fa2e8f244f18cedb607b8e" kindref="member">LINEAR_TO_DB</ref>(2.0)<sp/>+<sp/>settings.<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>)<sp/>/<sp/>settings.<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>;</highlight></codeline>
<codeline lineno="4776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(min<sp/>&lt;=<sp/>-1.0<sp/>&amp;&amp;<sp/>max<sp/>&gt;=<sp/>1.0)<sp/>{</highlight></codeline>
<codeline lineno="4777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Go<sp/>to<sp/>the<sp/>maximal<sp/>zoom-out</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>-top;</highlight></codeline>
<codeline lineno="4779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>top;</highlight></codeline>
<codeline lineno="4780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>limit<sp/>to<sp/>+/-<sp/>1<sp/>range<sp/>unless<sp/>already<sp/>outside<sp/>that<sp/>range...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>minRange<sp/>=<sp/>(min<sp/>&lt;<sp/>-1)<sp/>?<sp/>-top<sp/>:<sp/>-1.0;</highlight></codeline>
<codeline lineno="4784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>maxRange<sp/>=<sp/>(max<sp/>&gt;<sp/>1)<sp/>?<sp/>top<sp/>:<sp/>1.0;</highlight></codeline>
<codeline lineno="4785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>enforce<sp/>vertical<sp/>zoom<sp/>limits.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref><sp/>=<sp/>(zoomStart<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fixedMousePoint)<sp/>{</highlight></codeline>
<codeline lineno="4788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>oldRange<sp/>=<sp/>max<sp/>-<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>;</highlight></codeline>
<codeline lineno="4789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref><sp/>=<sp/>(max<sp/>*<sp/>(1.0<sp/>-<sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref>)<sp/>+<sp/>min<sp/>*<sp/>p1);</highlight></codeline>
<codeline lineno="4790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxRange<sp/>-<sp/><ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>,</highlight></codeline>
<codeline lineno="4791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(minRange,<sp/>c<sp/>-<sp/>2<sp/>*<sp/>(1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>-<sp/>p1)<sp/>*<sp/>oldRange));</highlight></codeline>
<codeline lineno="4792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(minRange<sp/>+<sp/><ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>,</highlight></codeline>
<codeline lineno="4793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxRange,<sp/>c<sp/>+<sp/>2<sp/>*<sp/>p1<sp/>*<sp/>oldRange));</highlight></codeline>
<codeline lineno="4794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref><sp/>=<sp/>p1<sp/>*<sp/>min<sp/>+<sp/>(1<sp/>-<sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref>)<sp/>*<sp/>max;</highlight></codeline>
<codeline lineno="4797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref><sp/>=<sp/>(max<sp/>-<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>);</highlight></codeline>
<codeline lineno="4798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxRange<sp/>-<sp/><ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>,</highlight></codeline>
<codeline lineno="4799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(minRange,<sp/>c<sp/>-<sp/>l));</highlight></codeline>
<codeline lineno="4800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(minRange<sp/>+<sp/><ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>,</highlight></codeline>
<codeline lineno="4801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(maxRange,<sp/>c<sp/>+<sp/>l));</highlight></codeline>
<codeline lineno="4802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4806"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4807"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>IN</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(spectral)<sp/>{</highlight></codeline>
<codeline lineno="4810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Center<sp/>the<sp/>zoom-in<sp/>at<sp/>the<sp/>click</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref><sp/>=<sp/>(zoomStart<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>middle<sp/>=<sp/>1.0f<sp/>-<sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref>;</highlight></codeline>
<codeline lineno="4813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>middleValue<sp/>=<sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(middle);</highlight></codeline>
<codeline lineno="4814"><highlight class="normal"></highlight></codeline>
<codeline lineno="4815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fixedMousePoint)<sp/>{</highlight></codeline>
<codeline lineno="4816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(spectrumLinear<sp/>?<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>:<sp/>1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>,</highlight></codeline>
<codeline lineno="4817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(middleValue<sp/>-<sp/>minBand<sp/>*<sp/>middle,</highlight></codeline>
<codeline lineno="4818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(0.5f<sp/>*<sp/>middle)</highlight></codeline>
<codeline lineno="4819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>));</highlight></codeline>
<codeline lineno="4820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(halfrate,</highlight></codeline>
<codeline lineno="4821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(middleValue<sp/>+<sp/>minBand<sp/>*<sp/>p1,</highlight></codeline>
<codeline lineno="4822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(middle<sp/>+<sp/>0.5f<sp/>*<sp/>p1)</highlight></codeline>
<codeline lineno="4823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>));</highlight></codeline>
<codeline lineno="4824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(spectrumLinear<sp/>?<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>:<sp/>1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>,</highlight></codeline>
<codeline lineno="4827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(middleValue<sp/>-<sp/>minBand<sp/>/<sp/>2,</highlight></codeline>
<codeline lineno="4828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(middle<sp/>-<sp/>0.25f)</highlight></codeline>
<codeline lineno="4829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>));</highlight></codeline>
<codeline lineno="4830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(halfrate,</highlight></codeline>
<codeline lineno="4831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(middleValue<sp/>+<sp/>minBand<sp/>/<sp/>2,</highlight></codeline>
<codeline lineno="4832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale.<ref refid="class_number_scale_1a6068a19297cb9faafc0141beb1ff9f7a" kindref="member">PositionToValue</ref>(middle<sp/>+<sp/>0.25f)</highlight></codeline>
<codeline lineno="4833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>));</highlight></codeline>
<codeline lineno="4834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>in<sp/>centered<sp/>on<sp/>cursor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(min<sp/>&lt;<sp/>-1.0<sp/>||<sp/>max<sp/>&gt;<sp/>1.0)<sp/>{</highlight></codeline>
<codeline lineno="4839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="4840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="4841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Enforce<sp/>maximum<sp/>vertical<sp/>zoom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>oldRange<sp/>=<sp/>max<sp/>-<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>;</highlight></codeline>
<codeline lineno="4845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref><sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(<ref refid="_track_panel_8cpp_1a0535b2c11fb2d31bddd10dd8f33ed2e8" kindref="member">ZOOMLIMIT</ref>,<sp/>0.5<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>*<sp/>oldRange);</highlight></codeline>
<codeline lineno="4846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ratio<sp/>=<sp/>l<sp/>/<sp/>(max<sp/>-<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>);</highlight></codeline>
<codeline lineno="4847"><highlight class="normal"></highlight></codeline>
<codeline lineno="4848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref><sp/>=<sp/>(zoomStart<sp/>-<sp/>ypos)<sp/>/<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)height;</highlight></codeline>
<codeline lineno="4849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref><sp/>=<sp/>(max<sp/>*<sp/>(1.0<sp/>-<sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref>)<sp/>+<sp/>min<sp/>*<sp/>p1);</highlight></codeline>
<codeline lineno="4850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fixedMousePoint)</highlight></codeline>
<codeline lineno="4851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>c<sp/>-<sp/>ratio<sp/>*<sp/>(1.0f<sp/>-<sp/><ref refid="sound_8c_1ad86bc04f7f667b1bdced8a0f06d96861" kindref="member">p1</ref>)<sp/>*<sp/>oldRange,</highlight></codeline>
<codeline lineno="4852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>c<sp/>+<sp/>ratio<sp/>*<sp/>p1<sp/>*<sp/>oldRange;</highlight></codeline>
<codeline lineno="4853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/>c<sp/>-<sp/>0.5<sp/>*<sp/><ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>,</highlight></codeline>
<codeline lineno="4855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/>c<sp/>+<sp/>0.5<sp/>*<sp/><ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>;</highlight></codeline>
<codeline lineno="4856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4858"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4859"><highlight class="normal"></highlight></codeline>
<codeline lineno="4860"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(spectral)<sp/>{</highlight></codeline>
<codeline lineno="4861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>track-&gt;<ref refid="class_wave_track_1adc327ebce52049287878201d876de903" kindref="member">SetSpectrumBounds</ref>(min,<sp/>max);</highlight></codeline>
<codeline lineno="4862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="4863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1adc327ebce52049287878201d876de903" kindref="member">SetSpectrumBounds</ref>(min,<sp/>max);</highlight></codeline>
<codeline lineno="4864"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4865"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="4866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>track-&gt;<ref refid="class_wave_track_1aaf6f597255538feaf1017d046993445c" kindref="member">SetDisplayBounds</ref>(min,<sp/>max);</highlight></codeline>
<codeline lineno="4867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="4868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1aaf6f597255538feaf1017d046993445c" kindref="member">SetDisplayBounds</ref>(min,<sp/>max);</highlight></codeline>
<codeline lineno="4869"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4870"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4871"><highlight class="normal"></highlight></codeline>
<codeline lineno="4872"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="4873"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Is<sp/>the<sp/>sample<sp/>horizontally<sp/>nearest<sp/>to<sp/>the<sp/>cursor<sp/>sufficiently<sp/>separated<sp/>from</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4874"><highlight class="normal"></highlight><highlight class="comment">//<sp/>its<sp/>neighbors<sp/>that<sp/>the<sp/>pencil<sp/>tool<sp/>should<sp/>be<sp/>allowed<sp/>to<sp/>drag<sp/>it?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4875"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>SampleResolutionTest(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_view_info" kindref="compound">ViewInfo</ref><sp/>&amp;viewInfo,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wt,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepyportmidi_1_1midi_1ad2426758f88d23d7208984d5c99ec050" kindref="member">time</ref>,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width)</highlight></codeline>
<codeline lineno="4876"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4877"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Require<sp/>more<sp/>than<sp/>3<sp/>pixels<sp/>per<sp/>sample</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4878"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Round<sp/>to<sp/>an<sp/>exact<sp/>sample<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4879"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>adjustedTime<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a16171cfb9bd446a6d16e0e5ac1695318" kindref="member">LongSamplesToTime</ref>(wt-&gt;<ref refid="class_wave_track_1afe621ba06a0396725da44e937143972f" kindref="member">TimeToLongSamples</ref>(time));</highlight></codeline>
<codeline lineno="4880"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxInt64<sp/>xx<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(wxInt64(0),<sp/>viewInfo.<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(adjustedTime));</highlight></codeline>
<codeline lineno="4881"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_zoom_info_1a68d0856b5e64abd74f91ebeedac395d3" kindref="member">ZoomInfo::Intervals</ref><sp/>intervals;</highlight></codeline>
<codeline lineno="4882"><highlight class="normal"><sp/><sp/><sp/>viewInfo.<ref refid="class_zoom_info_1aff75f3d72f5fef0e3472ac4c415e63f3" kindref="member">FindIntervals</ref>(rate,<sp/>intervals,<sp/>width);</highlight></codeline>
<codeline lineno="4883"><highlight class="normal"><sp/><sp/><sp/>ZoomInfo::Intervals::const_iterator<sp/><ref refid="conv2dtest_8m_1a4b223b47b1bd746a69ed8ac37c4b16db" kindref="member">it</ref><sp/>=<sp/>intervals.begin(),<sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref><sp/>=<sp/>intervals.end(),<sp/>prev;</highlight></codeline>
<codeline lineno="4884"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(it<sp/>!=<sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref><sp/>&amp;&amp;<sp/>it-&gt;position<sp/>==<sp/>0);</highlight></codeline>
<codeline lineno="4885"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>prev<sp/>=<sp/>it++;</highlight></codeline>
<codeline lineno="4887"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(it<sp/>!=<sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref><sp/>&amp;&amp;<sp/>it-&gt;position<sp/>&lt;=<sp/>xx);</highlight></codeline>
<codeline lineno="4888"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>threshold<sp/>=<sp/>3<sp/>*<sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>;<sp/></highlight><highlight class="comment">//<sp/>three<sp/>times<sp/>as<sp/>many<sp/>pixels<sp/>per<sp/>second,<sp/>as<sp/>samples</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4889"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>prev-&gt;averageZoom<sp/>&gt;<sp/>threshold;</highlight></codeline>
<codeline lineno="4890"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4891"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4892"><highlight class="normal"></highlight></codeline>
<codeline lineno="4896" refid="class_track_panel_1a753d2ad9b6127982eb4ff213410339ff" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a753d2ad9b6127982eb4ff213410339ff" kindref="member">TrackPanel::IsSampleEditingPossible</ref>(<sp/>wxMouseEvent<sp/>&amp;event,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>)</highlight></codeline>
<codeline lineno="4897"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4898"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Exit<sp/>if<sp/>we<sp/>don&apos;t<sp/>have<sp/>a<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4899"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!t)</highlight></codeline>
<codeline lineno="4900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4901"><highlight class="normal"></highlight></codeline>
<codeline lineno="4902"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Exit<sp/>if<sp/>it&apos;s<sp/>not<sp/>a<sp/>WaveTrack</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4903"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="4904"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4905"><highlight class="normal"></highlight></codeline>
<codeline lineno="4906"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>out<sp/>of<sp/>here<sp/>if<sp/>we<sp/>shouldn&apos;t<sp/>be<sp/>drawing<sp/>right<sp/>now:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4907"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>aren&apos;t<sp/>displaying<sp/>the<sp/>waveform,<sp/>Display<sp/>a<sp/>message<sp/>dialog</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4908"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="4909"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>display<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>();</highlight></codeline>
<codeline lineno="4910"><highlight class="normal"></highlight></codeline>
<codeline lineno="4911"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref><sp/>!=<sp/>display)</highlight></codeline>
<codeline lineno="4912"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxMessageBox(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;To<sp/>use<sp/>Draw,<sp/>choose<sp/>&apos;Waveform&apos;<sp/>in<sp/>the<sp/>Track<sp/>Drop-down<sp/>Menu.&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Draw<sp/>Tool&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4915"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4916"><highlight class="normal"></highlight></codeline>
<codeline lineno="4917"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>showPoints;</highlight></codeline>
<codeline lineno="4918"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="4920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="4921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="4922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="4923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepyportmidi_1_1midi_1ad2426758f88d23d7208984d5c99ec050" kindref="member">time</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>rect.x);</highlight></codeline>
<codeline lineno="4924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width;</highlight></codeline>
<codeline lineno="4925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(&amp;width,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="4926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>showPoints<sp/>=<sp/>SampleResolutionTest(*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,<sp/>wt,<sp/>time,<sp/>rate,<sp/>width);</highlight></codeline>
<codeline lineno="4927"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4928"><highlight class="normal"></highlight></codeline>
<codeline lineno="4929"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>aren&apos;t<sp/>zoomed<sp/>in<sp/>far<sp/>enough,<sp/>show<sp/>a<sp/>message<sp/>dialog.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4930"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!showPoints)</highlight></codeline>
<codeline lineno="4931"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxMessageBox(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;To<sp/>use<sp/>Draw,<sp/>zoom<sp/>in<sp/>further<sp/>until<sp/>you<sp/>can<sp/>see<sp/>the<sp/>individual<sp/>samples.&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Draw<sp/>Tool&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="4933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4934"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4935"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4936"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4937"><highlight class="normal"></highlight></codeline>
<codeline lineno="4938" refid="class_track_panel_1adbf8069d749a302945827bdbce80d566" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1adbf8069d749a302945827bdbce80d566" kindref="member">TrackPanel::FindSampleEditingLevel</ref>(wxMouseEvent<sp/>&amp;event,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>dBRange,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t0)</highlight></codeline>
<codeline lineno="4939"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4940"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>where<sp/>the<sp/>mouse<sp/>is<sp/>located<sp/>vertically<sp/>(between<sp/>+/-<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4941"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>zoomMin,<sp/>zoomMax;</highlight></codeline>
<codeline lineno="4942"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;zoomMin,<sp/>&amp;zoomMax);</highlight></codeline>
<codeline lineno="4943"><highlight class="normal"></highlight></codeline>
<codeline lineno="4944"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y<sp/>-<sp/><ref refid="class_track_panel_1af2d95ea945c2e60af2e7277a09dc5317" kindref="member">mDrawingTrackTop</ref>;</highlight></codeline>
<codeline lineno="4945"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>height<sp/>=<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="4946"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>dB<sp/>=<sp/>!<ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1ae4f07aa847f89f72a127ba5e357f1e78" kindref="member">isLinear</ref>();</highlight></codeline>
<codeline lineno="4947"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newLevel<sp/>=</highlight></codeline>
<codeline lineno="4948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_artist_8cpp_1ae9fe7afff0bfbea92663e8a2c0ecf0cb" kindref="member">::ValueOfPixel</ref>(y,<sp/>height,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>dB,<sp/>dBRange,<sp/>zoomMin,<sp/>zoomMax);</highlight></codeline>
<codeline lineno="4949"><highlight class="normal"></highlight></codeline>
<codeline lineno="4950"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Take<sp/>the<sp/>envelope<sp/>into<sp/>account</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4951"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_envelope" kindref="compound">Envelope</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>env<sp/>=<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1ab5377b2d185a54c4c8f5eb334f1c4285" kindref="member">GetEnvelopeAtX</ref>(event.m_x);</highlight></codeline>
<codeline lineno="4952"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(env)</highlight></codeline>
<codeline lineno="4953"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="4954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>envValue<sp/>=<sp/>env-&gt;<ref refid="class_envelope_1ac5729053c923e47b43f0f063845c2ce9" kindref="member">GetValue</ref>(t0);</highlight></codeline>
<codeline lineno="4955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(envValue<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="4956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newLevel<sp/>/=<sp/>envValue;</highlight></codeline>
<codeline lineno="4957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newLevel<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="4959"><highlight class="normal"></highlight></codeline>
<codeline lineno="4960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Make<sp/>sure<sp/>the<sp/>NEW<sp/>level<sp/>is<sp/>between<sp/>+/-1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newLevel<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(-1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>,<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>,<sp/>newLevel));</highlight></codeline>
<codeline lineno="4962"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="4963"><highlight class="normal"></highlight></codeline>
<codeline lineno="4964"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>newLevel;</highlight></codeline>
<codeline lineno="4965"><highlight class="normal">}</highlight></codeline>
<codeline lineno="4966"><highlight class="normal"></highlight></codeline>
<codeline lineno="4969" refid="class_track_panel_1a701733b821a60732c8c4d66676b8b5b1" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a701733b821a60732c8c4d66676b8b5b1" kindref="member">TrackPanel::HandleSampleEditingClick</ref>(<sp/>wxMouseEvent<sp/>&amp;<sp/>event<sp/>)</highlight></codeline>
<codeline lineno="4970"><highlight class="normal">{</highlight></codeline>
<codeline lineno="4971"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//declare<sp/>a<sp/>rectangle<sp/>to<sp/>determine<sp/>clicking<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4972"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="4973"><highlight class="normal"></highlight></codeline>
<codeline lineno="4974"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>the<sp/>track<sp/>the<sp/>mouse<sp/>is<sp/>over,<sp/>and<sp/>save<sp/>it<sp/>away<sp/>for<sp/>future<sp/>events</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4975"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="4976"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="4977"><highlight class="normal"></highlight></codeline>
<codeline lineno="4978"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t<sp/>||<sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>))</highlight></codeline>
<codeline lineno="4979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4980"><highlight class="normal"></highlight></codeline>
<codeline lineno="4981"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!<ref refid="class_track_panel_1a753d2ad9b6127982eb4ff213410339ff" kindref="member">IsSampleEditingPossible</ref>(<sp/>event,<sp/>t<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="4982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="4983"><highlight class="normal"></highlight></codeline>
<codeline lineno="4985"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref><sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="4986"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1af2d95ea945c2e60af2e7277a09dc5317" kindref="member">mDrawingTrackTop</ref>=rect.y<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>;</highlight></codeline>
<codeline lineno="4987"><highlight class="normal"></highlight></codeline>
<codeline lineno="4988"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>are<sp/>still<sp/>around,<sp/>we<sp/>are<sp/>drawing<sp/>in<sp/>earnest.<sp/><sp/>Set<sp/>some<sp/>member<sp/>data<sp/>structures<sp/>up:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4989"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//First,<sp/>calculate<sp/>the<sp/>starting<sp/>sample.<sp/><sp/>To<sp/>get<sp/>this,<sp/>we<sp/>need<sp/>the<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4990"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="4991"><highlight class="normal"></highlight></codeline>
<codeline lineno="4992"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//convert<sp/>t0<sp/>to<sp/>samples</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4993"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1afbfde4aa5fba18839a21de39a75856bb" kindref="member">mDrawingStartSample</ref><sp/>=<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1afe621ba06a0396725da44e937143972f" kindref="member">TimeToLongSamples</ref>(t0);</highlight></codeline>
<codeline lineno="4994"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>quantize</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4995"><highlight class="normal"><sp/><sp/><sp/>t0<sp/>=<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1a16171cfb9bd446a6d16e0e5ac1695318" kindref="member">LongSamplesToTime</ref>(<ref refid="class_track_panel_1afbfde4aa5fba18839a21de39a75856bb" kindref="member">mDrawingStartSample</ref>);</highlight></codeline>
<codeline lineno="4996"><highlight class="normal"></highlight></codeline>
<codeline lineno="4997"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Determine<sp/>how<sp/>drawing<sp/>should<sp/>occur.<sp/><sp/>If<sp/>alt<sp/>is<sp/>down,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4998"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//do<sp/>a<sp/>smoothing,<sp/>instead<sp/>of<sp/>redrawing.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4999"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>event.m_altDown<sp/>)</highlight></codeline>
<codeline lineno="5000"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//***<sp/><sp/>ALT-DOWN-CLICK<sp/>(SAMPLE<sp/>SMOOTHING)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>***</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>Smoothing<sp/>works<sp/>like<sp/>this:<sp/><sp/>There<sp/>is<sp/>a<sp/>smoothing<sp/>kernel<sp/>radius<sp/>constant<sp/>that</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>determines<sp/>how<sp/>wide<sp/>the<sp/>averaging<sp/>window<sp/>is.<sp/><sp/>Plus,<sp/>there<sp/>is<sp/>a<sp/>smoothing<sp/>brush<sp/>radius,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>which<sp/>determines<sp/>how<sp/>many<sp/>pixels<sp/>wide<sp/>around<sp/>the<sp/>selected<sp/>pixel<sp/>this<sp/>smoothing<sp/>is<sp/>applied.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>Samples<sp/>will<sp/>be<sp/>replaced<sp/>by<sp/>a<sp/>mixture<sp/>of<sp/>the<sp/>original<sp/>points<sp/>and<sp/>the<sp/>smoothed<sp/>points,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>with<sp/>a<sp/>triangular<sp/>mixing<sp/>probability<sp/>whose<sp/>value<sp/>at<sp/>the<sp/>center<sp/>point<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>SMOOTHING_PROPORTION_MAX<sp/>and<sp/>at<sp/>the<sp/>far<sp/>bounds<sp/>is<sp/>SMOOTHING_PROPORTION_MIN</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5012"><highlight class="normal"></highlight></codeline>
<codeline lineno="5013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>the<sp/>region<sp/>of<sp/>samples<sp/>around<sp/>the<sp/>selected<sp/>point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sampleRegionSize<sp/>=<sp/>1<sp/>+<sp/>2<sp/>*<sp/>(<ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref><sp/>+<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>);</highlight></codeline>
<codeline lineno="5015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*sampleRegion<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal">[sampleRegionSize];</highlight></codeline>
<codeline lineno="5016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*<sp/>newSampleRegion<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal">[1<sp/>+<sp/>2<sp/>*<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>];</highlight></codeline>
<codeline lineno="5017"><highlight class="normal"></highlight></codeline>
<codeline lineno="5018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>a<sp/>sample<sp/><sp/>from<sp/>the<sp/>track<sp/>to<sp/>do<sp/>some<sp/>tricks<sp/>on.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1a989e55726466fa1d8ec9aa4322f1c950" kindref="member">Get</ref>((<ref refid="include_2audacity_2_types_8h_1aaafb46d1caf7c79262fec96b577215fe" kindref="member">samplePtr</ref>)sampleRegion,<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>,</highlight></codeline>
<codeline lineno="5020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<ref refid="class_track_panel_1afbfde4aa5fba18839a21de39a75856bb" kindref="member">mDrawingStartSample</ref><sp/>-<sp/><ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref><sp/>-<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>,</highlight></codeline>
<codeline lineno="5021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sampleRegionSize);</highlight></codeline>
<codeline lineno="5022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<sp/>j;</highlight></codeline>
<codeline lineno="5023"><highlight class="normal"></highlight></codeline>
<codeline lineno="5024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Go<sp/>through<sp/>each<sp/>point<sp/>of<sp/>the<sp/>smoothing<sp/>brush<sp/>and<sp/>apply<sp/>a<sp/>smoothing<sp/>operation.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j<sp/>=<sp/>-<ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>;<sp/>j<sp/>&lt;=<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>;<sp/>j++){</highlight></codeline>
<codeline lineno="5026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sumOfSamples<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i=<sp/>-<ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref>;<sp/>i<sp/>&lt;=<sp/><ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref>;<sp/>i++){</highlight></codeline>
<codeline lineno="5028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Go<sp/>through<sp/>each<sp/>point<sp/>of<sp/>the<sp/>smoothing<sp/>kernel<sp/>and<sp/>find<sp/>the<sp/>average</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5029"><highlight class="normal"></highlight></codeline>
<codeline lineno="5030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//The<sp/>average<sp/>is<sp/>a<sp/>weighted<sp/>average,<sp/>scaled<sp/>by<sp/>a<sp/>weighting<sp/>kernel<sp/>that<sp/>is<sp/>simply<sp/>triangular</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>triangular<sp/>kernel<sp/>across<sp/>N<sp/>items,<sp/>with<sp/>a<sp/>radius<sp/>of<sp/>R<sp/>(<sp/>2<sp/>R<sp/>+<sp/>1<sp/>points),<sp/>if<sp/>the<sp/>farthest:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>points<sp/>have<sp/>a<sp/>probability<sp/>of<sp/>a,<sp/>the<sp/>entire<sp/>triangle<sp/>has<sp/>total<sp/>probability<sp/>of<sp/>(R<sp/>+<sp/>1)^2.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>For<sp/>sample<sp/>number<sp/>i<sp/>and<sp/>middle<sp/>brush<sp/>sample<sp/>M,<sp/><sp/>(R<sp/>+<sp/>1<sp/>-<sp/>abs(M-i))/<sp/>((R+1)^2)<sp/>gives<sp/>a</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>legal<sp/>distribution<sp/>whose<sp/>total<sp/>probability<sp/>is<sp/>1.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>weighting<sp/>factor<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sumOfSamples<sp/>+=<sp/>(<ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref><sp/>+<sp/>1<sp/>-<sp/>abs(i))<sp/>*<sp/>sampleRegion[i<sp/>+<sp/>j<sp/>+<sp/><ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref><sp/>+<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>];</highlight></codeline>
<codeline lineno="5039"><highlight class="normal"></highlight></codeline>
<codeline lineno="5040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newSampleRegion[j<sp/>+<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>]<sp/>=<sp/>sumOfSamples/((<ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref><sp/>+<sp/>1)<sp/>*(<ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref><sp/>+<sp/>1)<sp/>);</highlight></codeline>
<codeline lineno="5042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5043"><highlight class="normal"></highlight></codeline>
<codeline lineno="5044"><highlight class="normal"></highlight></codeline>
<codeline lineno="5045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>that<sp/>the<sp/>NEW<sp/>sample<sp/>levels<sp/>are<sp/>determined,<sp/>go<sp/>through<sp/>each<sp/>and<sp/>mix<sp/>it<sp/>appropriately</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>with<sp/>the<sp/>original<sp/>point,<sp/>according<sp/>to<sp/>a<sp/>2-part<sp/>linear<sp/>function<sp/>whose<sp/>center<sp/>has<sp/>probability</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SMOOTHING_PROPORTION_MAX<sp/>and<sp/>extends<sp/>out<sp/>SMOOTHING_BRUSH_RADIUS,<sp/>at<sp/>which<sp/>the<sp/>probability<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>SMOOTHING_PROPORTION_MIN.<sp/><sp/>_MIN<sp/>and<sp/>_MAX<sp/>specify<sp/>how<sp/>much<sp/>of<sp/>the<sp/>smoothed<sp/>curve<sp/>make<sp/>it<sp/>through.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5049"><highlight class="normal"></highlight></codeline>
<codeline lineno="5050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>prob;</highlight></codeline>
<codeline lineno="5051"><highlight class="normal"></highlight></codeline>
<codeline lineno="5052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(j=-<ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>;<sp/>j<sp/>&lt;=<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>;<sp/>j++){</highlight></codeline>
<codeline lineno="5053"><highlight class="normal"></highlight></codeline>
<codeline lineno="5054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prob<sp/>=<sp/><ref refid="_track_panel_8h_1ad2d7ecaaee786edd391e76d7e6df9881" kindref="member">SMOOTHING_PROPORTION_MAX</ref><sp/>-<sp/>(float)abs(j)/<ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref><sp/>*<sp/>(<ref refid="_track_panel_8h_1ad2d7ecaaee786edd391e76d7e6df9881" kindref="member">SMOOTHING_PROPORTION_MAX</ref><sp/>-<sp/><ref refid="_track_panel_8h_1a4788cca18fcda7765e6f80d83fe1276c" kindref="member">SMOOTHING_PROPORTION_MIN</ref>);</highlight></codeline>
<codeline lineno="5055"><highlight class="normal"></highlight></codeline>
<codeline lineno="5056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newSampleRegion[j+<ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>]<sp/>=</highlight></codeline>
<codeline lineno="5057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newSampleRegion[j<sp/>+<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>]<sp/>*<sp/>prob<sp/>+</highlight></codeline>
<codeline lineno="5058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sampleRegion[<ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref><sp/>+<sp/><ref refid="_track_panel_8h_1a3af967e8af9c0a04a30710a027eaa2ab" kindref="member">SMOOTHING_KERNEL_RADIUS</ref><sp/>+<sp/>j]<sp/>*<sp/>(1<sp/>-<sp/>prob);</highlight></codeline>
<codeline lineno="5059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Set<sp/>the<sp/>sample<sp/>to<sp/>the<sp/>point<sp/>of<sp/>the<sp/>mouse<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1aea32b02fe3634c9f6d0a79af3da7c987" kindref="member">Set</ref>((<ref refid="include_2audacity_2_types_8h_1aaafb46d1caf7c79262fec96b577215fe" kindref="member">samplePtr</ref>)newSampleRegion,<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>,<sp/><ref refid="class_track_panel_1afbfde4aa5fba18839a21de39a75856bb" kindref="member">mDrawingStartSample</ref><sp/>-<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>,<sp/>1<sp/>+<sp/>2<sp/>*<sp/><ref refid="_track_panel_8h_1a896a0ceeed94453d090f627091d24bee" kindref="member">SMOOTHING_BRUSH_RADIUS</ref>);</highlight></codeline>
<codeline lineno="5062"><highlight class="normal"></highlight></codeline>
<codeline lineno="5063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Clean<sp/>this<sp/>up<sp/>right<sp/>away<sp/>to<sp/>avoid<sp/>a<sp/>memory<sp/>leak</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal">[]<sp/>sampleRegion;</highlight></codeline>
<codeline lineno="5065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal">[]<sp/>newSampleRegion;</highlight></codeline>
<codeline lineno="5066"><highlight class="normal"></highlight></codeline>
<codeline lineno="5067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aaf6a9b516234e90fd8f9580f412c5013" kindref="member">mDrawingLastDragSampleValue</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5068"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5069"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5070"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//***<sp/><sp/><sp/>PLAIN<sp/>DOWN-CLICK<sp/>(NORMAL<sp/>DRAWING)<sp/><sp/><sp/><sp/><sp/><sp/><sp/>***</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5074"><highlight class="normal"></highlight></codeline>
<codeline lineno="5075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(t,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baa68b27ef88a4cfe0db64ed9d05a986a2" kindref="member">IsAdjustingSample</ref>);</highlight></codeline>
<codeline lineno="5076"><highlight class="normal"></highlight></codeline>
<codeline lineno="5077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Otherwise<sp/>(e.g.,<sp/>the<sp/>alt<sp/>button<sp/>is<sp/>not<sp/>down)<sp/>do<sp/>normal<sp/>redrawing,<sp/>based<sp/>on<sp/>the<sp/>mouse<sp/>position.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newLevel<sp/>=<sp/><ref refid="class_track_panel_1adbf8069d749a302945827bdbce80d566" kindref="member">FindSampleEditingLevel</ref></highlight></codeline>
<codeline lineno="5079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(event,<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>,<sp/>t0);</highlight></codeline>
<codeline lineno="5080"><highlight class="normal"></highlight></codeline>
<codeline lineno="5081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Set<sp/>the<sp/>sample<sp/>to<sp/>the<sp/>point<sp/>of<sp/>the<sp/>mouse<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1aea32b02fe3634c9f6d0a79af3da7c987" kindref="member">Set</ref>((<ref refid="include_2audacity_2_types_8h_1aaafb46d1caf7c79262fec96b577215fe" kindref="member">samplePtr</ref>)&amp;newLevel,<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>,<sp/><ref refid="class_track_panel_1afbfde4aa5fba18839a21de39a75856bb" kindref="member">mDrawingStartSample</ref>,<sp/>1);</highlight></codeline>
<codeline lineno="5083"><highlight class="normal"></highlight></codeline>
<codeline lineno="5084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aaf6a9b516234e90fd8f9580f412c5013" kindref="member">mDrawingLastDragSampleValue</ref><sp/>=<sp/>newLevel;</highlight></codeline>
<codeline lineno="5085"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5086"><highlight class="normal"></highlight></codeline>
<codeline lineno="5087"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Set<sp/>the<sp/>member<sp/>data<sp/>structures<sp/>for<sp/>drawing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5088"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab5839208cbf7b0a2b5c6f174c7ef8971" kindref="member">mDrawingLastDragSample</ref>=<ref refid="class_track_panel_1afbfde4aa5fba18839a21de39a75856bb" kindref="member">mDrawingStartSample</ref>;</highlight></codeline>
<codeline lineno="5089"><highlight class="normal"></highlight></codeline>
<codeline lineno="5090"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Redraw<sp/>the<sp/>region<sp/>of<sp/>the<sp/>selected<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5091"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(<ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>);</highlight></codeline>
<codeline lineno="5092"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5093"><highlight class="normal"></highlight></codeline>
<codeline lineno="5094" refid="class_track_panel_1a5809e22e4b33435cda9bff76dcd2eb48" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a5809e22e4b33435cda9bff76dcd2eb48" kindref="member">TrackPanel::HandleSampleEditingDrag</ref>(<sp/>wxMouseEvent<sp/>&amp;<sp/>event<sp/>)</highlight></codeline>
<codeline lineno="5095"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5096"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5097"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//***<sp/><sp/><sp/><sp/>DRAG-DRAWING<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>***</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5098"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5099"><highlight class="normal"></highlight></codeline>
<codeline lineno="5100"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//The<sp/>following<sp/>will<sp/>happen<sp/>on<sp/>a<sp/>drag<sp/>or<sp/>a<sp/>down-click.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5101"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>point<sp/>should<sp/>get<sp/>re-drawn<sp/>at<sp/>the<sp/>location<sp/>of<sp/>the<sp/>mouse.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5102"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Exit<sp/>if<sp/>the<sp/>mDrawingTrack<sp/>is<sp/>null.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5103"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="5104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5105"><highlight class="normal"></highlight></codeline>
<codeline lineno="5106"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Exit<sp/>dragging<sp/>if<sp/>the<sp/>alt<sp/>key<sp/>is<sp/>down--Don&apos;t<sp/>allow<sp/>left-right<sp/>dragging<sp/>for<sp/>smoothing<sp/>operation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5107"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>!=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baa68b27ef88a4cfe0db64ed9d05a986a2" kindref="member">IsAdjustingSample</ref>)</highlight></codeline>
<codeline lineno="5108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5109"><highlight class="normal"></highlight></codeline>
<codeline lineno="5110"><highlight class="normal"><sp/><sp/><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/>s0;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//declare<sp/>this<sp/>for<sp/>use<sp/>below.<sp/><sp/>It<sp/>designates<sp/>the<sp/>sample<sp/>number<sp/>which<sp/>to<sp/>draw.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5111"><highlight class="normal"></highlight></codeline>
<codeline lineno="5112"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Figure<sp/>out<sp/>what<sp/>time<sp/>the<sp/>click<sp/>was<sp/>at</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5113"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Find<sp/>the<sp/>point<sp/>that<sp/>we<sp/>want<sp/>to<sp/>redraw<sp/>at.<sp/>If<sp/>the<sp/>control<sp/>button<sp/>is<sp/>down,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5114"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//adjust<sp/>only<sp/>the<sp/>originally<sp/>clicked-on<sp/>sample</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5115"><highlight class="normal"></highlight></codeline>
<codeline lineno="5116"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>event.m_controlDown)<sp/>{</highlight></codeline>
<codeline lineno="5117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//***<sp/><sp/><sp/>CTRL-DOWN<sp/>(Hold<sp/>Initial<sp/>Sample<sp/>Constant<sp/>***</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5120"><highlight class="normal"></highlight></codeline>
<codeline lineno="5121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>s0<sp/>=<sp/><ref refid="class_track_panel_1afbfde4aa5fba18839a21de39a75856bb" kindref="member">mDrawingStartSample</ref>;</highlight></codeline>
<codeline lineno="5122"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5123"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="5124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//***<sp/><sp/><sp/><sp/>Normal<sp/>CLICK-drag<sp/><sp/>(Normal<sp/>drawing)<sp/><sp/><sp/><sp/>***</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5127"><highlight class="normal"></highlight></codeline>
<codeline lineno="5128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Otherwise,<sp/>adjust<sp/>the<sp/>sample<sp/>you<sp/>are<sp/>dragging<sp/>over<sp/>right<sp/>now.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//convert<sp/>this<sp/>to<sp/>samples</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());</highlight></codeline>
<codeline lineno="5131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>s0<sp/>=<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1afe621ba06a0396725da44e937143972f" kindref="member">TimeToLongSamples</ref>(t);</highlight></codeline>
<codeline lineno="5132"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5133"><highlight class="normal"></highlight></codeline>
<codeline lineno="5134"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>t0<sp/>=<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1a16171cfb9bd446a6d16e0e5ac1695318" kindref="member">LongSamplesToTime</ref>(s0);</highlight></codeline>
<codeline lineno="5135"><highlight class="normal"></highlight></codeline>
<codeline lineno="5136"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Otherwise,<sp/>do<sp/>normal<sp/>redrawing,<sp/>based<sp/>on<sp/>the<sp/>mouse<sp/>position.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5137"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>where<sp/>the<sp/>mouse<sp/>is<sp/>located<sp/>vertically<sp/>(between<sp/>+/-<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5138"><highlight class="normal"></highlight></codeline>
<codeline lineno="5139"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newLevel<sp/>=<sp/><ref refid="class_track_panel_1adbf8069d749a302945827bdbce80d566" kindref="member">FindSampleEditingLevel</ref></highlight></codeline>
<codeline lineno="5140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(event,<sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>,<sp/>t0);</highlight></codeline>
<codeline lineno="5141"><highlight class="normal"></highlight></codeline>
<codeline lineno="5142"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Now,<sp/>redraw<sp/>all<sp/>samples<sp/>between<sp/>current<sp/>and<sp/>last<sp/>redrawn<sp/>sample,<sp/>inclusive</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5143"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Go<sp/>from<sp/>the<sp/>smaller<sp/>to<sp/>larger<sp/>sample.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5144"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="seqread_8c_1ac503262ae470564980711da4f78b1181" kindref="member">start</ref><sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(<sp/>s0,<sp/><ref refid="class_track_panel_1ab5839208cbf7b0a2b5c6f174c7ef8971" kindref="member">mDrawingLastDragSample</ref>);</highlight></codeline>
<codeline lineno="5145"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref><sp/><sp/><sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(<sp/>s0,<sp/><ref refid="class_track_panel_1ab5839208cbf7b0a2b5c6f174c7ef8971" kindref="member">mDrawingLastDragSample</ref>);</highlight></codeline>
<codeline lineno="5146"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref><sp/>=<sp/>end<sp/>-<sp/>start<sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="5147"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(size<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="5148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1aea32b02fe3634c9f6d0a79af3da7c987" kindref="member">Set</ref>((<ref refid="include_2audacity_2_types_8h_1aaafb46d1caf7c79262fec96b577215fe" kindref="member">samplePtr</ref>)&amp;newLevel,<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>,<sp/>start,<sp/>size);</highlight></codeline>
<codeline lineno="5149"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5150"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="5151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;float&gt;<sp/>values(size);</highlight></codeline>
<codeline lineno="5152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>start;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;=<sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline lineno="5153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//This<sp/>interpolates<sp/>each<sp/>sample<sp/>linearly:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>values[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>-<sp/><ref refid="seqread_8c_1ac503262ae470564980711da4f78b1181" kindref="member">start</ref>]<sp/>=</highlight></codeline>
<codeline lineno="5155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aaf6a9b516234e90fd8f9580f412c5013" kindref="member">mDrawingLastDragSampleValue</ref><sp/>+<sp/>(newLevel<sp/>-<sp/><ref refid="class_track_panel_1aaf6a9b516234e90fd8f9580f412c5013" kindref="member">mDrawingLastDragSampleValue</ref>)<sp/><sp/>*</highlight></codeline>
<codeline lineno="5156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)(<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>-<sp/><ref refid="class_track_panel_1ab5839208cbf7b0a2b5c6f174c7ef8971" kindref="member">mDrawingLastDragSample</ref>)<sp/>/<sp/>(s0<sp/>-<sp/><ref refid="class_track_panel_1ab5839208cbf7b0a2b5c6f174c7ef8971" kindref="member">mDrawingLastDragSample</ref>);</highlight></codeline>
<codeline lineno="5157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>-&gt;<ref refid="class_wave_track_1aea32b02fe3634c9f6d0a79af3da7c987" kindref="member">Set</ref>((<ref refid="include_2audacity_2_types_8h_1aaafb46d1caf7c79262fec96b577215fe" kindref="member">samplePtr</ref>)&amp;values[0],<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>,<sp/>start,<sp/>size);</highlight></codeline>
<codeline lineno="5159"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5160"><highlight class="normal"></highlight></codeline>
<codeline lineno="5161"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Update<sp/>the<sp/>member<sp/>data<sp/>structures.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5162"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ab5839208cbf7b0a2b5c6f174c7ef8971" kindref="member">mDrawingLastDragSample</ref>=s0;</highlight></codeline>
<codeline lineno="5163"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaf6a9b516234e90fd8f9580f412c5013" kindref="member">mDrawingLastDragSampleValue</ref><sp/>=<sp/>newLevel;</highlight></codeline>
<codeline lineno="5164"><highlight class="normal"></highlight></codeline>
<codeline lineno="5165"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Redraw<sp/>the<sp/>region<sp/>of<sp/>the<sp/>selected<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5166"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(<ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>);</highlight></codeline>
<codeline lineno="5167"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5168"><highlight class="normal"></highlight></codeline>
<codeline lineno="5169" refid="class_track_panel_1a0299ab868bda9fed30b2f8d675d36b94" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0299ab868bda9fed30b2f8d675d36b94" kindref="member">TrackPanel::HandleSampleEditingButtonUp</ref>(<sp/>wxMouseEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="5170"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5171"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5172"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//***<sp/><sp/><sp/><sp/>UP-CLICK<sp/><sp/>(Finish<sp/>drawing)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>***</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5173"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//*************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5174"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5175"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//On<sp/>up-click,<sp/>send<sp/>the<sp/>state<sp/>to<sp/>the<sp/>undo<sp/>stack</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5176"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref>=<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Set<sp/>this<sp/>to<sp/>NULL<sp/>so<sp/>it<sp/>will<sp/>catch<sp/>improper<sp/>drag<sp/>events.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5177"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Moved<sp/>Samples&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="5178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Sample<sp/>Edit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="5179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref><sp/>|<sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114a0650fde039d6d9101c53ade11ecafcd3" kindref="member">UndoPush::AUTOSAVE</ref>);</highlight></codeline>
<codeline lineno="5180"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5181"><highlight class="normal"></highlight></codeline>
<codeline lineno="5182"><highlight class="normal"></highlight></codeline>
<codeline lineno="5193" refid="class_track_panel_1a8b8b625b75319ed1bce958a6ad9ddcf4" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8b8b625b75319ed1bce958a6ad9ddcf4" kindref="member">TrackPanel::HandleSampleEditing</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5194"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5195"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown()<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="5196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a701733b821a60732c8c4d66676b8b5b1" kindref="member">HandleSampleEditingClick</ref>(<sp/>event);</highlight></codeline>
<codeline lineno="5197"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref><sp/>&amp;&amp;<sp/>event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="5198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5809e22e4b33435cda9bff76dcd2eb48" kindref="member">HandleSampleEditingDrag</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="5199"><highlight class="normal"><sp/><sp/><sp/>}<sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="class_track_panel_1a9e072ae51c9cfe5637a5aca0ddbe1251" kindref="member">mDrawingTrack</ref><sp/>&amp;&amp;<sp/>event.ButtonUp())<sp/>{</highlight></codeline>
<codeline lineno="5200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0299ab868bda9fed30b2f8d675d36b94" kindref="member">HandleSampleEditingButtonUp</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="5201"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5202"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5203"><highlight class="normal"></highlight></codeline>
<codeline lineno="5204"><highlight class="normal"></highlight></codeline>
<codeline lineno="5205"><highlight class="normal"></highlight><highlight class="comment">//<sp/>This<sp/>is<sp/>for<sp/>when<sp/>a<sp/>given<sp/>track<sp/>gets<sp/>the<sp/>x.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5206" refid="class_track_panel_1a94dc01defc13cb38062ba298c790ace1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a94dc01defc13cb38062ba298c790ace1" kindref="member">TrackPanel::HandleClosing</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5207"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5208"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="5209"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="5210"><highlight class="normal"></highlight></codeline>
<codeline lineno="5211"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>closeRect;</highlight></codeline>
<codeline lineno="5212"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetCloseBoxRect(rect,<sp/>closeRect);</highlight></codeline>
<codeline lineno="5213"><highlight class="normal"></highlight></codeline>
<codeline lineno="5214"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5215"><highlight class="normal"></highlight></codeline>
<codeline lineno="5216"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())</highlight></codeline>
<codeline lineno="5217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawCloseBox(&amp;dc,<sp/>rect,<sp/>closeRect.Contains(event.m_x,<sp/>event.m_y));</highlight></codeline>
<codeline lineno="5218"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="5219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawCloseBox(&amp;dc,<sp/>rect,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(closeRect.Contains(event.m_x,<sp/>event.m_y))<sp/>{</highlight></codeline>
<codeline lineno="5221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>())</highlight></codeline>
<codeline lineno="5222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;<ref refid="class_audacity_project_1a8e9b15c9e4a0ce0341613001ec7ba1de" kindref="member">RemoveTrack</ref>(t);</highlight></codeline>
<codeline lineno="5223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5225"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5226"><highlight class="normal"></highlight></codeline>
<codeline lineno="5227"><highlight class="normal"><sp/><sp/><sp/>this-&gt;<ref refid="class_track_panel_1a0f8ae75f704431389d371cb24f394a8b" kindref="member">UpdateViewIfNoTracks</ref>();</highlight></codeline>
<codeline lineno="5228"><highlight class="normal"><sp/><sp/><sp/>this-&gt;<ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5229"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5230"><highlight class="normal"></highlight></codeline>
<codeline lineno="5231" refid="class_track_panel_1a0f8ae75f704431389d371cb24f394a8b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0f8ae75f704431389d371cb24f394a8b" kindref="member">TrackPanel::UpdateViewIfNoTracks</ref>()</highlight></codeline>
<codeline lineno="5232"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5233"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a493bcaaad93c4b0c3468d6b33737eaa0" kindref="member">IsEmpty</ref>())</highlight></codeline>
<codeline lineno="5234"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>BG:<sp/>There<sp/>are<sp/>no<sp/>more<sp/>tracks<sp/>on<sp/>screen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//BG:<sp/>Set<sp/>zoom<sp/>to<sp/>normal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ac2078ac51a3c9904d3ba445cd3ed35fa" kindref="member">SetZoom</ref>(<ref refid="class_zoom_info_1a4508413dd55cf328c8e772dc8d0964a1" kindref="member">ZoomInfo::GetDefaultZoom</ref>());</highlight></codeline>
<codeline lineno="5238"><highlight class="normal"></highlight></codeline>
<codeline lineno="5239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//STM:<sp/>Set<sp/>selection<sp/>to<sp/>0,0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//PRL:<sp/>and<sp/>default<sp/>the<sp/>rest<sp/>of<sp/>the<sp/>selection<sp/>information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref><sp/>=<sp/><ref refid="class_selected_region" kindref="compound">SelectedRegion</ref>();</highlight></codeline>
<codeline lineno="5242"><highlight class="normal"></highlight></codeline>
<codeline lineno="5243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PRL:<sp/><sp/>Following<sp/>causes<sp/>the<sp/>time<sp/>ruler<sp/>to<sp/>align<sp/>0<sp/>with<sp/>left<sp/>edge.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Bug<sp/>972</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5246"><highlight class="normal"></highlight></codeline>
<codeline lineno="5247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ac48ce73b3c15b138c757460e701a61c7" kindref="member">TP_RedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="5248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a314b71fdc6da3866223ae7351786c18d" kindref="member">TP_DisplayStatusMessage</ref>(wxT(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">));<sp/></highlight><highlight class="comment">//STM:<sp/>Clear<sp/>message<sp/>if<sp/>all<sp/>tracks<sp/>are<sp/>removed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5249"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5250"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5251"><highlight class="normal"></highlight></codeline>
<codeline lineno="5252" refid="class_track_panel_1a83380b9ed98366aa8f6d899edbb79475" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a83380b9ed98366aa8f6d899edbb79475" kindref="member">TrackPanel::HandlePopping</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5253"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5254"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="5255"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="5256"><highlight class="normal"></highlight></codeline>
<codeline lineno="5257"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>t==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>){</highlight></codeline>
<codeline lineno="5258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5260"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5261"><highlight class="normal"></highlight></codeline>
<codeline lineno="5262"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>titleRect;</highlight></codeline>
<codeline lineno="5263"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTitleBarRect(rect,<sp/>titleRect);</highlight></codeline>
<codeline lineno="5264"><highlight class="normal"></highlight></codeline>
<codeline lineno="5265"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5266"><highlight class="normal"></highlight></codeline>
<codeline lineno="5267"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="5268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawTitleBar(&amp;dc,<sp/>rect,<sp/>t,<sp/>titleRect.Contains(event.m_x,<sp/>event.m_y));</highlight></codeline>
<codeline lineno="5269"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5270"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="5271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(titleRect.Contains(event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a54694a29a7c857cb7e59c1dcfcca4676" kindref="member">OnTrackMenu</ref>(t);</highlight></codeline>
<codeline lineno="5274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5275"><highlight class="normal"></highlight></codeline>
<codeline lineno="5276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5277"><highlight class="normal"></highlight></codeline>
<codeline lineno="5278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawTitleBar(&amp;dc,<sp/>rect,<sp/>t,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5279"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5280"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5281"><highlight class="normal"></highlight></codeline>
<codeline lineno="5283" refid="class_track_panel_1a881b54b10e97508e66b788ab436fbad8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a881b54b10e97508e66b788ab436fbad8" kindref="member">TrackPanel::HandleMutingSoloing</ref>(wxMouseEvent<sp/>&amp;<sp/>event,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>solo)</highlight></codeline>
<codeline lineno="5284"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5285"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="5286"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="5287"><highlight class="normal"></highlight></codeline>
<codeline lineno="5288"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>t==<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>){</highlight></codeline>
<codeline lineno="5289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight><highlight class="comment">//<sp/>Soloing<sp/>or<sp/>muting<sp/>but<sp/>no<sp/>captured<sp/>track!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5292"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5293"><highlight class="normal"></highlight></codeline>
<codeline lineno="5294"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>buttonRect;</highlight></codeline>
<codeline lineno="5295"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetMuteSoloRect(rect,<sp/>buttonRect,<sp/>solo,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="5296"><highlight class="normal"></highlight></codeline>
<codeline lineno="5297"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5298"><highlight class="normal"></highlight></codeline>
<codeline lineno="5299"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging()){</highlight></codeline>
<codeline lineno="5300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMuteSolo(&amp;dc,<sp/>rect,<sp/>t,<sp/>buttonRect.Contains(event.m_x,<sp/>event.m_y),</highlight></codeline>
<codeline lineno="5301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>solo,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="5302"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5303"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp()<sp/>)</highlight></codeline>
<codeline lineno="5304"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buttonRect.Contains(event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>either,<sp/>MakeParentPushState<sp/>to<sp/>make<sp/>the<sp/>track<sp/>state<sp/>dirty.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(solo)</highlight></codeline>
<codeline lineno="5309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;<ref refid="class_audacity_project_1a324ae85470d0e933514293ece3afff19" kindref="member">DoTrackSolo</ref>(t,<sp/>event.ShiftDown());</highlight></codeline>
<codeline lineno="5310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;<ref refid="class_audacity_project_1abb34a6ea6206cd7075b3b79becf7a76c" kindref="member">DoTrackMute</ref>(t,<sp/>event.ShiftDown());</highlight></codeline>
<codeline lineno="5312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mTrackInfo.DrawMuteSolo(&amp;dc,<sp/>rect,<sp/>t,<sp/>false,<sp/>solo);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5316"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5317"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5318"><highlight class="normal"></highlight></codeline>
<codeline lineno="5319" refid="class_track_panel_1a0421309f0c83a09ff72245dd6eb33d4d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0421309f0c83a09ff72245dd6eb33d4d" kindref="member">TrackPanel::HandleMinimizing</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5320"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5321"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="5322"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>;</highlight></codeline>
<codeline lineno="5323"><highlight class="normal"></highlight></codeline>
<codeline lineno="5324"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="5325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5327"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5328"><highlight class="normal"></highlight></codeline>
<codeline lineno="5329"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>buttonRect;</highlight></codeline>
<codeline lineno="5330"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetMinimizeRect(rect,<sp/>buttonRect);</highlight></codeline>
<codeline lineno="5331"><highlight class="normal"></highlight></codeline>
<codeline lineno="5332"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5333"><highlight class="normal"></highlight></codeline>
<codeline lineno="5334"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="5335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMinimize(&amp;dc,<sp/>rect,<sp/>t,<sp/>buttonRect.Contains(event.m_x,<sp/>event.m_y));</highlight></codeline>
<codeline lineno="5336"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5337"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="5338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buttonRect.Contains(event.m_x,<sp/>event.m_y))<sp/>{</highlight></codeline>
<codeline lineno="5339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(!t-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>());</highlight></codeline>
<codeline lineno="5340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(t))</highlight></codeline>
<codeline lineno="5341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(t)-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(t-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>());</highlight></codeline>
<codeline lineno="5342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="5343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5345"><highlight class="normal"></highlight></codeline>
<codeline lineno="5346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5347"><highlight class="normal"></highlight></codeline>
<codeline lineno="5348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMinimize(&amp;dc,<sp/>rect,<sp/>t,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_project_8cpp_1a897aa047b58617a9acc187fc882e3bb4" kindref="member">GetActiveProject</ref>()-&gt;<ref refid="class_audacity_project_1ad06c48692cfa4c2e099f1895b98ca7bf" kindref="member">RedrawProject</ref>();</highlight></codeline>
<codeline lineno="5351"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5352"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5353"><highlight class="normal"></highlight></codeline>
<codeline lineno="5354" refid="class_track_panel_1a5e05c68da6ecc144c58c90507518a8d7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a5e05c68da6ecc144c58c90507518a8d7" kindref="member">TrackPanel::HandleSliders</ref>(wxMouseEvent<sp/>&amp;event,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>pan)</highlight></codeline>
<codeline lineno="5355"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5356"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_l_w_slider" kindref="compound">LWSlider</ref><sp/>*slider;</highlight></codeline>
<codeline lineno="5357"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5358"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>panZero<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5359"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5360"><highlight class="normal"></highlight></codeline>
<codeline lineno="5361"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>the<sp/>Mac,<sp/>we&apos;ll<sp/>lose<sp/>track<sp/>capture<sp/>if<sp/>the<sp/>slider<sp/>dialog</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5362"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>is<sp/>displayed,<sp/>but<sp/>it<sp/>doesn&apos;t<sp/>hurt<sp/>to<sp/>do<sp/>this<sp/>for<sp/>all<sp/>plats.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5363"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*capturedTrack<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>;</highlight></codeline>
<codeline lineno="5364"><highlight class="normal"></highlight></codeline>
<codeline lineno="5365"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pan)</highlight></codeline>
<codeline lineno="5366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>slider<sp/>=<sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.<ref refid="class_track_info_1ac92f8d630b86e38deade6c1b55d166dc" kindref="member">PanSlider</ref>(capturedTrack,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5367"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>slider<sp/>=<sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.<ref refid="class_track_info_1a190efcbb5578f98b16b20b193209cf43" kindref="member">GainSlider</ref>(capturedTrack,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5369"><highlight class="normal"></highlight></codeline>
<codeline lineno="5370"><highlight class="normal"><sp/><sp/><sp/>slider-&gt;<ref refid="class_l_w_slider_1a5a81b56bf180901eb33b1c1e99aa0474" kindref="member">OnMouseEvent</ref>(event);</highlight></codeline>
<codeline lineno="5371"><highlight class="normal"></highlight></codeline>
<codeline lineno="5372"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>have<sp/>a<sp/>double-click,<sp/>do<sp/>this...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5373"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDClick())</highlight></codeline>
<codeline lineno="5374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>;</highlight></codeline>
<codeline lineno="5375"><highlight class="normal"></highlight></codeline>
<codeline lineno="5376"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newValue<sp/>=<sp/>slider-&gt;<ref refid="class_l_w_slider_1a69abf4f4b2b97ba6bc710cf9fb18806e" kindref="member">Get</ref>();</highlight></codeline>
<codeline lineno="5377"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_mixer_board" kindref="compound">MixerBoard</ref>*<sp/>pMixerBoard<sp/>=<sp/>this-&gt;<ref refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" kindref="member">GetMixerBoard</ref>();<sp/></highlight><highlight class="comment">//<sp/>Update<sp/>mixer<sp/>board,<sp/>too.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5378"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5379"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(capturedTrack-&gt;<ref refid="class_wave_track_1a0a51b188c6a489be981f0af7792b718e" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="5380"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5381"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*link<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(capturedTrack);</highlight></codeline>
<codeline lineno="5382"><highlight class="normal"></highlight></codeline>
<codeline lineno="5383"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pan)<sp/>{</highlight></codeline>
<codeline lineno="5384"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>panZero<sp/>=<sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)capturedTrack)-&gt;SetPan(newValue);</highlight></codeline>
<codeline lineno="5386"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)capturedTrack)-&gt;SetPan(newValue);</highlight></codeline>
<codeline lineno="5388"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link)</highlight></codeline>
<codeline lineno="5390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link-&gt;<ref refid="class_wave_track_1a8711fa41c9fcec3519d80286a96f049d" kindref="member">SetPan</ref>(newValue);</highlight></codeline>
<codeline lineno="5391"><highlight class="normal"></highlight></codeline>
<codeline lineno="5392"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(panZero)<sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="5394"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5395"><highlight class="normal"></highlight></codeline>
<codeline lineno="5396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard)</highlight></codeline>
<codeline lineno="5397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1a6386969f2b363e1ae510191e8e05182c" kindref="member">UpdatePan</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)capturedTrack);</highlight></codeline>
<codeline lineno="5398"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5399"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="5400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)capturedTrack)-&gt;SetGain(newValue);</highlight></codeline>
<codeline lineno="5401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link)</highlight></codeline>
<codeline lineno="5402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link-&gt;<ref refid="class_wave_track_1aa64cfe45ca3be7f2067f263784d2a864" kindref="member">SetGain</ref>(newValue);</highlight></codeline>
<codeline lineno="5403"><highlight class="normal"></highlight></codeline>
<codeline lineno="5404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard)</highlight></codeline>
<codeline lineno="5405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1a407ee5df1166fa5de4689299fcf2969a" kindref="member">UpdateGain</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)capturedTrack);</highlight></codeline>
<codeline lineno="5406"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5407"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5408"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">//<sp/>Note:<sp/>funny<sp/>indentation<sp/>to<sp/>match<sp/>&quot;if&quot;<sp/>about<sp/>20<sp/>lines<sp/>back</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pan)<sp/>{</highlight></codeline>
<codeline lineno="5410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>capturedTrack)-&gt;SetGain(newValue);</highlight></codeline>
<codeline lineno="5411"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIXER_BOARD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard)</highlight></codeline>
<codeline lineno="5413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>probably<sp/>should<sp/>modify<sp/>UpdateGain<sp/>to<sp/>take<sp/>a<sp/>track<sp/>that<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>either<sp/>a<sp/>WaveTrack<sp/>or<sp/>a<sp/>NoteTrack.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1a407ee5df1166fa5de4689299fcf2969a" kindref="member">UpdateGain</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)capturedTrack);</highlight></codeline>
<codeline lineno="5416"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5418"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5419"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5420"><highlight class="normal"></highlight></codeline>
<codeline lineno="5421"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(capturedTrack);</highlight></codeline>
<codeline lineno="5422"><highlight class="normal"></highlight></codeline>
<codeline lineno="5423"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonUp())<sp/>{</highlight></codeline>
<codeline lineno="5424"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5425"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(capturedTrack-&gt;<ref refid="class_wave_track_1a0a51b188c6a489be981f0af7792b718e" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="5426"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(pan<sp/>?<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Moved<sp/>pan<sp/>slider&quot;</highlight><highlight class="normal">)<sp/>:<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Moved<sp/>gain<sp/>slider&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="5428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pan<sp/>?<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Pan&quot;</highlight><highlight class="normal">)<sp/>:<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Gain&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="5429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref>);</highlight></codeline>
<codeline lineno="5430"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5431"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="5432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Moved<sp/>velocity<sp/>slider&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Velocity&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5433"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5434"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5436"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5437"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5438"><highlight class="normal"></highlight></codeline>
<codeline lineno="5439"><highlight class="normal"></highlight><highlight class="comment">//<sp/>The<sp/>tracks<sp/>positions<sp/>within<sp/>the<sp/>list<sp/>have<sp/>changed,<sp/>so<sp/>update<sp/>the<sp/>vertical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5440"><highlight class="normal"></highlight><highlight class="comment">//<sp/>ruler<sp/>size<sp/>for<sp/>the<sp/>track<sp/>that<sp/>triggered<sp/>the<sp/>event.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5441" refid="class_track_panel_1abb3ee974c78d75af2f7131d4fefefac2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abb3ee974c78d75af2f7131d4fefefac2" kindref="member">TrackPanel::OnTrackListResized</ref>(wxCommandEvent<sp/>&amp;<sp/><ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>)</highlight></codeline>
<codeline lineno="5442"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5443"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*)<sp/>e.GetClientData();</highlight></codeline>
<codeline lineno="5444"><highlight class="normal"></highlight></codeline>
<codeline lineno="5445"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(t);</highlight></codeline>
<codeline lineno="5446"><highlight class="normal"></highlight></codeline>
<codeline lineno="5447"><highlight class="normal"><sp/><sp/><sp/>e.Skip();</highlight></codeline>
<codeline lineno="5448"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5449"><highlight class="normal"></highlight></codeline>
<codeline lineno="5450"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Tracks<sp/>have<sp/>been<sp/>added<sp/>or<sp/>removed<sp/>from<sp/>the<sp/>list.<sp/><sp/>Handle<sp/>adds<sp/>as<sp/>if</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5451"><highlight class="normal"></highlight><highlight class="comment">//<sp/>a<sp/>resize<sp/>has<sp/>taken<sp/>place.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5452" refid="class_track_panel_1ab05904aa3f0df40bff7406b1138bff25" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab05904aa3f0df40bff7406b1138bff25" kindref="member">TrackPanel::OnTrackListUpdated</ref>(wxCommandEvent<sp/>&amp;<sp/><ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>)</highlight></codeline>
<codeline lineno="5453"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5454"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Tracks<sp/>may<sp/>have<sp/>been<sp/>deleted,<sp/>so<sp/>check<sp/>to<sp/>see<sp/>if<sp/>the<sp/>focused<sp/>track<sp/>was<sp/>on<sp/>of<sp/>them.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5455"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1aefa8c55074ae7681638b282cb4d11d0c" kindref="member">Contains</ref>(<ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>()))<sp/>{</highlight></codeline>
<codeline lineno="5456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5457"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5458"><highlight class="normal"></highlight></codeline>
<codeline lineno="5459"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(e.GetClientData())<sp/>{</highlight></codeline>
<codeline lineno="5460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abb3ee974c78d75af2f7131d4fefefac2" kindref="member">OnTrackListResized</ref>(e);</highlight></codeline>
<codeline lineno="5461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5462"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5463"><highlight class="normal"></highlight></codeline>
<codeline lineno="5464"><highlight class="normal"><sp/><sp/><sp/>e.Skip();</highlight></codeline>
<codeline lineno="5465"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5466"><highlight class="normal"></highlight></codeline>
<codeline lineno="5467" refid="class_track_panel_1a576de7bafcb8fd3afbbb9c53bfc35679" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a576de7bafcb8fd3afbbb9c53bfc35679" kindref="member">TrackPanel::OnContextMenu</ref>(wxContextMenuEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="5468"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5469"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a54694a29a7c857cb7e59c1dcfcca4676" kindref="member">OnTrackMenu</ref>();</highlight></codeline>
<codeline lineno="5470"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5471"><highlight class="normal"></highlight></codeline>
<codeline lineno="5475"><highlight class="comment">//<sp/>That<sp/>is,<sp/>TrackInfo<sp/>and<sp/>vertical<sp/>ruler<sp/>rect.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5476" refid="class_track_panel_1abb91ec20240267ebb6ea0ce591040408" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abb91ec20240267ebb6ea0ce591040408" kindref="member">TrackPanel::HandleLabelClick</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5477"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5478"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>If<sp/>not<sp/>a<sp/>click,<sp/>ignore<sp/>the<sp/>mouse<sp/>event.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5479"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!event.ButtonDown()<sp/>&amp;&amp;<sp/>!</highlight><highlight class="keyword">event</highlight><highlight class="normal">.ButtonDClick())<sp/>{</highlight></codeline>
<codeline lineno="5480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5481"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5482"><highlight class="normal"></highlight></codeline>
<codeline lineno="5483"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MIDI<sp/>tracks<sp/>use<sp/>the<sp/>right<sp/>mouse<sp/>button,<sp/>but<sp/>other<sp/>tracks<sp/>get<sp/>confused</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5484"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>they<sp/>see<sp/>anything<sp/>other<sp/>than<sp/>a<sp/>left<sp/>click.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5485"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isleft<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.Button(wxMOUSE_BTN_LEFT);</highlight></codeline>
<codeline lineno="5486"><highlight class="normal"></highlight></codeline>
<codeline lineno="5487"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>unsafe<sp/>=<sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>();</highlight></codeline>
<codeline lineno="5488"><highlight class="normal"></highlight></codeline>
<codeline lineno="5489"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="5490"><highlight class="normal"></highlight></codeline>
<codeline lineno="5491"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="5492"><highlight class="normal"></highlight></codeline>
<codeline lineno="5493"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>LL:<sp/>Check<sp/>close<sp/>box</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5494"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isleft<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a856efe4b8f386660864d5a82087f5599" kindref="member">CloseFunc</ref>(t,<sp/>rect,<sp/>event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5496"><highlight class="normal"></highlight></codeline>
<codeline lineno="5497"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>LL:<sp/>Check<sp/>title<sp/>bar<sp/>for<sp/>popup</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5498"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isleft<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a13edb641a0eeda3df1fc054ba8cbfaf2" kindref="member">PopupFunc</ref>(t,<sp/>rect,<sp/>event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5500"><highlight class="normal"></highlight></codeline>
<codeline lineno="5501"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>VJ:<sp/>Check<sp/>sync-lock<sp/>icon<sp/>and<sp/>the<sp/>blank<sp/>area<sp/>to<sp/>the<sp/>left<sp/>of<sp/>the<sp/>minimize<sp/>button.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5502"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Have<sp/>to<sp/>do<sp/>it<sp/>here,<sp/>because<sp/>if<sp/>track<sp/>is<sp/>shrunk<sp/>such<sp/>that<sp/>these<sp/>areas<sp/>occlude<sp/>controls,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5503"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>e.g.,<sp/>mute/solo,<sp/>don&apos;t<sp/>want<sp/>the<sp/>&quot;Funcs&quot;<sp/>below<sp/>to<sp/>set<sp/>up<sp/>handling.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5504"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>result<sp/>of<sp/>doing<sp/>so<sp/>is<sp/>to<sp/>select<sp/>the<sp/>track.<sp/>Don&apos;t<sp/>care<sp/>whether<sp/>isleft.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5505"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bTrackSelClick<sp/>=<sp/>this-&gt;<ref refid="class_track_panel_1a99e11c40842e9b3aede92c0f82d8689c" kindref="member">TrackSelFunc</ref>(t,<sp/>rect,<sp/>event.m_x,<sp/>event.m_y);</highlight></codeline>
<codeline lineno="5506"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!bTrackSelClick)</highlight></codeline>
<codeline lineno="5507"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MM:<sp/>Check<sp/>minimize<sp/>buttons<sp/>on<sp/>WaveTracks.<sp/>Must<sp/>be<sp/>before</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>solo/mute<sp/>buttons,<sp/>sliders<sp/>etc.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isleft<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a9244f227b1e2cb6edfd24e9650ac2235" kindref="member">MinimizeFunc</ref>(t,<sp/>rect,<sp/>event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5512"><highlight class="normal"></highlight></codeline>
<codeline lineno="5513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isleft<sp/>&amp;&amp;<sp/>t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="5514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>Check<sp/>Mute<sp/>and<sp/>Solo<sp/>buttons<sp/>on<sp/>WaveTracks:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1adbffbdfce4223990a11b3167b1ee049a" kindref="member">MuteSoloFunc</ref>(t,<sp/>rect,<sp/>event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="5517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1adbffbdfce4223990a11b3167b1ee049a" kindref="member">MuteSoloFunc</ref>(t,<sp/>rect,<sp/>event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="5518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5519"><highlight class="normal"></highlight></codeline>
<codeline lineno="5520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a904ddb068d3004c2fa52f0c400f3502a" kindref="member">GainFunc</ref>(t,<sp/>rect,<sp/>event,<sp/>event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5522"><highlight class="normal"></highlight></codeline>
<codeline lineno="5523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aef0d5f21303aac8eb1e309acf3480655" kindref="member">PanFunc</ref>(t,<sp/>rect,<sp/>event,<sp/>event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5526"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>If<sp/>it&apos;s<sp/>a<sp/>NoteTrack,<sp/>it<sp/>has<sp/>special<sp/>controls</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note)</highlight></codeline>
<codeline lineno="5529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>midiRect;</highlight></codeline>
<codeline lineno="5531"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>is<sp/>an<sp/>awful<sp/>hack:<sp/>make<sp/>a<sp/>NEW<sp/>rectangle<sp/>at<sp/>an<sp/>offset<sp/>because</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MuteSoloFunc<sp/>thinks<sp/>buttons<sp/>are<sp/>located<sp/>below<sp/>some<sp/>text,<sp/>e.g.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>&quot;Mono,<sp/>44100Hz<sp/>32-bit<sp/>float&quot;,<sp/>but<sp/>this<sp/>is<sp/>not<sp/>true<sp/>for<sp/>a<sp/>Note<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>muteSoloRect(rect);</highlight></codeline>
<codeline lineno="5536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>muteSoloRect.y<sp/>-=<sp/>34;<sp/></highlight><highlight class="comment">//<sp/>subtract<sp/>the<sp/>height<sp/>of<sp/>wave<sp/>track<sp/>text</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1adbffbdfce4223990a11b3167b1ee049a" kindref="member">MuteSoloFunc</ref>(t,<sp/>muteSoloRect,<sp/>event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="5538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1adbffbdfce4223990a11b3167b1ee049a" kindref="member">MuteSoloFunc</ref>(t,<sp/>muteSoloRect,<sp/>event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="5539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5540"><highlight class="normal"></highlight></codeline>
<codeline lineno="5541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>is<sp/>a<sp/>similar<sp/>hack:<sp/>GainFunc<sp/>expects<sp/>a<sp/>Wave<sp/>track<sp/>slider,<sp/>so<sp/>it&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>looking<sp/>in<sp/>the<sp/>wrong<sp/>place.<sp/>We<sp/>pass<sp/>it<sp/>a<sp/>bogus<sp/>rectangle<sp/>created<sp/>when</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>slider<sp/>was<sp/>placed<sp/>to<sp/>&quot;fake&quot;<sp/>GainFunc<sp/>into<sp/>finding<sp/>the<sp/>slider<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>its<sp/>actual<sp/>location.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a904ddb068d3004c2fa52f0c400f3502a" kindref="member">GainFunc</ref>(t,<sp/>((<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>t)-&gt;GetGainPlacementRect(),</highlight></codeline>
<codeline lineno="5546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event,<sp/>event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="5547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5548"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTrackControlsRect(rect,<sp/>midiRect);</highlight></codeline>
<codeline lineno="5550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(midiRect.Contains(event.m_x,<sp/>event.m_y)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="5551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>t)-&gt;LabelClick(midiRect,<sp/>event.m_x,<sp/>event.m_y,</highlight></codeline>
<codeline lineno="5552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event.Button(wxMOUSE_BTN_RIGHT)))<sp/>{</highlight></codeline>
<codeline lineno="5553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5557"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/>//<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5558"><highlight class="normal"></highlight></codeline>
<codeline lineno="5559"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5560"><highlight class="normal"></highlight></codeline>
<codeline lineno="5561"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!isleft)<sp/>{</highlight></codeline>
<codeline lineno="5562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5563"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5564"><highlight class="normal"></highlight></codeline>
<codeline lineno="5565"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>If<sp/>they<sp/>weren&apos;t<sp/>clicking<sp/>on<sp/>a<sp/>particular<sp/>part<sp/>of<sp/>a<sp/>track<sp/>label,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5566"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>deselect<sp/>other<sp/>tracks<sp/>and<sp/>select<sp/>this<sp/>one.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5567"><highlight class="normal"></highlight></codeline>
<codeline lineno="5568"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JH:<sp/>also,<sp/>capture<sp/>the<sp/>current<sp/>track<sp/>for<sp/>rearranging,<sp/>so<sp/>the<sp/>user</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5569"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>can<sp/>drag<sp/>the<sp/>track<sp/>up<sp/>or<sp/>down<sp/>to<sp/>swap<sp/>it<sp/>with<sp/>others</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5570"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!unsafe)<sp/>{</highlight></codeline>
<codeline lineno="5571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9069b09b6fff4b7032754a85627331" kindref="member">mRearrangeCount</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="5572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/>t,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba2c36e63ff445ad7e7b6734bd90ae09e0" kindref="member">IsRearranging</ref><sp/>);</highlight></codeline>
<codeline lineno="5573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad7c9be28a79587ef09a56dadabc19261" kindref="member">TrackPanel::CalculateRearrangingThresholds</ref>(event);</highlight></codeline>
<codeline lineno="5574"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5575"><highlight class="normal"></highlight></codeline>
<codeline lineno="5576"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>If<sp/>the<sp/>shift<sp/>button<sp/>is<sp/>being<sp/>held<sp/>down,<sp/>invert</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5577"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>the<sp/>selection<sp/>on<sp/>this<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5578"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ShiftDown())<sp/>{</highlight></codeline>
<codeline lineno="5579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(t,<sp/>!t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>());</highlight></codeline>
<codeline lineno="5580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_mixer_board" kindref="compound">MixerBoard</ref>*<sp/>pMixerBoard<sp/>=<sp/>this-&gt;<ref refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" kindref="member">GetMixerBoard</ref>();</highlight></codeline>
<codeline lineno="5582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard<sp/>&amp;&amp;<sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>))</highlight></codeline>
<codeline lineno="5583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1a2a833c223d1a03664223fde509065246" kindref="member">RefreshTrackCluster</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)t);</highlight></codeline>
<codeline lineno="5584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5585"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5586"><highlight class="normal"></highlight></codeline>
<codeline lineno="5587"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a942c08d24411790207fd1e275448516e" kindref="member">SelectNone</ref>();</highlight></codeline>
<codeline lineno="5588"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(t);</highlight></codeline>
<codeline lineno="5589"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(t);</highlight></codeline>
<codeline lineno="5590"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae4c957bea9775488e085c370710cd566" kindref="member">SelectTrackLength</ref>(t);</highlight></codeline>
<codeline lineno="5591"><highlight class="normal"></highlight></codeline>
<codeline lineno="5592"><highlight class="normal"><sp/><sp/><sp/>this-&gt;<ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5593"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_mixer_board" kindref="compound">MixerBoard</ref>*<sp/>pMixerBoard<sp/>=<sp/>this-&gt;<ref refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" kindref="member">GetMixerBoard</ref>();</highlight></codeline>
<codeline lineno="5594"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard)</highlight></codeline>
<codeline lineno="5595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1ad655c292c5d7c209cc141cd9bb8648db" kindref="member">RefreshTrackClusters</ref>();</highlight></codeline>
<codeline lineno="5596"><highlight class="normal"></highlight></codeline>
<codeline lineno="5597"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!unsafe)</highlight></codeline>
<codeline lineno="5598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5599"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5600"><highlight class="normal"></highlight></codeline>
<codeline lineno="5603" refid="class_track_panel_1a0357348d18324554fb7da5d1a4d578a8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0357348d18324554fb7da5d1a4d578a8" kindref="member">TrackPanel::HandleRearrange</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5604"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5605"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>are<sp/>we<sp/>finishing<sp/>the<sp/>drag?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5606"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="5607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aea9069b09b6fff4b7032754a85627331" kindref="member">mRearrangeCount</ref><sp/>!=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="5608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/>dir;</highlight></codeline>
<codeline lineno="5609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dir<sp/>=<sp/><ref refid="class_track_panel_1aea9069b09b6fff4b7032754a85627331" kindref="member">mRearrangeCount</ref><sp/>&lt;<sp/>0<sp/>?<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;up&quot;</highlight><highlight class="normal">)<sp/>:<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;down&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Moved<sp/>&apos;%s&apos;<sp/>%s&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="5611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>().c_str(),</highlight></codeline>
<codeline lineno="5612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dir.c_str()),</highlight></codeline>
<codeline lineno="5613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Move<sp/>Track&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="5614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5615"><highlight class="normal"></highlight></codeline>
<codeline lineno="5616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="5617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetCursor(*<ref refid="class_track_panel_1aeb8e3a8ba37bb6113d378e37dd90d910" kindref="member">mArrowCursor</ref>);</highlight></codeline>
<codeline lineno="5618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5619"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5620"><highlight class="normal"></highlight></codeline>
<codeline lineno="5621"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>probably<sp/>harmless<sp/>during<sp/>play?<sp/><sp/>However,<sp/>we<sp/>do<sp/>disallow<sp/>the<sp/>click,<sp/>so<sp/>check<sp/>this<sp/>too.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5622"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>unsafe<sp/>=<sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>();</highlight></codeline>
<codeline lineno="5623"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(unsafe)</highlight></codeline>
<codeline lineno="5624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5625"><highlight class="normal"></highlight></codeline>
<codeline lineno="5626"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_mixer_board" kindref="compound">MixerBoard</ref>*<sp/>pMixerBoard<sp/>=<sp/>this-&gt;<ref refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" kindref="member">GetMixerBoard</ref>();<sp/></highlight><highlight class="comment">//<sp/>Update<sp/>mixer<sp/>board,<sp/>too.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5627"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_y<sp/>&lt;<sp/><ref refid="class_track_panel_1a45c835501dfdd9af6c72801f3bc39b1e" kindref="member">mMoveUpThreshold</ref><sp/>||<sp/>event.m_y<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="5628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a02d9dbf3328954ce21a814f04c4b129f" kindref="member">MoveUp</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="5629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>--<ref refid="class_track_panel_1aea9069b09b6fff4b7032754a85627331" kindref="member">mRearrangeCount</ref>;</highlight></codeline>
<codeline lineno="5630"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard<sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>||</highlight></codeline>
<codeline lineno="5632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note))</highlight></codeline>
<codeline lineno="5633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1ac1f50e2c959930a996d1db07fb2795fb" kindref="member">MoveTrackCluster</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">/*<sp/>up<sp/>*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5634"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard<sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>))</highlight></codeline>
<codeline lineno="5636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1ac1f50e2c959930a996d1db07fb2795fb" kindref="member">MoveTrackCluster</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">/*<sp/>up<sp/>*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5637"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5638"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5639"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_y<sp/>&gt;<sp/><ref refid="class_track_panel_1a2fd86854de50037fe3e55b866a83df45" kindref="member">mMoveDownThreshold</ref><sp/>||<sp/>event.m_y<sp/>&gt;<sp/>GetRect().GetHeight())<sp/>{</highlight></codeline>
<codeline lineno="5640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a6b11b5ce24b188110bdda7e5eb616ce0" kindref="member">MoveDown</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="5641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>++<ref refid="class_track_panel_1aea9069b09b6fff4b7032754a85627331" kindref="member">mRearrangeCount</ref>;</highlight></codeline>
<codeline lineno="5642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>a<sp/>direction<sp/>as<sp/>in<sp/>up<sp/>or<sp/>down.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5643"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard<sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>||</highlight></codeline>
<codeline lineno="5645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note))</highlight></codeline>
<codeline lineno="5646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1ac1f50e2c959930a996d1db07fb2795fb" kindref="member">MoveTrackCluster</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">/*<sp/>down<sp/>*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5647"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard<sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>))</highlight></codeline>
<codeline lineno="5649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1ac1f50e2c959930a996d1db07fb2795fb" kindref="member">MoveTrackCluster</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">/*<sp/>down<sp/>*/</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5650"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5651"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5652"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5653"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5655"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5656"><highlight class="normal"></highlight></codeline>
<codeline lineno="5657"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JH:<sp/>if<sp/>we<sp/>moved<sp/>up<sp/>or<sp/>down,<sp/>recalculate<sp/>the<sp/>thresholds<sp/>and<sp/>make<sp/>sure<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5658"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>track<sp/>is<sp/>fully<sp/>on-screen.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5659"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad7c9be28a79587ef09a56dadabc19261" kindref="member">TrackPanel::CalculateRearrangingThresholds</ref>(event);</highlight></codeline>
<codeline lineno="5660"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="5661"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5662"><highlight class="normal"></highlight></codeline>
<codeline lineno="5665" refid="class_track_panel_1ad7c9be28a79587ef09a56dadabc19261" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad7c9be28a79587ef09a56dadabc19261" kindref="member">TrackPanel::CalculateRearrangingThresholds</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5666"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5667"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="5668"><highlight class="normal"></highlight></codeline>
<codeline lineno="5669"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JH:<sp/>this<sp/>will<sp/>probably<sp/>need<sp/>to<sp/>be<sp/>tweaked<sp/>a<sp/>bit,<sp/>I&apos;m<sp/>just</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5670"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>not<sp/>sure<sp/>what<sp/>formula<sp/>will<sp/>have<sp/>the<sp/>best<sp/>feel<sp/>for<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5671"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>user.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5672"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af6d4ee91fb21d3b75eaa172709a2ac54" kindref="member">CanMoveUp</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>))</highlight></codeline>
<codeline lineno="5673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a45c835501dfdd9af6c72801f3bc39b1e" kindref="member">mMoveUpThreshold</ref><sp/>=</highlight></codeline>
<codeline lineno="5674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event.m_y<sp/>-<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a634a051be14fccff264b33de20f84111" kindref="member">GetGroupHeight</ref>(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>);</highlight></codeline>
<codeline lineno="5675"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a45c835501dfdd9af6c72801f3bc39b1e" kindref="member">mMoveUpThreshold</ref><sp/>=<sp/><ref refid="macint_8h_1a21658776274b3d146c674318b635a334" kindref="member">INT_MIN</ref>;</highlight></codeline>
<codeline lineno="5677"><highlight class="normal"></highlight></codeline>
<codeline lineno="5678"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a2dfa623e6bd746734b80b2fd4832ba3c" kindref="member">CanMoveDown</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>))</highlight></codeline>
<codeline lineno="5679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2fd86854de50037fe3e55b866a83df45" kindref="member">mMoveDownThreshold</ref><sp/>=</highlight></codeline>
<codeline lineno="5680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event.m_y<sp/>+<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a634a051be14fccff264b33de20f84111" kindref="member">GetGroupHeight</ref>(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>,</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>);</highlight></codeline>
<codeline lineno="5681"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2fd86854de50037fe3e55b866a83df45" kindref="member">mMoveDownThreshold</ref><sp/>=<sp/><ref refid="macint_8h_1a9ec306f36d50c7375e74f0d1c55a3a67" kindref="member">INT_MAX</ref>;</highlight></codeline>
<codeline lineno="5683"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5684"><highlight class="normal"></highlight></codeline>
<codeline lineno="5685" refid="class_track_panel_1a904ddb068d3004c2fa52f0c400f3502a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a904ddb068d3004c2fa52f0c400f3502a" kindref="member">TrackPanel::GainFunc</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxRect<sp/>rect,<sp/>wxMouseEvent<sp/>&amp;event,</highlight></codeline>
<codeline lineno="5686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y)</highlight></codeline>
<codeline lineno="5687"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5688"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>sliderRect;</highlight></codeline>
<codeline lineno="5689"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetGainRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="5690"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!sliderRect.Contains(x,<sp/>y))</highlight></codeline>
<codeline lineno="5691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5692"><highlight class="normal"></highlight></codeline>
<codeline lineno="5693"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/>t,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baa0ee8d095831bdb80db0a3d767669af8" kindref="member">IsGainSliding</ref>);</highlight></codeline>
<codeline lineno="5694"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="5695"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5e05c68da6ecc144c58c90507518a8d7" kindref="member">HandleSliders</ref>(event,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5696"><highlight class="normal"></highlight></codeline>
<codeline lineno="5697"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5698"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5699"><highlight class="normal"></highlight></codeline>
<codeline lineno="5700" refid="class_track_panel_1aef0d5f21303aac8eb1e309acf3480655" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aef0d5f21303aac8eb1e309acf3480655" kindref="member">TrackPanel::PanFunc</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxRect<sp/>rect,<sp/>wxMouseEvent<sp/>&amp;event,</highlight></codeline>
<codeline lineno="5701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y)</highlight></codeline>
<codeline lineno="5702"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5703"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>sliderRect;</highlight></codeline>
<codeline lineno="5704"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetPanRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="5705"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!sliderRect.Contains(x,<sp/>y))</highlight></codeline>
<codeline lineno="5706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5707"><highlight class="normal"></highlight></codeline>
<codeline lineno="5708"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/>t,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bab5b85a999c356e21490678b10ba6e997" kindref="member">IsPanSliding</ref>);</highlight></codeline>
<codeline lineno="5709"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="5710"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5e05c68da6ecc144c58c90507518a8d7" kindref="member">HandleSliders</ref>(event,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5711"><highlight class="normal"></highlight></codeline>
<codeline lineno="5712"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5713"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5714"><highlight class="normal"></highlight></codeline>
<codeline lineno="5718" refid="class_track_panel_1adbffbdfce4223990a11b3167b1ee049a" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1adbffbdfce4223990a11b3167b1ee049a" kindref="member">TrackPanel::MuteSoloFunc</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxRect<sp/>rect,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y,</highlight></codeline>
<codeline lineno="5719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>solo)</highlight></codeline>
<codeline lineno="5720"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5721"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>buttonRect;</highlight></codeline>
<codeline lineno="5722"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetMuteSoloRect(rect,<sp/>buttonRect,<sp/>solo,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="5723"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!buttonRect.Contains(x,<sp/>y))</highlight></codeline>
<codeline lineno="5724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5725"><highlight class="normal"></highlight></codeline>
<codeline lineno="5726"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5727"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/>t,<sp/>solo<sp/>?<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba7750c1bc9eabfb7cf297de627fd2ce8b" kindref="member">IsSoloing</ref><sp/>:<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba2a64907f1fe32a06a375449216f1ad02" kindref="member">IsMuting</ref>);</highlight></codeline>
<codeline lineno="5728"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="5729"><highlight class="normal"></highlight></codeline>
<codeline lineno="5730"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMuteSolo(&amp;dc,<sp/>rect,<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>solo,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="5731"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5732"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5733"><highlight class="normal"></highlight></codeline>
<codeline lineno="5734" refid="class_track_panel_1a99e11c40842e9b3aede92c0f82d8689c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a99e11c40842e9b3aede92c0f82d8689c" kindref="member">TrackPanel::TrackSelFunc</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>WXUNUSED(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>),<sp/>wxRect<sp/>rect,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y)</highlight></codeline>
<codeline lineno="5735"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5736"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>First<sp/>check<sp/>the<sp/>blank<sp/>space<sp/>to<sp/>left<sp/>of<sp/>minimize<sp/>button.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5737"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>selRect;</highlight></codeline>
<codeline lineno="5738"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetMinimizeRect(rect,<sp/>selRect);<sp/></highlight><highlight class="comment">//<sp/>for<sp/>y<sp/>and<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5739"><highlight class="normal"><sp/><sp/><sp/>selRect.x<sp/>=<sp/>rect.x;</highlight></codeline>
<codeline lineno="5740"><highlight class="normal"><sp/><sp/><sp/>selRect.width<sp/>=<sp/>16;<sp/></highlight><highlight class="comment">//<sp/>(kTrackInfoBtnSize)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5741"><highlight class="normal"><sp/><sp/><sp/>selRect.height++;</highlight></codeline>
<codeline lineno="5742"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(selRect.Contains(x,<sp/>y))</highlight></codeline>
<codeline lineno="5743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5744"><highlight class="normal"></highlight></codeline>
<codeline lineno="5745"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>the<sp/>sync-lock<sp/>rect.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5746"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetSyncLockIconRect(rect,<sp/>selRect);</highlight></codeline>
<codeline lineno="5747"><highlight class="normal"><sp/><sp/><sp/>selRect.height++;</highlight></codeline>
<codeline lineno="5748"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>selRect.Contains(x,<sp/>y);</highlight></codeline>
<codeline lineno="5749"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5750"><highlight class="normal"></highlight></codeline>
<codeline lineno="5751" refid="class_track_panel_1a9244f227b1e2cb6edfd24e9650ac2235" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a9244f227b1e2cb6edfd24e9650ac2235" kindref="member">TrackPanel::MinimizeFunc</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxRect<sp/>rect,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y)</highlight></codeline>
<codeline lineno="5752"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5753"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>buttonRect;</highlight></codeline>
<codeline lineno="5754"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetMinimizeRect(rect,<sp/>buttonRect);</highlight></codeline>
<codeline lineno="5755"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!buttonRect.Contains(x,<sp/>y))</highlight></codeline>
<codeline lineno="5756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5757"><highlight class="normal"></highlight></codeline>
<codeline lineno="5758"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(t,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf180ce3b7d4ece7b539329ffd0d3c418" kindref="member">IsMinimizing</ref>);</highlight></codeline>
<codeline lineno="5759"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="5760"><highlight class="normal"></highlight></codeline>
<codeline lineno="5761"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5762"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMinimize(&amp;dc,<sp/>rect,<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5763"><highlight class="normal"></highlight></codeline>
<codeline lineno="5764"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5765"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5766"><highlight class="normal"></highlight></codeline>
<codeline lineno="5767" refid="class_track_panel_1a856efe4b8f386660864d5a82087f5599" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a856efe4b8f386660864d5a82087f5599" kindref="member">TrackPanel::CloseFunc</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxRect<sp/>rect,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y)</highlight></codeline>
<codeline lineno="5768"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5769"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>closeRect;</highlight></codeline>
<codeline lineno="5770"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetCloseBoxRect(rect,<sp/>closeRect);</highlight></codeline>
<codeline lineno="5771"><highlight class="normal"></highlight></codeline>
<codeline lineno="5772"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!closeRect.Contains(x,<sp/>y))</highlight></codeline>
<codeline lineno="5773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5774"><highlight class="normal"></highlight></codeline>
<codeline lineno="5775"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5776"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/>t,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba65d4e06b600c85131d6280824090c839" kindref="member">IsClosing</ref><sp/>);</highlight></codeline>
<codeline lineno="5777"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="5778"><highlight class="normal"></highlight></codeline>
<codeline lineno="5779"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawCloseBox(&amp;dc,<sp/>rect,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5780"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5781"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5782"><highlight class="normal"></highlight></codeline>
<codeline lineno="5783" refid="class_track_panel_1a13edb641a0eeda3df1fc054ba8cbfaf2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a13edb641a0eeda3df1fc054ba8cbfaf2" kindref="member">TrackPanel::PopupFunc</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxRect<sp/>rect,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y)</highlight></codeline>
<codeline lineno="5784"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5785"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>titleRect;</highlight></codeline>
<codeline lineno="5786"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTitleBarRect(rect,<sp/>titleRect);</highlight></codeline>
<codeline lineno="5787"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!titleRect.Contains(x,<sp/>y))</highlight></codeline>
<codeline lineno="5788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5789"><highlight class="normal"></highlight></codeline>
<codeline lineno="5790"><highlight class="normal"><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5791"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/>t,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba0bc8af996749c9a282d6d1cc085bb718" kindref="member">IsPopping</ref><sp/>);</highlight></codeline>
<codeline lineno="5792"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="5793"><highlight class="normal"></highlight></codeline>
<codeline lineno="5794"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawTitleBar(&amp;dc,<sp/>rect,<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5795"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5796"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5797"><highlight class="normal"></highlight></codeline>
<codeline lineno="5802" refid="class_track_panel_1a203ae1d83490e38d959fd4b646ac1aac" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a203ae1d83490e38d959fd4b646ac1aac" kindref="member">TrackPanel::HandleResizeClick</ref>(<sp/>wxMouseEvent<sp/>&amp;<sp/>event<sp/>)</highlight></codeline>
<codeline lineno="5803"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5804"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rTrack;</highlight></codeline>
<codeline lineno="5805"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rLabel;</highlight></codeline>
<codeline lineno="5806"><highlight class="normal"></highlight></codeline>
<codeline lineno="5807"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>Figure<sp/>out<sp/>what<sp/>track<sp/>is<sp/>about<sp/>to<sp/>be<sp/>resized</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5808"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*track<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rTrack);</highlight></codeline>
<codeline lineno="5809"><highlight class="normal"></highlight></codeline>
<codeline lineno="5810"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!track)<sp/>{</highlight></codeline>
<codeline lineno="5811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>will<sp/>only<sp/>return<sp/>unlinked<sp/>tracks<sp/>or<sp/>left<sp/>channels<sp/>of<sp/>stereo<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>or<sp/>NULL:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>track<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>&amp;rLabel);</highlight></codeline>
<codeline lineno="5814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>stereo,<sp/>get<sp/>the<sp/>right<sp/>channel.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(track<sp/>&amp;&amp;<sp/>track-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())</highlight></codeline>
<codeline lineno="5816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>track<sp/>=<sp/>track-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="5817"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5818"><highlight class="normal"></highlight></codeline>
<codeline lineno="5819"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!track)<sp/>{</highlight></codeline>
<codeline lineno="5820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5821"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5822"><highlight class="normal"></highlight></codeline>
<codeline lineno="5823"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a18c3e3324891b40b39724a2d010a4331" kindref="member">mMouseClickY</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="5824"><highlight class="normal"></highlight></codeline>
<codeline lineno="5825"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5826"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>To<sp/>do:<sp/>escape<sp/>key</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5827"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)){</highlight></codeline>
<codeline lineno="5828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//STM:<sp/><sp/>Determine<sp/>whether<sp/>we<sp/>should<sp/>rescale<sp/>one<sp/>or<sp/>two<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetVirtualStereo())<sp/>{</highlight></codeline>
<codeline lineno="5830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mCapturedTrack<sp/>is<sp/>the<sp/>lower<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="5833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f6de2f6ce3b06fca6ecc61ca664ce5" kindref="member">IsResizingBelowLinkedTracks</ref>);</highlight></codeline>
<codeline lineno="5834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="5836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mCapturedTrack<sp/>is<sp/>the<sp/>upper<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="5839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba1cc893666c65afe6a5a9724174fb50f6" kindref="member">IsResizingBetweenLinkedTracks</ref>);</highlight></codeline>
<codeline lineno="5840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5841"><highlight class="normal"><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="5842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*prev<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="5843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref><sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="5844"><highlight class="normal"></highlight></codeline>
<codeline lineno="5845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//STM:<sp/><sp/>Determine<sp/>whether<sp/>we<sp/>should<sp/>rescale<sp/>one<sp/>or<sp/>two<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(prev<sp/>&amp;&amp;<sp/>prev-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()<sp/>==<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)<sp/>{</highlight></codeline>
<codeline lineno="5847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mCapturedTrack<sp/>is<sp/>the<sp/>lower<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="5849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetMinimized();</highlight></codeline>
<codeline lineno="5850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/>prev-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f6de2f6ce3b06fca6ecc61ca664ce5" kindref="member">IsResizingBelowLinkedTracks</ref>);</highlight></codeline>
<codeline lineno="5852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next<sp/>&amp;&amp;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLink()<sp/>==<sp/><ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref>)<sp/>{</highlight></codeline>
<codeline lineno="5854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mCapturedTrack<sp/>is<sp/>the<sp/>upper<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/>next-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref><sp/>=<sp/>next-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>();</highlight></codeline>
<codeline lineno="5857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="5858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba1cc893666c65afe6a5a9724174fb50f6" kindref="member">IsResizingBetweenLinkedTracks</ref>);</highlight></codeline>
<codeline lineno="5859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="5861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>Save<sp/>the<sp/>initial<sp/>mouse<sp/>location<sp/>and<sp/>the<sp/>initial<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="5863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetMinimized();</highlight></codeline>
<codeline lineno="5864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf19cc2d88ae2024dcbf71408c71636b2" kindref="member">IsResizing</ref>);</highlight></codeline>
<codeline lineno="5865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5866"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5867"><highlight class="normal"></highlight><highlight class="preprocessor">#else<sp/>//<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5868"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*prev<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(track);</highlight></codeline>
<codeline lineno="5869"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref><sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(track);</highlight></codeline>
<codeline lineno="5870"><highlight class="normal"></highlight></codeline>
<codeline lineno="5871"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//STM:<sp/><sp/>Determine<sp/>whether<sp/>we<sp/>should<sp/>rescale<sp/>one<sp/>or<sp/>two<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5872"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(prev<sp/>&amp;&amp;<sp/>prev-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()<sp/>==<sp/>track)<sp/>{</highlight></codeline>
<codeline lineno="5873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mCapturedTrack<sp/>is<sp/>the<sp/>lower<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a869fb10d3f2ab3181553b3047f664ac6" kindref="member">mInitialActualHeight</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1ac54e9cb9c256f7dd3605f9a63e041479" kindref="member">GetActualHeight</ref>();</highlight></codeline>
<codeline lineno="5876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>();</highlight></codeline>
<codeline lineno="5877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/>prev-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aeeb50d3d2469be1829175425b1dc58c3" kindref="member">mInitialUpperActualHeight</ref><sp/>=<sp/>prev-&gt;<ref refid="class_track_1ac54e9cb9c256f7dd3605f9a63e041479" kindref="member">GetActualHeight</ref>();</highlight></codeline>
<codeline lineno="5879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(track,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f6de2f6ce3b06fca6ecc61ca664ce5" kindref="member">IsResizingBelowLinkedTracks</ref>);</highlight></codeline>
<codeline lineno="5880"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5881"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next<sp/>&amp;&amp;<sp/>track-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()<sp/>==<sp/><ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref>)<sp/>{</highlight></codeline>
<codeline lineno="5882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>mCapturedTrack<sp/>is<sp/>the<sp/>upper<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/>next-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a869fb10d3f2ab3181553b3047f664ac6" kindref="member">mInitialActualHeight</ref><sp/>=<sp/>next-&gt;<ref refid="class_track_1ac54e9cb9c256f7dd3605f9a63e041479" kindref="member">GetActualHeight</ref>();</highlight></codeline>
<codeline lineno="5885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref><sp/>=<sp/>next-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>();</highlight></codeline>
<codeline lineno="5886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aeeb50d3d2469be1829175425b1dc58c3" kindref="member">mInitialUpperActualHeight</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1ac54e9cb9c256f7dd3605f9a63e041479" kindref="member">GetActualHeight</ref>();</highlight></codeline>
<codeline lineno="5888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(track,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba1cc893666c65afe6a5a9724174fb50f6" kindref="member">IsResizingBetweenLinkedTracks</ref>);</highlight></codeline>
<codeline lineno="5889"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5890"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="5891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>Save<sp/>the<sp/>initial<sp/>mouse<sp/>location<sp/>and<sp/>the<sp/>initial<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a869fb10d3f2ab3181553b3047f664ac6" kindref="member">mInitialActualHeight</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1ac54e9cb9c256f7dd3605f9a63e041479" kindref="member">GetActualHeight</ref>();</highlight></codeline>
<codeline lineno="5894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac65e65ebed3314ddb87c5b6c39795392" kindref="member">mInitialMinimized</ref><sp/>=<sp/>track-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>();</highlight></codeline>
<codeline lineno="5895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(track,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf19cc2d88ae2024dcbf71408c71636b2" kindref="member">IsResizing</ref>);</highlight></codeline>
<codeline lineno="5896"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5897"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/>//<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5898"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5899"><highlight class="normal"></highlight></codeline>
<codeline lineno="5906" refid="class_track_panel_1a08d9e0522f8d51e7db0a37f275d4982d" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a08d9e0522f8d51e7db0a37f275d4982d" kindref="member">TrackPanel::HandleResizeButtonUp</ref>(wxMouseEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="5907"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5908"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="5909"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="5910"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5911"><highlight class="normal">}</highlight></codeline>
<codeline lineno="5912"><highlight class="normal"></highlight></codeline>
<codeline lineno="5917" refid="class_track_panel_1a3d11e0f6e7538e7d58f256daad4c917d" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a3d11e0f6e7538e7d58f256daad4c917d" kindref="member">TrackPanel::HandleResizeDrag</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="5918"><highlight class="normal">{</highlight></codeline>
<codeline lineno="5919"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>delta<sp/>=<sp/>(</highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y<sp/>-<sp/><ref refid="class_track_panel_1a18c3e3324891b40b39724a2d010a4331" kindref="member">mMouseClickY</ref>);</highlight></codeline>
<codeline lineno="5920"><highlight class="normal"></highlight></codeline>
<codeline lineno="5921"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>first<sp/>drag,<sp/>jump<sp/>out<sp/>of<sp/>minimized<sp/>mode.<sp/><sp/>Initial<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5922"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>will<sp/>be<sp/>height<sp/>of<sp/>minimized<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5923"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5924"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>used<sp/>to<sp/>be<sp/>in<sp/>HandleResizeClick(),<sp/>but<sp/>simply<sp/>clicking</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5925"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>on<sp/>a<sp/>resize<sp/>border<sp/>would<sp/>switch<sp/>the<sp/>minimized<sp/>state.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5926"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>())<sp/>{</highlight></codeline>
<codeline lineno="5927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*link<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="5928"><highlight class="normal"></highlight></codeline>
<codeline lineno="5929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>());</highlight></codeline>
<codeline lineno="5930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5931"><highlight class="normal"></highlight></codeline>
<codeline lineno="5932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link)<sp/>{</highlight></codeline>
<codeline lineno="5933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(link-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>());</highlight></codeline>
<codeline lineno="5934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>link-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initial<sp/>values<sp/>must<sp/>be<sp/>reset<sp/>since<sp/>they<sp/>weren&apos;t<sp/>based<sp/>on<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>minimized<sp/>heights.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/>link-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5940"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)){</highlight></codeline>
<codeline lineno="5942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a7542cc50308134d4f060af0363654234" kindref="member">SetMinimized</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="5944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5946"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5947"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5948"><highlight class="normal"></highlight></codeline>
<codeline lineno="5949"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//STM:<sp/>We<sp/>may<sp/>be<sp/>dragging<sp/>one<sp/>or<sp/>two<sp/>(stereo)<sp/>tracks.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5950"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>two,<sp/>resize<sp/>proportionally<sp/>if<sp/>we<sp/>are<sp/>dragging<sp/>the<sp/>lower<sp/>track,<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5951"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>adjust<sp/>compensatively<sp/>if<sp/>we<sp/>are<sp/>dragging<sp/>the<sp/>upper<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5952"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5953"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>)</highlight></codeline>
<codeline lineno="5954"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5955"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f6de2f6ce3b06fca6ecc61ca664ce5" kindref="member">IsResizingBelowLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="5956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="5957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)){</highlight></codeline>
<codeline lineno="5958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>proportion<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&gt;(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref>)</highlight></codeline>
<codeline lineno="5959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/<sp/>(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref>);</highlight></codeline>
<codeline lineno="5960"><highlight class="normal"></highlight></codeline>
<codeline lineno="5961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&gt;</highlight></codeline>
<codeline lineno="5962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/>delta<sp/>*<sp/>proportion);</highlight></codeline>
<codeline lineno="5963"><highlight class="normal"></highlight></codeline>
<codeline lineno="5964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newUpperTrackHeight<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&gt;</highlight></codeline>
<codeline lineno="5965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/>delta<sp/>*<sp/>(1.0<sp/>-<sp/>proportion));</highlight></codeline>
<codeline lineno="5966"><highlight class="normal"></highlight></codeline>
<codeline lineno="5967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//make<sp/>sure<sp/>neither<sp/>track<sp/>is<sp/>smaller<sp/>than<sp/>its<sp/>minimum<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="5969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="5970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newUpperTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="5971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="5972"><highlight class="normal"></highlight></codeline>
<codeline lineno="5973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight,</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="5974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newUpperTrackHeight);</highlight></codeline>
<codeline lineno="5975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="5977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*prev<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="5978"><highlight class="normal"></highlight></codeline>
<codeline lineno="5979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>proportion<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&gt;(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref>)</highlight></codeline>
<codeline lineno="5980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/<sp/>(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref>);</highlight></codeline>
<codeline lineno="5981"><highlight class="normal"></highlight></codeline>
<codeline lineno="5982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&gt;</highlight></codeline>
<codeline lineno="5983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/>delta<sp/>*<sp/>proportion);</highlight></codeline>
<codeline lineno="5984"><highlight class="normal"></highlight></codeline>
<codeline lineno="5985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newUpperTrackHeight<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&gt;</highlight></codeline>
<codeline lineno="5986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/>delta<sp/>*<sp/>(1.0<sp/>-<sp/>proportion));</highlight></codeline>
<codeline lineno="5987"><highlight class="normal"></highlight></codeline>
<codeline lineno="5988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//make<sp/>sure<sp/>neither<sp/>track<sp/>is<sp/>smaller<sp/>than<sp/>its<sp/>minimum<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="5990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="5991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newUpperTrackHeight<sp/>&lt;<sp/>prev-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="5992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=<sp/>prev-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="5993"><highlight class="normal"></highlight></codeline>
<codeline lineno="5994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight);</highlight></codeline>
<codeline lineno="5995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newUpperTrackHeight);</highlight></codeline>
<codeline lineno="5996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="5998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="5999"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba1cc893666c65afe6a5a9724174fb50f6" kindref="member">IsResizingBetweenLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="6000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>)){</highlight></codeline>
<codeline lineno="6002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newUpperTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/>delta;</highlight></codeline>
<codeline lineno="6003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/>delta;</highlight></codeline>
<codeline lineno="6004"><highlight class="normal"></highlight></codeline>
<codeline lineno="6005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>neither<sp/>track<sp/>is<sp/>smaller<sp/>than<sp/>its<sp/>minimum<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())<sp/>{</highlight></codeline>
<codeline lineno="6007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=</highlight></codeline>
<codeline lineno="6009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newUpperTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())<sp/>{</highlight></codeline>
<codeline lineno="6012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=</highlight></codeline>
<codeline lineno="6014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>temp<sp/>=<sp/>1.0f;</highlight></codeline>
<codeline lineno="6017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(newUpperTrackHeight<sp/>!=<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>)</highlight></codeline>
<codeline lineno="6018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>(float)newUpperTrackHeight/(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)(newUpperTrackHeight<sp/>+<sp/>newTrackHeight);</highlight></codeline>
<codeline lineno="6019"><highlight class="normal"></highlight></codeline>
<codeline lineno="6020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;SetVirtualTrackPercentage(temp);</highlight></codeline>
<codeline lineno="6021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newUpperTrackHeight);</highlight></codeline>
<codeline lineno="6022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight,</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="6025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref><sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="6026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newUpperTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/>delta;</highlight></codeline>
<codeline lineno="6027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/>delta;</highlight></codeline>
<codeline lineno="6028"><highlight class="normal"></highlight></codeline>
<codeline lineno="6029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>neither<sp/>track<sp/>is<sp/>smaller<sp/>than<sp/>its<sp/>minimum<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>next-&gt;GetMinimizedHeight())<sp/>{</highlight></codeline>
<codeline lineno="6031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/>next-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=</highlight></codeline>
<codeline lineno="6033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/>next-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newUpperTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())<sp/>{</highlight></codeline>
<codeline lineno="6036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=</highlight></codeline>
<codeline lineno="6038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6040"><highlight class="normal"></highlight></codeline>
<codeline lineno="6041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newUpperTrackHeight);</highlight></codeline>
<codeline lineno="6042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight);</highlight></codeline>
<codeline lineno="6043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6047"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf19cc2d88ae2024dcbf71408c71636b2" kindref="member">IsResizing</ref>:</highlight></codeline>
<codeline lineno="6048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/>delta;</highlight></codeline>
<codeline lineno="6050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="6051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight);</highlight></codeline>
<codeline lineno="6053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6055"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="6056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>refresh<sp/>in<sp/>this<sp/>case.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6058"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6059"><highlight class="normal"></highlight><highlight class="preprocessor">#else<sp/>//<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6060"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>)</highlight></codeline>
<codeline lineno="6061"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6062"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f6de2f6ce3b06fca6ecc61ca664ce5" kindref="member">IsResizingBelowLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="6063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*prev<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="6065"><highlight class="normal"></highlight></codeline>
<codeline lineno="6066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>proportion<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&gt;(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref>)</highlight></codeline>
<codeline lineno="6067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/<sp/>(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref>);</highlight></codeline>
<codeline lineno="6068"><highlight class="normal"></highlight></codeline>
<codeline lineno="6069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&gt;</highlight></codeline>
<codeline lineno="6070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/>delta<sp/>*<sp/>proportion);</highlight></codeline>
<codeline lineno="6071"><highlight class="normal"></highlight></codeline>
<codeline lineno="6072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newUpperTrackHeight<sp/>=<sp/>static_cast<sp/>&lt;<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&gt;</highlight></codeline>
<codeline lineno="6073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/>delta<sp/>*<sp/>(1.0<sp/>-<sp/>proportion));</highlight></codeline>
<codeline lineno="6074"><highlight class="normal"></highlight></codeline>
<codeline lineno="6075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//make<sp/>sure<sp/>neither<sp/>track<sp/>is<sp/>smaller<sp/>than<sp/>its<sp/>minimum<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="6077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newUpperTrackHeight<sp/>&lt;<sp/>prev-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="6079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=<sp/>prev-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6080"><highlight class="normal"></highlight></codeline>
<codeline lineno="6081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight);</highlight></codeline>
<codeline lineno="6082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newUpperTrackHeight);</highlight></codeline>
<codeline lineno="6083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6085"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba1cc893666c65afe6a5a9724174fb50f6" kindref="member">IsResizingBetweenLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="6086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref><sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="6088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newUpperTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/>delta;</highlight></codeline>
<codeline lineno="6089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/>delta;</highlight></codeline>
<codeline lineno="6090"><highlight class="normal"></highlight></codeline>
<codeline lineno="6091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>sure<sp/>neither<sp/>track<sp/>is<sp/>smaller<sp/>than<sp/>its<sp/>minimum<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>next-&gt;GetMinimizedHeight())<sp/>{</highlight></codeline>
<codeline lineno="6093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/>next-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=</highlight></codeline>
<codeline lineno="6095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/>next-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newUpperTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())<sp/>{</highlight></codeline>
<codeline lineno="6098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newUpperTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=</highlight></codeline>
<codeline lineno="6100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8dad5601fc0fdaaa4b59ec6598caa16" kindref="member">mInitialUpperTrackHeight</ref><sp/>+<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>-<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6102"><highlight class="normal"></highlight></codeline>
<codeline lineno="6103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newUpperTrackHeight);</highlight></codeline>
<codeline lineno="6104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight);</highlight></codeline>
<codeline lineno="6105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6107"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf19cc2d88ae2024dcbf71408c71636b2" kindref="member">IsResizing</ref>:</highlight></codeline>
<codeline lineno="6108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5a8b094d437f6aa699a5d28084cbfa46" kindref="member">mInitialTrackHeight</ref><sp/>+<sp/>delta;</highlight></codeline>
<codeline lineno="6110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newTrackHeight<sp/>&lt;<sp/>mCapturedTrack-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="6111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTrackHeight<sp/>=<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1aa39728150b3da63f63b35b5974f8839a" kindref="member">GetMinimizedHeight</ref>();</highlight></codeline>
<codeline lineno="6112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1a6c03f9842f6f294e69773ab33d794d6e" kindref="member">SetHeight</ref>(newTrackHeight);</highlight></codeline>
<codeline lineno="6113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6115"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="6116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>refresh<sp/>in<sp/>this<sp/>case.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6118"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6119"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/>//<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6120"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6121"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6122"><highlight class="normal"></highlight></codeline>
<codeline lineno="6128" refid="class_track_panel_1a4b851ca053791a732be27475fb2bb5b0" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4b851ca053791a732be27475fb2bb5b0" kindref="member">TrackPanel::HandleResize</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6129"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6130"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown())<sp/>{</highlight></codeline>
<codeline lineno="6131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a203ae1d83490e38d959fd4b646ac1aac" kindref="member">HandleResizeClick</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="6132"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6133"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())</highlight></codeline>
<codeline lineno="6134"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a08d9e0522f8d51e7db0a37f275d4982d" kindref="member">HandleResizeButtonUp</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="6136"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6137"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="6138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3d11e0f6e7538e7d58f256daad4c917d" kindref="member">HandleResizeDrag</ref>(<sp/>event<sp/>);</highlight></codeline>
<codeline lineno="6139"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6140"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6141"><highlight class="normal"></highlight></codeline>
<codeline lineno="6143" refid="class_track_panel_1ad11332673db81ee10ecbe292f4b31ee9" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad11332673db81ee10ecbe292f4b31ee9" kindref="member">TrackPanel::HandleWheelRotation</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6144"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6145"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aa61f29d8611a7105b2fbccc3e5cfc13e" kindref="member">GetTracks</ref>()-&gt;IsEmpty())</highlight></codeline>
<codeline lineno="6146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Scrolling<sp/>and<sp/>Zoom<sp/>in<sp/>and<sp/>out<sp/>commands<sp/>are<sp/>disabled<sp/>when<sp/>there<sp/>are<sp/>no<sp/>tracks.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>should<sp/>be<sp/>disabled<sp/>too<sp/>for<sp/>consistency.<sp/><sp/>Otherwise</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>you<sp/>do<sp/>see<sp/>changes<sp/>in<sp/>the<sp/>time<sp/>ruler.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6150"><highlight class="normal"></highlight></codeline>
<codeline lineno="6151"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Special<sp/>case<sp/>of<sp/>pointer<sp/>in<sp/>the<sp/>vertical<sp/>ruler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6152"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="6154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>pTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="6155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;<sp/>event.m_x<sp/>&gt;=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a84b1e97640d44b29383fe5919fabf9ff" kindref="member">HandleWheelRotationInVRuler</ref>(event,<sp/>pTrack,<sp/>rect);</highlight></codeline>
<codeline lineno="6157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6159"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6160"><highlight class="normal"></highlight></codeline>
<codeline lineno="6161"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>steps<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_wheelRotation<sp/>/</highlight></codeline>
<codeline lineno="6162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_wheelDelta<sp/>&gt;<sp/>0<sp/>?<sp/>(double)event.m_wheelDelta<sp/>:<sp/>120.0);</highlight></codeline>
<codeline lineno="6163"><highlight class="normal"></highlight></codeline>
<codeline lineno="6164"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ShiftDown()</highlight></codeline>
<codeline lineno="6165"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Don&apos;t<sp/>pan<sp/>during<sp/>smooth<sp/>scrolling.<sp/><sp/>That<sp/>would<sp/>conflict<sp/>with<sp/>keeping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>play<sp/>indicator<sp/>centered.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!<ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref></highlight></codeline>
<codeline lineno="6169"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="6171"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MM:<sp/>Scroll<sp/>left/right<sp/>when<sp/>used<sp/>with<sp/>Shift<sp/>key<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ab4427ec0211190e135643aee17b82083" kindref="member">TP_ScrollWindow</ref>(</highlight></codeline>
<codeline lineno="6174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a1a372776b3fc3c9a1fe7f7377a996745" kindref="member">OffsetTimeByPixels</ref>(</highlight></codeline>
<codeline lineno="6175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(0),<sp/>50.0<sp/>*<sp/>-steps));</highlight></codeline>
<codeline lineno="6176"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6177"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.CmdDown())</highlight></codeline>
<codeline lineno="6178"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6179"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JKC:<sp/>Alternative<sp/>scroll<sp/>wheel<sp/>zooming<sp/>code</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>using<sp/>AudacityProject<sp/>zooming,<sp/>which<sp/>is<sp/>smarter,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>it<sp/>keeps<sp/>selections<sp/>on<sp/>screen<sp/>and<sp/>centred<sp/>if<sp/>it<sp/>can,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>also<sp/>this<sp/>ensures<sp/>mousewheel<sp/>and<sp/>zoom<sp/>buttons<sp/>give<sp/>same<sp/>result.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ZoomFactor<sp/>=<sp/>pow(2.0,<sp/>steps);</highlight></codeline>
<codeline lineno="6185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_audacity_project" kindref="compound">AudacityProject</ref><sp/>*<ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>();</highlight></codeline>
<codeline lineno="6186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>steps<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="6187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1a0afc0590f0d4a7f103510e486a97096b" kindref="member">ZoomInByFactor</ref>(<sp/>ZoomFactor<sp/>);</highlight></codeline>
<codeline lineno="6188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="class_audacity_project_1adb9f4960f0c28961f61b344c5408f1b3" kindref="member">ZoomOutByFactor</ref>(<sp/>ZoomFactor<sp/>);</highlight></codeline>
<codeline lineno="6190"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MM:<sp/>Zoom<sp/>in/out<sp/>when<sp/>used<sp/>with<sp/>Control<sp/>key<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We&apos;re<sp/>converting<sp/>pixel<sp/>positions<sp/>to<sp/>times,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>counting<sp/>pixels<sp/>from<sp/>the<sp/>left<sp/>edge<sp/>of<sp/>the<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackLeftEdge<sp/>=<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>();</highlight></codeline>
<codeline lineno="6195"><highlight class="normal"></highlight></codeline>
<codeline lineno="6196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Time<sp/>corresponding<sp/>to<sp/>mouse<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxCoord<sp/>xx;</highlight></codeline>
<codeline lineno="6198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>center_h;</highlight></codeline>
<codeline lineno="6199"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref>)<sp/>{</highlight></codeline>
<codeline lineno="6201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Expand<sp/>or<sp/>contract<sp/>about<sp/>the<sp/>center,<sp/>ignoring<sp/>mouse<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>center_h<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>+<sp/>(<ref refid="class_track_panel_1ab5a83bffa16363506f7ff3de1939da9a" kindref="member">GetScreenEndTime</ref>()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>)<sp/>/<sp/>2.0;</highlight></codeline>
<codeline lineno="6203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xx<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(center_h,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="6204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6206"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xx<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="6209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>center_h<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(xx,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="6210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Time<sp/>corresponding<sp/>to<sp/>last<sp/>(most<sp/>far<sp/>right)<sp/>audio.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>audioEndTime<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a363c0208ea73546e90ca49887cefc5a8" kindref="member">GetEndTime</ref>();</highlight></codeline>
<codeline lineno="6213"><highlight class="normal"></highlight></codeline>
<codeline lineno="6214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>zooming<sp/>in<sp/>in<sp/>empty<sp/>space,<sp/>it&apos;s<sp/>easy<sp/>to<sp/>&apos;lose&apos;<sp/>the<sp/>waveform.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>prevents<sp/>it.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IF<sp/>zooming<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(steps<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="6218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IF<sp/>mouse<sp/>is<sp/>to<sp/>right<sp/>of<sp/>audio</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(center_h<sp/>&gt;<sp/>audioEndTime)</highlight></codeline>
<codeline lineno="6221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zooming<sp/>brings<sp/>far<sp/>right<sp/>of<sp/>audio<sp/>to<sp/>mouse.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>center_h<sp/>=<sp/>audioEndTime;</highlight></codeline>
<codeline lineno="6223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6224"><highlight class="normal"></highlight></codeline>
<codeline lineno="6225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae3d12affa4d45347738614b5f51f5937" kindref="member">ZoomBy</ref>(pow(2.0,<sp/>steps));</highlight></codeline>
<codeline lineno="6226"><highlight class="normal"></highlight></codeline>
<codeline lineno="6227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>new_center_h<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(xx,<sp/>trackLeftEdge);</highlight></codeline>
<codeline lineno="6228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>+=<sp/>(center_h<sp/>-<sp/>new_center_h);</highlight></codeline>
<codeline lineno="6229"><highlight class="normal"></highlight></codeline>
<codeline lineno="6230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="6231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6232"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6233"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6234"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6235"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SCROLL_WHEEL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newLogMaxScrubSpeed<sp/>=<sp/><ref refid="class_track_panel_1a8588a9e934cd4cf2933b446c8eae5679" kindref="member">mLogMaxScrubSpeed</ref><sp/>+<sp/>steps;</highlight></codeline>
<codeline lineno="6238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>maxScrubSpeedBase<sp/>=</highlight></codeline>
<codeline lineno="6239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pow(2.0,<sp/>1.0<sp/>/<sp/><ref refid="_track_panel_8cpp_1a2a5937706f1724c8f06a0396bdc87855a5ce300bd11671e2ae59e9a91a4bf8739" kindref="member">ScrubSpeedStepsPerOctave</ref>);</highlight></codeline>
<codeline lineno="6240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>newSpeed<sp/>=<sp/>pow(maxScrubSpeedBase,<sp/>newLogMaxScrubSpeed);</highlight></codeline>
<codeline lineno="6241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newSpeed<sp/>&gt;=<sp/><ref refid="class_audio_i_o_1a40f26467a7d142f0edea9b3ac893dddd" kindref="member">AudioIO::GetMinScrubSpeed</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="6242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newSpeed<sp/>&lt;=<sp/><ref refid="class_audio_i_o_1a377107ccda3176965ac68d757ba517a7" kindref="member">AudioIO::GetMaxScrubSpeed</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8588a9e934cd4cf2933b446c8eae5679" kindref="member">mLogMaxScrubSpeed</ref><sp/>=<sp/>newLogMaxScrubSpeed;</highlight></codeline>
<codeline lineno="6244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref><sp/>=<sp/>newSpeed;</highlight></codeline>
<codeline lineno="6245"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref>)</highlight></codeline>
<codeline lineno="6247"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Show<sp/>the<sp/>speed<sp/>for<sp/>one<sp/>second</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref><sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ac22796cffaa71790d270ae6de466774b" kindref="member">kOneSecondCountdown</ref><sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="6250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6253"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MM:<sp/>Scroll<sp/>up/down<sp/>when<sp/>used<sp/>without<sp/>modifier<sp/>keys</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>lines<sp/>=<sp/>steps<sp/>*<sp/>4<sp/>+<sp/><ref refid="class_track_panel_1aeac4bbf8f576eeb867f67b0cad4b4168" kindref="member">mVertScrollRemainder</ref>;</highlight></codeline>
<codeline lineno="6257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mVertScrollRemainder<sp/>=<sp/>lines<sp/>-<sp/>floor(lines);</highlight></codeline>
<codeline lineno="6258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines<sp/>=<sp/>floor(lines);</highlight></codeline>
<codeline lineno="6259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a5f3cb2e6b4a5ba7817d392f4fa986b42" kindref="member">TP_ScrollUpDown</ref>((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)-lines);</highlight></codeline>
<codeline lineno="6260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6261"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6262"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6263"><highlight class="normal"></highlight></codeline>
<codeline lineno="6264"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84b1e97640d44b29383fe5919fabf9ff" kindref="member">TrackPanel::HandleWheelRotationInVRuler</ref></highlight></codeline>
<codeline lineno="6265" refid="class_track_panel_1a84b1e97640d44b29383fe5919fabf9ff" refkind="member"><highlight class="normal"><sp/><sp/><sp/>(wxMouseEvent<sp/>&amp;event,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;rect)</highlight></codeline>
<codeline lineno="6266"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6267"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>steps<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_wheelRotation<sp/>/</highlight></codeline>
<codeline lineno="6268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_wheelDelta<sp/>&gt;<sp/>0<sp/>?<sp/>(double)event.m_wheelDelta<sp/>:<sp/>120.0);</highlight></codeline>
<codeline lineno="6269"><highlight class="normal"></highlight></codeline>
<codeline lineno="6270"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="6271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(pTrack);</highlight></codeline>
<codeline lineno="6272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>partner<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(wt-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>());</highlight></codeline>
<codeline lineno="6273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isDB<sp/>=</highlight></codeline>
<codeline lineno="6274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>()<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="6275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a6866a0a302099ef5fcd4fb60cba946cd" kindref="member">scaleType</ref><sp/>==<sp/><ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4a2e6fe9dffc2c1d6bbcfaaee36df90f68" kindref="member">WaveformSettings::stLogarithmic</ref>;</highlight></codeline>
<codeline lineno="6276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isDB<sp/>&amp;&amp;<sp/>event.ShiftDown())<sp/>{</highlight></codeline>
<codeline lineno="6277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Special<sp/>cases<sp/>for<sp/>Waveform<sp/>dB<sp/>only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6278"><highlight class="normal"></highlight></codeline>
<codeline lineno="6279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Vary<sp/>the<sp/>bottom<sp/>of<sp/>the<sp/>dB<sp/>scale,<sp/>but<sp/>only<sp/>if<sp/>the<sp/>midline<sp/>is<sp/>visible</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>,<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>;</highlight></codeline>
<codeline lineno="6281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;min,<sp/>&amp;max);</highlight></codeline>
<codeline lineno="6282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(min<sp/>&lt;<sp/>0.0<sp/>&amp;&amp;<sp/>max<sp/>&gt;<sp/>0.0))</highlight></codeline>
<codeline lineno="6283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6284"><highlight class="normal"></highlight></codeline>
<codeline lineno="6285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_waveform_settings" kindref="compound">WaveformSettings</ref><sp/>&amp;settings<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1aec6387c49dc73248ebc0d2b250e746cd" kindref="member">GetIndependentWaveformSettings</ref>();</highlight></codeline>
<codeline lineno="6286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>olddBRange<sp/>=<sp/>settings.<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>;</highlight></codeline>
<codeline lineno="6287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_wheelRotation<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="6288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>out</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>settings.<ref refid="class_waveform_settings_1a860fa6f33eb833eae1cf68f7178b8ea3" kindref="member">NextLowerDBRange</ref>();</highlight></codeline>
<codeline lineno="6290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>settings.<ref refid="class_waveform_settings_1af746e690c5329e12998cf12c8ffe287e" kindref="member">NextHigherDBRange</ref>();</highlight></codeline>
<codeline lineno="6292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newdBRange<sp/>=<sp/>settings.<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>;</highlight></codeline>
<codeline lineno="6293"><highlight class="normal"></highlight></codeline>
<codeline lineno="6294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)<sp/>{</highlight></codeline>
<codeline lineno="6295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_waveform_settings" kindref="compound">WaveformSettings</ref><sp/>&amp;settings<sp/>=<sp/>partner-&gt;<ref refid="class_wave_track_1aec6387c49dc73248ebc0d2b250e746cd" kindref="member">GetIndependentWaveformSettings</ref>();</highlight></codeline>
<codeline lineno="6296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_wheelRotation<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="6297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zoom<sp/>out</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>settings.<ref refid="class_waveform_settings_1a860fa6f33eb833eae1cf68f7178b8ea3" kindref="member">NextLowerDBRange</ref>();</highlight></codeline>
<codeline lineno="6299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>settings.<ref refid="class_waveform_settings_1af746e690c5329e12998cf12c8ffe287e" kindref="member">NextHigherDBRange</ref>();</highlight></codeline>
<codeline lineno="6301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6302"><highlight class="normal"></highlight></codeline>
<codeline lineno="6303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!event.CmdDown())<sp/>{</highlight></codeline>
<codeline lineno="6304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>extra-special<sp/>case<sp/>that<sp/>varies<sp/>the<sp/>db<sp/>limit<sp/>without<sp/>changing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>magnification</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>extreme<sp/>=<sp/>(<ref refid="_audacity_8h_1a6dfdc8f6b4fa2e8f244f18cedb607b8e" kindref="member">LINEAR_TO_DB</ref>(2)<sp/>+<sp/>newdBRange)<sp/>/<sp/>newdBRange;</highlight></codeline>
<codeline lineno="6307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(extreme,<sp/>max<sp/>*<sp/>olddBRange<sp/>/<sp/>newdBRange);</highlight></codeline>
<codeline lineno="6308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(-extreme,<sp/>min<sp/>*<sp/>olddBRange<sp/>/<sp/>newdBRange);</highlight></codeline>
<codeline lineno="6309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a9223604210ecf46c9238f43a715ab5f3" kindref="member">SetLastdBRange</ref>();</highlight></codeline>
<codeline lineno="6310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1aaf6f597255538feaf1017d046993445c" kindref="member">SetDisplayBounds</ref>(min,<sp/>max);</highlight></codeline>
<codeline lineno="6311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)<sp/>{</highlight></codeline>
<codeline lineno="6312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1a9223604210ecf46c9238f43a715ab5f3" kindref="member">SetLastdBRange</ref>();</highlight></codeline>
<codeline lineno="6313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1aaf6f597255538feaf1017d046993445c" kindref="member">SetDisplayBounds</ref>(min,<sp/>max);</highlight></codeline>
<codeline lineno="6314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.CmdDown()<sp/>&amp;&amp;<sp/>!</highlight><highlight class="keyword">event</highlight><highlight class="normal">.ShiftDown())<sp/>{</highlight></codeline>
<codeline lineno="6318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">HandleWaveTrackVZoom</ref>(</highlight></codeline>
<codeline lineno="6319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,<sp/>rect,<sp/>event.m_y,<sp/>event.m_y,</highlight></codeline>
<codeline lineno="6320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>(event.m_wheelRotation<sp/>&lt;<sp/>0),</highlight></codeline>
<codeline lineno="6321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(event.CmdDown()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.ShiftDown()))<sp/>{</highlight></codeline>
<codeline lineno="6324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Scroll<sp/>some<sp/>fixed<sp/>number<sp/>of<sp/>pixels,<sp/>independent<sp/>of<sp/>zoom<sp/>level<sp/>or<sp/>track<sp/>height:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>movement<sp/>=<sp/>10.0f;</highlight></codeline>
<codeline lineno="6326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>height<sp/>=<sp/>wt-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="6327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>spectral<sp/>=<sp/>(wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>()<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5ac0941a4c239c9e4a1d487f31786fbbc9" kindref="member">WaveTrack::Spectrum</ref>);</highlight></codeline>
<codeline lineno="6328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(spectral)<sp/>{</highlight></codeline>
<codeline lineno="6329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>delta<sp/>=<sp/>steps<sp/>*<sp/>movement<sp/>/<sp/>height;</highlight></codeline>
<codeline lineno="6330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_spectrogram_settings" kindref="compound">SpectrogramSettings</ref><sp/>&amp;settings<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1af7353bc939d97b3090ef20a0e0a6707b" kindref="member">GetIndependentSpectrogramSettings</ref>();</highlight></codeline>
<codeline lineno="6331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isLinear<sp/>=<sp/>settings.<ref refid="class_spectrogram_settings_1a8c6871ffc9d2f3f645e9d14c24920e04" kindref="member">scaleType</ref><sp/>==<sp/><ref refid="class_spectrogram_settings_1ad80cc088bcf7afb4176fd7195d4691fca409b06214bb9e020d4252d6981947acf" kindref="member">SpectrogramSettings::stLinear</ref>;</highlight></codeline>
<codeline lineno="6332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>bottom,<sp/>top;</highlight></codeline>
<codeline lineno="6333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a6c31cef06f382857502ce036b2dc795b" kindref="member">GetSpectrumBounds</ref>(&amp;bottom,<sp/>&amp;top);</highlight></codeline>
<codeline lineno="6334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="6335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>bound<sp/>=<sp/>rate<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="6336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_number_scale" kindref="compound">NumberScale</ref><sp/>numberScale(settings.<ref refid="class_spectrogram_settings_1aa0c8fbbe53db1ede59a834438a3ee375" kindref="member">GetScale</ref>(bottom,<sp/>top,<sp/>rate,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="6337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newTop<sp/>=</highlight></codeline>
<codeline lineno="6338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(bound,<sp/>numberScale.PositionToValue(1.0f<sp/>+<sp/>delta));</highlight></codeline>
<codeline lineno="6339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newBottom<sp/>=</highlight></codeline>
<codeline lineno="6340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>((isLinear<sp/>?<sp/>0.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>:<sp/>1.0<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref>),</highlight></codeline>
<codeline lineno="6341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>numberScale.PositionToValue(numberScale.ValueToPosition(newTop)<sp/>-<sp/>1.0f));</highlight></codeline>
<codeline lineno="6342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTop<sp/>=</highlight></codeline>
<codeline lineno="6343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(bound,</highlight></codeline>
<codeline lineno="6344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>numberScale.PositionToValue(numberScale.ValueToPosition(newBottom)<sp/>+<sp/>1.0f));</highlight></codeline>
<codeline lineno="6345"><highlight class="normal"></highlight></codeline>
<codeline lineno="6346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1adc327ebce52049287878201d876de903" kindref="member">SetSpectrumBounds</ref>(newBottom,<sp/>newTop);</highlight></codeline>
<codeline lineno="6347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="6348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1adc327ebce52049287878201d876de903" kindref="member">SetSpectrumBounds</ref>(newBottom,<sp/>newTop);</highlight></codeline>
<codeline lineno="6349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="6351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>topLimit<sp/>=<sp/>2.0;</highlight></codeline>
<codeline lineno="6352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isDB)<sp/>{</highlight></codeline>
<codeline lineno="6353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dBRange<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>;</highlight></codeline>
<codeline lineno="6354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>topLimit<sp/>=<sp/>(<ref refid="_audacity_8h_1a6dfdc8f6b4fa2e8f244f18cedb607b8e" kindref="member">LINEAR_TO_DB</ref>(topLimit)<sp/>+<sp/>dBRange)<sp/>/<sp/>dBRange;</highlight></codeline>
<codeline lineno="6355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>bottomLimit<sp/>=<sp/>-topLimit;</highlight></codeline>
<codeline lineno="6357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>top,<sp/>bottom;</highlight></codeline>
<codeline lineno="6358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;bottom,<sp/>&amp;top);</highlight></codeline>
<codeline lineno="6359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>range<sp/>=<sp/>top<sp/>-<sp/>bottom;</highlight></codeline>
<codeline lineno="6360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>delta<sp/>=<sp/>range<sp/>*<sp/>steps<sp/>*<sp/>movement<sp/>/<sp/>height;</highlight></codeline>
<codeline lineno="6361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newTop<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(topLimit,<sp/>top<sp/>+<sp/>delta);</highlight></codeline>
<codeline lineno="6362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>newBottom<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(bottomLimit,<sp/>newTop<sp/>-<sp/>range);</highlight></codeline>
<codeline lineno="6363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newTop<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(topLimit,<sp/>newBottom<sp/>+<sp/>range);</highlight></codeline>
<codeline lineno="6364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1aaf6f597255538feaf1017d046993445c" kindref="member">SetDisplayBounds</ref>(newBottom,<sp/>newTop);</highlight></codeline>
<codeline lineno="6365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="6366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1aaf6f597255538feaf1017d046993445c" kindref="member">SetDisplayBounds</ref>(newBottom,<sp/>newTop);</highlight></codeline>
<codeline lineno="6367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6371"><highlight class="normal"></highlight></codeline>
<codeline lineno="6372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(pTrack);</highlight></codeline>
<codeline lineno="6373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6375"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6376"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="6377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>To<sp/>do:<sp/>time<sp/>track?<sp/><sp/>Note<sp/>track?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6378"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6379"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6380"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6381"><highlight class="normal"></highlight></codeline>
<codeline lineno="6383" refid="class_track_panel_1a0ccda6e0a102609a44b69e7f851ab85c" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0ccda6e0a102609a44b69e7f851ab85c" kindref="member">TrackPanel::OnCaptureKey</ref>(wxCommandEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6384"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6385"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>deal<sp/>with<sp/>LabelTracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6386"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="6387"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t<sp/>||<sp/>t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>)<sp/>{</highlight></codeline>
<codeline lineno="6388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.Skip();</highlight></codeline>
<codeline lineno="6389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6390"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6391"><highlight class="normal"><sp/><sp/><sp/>wxKeyEvent<sp/>*kevent<sp/>=<sp/>(wxKeyEvent<sp/>*)event.GetEventObject();</highlight></codeline>
<codeline lineno="6392"><highlight class="normal"></highlight></codeline>
<codeline lineno="6393"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.Skip(!((<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*)t)-&gt;CaptureKey(*kevent));</highlight></codeline>
<codeline lineno="6394"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6395"><highlight class="normal"></highlight></codeline>
<codeline lineno="6396" refid="class_track_panel_1a92f1df5389ce81091f810dd774f91332" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a92f1df5389ce81091f810dd774f91332" kindref="member">TrackPanel::OnKeyDown</ref>(wxKeyEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6397"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6398"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(event.GetKeyCode())</highlight></codeline>
<codeline lineno="6399"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6400"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_ESCAPE:</highlight></codeline>
<codeline lineno="6401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a56ac00621d5ee5be4cd3a585dde8e468" kindref="member">HandleEscapeKey</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6403"><highlight class="normal"></highlight></codeline>
<codeline lineno="6404"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_ALT:</highlight></codeline>
<codeline lineno="6405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4bb51bc8c4fab9e485916ebb2a8e30b3" kindref="member">HandleAltKey</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6407"><highlight class="normal"></highlight></codeline>
<codeline lineno="6408"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_SHIFT:</highlight></codeline>
<codeline lineno="6409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a87d0b14734af33fd1f9c900b36c16a18" kindref="member">HandleShiftKey</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6411"><highlight class="normal"></highlight></codeline>
<codeline lineno="6412"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_CONTROL:</highlight></codeline>
<codeline lineno="6413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aad125fe23ac8546f37eaab04696b227e" kindref="member">HandleControlKey</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6415"><highlight class="normal"></highlight></codeline>
<codeline lineno="6416"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Allow<sp/>PageUp<sp/>and<sp/>PageDown<sp/>keys<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6417"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//scroll<sp/>the<sp/>Track<sp/>Panel<sp/>left<sp/>and<sp/>right</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6418"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_PAGEUP:</highlight></codeline>
<codeline lineno="6419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0bc11f32c1bf93bed8afcd25803b666f" kindref="member">HandlePageUpKey</ref>();</highlight></codeline>
<codeline lineno="6420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6421"><highlight class="normal"></highlight></codeline>
<codeline lineno="6422"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_PAGEDOWN:</highlight></codeline>
<codeline lineno="6423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a706dd6b1e9328bad9925cb6b4dea57fb" kindref="member">HandlePageDownKey</ref>();</highlight></codeline>
<codeline lineno="6424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6425"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6426"><highlight class="normal"></highlight></codeline>
<codeline lineno="6427"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="6428"><highlight class="normal"></highlight></codeline>
<codeline lineno="6429"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>deal<sp/>with<sp/>LabelTracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6430"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t<sp/>||<sp/>t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>)<sp/>{</highlight></codeline>
<codeline lineno="6431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.Skip();</highlight></codeline>
<codeline lineno="6432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6433"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6434"><highlight class="normal"></highlight></codeline>
<codeline lineno="6435"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*lt<sp/>=<sp/>(<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*)t;</highlight></codeline>
<codeline lineno="6436"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>bkpSel0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>(),</highlight></codeline>
<codeline lineno="6437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>bkpSel1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>();</highlight></codeline>
<codeline lineno="6438"><highlight class="normal"></highlight></codeline>
<codeline lineno="6439"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Pass<sp/>keystroke<sp/>to<sp/>labeltrack&apos;s<sp/>handler<sp/>and<sp/>add<sp/>to<sp/>history<sp/>if<sp/>any</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6440"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>updates<sp/>were<sp/>done</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6441"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lt-&gt;<ref refid="class_label_track_1a4ac8ecaf9bf0733a15c15669f20a791b" kindref="member">OnKeyDown</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>,<sp/>event))</highlight></codeline>
<codeline lineno="6442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Modified<sp/>Label&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="6443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Label<sp/>Edit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="6444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref>);</highlight></codeline>
<codeline lineno="6445"><highlight class="normal"></highlight></codeline>
<codeline lineno="6446"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>caret<sp/>is<sp/>in<sp/>view</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6447"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>;</highlight></codeline>
<codeline lineno="6448"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lt-&gt;<ref refid="class_label_track_1a643d0bc707a55f315511694ea8bd2c7f" kindref="member">CalcCursorX</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>&amp;x))<sp/>{</highlight></codeline>
<codeline lineno="6449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad2d01414992d10f78ada48e6c290f180" kindref="member">ScrollIntoView</ref>(x);</highlight></codeline>
<codeline lineno="6450"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6451"><highlight class="normal"></highlight></codeline>
<codeline lineno="6452"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>selection<sp/>modified,<sp/>refresh</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6453"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Otherwise,<sp/>refresh<sp/>track<sp/>display<sp/>if<sp/>the<sp/>keystroke<sp/>was<sp/>handled</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6454"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bkpSel0<sp/>!=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>()<sp/>||</highlight></codeline>
<codeline lineno="6455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bkpSel1<sp/>!=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>()<sp/>)</highlight></codeline>
<codeline lineno="6456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="6457"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!event.GetSkipped())</highlight></codeline>
<codeline lineno="6458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(t);</highlight></codeline>
<codeline lineno="6459"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6460"><highlight class="normal"></highlight></codeline>
<codeline lineno="6461" refid="class_track_panel_1afc15945f54a80ddcaa085c3f4c52ecdd" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1afc15945f54a80ddcaa085c3f4c52ecdd" kindref="member">TrackPanel::OnChar</ref>(wxKeyEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6462"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6463"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(event.GetKeyCode())</highlight></codeline>
<codeline lineno="6464"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6465"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_ESCAPE:</highlight></codeline>
<codeline lineno="6466"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_ALT:</highlight></codeline>
<codeline lineno="6467"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_SHIFT:</highlight></codeline>
<codeline lineno="6468"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_CONTROL:</highlight></codeline>
<codeline lineno="6469"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_PAGEUP:</highlight></codeline>
<codeline lineno="6470"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_PAGEDOWN:</highlight></codeline>
<codeline lineno="6471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6472"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6473"><highlight class="normal"></highlight></codeline>
<codeline lineno="6474"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>deal<sp/>with<sp/>LabelTracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6475"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="6476"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t<sp/>||<sp/>t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>)<sp/>{</highlight></codeline>
<codeline lineno="6477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.Skip();</highlight></codeline>
<codeline lineno="6478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6479"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6480"><highlight class="normal"></highlight></codeline>
<codeline lineno="6481"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>bkpSel0<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>(),</highlight></codeline>
<codeline lineno="6482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>bkpSel1<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>();</highlight></codeline>
<codeline lineno="6483"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Pass<sp/>keystroke<sp/>to<sp/>labeltrack&apos;s<sp/>handler<sp/>and<sp/>add<sp/>to<sp/>history<sp/>if<sp/>any</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6484"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>updates<sp/>were<sp/>done</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6485"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(((<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*)t)-&gt;<ref refid="class_track_panel_1afc15945f54a80ddcaa085c3f4c52ecdd" kindref="member">OnChar</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>,<sp/>event))</highlight></codeline>
<codeline lineno="6486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Modified<sp/>Label&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="6487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Label<sp/>Edit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="6488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref>);</highlight></codeline>
<codeline lineno="6489"><highlight class="normal"></highlight></codeline>
<codeline lineno="6490"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>selection<sp/>modified,<sp/>refresh</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6491"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Otherwise,<sp/>refresh<sp/>track<sp/>display<sp/>if<sp/>the<sp/>keystroke<sp/>was<sp/>handled</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6492"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bkpSel0<sp/>!=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>()<sp/>||</highlight></codeline>
<codeline lineno="6493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bkpSel1<sp/>!=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>()<sp/>)</highlight></codeline>
<codeline lineno="6494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="6495"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!event.GetSkipped())</highlight></codeline>
<codeline lineno="6496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(t);</highlight></codeline>
<codeline lineno="6497"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6498"><highlight class="normal"></highlight></codeline>
<codeline lineno="6499" refid="class_track_panel_1ae15fa46232f32310f7f2735deef9c0f7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae15fa46232f32310f7f2735deef9c0f7" kindref="member">TrackPanel::OnKeyUp</ref>(wxKeyEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6500"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6501"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(event.GetKeyCode())</highlight></codeline>
<codeline lineno="6502"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6503"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_ESCAPE:</highlight></codeline>
<codeline lineno="6504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a56ac00621d5ee5be4cd3a585dde8e468" kindref="member">HandleEscapeKey</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6506"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_ALT:</highlight></codeline>
<codeline lineno="6507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4bb51bc8c4fab9e485916ebb2a8e30b3" kindref="member">HandleAltKey</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6509"><highlight class="normal"></highlight></codeline>
<codeline lineno="6510"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_SHIFT:</highlight></codeline>
<codeline lineno="6511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a87d0b14734af33fd1f9c900b36c16a18" kindref="member">HandleShiftKey</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6513"><highlight class="normal"></highlight></codeline>
<codeline lineno="6514"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WXK_CONTROL:</highlight></codeline>
<codeline lineno="6515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aad125fe23ac8546f37eaab04696b227e" kindref="member">HandleControlKey</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6517"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6518"><highlight class="normal"></highlight></codeline>
<codeline lineno="6519"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.Skip();</highlight></codeline>
<codeline lineno="6520"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6521"><highlight class="normal"></highlight></codeline>
<codeline lineno="6523" refid="class_track_panel_1ad1b4ec8ef74ecdbd0852315508cd812d" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad1b4ec8ef74ecdbd0852315508cd812d" kindref="member">TrackPanel::OnCaptureLost</ref>(wxMouseCaptureLostEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="6524"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6525"><highlight class="normal"><sp/><sp/><sp/>wxMouseEvent<sp/><ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>(wxEVT_LEFT_UP);</highlight></codeline>
<codeline lineno="6526"><highlight class="normal"></highlight></codeline>
<codeline lineno="6527"><highlight class="normal"><sp/><sp/><sp/>e.m_x<sp/>=<sp/><ref refid="class_track_panel_1a2b9d69055e7480fd704146b70509f790" kindref="member">mMouseMostRecentX</ref>;</highlight></codeline>
<codeline lineno="6528"><highlight class="normal"><sp/><sp/><sp/>e.m_y<sp/>=<sp/><ref refid="class_track_panel_1abfab1d7c9b5b41de69c41e03a826dc12" kindref="member">mMouseMostRecentY</ref>;</highlight></codeline>
<codeline lineno="6529"><highlight class="normal"></highlight></codeline>
<codeline lineno="6530"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a9f7065e0737a8a911c449f970da3bbf3" kindref="member">OnMouseEvent</ref>(e);</highlight></codeline>
<codeline lineno="6531"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6532"><highlight class="normal"></highlight></codeline>
<codeline lineno="6536" refid="class_track_panel_1a9f7065e0737a8a911c449f970da3bbf3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a9f7065e0737a8a911c449f970da3bbf3" kindref="member">TrackPanel::OnMouseEvent</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6537"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6538"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_wheelRotation<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="6539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad11332673db81ee10ecbe292f4b31ee9" kindref="member">HandleWheelRotation</ref>(event);</highlight></codeline>
<codeline lineno="6540"><highlight class="normal"></highlight></codeline>
<codeline lineno="6541"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a284375ff1b505a777cd6dfad1b63040b" kindref="member">mAutoScrolling</ref>)<sp/>{</highlight></codeline>
<codeline lineno="6542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2b9d69055e7480fd704146b70509f790" kindref="member">mMouseMostRecentX</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="6543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abfab1d7c9b5b41de69c41e03a826dc12" kindref="member">mMouseMostRecentY</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="6544"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6545"><highlight class="normal"></highlight></codeline>
<codeline lineno="6546"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown())<sp/>{</highlight></codeline>
<codeline lineno="6547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="6548"><highlight class="normal"></highlight></codeline>
<codeline lineno="6549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>activate<sp/>event<sp/>is<sp/>used<sp/>to<sp/>make<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>parent<sp/>window<sp/>&apos;come<sp/>alive&apos;<sp/>if<sp/>it<sp/>didn&apos;t<sp/>have<sp/>focus.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxActivateEvent<sp/><ref refid="namespacelv2docgen_1a4405dc5a2509537b9ff3b4de10bc28d6" kindref="member">e</ref>;</highlight></codeline>
<codeline lineno="6552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>GetParent()-&gt;GetEventHandler()-&gt;ProcessEvent(e);</highlight></codeline>
<codeline lineno="6553"><highlight class="normal"></highlight></codeline>
<codeline lineno="6554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>wxTimers<sp/>seem<sp/>to<sp/>be<sp/>a<sp/>little<sp/>unreliable,<sp/>so<sp/>this</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>&quot;primes&quot;<sp/>it<sp/>to<sp/>make<sp/>sure<sp/>it<sp/>keeps<sp/>going<sp/>for<sp/>a<sp/>while...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6556"><highlight class="normal"></highlight></codeline>
<codeline lineno="6557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>this<sp/>timer<sp/>fires,<sp/>we<sp/>call<sp/>TrackPanel::OnTimer<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>possibly<sp/>update<sp/>the<sp/>screen<sp/>for<sp/>offscreen<sp/>scrolling.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab8dd1b9f070a6331441767ae27564ad5" kindref="member">mTimer</ref>.Stop();</highlight></codeline>
<codeline lineno="6560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab8dd1b9f070a6331441767ae27564ad5" kindref="member">mTimer</ref>.Start(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a004ffd768278ee9c9a78ae35835fdc85" kindref="member">kTimerInterval</ref>,<sp/><ref refid="cext_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>);</highlight></codeline>
<codeline lineno="6561"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6562"><highlight class="normal"></highlight></codeline>
<codeline lineno="6563"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonDown())<sp/>{</highlight></codeline>
<codeline lineno="6564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SetFocus();</highlight></codeline>
<codeline lineno="6565"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6566"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonUp())<sp/>{</highlight></codeline>
<codeline lineno="6567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(HasCapture())</highlight></codeline>
<codeline lineno="6568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ReleaseMouse();</highlight></codeline>
<codeline lineno="6569"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6570"><highlight class="normal"></highlight></codeline>
<codeline lineno="6571"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Leaving()<sp/>&amp;&amp;<sp/>!</highlight><highlight class="keyword">event</highlight><highlight class="normal">.ButtonIsDown(wxMOUSE_BTN_ANY))</highlight></codeline>
<codeline lineno="6572"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PRL:<sp/><sp/>was<sp/>this<sp/>test<sp/>really<sp/>needed?<sp/><sp/>It<sp/>interfered<sp/>with<sp/>my<sp/>refactoring</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>that<sp/>tried<sp/>to<sp/>eliminate<sp/>those<sp/>enum<sp/>values.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>I<sp/>think<sp/>it<sp/>was<sp/>never<sp/>true,<sp/>that<sp/>mouse<sp/>capture<sp/>was<sp/>pan<sp/>or<sp/>gain<sp/>sliding,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>but<sp/>no<sp/>mouse<sp/>button<sp/>was<sp/>down.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>(mMouseCapture<sp/>!=<sp/>IsPanSliding<sp/>&amp;&amp;<sp/>mMouseCapture<sp/>!=<sp/>IsGainSliding)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="6580"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>must<sp/>install<sp/>the<sp/>cursor<sp/>ourselves<sp/>since<sp/>the<sp/>window<sp/>under</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>mouse<sp/>is<sp/>no<sp/>longer<sp/>this<sp/>one<sp/>and<sp/>wx2.8.12<sp/>makes<sp/>that<sp/>check.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Should<sp/>re-evaluate<sp/>with<sp/>wx3.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxSTANDARD_CURSOR-&gt;MacInstall();</highlight></codeline>
<codeline lineno="6585"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6587"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6588"><highlight class="normal"></highlight></codeline>
<codeline lineno="6589"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>)</highlight></codeline>
<codeline lineno="6590"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6591"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba70d8f72bedc78a86e6068438f14f79a0" kindref="member">IsVZooming</ref>:</highlight></codeline>
<codeline lineno="6592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4320ed3afd10c94dcd24d7b0b73f83be" kindref="member">HandleVZoom</ref>(event);</highlight></codeline>
<codeline lineno="6593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6594"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba65d4e06b600c85131d6280824090c839" kindref="member">IsClosing</ref>:</highlight></codeline>
<codeline lineno="6595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a94dc01defc13cb38062ba298c790ace1" kindref="member">HandleClosing</ref>(event);</highlight></codeline>
<codeline lineno="6596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6597"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba0bc8af996749c9a282d6d1cc085bb718" kindref="member">IsPopping</ref>:</highlight></codeline>
<codeline lineno="6598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a83380b9ed98366aa8f6d899edbb79475" kindref="member">HandlePopping</ref>(event);</highlight></codeline>
<codeline lineno="6599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6600"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba2a64907f1fe32a06a375449216f1ad02" kindref="member">IsMuting</ref>:</highlight></codeline>
<codeline lineno="6601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a881b54b10e97508e66b788ab436fbad8" kindref="member">HandleMutingSoloing</ref>(event,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6603"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba7750c1bc9eabfb7cf297de627fd2ce8b" kindref="member">IsSoloing</ref>:</highlight></codeline>
<codeline lineno="6604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a881b54b10e97508e66b788ab436fbad8" kindref="member">HandleMutingSoloing</ref>(event,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6606"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf19cc2d88ae2024dcbf71408c71636b2" kindref="member">IsResizing</ref>:</highlight></codeline>
<codeline lineno="6607"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba1cc893666c65afe6a5a9724174fb50f6" kindref="member">IsResizingBetweenLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="6608"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f6de2f6ce3b06fca6ecc61ca664ce5" kindref="member">IsResizingBelowLinkedTracks</ref>:</highlight></codeline>
<codeline lineno="6609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4b851ca053791a732be27475fb2bb5b0" kindref="member">HandleResize</ref>(event);</highlight></codeline>
<codeline lineno="6610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">HandleCursor</ref>(event);</highlight></codeline>
<codeline lineno="6611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6612"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba2c36e63ff445ad7e7b6734bd90ae09e0" kindref="member">IsRearranging</ref>:</highlight></codeline>
<codeline lineno="6613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0357348d18324554fb7da5d1a4d578a8" kindref="member">HandleRearrange</ref>(event);</highlight></codeline>
<codeline lineno="6614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6615"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baa0ee8d095831bdb80db0a3d767669af8" kindref="member">IsGainSliding</ref>:</highlight></codeline>
<codeline lineno="6616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5e05c68da6ecc144c58c90507518a8d7" kindref="member">HandleSliders</ref>(event,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6618"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bab5b85a999c356e21490678b10ba6e997" kindref="member">IsPanSliding</ref>:</highlight></codeline>
<codeline lineno="6619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5e05c68da6ecc144c58c90507518a8d7" kindref="member">HandleSliders</ref>(event,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6621"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf180ce3b7d4ece7b539329ffd0d3c418" kindref="member">IsMinimizing</ref>:</highlight></codeline>
<codeline lineno="6622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0421309f0c83a09ff72245dd6eb33d4d" kindref="member">HandleMinimizing</ref>(event);</highlight></codeline>
<codeline lineno="6623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6624"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f346151e922233e8a785750e14199e" kindref="member">IsZooming</ref>:</highlight></codeline>
<codeline lineno="6625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa37492e65fcad57608da9b0d3d84c19b" kindref="member">HandleZoom</ref>(event);</highlight></codeline>
<codeline lineno="6626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6627"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba12838422ae18f81ab8ba62476c507b16" kindref="member">IsAdjustingLabel</ref>:</highlight></codeline>
<codeline lineno="6628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a984cfefe6eb6bcc49b44d1b2346ef166" kindref="member">HandleGlyphDragRelease</ref>(static_cast&lt;LabelTrack<sp/>*&gt;(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>),<sp/>event);</highlight></codeline>
<codeline lineno="6629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6630"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baa1f3b2748161591b3423f765401b496b" kindref="member">IsSelectingLabelText</ref>:</highlight></codeline>
<codeline lineno="6631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a39f65a04ecb950f794590d58261ab133" kindref="member">HandleTextDragRelease</ref>(static_cast&lt;LabelTrack<sp/>*&gt;(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>),<sp/>event);</highlight></codeline>
<codeline lineno="6632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6633"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:<sp/></highlight><highlight class="comment">//includes<sp/>case<sp/>of<sp/>IsUncaptured</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>is<sp/>where<sp/>most<sp/>button-downs<sp/>are<sp/>detected</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4124de9c048941218d2085b54bf477db" kindref="member">HandleTrackSpecificMouseEvent</ref>(event);</highlight></codeline>
<codeline lineno="6636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6637"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6638"><highlight class="normal"></highlight></codeline>
<codeline lineno="6639"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonDown()<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a203a9ed7a4dfdc58ee55285085ac8f2d" kindref="member">IsMouseCaptured</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!HasCapture())</highlight></codeline>
<codeline lineno="6641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CaptureMouse();</highlight></codeline>
<codeline lineno="6642"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6643"><highlight class="normal"></highlight></codeline>
<codeline lineno="6644"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//EnsureVisible<sp/>should<sp/>be<sp/>called<sp/>after<sp/>the<sp/>up-click.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6645"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonUp())<sp/>{</highlight></codeline>
<codeline lineno="6646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="6647"><highlight class="normal"></highlight></codeline>
<codeline lineno="6648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="6649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t)</highlight></codeline>
<codeline lineno="6650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(t);</highlight></codeline>
<codeline lineno="6651"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6652"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6653"><highlight class="normal"></highlight></codeline>
<codeline lineno="6654"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="6655"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>FindMergeLine(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*track,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepyportmidi_1_1midi_1ad2426758f88d23d7208984d5c99ec050" kindref="member">time</ref>)</highlight></codeline>
<codeline lineno="6656"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>tolerance<sp/>=<sp/>0.5<sp/>/<sp/>track-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="6658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="6659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>loc:<sp/>track-&gt;<ref refid="class_wave_track_1aed472b80250f8a6a759d8c43970c6b99" kindref="member">GetCachedLocations</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(loc.typ<sp/>==<sp/><ref refid="struct_wave_track_location_1a0a54a8fbcc73dfe63879bcff10a75c6da871a4f5cfaaaa8055d719336eca06f11" kindref="member">WaveTrackLocation::locationMergePoint</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="6661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fabs(time<sp/>-<sp/>loc.pos)<sp/>&lt;<sp/>tolerance)</highlight></codeline>
<codeline lineno="6662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ii;</highlight></codeline>
<codeline lineno="6663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++ii;</highlight></codeline>
<codeline lineno="6664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="6666"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6667"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6668"><highlight class="normal"></highlight></codeline>
<codeline lineno="6669" refid="class_track_panel_1a22d1ecd054e1b9122ac1da665a9ce3ce" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a22d1ecd054e1b9122ac1da665a9ce3ce" kindref="member">TrackPanel::HandleTrackLocationMouseEvent</ref>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*<sp/>track,<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="6670"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6671"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>FIXME:<sp/>Disable<sp/>this<sp/>and<sp/>return<sp/>true<sp/>when<sp/>CutLines<sp/>aren&apos;t<sp/>showing?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6672"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(Don&apos;t<sp/>use<sp/>gPrefs-&gt;<sp/>for<sp/>the<sp/>fix<sp/>as<sp/>registry<sp/>access<sp/>is<sp/>slow).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6673"><highlight class="normal"></highlight></codeline>
<codeline lineno="6674"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba3f975b8bae9c833418a094c342072e33" kindref="member">WasOverCutLine</ref>)</highlight></codeline>
<codeline lineno="6675"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonUp())<sp/>{</highlight></codeline>
<codeline lineno="6677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>;</highlight></codeline>
<codeline lineno="6678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Needed<sp/>to<sp/>avoid<sp/>select<sp/>events<sp/>after<sp/>button<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6683"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6684"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>()<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1af6620f64f51ea8ceef45fbf34dbedccc" kindref="member">IsOverCutline</ref>(track,<sp/>rect,<sp/>event))</highlight></codeline>
<codeline lineno="6685"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a44a5105dcf9ca8fa6f1a585b61bb8b58" kindref="member">mCapturedTrackLocationRect</ref>.Contains(event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="6687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="6689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6691"><highlight class="normal"></highlight></codeline>
<codeline lineno="6692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>handled<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6693"><highlight class="normal"></highlight></codeline>
<codeline lineno="6694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown())</highlight></codeline>
<codeline lineno="6695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1a38d3116d13d3787982109693ad523e2a" kindref="member">typ</ref><sp/>==<sp/><ref refid="struct_wave_track_location_1a0a54a8fbcc73dfe63879bcff10a75c6da399879306fdea1e62201b1045d682e78" kindref="member">WaveTrackLocation::locationCutLine</ref>)</highlight></codeline>
<codeline lineno="6697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>user<sp/>presses<sp/>left<sp/>button<sp/>on<sp/>cut<sp/>line,<sp/>expand<sp/>the<sp/>line<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>cutlineStart<sp/>=<sp/>0,<sp/>cutlineEnd<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="6700"><highlight class="normal"></highlight></codeline>
<codeline lineno="6701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(track-&gt;<ref refid="class_wave_track_1a66de941065c151bc6ef012dca3f5ea7e" kindref="member">ExpandCutLine</ref>(<ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1ae4ea9c9afd803ade3db38d9ccb2bb15e" kindref="member">pos</ref>,<sp/>&amp;cutlineStart,<sp/>&amp;cutlineEnd))</highlight></codeline>
<codeline lineno="6702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*<sp/>linked<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(track);</highlight></codeline>
<codeline lineno="6704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(linked)<sp/>{</highlight></codeline>
<codeline lineno="6705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Expand<sp/>the<sp/>cutline<sp/>in<sp/>the<sp/>opposite<sp/>channel<sp/>if<sp/>it<sp/>is<sp/>present.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6706"><highlight class="normal"></highlight></codeline>
<codeline lineno="6707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PRL:<sp/><sp/>Do<sp/>NOT<sp/>report<sp/>that<sp/>the<sp/>event<sp/>is<sp/>not<sp/>handled<sp/>if<sp/>the<sp/>other</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>channel<sp/>doesn&apos;t<sp/>also<sp/>have<sp/>a<sp/>cutline<sp/>to<sp/>expand<sp/>at<sp/>the<sp/>same<sp/>time.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Just<sp/>ignore<sp/>the<sp/>return.<sp/><sp/>Bug1310.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6710"><highlight class="normal"></highlight></codeline>
<codeline lineno="6711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>bool<sp/>success<sp/>=<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linked-&gt;<ref refid="class_wave_track_1a66de941065c151bc6ef012dca3f5ea7e" kindref="member">ExpandCutLine</ref>(<ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1ae4ea9c9afd803ade3db38d9ccb2bb15e" kindref="member">pos</ref>);</highlight></codeline>
<codeline lineno="6713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="6714"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(!success)</highlight></codeline>
<codeline lineno="6715"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>false;</highlight></codeline>
<codeline lineno="6716"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6718"><highlight class="normal"></highlight></codeline>
<codeline lineno="6719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a21a6af7b052d9d6bd39cc1db088e8f5d" kindref="member">setTimes</ref>(cutlineStart,<sp/>cutlineEnd);</highlight></codeline>
<codeline lineno="6720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="6721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Expanded<sp/>Cut<sp/>Line&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Expand&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="6722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>handled<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1a38d3116d13d3787982109693ad523e2a" kindref="member">typ</ref><sp/>==<sp/><ref refid="struct_wave_track_location_1a0a54a8fbcc73dfe63879bcff10a75c6da871a4f5cfaaaa8055d719336eca06f11" kindref="member">WaveTrackLocation::locationMergePoint</ref>)<sp/>{</highlight></codeline>
<codeline lineno="6726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>pos<sp/>=<sp/><ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1ae4ea9c9afd803ade3db38d9ccb2bb15e" kindref="member">pos</ref>;</highlight></codeline>
<codeline lineno="6727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!track-&gt;<ref refid="class_wave_track_1a06a36f1d12be7617ba580664f69f9965" kindref="member">MergeClips</ref>(<ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1ab2f2a7b2e9426e2e7bbf8c008f8381f1" kindref="member">clipidx1</ref>,<sp/><ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1a85a589613b40d26ee6d2107ad0f1b242" kindref="member">clipidx2</ref>))</highlight></codeline>
<codeline lineno="6728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6729"><highlight class="normal"></highlight></codeline>
<codeline lineno="6730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*<sp/>linked<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(track);</highlight></codeline>
<codeline lineno="6731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(linked)<sp/>{</highlight></codeline>
<codeline lineno="6732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Don&apos;t<sp/>assume<sp/>correspondence<sp/>of<sp/>merge<sp/>points<sp/>across<sp/>channels!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>idx<sp/>=<sp/>FindMergeLine(linked,<sp/>pos);</highlight></codeline>
<codeline lineno="6734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(idx<sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="6735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track_1_1_location" kindref="compound">WaveTrack::Location</ref><sp/>location<sp/>=<sp/>linked-&gt;<ref refid="class_wave_track_1aed472b80250f8a6a759d8c43970c6b99" kindref="member">GetCachedLocations</ref>()[idx];</highlight></codeline>
<codeline lineno="6736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!linked-&gt;<ref refid="class_wave_track_1a06a36f1d12be7617ba580664f69f9965" kindref="member">MergeClips</ref>(location.clipidx1,<sp/>location.clipidx2))</highlight></codeline>
<codeline lineno="6737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6740"><highlight class="normal"></highlight></codeline>
<codeline lineno="6741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Merged<sp/>Clips&quot;</highlight><highlight class="normal">),<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Merge&quot;</highlight><highlight class="normal">),<sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref>);</highlight></codeline>
<codeline lineno="6742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>handled<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6745"><highlight class="normal"></highlight></codeline>
<codeline lineno="6746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!handled<sp/>&amp;&amp;<sp/>event.RightDown())</highlight></codeline>
<codeline lineno="6747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>track-&gt;<ref refid="class_wave_track_1a72f9ed30336279133f57bee0d1958c38" kindref="member">RemoveCutLine</ref>(<ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1ae4ea9c9afd803ade3db38d9ccb2bb15e" kindref="member">pos</ref>);</highlight></codeline>
<codeline lineno="6749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*<sp/>linked<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(track);</highlight></codeline>
<codeline lineno="6750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(linked)</highlight></codeline>
<codeline lineno="6751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linked-&gt;<ref refid="class_wave_track_1a72f9ed30336279133f57bee0d1958c38" kindref="member">RemoveCutLine</ref>(<ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref>.<ref refid="struct_wave_track_location_1ae4ea9c9afd803ade3db38d9ccb2bb15e" kindref="member">pos</ref>);</highlight></codeline>
<codeline lineno="6752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Removed<sp/>Cut<sp/>Line&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Remove&quot;</highlight><highlight class="normal">)<sp/>);</highlight></codeline>
<codeline lineno="6753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>handled<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6755"><highlight class="normal"></highlight></codeline>
<codeline lineno="6756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(handled)</highlight></codeline>
<codeline lineno="6757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="6759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Effect<sp/>happened<sp/>at<sp/>button-down,<sp/>but<sp/>treat<sp/>like<sp/>a<sp/>dragging<sp/>mode<sp/>until</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>button-up.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba3f975b8bae9c833418a094c342072e33" kindref="member">WasOverCutLine</ref>;</highlight></codeline>
<codeline lineno="6762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(track);</highlight></codeline>
<codeline lineno="6763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6765"><highlight class="normal"></highlight></codeline>
<codeline lineno="6766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6767"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6768"><highlight class="normal"></highlight></codeline>
<codeline lineno="6769"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6770"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6771"><highlight class="normal"></highlight></codeline>
<codeline lineno="6772" refid="class_track_panel_1af6620f64f51ea8ceef45fbf34dbedccc" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1af6620f64f51ea8ceef45fbf34dbedccc" kindref="member">TrackPanel::IsOverCutline</ref>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*<sp/>track,<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="6773"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6774"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>loc:<sp/>track-&gt;<ref refid="class_wave_track_1aed472b80250f8a6a759d8c43970c6b99" kindref="member">GetCachedLocations</ref>())</highlight></codeline>
<codeline lineno="6775"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref><sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(loc.pos);</highlight></codeline>
<codeline lineno="6777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(x<sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/>x<sp/>&lt;<sp/>rect.width)</highlight></codeline>
<codeline lineno="6778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>locRect;</highlight></codeline>
<codeline lineno="6780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locRect.x<sp/>=<sp/><ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>(rect.x<sp/>+<sp/>x)<sp/>-<sp/>5;</highlight></codeline>
<codeline lineno="6781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locRect.width<sp/>=<sp/>11;</highlight></codeline>
<codeline lineno="6782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locRect.y<sp/>=<sp/>rect.y;</highlight></codeline>
<codeline lineno="6783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locRect.height<sp/>=<sp/>rect.height;</highlight></codeline>
<codeline lineno="6784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(locRect.Contains(event.m_x,<sp/>event.m_y))</highlight></codeline>
<codeline lineno="6785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac829475457bde484f7f6bcdc93ec86e8" kindref="member">mCapturedTrackLocation</ref><sp/>=<sp/>loc;</highlight></codeline>
<codeline lineno="6787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a44a5105dcf9ca8fa6f1a585b61bb8b58" kindref="member">mCapturedTrackLocationRect</ref><sp/>=<sp/>locRect;</highlight></codeline>
<codeline lineno="6788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6791"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6792"><highlight class="normal"></highlight></codeline>
<codeline lineno="6793"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6794"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6795"><highlight class="normal"></highlight></codeline>
<codeline lineno="6796"><highlight class="normal"></highlight></codeline>
<codeline lineno="6798" refid="class_track_panel_1aa9dd18c1cdb37737045a87617db85323" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa9dd18c1cdb37737045a87617db85323" kindref="member">TrackPanel::HandleLabelTrackClick</ref>(<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*<sp/>lTrack,<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6799"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6800"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!event.ButtonDown())</highlight></codeline>
<codeline lineno="6801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6802"><highlight class="normal"></highlight></codeline>
<codeline lineno="6803"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(event.LeftDown())</highlight></codeline>
<codeline lineno="6804"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="6808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*n<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="6809"><highlight class="normal"></highlight></codeline>
<codeline lineno="6810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(n)<sp/>{</highlight></codeline>
<codeline lineno="6811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(n-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref><sp/>&amp;&amp;<sp/>lTrack<sp/>!=<sp/>n)<sp/>{</highlight></codeline>
<codeline lineno="6812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*)n)-&gt;ResetFlags();</highlight></codeline>
<codeline lineno="6813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*)n)-&gt;Unselect();</highlight></codeline>
<codeline lineno="6814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>();</highlight></codeline>
<codeline lineno="6816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6817"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6818"><highlight class="normal"></highlight></codeline>
<codeline lineno="6819"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref><sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="6820"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>.width<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" kindref="member">kRightMargin</ref>;</highlight></codeline>
<codeline lineno="6821"><highlight class="normal"></highlight></codeline>
<codeline lineno="6822"><highlight class="normal"><sp/><sp/><sp/>lTrack-&gt;<ref refid="class_label_track_1adec77244151e4301e5f1ace314144028" kindref="member">HandleClick</ref>(event,<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>,<sp/>*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,<sp/>&amp;<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>);</highlight></codeline>
<codeline lineno="6823"><highlight class="normal"></highlight></codeline>
<codeline lineno="6824"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lTrack-&gt;<ref refid="class_label_track_1ae2d5ab75f2933783cdf69107d60c71b0" kindref="member">IsAdjustingLabel</ref>())</highlight></codeline>
<codeline lineno="6825"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(lTrack,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba12838422ae18f81ab8ba62476c507b16" kindref="member">IsAdjustingLabel</ref>);</highlight></codeline>
<codeline lineno="6827"><highlight class="normal"></highlight></codeline>
<codeline lineno="6828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>are<sp/>adjusting<sp/>a<sp/>label<sp/>on<sp/>a<sp/>labeltrack,<sp/>do<sp/>not<sp/>do<sp/>anything</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//that<sp/>follows.<sp/>Instead,<sp/>redraw<sp/>the<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(lTrack);</highlight></codeline>
<codeline lineno="6831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6832"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6833"><highlight class="normal"></highlight></codeline>
<codeline lineno="6834"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IF<sp/>the<sp/>user<sp/>clicked<sp/>a<sp/>label,<sp/>THEN<sp/>select<sp/>all<sp/>other<sp/>tracks<sp/>by<sp/>Label</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6835"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lTrack-&gt;<ref refid="class_label_track_1ae0f6cf3a69df81645d388686f0460748" kindref="member">IsSelected</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(lTrack);</highlight></codeline>
<codeline lineno="6837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1af32af2eefcb2cfde13efdd76a7749aae" kindref="member">SelectTracksByLabel</ref>(lTrack);</highlight></codeline>
<codeline lineno="6838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="6839"><highlight class="normal"></highlight></codeline>
<codeline lineno="6840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>starting<sp/>a<sp/>drag</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref>);</highlight></codeline>
<codeline lineno="6842"><highlight class="normal"></highlight></codeline>
<codeline lineno="6843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="6844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(lTrack,<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baa1f3b2748161591b3423f765401b496b" kindref="member">IsSelectingLabelText</ref>);</highlight></codeline>
<codeline lineno="6845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>handle<sp/>shift+mouse<sp/>left<sp/>button</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ShiftDown()<sp/>&amp;&amp;<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.ButtonDown())<sp/>{</highlight></codeline>
<codeline lineno="6847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>the<sp/>mouse<sp/>is<sp/>clicked<sp/>in<sp/>text<sp/>box,<sp/>set<sp/>flags</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lTrack-&gt;<ref refid="class_label_track_1a7b1ba12c21a01b29413065375a60a790" kindref="member">OverTextBox</ref>(lTrack-&gt;<ref refid="class_label_track_1a03a362d6ca8cefb4dc964c787509e779" kindref="member">GetLabel</ref>(lTrack-&gt;<ref refid="class_label_track_1aec043819f723185729fc087c7f8b128c" kindref="member">getSelectedIndex</ref>()),<sp/>event.m_x,<sp/>event.m_y))<sp/>{</highlight></codeline>
<codeline lineno="6849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lTrack-&gt;<ref refid="class_label_track_1a0d5667a3ebdb3984432b7e5e0de89eb7" kindref="member">SetInBox</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lTrack-&gt;<ref refid="class_label_track_1acf9574785e25289966826140d828d721" kindref="member">SetDragXPos</ref>(event.m_x);</highlight></codeline>
<codeline lineno="6851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lTrack-&gt;<ref refid="class_label_track_1accfcd3911efdeb712a1d5f2e1224a66b" kindref="member">SetResetCursorPos</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(lTrack);</highlight></codeline>
<codeline lineno="6853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6857"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6858"><highlight class="normal"></highlight></codeline>
<codeline lineno="6859"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>handle<sp/>shift+ctrl<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6860"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*if<sp/>(event.ShiftDown())<sp/>{<sp/>//<sp/>&amp;&amp;<sp/>event.ControlDown())<sp/>{</highlight></codeline>
<codeline lineno="6861"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>lTrack-&gt;SetHighlightedByKey(true);</highlight></codeline>
<codeline lineno="6862"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>Refresh(false);</highlight></codeline>
<codeline lineno="6863"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>return;</highlight></codeline>
<codeline lineno="6864"><highlight class="comment"><sp/><sp/><sp/>}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6865"><highlight class="normal"></highlight></codeline>
<codeline lineno="6866"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>return<sp/>false,<sp/>there<sp/>is<sp/>more<sp/>to<sp/>do...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6867"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6868"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6869"><highlight class="normal"></highlight></codeline>
<codeline lineno="6871" refid="class_track_panel_1a984cfefe6eb6bcc49b44d1b2346ef166" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a984cfefe6eb6bcc49b44d1b2346ef166" kindref="member">TrackPanel::HandleGlyphDragRelease</ref>(<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*<sp/>lTrack,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6872"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6873"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!lTrack)</highlight></codeline>
<codeline lineno="6874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6875"><highlight class="normal"></highlight></codeline>
<codeline lineno="6878"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="6879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="6880"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp()<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>))<sp/>{</highlight></codeline>
<codeline lineno="6881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="6882"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6883"><highlight class="normal"></highlight></codeline>
<codeline lineno="6884"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lTrack-&gt;<ref refid="class_label_track_1a22218fc0d00c27d0015a03eacd5a6b95" kindref="member">HandleGlyphDragRelease</ref>(event,<sp/><ref refid="class_track_panel_1aaa67ff22cd46accfc6a7ae9c13726a8b" kindref="member">mCapturedRect</ref>,</highlight></codeline>
<codeline lineno="6885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,<sp/>&amp;<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>))<sp/>{</highlight></codeline>
<codeline lineno="6886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Modified<sp/>Label&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="6887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Label<sp/>Edit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="6888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_undo_manager_8h_1a4df60e74fafdd06fb39cd12db3388114acfa76b1aba6d15dde4a0f1ee1057481f" kindref="member">UndoPush::CONSOLIDATE</ref>);</highlight></codeline>
<codeline lineno="6889"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6890"><highlight class="normal"></highlight></codeline>
<codeline lineno="6891"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>we<sp/>are<sp/>adjusting<sp/>a<sp/>label<sp/>on<sp/>a<sp/>labeltrack,<sp/>do<sp/>not<sp/>do<sp/>anything</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6892"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//that<sp/>follows.<sp/>Instead,<sp/>redraw<sp/>the<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6893"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(lTrack);</highlight></codeline>
<codeline lineno="6894"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6895"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6896"><highlight class="normal"></highlight></codeline>
<codeline lineno="6898" refid="class_track_panel_1a39f65a04ecb950f794590d58261ab133" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a39f65a04ecb950f794590d58261ab133" kindref="member">TrackPanel::HandleTextDragRelease</ref>(<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*<sp/>lTrack,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6899"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6900"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!lTrack)</highlight></codeline>
<codeline lineno="6901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6902"><highlight class="normal"></highlight></codeline>
<codeline lineno="6903"><highlight class="normal"><sp/><sp/><sp/>lTrack-&gt;<ref refid="class_label_track_1a4c18ea6bfa66ae613125d7e7a2d40f06" kindref="member">HandleTextDragRelease</ref>(event);</highlight></codeline>
<codeline lineno="6904"><highlight class="normal"></highlight></codeline>
<codeline lineno="6907"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="6908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="6909"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp()<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>))<sp/>{</highlight></codeline>
<codeline lineno="6910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="6911"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6912"><highlight class="normal"></highlight></codeline>
<codeline lineno="6913"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>handle<sp/>dragging</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6914"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.Dragging())<sp/>{</highlight></codeline>
<codeline lineno="6915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>locate<sp/>the<sp/>initial<sp/>mouse<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftIsDown())<sp/>{</highlight></codeline>
<codeline lineno="6917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a42584f68b419de73ce42c7b15d7a4828" kindref="member">mLabelTrackStartXPos</ref><sp/>==<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="6918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a42584f68b419de73ce42c7b15d7a4828" kindref="member">mLabelTrackStartXPos</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_x;</highlight></codeline>
<codeline lineno="6919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a43f6840103e4cd755efd0f46edd0eb2e" kindref="member">mLabelTrackStartYPos</ref><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="6920"><highlight class="normal"></highlight></codeline>
<codeline lineno="6921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((lTrack-&gt;<ref refid="class_label_track_1aec043819f723185729fc087c7f8b128c" kindref="member">getSelectedIndex</ref>()<sp/>!=<sp/>-1)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="6922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lTrack-&gt;<ref refid="class_label_track_1a7b1ba12c21a01b29413065375a60a790" kindref="member">OverTextBox</ref>(</highlight></codeline>
<codeline lineno="6923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lTrack-&gt;<ref refid="class_label_track_1a03a362d6ca8cefb4dc964c787509e779" kindref="member">GetLabel</ref>(lTrack-&gt;<ref refid="class_label_track_1aec043819f723185729fc087c7f8b128c" kindref="member">getSelectedIndex</ref>()),</highlight></codeline>
<codeline lineno="6924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a42584f68b419de73ce42c7b15d7a4828" kindref="member">mLabelTrackStartXPos</ref>,</highlight></codeline>
<codeline lineno="6925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a43f6840103e4cd755efd0f46edd0eb2e" kindref="member">mLabelTrackStartYPos</ref>))</highlight></codeline>
<codeline lineno="6926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a43f6840103e4cd755efd0f46edd0eb2e" kindref="member">mLabelTrackStartYPos</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="6928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>initial<sp/>mouse<sp/>position<sp/>in<sp/>the<sp/>text<sp/>box</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>then<sp/>only<sp/>drag<sp/>text</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a43f6840103e4cd755efd0f46edd0eb2e" kindref="member">mLabelTrackStartYPos</ref><sp/>==<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="6933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">RefreshTrack</ref>(lTrack);</highlight></codeline>
<codeline lineno="6934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6937"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6938"><highlight class="normal"></highlight></codeline>
<codeline lineno="6939"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>handle<sp/>mouse<sp/>left<sp/>button<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6940"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="6941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a42584f68b419de73ce42c7b15d7a4828" kindref="member">mLabelTrackStartXPos</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="6942"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6943"><highlight class="normal">}</highlight></codeline>
<codeline lineno="6944"><highlight class="normal"></highlight></codeline>
<codeline lineno="6945"><highlight class="normal"></highlight><highlight class="comment">//<sp/>AS:<sp/>I<sp/>don&apos;t<sp/>really<sp/>understand<sp/>why<sp/>this<sp/>code<sp/>is<sp/>sectioned<sp/>off</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6946"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>from<sp/>the<sp/>other<sp/>OnMouseEvent<sp/>code.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6947" refid="class_track_panel_1a4124de9c048941218d2085b54bf477db" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4124de9c048941218d2085b54bf477db" kindref="member">TrackPanel::HandleTrackSpecificMouseEvent</ref>(wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="6948"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6949"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>pTrack;</highlight></codeline>
<codeline lineno="6950"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>pControlTrack;</highlight></codeline>
<codeline lineno="6951"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rTrack;</highlight></codeline>
<codeline lineno="6952"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rLabel;</highlight></codeline>
<codeline lineno="6953"><highlight class="normal"></highlight></codeline>
<codeline lineno="6954"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>unsafe<sp/>=<sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>();</highlight></codeline>
<codeline lineno="6955"><highlight class="normal"></highlight></codeline>
<codeline lineno="6956"><highlight class="normal"><sp/><sp/><sp/>pControlTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>&amp;rLabel);</highlight></codeline>
<codeline lineno="6957"><highlight class="normal"><sp/><sp/><sp/>pTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rTrack);</highlight></codeline>
<codeline lineno="6958"><highlight class="normal"></highlight></codeline>
<codeline lineno="6959"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//call<sp/>HandleResize<sp/>if<sp/>I&apos;m<sp/>over<sp/>the<sp/>border<sp/>area</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6960"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="6961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(event.m_y,<sp/>rTrack.y<sp/>+<sp/>rTrack.height,<sp/><ref refid="_track_panel_8h_1a77c6eedc985ef68d1fb9551d9f7254e8" kindref="member">TRACK_RESIZE_REGION</ref>)</highlight></codeline>
<codeline lineno="6962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><ref refid="_track_panel_8cpp_1ab4369791699474ab3b61abb763dbe858" kindref="member">within</ref>(event.m_y,<sp/>rLabel.y<sp/>+<sp/>rLabel.height,</highlight></codeline>
<codeline lineno="6963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8h_1a77c6eedc985ef68d1fb9551d9f7254e8" kindref="member">TRACK_RESIZE_REGION</ref>)))<sp/>{</highlight></codeline>
<codeline lineno="6964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4b851ca053791a732be27475fb2bb5b0" kindref="member">HandleResize</ref>(event);</highlight></codeline>
<codeline lineno="6965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">HandleCursor</ref>(event);</highlight></codeline>
<codeline lineno="6966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6967"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6968"><highlight class="normal"></highlight></codeline>
<codeline lineno="6969"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AS:<sp/>If<sp/>the<sp/>user<sp/>clicked<sp/>outside<sp/>all<sp/>tracks,<sp/>make<sp/>nothing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6970"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>selected.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6971"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((event.ButtonDown()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.ButtonDClick())<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="6972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!(pTrack<sp/>||<sp/>pControlTrack))<sp/>{</highlight></codeline>
<codeline lineno="6973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a942c08d24411790207fd1e275448516e" kindref="member">SelectNone</ref>();</highlight></codeline>
<codeline lineno="6974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="6975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6976"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6977"><highlight class="normal"></highlight></codeline>
<codeline lineno="6978"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Determine<sp/>if<sp/>user<sp/>clicked<sp/>on<sp/>the<sp/>track&apos;s<sp/>left-hand<sp/>label</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6979"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>&amp;&amp;<sp/>event.m_x<sp/>&lt;<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.m_x<sp/>&gt;=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>())<sp/>{</highlight></codeline>
<codeline lineno="6981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!event.Dragging()<sp/>)<sp/></highlight><highlight class="comment">//<sp/>JKC:<sp/>Only<sp/>want<sp/>the<sp/>mouse<sp/>down<sp/>event.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4320ed3afd10c94dcd24d7b0b73f83be" kindref="member">HandleVZoom</ref>(event);</highlight></codeline>
<codeline lineno="6983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">HandleCursor</ref>(event);</highlight></codeline>
<codeline lineno="6984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="6986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abb91ec20240267ebb6ea0ce591040408" kindref="member">HandleLabelClick</ref>(event);</highlight></codeline>
<codeline lineno="6987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">HandleCursor</ref>(event);</highlight></codeline>
<codeline lineno="6988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6990"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6991"><highlight class="normal"></highlight></codeline>
<codeline lineno="6992"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Determine<sp/>if<sp/>user<sp/>clicked<sp/>on<sp/>a<sp/>label<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6993"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//If<sp/>so,<sp/>use<sp/>MouseDown<sp/>handler<sp/>for<sp/>the<sp/>label<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6994"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;<sp/>(pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>))</highlight></codeline>
<codeline lineno="6995"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="6996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1aa9dd18c1cdb37737045a87617db85323" kindref="member">HandleLabelTrackClick</ref>((<ref refid="class_label_track" kindref="compound">LabelTrack</ref><sp/>*)pTrack,<sp/>rTrack,<sp/>event))</highlight></codeline>
<codeline lineno="6997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="6998"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="6999"><highlight class="normal"></highlight></codeline>
<codeline lineno="7000"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7001"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetRect().Contains(event.GetPosition())<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(!pTrack<sp/>||</highlight></codeline>
<codeline lineno="7004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>))<sp/>{</highlight></codeline>
<codeline lineno="7005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftDown())<sp/>{</highlight></codeline>
<codeline lineno="7006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8082a55b36f3365b1dceefdc77da0067" kindref="member">mScrubSeekPress</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftIsDown())</highlight></codeline>
<codeline lineno="7010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7011"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7012"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7013"><highlight class="normal"></highlight></codeline>
<codeline lineno="7014"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>handled<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7015"><highlight class="normal"></highlight></codeline>
<codeline lineno="7016"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pTrack<sp/>&amp;&amp;<sp/>(pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref><sp/>||<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba3f975b8bae9c833418a094c342072e33" kindref="member">WasOverCutLine</ref>))</highlight></codeline>
<codeline lineno="7018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>handled<sp/>=<sp/><ref refid="class_track_panel_1a22d1ecd054e1b9122ac1da665a9ce3ce" kindref="member">HandleTrackLocationMouseEvent</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)pTrack,<sp/>rTrack,<sp/>event);</highlight></codeline>
<codeline lineno="7019"><highlight class="normal"></highlight></codeline>
<codeline lineno="7020"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_tools_tool_bar" kindref="compound">ToolsToolBar</ref><sp/>*<sp/>pTtb<sp/>=<sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1acf3d6b30e8eefb02d6524223a1e70545" kindref="member">TP_GetToolsToolBar</ref>();</highlight></codeline>
<codeline lineno="7021"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!handled<sp/>&amp;&amp;<sp/>pTtb<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)</highlight></codeline>
<codeline lineno="7022"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>toolToUse<sp/>=<sp/><ref refid="class_track_panel_1ae5f00fa573c7c333e78da8fbd5e9c03f" kindref="member">DetermineToolToUse</ref>(pTtb,<sp/>event);</highlight></codeline>
<codeline lineno="7024"><highlight class="normal"></highlight></codeline>
<codeline lineno="7025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(toolToUse)<sp/>{</highlight></codeline>
<codeline lineno="7026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad2abf425de60833a72cf4289440fbd6b" kindref="member">selectTool</ref>:</highlight></codeline>
<codeline lineno="7027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a16fa8c66608b0fc61d96d855b77f589e" kindref="member">HandleSelect</ref>(event);</highlight></codeline>
<codeline lineno="7028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad4963af29a1644a7d90b99b1de4802be" kindref="member">envelopeTool</ref>:</highlight></codeline>
<codeline lineno="7030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!unsafe)</highlight></codeline>
<codeline lineno="7031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac1edb4292cfaec717846b6c880bdf4e6" kindref="member">HandleEnvelope</ref>(event);</highlight></codeline>
<codeline lineno="7032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748a74de0207d819bb60cfa251d696759994" kindref="member">slideTool</ref>:</highlight></codeline>
<codeline lineno="7034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!unsafe)</highlight></codeline>
<codeline lineno="7035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9278a17ad01e70d0e878db5f91ab48ce" kindref="member">HandleSlide</ref>(event);</highlight></codeline>
<codeline lineno="7036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748a68d9a0eebbd7ecb9b7c7fc5deb442b91" kindref="member">zoomTool</ref>:</highlight></codeline>
<codeline lineno="7038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa37492e65fcad57608da9b0d3d84c19b" kindref="member">HandleZoom</ref>(event);</highlight></codeline>
<codeline lineno="7039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac02cdeab443a3cb8401c4ef92ec42328" kindref="member">drawTool</ref>:</highlight></codeline>
<codeline lineno="7041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!unsafe)</highlight></codeline>
<codeline lineno="7042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8b8b625b75319ed1bce958a6ad9ddcf4" kindref="member">HandleSampleEditing</ref>(event);</highlight></codeline>
<codeline lineno="7043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7045"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7046"><highlight class="normal"></highlight></codeline>
<codeline lineno="7047"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((event.Moving()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.LeftUp())<sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref><sp/>))</highlight></codeline>
<codeline lineno="7049"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(mMouseCapture<sp/>!=<sp/>IsSelecting<sp/>)<sp/>&amp;&amp;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7050"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(mMouseCapture<sp/>!=<sp/>IsEnveloping)<sp/>&amp;&amp;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7051"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(mMouseCapture<sp/>!=<sp/>IsSliding)<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7052"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e65fa01f46106d180a1fc99fd20dabd" kindref="member">HandleCursor</ref>(event);</highlight></codeline>
<codeline lineno="7054"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7055"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.LeftUp())<sp/>{</highlight></codeline>
<codeline lineno="7056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="7057"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7058"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7059"><highlight class="normal"></highlight></codeline>
<codeline lineno="7064" refid="class_track_panel_1ae5f00fa573c7c333e78da8fbd5e9c03f" refkind="member"><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae5f00fa573c7c333e78da8fbd5e9c03f" kindref="member">TrackPanel::DetermineToolToUse</ref>(<sp/><ref refid="class_tools_tool_bar" kindref="compound">ToolsToolBar</ref><sp/>*<sp/>pTtb,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="7065"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7066"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>currentTool<sp/>=<sp/>pTtb-&gt;<ref refid="class_tools_tool_bar_1ab31272c8c6e504065e1117d2d47a5bee" kindref="member">GetCurrentTool</ref>();</highlight></codeline>
<codeline lineno="7067"><highlight class="normal"></highlight></codeline>
<codeline lineno="7068"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Unless<sp/>in<sp/>Multimode<sp/>keep<sp/>using<sp/>the<sp/>current<sp/>tool.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7069"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!pTtb-&gt;<ref refid="class_tools_tool_bar_1a2d8c3ea8e829b4e8af34a848dcab38ae" kindref="member">IsDown</ref>(<ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac010717a868fce968a7046a9db152b55" kindref="member">multiTool</ref>)<sp/>)</highlight></codeline>
<codeline lineno="7070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>currentTool;</highlight></codeline>
<codeline lineno="7071"><highlight class="normal"></highlight></codeline>
<codeline lineno="7072"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>NEVER<sp/>change<sp/>tools<sp/>whilst<sp/>we<sp/>are<sp/>dragging.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7073"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>event.Dragging()<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.LeftUp()<sp/>)</highlight></codeline>
<codeline lineno="7074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>currentTool;</highlight></codeline>
<codeline lineno="7075"><highlight class="normal"></highlight></codeline>
<codeline lineno="7076"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Just<sp/>like<sp/>dragging.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7077"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>But,<sp/>this<sp/>event<sp/>might<sp/>be<sp/>the<sp/>final<sp/>button<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7078"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>so<sp/>keep<sp/>the<sp/>same<sp/>tool.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7079"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/>if(<sp/>mIsSliding<sp/>||<sp/>mIsSelecting<sp/>||<sp/>mIsEnveloping<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7080"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>!=<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7bad35795d59fc54193830a64bd9f8ac166" kindref="member">IsUncaptured</ref><sp/>)</highlight></codeline>
<codeline lineno="7081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>currentTool;</highlight></codeline>
<codeline lineno="7082"><highlight class="normal"></highlight></codeline>
<codeline lineno="7083"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>So<sp/>now<sp/>we<sp/>have<sp/>to<sp/>find<sp/>out<sp/>what<sp/>we<sp/>are<sp/>near<sp/>to..</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7084"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="7085"><highlight class="normal"></highlight></codeline>
<codeline lineno="7086"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*pTrack<sp/>=<sp/><ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">FindTrack</ref>(event.m_x,<sp/>event.m_y,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect);</highlight></codeline>
<codeline lineno="7087"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!pTrack<sp/>)</highlight></codeline>
<codeline lineno="7088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>currentTool;</highlight></codeline>
<codeline lineno="7089"><highlight class="normal"></highlight></codeline>
<codeline lineno="7090"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackKind<sp/>=<sp/>pTrack-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>();</highlight></codeline>
<codeline lineno="7091"><highlight class="normal"><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad2abf425de60833a72cf4289440fbd6b" kindref="member">selectTool</ref>;<sp/></highlight><highlight class="comment">//<sp/>the<sp/>default.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7092"><highlight class="normal"></highlight></codeline>
<codeline lineno="7093"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.ButtonIsDown(wxMOUSE_BTN_RIGHT)<sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.RightUp()){</highlight></codeline>
<codeline lineno="7094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748a68d9a0eebbd7ecb9b7c7fc5deb442b91" kindref="member">zoomTool</ref>;</highlight></codeline>
<codeline lineno="7095"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7096"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trackKind<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efa2348e03ba06177fe4dbcf87e27d82e33" kindref="member">Track::Time</ref>){</highlight></codeline>
<codeline lineno="7097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad4963af29a1644a7d90b99b1de4802be" kindref="member">envelopeTool</ref>;</highlight></codeline>
<codeline lineno="7098"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>trackKind<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref><sp/>){</highlight></codeline>
<codeline lineno="7099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad2abf425de60833a72cf4289440fbd6b" kindref="member">selectTool</ref>;</highlight></codeline>
<codeline lineno="7100"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>trackKind<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="7101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad2abf425de60833a72cf4289440fbd6b" kindref="member">selectTool</ref>;</highlight></codeline>
<codeline lineno="7102"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>So<sp/>we<sp/>are<sp/>in<sp/>a<sp/>wave<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7103"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//FIXME:<sp/>Not<sp/>necessarily.<sp/>Haven&apos;t<sp/>checked<sp/>Track::Note<sp/>(#if<sp/>defined(USE_MIDI)).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7104"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>From<sp/>here<sp/>on<sp/>the<sp/>order<sp/>in<sp/>which<sp/>we<sp/>hit<sp/>test<sp/>determines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7105"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>which<sp/>tool<sp/>takes<sp/>priority<sp/>in<sp/>the<sp/>rare<sp/>cases<sp/>where<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7106"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>could<sp/>be<sp/>more<sp/>than<sp/>one.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7107"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.CmdDown()){</highlight></codeline>
<codeline lineno="7108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>msmeyer:<sp/>If<sp/>control<sp/>is<sp/>down,<sp/>slide<sp/>single<sp/>clip</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>msmeyer:<sp/>If<sp/>control<sp/>and<sp/>shift<sp/>are<sp/>down,<sp/>slide<sp/>all<sp/>clips</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748a74de0207d819bb60cfa251d696759994" kindref="member">slideTool</ref>;</highlight></codeline>
<codeline lineno="7111"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1ad6a29c53e444aa79c26a8b6667f21031" kindref="member">HitTestEnvelope</ref>(<sp/>pTrack,<sp/>rect,<sp/>event<sp/>)<sp/>){</highlight></codeline>
<codeline lineno="7112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad4963af29a1644a7d90b99b1de4802be" kindref="member">envelopeTool</ref>;</highlight></codeline>
<codeline lineno="7113"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1a99f1ae26f8fb6694cba3a5b58c7a1e87" kindref="member">HitTestSlide</ref>(<sp/>pTrack,<sp/>rect,<sp/>event<sp/>)){</highlight></codeline>
<codeline lineno="7114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748a74de0207d819bb60cfa251d696759994" kindref="member">slideTool</ref>;</highlight></codeline>
<codeline lineno="7115"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1ac73b0e8459c26a88fd13c748093be972" kindref="member">HitTestSamples</ref>(<sp/>pTrack,<sp/>rect,<sp/>event<sp/>)){</highlight></codeline>
<codeline lineno="7116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>currentTool<sp/>=<sp/><ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac02cdeab443a3cb8401c4ef92ec42328" kindref="member">drawTool</ref>;</highlight></codeline>
<codeline lineno="7117"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7118"><highlight class="normal"></highlight></codeline>
<codeline lineno="7119"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Use<sp/>the<sp/>false<sp/>argument<sp/>since<sp/>in<sp/>multimode<sp/>we<sp/>don&apos;t</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7120"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//want<sp/>the<sp/>button<sp/>indicating<sp/>which<sp/>tool<sp/>is<sp/>in<sp/>use<sp/>to<sp/>be<sp/>updated.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7121"><highlight class="normal"><sp/><sp/><sp/>pTtb-&gt;<ref refid="class_tools_tool_bar_1a0b4b13a933efba2ccbb62bc715efb60f" kindref="member">SetCurrentTool</ref>(<sp/>currentTool,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="7122"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>currentTool;</highlight></codeline>
<codeline lineno="7123"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7124"><highlight class="normal"></highlight></codeline>
<codeline lineno="7125"><highlight class="normal"></highlight></codeline>
<codeline lineno="7126"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7127"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>TrackPanel::HitTestStretch(<ref refid="class_track" kindref="compound">Track</ref><sp/>*track,<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="7128"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7129"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>later,<sp/>we<sp/>may<sp/>want<sp/>a<sp/>different<sp/>policy,<sp/>but<sp/>for<sp/>now,<sp/>stretch<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7130"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>selected<sp/>when<sp/>the<sp/>cursor<sp/>is<sp/>near<sp/>the<sp/>center<sp/>of<sp/>the<sp/>track<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7131"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>within<sp/>the<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7132"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!track<sp/>||<sp/>!track-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>()<sp/>||<sp/>track-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/>Track::Note<sp/>||</highlight></codeline>
<codeline lineno="7133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>())<sp/>{</highlight></codeline>
<codeline lineno="7134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7135"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7136"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>center<sp/>=<sp/>rect.y<sp/>+<sp/>rect.height<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="7137"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>distance<sp/>=<sp/>abs(event.m_y<sp/>-<sp/>center);</highlight></codeline>
<codeline lineno="7138"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yTolerance<sp/>=<sp/>10;</highlight></codeline>
<codeline lineno="7139"><highlight class="normal"><sp/><sp/><sp/>wxInt64<sp/>leftSel<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1a699851ec9e5a209be86f552f0826687d" kindref="member">t0</ref>(),<sp/>rect.x);</highlight></codeline>
<codeline lineno="7140"><highlight class="normal"><sp/><sp/><sp/>wxInt64<sp/>rightSel<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>.<ref refid="class_selected_region_1aec8e1688714de8fb218d0cf0188360d6" kindref="member">t1</ref>(),<sp/>rect.x);</highlight></codeline>
<codeline lineno="7141"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Something<sp/>is<sp/>wrong<sp/>if<sp/>right<sp/>edge<sp/>comes<sp/>before<sp/>left<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7142"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(!(rightSel<sp/>&lt;<sp/>leftSel));</highlight></codeline>
<codeline lineno="7143"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(leftSel<sp/>&lt;=<sp/>event.m_x<sp/>&amp;&amp;<sp/>event.m_x<sp/>&lt;=<sp/>rightSel<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distance<sp/>&lt;<sp/>yTolerance);</highlight></codeline>
<codeline lineno="7145"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7146"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7147"><highlight class="normal"></highlight></codeline>
<codeline lineno="7148"><highlight class="normal"></highlight></codeline>
<codeline lineno="7151" refid="class_track_panel_1ad6a29c53e444aa79c26a8b6667f21031" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad6a29c53e444aa79c26a8b6667f21031" kindref="member">TrackPanel::HitTestEnvelope</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*track,<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="7152"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7153"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(track);</highlight></codeline>
<codeline lineno="7154"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>track-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>)</highlight></codeline>
<codeline lineno="7155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7156"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wavetrack<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)track;</highlight></codeline>
<codeline lineno="7157"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_envelope" kindref="compound">Envelope</ref><sp/>*envelope<sp/>=<sp/>wavetrack-&gt;<ref refid="class_wave_track_1ab5377b2d185a54c4c8f5eb334f1c4285" kindref="member">GetEnvelopeAtX</ref>(event.GetX());</highlight></codeline>
<codeline lineno="7158"><highlight class="normal"></highlight></codeline>
<codeline lineno="7159"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!envelope)</highlight></codeline>
<codeline lineno="7160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7161"><highlight class="normal"></highlight></codeline>
<codeline lineno="7162"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>displayType<sp/>=<sp/>wavetrack-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>();</highlight></codeline>
<codeline lineno="7163"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>an<sp/>envelope<sp/>hit,<sp/>unless<sp/>we&apos;re<sp/>using<sp/>a<sp/>type<sp/>of<sp/>wavetrack<sp/>display</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7164"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>suitable<sp/>for<sp/>envelopes<sp/>operations,<sp/>ie<sp/>one<sp/>of<sp/>the<sp/>Wave<sp/>displays.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7165"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>displayType<sp/>!=<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref>)</highlight></codeline>
<codeline lineno="7166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;<sp/><sp/></highlight><highlight class="comment">//<sp/>No<sp/>envelope,<sp/>not<sp/>a<sp/>hit,<sp/>so<sp/>return.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7167"><highlight class="normal"></highlight></codeline>
<codeline lineno="7168"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>envelope<sp/>point,<sp/>range<sp/>0.0<sp/>to<sp/>1.0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7169"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>dB<sp/>=<sp/>!wavetrack-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1ae4f07aa847f89f72a127ba5e357f1e78" kindref="member">isLinear</ref>();</highlight></codeline>
<codeline lineno="7170"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>x<sp/>to<sp/>time.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7171"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>envValue<sp/>=<sp/>envelope-&gt;<ref refid="class_envelope_1ac5729053c923e47b43f0f063845c2ce9" kindref="member">GetValue</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>rect.x));</highlight></codeline>
<codeline lineno="7172"><highlight class="normal"></highlight></codeline>
<codeline lineno="7173"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>zoomMin,<sp/>zoomMax;</highlight></codeline>
<codeline lineno="7174"><highlight class="normal"><sp/><sp/><sp/>wavetrack-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;zoomMin,<sp/>&amp;zoomMax);</highlight></codeline>
<codeline lineno="7175"><highlight class="normal"></highlight></codeline>
<codeline lineno="7176"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>dBRange<sp/>=<sp/>wavetrack-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>;</highlight></codeline>
<codeline lineno="7177"><highlight class="normal"></highlight></codeline>
<codeline lineno="7178"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>y<sp/>position<sp/>of<sp/>envelope<sp/>point.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7179"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yValue<sp/>=<sp/><ref refid="_track_artist_8cpp_1a00fc87b63f1436536d3090852d57f810" kindref="member">GetWaveYPos</ref>(<sp/>envValue,</highlight></codeline>
<codeline lineno="7180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>zoomMin,<sp/>zoomMax,</highlight></codeline>
<codeline lineno="7181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height,<sp/>dB,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>dBRange,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>+<sp/>rect.y;</highlight></codeline>
<codeline lineno="7182"><highlight class="normal"></highlight></codeline>
<codeline lineno="7183"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>y<sp/>position<sp/>of<sp/>center<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7184"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ctr<sp/>=<sp/><ref refid="_track_artist_8cpp_1a00fc87b63f1436536d3090852d57f810" kindref="member">GetWaveYPos</ref>(<sp/>0.0,</highlight></codeline>
<codeline lineno="7185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>zoomMin,<sp/>zoomMax,</highlight></codeline>
<codeline lineno="7186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height,<sp/>dB,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>dBRange,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>+<sp/>rect.y;</highlight></codeline>
<codeline lineno="7187"><highlight class="normal"></highlight></codeline>
<codeline lineno="7188"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>y<sp/>distance<sp/>of<sp/>mouse<sp/>from<sp/>center<sp/>line<sp/>(in<sp/>pixels).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7189"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yMouse<sp/>=<sp/>abs(ctr<sp/>-<sp/>event.m_y);</highlight></codeline>
<codeline lineno="7190"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>y<sp/>distance<sp/>of<sp/>envelope<sp/>from<sp/>center<sp/>line<sp/>(in<sp/>pixels)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7191"><highlight class="normal"><sp/><sp/><sp/>yValue<sp/>=<sp/>abs(ctr-yValue);</highlight></codeline>
<codeline lineno="7192"><highlight class="normal"></highlight></codeline>
<codeline lineno="7193"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JKC:<sp/>It<sp/>happens<sp/>that<sp/>the<sp/>envelope<sp/>is<sp/>actually<sp/>drawn<sp/>offset<sp/>from<sp/>its</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7194"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>&apos;true&apos;<sp/>position<sp/>(it<sp/>is<sp/>3<sp/>pixels<sp/>wide).<sp/><sp/>yMisalign<sp/>is<sp/>really<sp/>a<sp/>fudge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7195"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>factor<sp/>to<sp/>allow<sp/>us<sp/>to<sp/>hit<sp/>it<sp/>exactly,<sp/>but<sp/>I<sp/>wouldn&apos;t<sp/>dream<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7196"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>calling<sp/>it<sp/>yFudgeFactor<sp/>:)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7197"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yMisalign<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="7198"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Perhaps<sp/>yTolerance<sp/>should<sp/>be<sp/>put<sp/>into<sp/>preferences?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7199"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yTolerance<sp/>=<sp/>5;<sp/></highlight><highlight class="comment">//<sp/>how<sp/>far<sp/>from<sp/>envelope<sp/>we<sp/>may<sp/>be<sp/>and<sp/>count<sp/>as<sp/>a<sp/>hit.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7200"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>distance;</highlight></codeline>
<codeline lineno="7201"><highlight class="normal"></highlight></codeline>
<codeline lineno="7202"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>amplification<sp/>using<sp/>the<sp/>envelope<sp/>we<sp/>introduced<sp/>the<sp/>idea<sp/>of<sp/>contours.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7203"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>contours<sp/>have<sp/>the<sp/>same<sp/>shape<sp/>as<sp/>the<sp/>envelope,<sp/>which<sp/>may<sp/>be<sp/>partially<sp/>off-screen.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7204"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>contours<sp/>are<sp/>closer<sp/>in<sp/>to<sp/>the<sp/>center<sp/>line.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7205"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ContourSpacing<sp/>=<sp/>(<ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>)<sp/>(rect.height<sp/>/<sp/>(2*<sp/>(zoomMax-zoomMin)));</highlight></codeline>
<codeline lineno="7206"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>MaxContours<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="7207"><highlight class="normal"></highlight></codeline>
<codeline lineno="7208"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Adding<sp/>ContourSpacing/2<sp/>selects<sp/>a<sp/>region<sp/>either<sp/>side<sp/>of<sp/>the<sp/>contour.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7209"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yDisplace<sp/>=<sp/>yValue<sp/>-<sp/>yMisalign<sp/>-<sp/>yMouse<sp/><sp/>+<sp/>ContourSpacing/2;</highlight></codeline>
<codeline lineno="7210"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(yDisplace<sp/>&gt;<sp/>(MaxContours<sp/>*<sp/>ContourSpacing))</highlight></codeline>
<codeline lineno="7211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7212"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Subtracting<sp/>the<sp/>ContourSpacing/2<sp/>we<sp/>added<sp/>earlier<sp/>ensures<sp/>distance<sp/>is<sp/>centred<sp/>on<sp/>the<sp/>contour.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7213"><highlight class="normal"><sp/><sp/><sp/>distance<sp/>=<sp/>abs(<sp/>(<sp/>yDisplace<sp/>%<sp/>ContourSpacing<sp/>)<sp/>-<sp/>ContourSpacing/2);</highlight></codeline>
<codeline lineno="7214"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<sp/>distance<sp/>&lt;<sp/>yTolerance<sp/>);</highlight></codeline>
<codeline lineno="7215"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7216"><highlight class="normal"></highlight></codeline>
<codeline lineno="7219" refid="class_track_panel_1ac73b0e8459c26a88fd13c748093be972" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac73b0e8459c26a88fd13c748093be972" kindref="member">TrackPanel::HitTestSamples</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*track,<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="7220"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7221"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(track);</highlight></codeline>
<codeline lineno="7222"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>track-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>)</highlight></codeline>
<codeline lineno="7223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7224"><highlight class="normal"></highlight></codeline>
<codeline lineno="7225"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wavetrack<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)track;</highlight></codeline>
<codeline lineno="7226"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>rate<sp/>in<sp/>order<sp/>to<sp/>calculate<sp/>the<sp/>critical<sp/>zoom<sp/>threshold</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7227"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>=<sp/>wavetrack-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>();</highlight></codeline>
<codeline lineno="7228"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>dBRange<sp/>=<sp/>wavetrack-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a97217e305f6eb7ead4452924fec4029d" kindref="member">dBRange</ref>;</highlight></codeline>
<codeline lineno="7229"><highlight class="normal"></highlight></codeline>
<codeline lineno="7230"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>displayType<sp/>=<sp/>wavetrack-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>();</highlight></codeline>
<codeline lineno="7231"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref><sp/>!=<sp/>displayType)</highlight></codeline>
<codeline lineno="7232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;<sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>a<sp/>wave,<sp/>so<sp/>return.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7233"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>dB<sp/>=<sp/>!wavetrack-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1ae4f07aa847f89f72a127ba5e357f1e78" kindref="member">isLinear</ref>();</highlight></codeline>
<codeline lineno="7234"><highlight class="normal"></highlight></codeline>
<codeline lineno="7235"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>tt<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(event.m_x,<sp/>rect.x);</highlight></codeline>
<codeline lineno="7236"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width;</highlight></codeline>
<codeline lineno="7237"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(&amp;width,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="7238"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!SampleResolutionTest(*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,<sp/>wavetrack,<sp/>tt,<sp/>rate,<sp/>width))</highlight></codeline>
<codeline lineno="7239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7240"><highlight class="normal"></highlight></codeline>
<codeline lineno="7241"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Just<sp/>get<sp/>one<sp/>sample.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7242"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>oneSample;</highlight></codeline>
<codeline lineno="7243"><highlight class="normal"><sp/><sp/><sp/><ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref><sp/>s0<sp/>=<sp/>(<ref refid="include_2audacity_2_types_8h_1afa427e1f521ea5ec12d054e8bd4d0f71" kindref="member">sampleCount</ref>)(tt<sp/>*<sp/>rate<sp/>+<sp/>0.5);</highlight></codeline>
<codeline lineno="7244"><highlight class="normal"><sp/><sp/><sp/>wavetrack-&gt;<ref refid="class_wave_track_1a989e55726466fa1d8ec9aa4322f1c950" kindref="member">Get</ref>((<ref refid="include_2audacity_2_types_8h_1aaafb46d1caf7c79262fec96b577215fe" kindref="member">samplePtr</ref>)&amp;oneSample,<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>,<sp/>s0,<sp/>1);</highlight></codeline>
<codeline lineno="7245"><highlight class="normal"></highlight></codeline>
<codeline lineno="7246"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>y<sp/>distance<sp/>of<sp/>envelope<sp/>point<sp/>from<sp/>center<sp/>line<sp/>(in<sp/>pixels).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7247"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>zoomMin,<sp/>zoomMax;</highlight></codeline>
<codeline lineno="7248"><highlight class="normal"></highlight></codeline>
<codeline lineno="7249"><highlight class="normal"><sp/><sp/><sp/>wavetrack-&gt;<ref refid="class_wave_track_1aebb4cac69620ce02b4f396fb37d23f82" kindref="member">GetDisplayBounds</ref>(&amp;zoomMin,<sp/>&amp;zoomMax);</highlight></codeline>
<codeline lineno="7250"><highlight class="normal"></highlight></codeline>
<codeline lineno="7251"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>envValue<sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="7252"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_envelope" kindref="compound">Envelope</ref>*<sp/>env<sp/>=<sp/>wavetrack-&gt;<ref refid="class_wave_track_1ab5377b2d185a54c4c8f5eb334f1c4285" kindref="member">GetEnvelopeAtX</ref>(event.GetX());</highlight></codeline>
<codeline lineno="7253"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(env)</highlight></codeline>
<codeline lineno="7254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>envValue<sp/>=<sp/>env-&gt;<ref refid="class_envelope_1ac5729053c923e47b43f0f063845c2ce9" kindref="member">GetValue</ref>(tt);</highlight></codeline>
<codeline lineno="7255"><highlight class="normal"></highlight></codeline>
<codeline lineno="7256"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yValue<sp/>=<sp/><ref refid="_track_artist_8cpp_1a00fc87b63f1436536d3090852d57f810" kindref="member">GetWaveYPos</ref>(<sp/>oneSample<sp/>*<sp/>envValue,</highlight></codeline>
<codeline lineno="7257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>zoomMin,<sp/>zoomMax,</highlight></codeline>
<codeline lineno="7258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height,<sp/>dB,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>dBRange,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>+<sp/>rect.y;</highlight></codeline>
<codeline lineno="7259"><highlight class="normal"></highlight></codeline>
<codeline lineno="7260"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>y<sp/>position<sp/>of<sp/>mouse<sp/>(in<sp/>pixels)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7261"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yMouse<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.m_y;</highlight></codeline>
<codeline lineno="7262"><highlight class="normal"></highlight></codeline>
<codeline lineno="7263"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Perhaps<sp/>yTolerance<sp/>should<sp/>be<sp/>put<sp/>into<sp/>preferences?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7264"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yTolerance<sp/>=<sp/>10;<sp/></highlight><highlight class="comment">//<sp/>More<sp/>tolerance<sp/>on<sp/>samples<sp/>than<sp/>on<sp/>envelope.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7265"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(<sp/>abs(<sp/>yValue<sp/>-<sp/><sp/>yMouse<sp/>)<sp/>&lt;<sp/>yTolerance<sp/>);</highlight></codeline>
<codeline lineno="7266"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7267"><highlight class="normal"></highlight></codeline>
<codeline lineno="7270" refid="class_track_panel_1a99f1ae26f8fb6694cba3a5b58c7a1e87" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a99f1ae26f8fb6694cba3a5b58c7a1e87" kindref="member">TrackPanel::HitTestSlide</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>WXUNUSED(track),<sp/>wxRect<sp/>&amp;rect,<sp/>wxMouseEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="7271"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7272"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Perhaps<sp/>we<sp/>should<sp/>delegate<sp/>this<sp/>to<sp/>TrackArtist<sp/>as<sp/>only<sp/>TrackArtist</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7273"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>knows<sp/>what<sp/>the<sp/>real<sp/>sizes<sp/>are??</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7274"><highlight class="normal"></highlight></codeline>
<codeline lineno="7275"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>drag<sp/>Handle<sp/>width<sp/>includes<sp/>border,<sp/>width<sp/>and<sp/>a<sp/>little<sp/>extra<sp/>margin.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7276"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>adjustedDragHandleWidth<sp/>=<sp/>14;</highlight></codeline>
<codeline lineno="7277"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>hotspot<sp/>for<sp/>the<sp/>cursor<sp/>isn&apos;t<sp/>at<sp/>its<sp/>centre.<sp/><sp/>Adjust<sp/>for<sp/>this.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7278"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>hotspotOffset<sp/>=<sp/>5;</highlight></codeline>
<codeline lineno="7279"><highlight class="normal"></highlight></codeline>
<codeline lineno="7280"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>are<sp/>doing<sp/>an<sp/>approximate<sp/>test<sp/>here<sp/>-<sp/>is<sp/>the<sp/>mouse<sp/>in<sp/>the<sp/>right<sp/>or<sp/>left<sp/>border?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7281"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>event.m_x<sp/>+<sp/>hotspotOffset<sp/>&lt;<sp/>rect.x<sp/>+<sp/>adjustedDragHandleWidth)</highlight></codeline>
<codeline lineno="7282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7283"><highlight class="normal"></highlight></codeline>
<codeline lineno="7284"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>event.m_x<sp/>+<sp/>hotspotOffset<sp/>&gt;<sp/>rect.x<sp/>+<sp/>rect.width<sp/>-<sp/>adjustedDragHandleWidth)</highlight></codeline>
<codeline lineno="7285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7286"><highlight class="normal"></highlight></codeline>
<codeline lineno="7287"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7288"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7289"><highlight class="normal"></highlight></codeline>
<codeline lineno="7290" refid="class_track_panel_1a159b2d7e386c3a3a8dbd8ebff7c0ffc1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a159b2d7e386c3a3a8dbd8ebff7c0ffc1" kindref="member">TrackPanel::GetMostRecentXPos</ref>()</highlight></codeline>
<codeline lineno="7291"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7292"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(<ref refid="class_track_panel_1a2b9d69055e7480fd704146b70509f790" kindref="member">mMouseMostRecentX</ref>,<sp/><ref refid="class_track_panel_1a484e5dfb5256787bbaf7296b0873a167" kindref="member">GetLabelWidth</ref>());</highlight></codeline>
<codeline lineno="7293"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7294"><highlight class="normal"></highlight></codeline>
<codeline lineno="7295" refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad8029c7399be65255dc67a638e6372f3" kindref="member">TrackPanel::RefreshTrack</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*trk,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>refreshbacking)</highlight></codeline>
<codeline lineno="7296"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7297"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*link<sp/>=<sp/>trk-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="7298"><highlight class="normal"></highlight></codeline>
<codeline lineno="7299"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link<sp/>&amp;&amp;<sp/>!trk-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())<sp/>{</highlight></codeline>
<codeline lineno="7300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>trk<sp/>=<sp/>link;</highlight></codeline>
<codeline lineno="7301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>link<sp/>=<sp/>trk-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="7302"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7303"><highlight class="normal"></highlight></codeline>
<codeline lineno="7304"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>subtract<sp/>insets<sp/>and<sp/>shadows<sp/>from<sp/>the<sp/>rectangle,<sp/>but<sp/>not<sp/>border</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7305"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>matters<sp/>because<sp/>some<sp/>separators<sp/>do<sp/>paint<sp/>over<sp/>the<sp/>border</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7306"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>,</highlight></codeline>
<codeline lineno="7307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>+<sp/>trk-&gt;<ref refid="class_track_1adefbd93c6cbde70d082a64729cfc74d8" kindref="member">GetY</ref>()<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>,</highlight></codeline>
<codeline lineno="7308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetRect().GetWidth()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref><sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796aab9a830c18ced8b35e7ea11354f1e168" kindref="member">kRightInset</ref><sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" kindref="member">kShadowThickness</ref>,</highlight></codeline>
<codeline lineno="7309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trk-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref><sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" kindref="member">kShadowThickness</ref>);</highlight></codeline>
<codeline lineno="7310"><highlight class="normal"></highlight></codeline>
<codeline lineno="7311"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link)<sp/>{</highlight></codeline>
<codeline lineno="7312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/>link-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="7313"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7314"><highlight class="normal"></highlight></codeline>
<codeline lineno="7315"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7316"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(trk)){</highlight></codeline>
<codeline lineno="7317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/>trk-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7318"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7319"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7320"><highlight class="normal"></highlight></codeline>
<codeline lineno="7321"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>refreshbacking<sp/>)</highlight></codeline>
<codeline lineno="7322"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9c034b23c400af061256ab309776baf4" kindref="member">mRefreshBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7324"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7325"><highlight class="normal"></highlight></codeline>
<codeline lineno="7326"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>&amp;rect<sp/>);</highlight></codeline>
<codeline lineno="7327"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7328"><highlight class="normal"></highlight></codeline>
<codeline lineno="7329"><highlight class="normal"></highlight></codeline>
<codeline lineno="7334" refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">TrackPanel::Refresh</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>eraseBackground<sp/></highlight><highlight class="comment">/*<sp/>=<sp/>TRUE<sp/>*/</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="7335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>*rect<sp/></highlight><highlight class="comment">/*<sp/>=<sp/>NULL<sp/>*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="7336"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7337"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Tell<sp/>OnPaint()<sp/>to<sp/>refresh<sp/>the<sp/>backing<sp/>bitmap.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7338"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7339"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Originally<sp/>I<sp/>had<sp/>the<sp/>check<sp/>within<sp/>the<sp/>OnPaint()<sp/>routine<sp/>and<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7340"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>was<sp/>working<sp/>fine.<sp/><sp/>That<sp/>was<sp/>until<sp/>I<sp/>found<sp/>that,<sp/>even<sp/>though<sp/>a<sp/>full</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7341"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>refresh<sp/>was<sp/>requested,<sp/>Windows<sp/>only<sp/>set<sp/>the<sp/>onscreen<sp/>portion<sp/>of<sp/>a</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7342"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>window<sp/>as<sp/>damaged.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7343"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7344"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>So,<sp/>if<sp/>any<sp/>part<sp/>of<sp/>the<sp/>trackpanel<sp/>was<sp/>off<sp/>the<sp/>screen,<sp/>full<sp/>refreshes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7345"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>didn&apos;t<sp/>work<sp/>and<sp/>the<sp/>display<sp/>got<sp/>corrupted.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7346"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!rect<sp/>||<sp/>(<sp/>*rect<sp/>==<sp/>GetRect()<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="7347"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a9c034b23c400af061256ab309776baf4" kindref="member">mRefreshBacking</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7349"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7350"><highlight class="normal"><sp/><sp/><sp/>wxWindow::Refresh(eraseBackground,<sp/>rect);</highlight></codeline>
<codeline lineno="7351"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="7352"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7353"><highlight class="normal"></highlight></codeline>
<codeline lineno="7357" refid="class_track_panel_1aaa5b6851ca776625e829a355d685910e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aaa5b6851ca776625e829a355d685910e" kindref="member">TrackPanel::DrawTracks</ref>(wxDC<sp/>*<sp/>dc)</highlight></codeline>
<codeline lineno="7358"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7359"><highlight class="normal"><sp/><sp/><sp/>wxRegion<sp/>region<sp/>=<sp/>GetUpdateRegion();</highlight></codeline>
<codeline lineno="7360"><highlight class="normal"></highlight></codeline>
<codeline lineno="7361"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>clip<sp/>=<sp/>GetRect();</highlight></codeline>
<codeline lineno="7362"><highlight class="normal"></highlight></codeline>
<codeline lineno="7363"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>panelRect<sp/>=<sp/>clip;</highlight></codeline>
<codeline lineno="7364"><highlight class="normal"><sp/><sp/><sp/>panelRect.y<sp/>=<sp/>-<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="7365"><highlight class="normal"></highlight></codeline>
<codeline lineno="7366"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>tracksRect<sp/>=<sp/>panelRect;</highlight></codeline>
<codeline lineno="7367"><highlight class="normal"><sp/><sp/><sp/>tracksRect.x<sp/>+=<sp/><ref refid="class_track_panel_1a484e5dfb5256787bbaf7296b0873a167" kindref="member">GetLabelWidth</ref>();</highlight></codeline>
<codeline lineno="7368"><highlight class="normal"><sp/><sp/><sp/>tracksRect.width<sp/>-=<sp/><ref refid="class_track_panel_1a484e5dfb5256787bbaf7296b0873a167" kindref="member">GetLabelWidth</ref>();</highlight></codeline>
<codeline lineno="7369"><highlight class="normal"></highlight></codeline>
<codeline lineno="7370"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_tools_tool_bar" kindref="compound">ToolsToolBar</ref><sp/>*pTtb<sp/>=<sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1acf3d6b30e8eefb02d6524223a1e70545" kindref="member">TP_GetToolsToolBar</ref>();</highlight></codeline>
<codeline lineno="7371"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bMultiToolDown<sp/>=<sp/>pTtb-&gt;<ref refid="class_tools_tool_bar_1a2d8c3ea8e829b4e8af34a848dcab38ae" kindref="member">IsDown</ref>(<ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac010717a868fce968a7046a9db152b55" kindref="member">multiTool</ref>);</highlight></codeline>
<codeline lineno="7372"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>envelopeFlag<sp/><sp/><sp/>=<sp/>pTtb-&gt;<ref refid="class_tools_tool_bar_1a2d8c3ea8e829b4e8af34a848dcab38ae" kindref="member">IsDown</ref>(<ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ad4963af29a1644a7d90b99b1de4802be" kindref="member">envelopeTool</ref>)<sp/>||<sp/>bMultiToolDown;</highlight></codeline>
<codeline lineno="7373"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bigPointsFlag<sp/><sp/>=<sp/>pTtb-&gt;<ref refid="class_tools_tool_bar_1a2d8c3ea8e829b4e8af34a848dcab38ae" kindref="member">IsDown</ref>(<ref refid="_tools_tool_bar_8h_1a72e63dc1307b88cc08ad0bd6c737d748ac02cdeab443a3cb8401c4ef92ec42328" kindref="member">drawTool</ref>)<sp/>||<sp/>bMultiToolDown;</highlight></codeline>
<codeline lineno="7374"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>sliderFlag<sp/><sp/><sp/><sp/><sp/>=<sp/>bMultiToolDown;</highlight></codeline>
<codeline lineno="7375"><highlight class="normal"></highlight></codeline>
<codeline lineno="7376"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>track<sp/>artist<sp/>actually<sp/>draws<sp/>the<sp/>stuff<sp/>inside<sp/>each<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7377"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1aecb43569c2de2e9e2cae4584ffd80a5f" kindref="member">DrawTracks</ref>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>,<sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;GetFirstVisible(),</highlight></codeline>
<codeline lineno="7378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*dc,<sp/>region,<sp/>tracksRect,<sp/>clip,</highlight></codeline>
<codeline lineno="7379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1a07895f02c517d048cc1ca855b0efa54e" kindref="member">selectedRegion</ref>,<sp/>*<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>,</highlight></codeline>
<codeline lineno="7380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>envelopeFlag,<sp/>bigPointsFlag,<sp/>sliderFlag);</highlight></codeline>
<codeline lineno="7381"><highlight class="normal"></highlight></codeline>
<codeline lineno="7382"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a501152ed41888644ff3a289f8f431785" kindref="member">DrawEverythingElse</ref>(dc,<sp/>region,<sp/>clip);</highlight></codeline>
<codeline lineno="7383"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7384"><highlight class="normal"></highlight></codeline>
<codeline lineno="7389" refid="class_track_panel_1a501152ed41888644ff3a289f8f431785" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a501152ed41888644ff3a289f8f431785" kindref="member">TrackPanel::DrawEverythingElse</ref>(wxDC<sp/>*<sp/>dc,</highlight></codeline>
<codeline lineno="7390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRegion<sp/>&amp;region,</highlight></codeline>
<codeline lineno="7391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>clip)</highlight></codeline>
<codeline lineno="7392"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7393"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>draw<sp/>everything<sp/>else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7394"><highlight class="normal"></highlight></codeline>
<codeline lineno="7395"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>focusRect(-1,<sp/>-1,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="7396"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>trackRect<sp/>=<sp/>clip;</highlight></codeline>
<codeline lineno="7397"><highlight class="normal"><sp/><sp/><sp/>trackRect.height<sp/>=<sp/>0;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>drawing<sp/>background<sp/>in<sp/>no<sp/>tracks<sp/>case.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7398"><highlight class="normal"></highlight></codeline>
<codeline lineno="7399"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_visible_track_iterator" kindref="compound">VisibleTrackIterator</ref><sp/>iter(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>());</highlight></codeline>
<codeline lineno="7400"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="7401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="7402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.height<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="7403"><highlight class="normal"></highlight></codeline>
<codeline lineno="7404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>this<sp/>track<sp/>is<sp/>linked<sp/>to<sp/>the<sp/>next<sp/>one,<sp/>display<sp/>a<sp/>common</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>border<sp/>for<sp/>both,<sp/>otherwise<sp/>draw<sp/>a<sp/>normal<sp/>border</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/>trackRect;</highlight></codeline>
<codeline lineno="7407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>skipBorder<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLink();</highlight></codeline>
<codeline lineno="7409"><highlight class="normal"></highlight></codeline>
<codeline lineno="7410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLinked())<sp/>{</highlight></codeline>
<codeline lineno="7411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/>l-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="7412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(l<sp/>&amp;&amp;<sp/>trackRect.y<sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="7414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>skipBorder<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7416"><highlight class="normal"></highlight></codeline>
<codeline lineno="7417"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)){</highlight></codeline>
<codeline lineno="7419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7421"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7422"><highlight class="normal"></highlight></codeline>
<codeline lineno="7423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>the<sp/>previous<sp/>track<sp/>is<sp/>linked<sp/>to<sp/>this<sp/>one<sp/>but<sp/>isn&apos;t<sp/>on<sp/>the<sp/>screen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(and<sp/>thus<sp/>would<sp/>have<sp/>been<sp/>skipped<sp/>by<sp/>VisibleTrackIterator)<sp/>we<sp/>need<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>that<sp/>track&apos;s<sp/>border<sp/>instead.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*borderTrack<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="7427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>borderRect<sp/>=<sp/>rect,<sp/>borderTrackRect<sp/>=<sp/>trackRect;</highlight></codeline>
<codeline lineno="7428"><highlight class="normal"></highlight></codeline>
<codeline lineno="7429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(l<sp/>&amp;&amp;<sp/>!<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLinked()<sp/>&amp;&amp;<sp/>trackRect.y<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="7430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>borderTrack<sp/>=<sp/><ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>;</highlight></codeline>
<codeline lineno="7432"><highlight class="normal"></highlight></codeline>
<codeline lineno="7433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>borderTrackRect.y<sp/>=<sp/>l-&gt;<ref refid="class_track_1adefbd93c6cbde70d082a64729cfc74d8" kindref="member">GetY</ref>()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="7434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>borderTrackRect.height<sp/>=<sp/>l-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="7435"><highlight class="normal"></highlight></codeline>
<codeline lineno="7436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>borderRect<sp/>=<sp/>borderTrackRect;</highlight></codeline>
<codeline lineno="7437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>borderRect.height<sp/>+=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="7438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7439"><highlight class="normal"></highlight></codeline>
<codeline lineno="7440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!skipBorder)<sp/>{</highlight></codeline>
<codeline lineno="7441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>-&gt;<ref refid="class_track_panel_ax_1a4301f83ada002e0605da20a5441e8f36" kindref="member">IsFocused</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>))<sp/>{</highlight></codeline>
<codeline lineno="7442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>focusRect<sp/>=<sp/>borderRect;</highlight></codeline>
<codeline lineno="7443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a663b8756796c9ab91e2ed95245920503" kindref="member">DrawOutside</ref>(borderTrack,<sp/>dc,<sp/>borderRect,<sp/>borderTrackRect);</highlight></codeline>
<codeline lineno="7445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7446"><highlight class="normal"></highlight></codeline>
<codeline lineno="7447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Believe<sp/>it<sp/>or<sp/>not,<sp/>we<sp/>can<sp/>speed<sp/>up<sp/>redrawing<sp/>if<sp/>we<sp/>don&apos;t</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>redraw<sp/>the<sp/>vertical<sp/>ruler<sp/>when<sp/>only<sp/>the<sp/>waveform<sp/>data<sp/>has</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>changed.<sp/><sp/>An<sp/>example<sp/>is<sp/>during<sp/>recording.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7450"><highlight class="normal"></highlight></codeline>
<codeline lineno="7451"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>DEBUG_DRAW_TIMING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7452"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rbox<sp/>=<sp/>region.GetBox();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7453"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>wxPrintf(wxT(&quot;Update<sp/>Region:<sp/>%d<sp/>%d<sp/>%d<sp/>%d\n&quot;),</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7454"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rbox.x,<sp/>rbox.y,<sp/>rbox.width,<sp/>rbox.height);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7455"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7456"><highlight class="normal"></highlight></codeline>
<codeline lineno="7457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(region.Contains(0,<sp/>trackRect.y,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>(),<sp/>trackRect.height))<sp/>{</highlight></codeline>
<codeline lineno="7458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/>trackRect;</highlight></codeline>
<codeline lineno="7459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>+=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>();</highlight></codeline>
<codeline lineno="7460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>;</highlight></codeline>
<codeline lineno="7461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>=<sp/><ref refid="class_track_panel_1a3046731ee18b2dc315e292b160e06560" kindref="member">GetVRulerWidth</ref>();</highlight></codeline>
<codeline lineno="7462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>-=<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="7463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1aa5b19d1f05fa5297ed4a97c179a3b658" kindref="member">DrawVRuler</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>dc,<sp/>rect);</highlight></codeline>
<codeline lineno="7464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7465"><highlight class="normal"></highlight></codeline>
<codeline lineno="7466"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)){</highlight></codeline>
<codeline lineno="7468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="7469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.height<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(region.Contains(0,<sp/>trackRect.y,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>(),<sp/>trackRect.height))<sp/>{</highlight></codeline>
<codeline lineno="7471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/>trackRect;</highlight></codeline>
<codeline lineno="7472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>+=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>();</highlight></codeline>
<codeline lineno="7473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>;</highlight></codeline>
<codeline lineno="7474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>=<sp/><ref refid="class_track_panel_1a3046731ee18b2dc315e292b160e06560" kindref="member">GetVRulerWidth</ref>();</highlight></codeline>
<codeline lineno="7475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>-=<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="7476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1aa5b19d1f05fa5297ed4a97c179a3b658" kindref="member">DrawVRuler</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>dc,<sp/>rect);</highlight></codeline>
<codeline lineno="7477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7479"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7480"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7481"><highlight class="normal"></highlight></codeline>
<codeline lineno="7482"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba63f346151e922233e8a785750e14199e" kindref="member">IsZooming</ref><sp/>||<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba70d8f72bedc78a86e6068438f14f79a0" kindref="member">IsVZooming</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a31af7885bade5968669ad90c848b5909" kindref="member">IsDragZooming</ref>()</highlight></codeline>
<codeline lineno="7484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>note<sp/>track<sp/>zooming<sp/>now<sp/>works<sp/>like<sp/>audio<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>mCapturedTrack<sp/>&amp;&amp;<sp/>mCapturedTrack-&gt;GetKind()<sp/>!=<sp/>Track::Note</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="7489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a53b862fc7f4eb461445429ad6b28a81e" kindref="member">DrawZooming</ref>(dc,<sp/>clip);</highlight></codeline>
<codeline lineno="7490"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7491"><highlight class="normal"></highlight></codeline>
<codeline lineno="7492"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Paint<sp/>over<sp/>the<sp/>part<sp/>below<sp/>the<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7493"><highlight class="normal"><sp/><sp/><sp/>trackRect.y<sp/>+=<sp/>trackRect.height;</highlight></codeline>
<codeline lineno="7494"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trackRect.y<sp/>&lt;<sp/>clip.GetBottom())<sp/>{</highlight></codeline>
<codeline lineno="7495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1aa8f929e199eafc0d62a58f8dfee6bc05" kindref="member">AColor::TrackPanelBackground</ref>(dc,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc-&gt;DrawRectangle(trackRect.x,</highlight></codeline>
<codeline lineno="7497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.y,</highlight></codeline>
<codeline lineno="7498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.width,</highlight></codeline>
<codeline lineno="7499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>clip.height<sp/>-<sp/>trackRect.y);</highlight></codeline>
<codeline lineno="7500"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7501"><highlight class="normal"></highlight></codeline>
<codeline lineno="7502"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Sometimes<sp/>highlight<sp/>is<sp/>not<sp/>drawn<sp/>on<sp/>backing<sp/>bitmap.<sp/>I<sp/>thought</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7503"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>it<sp/>was<sp/>because<sp/>FindFocus<sp/>did<sp/>not<sp/>return<sp/>&quot;this&quot;<sp/>on<sp/>Mac,<sp/>but</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7504"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>when<sp/>I<sp/>removed<sp/>that<sp/>test,<sp/>yielding<sp/>this<sp/>condition:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7505"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>if<sp/>(GetFocusedTrack()<sp/>!=<sp/>NULL)<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7506"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>highlight<sp/>was<sp/>reportedly<sp/>drawn<sp/>even<sp/>when<sp/>something<sp/>else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7507"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>was<sp/>the<sp/>focus<sp/>and<sp/>no<sp/>highlight<sp/>should<sp/>be<sp/>drawn.<sp/>-RBD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7508"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>()<sp/>!=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>&amp;&amp;<sp/>wxWindow::FindFocus()<sp/>==<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="7509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab579d3634b223e60ceed553cd41f4791" kindref="member">HighlightFocusedTrack</ref>(dc,<sp/>focusRect);</highlight></codeline>
<codeline lineno="7510"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7511"><highlight class="normal"></highlight></codeline>
<codeline lineno="7512"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>snap<sp/>guidelines<sp/>if<sp/>we<sp/>have<sp/>any</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7513"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1abf9ccf015613749c193cace9fae8c37d" kindref="member">mSnapManager</ref><sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>&gt;=<sp/>0<sp/>||<sp/><ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>&gt;=<sp/>0))<sp/>{</highlight></codeline>
<codeline lineno="7514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a4bd15996d1b16cbecaf10bf016cd9646" kindref="member">AColor::SnapGuidePen</ref>(dc);</highlight></codeline>
<codeline lineno="7515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref><sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="7516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<ref refid="class_track_panel_1a0fe446f7edd6b6638822a8348e000f07" kindref="member">mSnapLeft</ref>,<sp/>0,<sp/>mSnapLeft,<sp/>30000);</highlight></codeline>
<codeline lineno="7517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref><sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="7519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<ref refid="class_track_panel_1a39bd545d06508b322799058e6cfd3842" kindref="member">mSnapRight</ref>,<sp/>0,<sp/>mSnapRight,<sp/>30000);</highlight></codeline>
<codeline lineno="7520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7521"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7522"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7523"><highlight class="normal"></highlight></codeline>
<codeline lineno="7524"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7525" refid="class_track_panel_1a0f4818c686417ac1884da573c6acc9e3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0f4818c686417ac1884da573c6acc9e3" kindref="member">TrackPanel::ShouldDrawScrubSpeed</ref>()</highlight></codeline>
<codeline lineno="7526"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7527"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae30f39b53fd3947ccb99b048a6efd4e3" kindref="member">mScrubHasFocus</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((!<ref refid="class_track_panel_1a17b626c88077b5c998567797bbda9722" kindref="member">PollIsSeeking</ref>()<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="7530"><highlight class="normal">#ifdef<sp/><ref refid="_experimental_8h_1a305dce02d84a96501c789fc53839daf6" kindref="member">EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</ref></highlight></codeline>
<codeline lineno="7531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>always<sp/>for<sp/>scroll-scrub<sp/>and<sp/>for<sp/>scroll-seek</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref></highlight></codeline>
<codeline lineno="7533"><highlight class="normal">#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref></highlight></codeline>
<codeline lineno="7534"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="7535"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7536"><highlight class="normal"></highlight></codeline>
<codeline lineno="7537" refid="class_track_panel_1a4c24a3389932e326341a16bfeec01242" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4c24a3389932e326341a16bfeec01242" kindref="member">TrackPanel::TimerUpdateScrubbing</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>playPos)</highlight></codeline>
<codeline lineno="7538"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7539"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>())<sp/>{</highlight></codeline>
<codeline lineno="7540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afb81dd5b46c408b3eb546ee7d600fed0" kindref="member">mNextScrubRect</ref><sp/>=<sp/>wxRect();</highlight></codeline>
<codeline lineno="7541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7542"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7543"><highlight class="normal"></highlight></codeline>
<codeline lineno="7544"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Call<sp/>ContinueScrubbing()<sp/>here<sp/>in<sp/>the<sp/>timer<sp/>handler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7545"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>rather<sp/>than<sp/>in<sp/>SelectionHandleDrag()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7546"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>so<sp/>that<sp/>even<sp/>without<sp/>drag<sp/>events,<sp/>we<sp/>can<sp/>instruct<sp/>the<sp/>play<sp/>head<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7547"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>keep<sp/>approaching<sp/>the<sp/>mouse<sp/>cursor,<sp/>when<sp/>its<sp/>maximum<sp/>speed<sp/>is<sp/>limited.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7548"><highlight class="normal"></highlight></codeline>
<codeline lineno="7549"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Thus<sp/>scrubbing<sp/>relies<sp/>mostly<sp/>on<sp/>periodic<sp/>polling<sp/>of<sp/>mouse<sp/>and<sp/>keys,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7550"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>not<sp/>event<sp/>notifications.<sp/><sp/>But<sp/>there<sp/>are<sp/>a<sp/>few<sp/>event<sp/>handlers<sp/>that</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7551"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>leave<sp/>messages<sp/>for<sp/>this<sp/>routine,<sp/>in<sp/>mScrubSeekPress<sp/>and<sp/>in<sp/>mScrubHasFocus.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7552"><highlight class="normal"></highlight></codeline>
<codeline lineno="7553"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Seek<sp/>only<sp/>when<sp/>the<sp/>pointer<sp/>is<sp/>in<sp/>the<sp/>panel.<sp/><sp/>Else,<sp/>scrub.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7554"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxMouseState<sp/>state(::<ref refid="window_8cpp_1a6fb42677c51d509690e7062b9dadaa25" kindref="member">wxGetMouseState</ref>());</highlight></codeline>
<codeline lineno="7555"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxPoint<sp/><ref refid="structposition" kindref="compound">position</ref><sp/>=<sp/>ScreenToClient(state.GetPosition());</highlight></codeline>
<codeline lineno="7556"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>inPanel<sp/>=<sp/>GetRect().Contains(position);</highlight></codeline>
<codeline lineno="7557"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>seek<sp/>=<sp/>inPanel<sp/>&amp;&amp;<sp/>(<ref refid="class_track_panel_1a8082a55b36f3365b1dceefdc77da0067" kindref="member">mScrubSeekPress</ref><sp/>||<sp/><ref refid="class_track_panel_1a17b626c88077b5c998567797bbda9722" kindref="member">PollIsSeeking</ref>());</highlight></codeline>
<codeline lineno="7558"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a9b004c2baf47cbe9013b27c19dd164b9" kindref="member">ContinueScrubbing</ref>(position.x,<sp/><ref refid="class_track_panel_1ae30f39b53fd3947ccb99b048a6efd4e3" kindref="member">mScrubHasFocus</ref>,<sp/>seek))</highlight></codeline>
<codeline lineno="7559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8082a55b36f3365b1dceefdc77da0067" kindref="member">mScrubSeekPress</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7560"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>else,<sp/>if<sp/>seek<sp/>requested,<sp/>try<sp/>again<sp/>at<sp/>a<sp/>later<sp/>time<sp/>when<sp/>we<sp/>might</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7561"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>enqueue<sp/>a<sp/>long<sp/>enough<sp/>stutter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7562"><highlight class="normal"></highlight></codeline>
<codeline lineno="7563"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7564"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref>)</highlight></codeline>
<codeline lineno="7565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="7566"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7567"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7568"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="7570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>--<ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref>;</highlight></codeline>
<codeline lineno="7571"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7572"><highlight class="normal"></highlight></codeline>
<codeline lineno="7573"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a0f4818c686417ac1884da573c6acc9e3" kindref="member">ShouldDrawScrubSpeed</ref>())<sp/>{</highlight></codeline>
<codeline lineno="7574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afb81dd5b46c408b3eb546ee7d600fed0" kindref="member">mNextScrubRect</ref><sp/>=<sp/>wxRect();</highlight></codeline>
<codeline lineno="7575"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7576"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="7577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>panelWidth,<sp/>panelHeight;</highlight></codeline>
<codeline lineno="7578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>GetSize(&amp;panelWidth,<sp/>&amp;panelHeight);</highlight></codeline>
<codeline lineno="7579"><highlight class="normal"></highlight></codeline>
<codeline lineno="7580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Where&apos;s<sp/>the<sp/>mouse?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>xx,<sp/>yy;</highlight></codeline>
<codeline lineno="7582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="window_8cpp_1a00fef3cd1a110189e737ad7bf948a3d0" kindref="member">::wxGetMousePosition</ref>(&amp;xx,<sp/>&amp;yy);</highlight></codeline>
<codeline lineno="7583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ScreenToClient(&amp;xx,<sp/>&amp;yy);</highlight></codeline>
<codeline lineno="7584"><highlight class="normal"></highlight></codeline>
<codeline lineno="7585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>seeking<sp/>=<sp/><ref refid="class_track_panel_1a17b626c88077b5c998567797bbda9722" kindref="member">PollIsSeeking</ref>();</highlight></codeline>
<codeline lineno="7586"><highlight class="normal"></highlight></codeline>
<codeline lineno="7587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Find<sp/>the<sp/>text</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>speed<sp/>=</highlight></codeline>
<codeline lineno="7589"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref></highlight></codeline>
<codeline lineno="7591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>seeking</highlight></codeline>
<codeline lineno="7592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="class_track_panel_1a700982026d45a87971910757d0e9b730" kindref="member">FindSeekSpeed</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(xx,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()))</highlight></codeline>
<codeline lineno="7593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><ref refid="class_track_panel_1ada36085585f713f52e23065a1d03a16e" kindref="member">FindScrubSpeed</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(xx,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()))</highlight></codeline>
<codeline lineno="7594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:</highlight></codeline>
<codeline lineno="7595"><highlight class="normal">#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref></highlight></codeline>
<codeline lineno="7596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e5d55b49f7c2012e9157964c9d3e67f" kindref="member">mMaxScrubSpeed</ref>;</highlight></codeline>
<codeline lineno="7597"><highlight class="normal"></highlight></codeline>
<codeline lineno="7598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxChar<sp/>*<ref refid="_export_p_c_m_8cpp_1a317afff57d87a89158c2b038d37b2b08" kindref="member">format</ref><sp/>=</highlight></codeline>
<codeline lineno="7599"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref></highlight></codeline>
<codeline lineno="7601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>seeking</highlight></codeline>
<codeline lineno="7602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>wxT(</highlight><highlight class="stringliteral">&quot;%+.2fX&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="7603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>wxT(</highlight><highlight class="stringliteral">&quot;%+.2f&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="7604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:</highlight></codeline>
<codeline lineno="7605"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxT(</highlight><highlight class="stringliteral">&quot;%.2f&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7607"><highlight class="normal"></highlight></codeline>
<codeline lineno="7608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aeb97bf6164e834af5dc57a013b35900e" kindref="member">mNextScrubSpeedText</ref><sp/>=<sp/>wxString::Format(format,<sp/>speed);</highlight></codeline>
<codeline lineno="7609"><highlight class="normal"></highlight></codeline>
<codeline lineno="7610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Find<sp/>the<sp/>origin<sp/>for<sp/>drawing<sp/>text</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxCoord<sp/>width,<sp/>height;</highlight></codeline>
<codeline lineno="7612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxFont<sp/>labelFont(24,<sp/>wxSWISS,<sp/>wxNORMAL,<sp/>wxNORMAL);</highlight></codeline>
<codeline lineno="7615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.SetFont(labelFont);</highlight></codeline>
<codeline lineno="7616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.GetTextExtent(<ref refid="class_track_panel_1aeb97bf6164e834af5dc57a013b35900e" kindref="member">mNextScrubSpeedText</ref>,<sp/>&amp;width,<sp/>&amp;height);</highlight></codeline>
<codeline lineno="7617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xx<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0,<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(panelWidth<sp/>-<sp/>width,<sp/>xx<sp/>-<sp/>width<sp/>/<sp/>2));</highlight></codeline>
<codeline lineno="7619"><highlight class="normal"></highlight></codeline>
<codeline lineno="7620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Put<sp/>the<sp/>text<sp/>above<sp/>the<sp/>cursor,<sp/>if<sp/>it<sp/>fits.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{<sp/><ref refid="layer12_8c_1a33d71f23ba2052d17f0b754dc35265b0" kindref="member">offset</ref><sp/>=<sp/>20<sp/>};</highlight></codeline>
<codeline lineno="7622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>yy<sp/>-=<sp/>height<sp/>+<sp/><ref refid="layer12_8c_1a33d71f23ba2052d17f0b754dc35265b0" kindref="member">offset</ref>;</highlight></codeline>
<codeline lineno="7623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(yy<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="7624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yy<sp/>+=<sp/>height<sp/>+<sp/>2<sp/>*<sp/><ref refid="layer12_8c_1a33d71f23ba2052d17f0b754dc35265b0" kindref="member">offset</ref>;</highlight></codeline>
<codeline lineno="7625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>yy<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0,<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(panelHeight<sp/>-<sp/>height,<sp/>yy));</highlight></codeline>
<codeline lineno="7626"><highlight class="normal"></highlight></codeline>
<codeline lineno="7627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afb81dd5b46c408b3eb546ee7d600fed0" kindref="member">mNextScrubRect</ref><sp/>=<sp/>wxRect(xx,<sp/>yy,<sp/>width,<sp/>height);</highlight></codeline>
<codeline lineno="7628"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7629"><highlight class="normal"></highlight></codeline>
<codeline lineno="7630"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7631"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref>)<sp/>{</highlight></codeline>
<codeline lineno="7632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Pan<sp/>the<sp/>view,<sp/>so<sp/>that<sp/>we<sp/>center<sp/>the<sp/>play<sp/>indicator.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>posX<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(playPos);</highlight></codeline>
<codeline lineno="7634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width;</highlight></codeline>
<codeline lineno="7635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(&amp;width,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="7636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>deltaX<sp/>=<sp/>posX<sp/>-<sp/>width<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="7637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>=</highlight></codeline>
<codeline lineno="7638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a1a372776b3fc3c9a1fe7f7377a996745" kindref="member">OffsetTimeByPixels</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>,<sp/>deltaX,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1ac7f681a6d3bdd4450edb5d50b42160a9" kindref="member">bScrollBeyondZero</ref>)</highlight></codeline>
<codeline lineno="7640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Can&apos;t<sp/>scroll<sp/>too<sp/>far<sp/>left</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref><sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0.0,<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a990819d4177a5eec904f6f7d65dac32a" kindref="member">h</ref>);</highlight></codeline>
<codeline lineno="7642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7643"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7644"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7645"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7646"><highlight class="normal"></highlight></codeline>
<codeline lineno="7647" refid="class_track_panel_1ab5d6cd70214d951298e021b2495ee3e3" refkind="member"><highlight class="normal">std::pair&lt;wxRect,<sp/>bool&gt;<sp/><ref refid="class_track_panel_1ab5d6cd70214d951298e021b2495ee3e3" kindref="member">TrackPanel::GetScrubSpeedRectangle</ref>()</highlight></codeline>
<codeline lineno="7648"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7649"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(<ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>);</highlight></codeline>
<codeline lineno="7650"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7651"><highlight class="normal"><sp/><sp/><sp/>rect.Inflate(1,<sp/>0);</highlight></codeline>
<codeline lineno="7652"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7653"><highlight class="normal"></highlight></codeline>
<codeline lineno="7654"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>outdated<sp/>=</highlight></codeline>
<codeline lineno="7655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref><sp/>!=<sp/><ref refid="class_track_panel_1afb81dd5b46c408b3eb546ee7d600fed0" kindref="member">mNextScrubRect</ref>)<sp/>||</highlight></codeline>
<codeline lineno="7656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(!<ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.IsEmpty()<sp/>&amp;&amp;<sp/>!<ref refid="class_track_panel_1a0f4818c686417ac1884da573c6acc9e3" kindref="member">ShouldDrawScrubSpeed</ref>())<sp/>||</highlight></codeline>
<codeline lineno="7657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1aef295ebe27bee4656a73854346945495" kindref="member">mLastScrubSpeedText</ref><sp/>!=<sp/><ref refid="class_track_panel_1aeb97bf6164e834af5dc57a013b35900e" kindref="member">mNextScrubSpeedText</ref>);</highlight></codeline>
<codeline lineno="7658"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std::make_pair(</highlight></codeline>
<codeline lineno="7659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect,</highlight></codeline>
<codeline lineno="7660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outdated</highlight></codeline>
<codeline lineno="7661"><highlight class="normal"><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="7662"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7663"><highlight class="normal"></highlight></codeline>
<codeline lineno="7664" refid="class_track_panel_1a091f967bc3c2366364e48b41b21e40c3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a091f967bc3c2366364e48b41b21e40c3" kindref="member">TrackPanel::UndrawScrubSpeed</ref>(wxDC<sp/>&amp;<sp/>dc)</highlight></codeline>
<codeline lineno="7665"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7666"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.IsEmpty())</highlight></codeline>
<codeline lineno="7667"><highlight class="normal">#</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>defined(__WXMAC__)</highlight></codeline>
<codeline lineno="7668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>OSX,<sp/>if<sp/>a<sp/>HiDPI<sp/>resolution<sp/>is<sp/>being<sp/>used,<sp/>the<sp/>line<sp/>will<sp/>actually<sp/>take<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>more<sp/>than<sp/>1<sp/>pixel<sp/>(even<sp/>though<sp/>it<sp/>is<sp/>drawn<sp/>as<sp/>1),<sp/>so<sp/>we<sp/>restore<sp/>the<sp/>surrounding</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>pixels<sp/>as<sp/>well.<sp/><sp/>(This<sp/>is<sp/>because<sp/>the<sp/>wxClientDC<sp/>doesn&apos;t<sp/>know<sp/>about<sp/>the<sp/>scaling.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(</highlight></codeline>
<codeline lineno="7672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetX()<sp/>-<sp/>1,<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetY(),</highlight></codeline>
<codeline lineno="7673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetWidth()<sp/>+<sp/>3,<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetHeight(),</highlight></codeline>
<codeline lineno="7674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,</highlight></codeline>
<codeline lineno="7675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetX()<sp/>-<sp/>1,<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetY());</highlight></codeline>
<codeline lineno="7676"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc.Blit(</highlight></codeline>
<codeline lineno="7678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetX(),<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetY(),</highlight></codeline>
<codeline lineno="7679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetWidth(),<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetHeight(),</highlight></codeline>
<codeline lineno="7680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;<ref refid="class_track_panel_1acf9670b9b52fc68fb6d148e8c79cad95" kindref="member">mBackingDC</ref>,</highlight></codeline>
<codeline lineno="7681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetX(),<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetY());</highlight></codeline>
<codeline lineno="7682"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7683"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7684"><highlight class="normal"></highlight></codeline>
<codeline lineno="7685" refid="class_track_panel_1aa8e9d595a7f1d370f8d5a55cd4e65045" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa8e9d595a7f1d370f8d5a55cd4e65045" kindref="member">TrackPanel::DoDrawScrubSpeed</ref>(wxDC<sp/>&amp;dc)</highlight></codeline>
<codeline lineno="7686"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7687"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a0f4818c686417ac1884da573c6acc9e3" kindref="member">ShouldDrawScrubSpeed</ref>())</highlight></codeline>
<codeline lineno="7688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7689"><highlight class="normal"></highlight></codeline>
<codeline lineno="7690"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref><sp/>=<sp/><ref refid="class_track_panel_1afb81dd5b46c408b3eb546ee7d600fed0" kindref="member">mNextScrubRect</ref>;</highlight></codeline>
<codeline lineno="7691"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aef295ebe27bee4656a73854346945495" kindref="member">mLastScrubSpeedText</ref><sp/>=<sp/><ref refid="class_track_panel_1aeb97bf6164e834af5dc57a013b35900e" kindref="member">mNextScrubSpeedText</ref>;</highlight></codeline>
<codeline lineno="7692"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>seeking<sp/>=<sp/><ref refid="class_track_panel_1a17b626c88077b5c998567797bbda9722" kindref="member">PollIsSeeking</ref>();</highlight></codeline>
<codeline lineno="7693"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="comment">//<sp/>Draw<sp/>for<sp/>(non-scroll)<sp/>scrub,<sp/>sometimes,<sp/>but<sp/>never<sp/>for<sp/>seek</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(!seeking<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1af6bc97469446521a9213c76e533d428e" kindref="member">mScrubSpeedDisplayCountdown</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="7695"><highlight class="normal">#ifdef<sp/><ref refid="_experimental_8h_1a305dce02d84a96501c789fc53839daf6" kindref="member">EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</ref></highlight></codeline>
<codeline lineno="7696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>always<sp/>for<sp/>scroll-scrub<sp/>and<sp/>for<sp/>scroll-seek</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref></highlight></codeline>
<codeline lineno="7698"><highlight class="normal">#<ref refid="sndfile__play_8m_1a74c64864f5283ae06d4a981642a59af9" kindref="member">endif</ref></highlight></codeline>
<codeline lineno="7699"><highlight class="normal"></highlight></codeline>
<codeline lineno="7700"><highlight class="normal"><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="7701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxFont<sp/>labelFont(24,<sp/>wxSWISS,<sp/>wxNORMAL,<sp/>wxNORMAL);</highlight></codeline>
<codeline lineno="7702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc.SetFont(labelFont);</highlight></codeline>
<codeline lineno="7703"><highlight class="normal"></highlight></codeline>
<codeline lineno="7704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>These<sp/>two<sp/>colors<sp/>were<sp/>previously<sp/>saturated<sp/>red<sp/>and<sp/>green.<sp/><sp/>However<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>have<sp/>a<sp/>rule<sp/>to<sp/>try<sp/>to<sp/>only<sp/>use<sp/>red<sp/>for<sp/>reserved<sp/>purposes<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>(a)<sp/>Recording</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>(b)<sp/>Error<sp/>alerts</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>So<sp/>they<sp/>were<sp/>changed<sp/>to<sp/>&apos;orange&apos;<sp/>and<sp/>&apos;lime&apos;.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxColour<sp/>clrNoScroll(215,<sp/>162,<sp/>0),<sp/>clrScroll(0,<sp/>204,<sp/>153);</highlight></codeline>
<codeline lineno="7710"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_SMOOTH_SCROLL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1ae17e115fd911a87f495222351dbdb22e" kindref="member">mSmoothScrollingScrub</ref>)</highlight></codeline>
<codeline lineno="7712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.SetTextForeground(clrScroll);</highlight></codeline>
<codeline lineno="7713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7714"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc.SetTextForeground(clrNoScroll);</highlight></codeline>
<codeline lineno="7716"><highlight class="normal"></highlight></codeline>
<codeline lineno="7717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc.DrawText(<ref refid="class_track_panel_1aef295ebe27bee4656a73854346945495" kindref="member">mLastScrubSpeedText</ref>,<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetX(),<sp/><ref refid="class_track_panel_1a2cd5595843ff183a9d1bdcd7e911ccb4" kindref="member">mLastScrubRect</ref>.GetY());</highlight></codeline>
<codeline lineno="7718"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7719"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7720"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7721"><highlight class="normal"></highlight></codeline>
<codeline lineno="7726" refid="class_track_panel_1a53b862fc7f4eb461445429ad6b28a81e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a53b862fc7f4eb461445429ad6b28a81e" kindref="member">TrackPanel::DrawZooming</ref>(wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>clip)</highlight></codeline>
<codeline lineno="7727"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7728"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="7729"><highlight class="normal"></highlight></codeline>
<codeline lineno="7730"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetBrush(*wxTRANSPARENT_BRUSH);</highlight></codeline>
<codeline lineno="7731"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(*wxBLACK_DASHED_PEN);</highlight></codeline>
<codeline lineno="7732"><highlight class="normal"></highlight></codeline>
<codeline lineno="7733"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>==<ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba70d8f72bedc78a86e6068438f14f79a0" kindref="member">IsVZooming</ref>)<sp/>{</highlight></codeline>
<codeline lineno="7734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(<ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>,<sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>);</highlight></codeline>
<codeline lineno="7735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>=<sp/>1<sp/>+<sp/>abs(<ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>-<sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>);</highlight></codeline>
<codeline lineno="7736"><highlight class="normal"></highlight></codeline>
<codeline lineno="7737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>();</highlight></codeline>
<codeline lineno="7738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.SetRight(GetSize().<ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref><sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a3350016f0960d9fe59103dc2b675d2c9" kindref="member">kRightMargin</ref>);<sp/></highlight><highlight class="comment">//<sp/>extends<sp/>into<sp/>border<sp/>rect</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7739"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7740"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="7741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(<ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>,<sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref>);</highlight></codeline>
<codeline lineno="7742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>=<sp/>1<sp/>+<sp/>abs(<ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>-<sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref>);</highlight></codeline>
<codeline lineno="7743"><highlight class="normal"></highlight></codeline>
<codeline lineno="7744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="7745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>=<sp/>clip.height<sp/>+<sp/>2;</highlight></codeline>
<codeline lineno="7746"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7747"><highlight class="normal"></highlight></codeline>
<codeline lineno="7748"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(rect);</highlight></codeline>
<codeline lineno="7749"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7750"><highlight class="normal"></highlight></codeline>
<codeline lineno="7751"><highlight class="normal"></highlight></codeline>
<codeline lineno="7752" refid="class_track_panel_1a663b8756796c9ab91e2ed95245920503" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a663b8756796c9ab91e2ed95245920503" kindref="member">TrackPanel::DrawOutside</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rec,</highlight></codeline>
<codeline lineno="7753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>trackRect)</highlight></codeline>
<codeline lineno="7754"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7755"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/>rec;</highlight></codeline>
<codeline lineno="7756"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>labelw<sp/>=<sp/><ref refid="class_track_panel_1a484e5dfb5256787bbaf7296b0873a167" kindref="member">GetLabelWidth</ref>();</highlight></codeline>
<codeline lineno="7757"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>vrul<sp/>=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>();</highlight></codeline>
<codeline lineno="7758"><highlight class="normal"></highlight></codeline>
<codeline lineno="7759"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a4c73d580495e4908ab6632bf8530e3a5" kindref="member">DrawOutsideOfTrack</ref>(t,<sp/>dc,<sp/>rect);</highlight></codeline>
<codeline lineno="7760"><highlight class="normal"></highlight></codeline>
<codeline lineno="7761"><highlight class="normal"><sp/><sp/><sp/>rect.x<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="7762"><highlight class="normal"><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="7763"><highlight class="normal"><sp/><sp/><sp/>rect.width<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref><sp/>*<sp/>2;</highlight></codeline>
<codeline lineno="7764"><highlight class="normal"><sp/><sp/><sp/>rect.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="7765"><highlight class="normal"></highlight></codeline>
<codeline lineno="7766"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.SetTrackInfoFont(dc);</highlight></codeline>
<codeline lineno="7767"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetTextForeground(<ref refid="_theme_8cpp_1a778dd1fa4ed7e54e48ec7b65aba2363e" kindref="member">theTheme</ref>.<ref refid="class_theme_base_1a13757bf24e6ed4f5807baa848fa2021c" kindref="member">Colour</ref>(clrTrackPanelText));</highlight></codeline>
<codeline lineno="7768"><highlight class="normal"></highlight></codeline>
<codeline lineno="7769"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bIsWave<sp/>=<sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>);</highlight></codeline>
<codeline lineno="7770"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7771"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bIsNote<sp/>=<sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note);</highlight></codeline>
<codeline lineno="7772"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7773"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>enable<sp/>bHasMuteSolo<sp/>for<sp/>Note<sp/>track<sp/>because<sp/>it<sp/>will<sp/>draw<sp/>in<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7774"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>wrong<sp/>place.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7775"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawBackground(dc,<sp/>rect,<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>(),<sp/>bIsWave,<sp/>labelw,<sp/>vrul);</highlight></codeline>
<codeline lineno="7776"><highlight class="normal"></highlight></codeline>
<codeline lineno="7777"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Vaughan,<sp/>2010-08-24:<sp/>No<sp/>longer<sp/>doing<sp/>this.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7778"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>sync-lock<sp/>tiles<sp/>in<sp/>ruler<sp/>area.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7779"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>(t-&gt;IsSyncLockSelected())<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7780"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>wxRect<sp/>tileFill<sp/>=<sp/>rect;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7781"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>tileFill.x<sp/>=<sp/>GetVRulerOffset();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7782"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>tileFill.width<sp/>=<sp/>GetVRulerWidth();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7783"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>TrackArtist::DrawSyncLockTiles(dc,<sp/>tileFill);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7784"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7785"><highlight class="normal"></highlight></codeline>
<codeline lineno="7786"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a2294cb4b4ea67022ec0ff96ef66f0a70" kindref="member">DrawBordersAroundTrack</ref>(t,<sp/>dc,<sp/>rect,<sp/>labelw,<sp/>vrul);</highlight></codeline>
<codeline lineno="7787"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae675db226f9ccb85b9c682f774b0cc7e" kindref="member">DrawShadow</ref>(t,<sp/>dc,<sp/>rect);</highlight></codeline>
<codeline lineno="7788"><highlight class="normal"></highlight></codeline>
<codeline lineno="7789"><highlight class="normal"><sp/><sp/><sp/>rect.width<sp/>=<sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTrackInfoWidth();</highlight></codeline>
<codeline lineno="7790"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>captured<sp/>=<sp/>(t<sp/>==<sp/><ref refid="class_track_panel_1a5126cd1abc9c5418e7e2434a24be7643" kindref="member">mCapturedTrack</ref>);</highlight></codeline>
<codeline lineno="7791"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawCloseBox(dc,<sp/>rect,<sp/>(captured<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>==<ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba65d4e06b600c85131d6280824090c839" kindref="member">IsClosing</ref>));</highlight></codeline>
<codeline lineno="7792"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawTitleBar(dc,<sp/>rect,<sp/>t,<sp/>(captured<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>==<ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba0bc8af996749c9a282d6d1cc085bb718" kindref="member">IsPopping</ref>));</highlight></codeline>
<codeline lineno="7793"><highlight class="normal"></highlight></codeline>
<codeline lineno="7794"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMinimize(dc,<sp/>rect,<sp/>t,<sp/>(captured<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref>==<ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7baf180ce3b7d4ece7b539329ffd0d3c418" kindref="member">IsMinimizing</ref>));</highlight></codeline>
<codeline lineno="7795"><highlight class="normal"></highlight></codeline>
<codeline lineno="7796"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>the<sp/>sync-lock<sp/>indicator<sp/>if<sp/>this<sp/>track<sp/>is<sp/>in<sp/>a<sp/>sync-lock<sp/>selected<sp/>group.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7797"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1a4b9d8ec8baa8ce94f9b9b999e324a59f" kindref="member">IsSyncLockSelected</ref>())</highlight></codeline>
<codeline lineno="7798"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>syncLockIconRect;</highlight></codeline>
<codeline lineno="7800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetSyncLockIconRect(rect,<sp/>syncLockIconRect);</highlight></codeline>
<codeline lineno="7801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxBitmap<sp/>syncLockBitmap(<ref refid="_theme_8cpp_1a778dd1fa4ed7e54e48ec7b65aba2363e" kindref="member">theTheme</ref>.<ref refid="class_theme_base_1a2243773f651603c2855bd3562801d680" kindref="member">Image</ref>(bmpSyncLockIcon));</highlight></codeline>
<codeline lineno="7802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Icon<sp/>is<sp/>12x12<sp/>and<sp/>syncLockIconRect<sp/>is<sp/>16x16.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc-&gt;DrawBitmap(syncLockBitmap,</highlight></codeline>
<codeline lineno="7804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syncLockIconRect.x<sp/>+<sp/>3,</highlight></codeline>
<codeline lineno="7805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>syncLockIconRect.y<sp/>+<sp/>2,</highlight></codeline>
<codeline lineno="7806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7807"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7808"><highlight class="normal"></highlight></codeline>
<codeline lineno="7809"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawBordersWithin(<sp/>dc,<sp/>rect,<sp/>bIsWave<sp/>);</highlight></codeline>
<codeline lineno="7810"><highlight class="normal"></highlight></codeline>
<codeline lineno="7811"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bIsWave)<sp/>{</highlight></codeline>
<codeline lineno="7812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMuteSolo(dc,<sp/>rect,<sp/>t,<sp/>(captured<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba2a64907f1fe32a06a375449216f1ad02" kindref="member">IsMuting</ref>),<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="7813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMuteSolo(dc,<sp/>rect,<sp/>t,<sp/>(captured<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba7750c1bc9eabfb7cf297de627fd2ce8b" kindref="member">IsSoloing</ref>),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="7814"><highlight class="normal"></highlight></codeline>
<codeline lineno="7815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawSliders(dc,<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)t,<sp/>rect,<sp/>captured);</highlight></codeline>
<codeline lineno="7816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>())<sp/>{</highlight></codeline>
<codeline lineno="7817"><highlight class="normal"></highlight></codeline>
<codeline lineno="7818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="layer12_8c_1a33d71f23ba2052d17f0b754dc35265b0" kindref="member">offset</ref><sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="7819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rect.y<sp/>+<sp/>22<sp/>+<sp/>12<sp/>&lt;<sp/>rec.y<sp/>+<sp/>rec.height<sp/>-<sp/>19)</highlight></codeline>
<codeline lineno="7820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc-&gt;DrawText(<ref refid="class_track_panel_1a093ad21c17a1df943c990cca76c354c7" kindref="member">TrackSubText</ref>(t),</highlight></codeline>
<codeline lineno="7821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.x<sp/>+<sp/>offset,</highlight></codeline>
<codeline lineno="7822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.y<sp/>+<sp/>22);</highlight></codeline>
<codeline lineno="7823"><highlight class="normal"></highlight></codeline>
<codeline lineno="7824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rect.y<sp/>+<sp/>38<sp/>+<sp/>12<sp/>&lt;<sp/>rec.y<sp/>+<sp/>rec.height<sp/>-<sp/>19)</highlight></codeline>
<codeline lineno="7825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc-&gt;DrawText(<ref refid="_sample_format_8cpp_1aa1e05d8c243fe96c1bee978d1ec73b57" kindref="member">GetSampleFormatStr</ref>(((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/>t)-&gt;GetSampleFormat()),</highlight></codeline>
<codeline lineno="7826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.x<sp/>+<sp/>offset,</highlight></codeline>
<codeline lineno="7827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackRect.y<sp/>+<sp/>38);</highlight></codeline>
<codeline lineno="7828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7829"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7830"><highlight class="normal"></highlight></codeline>
<codeline lineno="7831"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7832"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bIsNote)<sp/>{</highlight></codeline>
<codeline lineno="7833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Note<sp/>tracks<sp/>do<sp/>not<sp/>have<sp/>text,<sp/>e.g.<sp/>&quot;Mono,<sp/>44100Hz,<sp/>32-bit<sp/>float&quot;,<sp/>so</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Mute<sp/>&amp;<sp/>Solo<sp/>button<sp/>goes<sp/>higher.<sp/>To<sp/>preserve<sp/>existing<sp/>AudioTrack<sp/>code,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>move<sp/>the<sp/>buttons<sp/>up<sp/>by<sp/>pretending<sp/>track<sp/>is<sp/>higher<sp/>(at<sp/>lower<sp/>y)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>-=<sp/>34;</highlight></codeline>
<codeline lineno="7837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/>34;</highlight></codeline>
<codeline lineno="7838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>midiRect;</highlight></codeline>
<codeline lineno="7839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTrackControlsRect(trackRect,<sp/>midiRect);</highlight></codeline>
<codeline lineno="7840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Offset<sp/>by<sp/>height<sp/>of<sp/>Solo/Mute<sp/>buttons:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>midiRect.y<sp/>+=<sp/>15;</highlight></codeline>
<codeline lineno="7842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>midiRect.height<sp/>-=<sp/>21;<sp/></highlight><highlight class="comment">//<sp/>allow<sp/>room<sp/>for<sp/>minimize<sp/>button<sp/>at<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7843"><highlight class="normal"></highlight></codeline>
<codeline lineno="7844"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>offset<sp/>2<sp/>is<sp/>just<sp/>to<sp/>leave<sp/>a<sp/>little<sp/>space<sp/>between<sp/>channel<sp/>buttons</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>velocity<sp/>slider<sp/>(if<sp/>any)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>h<sp/>=<sp/>((<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>t)-&gt;DrawLabelControls(*dc,<sp/>midiRect)<sp/>+<sp/>2;</highlight></codeline>
<codeline lineno="7848"><highlight class="normal"></highlight></codeline>
<codeline lineno="7849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>some<sp/>lines<sp/>for<sp/>MuteSolo<sp/>buttons:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rect.height<sp/>&gt;<sp/>84)<sp/>{</highlight></codeline>
<codeline lineno="7851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x+48<sp/>,<sp/>rect.y+50,<sp/>rect.x+48,<sp/>rect.y<sp/>+<sp/>66);</highlight></codeline>
<codeline lineno="7852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>bevel<sp/>below<sp/>mute/solo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x,<sp/>rect.y<sp/>+<sp/>66,<sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTrackInfoWidth(),<sp/>rect.y<sp/>+<sp/>66);</highlight></codeline>
<codeline lineno="7854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMuteSolo(dc,<sp/>rect,<sp/>t,</highlight></codeline>
<codeline lineno="7856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(captured<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba2a64907f1fe32a06a375449216f1ad02" kindref="member">IsMuting</ref>),<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="7857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawMuteSolo(dc,<sp/>rect,<sp/>t,</highlight></codeline>
<codeline lineno="7858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(captured<sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a79906d0aaa8d91b2be89d479e78ec4e3" kindref="member">mMouseCapture</ref><sp/>==<sp/><ref refid="class_track_panel_1acdcb15e30d6e6f19b6f566d40d573e7ba7750c1bc9eabfb7cf297de627fd2ce8b" kindref="member">IsSoloing</ref>),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/><ref refid="class_track_panel_1ab35afcac689403ddcc4ea57bfca2597f" kindref="member">HasSoloButton</ref>());</highlight></codeline>
<codeline lineno="7859"><highlight class="normal"></highlight></codeline>
<codeline lineno="7860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>place<sp/>a<sp/>volume<sp/>control<sp/>below<sp/>channel<sp/>buttons<sp/>(this<sp/>will</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>control<sp/>an<sp/>offset<sp/>to<sp/>midi<sp/>velocity).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DrawVelocitySlider<sp/>places<sp/>slider<sp/>assuming<sp/>this<sp/>is<sp/>a<sp/>Wave<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>using<sp/>a<sp/>large<sp/>offset<sp/>to<sp/>leave<sp/>room<sp/>for<sp/>other<sp/>things,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>so<sp/>here<sp/>we<sp/>make<sp/>a<sp/>fake<sp/>rectangle<sp/>as<sp/>if<sp/>it<sp/>is<sp/>for<sp/>a<sp/>Wave</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>track,<sp/>but<sp/>it<sp/>is<sp/>offset<sp/>to<sp/>place<sp/>the<sp/>slider<sp/>properly<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>a<sp/>Note<sp/>track.<sp/>This<sp/>whole<sp/>placement<sp/>thing<sp/>should<sp/>be<sp/>redesigned</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>to<sp/>lay<sp/>out<sp/>different<sp/>types<sp/>of<sp/>tracks<sp/>and<sp/>controls</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>gr;<sp/></highlight><highlight class="comment">//<sp/>gr<sp/>is<sp/>gain<sp/>rectangle<sp/>where<sp/>slider<sp/>is<sp/>drawn</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetGainRect(rect,<sp/>gr);</highlight></codeline>
<codeline lineno="7870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>=<sp/>rect.y<sp/>+<sp/>h<sp/>-<sp/>gr.y;<sp/></highlight><highlight class="comment">//<sp/>ultimately<sp/>want<sp/>slider<sp/>at<sp/>rect.y<sp/>+<sp/>h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>=<sp/>rect.height<sp/>-<sp/>h<sp/>+<sp/>gr.y;</highlight></codeline>
<codeline lineno="7872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>save<sp/>for<sp/>mouse<sp/>hit<sp/>detect:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>t)-&gt;SetGainPlacementRect(rect);</highlight></codeline>
<codeline lineno="7874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.DrawVelocitySlider(dc,<sp/>(<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/>t,<sp/>rect);</highlight></codeline>
<codeline lineno="7875"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7876"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7877"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/>//<sp/>USE_MIDI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7878"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7879"><highlight class="normal"></highlight></codeline>
<codeline lineno="7880" refid="class_track_panel_1a4c73d580495e4908ab6632bf8530e3a5" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4c73d580495e4908ab6632bf8530e3a5" kindref="member">TrackPanel::DrawOutsideOfTrack</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect)</highlight></codeline>
<codeline lineno="7881"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7882"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Fill<sp/>in<sp/>area<sp/>outside<sp/>of<sp/>the<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7883"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1aa8f929e199eafc0d62a58f8dfee6bc05" kindref="member">AColor::TrackPanelBackground</ref>(dc,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7884"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>side;</highlight></codeline>
<codeline lineno="7885"><highlight class="normal"></highlight></codeline>
<codeline lineno="7886"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Area<sp/>between<sp/>panel<sp/>border<sp/>and<sp/>left<sp/>track<sp/>border</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7887"><highlight class="normal"><sp/><sp/><sp/>side<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="7888"><highlight class="normal"><sp/><sp/><sp/>side.width<sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="7889"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(side);</highlight></codeline>
<codeline lineno="7890"><highlight class="normal"></highlight></codeline>
<codeline lineno="7891"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Area<sp/>between<sp/>panel<sp/>border<sp/>and<sp/>top<sp/>track<sp/>border</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7892"><highlight class="normal"><sp/><sp/><sp/>side<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="7893"><highlight class="normal"><sp/><sp/><sp/>side.height<sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="7894"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(side);</highlight></codeline>
<codeline lineno="7895"><highlight class="normal"></highlight></codeline>
<codeline lineno="7896"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Area<sp/>between<sp/>panel<sp/>border<sp/>and<sp/>right<sp/>track<sp/>border</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7897"><highlight class="normal"><sp/><sp/><sp/>side<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="7898"><highlight class="normal"><sp/><sp/><sp/>side.x<sp/>+=<sp/>side.width<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="7899"><highlight class="normal"><sp/><sp/><sp/>side.width<sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="7900"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(side);</highlight></codeline>
<codeline lineno="7901"><highlight class="normal"></highlight></codeline>
<codeline lineno="7902"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Area<sp/>between<sp/>tracks<sp/>of<sp/>stereo<sp/>group</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7903"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7904"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()<sp/>||<sp/>MONO_WAVE_PAN(t))<sp/>{</highlight></codeline>
<codeline lineno="7905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>side<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="7906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>side.y<sp/>+=<sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="7907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>side.height<sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref><sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="7908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc-&gt;DrawRectangle(side);</highlight></codeline>
<codeline lineno="7909"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7910"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7911"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())<sp/>{</highlight></codeline>
<codeline lineno="7912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Paint<sp/>the<sp/>channel<sp/>separator<sp/>over<sp/>(what<sp/>would<sp/>be)<sp/>the<sp/>shadow<sp/>of<sp/>the<sp/>top</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>channel,<sp/>and<sp/>the<sp/>top<sp/>inset<sp/>of<sp/>the<sp/>bottom<sp/>channel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>side<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="7915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>side.y<sp/>+=<sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" kindref="member">kShadowThickness</ref>;</highlight></codeline>
<codeline lineno="7916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>side.height<sp/>=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796abaa67d3ef1fa09ffb7628408a78af075" kindref="member">kShadowThickness</ref>;</highlight></codeline>
<codeline lineno="7917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc-&gt;DrawRectangle(side);</highlight></codeline>
<codeline lineno="7918"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7919"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7920"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7921"><highlight class="normal"></highlight></codeline>
<codeline lineno="7922" refid="class_track_panel_1ad3c380c2377c504b2b86cdbdee4f3d5f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad3c380c2377c504b2b86cdbdee4f3d5f" kindref="member">TrackPanel::DrawOverlays</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>repaint)</highlight></codeline>
<codeline lineno="7923"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7924"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Determine<sp/>which<sp/>overlays<sp/>are<sp/>outdated.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7925"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="7926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>n_pairs<sp/>=</highlight></codeline>
<codeline lineno="7927"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>3</highlight></codeline>
<codeline lineno="7929"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>2</highlight></codeline>
<codeline lineno="7931"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7932"><highlight class="normal"><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="7933"><highlight class="normal"><sp/><sp/><sp/>std::pair&lt;wxRect,<sp/>bool&gt;<sp/>pairs[n_pairs]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="7934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3c7126ed6ae625ba2c409c490a7b70e6" kindref="member">GetIndicatorRectangle</ref>(),</highlight></codeline>
<codeline lineno="7935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8e37a1fde074f6a21b55ec239214a9a6" kindref="member">GetCursorRectangle</ref>(),</highlight></codeline>
<codeline lineno="7936"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab5d6cd70214d951298e021b2495ee3e3" kindref="member">GetScrubSpeedRectangle</ref>(),</highlight></codeline>
<codeline lineno="7938"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7939"><highlight class="normal"><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="7940"><highlight class="normal"></highlight></codeline>
<codeline lineno="7941"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="7942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Drawing<sp/>now<sp/>goes<sp/>directly<sp/>to<sp/>the<sp/>client<sp/>area</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7944"><highlight class="normal"></highlight></codeline>
<codeline lineno="7945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>what<sp/>requires<sp/>redrawing.<sp/><sp/>If<sp/>repainting,<sp/>all.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>not,<sp/>then<sp/>whatever<sp/>is<sp/>outdated,<sp/>and<sp/>whatever<sp/>will<sp/>be<sp/>damaged<sp/>by</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>undrawing.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>By<sp/>redrawing<sp/>only<sp/>what<sp/>needs<sp/>it,<sp/>we<sp/>avoid<sp/>flashing<sp/>things<sp/>like</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>cursor<sp/>that<sp/>are<sp/>drawn<sp/>with<sp/>xor.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!repaint)<sp/>{</highlight></codeline>
<codeline lineno="7951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="midiclock_8c_1a5f689029e53f12e337967312e0a17717" kindref="member">done</ref>;</highlight></codeline>
<codeline lineno="7952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="7953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>done<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/>n_pairs;<sp/>++ii)<sp/>{</highlight></codeline>
<codeline lineno="7955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>jj<sp/>=<sp/>ii<sp/>+<sp/>1;<sp/>jj<sp/>&lt;<sp/>n_pairs;<sp/>++jj)<sp/>{</highlight></codeline>
<codeline lineno="7956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pairs[ii].second<sp/>!=<sp/>pairs[jj].second<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="7957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pairs[ii].first.Intersects(pairs[jj].first))<sp/>{</highlight></codeline>
<codeline lineno="7958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>done<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pairs[ii].second<sp/>=<sp/>pairs[jj].second<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="7960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!done);</highlight></codeline>
<codeline lineno="7964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7965"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7966"><highlight class="normal"></highlight></codeline>
<codeline lineno="7967"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(repaint<sp/>||<sp/>pairs[0].second)<sp/>{</highlight></codeline>
<codeline lineno="7968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a024ccb44ef28e5ae33815fa67923447e" kindref="member">UndrawIndicator</ref>(dc);</highlight></codeline>
<codeline lineno="7970"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7971"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(repaint<sp/>||<sp/>pairs[1].second)<sp/>{</highlight></codeline>
<codeline lineno="7972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ab20a415139f6edd83cb0d19b74878a8b" kindref="member">UndrawCursor</ref>(dc);</highlight></codeline>
<codeline lineno="7974"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7975"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7976"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(repaint<sp/>||<sp/>pairs[2].second)<sp/>{</highlight></codeline>
<codeline lineno="7977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a091f967bc3c2366364e48b41b21e40c3" kindref="member">UndrawScrubSpeed</ref>(dc);</highlight></codeline>
<codeline lineno="7979"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7980"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7981"><highlight class="normal"></highlight></codeline>
<codeline lineno="7982"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(repaint<sp/>||<sp/>pairs[0].second)<sp/>{</highlight></codeline>
<codeline lineno="7983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a8ec4102237c8d4e852ef0f641712882d" kindref="member">DoDrawIndicator</ref>(dc);</highlight></codeline>
<codeline lineno="7985"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7986"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(repaint<sp/>||<sp/>pairs[1].second)<sp/>{</highlight></codeline>
<codeline lineno="7987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aff33f2fa5cda0ffb92a1dd41758e418c" kindref="member">DoDrawCursor</ref>(dc);</highlight></codeline>
<codeline lineno="7989"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7990"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7991"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(repaint<sp/>||<sp/>pairs[2].second)<sp/>{</highlight></codeline>
<codeline lineno="7992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxClientDC<sp/>dc(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="7993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aa8e9d595a7f1d370f8d5a55cd4e65045" kindref="member">DoDrawScrubSpeed</ref>(dc);</highlight></codeline>
<codeline lineno="7994"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="7995"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7996"><highlight class="normal">}</highlight></codeline>
<codeline lineno="7997"><highlight class="normal"></highlight></codeline>
<codeline lineno="7999" refid="class_track_panel_1ab579d3634b223e60ceed553cd41f4791" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab579d3634b223e60ceed553cd41f4791" kindref="member">TrackPanel::HighlightFocusedTrack</ref>(wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect)</highlight></codeline>
<codeline lineno="8000"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8001"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>theRect<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="8002"><highlight class="normal"><sp/><sp/><sp/>theRect.x<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="8003"><highlight class="normal"><sp/><sp/><sp/>theRect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="8004"><highlight class="normal"><sp/><sp/><sp/>theRect.width<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref><sp/>*<sp/>2;</highlight></codeline>
<codeline lineno="8005"><highlight class="normal"><sp/><sp/><sp/>theRect.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="8006"><highlight class="normal"></highlight></codeline>
<codeline lineno="8007"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetBrush(*wxTRANSPARENT_BRUSH);</highlight></codeline>
<codeline lineno="8008"><highlight class="normal"></highlight></codeline>
<codeline lineno="8009"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1aa22cfd5306fe07740375b282ee0343bc" kindref="member">AColor::TrackFocusPen</ref>(dc,<sp/>0);</highlight></codeline>
<codeline lineno="8010"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(theRect.x<sp/>-<sp/>1,<sp/>theRect.y<sp/>-<sp/>1,<sp/>theRect.width<sp/>+<sp/>2,<sp/>theRect.height<sp/>+<sp/>2);</highlight></codeline>
<codeline lineno="8011"><highlight class="normal"></highlight></codeline>
<codeline lineno="8012"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1aa22cfd5306fe07740375b282ee0343bc" kindref="member">AColor::TrackFocusPen</ref>(dc,<sp/>1);</highlight></codeline>
<codeline lineno="8013"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(theRect.x<sp/>-<sp/>2,<sp/>theRect.y<sp/>-<sp/>2,<sp/>theRect.width<sp/>+<sp/>4,<sp/>theRect.height<sp/>+<sp/>4);</highlight></codeline>
<codeline lineno="8014"><highlight class="normal"></highlight></codeline>
<codeline lineno="8015"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1aa22cfd5306fe07740375b282ee0343bc" kindref="member">AColor::TrackFocusPen</ref>(dc,<sp/>2);</highlight></codeline>
<codeline lineno="8016"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(theRect.x<sp/>-<sp/>3,<sp/>theRect.y<sp/>-<sp/>3,<sp/>theRect.width<sp/>+<sp/>6,<sp/>theRect.height<sp/>+<sp/>6);</highlight></codeline>
<codeline lineno="8017"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8018"><highlight class="normal"></highlight></codeline>
<codeline lineno="8019" refid="class_track_panel_1ac2d7a00f2dc191f5b6f3e2804b05aaa5" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac2d7a00f2dc191f5b6f3e2804b05aaa5" kindref="member">TrackPanel::UpdateVRulers</ref>()</highlight></codeline>
<codeline lineno="8020"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8021"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_of_kind_iterator" kindref="compound">TrackListOfKindIterator</ref><sp/>iter(<ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>,<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="8022"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="8023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a600101a2c373bb006b53735beaa5ae1c" kindref="member">UpdateTrackVRuler</ref>(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="8024"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8025"><highlight class="normal"></highlight></codeline>
<codeline lineno="8026"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a96d6618bcd38bbee6cb35be9d9c738ef" kindref="member">UpdateVRulerSize</ref>();</highlight></codeline>
<codeline lineno="8027"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8028"><highlight class="normal"></highlight></codeline>
<codeline lineno="8029" refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">TrackPanel::UpdateVRuler</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)</highlight></codeline>
<codeline lineno="8030"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8031"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a600101a2c373bb006b53735beaa5ae1c" kindref="member">UpdateTrackVRuler</ref>(t);</highlight></codeline>
<codeline lineno="8032"><highlight class="normal"></highlight></codeline>
<codeline lineno="8033"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a96d6618bcd38bbee6cb35be9d9c738ef" kindref="member">UpdateVRulerSize</ref>();</highlight></codeline>
<codeline lineno="8034"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8035"><highlight class="normal"></highlight></codeline>
<codeline lineno="8036" refid="class_track_panel_1a600101a2c373bb006b53735beaa5ae1c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a600101a2c373bb006b53735beaa5ae1c" kindref="member">TrackPanel::UpdateTrackVRuler</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)</highlight></codeline>
<codeline lineno="8037"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8038"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(t);</highlight></codeline>
<codeline lineno="8039"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t)</highlight></codeline>
<codeline lineno="8040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8041"><highlight class="normal"></highlight></codeline>
<codeline lineno="8042"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(<ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>(),</highlight></codeline>
<codeline lineno="8043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref>,</highlight></codeline>
<codeline lineno="8044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3046731ee18b2dc315e292b160e06560" kindref="member">GetVRulerWidth</ref>(),</highlight></codeline>
<codeline lineno="8045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>));</highlight></codeline>
<codeline lineno="8046"><highlight class="normal"></highlight></codeline>
<codeline lineno="8047"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1a12b902fc290c08e21ce0646f21dae146" kindref="member">UpdateVRuler</ref>(t,<sp/>rect);</highlight></codeline>
<codeline lineno="8048"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref><sp/>=<sp/>t-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="8049"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(l)</highlight></codeline>
<codeline lineno="8050"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>=<sp/>l-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="8052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1a12b902fc290c08e21ce0646f21dae146" kindref="member">UpdateVRuler</ref>(l,<sp/>rect);</highlight></codeline>
<codeline lineno="8053"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8054"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8055"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(t)){</highlight></codeline>
<codeline lineno="8056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>=<sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>-<sp/>(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a7781d53ca68e0c137fc6a42954d77b9e" kindref="member">kTopMargin</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="8057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a5b09b33be61ef200636b5513b45d2285" kindref="member">mTrackArtist</ref>-&gt;<ref refid="class_track_artist_1a12b902fc290c08e21ce0646f21dae146" kindref="member">UpdateVRuler</ref>(t,<sp/>rect);</highlight></codeline>
<codeline lineno="8058"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8059"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8060"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8061"><highlight class="normal"></highlight></codeline>
<codeline lineno="8062" refid="class_track_panel_1a96d6618bcd38bbee6cb35be9d9c738ef" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a96d6618bcd38bbee6cb35be9d9c738ef" kindref="member">TrackPanel::UpdateVRulerSize</ref>()</highlight></codeline>
<codeline lineno="8063"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8064"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="8065"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="8066"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t)<sp/>{</highlight></codeline>
<codeline lineno="8067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxSize<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>=<sp/>t-&gt;<ref refid="class_track_1a798c2a7bb95cde4d9873f09aa08645bd" kindref="member">vrulerSize</ref>;</highlight></codeline>
<codeline lineno="8068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(t)<sp/>{</highlight></codeline>
<codeline lineno="8069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s.IncTo(t-&gt;<ref refid="class_track_1a798c2a7bb95cde4d9873f09aa08645bd" kindref="member">vrulerSize</ref>);</highlight></codeline>
<codeline lineno="8070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>();</highlight></codeline>
<codeline lineno="8071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_track_panel_1a6db02b5d0562bf11311bc2df73a0864a" kindref="member">vrulerSize</ref><sp/>!=<sp/>s)<sp/>{</highlight></codeline>
<codeline lineno="8073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a6db02b5d0562bf11311bc2df73a0864a" kindref="member">vrulerSize</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="8074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0c030045e204ac35bb3066a260831ce3" kindref="member">mRuler</ref>-&gt;<ref refid="class_adorned_ruler_panel_1a85e7795d50f3d46fdc4cdd997f2fc504" kindref="member">SetLeftOffset</ref>(<ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>());<sp/><sp/></highlight><highlight class="comment">//<sp/>bevel<sp/>on<sp/>AdornedRuler</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0c030045e204ac35bb3066a260831ce3" kindref="member">mRuler</ref>-&gt;Refresh();</highlight></codeline>
<codeline lineno="8076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8077"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8078"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8079"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8080"><highlight class="normal"></highlight></codeline>
<codeline lineno="8084"></codeline>
<codeline lineno="8087" refid="class_track_panel_1a47315148ac50d0e24e7d88148973c8c4" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a47315148ac50d0e24e7d88148973c8c4" kindref="member">TrackPanel::OnPrevTrack</ref>(<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>shift<sp/>)</highlight></codeline>
<codeline lineno="8088"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8089"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref><sp/>);</highlight></codeline>
<codeline lineno="8090"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="8091"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>t<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>there<sp/>isn&apos;t<sp/>one,<sp/>focus<sp/>on<sp/>last</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8092"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a071f2a9fd59d6e84718bf43881ca564b" kindref="member">Last</ref>();</highlight></codeline>
<codeline lineno="8094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8098"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8099"><highlight class="normal"></highlight></codeline>
<codeline lineno="8100"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref>*<sp/><ref refid="xmltok_8h_1a94b60f3beb36ae85555d36dc9816769c" kindref="member">p</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="8101"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>tSelected<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8102"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>pSelected<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8103"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>shift<sp/>)</highlight></codeline>
<codeline lineno="8104"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);<sp/></highlight><highlight class="comment">//<sp/>Get<sp/>previous<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>p<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>first<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>JKC:<sp/>wxBell()<sp/>is<sp/>probably<sp/>for<sp/>accessibility,<sp/>so<sp/>a<sp/>blind</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>user<sp/>knows<sp/>they<sp/>were<sp/>at<sp/>the<sp/>top<sp/>track.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxBell();</highlight></codeline>
<codeline lineno="8111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1af02524f80a857fce1fc05853ea880e76" kindref="member">mCircularTrackNavigation</ref><sp/>)</highlight></codeline>
<codeline lineno="8112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref><sp/>);</highlight></codeline>
<codeline lineno="8114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a071f2a9fd59d6e84718bf43881ca564b" kindref="member">Last</ref>();</highlight></codeline>
<codeline lineno="8115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tSelected<sp/>=<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>();</highlight></codeline>
<codeline lineno="8123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p)</highlight></codeline>
<codeline lineno="8124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSelected<sp/>=<sp/>p-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>();</highlight></codeline>
<codeline lineno="8125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>tSelected<sp/>&amp;&amp;<sp/>pSelected<sp/>)</highlight></codeline>
<codeline lineno="8126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>p<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>p<sp/>);</highlight></codeline>
<codeline lineno="8130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>tSelected<sp/>&amp;&amp;<sp/>!pSelected<sp/>)</highlight></codeline>
<codeline lineno="8134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>p,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>p<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>p<sp/>);</highlight></codeline>
<codeline lineno="8138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!tSelected<sp/>&amp;&amp;<sp/>pSelected<sp/>)</highlight></codeline>
<codeline lineno="8142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>p,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>p<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>p<sp/>);</highlight></codeline>
<codeline lineno="8146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!tSelected<sp/>&amp;&amp;<sp/>!pSelected<sp/>)</highlight></codeline>
<codeline lineno="8150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>p<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>p<sp/>);</highlight></codeline>
<codeline lineno="8154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8157"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8158"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8159"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a9d755b371600e0d2fd109974de7e035b" kindref="member">GetPrev</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);<sp/></highlight><highlight class="comment">//<sp/>Get<sp/>next<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>p<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>last<sp/>track<sp/>so<sp/>stay<sp/>there?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxBell();</highlight></codeline>
<codeline lineno="8164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1af02524f80a857fce1fc05853ea880e76" kindref="member">mCircularTrackNavigation</ref><sp/>)</highlight></codeline>
<codeline lineno="8165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref><sp/>);</highlight></codeline>
<codeline lineno="8167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();<sp/><ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>;<sp/><ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>(<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>)<sp/>)</highlight></codeline>
<codeline lineno="8168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/><ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref>;</highlight></codeline>
<codeline lineno="8170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>p<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wrap<sp/>to<sp/>the<sp/>first<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>p<sp/>);</highlight></codeline>
<codeline lineno="8173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>p<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>p<sp/>);</highlight></codeline>
<codeline lineno="8186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8189"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8190"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8191"><highlight class="normal"></highlight></codeline>
<codeline lineno="8195" refid="class_track_panel_1ae6a78ddc3629f49a13437566200a4f95" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae6a78ddc3629f49a13437566200a4f95" kindref="member">TrackPanel::OnNextTrack</ref>(<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>shift<sp/>)</highlight></codeline>
<codeline lineno="8196"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8197"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="8198"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*n;</highlight></codeline>
<codeline lineno="8199"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref><sp/>);</highlight></codeline>
<codeline lineno="8200"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>tSelected,nSelected;</highlight></codeline>
<codeline lineno="8201"><highlight class="normal"></highlight></codeline>
<codeline lineno="8202"><highlight class="normal"><sp/><sp/><sp/>t<sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>currently<sp/>focused<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8203"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>t<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>there<sp/>isn&apos;t<sp/>one,<sp/>focus<sp/>on<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8204"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="8206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8210"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8211"><highlight class="normal"></highlight></codeline>
<codeline lineno="8212"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>shift<sp/>)</highlight></codeline>
<codeline lineno="8213"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);<sp/></highlight><highlight class="comment">//<sp/>Get<sp/>next<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>n<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>last<sp/>track<sp/>so<sp/>stay<sp/>there</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxBell();</highlight></codeline>
<codeline lineno="8218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1af02524f80a857fce1fc05853ea880e76" kindref="member">mCircularTrackNavigation</ref><sp/>)</highlight></codeline>
<codeline lineno="8219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref><sp/>);</highlight></codeline>
<codeline lineno="8221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="8222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tSelected<sp/>=<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>();</highlight></codeline>
<codeline lineno="8230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>nSelected<sp/>=<sp/>n-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>();</highlight></codeline>
<codeline lineno="8231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>tSelected<sp/>&amp;&amp;<sp/>nSelected<sp/>)</highlight></codeline>
<codeline lineno="8232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>n<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>n<sp/>);</highlight></codeline>
<codeline lineno="8236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>tSelected<sp/>&amp;&amp;<sp/>!nSelected<sp/>)</highlight></codeline>
<codeline lineno="8240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>n,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>n<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>n<sp/>);</highlight></codeline>
<codeline lineno="8244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!tSelected<sp/>&amp;&amp;<sp/>nSelected<sp/>)</highlight></codeline>
<codeline lineno="8248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>n,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>n<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>n<sp/>);</highlight></codeline>
<codeline lineno="8252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!tSelected<sp/>&amp;&amp;<sp/>!nSelected<sp/>)</highlight></codeline>
<codeline lineno="8256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="8258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>n<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>n<sp/>);</highlight></codeline>
<codeline lineno="8260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8263"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8264"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8265"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(<sp/>t,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);<sp/></highlight><highlight class="comment">//<sp/>Get<sp/>next<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>n<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>last<sp/>track<sp/>so<sp/>stay<sp/>there</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxBell();</highlight></codeline>
<codeline lineno="8270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="class_track_panel_1af02524f80a857fce1fc05853ea880e76" kindref="member">mCircularTrackNavigation</ref><sp/>)</highlight></codeline>
<codeline lineno="8271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref><sp/>);</highlight></codeline>
<codeline lineno="8273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="8274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>n<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wrap<sp/>to<sp/>the<sp/>first<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>n<sp/>);</highlight></codeline>
<codeline lineno="8276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/>n<sp/>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>move<sp/>focus<sp/>to<sp/>next<sp/>track<sp/>down</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>n<sp/>);</highlight></codeline>
<codeline lineno="8289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8292"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8293"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8294"><highlight class="normal"></highlight></codeline>
<codeline lineno="8295" refid="class_track_panel_1ad7d4d03f2c4fbd4ef33f28516393e3bb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad7d4d03f2c4fbd4ef33f28516393e3bb" kindref="member">TrackPanel::OnFirstTrack</ref>()</highlight></codeline>
<codeline lineno="8296"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8297"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="8298"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t)</highlight></codeline>
<codeline lineno="8299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8300"><highlight class="normal"></highlight></codeline>
<codeline lineno="8301"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="8302"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="rfft2d_test_m_l_8m_1aacd36fb6ac9ce14cec71f2ca852524d4" kindref="member">f</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="8303"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t<sp/>!=<sp/>f)</highlight></codeline>
<codeline lineno="8304"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(f);</highlight></codeline>
<codeline lineno="8306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8307"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8308"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(f);</highlight></codeline>
<codeline lineno="8309"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8310"><highlight class="normal"></highlight></codeline>
<codeline lineno="8311" refid="class_track_panel_1abe951b289ba3dd163e6b6245a6882450" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abe951b289ba3dd163e6b6245a6882450" kindref="member">TrackPanel::OnLastTrack</ref>()</highlight></codeline>
<codeline lineno="8312"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8313"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="8314"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t)</highlight></codeline>
<codeline lineno="8315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8316"><highlight class="normal"></highlight></codeline>
<codeline lineno="8317"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="8318"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref><sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a071f2a9fd59d6e84718bf43881ca564b" kindref="member">Last</ref>();</highlight></codeline>
<codeline lineno="8319"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t<sp/>!=<sp/>l)</highlight></codeline>
<codeline lineno="8320"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(l);</highlight></codeline>
<codeline lineno="8322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8323"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8324"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(l);</highlight></codeline>
<codeline lineno="8325"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8326"><highlight class="normal"></highlight></codeline>
<codeline lineno="8327" refid="class_track_panel_1ab45148d97e7869c58a2790594eba71b6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab45148d97e7869c58a2790594eba71b6" kindref="member">TrackPanel::OnToggle</ref>()</highlight></codeline>
<codeline lineno="8328"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8329"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="8330"><highlight class="normal"></highlight></codeline>
<codeline lineno="8331"><highlight class="normal"><sp/><sp/><sp/>t<sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>currently<sp/>focused<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8332"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t)</highlight></codeline>
<codeline lineno="8333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8334"><highlight class="normal"></highlight></codeline>
<codeline lineno="8335"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1acdf335b82b04d4ac66d035a2b839d45d" kindref="member">Select</ref>(<sp/>t,<sp/>!t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>()<sp/>);</highlight></codeline>
<codeline lineno="8336"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">EnsureVisible</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="8337"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8338"><highlight class="normal"></highlight></codeline>
<codeline lineno="8339"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>-&gt;<ref refid="class_track_panel_ax_1adb7e2ddf8acf8bddb5401b7ac0f99f1e" kindref="member">Updated</ref>();</highlight></codeline>
<codeline lineno="8340"><highlight class="normal"></highlight></codeline>
<codeline lineno="8341"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8342"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8343"><highlight class="normal"></highlight></codeline>
<codeline lineno="8344"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>selection<sp/>edge<sp/>is<sp/>in<sp/>view</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8345" refid="class_track_panel_1ad2d01414992d10f78ada48e6c290f180" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad2d01414992d10f78ada48e6c290f180" kindref="member">TrackPanel::ScrollIntoView</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>pos)</highlight></codeline>
<codeline lineno="8346"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8347"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>w;</highlight></codeline>
<codeline lineno="8348"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a1e163e8d35e12fd7b48daaaec31879a4" kindref="member">GetTracksUsableArea</ref>(<sp/>&amp;w,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="8349"><highlight class="normal"></highlight></codeline>
<codeline lineno="8350"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pixel<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1af5b3ea2d31e53b203a06d13d4afd7f90" kindref="member">TimeToPosition</ref>(pos);</highlight></codeline>
<codeline lineno="8351"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pixel<sp/>&lt;<sp/>0<sp/>||<sp/>pixel<sp/>&gt;=<sp/>w)</highlight></codeline>
<codeline lineno="8352"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1ab4427ec0211190e135643aee17b82083" kindref="member">TP_ScrollWindow</ref></highlight></codeline>
<codeline lineno="8354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1a1a372776b3fc3c9a1fe7f7377a996745" kindref="member">OffsetTimeByPixels</ref>(pos,<sp/>-(w<sp/>/<sp/>2)));</highlight></codeline>
<codeline lineno="8355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8356"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8357"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8358"><highlight class="normal"></highlight></codeline>
<codeline lineno="8359" refid="class_track_panel_1a4853e85fabe1bd526688961b300fdf9d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad2d01414992d10f78ada48e6c290f180" kindref="member">TrackPanel::ScrollIntoView</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>)</highlight></codeline>
<codeline lineno="8360"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8361"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad2d01414992d10f78ada48e6c290f180" kindref="member">ScrollIntoView</ref>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1aa7e0fefa3365826150c253c1ba6e4339" kindref="member">PositionToTime</ref>(x,<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>()));</highlight></codeline>
<codeline lineno="8362"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8363"><highlight class="normal"></highlight></codeline>
<codeline lineno="8364" refid="class_track_panel_1a54694a29a7c857cb7e59c1dcfcca4676" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a54694a29a7c857cb7e59c1dcfcca4676" kindref="member">TrackPanel::OnTrackMenu</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)</highlight></codeline>
<codeline lineno="8365"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8366"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!t)<sp/>{</highlight></codeline>
<codeline lineno="8367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="8368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!t)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8369"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8370"><highlight class="normal"></highlight></codeline>
<codeline lineno="8371"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="8372"><highlight class="normal"></highlight></codeline>
<codeline lineno="8373"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="record_8c_1a9b790a854eb0e06cd42c8d28a30db97d" kindref="member">next</ref><sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1afb3f6443fda8c1ca54df19e43ad769dd" kindref="member">GetNext</ref>(t);</highlight></codeline>
<codeline lineno="8374"><highlight class="normal"></highlight></codeline>
<codeline lineno="8375"><highlight class="normal"><sp/><sp/><sp/>wxMenu<sp/>*theMenu<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="8376"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efa2348e03ba06177fe4dbcf87e27d82e33" kindref="member">Track::Time</ref>)<sp/>{</highlight></codeline>
<codeline lineno="8377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu<sp/>=<sp/><ref refid="class_track_panel_1afd5aba64f5cdfc8b0a58dbe52bd171af" kindref="member">mTimeTrackMenu</ref>;</highlight></codeline>
<codeline lineno="8378"><highlight class="normal"></highlight></codeline>
<codeline lineno="8379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_time_track" kindref="compound">TimeTrack</ref><sp/>*tt<sp/>=<sp/>(<ref refid="class_time_track" kindref="compound">TimeTrack</ref>*)<sp/>t;</highlight></codeline>
<codeline lineno="8380"><highlight class="normal"></highlight></codeline>
<codeline lineno="8381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnTimeTrackLinID,<sp/>tt-&gt;<ref refid="class_time_track_1abae5d14db9f5a3f3ffc6c6c99278ed3a" kindref="member">GetDisplayLog</ref>());</highlight></codeline>
<codeline lineno="8382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnTimeTrackLogID,<sp/>!tt-&gt;<ref refid="class_time_track_1abae5d14db9f5a3f3ffc6c6c99278ed3a" kindref="member">GetDisplayLog</ref>());</highlight></codeline>
<codeline lineno="8383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(OnTimeTrackLogIntID,<sp/>tt-&gt;<ref refid="class_time_track_1a270946a57e6c2992edcdf6848a6a3780" kindref="member">GetInterpolateLog</ref>());</highlight></codeline>
<codeline lineno="8384"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8385"><highlight class="normal"></highlight></codeline>
<codeline lineno="8386"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)<sp/>{</highlight></codeline>
<codeline lineno="8387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu<sp/>=<sp/><ref refid="class_track_panel_1a7ff1b9a82a327967fb6f0ac60fd93016" kindref="member">mWaveTrackMenu</ref>;</highlight></codeline>
<codeline lineno="8388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isMono<sp/>=<sp/>!t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>();</highlight></codeline>
<codeline lineno="8389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>canMakeStereo<sp/>=</highlight></codeline>
<codeline lineno="8390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(next<sp/>&amp;&amp;<sp/>isMono<sp/>&amp;&amp;<sp/>!next-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="8391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>);</highlight></codeline>
<codeline lineno="8392"><highlight class="normal"></highlight></codeline>
<codeline lineno="8393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnSwapChannelsID,<sp/>t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>());</highlight></codeline>
<codeline lineno="8394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnMergeStereoID,<sp/>canMakeStereo);</highlight></codeline>
<codeline lineno="8395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnSplitStereoID,<sp/>t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>());</highlight></codeline>
<codeline lineno="8396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnSplitStereoMonoID,<sp/>t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>());</highlight></codeline>
<codeline lineno="8397"><highlight class="normal"></highlight></codeline>
<codeline lineno="8398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>only<sp/>need<sp/>to<sp/>set<sp/>check<sp/>marks.<sp/>Clearing<sp/>checks<sp/>causes<sp/>problems<sp/>on<sp/>Linux<sp/>(bug<sp/>851)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>+<sp/>Setting<sp/>unchecked<sp/>items<sp/>to<sp/>false<sp/>is<sp/>to<sp/>get<sp/>round<sp/>a<sp/>linux<sp/>bug</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1a9c988f7695a546bf52ee2dc859db0345" kindref="member">GetChannel</ref>())<sp/>{</highlight></codeline>
<codeline lineno="8401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fa4cc8a2bb7bc243eab53ba2abd757d9da" kindref="member">Track::LeftChannel</ref>:</highlight></codeline>
<codeline lineno="8402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(OnChannelLeftID,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" kindref="member">OnChannelRightID</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(OnChannelMonoID,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362faa9c6ea023df4504361ffa1a31238c87e" kindref="member">Track::RightChannel</ref>:</highlight></codeline>
<codeline lineno="8407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" kindref="member">OnChannelRightID</ref>,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(OnChannelLeftID,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(OnChannelMonoID,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="8412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(OnChannelMonoID,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(OnChannelLeftID,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" kindref="member">OnChannelRightID</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8416"><highlight class="normal"></highlight></codeline>
<codeline lineno="8417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnChannelMonoID,<sp/>!t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>());</highlight></codeline>
<codeline lineno="8418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnChannelLeftID,<sp/>!t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>());</highlight></codeline>
<codeline lineno="8419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a475c7c1e18831e81165aba2a067d63dd" kindref="member">OnChannelRightID</ref>,<sp/>!t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>());</highlight></codeline>
<codeline lineno="8420"><highlight class="normal"></highlight></codeline>
<codeline lineno="8421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>track<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)t;</highlight></codeline>
<codeline lineno="8422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>display<sp/>=<sp/>track-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>();</highlight></codeline>
<codeline lineno="8423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(</highlight></codeline>
<codeline lineno="8424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(display<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref>)</highlight></codeline>
<codeline lineno="8425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>(track-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1ae4f07aa847f89f72a127ba5e357f1e78" kindref="member">isLinear</ref>()<sp/>?<sp/>OnWaveformID<sp/>:<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a86c5bfe045792bba915af0d2cceb53da" kindref="member">OnWaveformDBID</ref>)</highlight></codeline>
<codeline lineno="8426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>OnSpectrumID,</highlight></codeline>
<codeline lineno="8427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="8429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnSpectrogramSettingsID,<sp/>display<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5ac0941a4c239c9e4a1d487f31786fbbc9" kindref="member">WaveTrack::Spectrum</ref>);</highlight></codeline>
<codeline lineno="8430"><highlight class="normal"></highlight></codeline>
<codeline lineno="8431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a53d841273bfd3ebd498d3ad4926aa897" kindref="member">SetMenuCheck</ref>(*<ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>,<sp/><ref refid="class_track_panel_1ad6c0eccfaff9a4c973d1ca328ba029cf" kindref="member">IdOfRate</ref>((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>track-&gt;<ref refid="class_wave_track_1a18bbe6e1bb4b1016c3a3de835c33b8fa" kindref="member">GetRate</ref>()));</highlight></codeline>
<codeline lineno="8432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a53d841273bfd3ebd498d3ad4926aa897" kindref="member">SetMenuCheck</ref>(*<ref refid="class_track_panel_1aed53844c5faeabefd25618317866160a" kindref="member">mFormatMenu</ref>,<sp/><ref refid="class_track_panel_1aca830811c462433b73a300df27f129c4" kindref="member">IdOfFormat</ref>(track-&gt;<ref refid="class_wave_track_1aeacd5bae293c72523bcde439345739f7" kindref="member">GetSampleFormat</ref>()));</highlight></codeline>
<codeline lineno="8433"><highlight class="normal"></highlight></codeline>
<codeline lineno="8434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>unsafe<sp/>=<sp/><ref refid="class_track_panel_1a4caaa6ebfd2efcb5596d50bf317a3f54" kindref="member">IsUnsafe</ref>();</highlight></codeline>
<codeline lineno="8435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>OnRate8ID;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;=<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4f7cdf8dd4dcce5be8d8cd972e3de710" kindref="member">OnFloatID</ref>;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>++)<sp/>{</highlight></codeline>
<codeline lineno="8436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<sp/>!unsafe);</highlight></codeline>
<codeline lineno="8437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8438"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8439"><highlight class="normal"></highlight></codeline>
<codeline lineno="8440"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(USE_MIDI)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8441"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note)</highlight></codeline>
<codeline lineno="8442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu<sp/>=<sp/><ref refid="class_track_panel_1ad273eaf93f9b710db1c9b52cddeeae84" kindref="member">mNoteTrackMenu</ref>;</highlight></codeline>
<codeline lineno="8443"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8444"><highlight class="normal"></highlight></codeline>
<codeline lineno="8445"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>){</highlight></codeline>
<codeline lineno="8446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theMenu<sp/>=<sp/><ref refid="class_track_panel_1ac64f12dd879989b2b08b7b99de33bfaf" kindref="member">mLabelTrackMenu</ref>;</highlight></codeline>
<codeline lineno="8447"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8448"><highlight class="normal"></highlight></codeline>
<codeline lineno="8449"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(theMenu)<sp/>{</highlight></codeline>
<codeline lineno="8450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnMoveUpID,<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af6d4ee91fb21d3b75eaa172709a2ac54" kindref="member">CanMoveUp</ref>(t));</highlight></codeline>
<codeline lineno="8451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnMoveDownID,<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a2dfa623e6bd746734b80b2fd4832ba3c" kindref="member">CanMoveDown</ref>(t));</highlight></codeline>
<codeline lineno="8452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnMoveTopID,<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af6d4ee91fb21d3b75eaa172709a2ac54" kindref="member">CanMoveUp</ref>(t));</highlight></codeline>
<codeline lineno="8453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Enable(OnMoveBottomID,<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a2dfa623e6bd746734b80b2fd4832ba3c" kindref="member">CanMoveDown</ref>(t));</highlight></codeline>
<codeline lineno="8454"><highlight class="normal"></highlight></codeline>
<codeline lineno="8455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//We<sp/>need<sp/>to<sp/>find<sp/>the<sp/>location<sp/>of<sp/>the<sp/>menu<sp/>rectangle.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>rect<sp/>=<sp/><ref refid="class_track_panel_1ac65a26a6c6a70b2266afc7a41efb3434" kindref="member">FindTrackRect</ref>(t,</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>titleRect;</highlight></codeline>
<codeline lineno="8458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTitleBarRect(rect,titleRect);</highlight></codeline>
<codeline lineno="8459"><highlight class="normal"></highlight></codeline>
<codeline lineno="8460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>PopupMenu(theMenu,<sp/>titleRect.x<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="8461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>titleRect.y<sp/>+<sp/>titleRect.height<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="8462"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8463"><highlight class="normal"></highlight></codeline>
<codeline lineno="8464"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="8465"><highlight class="normal"></highlight></codeline>
<codeline lineno="8466"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a01df8ee94d4a599a5831a15b4555c242" kindref="member">SetCapturedTrack</ref>(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="8467"><highlight class="normal"></highlight></codeline>
<codeline lineno="8468"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8469"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8470"><highlight class="normal"></highlight></codeline>
<codeline lineno="8471" refid="class_track_panel_1aa7ce99297da3ad97709404c89f625bb1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa7ce99297da3ad97709404c89f625bb1" kindref="member">TrackPanel::OnVRulerMenu</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxMouseEvent<sp/>*pEvent)</highlight></codeline>
<codeline lineno="8472"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8473"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t)<sp/>{</highlight></codeline>
<codeline lineno="8474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="8475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!t)</highlight></codeline>
<codeline lineno="8476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8477"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8478"><highlight class="normal"></highlight></codeline>
<codeline lineno="8479"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>!=<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="8480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8481"><highlight class="normal"></highlight></codeline>
<codeline lineno="8482"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>);</highlight></codeline>
<codeline lineno="8483"><highlight class="normal"></highlight></codeline>
<codeline lineno="8484"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>display<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>();</highlight></codeline>
<codeline lineno="8485"><highlight class="normal"><sp/><sp/><sp/>wxMenu<sp/>*theMenu;</highlight></codeline>
<codeline lineno="8486"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(display<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref>)<sp/>{</highlight></codeline>
<codeline lineno="8487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu<sp/>=<sp/><ref refid="class_track_panel_1a5e797a078579ae83a2953dc3cdd4e267" kindref="member">mRulerWaveformMenu</ref>;</highlight></codeline>
<codeline lineno="8488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=</highlight></codeline>
<codeline lineno="8489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OnFirstWaveformScaleID<sp/>+<sp/><ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>(wt-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a6866a0a302099ef5fcd4fb60cba946cd" kindref="member">scaleType</ref>);</highlight></codeline>
<codeline lineno="8490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8491"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8492"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="8493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu<sp/>=<sp/><ref refid="class_track_panel_1aaae33e2c9a2354384a4d70672d404074" kindref="member">mRulerSpectrumMenu</ref>;</highlight></codeline>
<codeline lineno="8494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=</highlight></codeline>
<codeline lineno="8495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OnFirstSpectrumScaleID<sp/>+<sp/><ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>(wt-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>().<ref refid="class_spectrogram_settings_1a8c6871ffc9d2f3f645e9d14c24920e04" kindref="member">scaleType</ref>);</highlight></codeline>
<codeline lineno="8496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>theMenu-&gt;Check(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8497"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8498"><highlight class="normal"></highlight></codeline>
<codeline lineno="8499"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="namespacewaflib_1_1_utils_1a15fc4f04cecad81fba9772c4e43d40f7" kindref="member">x</ref>,<sp/>y;</highlight></codeline>
<codeline lineno="8500"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pEvent)</highlight></codeline>
<codeline lineno="8501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>=<sp/>pEvent-&gt;m_x,<sp/>y<sp/>=<sp/>pEvent-&gt;m_y;</highlight></codeline>
<codeline lineno="8502"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="8503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>no<sp/>event<sp/>given,<sp/>pop<sp/>up<sp/>the<sp/>menu<sp/>at<sp/>the<sp/>same<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>as<sp/>for<sp/>the<sp/>track<sp/>control<sp/>menu</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>rect<sp/>=<sp/><ref refid="class_track_panel_1ac65a26a6c6a70b2266afc7a41efb3434" kindref="member">FindTrackRect</ref>(wt,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>titleRect;</highlight></codeline>
<codeline lineno="8507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a076667fd6be500cff9d6d972afded5e8" kindref="member">mTrackInfo</ref>.GetTitleBarRect(rect,<sp/>titleRect);</highlight></codeline>
<codeline lineno="8508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>=<sp/><ref refid="class_track_panel_1a1f331329449e26e89d6b681e62294c05" kindref="member">GetVRulerOffset</ref>(),<sp/>y<sp/>=<sp/>titleRect.y<sp/>+<sp/>titleRect.height<sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="8509"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8510"><highlight class="normal"></highlight></codeline>
<codeline lineno="8511"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>So<sp/>that<sp/>IsDragZooming()<sp/>returns<sp/>false,<sp/>and<sp/>if<sp/>we<sp/>zoom<sp/>in,<sp/>we<sp/>do<sp/>so</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8512"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>centered<sp/>where<sp/>the<sp/>mouse<sp/>is<sp/>now:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8513"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ad4dd4fe2eed8b7d44af502c2d3c75b57" kindref="member">mZoomStart</ref><sp/>=<sp/><ref refid="class_track_panel_1abd83a1e090f84770b6978fa7c56e6567" kindref="member">mZoomEnd</ref><sp/>=<sp/>pEvent-&gt;m_y;</highlight></codeline>
<codeline lineno="8514"><highlight class="normal"></highlight></codeline>
<codeline lineno="8515"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref><sp/>=<sp/>wt;</highlight></codeline>
<codeline lineno="8516"><highlight class="normal"><sp/><sp/><sp/>PopupMenu(theMenu,<sp/>x,<sp/>y);</highlight></codeline>
<codeline lineno="8517"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="8518"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8519"><highlight class="normal"></highlight></codeline>
<codeline lineno="8520"><highlight class="normal"></highlight></codeline>
<codeline lineno="8521" refid="class_track_panel_1adc2817da3a0644eec93273236b8bf246" refkind="member"><highlight class="normal"><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="class_track_panel_1adc2817da3a0644eec93273236b8bf246" kindref="member">TrackPanel::GetFirstSelectedTrack</ref>()</highlight></codeline>
<codeline lineno="8522"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8523"><highlight class="normal"></highlight></codeline>
<codeline lineno="8524"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="8525"><highlight class="normal"></highlight></codeline>
<codeline lineno="8526"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="8527"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();t!=<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;t=iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>())</highlight></codeline>
<codeline lineno="8528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Find<sp/>the<sp/>first<sp/>selected<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>())</highlight></codeline>
<codeline lineno="8531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="8533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8534"><highlight class="normal"></highlight></codeline>
<codeline lineno="8535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8536"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>nothing<sp/>is<sp/>selected,<sp/>return<sp/>the<sp/>first<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8537"><highlight class="normal"><sp/><sp/><sp/>t<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();</highlight></codeline>
<codeline lineno="8538"><highlight class="normal"></highlight></codeline>
<codeline lineno="8539"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t)</highlight></codeline>
<codeline lineno="8540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="8541"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="8543"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8544"><highlight class="normal"></highlight></codeline>
<codeline lineno="8545" refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ac3beac44a6626a99027325104bc1076b" kindref="member">TrackPanel::EnsureVisible</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)</highlight></codeline>
<codeline lineno="8546"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8547"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list_iterator" kindref="compound">TrackListIterator</ref><sp/>iter(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>);</highlight></codeline>
<codeline lineno="8548"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="conv2dtest_8m_1a4b223b47b1bd746a69ed8ac37c4b16db" kindref="member">it</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="8549"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*nt<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="8550"><highlight class="normal"></highlight></codeline>
<codeline lineno="8551"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(t);</highlight></codeline>
<codeline lineno="8552"><highlight class="normal"></highlight></codeline>
<codeline lineno="8553"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackTop<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="8554"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackHeight<sp/>=0;</highlight></codeline>
<codeline lineno="8555"><highlight class="normal"></highlight></codeline>
<codeline lineno="8556"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(it<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a81e19731fba5e1b83552aaf36c6f227c" kindref="member">First</ref>();<sp/><ref refid="conv2dtest_8m_1a4b223b47b1bd746a69ed8ac37c4b16db" kindref="member">it</ref>;<sp/>it<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="8557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>trackTop<sp/>+=<sp/>trackHeight;</highlight></codeline>
<codeline lineno="8558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>trackHeight<sp/>=<sp/><sp/>it-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="8559"><highlight class="normal"></highlight></codeline>
<codeline lineno="8560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//find<sp/>the<sp/>second<sp/>track<sp/>if<sp/>this<sp/>is<sp/>stereo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(it-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())<sp/>{</highlight></codeline>
<codeline lineno="8562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nt<sp/>=<sp/>iter.<ref refid="class_track_list_iterator_1a2f22c9a396a8803881ca6d9784039706" kindref="member">Next</ref>();</highlight></codeline>
<codeline lineno="8563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackHeight<sp/>+=<sp/>nt-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="8564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8565"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(it)){</highlight></codeline>
<codeline lineno="8567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trackHeight<sp/>+=<sp/>it-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8569"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="8571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nt<sp/>=<sp/><ref refid="conv2dtest_8m_1a4b223b47b1bd746a69ed8ac37c4b16db" kindref="member">it</ref>;</highlight></codeline>
<codeline lineno="8572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8573"><highlight class="normal"></highlight></codeline>
<codeline lineno="8574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//We<sp/>have<sp/>found<sp/>the<sp/>track<sp/>we<sp/>want<sp/>to<sp/>ensure<sp/>is<sp/>visible.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((it<sp/>==<sp/>t)<sp/>||<sp/>(nt<sp/>==<sp/>t))<sp/>{</highlight></codeline>
<codeline lineno="8576"><highlight class="normal"></highlight></codeline>
<codeline lineno="8577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>the<sp/>size<sp/>of<sp/>the<sp/>trackpanel.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>width,<sp/>height;</highlight></codeline>
<codeline lineno="8579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetSize(&amp;width,<sp/>&amp;height);</highlight></codeline>
<codeline lineno="8580"><highlight class="normal"></highlight></codeline>
<codeline lineno="8581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trackTop<sp/>&lt;<sp/>mViewInfo-&gt;vpos)<sp/>{</highlight></codeline>
<codeline lineno="8582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>height<sp/>=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>-<sp/>trackTop<sp/>+<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1aee3714d955a107a54458e99fa7234a93" kindref="member">scrollStep</ref>;</highlight></codeline>
<codeline lineno="8583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>height<sp/>/=<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1aee3714d955a107a54458e99fa7234a93" kindref="member">scrollStep</ref>;</highlight></codeline>
<codeline lineno="8584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a5f3cb2e6b4a5ba7817d392f4fa986b42" kindref="member">TP_ScrollUpDown</ref>(-height);</highlight></codeline>
<codeline lineno="8585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trackTop<sp/>+<sp/>trackHeight<sp/>&gt;<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>+<sp/>height)<sp/>{</highlight></codeline>
<codeline lineno="8587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>height<sp/>=<sp/>(trackTop<sp/>+<sp/>trackHeight)<sp/>-<sp/>(<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>+<sp/>height);</highlight></codeline>
<codeline lineno="8588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>height<sp/>=<sp/>(height<sp/>+<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1aee3714d955a107a54458e99fa7234a93" kindref="member">scrollStep</ref><sp/>+<sp/>1)<sp/>/<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_view_info_1aee3714d955a107a54458e99fa7234a93" kindref="member">scrollStep</ref>;</highlight></codeline>
<codeline lineno="8589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a5f3cb2e6b4a5ba7817d392f4fa986b42" kindref="member">TP_ScrollUpDown</ref>(height);</highlight></codeline>
<codeline lineno="8590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8591"><highlight class="normal"></highlight></codeline>
<codeline lineno="8592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8594"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8595"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8596"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8597"><highlight class="normal"></highlight></codeline>
<codeline lineno="8598" refid="class_track_panel_1a2294cb4b4ea67022ec0ff96ef66f0a70" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a2294cb4b4ea67022ec0ff96ef66f0a70" kindref="member">TrackPanel::DrawBordersAroundTrack</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,<sp/>wxDC<sp/>*<sp/>dc,</highlight></codeline>
<codeline lineno="8599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>vrul,</highlight></codeline>
<codeline lineno="8600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>labelw)</highlight></codeline>
<codeline lineno="8601"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8602"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Border<sp/>around<sp/>track<sp/>and<sp/>label<sp/>area</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8603"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetBrush(*wxTRANSPARENT_BRUSH);</highlight></codeline>
<codeline lineno="8604"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(*wxBLACK_PEN);</highlight></codeline>
<codeline lineno="8605"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(rect.x,<sp/>rect.y,<sp/>rect.width<sp/>-<sp/>1,<sp/>rect.height<sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="8606"><highlight class="normal"></highlight></codeline>
<codeline lineno="8607"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>labelw,<sp/>rect.y,<sp/>labelw,<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>between<sp/>vruler<sp/>and<sp/>TrackInfo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8608"><highlight class="normal"></highlight></codeline>
<codeline lineno="8609"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>lines<sp/>at<sp/>bottom<sp/>of<sp/>1st<sp/>track<sp/>and<sp/>top<sp/>of<sp/>second<sp/>track<sp/>of<sp/>stereo<sp/>group</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8610"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Possibly<sp/>replace<sp/>with<sp/>DrawRectangle<sp/>to<sp/>add<sp/>left<sp/>border.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8611"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8612"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()<sp/>||<sp/>MONO_WAVE_PAN(t))<sp/>{</highlight></codeline>
<codeline lineno="8613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>h1<sp/>=<sp/>rect.y<sp/>+<sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="8614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>vrul,<sp/>h1<sp/>-<sp/>2,<sp/>rect.x<sp/>+<sp/>rect.width<sp/>-<sp/>1,<sp/>h1<sp/>-<sp/>2);</highlight></codeline>
<codeline lineno="8615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>vrul,<sp/>h1<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>,<sp/>rect.x<sp/>+<sp/>rect.width<sp/>-<sp/>1,<sp/>h1<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>);</highlight></codeline>
<codeline lineno="8616"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8617"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8618"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())<sp/>{</highlight></codeline>
<codeline lineno="8619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>given<sp/>rect<sp/>has<sp/>had<sp/>the<sp/>top<sp/>inset<sp/>subtracted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>h1<sp/>=<sp/>rect.y<sp/>+<sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>()<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="8621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>h1<sp/>is<sp/>the<sp/>top<sp/>coordinate<sp/>of<sp/>the<sp/>second<sp/>tracks&apos;<sp/>rectangle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>(part<sp/>of)<sp/>the<sp/>bottom<sp/>border<sp/>of<sp/>the<sp/>top<sp/>channel<sp/>and<sp/>top<sp/>border<sp/>of<sp/>the<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>vrul,<sp/>h1<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>,<sp/>rect.x<sp/>+<sp/>rect.width<sp/>-<sp/>1,<sp/>h1<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a27c2391c392d603648f6605578d5335a" kindref="member">kBottomMargin</ref>);</highlight></codeline>
<codeline lineno="8624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>vrul,<sp/>h1<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>,<sp/>rect.x<sp/>+<sp/>rect.width<sp/>-<sp/>1,<sp/>h1<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>);</highlight></codeline>
<codeline lineno="8625"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8626"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8627"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8628"><highlight class="normal"></highlight></codeline>
<codeline lineno="8629" refid="class_track_panel_1ae675db226f9ccb85b9c682f774b0cc7e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae675db226f9ccb85b9c682f774b0cc7e" kindref="member">TrackPanel::DrawShadow</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/></highlight><highlight class="comment">/*<sp/>t<sp/>*/</highlight><highlight class="normal"><sp/>,<sp/>wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect)</highlight></codeline>
<codeline lineno="8630"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8631"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>right<sp/>=<sp/>rect.x<sp/>+<sp/>rect.width<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="8632"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>bottom<sp/>=<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="8633"><highlight class="normal"></highlight></codeline>
<codeline lineno="8634"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>shadow</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8635"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(*wxBLACK_PEN);</highlight></codeline>
<codeline lineno="8636"><highlight class="normal"></highlight></codeline>
<codeline lineno="8637"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8638"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x,<sp/>bottom,<sp/>right,<sp/>bottom);</highlight></codeline>
<codeline lineno="8639"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>right</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8640"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>right,<sp/>rect.y,<sp/>right,<sp/>bottom);</highlight></codeline>
<codeline lineno="8641"><highlight class="normal"></highlight></codeline>
<codeline lineno="8642"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>background</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8643"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a34d81236a6bff41ebf8cf2b1183c847a" kindref="member">AColor::Dark</ref>(dc,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8644"><highlight class="normal"></highlight></codeline>
<codeline lineno="8645"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8646"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x,<sp/>bottom,<sp/>rect.x<sp/>+<sp/>1,<sp/>bottom);</highlight></codeline>
<codeline lineno="8647"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>right</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8648"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>right,<sp/>rect.y,<sp/>right,<sp/>rect.y<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="8649"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8650"><highlight class="normal"></highlight></codeline>
<codeline lineno="8654" refid="class_track_panel_1a093ad21c17a1df943c990cca76c354c7" refkind="member"><highlight class="normal">wxString<sp/><ref refid="class_track_panel_1a093ad21c17a1df943c990cca76c354c7" kindref="member">TrackPanel::TrackSubText</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)</highlight></codeline>
<codeline lineno="8655"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8656"><highlight class="normal"><sp/><sp/><sp/>wxString<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>=<sp/>wxString::Format(wxT(</highlight><highlight class="stringliteral">&quot;%dHz&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>(((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/>t)-&gt;GetRate()<sp/>+</highlight></codeline>
<codeline lineno="8658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.5));</highlight></codeline>
<codeline lineno="8659"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8660"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()<sp/>&amp;&amp;<sp/>t-&gt;<ref refid="class_track_1a9c988f7695a546bf52ee2dc859db0345" kindref="member">GetChannel</ref>()<sp/>!=<sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fad1d594e80888976c85f7a4a258dc2f19" kindref="member">Track::MonoChannel</ref>)</highlight></codeline>
<codeline lineno="8661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Stereo,<sp/>&quot;</highlight><highlight class="normal">)<sp/>+<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="8662"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8663"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())</highlight></codeline>
<codeline lineno="8664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Stereo,<sp/>&quot;</highlight><highlight class="normal">)<sp/>+<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="8665"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8666"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="8667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1a9c988f7695a546bf52ee2dc859db0345" kindref="member">GetChannel</ref>()<sp/>==<sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fad1d594e80888976c85f7a4a258dc2f19" kindref="member">Track::MonoChannel</ref>)</highlight></codeline>
<codeline lineno="8668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Mono,<sp/>&quot;</highlight><highlight class="normal">)<sp/>+<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="8669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1a9c988f7695a546bf52ee2dc859db0345" kindref="member">GetChannel</ref>()<sp/>==<sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fa4cc8a2bb7bc243eab53ba2abd757d9da" kindref="member">Track::LeftChannel</ref>)</highlight></codeline>
<codeline lineno="8670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Left,<sp/>&quot;</highlight><highlight class="normal">)<sp/>+<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="8671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1a9c988f7695a546bf52ee2dc859db0345" kindref="member">GetChannel</ref>()<sp/>==<sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362faa9c6ea023df4504361ffa1a31238c87e" kindref="member">Track::RightChannel</ref>)</highlight></codeline>
<codeline lineno="8672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>=<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Right,<sp/>&quot;</highlight><highlight class="normal">)<sp/>+<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="8673"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8674"><highlight class="normal"></highlight></codeline>
<codeline lineno="8675"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="8676"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8677"><highlight class="normal"></highlight></codeline>
<codeline lineno="8680"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>channels[]<sp/>=<sp/>{<sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fa4cc8a2bb7bc243eab53ba2abd757d9da" kindref="member">Track::LeftChannel</ref>,<sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362faa9c6ea023df4504361ffa1a31238c87e" kindref="member">Track::RightChannel</ref>,</highlight></codeline>
<codeline lineno="8681"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fad1d594e80888976c85f7a4a258dc2f19" kindref="member">Track::MonoChannel</ref></highlight></codeline>
<codeline lineno="8682"><highlight class="normal">};</highlight></codeline>
<codeline lineno="8683"><highlight class="normal"></highlight></codeline>
<codeline lineno="8684"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxChar<sp/>*channelmsgs[]<sp/>=<sp/>{<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Left<sp/>Channel&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Right<sp/>Channel&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8685"><highlight class="normal"><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Mono&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="8686"><highlight class="normal">};</highlight></codeline>
<codeline lineno="8687"><highlight class="normal"></highlight></codeline>
<codeline lineno="8688" refid="class_track_panel_1aa575d9021c5b4893cd4020a1becf498d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa575d9021c5b4893cd4020a1becf498d" kindref="member">TrackPanel::OnChannelChange</ref>(wxCommandEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="8689"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8690"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.GetId();</highlight></codeline>
<codeline lineno="8691"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&gt;=<sp/>OnChannelLeftID<sp/>&amp;&amp;<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&lt;=<sp/>OnChannelMonoID);</highlight></codeline>
<codeline lineno="8692"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>);</highlight></codeline>
<codeline lineno="8693"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a98d028f4a19322ea675fcd33412f9832" kindref="member">SetChannel</ref>(channels[</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>-<sp/>OnChannelLeftID]);</highlight></codeline>
<codeline lineno="8694"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Changed<sp/>&apos;%s&apos;<sp/>to<sp/>%s&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>().c_str(),</highlight></codeline>
<codeline lineno="8696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>channelmsgs[</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>-<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aeae4ed7d29cbab95d9c2cdbd4c72e57c" kindref="member">OnChannelLeftID</ref>]),</highlight></codeline>
<codeline lineno="8697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Channel&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8698"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8699"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8700"><highlight class="normal"></highlight></codeline>
<codeline lineno="8702" refid="class_track_panel_1a8991c9eca24add35d4969e32b392f400" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8991c9eca24add35d4969e32b392f400" kindref="member">TrackPanel::OnSwapChannels</ref>(wxCommandEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="8703"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8704"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*partner<sp/>=<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="8705"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>focused<sp/>=<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>();</highlight></codeline>
<codeline lineno="8706"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>hasFocus<sp/>=</highlight></codeline>
<codeline lineno="8707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(focused<sp/>==<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref><sp/>||<sp/>focused<sp/>==<sp/>partner);</highlight></codeline>
<codeline lineno="8708"><highlight class="normal"></highlight></codeline>
<codeline lineno="8709"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a84a32630cc3b1782dadcdc003a964552" kindref="member">SplitStereo</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8710"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a98d028f4a19322ea675fcd33412f9832" kindref="member">SetChannel</ref>(<ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362faa9c6ea023df4504361ffa1a31238c87e" kindref="member">Track::RightChannel</ref>);</highlight></codeline>
<codeline lineno="8711"><highlight class="normal"><sp/><sp/><sp/>partner-&gt;<ref refid="class_track_1a98d028f4a19322ea675fcd33412f9832" kindref="member">SetChannel</ref>(<ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fa4cc8a2bb7bc243eab53ba2abd757d9da" kindref="member">Track::LeftChannel</ref>);</highlight></codeline>
<codeline lineno="8712"><highlight class="normal"></highlight></codeline>
<codeline lineno="8713"><highlight class="normal"><sp/><sp/><sp/>(<ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1a02d9dbf3328954ce21a814f04c4b129f" kindref="member">MoveUp</ref>(partner));</highlight></codeline>
<codeline lineno="8714"><highlight class="normal"><sp/><sp/><sp/>partner-&gt;<ref refid="class_track_1a23dc5f6265d0383f860d099f44e7d74c" kindref="member">SetLinked</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8715"><highlight class="normal"></highlight></codeline>
<codeline lineno="8716"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_mixer_board" kindref="compound">MixerBoard</ref>*<sp/>pMixerBoard<sp/>=<sp/>this-&gt;<ref refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" kindref="member">GetMixerBoard</ref>();</highlight></codeline>
<codeline lineno="8717"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard)<sp/>{</highlight></codeline>
<codeline lineno="8718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1a84e9f17f3cfb9618fd70931fa6543aac" kindref="member">UpdateTrackClusters</ref>();</highlight></codeline>
<codeline lineno="8719"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8720"><highlight class="normal"></highlight></codeline>
<codeline lineno="8721"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hasFocus)</highlight></codeline>
<codeline lineno="8722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(partner);</highlight></codeline>
<codeline lineno="8723"><highlight class="normal"></highlight></codeline>
<codeline lineno="8724"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Swapped<sp/>Channels<sp/>in<sp/>&apos;%s&apos;&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>().c_str()),</highlight></codeline>
<codeline lineno="8726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Swap<sp/>Channels&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8727"><highlight class="normal"></highlight></codeline>
<codeline lineno="8728"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8729"><highlight class="normal"></highlight></codeline>
<codeline lineno="8731" refid="class_track_panel_1abdea3e1cd81f79b2bd1132700f7a7df3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abdea3e1cd81f79b2bd1132700f7a7df3" kindref="member">TrackPanel::OnSplitStereo</ref>(wxCommandEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="8732"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8733"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a84a32630cc3b1782dadcdc003a964552" kindref="member">SplitStereo</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8734"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Split<sp/>stereo<sp/>track<sp/>&apos;%s&apos;&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>().c_str()),</highlight></codeline>
<codeline lineno="8736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Split&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8737"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8738"><highlight class="normal"></highlight></codeline>
<codeline lineno="8740" refid="class_track_panel_1aa368a00b54d19c9c8d73c0e9ab53572c" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa368a00b54d19c9c8d73c0e9ab53572c" kindref="member">TrackPanel::OnSplitStereoMono</ref>(wxCommandEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="8741"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8742"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a84a32630cc3b1782dadcdc003a964552" kindref="member">SplitStereo</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8743"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Split<sp/>Stereo<sp/>to<sp/>Mono<sp/>&apos;%s&apos;&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>().c_str()),</highlight></codeline>
<codeline lineno="8745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Split<sp/>to<sp/>Mono&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8746"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8747"><highlight class="normal"></highlight></codeline>
<codeline lineno="8749" refid="class_track_panel_1a84a32630cc3b1782dadcdc003a964552" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a84a32630cc3b1782dadcdc003a964552" kindref="member">TrackPanel::SplitStereo</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>stereo)</highlight></codeline>
<codeline lineno="8750"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8751"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>);</highlight></codeline>
<codeline lineno="8752"><highlight class="normal"></highlight></codeline>
<codeline lineno="8753"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stereo)</highlight></codeline>
<codeline lineno="8754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a98d028f4a19322ea675fcd33412f9832" kindref="member">SetChannel</ref>(Track::MonoChannel);</highlight></codeline>
<codeline lineno="8755"><highlight class="normal"></highlight></codeline>
<codeline lineno="8756"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*partner<sp/>=<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="8757"><highlight class="normal"></highlight></codeline>
<codeline lineno="8758"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8759"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!stereo<sp/>&amp;&amp;<sp/>MONO_WAVE_PAN(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>))</highlight></codeline>
<codeline lineno="8760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>)-&gt;SetVirtualState(</highlight><highlight class="keyword">true</highlight><highlight class="normal">,</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8761"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!stereo<sp/>&amp;&amp;<sp/>MONO_WAVE_PAN(partner))</highlight></codeline>
<codeline lineno="8762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)partner)-&gt;SetVirtualState(</highlight><highlight class="keyword">true</highlight><highlight class="normal">,</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8763"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8764"><highlight class="normal"></highlight></codeline>
<codeline lineno="8765"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="8766"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_track_1af91d1579e3d15a0d5fffa3348adae753" kindref="member">SetName</ref>(mPopupMenuTarget-&gt;GetName());</highlight></codeline>
<codeline lineno="8768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!stereo)</highlight></codeline>
<codeline lineno="8769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;SetChannel(Track::MonoChannel);<sp/><sp/></highlight><highlight class="comment">//<sp/>Keep<sp/>original<sp/>stereo<sp/>track<sp/>name.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8770"><highlight class="normal"></highlight></codeline>
<codeline lineno="8771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//On<sp/>Demand<sp/>-<sp/>have<sp/>each<sp/>channel<sp/>add<sp/>it&apos;s<sp/>own.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_o_d_manager_1a6647fc26402ceed611a794b7224063a5" kindref="member">ODManager::IsInstanceCreated</ref>()<sp/>&amp;&amp;<sp/>partner-&gt;GetKind()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>)</highlight></codeline>
<codeline lineno="8773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_o_d_manager_1aef1bcdded223f015b22a0d1d439c23ad" kindref="member">ODManager::Instance</ref>()-&gt;<ref refid="class_o_d_manager_1ab3dd83fd9c3e4c82f25375e38c7088d5" kindref="member">MakeWaveTrackIndependent</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)partner);</highlight></codeline>
<codeline lineno="8774"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8775"><highlight class="normal"></highlight></codeline>
<codeline lineno="8776"><highlight class="normal"><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetLinked(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8777"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//make<sp/>sure<sp/>neither<sp/>track<sp/>is<sp/>smaller<sp/>than<sp/>its<sp/>minimum<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8778"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mPopupMenuTarget-&gt;GetHeight()<sp/>&lt;<sp/>mPopupMenuTarget-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="8779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetHeight(mPopupMenuTarget-&gt;GetMinimizedHeight());</highlight></codeline>
<codeline lineno="8780"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="8781"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner-&gt;GetHeight()<sp/>&lt;<sp/>partner-&gt;GetMinimizedHeight())</highlight></codeline>
<codeline lineno="8783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;SetHeight(partner-&gt;GetMinimizedHeight());</highlight></codeline>
<codeline lineno="8784"><highlight class="normal"></highlight></codeline>
<codeline lineno="8785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>tracks<sp/>the<sp/>same<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mPopupMenuTarget-&gt;GetHeight()<sp/>!=<sp/>partner-&gt;GetHeight())</highlight></codeline>
<codeline lineno="8787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetHeight(((mPopupMenuTarget-&gt;GetHeight())+(partner-&gt;GetHeight()))<sp/>/<sp/>2.0);</highlight></codeline>
<codeline lineno="8789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;SetHeight(mPopupMenuTarget-&gt;GetHeight());</highlight></codeline>
<codeline lineno="8790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8791"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8792"><highlight class="normal"></highlight></codeline>
<codeline lineno="8793"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8794"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8795"><highlight class="normal"></highlight></codeline>
<codeline lineno="8797" refid="class_track_panel_1a569f20ce412c0c0a8e6e2c530866cd92" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a569f20ce412c0c0a8e6e2c530866cd92" kindref="member">TrackPanel::OnMergeStereo</ref>(wxCommandEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="8798"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8799"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>);</highlight></codeline>
<codeline lineno="8800"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a23dc5f6265d0383f860d099f44e7d74c" kindref="member">SetLinked</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8801"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*partner<sp/>=<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="8802"><highlight class="normal"></highlight></codeline>
<codeline lineno="8803"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8804"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>))</highlight></codeline>
<codeline lineno="8805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>)-&gt;SetVirtualState(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8806"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MONO_WAVE_PAN(partner))</highlight></codeline>
<codeline lineno="8807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)partner)-&gt;SetVirtualState(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8808"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8809"><highlight class="normal"></highlight></codeline>
<codeline lineno="8810"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)<sp/>{</highlight></codeline>
<codeline lineno="8811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>partner&apos;s<sp/>parameters<sp/>to<sp/>match<sp/>target.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_track_1a0345783930c487b7b511f8419f068aa5" kindref="member">Merge</ref>(*mPopupMenuTarget);</highlight></codeline>
<codeline lineno="8813"><highlight class="normal"></highlight></codeline>
<codeline lineno="8814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetChannel(<ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362fa4cc8a2bb7bc243eab53ba2abd757d9da" kindref="member">Track::LeftChannel</ref>);</highlight></codeline>
<codeline lineno="8815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;SetChannel(<ref refid="class_track_1af7ac66dc1b976cffbaee1e01206d362faa9c6ea023df4504361ffa1a31238c87e" kindref="member">Track::RightChannel</ref>);</highlight></codeline>
<codeline lineno="8816"><highlight class="normal"></highlight></codeline>
<codeline lineno="8817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>NEW<sp/>track<sp/>heights<sp/>and<sp/>minimized<sp/>state</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bBothMinimizedp=((mPopupMenuTarget-&gt;GetMinimized())&amp;&amp;(partner-&gt;GetMinimized()));</highlight></codeline>
<codeline lineno="8819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetMinimized(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;SetMinimized(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>AverageHeight=(mPopupMenuTarget-&gt;GetHeight()<sp/>+<sp/>partner-&gt;GetHeight())/<sp/>2;</highlight></codeline>
<codeline lineno="8822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetHeight(AverageHeight);</highlight></codeline>
<codeline lineno="8823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;SetHeight(AverageHeight);</highlight></codeline>
<codeline lineno="8824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetMinimized(bBothMinimizedp);</highlight></codeline>
<codeline lineno="8825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;SetMinimized(bBothMinimizedp);</highlight></codeline>
<codeline lineno="8826"><highlight class="normal"></highlight></codeline>
<codeline lineno="8827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//On<sp/>Demand<sp/>-<sp/>join<sp/>the<sp/>queues<sp/>together.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="class_o_d_manager_1a6647fc26402ceed611a794b7224063a5" kindref="member">ODManager::IsInstanceCreated</ref>()<sp/>&amp;&amp;<sp/>partner-&gt;GetKind()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>&amp;&amp;<sp/>mPopupMenuTarget-&gt;GetKind()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref><sp/>)</highlight></codeline>
<codeline lineno="8829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!<ref refid="class_o_d_manager_1aef1bcdded223f015b22a0d1d439c23ad" kindref="member">ODManager::Instance</ref>()-&gt;<ref refid="class_o_d_manager_1a97998606b0ea08aa946d7b407ffd015e" kindref="member">MakeWaveTrackDependent</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)partner,(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)mPopupMenuTarget))</highlight></codeline>
<codeline lineno="8830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="8832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO:<sp/>in<sp/>the<sp/>future,<sp/>we<sp/>will<sp/>have<sp/>to<sp/>check<sp/>the<sp/>return<sp/>value<sp/>of<sp/>MakeWaveTrackDependent<sp/>-</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>the<sp/>tracks<sp/>cannot<sp/>merge,<sp/>it<sp/>returns<sp/>false,<sp/>and<sp/>in<sp/>that<sp/>case<sp/>we<sp/>should<sp/>not<sp/>allow<sp/>a<sp/>merging.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>example<sp/>it<sp/>returns<sp/>false<sp/>when<sp/>there<sp/>are<sp/>two<sp/>different<sp/>types<sp/>of<sp/>ODTasks<sp/>on<sp/>each<sp/>track&apos;s<sp/>queue.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//we<sp/>will<sp/>need<sp/>to<sp/>display<sp/>this<sp/>to<sp/>the<sp/>user.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8837"><highlight class="normal"></highlight></codeline>
<codeline lineno="8838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Made<sp/>&apos;%s&apos;<sp/>a<sp/>stereo<sp/>track&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;GetName().</highlight></codeline>
<codeline lineno="8840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c_str()),</highlight></codeline>
<codeline lineno="8841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Make<sp/>Stereo&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8842"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mPopupMenuTarget-&gt;SetLinked(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8844"><highlight class="normal"></highlight></codeline>
<codeline lineno="8845"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8846"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8847"><highlight class="normal"></highlight></codeline>
<codeline lineno="8848" refid="class_view_settings_dialog" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="class_view_settings_dialog" kindref="compound">ViewSettingsDialog</ref><sp/>final<sp/>:<sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="class_prefs_dialog" kindref="compound">PrefsDialog</ref></highlight></codeline>
<codeline lineno="8849"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8850"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="8851"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_view_settings_dialog" kindref="compound">ViewSettingsDialog</ref></highlight></codeline>
<codeline lineno="8852" refid="class_view_settings_dialog_1a181c123cc1bf06558bcd6e870f134016" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(wxWindow<sp/>*parent,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxString<sp/>&amp;title,<sp/><ref refid="class_prefs_dialog_1abce19159c638bc50c25147e479275388" kindref="member">PrefsDialog::Factories</ref><sp/>&amp;factories,</highlight></codeline>
<codeline lineno="8853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>page)</highlight></codeline>
<codeline lineno="8854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><ref refid="class_prefs_dialog" kindref="compound">PrefsDialog</ref>(parent,<sp/>title,<sp/>factories)</highlight></codeline>
<codeline lineno="8855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>,<sp/>mPage(page)</highlight></codeline>
<codeline lineno="8856"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8857"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8858"><highlight class="normal"></highlight></codeline>
<codeline lineno="8859" refid="class_view_settings_dialog_1ad17041faf76af9d8248af939ecc8b002" refkind="member"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="class_view_settings_dialog_1ad17041faf76af9d8248af939ecc8b002" kindref="member">GetPreferredPage</ref>()</highlight><highlight class="keyword"><sp/>override</highlight></codeline>
<codeline lineno="8860"><highlight class="keyword"><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="8861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mPage;</highlight></codeline>
<codeline lineno="8862"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8863"><highlight class="normal"></highlight></codeline>
<codeline lineno="8864" refid="class_view_settings_dialog_1ab135e1036ba5678aeb5137a2c64fcf6a" refkind="member"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_view_settings_dialog_1ab135e1036ba5678aeb5137a2c64fcf6a" kindref="member">SavePreferredPage</ref>()</highlight><highlight class="keyword"><sp/>override</highlight></codeline>
<codeline lineno="8865"><highlight class="keyword"><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="8866"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8867"><highlight class="normal"></highlight></codeline>
<codeline lineno="8868"><highlight class="normal"></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="8869"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mPage;</highlight></codeline>
<codeline lineno="8870"><highlight class="normal">};</highlight></codeline>
<codeline lineno="8871"><highlight class="normal"></highlight></codeline>
<codeline lineno="8872" refid="class_track_panel_1a1deb6f482639b13f9ffed1102dd9789b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a1deb6f482639b13f9ffed1102dd9789b" kindref="member">TrackPanel::OnSpectrogramSettings</ref>(wxCommandEvent<sp/>&amp;)</highlight></codeline>
<codeline lineno="8873"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8874"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>);</highlight></codeline>
<codeline lineno="8875"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>WaveformPrefsFactory<sp/>waveformFactory(wt);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8876"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_spectrum_prefs_factory" kindref="compound">SpectrumPrefsFactory</ref><sp/>spectrumFactory(wt);</highlight></codeline>
<codeline lineno="8877"><highlight class="normal"></highlight></codeline>
<codeline lineno="8878"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_prefs_dialog_1abce19159c638bc50c25147e479275388" kindref="member">PrefsDialog::Factories</ref><sp/>factories;</highlight></codeline>
<codeline lineno="8879"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>factories.push_back(&amp;waveformFactory);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8880"><highlight class="normal"><sp/><sp/><sp/>factories.push_back(&amp;spectrumFactory);</highlight></codeline>
<codeline lineno="8881"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>page<sp/>=<sp/>(wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>()<sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5ac0941a4c239c9e4a1d487f31786fbbc9" kindref="member">WaveTrack::Spectrum</ref>)</highlight></codeline>
<codeline lineno="8882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>1<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="8883"><highlight class="normal"></highlight></codeline>
<codeline lineno="8884"><highlight class="normal"><sp/><sp/><sp/>wxString<sp/>title(wt-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>()<sp/>+<sp/>wxT(</highlight><highlight class="stringliteral">&quot;:<sp/>&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8885"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_view_settings_dialog" kindref="compound">ViewSettingsDialog</ref><sp/>dialog(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>title,<sp/>factories,<sp/>page);</highlight></codeline>
<codeline lineno="8886"><highlight class="normal"></highlight></codeline>
<codeline lineno="8887"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(0<sp/>!=<sp/>dialog.ShowModal())</highlight></codeline>
<codeline lineno="8888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Redraw</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8890"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8891"><highlight class="normal"></highlight></codeline>
<codeline lineno="8896" refid="class_track_panel_1a0dc79f85d48dfae03e35ad8385bd2f93" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a0dc79f85d48dfae03e35ad8385bd2f93" kindref="member">TrackPanel::OnSetDisplay</ref>(wxCommandEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="8897"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8898"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>idInt<sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.GetId();</highlight></codeline>
<codeline lineno="8899"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(idInt<sp/>&gt;=<sp/>OnWaveformID<sp/>&amp;&amp;<sp/>idInt<sp/>&lt;=<sp/>OnSpectrumID);</highlight></codeline>
<codeline lineno="8900"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref></highlight></codeline>
<codeline lineno="8901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>);</highlight></codeline>
<codeline lineno="8902"><highlight class="normal"></highlight></codeline>
<codeline lineno="8903"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>linear<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8904"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5" kindref="member">WaveTrack::WaveTrackDisplay</ref><sp/>id;</highlight></codeline>
<codeline lineno="8905"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(idInt)<sp/>{</highlight></codeline>
<codeline lineno="8906"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="8907"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>OnWaveformID:</highlight></codeline>
<codeline lineno="8908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>linear<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8909"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a86c5bfe045792bba915af0d2cceb53da" kindref="member">OnWaveformDBID</ref>:</highlight></codeline>
<codeline lineno="8910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8911"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>OnSpectrumID:</highlight></codeline>
<codeline lineno="8912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5ac0941a4c239c9e4a1d487f31786fbbc9" kindref="member">WaveTrack::Spectrum</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8913"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8914"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*wt<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>;</highlight></codeline>
<codeline lineno="8915"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>wrongType<sp/>=<sp/>wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>()<sp/>!=<sp/>id;</highlight></codeline>
<codeline lineno="8916"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>wrongScale<sp/>=</highlight></codeline>
<codeline lineno="8917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>==<sp/><ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5aeef9a24216b729762bfd38161b5b2a83" kindref="member">WaveTrack::Waveform</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="8918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1ae4f07aa847f89f72a127ba5e357f1e78" kindref="member">isLinear</ref>()<sp/>!=<sp/>linear);</highlight></codeline>
<codeline lineno="8919"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wrongType<sp/>||<sp/>wrongScale)<sp/>{</highlight></codeline>
<codeline lineno="8920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a0692506243ea687501faddd0e767124e" kindref="member">SetLastScaleType</ref>();</highlight></codeline>
<codeline lineno="8921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1a2a72bbf273bff5d040bef6c562d4d400" kindref="member">SetDisplay</ref>(<ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5" kindref="member">WaveTrack::WaveTrackDisplay</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wrongScale)</highlight></codeline>
<codeline lineno="8923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1aec6387c49dc73248ebc0d2b250e746cd" kindref="member">GetIndependentWaveformSettings</ref>().<ref refid="class_waveform_settings_1a6866a0a302099ef5fcd4fb60cba946cd" kindref="member">scaleType</ref><sp/>=<sp/>linear</highlight></codeline>
<codeline lineno="8924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4a54fba21bb1212c84ffd56a4f510bc8dc" kindref="member">WaveformSettings::stLinear</ref></highlight></codeline>
<codeline lineno="8925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4a2e6fe9dffc2c1d6bbcfaaee36df90f68" kindref="member">WaveformSettings::stLogarithmic</ref>;</highlight></codeline>
<codeline lineno="8926"><highlight class="normal"></highlight></codeline>
<codeline lineno="8927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref><sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(wt-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>());</highlight></codeline>
<codeline lineno="8928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(l)<sp/>{</highlight></codeline>
<codeline lineno="8929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>l-&gt;<ref refid="class_wave_track_1a0692506243ea687501faddd0e767124e" kindref="member">SetLastScaleType</ref>();</highlight></codeline>
<codeline lineno="8930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>l-&gt;<ref refid="class_wave_track_1a2a72bbf273bff5d040bef6c562d4d400" kindref="member">SetDisplay</ref>(<ref refid="class_wave_track_1a084eba52413a5cc74d2634b36e2f85b5" kindref="member">WaveTrack::WaveTrackDisplay</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wrongScale)</highlight></codeline>
<codeline lineno="8932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>l-&gt;<ref refid="class_wave_track_1aec6387c49dc73248ebc0d2b250e746cd" kindref="member">GetIndependentWaveformSettings</ref>().<ref refid="class_waveform_settings_1a6866a0a302099ef5fcd4fb60cba946cd" kindref="member">scaleType</ref><sp/>=<sp/>linear</highlight></codeline>
<codeline lineno="8933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4a54fba21bb1212c84ffd56a4f510bc8dc" kindref="member">WaveformSettings::stLinear</ref></highlight></codeline>
<codeline lineno="8934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4a2e6fe9dffc2c1d6bbcfaaee36df90f68" kindref="member">WaveformSettings::stLogarithmic</ref>;</highlight></codeline>
<codeline lineno="8935"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8936"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wt-&gt;<ref refid="class_wave_track_1a93e8da76e3495f28b5e17518016f9c9f" kindref="member">GetDisplay</ref>()<sp/>==<sp/>WaveTrack::WaveformDisplay)<sp/>{</highlight></codeline>
<codeline lineno="8938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;SetVirtualState(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>==<sp/>WaveTrack::WaveformDisplay)<sp/>{</highlight></codeline>
<codeline lineno="8940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;SetVirtualState(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8942"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(wt);</highlight></codeline>
<codeline lineno="8944"><highlight class="normal"></highlight></codeline>
<codeline lineno="8945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8947"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8948"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8949"><highlight class="normal"></highlight></codeline>
<codeline lineno="8952" refid="class_track_panel_1a483bd302a4326f278b96a415c0f3d8fa" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a483bd302a4326f278b96a415c0f3d8fa" kindref="member">TrackPanel::SetRate</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>pTrack,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>)</highlight></codeline>
<codeline lineno="8953"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8954"><highlight class="normal"><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/>pTrack)-&gt;SetRate(rate);</highlight></codeline>
<codeline lineno="8955"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*partner<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(pTrack);</highlight></codeline>
<codeline lineno="8956"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="8957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/>partner)-&gt;SetRate(rate);</highlight></codeline>
<codeline lineno="8958"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Separate<sp/>conversion<sp/>of<sp/>&quot;rate&quot;<sp/>enables<sp/>changing<sp/>the<sp/>decimals<sp/>without<sp/>affecting<sp/>i18n</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8959"><highlight class="normal"><sp/><sp/><sp/>wxString<sp/>rateString<sp/>=<sp/>wxString::Format(wxT(</highlight><highlight class="stringliteral">&quot;%.3f&quot;</highlight><highlight class="normal">),<sp/>rate);</highlight></codeline>
<codeline lineno="8960"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Changed<sp/>&apos;%s&apos;<sp/>to<sp/>%s<sp/>Hz&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="8961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTrack-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>().c_str(),<sp/>rateString.c_str()),</highlight></codeline>
<codeline lineno="8962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Rate<sp/>Change&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="8963"><highlight class="normal">}</highlight></codeline>
<codeline lineno="8964"><highlight class="normal"></highlight></codeline>
<codeline lineno="8967" refid="class_track_panel_1a20aa6aca9de1b1d27568e20a8de64399" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a20aa6aca9de1b1d27568e20a8de64399" kindref="member">TrackPanel::OnFormatChange</ref>(wxCommandEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="8968"><highlight class="normal">{</highlight></codeline>
<codeline lineno="8969"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.GetId();</highlight></codeline>
<codeline lineno="8970"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&gt;=<sp/>On16BitID<sp/>&amp;&amp;<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&lt;=<sp/>OnFloatID);</highlight></codeline>
<codeline lineno="8971"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref></highlight></codeline>
<codeline lineno="8972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>);</highlight></codeline>
<codeline lineno="8973"><highlight class="normal"></highlight></codeline>
<codeline lineno="8974"><highlight class="normal"><sp/><sp/><sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792" kindref="member">sampleFormat</ref><sp/>newFormat<sp/>=<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba99d110ae36be71bbf3cb9ad3af4550" kindref="member">int16Sample</ref>;</highlight></codeline>
<codeline lineno="8975"><highlight class="normal"></highlight></codeline>
<codeline lineno="8976"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="8977"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>On16BitID:</highlight></codeline>
<codeline lineno="8978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newFormat<sp/>=<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba99d110ae36be71bbf3cb9ad3af4550" kindref="member">int16Sample</ref>;</highlight></codeline>
<codeline lineno="8979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8980"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac7e189eced3f209bb48e606b166b8fea" kindref="member">On24BitID</ref>:</highlight></codeline>
<codeline lineno="8981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newFormat<sp/>=<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792af7d5dcd7629454f6c6f3d7be44068a5f" kindref="member">int24Sample</ref>;</highlight></codeline>
<codeline lineno="8982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8983"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>OnFloatID:</highlight></codeline>
<codeline lineno="8984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newFormat<sp/>=<sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>;</highlight></codeline>
<codeline lineno="8985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8986"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="8987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ERROR<sp/>--<sp/>should<sp/>not<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="8989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="8990"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="8991"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newFormat<sp/>==<sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>)-&gt;GetSampleFormat())</highlight></codeline>
<codeline lineno="8992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>Nothing<sp/>to<sp/>do.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8993"><highlight class="normal"></highlight></codeline>
<codeline lineno="8994"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bResult<sp/>=<sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>)-&gt;ConvertToSampleFormat(newFormat);</highlight></codeline>
<codeline lineno="8995"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(bResult);<sp/></highlight><highlight class="comment">//<sp/>TO<sp/>DO:<sp/>Actually<sp/>handle<sp/>this.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8996"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*partner<sp/>=<sp/><ref refid="class_track_panel_1aea9b67c765754459a262d976a2b5e45e" kindref="member">mTracks</ref>-&gt;<ref refid="class_track_list_1af0d4ee927f537edcb4b191c68952d729" kindref="member">GetLink</ref>(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>);</highlight></codeline>
<codeline lineno="8997"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="8998"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="8999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>bResult<sp/>=<sp/>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)partner)-&gt;ConvertToSampleFormat(newFormat);</highlight></codeline>
<codeline lineno="9000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(bResult);<sp/></highlight><highlight class="comment">//<sp/>TO<sp/>DO:<sp/>Actually<sp/>handle<sp/>this.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9001"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9002"><highlight class="normal"></highlight></codeline>
<codeline lineno="9003"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Changed<sp/>&apos;%s&apos;<sp/>to<sp/>%s&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>().</highlight></codeline>
<codeline lineno="9005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c_str(),</highlight></codeline>
<codeline lineno="9006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_sample_format_8cpp_1aa1e05d8c243fe96c1bee978d1ec73b57" kindref="member">GetSampleFormatStr</ref>(newFormat)),</highlight></codeline>
<codeline lineno="9007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Format<sp/>Change&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9008"><highlight class="normal"></highlight></codeline>
<codeline lineno="9009"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a53d841273bfd3ebd498d3ad4926aa897" kindref="member">SetMenuCheck</ref>(<sp/>*<ref refid="class_track_panel_1aed53844c5faeabefd25618317866160a" kindref="member">mFormatMenu</ref>,<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="9010"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="9011"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9012"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9013"><highlight class="normal"></highlight></codeline>
<codeline lineno="9015" refid="class_track_panel_1aca830811c462433b73a300df27f129c4" refkind="member"><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aca830811c462433b73a300df27f129c4" kindref="member">TrackPanel::IdOfFormat</ref>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="_export_p_c_m_8cpp_1a317afff57d87a89158c2b038d37b2b08" kindref="member">format</ref><sp/>)</highlight></codeline>
<codeline lineno="9016"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9017"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(format)<sp/>{</highlight></codeline>
<codeline lineno="9018"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba99d110ae36be71bbf3cb9ad3af4550" kindref="member">int16Sample</ref>:</highlight></codeline>
<codeline lineno="9019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a277454ef2627523e78245ea07550f9dc" kindref="member">On16BitID</ref>;</highlight></codeline>
<codeline lineno="9020"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792af7d5dcd7629454f6c6f3d7be44068a5f" kindref="member">int24Sample</ref>:</highlight></codeline>
<codeline lineno="9021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ac7e189eced3f209bb48e606b166b8fea" kindref="member">On24BitID</ref>;</highlight></codeline>
<codeline lineno="9022"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="include_2audacity_2_types_8h_1a9938d2e2f6adef23e745cd80ef379792aba7300a3d7158e88f04d5f81e613dde2" kindref="member">floatSample</ref>:</highlight></codeline>
<codeline lineno="9023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4f7cdf8dd4dcce5be8d8cd972e3de710" kindref="member">OnFloatID</ref>;</highlight></codeline>
<codeline lineno="9024"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="9025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ERROR<sp/>--<sp/>should<sp/>not<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="9027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9028"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9029"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a4f7cdf8dd4dcce5be8d8cd972e3de710" kindref="member">OnFloatID</ref>;</highlight><highlight class="comment">//<sp/>Compiler<sp/>food.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9030"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9031"><highlight class="normal"></highlight></codeline>
<codeline lineno="9033" refid="class_track_panel_1a53d841273bfd3ebd498d3ad4926aa897" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a53d841273bfd3ebd498d3ad4926aa897" kindref="member">TrackPanel::SetMenuCheck</ref>(<sp/>wxMenu<sp/>&amp;<sp/>menu,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newId<sp/>)</highlight></codeline>
<codeline lineno="9034"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9035"><highlight class="normal"><sp/><sp/><sp/>wxMenuItemList<sp/>&amp;<sp/>list<sp/>=<sp/>menu.GetMenuItems();</highlight></codeline>
<codeline lineno="9036"><highlight class="normal"><sp/><sp/><sp/>wxMenuItem<sp/>*<sp/>item;</highlight></codeline>
<codeline lineno="9037"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>id;</highlight></codeline>
<codeline lineno="9038"><highlight class="normal"></highlight></codeline>
<codeline lineno="9039"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/>wxMenuItemList::compatibility_iterator<sp/><ref refid="structnode" kindref="compound">node</ref><sp/>=<sp/>list.GetFirst();<sp/><ref refid="structnode" kindref="compound">node</ref>;<sp/><ref refid="structnode" kindref="compound">node</ref><sp/>=<sp/><ref refid="structnode" kindref="compound">node</ref>-&gt;GetNext()<sp/>)</highlight></codeline>
<codeline lineno="9040"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>item<sp/>=<sp/><ref refid="structnode" kindref="compound">node</ref>-&gt;GetData();</highlight></codeline>
<codeline lineno="9042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/>item-&gt;GetId();</highlight></codeline>
<codeline lineno="9043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>only<sp/>need<sp/>to<sp/>set<sp/>check<sp/>marks.<sp/>Clearing<sp/>checks<sp/>causes<sp/>problems<sp/>on<sp/>Linux<sp/>(bug<sp/>851)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">==newId)</highlight></codeline>
<codeline lineno="9045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>menu.Check(<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="9046"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9047"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9048"><highlight class="normal"></highlight></codeline>
<codeline lineno="9049" refid="_track_panel_8cpp_1a3de95f88110d982efab006ba65ba37ec" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1a3de95f88110d982efab006ba65ba37ec" kindref="member">nRates</ref>=12;</highlight></codeline>
<codeline lineno="9050"><highlight class="normal"></highlight></codeline>
<codeline lineno="9053"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gRates[<ref refid="_track_panel_8cpp_1a3de95f88110d982efab006ba65ba37ec" kindref="member">nRates</ref>]<sp/>=<sp/>{<sp/>8000,<sp/>11025,<sp/>16000,<sp/>22050,<sp/>44100,<sp/>48000,<sp/>88200,<sp/>96000,</highlight></codeline>
<codeline lineno="9054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>176400,<sp/>192000,<sp/>352800,<sp/>384000<sp/>};</highlight></codeline>
<codeline lineno="9055"><highlight class="normal"></highlight></codeline>
<codeline lineno="9058" refid="class_track_panel_1ad02a8c7d668080c68094738690a46e8f" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad02a8c7d668080c68094738690a46e8f" kindref="member">TrackPanel::OnRateChange</ref>(wxCommandEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="9059"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9060"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.GetId();</highlight></codeline>
<codeline lineno="9061"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&gt;=<sp/>OnRate8ID<sp/>&amp;&amp;<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&lt;=<sp/>OnRate384ID);</highlight></codeline>
<codeline lineno="9062"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref></highlight></codeline>
<codeline lineno="9063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>);</highlight></codeline>
<codeline lineno="9064"><highlight class="normal"></highlight></codeline>
<codeline lineno="9065"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a53d841273bfd3ebd498d3ad4926aa897" kindref="member">SetMenuCheck</ref>(<sp/>*<ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>,<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="9066"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a483bd302a4326f278b96a415c0f3d8fa" kindref="member">SetRate</ref>(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>,<sp/>gRates[</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>-<sp/>OnRate8ID]);</highlight></codeline>
<codeline lineno="9067"><highlight class="normal"></highlight></codeline>
<codeline lineno="9068"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="9069"><highlight class="normal"></highlight></codeline>
<codeline lineno="9070"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9071"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9072"><highlight class="normal"></highlight></codeline>
<codeline lineno="9074" refid="class_track_panel_1ad6c0eccfaff9a4c973d1ca328ba029cf" refkind="member"><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad6c0eccfaff9a4c973d1ca328ba029cf" kindref="member">TrackPanel::IdOfRate</ref>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref><sp/>)</highlight></codeline>
<codeline lineno="9075"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9076"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>=0;<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>&lt;<ref refid="_track_panel_8cpp_1a3de95f88110d982efab006ba65ba37ec" kindref="member">nRates</ref>;<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>++)<sp/>{</highlight></codeline>
<codeline lineno="9077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>gRates[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>==<sp/>rate<sp/>)</highlight></codeline>
<codeline lineno="9078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>+<ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aefb7e2e0c50a86122b83fa8b8dd68086" kindref="member">OnRate8ID</ref>;</highlight></codeline>
<codeline lineno="9079"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9080"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61aa34e718ffff0fb7f81dd5df722344674" kindref="member">OnRateOtherID</ref>;</highlight></codeline>
<codeline lineno="9081"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9082"><highlight class="normal"></highlight></codeline>
<codeline lineno="9083" refid="class_track_panel_1a3b538964a9818c509d22f76d14629981" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a3b538964a9818c509d22f76d14629981" kindref="member">TrackPanel::OnRateOther</ref>(wxCommandEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="9084"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9085"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref></highlight></codeline>
<codeline lineno="9086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>);</highlight></codeline>
<codeline lineno="9087"><highlight class="normal"></highlight></codeline>
<codeline lineno="9088"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newRate;</highlight></codeline>
<codeline lineno="9089"><highlight class="normal"></highlight></codeline>
<codeline lineno="9092"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="9093"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxDialog<sp/>dlg(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>wxID_ANY,<sp/>wxString(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>Rate&quot;</highlight><highlight class="normal">)));</highlight></codeline>
<codeline lineno="9095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dlg.SetName(dlg.GetTitle());</highlight></codeline>
<codeline lineno="9096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_shuttle_gui" kindref="compound">ShuttleGui</ref><sp/><ref refid="xlftab_8c_1af933676109efed7ab34cea71d748a517" kindref="member">S</ref>(&amp;dlg,<sp/><ref refid="_shuttle_gui_8h_1a0c8bf96cca5e5b020b22818e8490b964a25601c4255a6f5c0cb7e8251080b069a" kindref="member">eIsCreating</ref>);</highlight></codeline>
<codeline lineno="9097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>;</highlight></codeline>
<codeline lineno="9098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxArrayString<sp/>rates;</highlight></codeline>
<codeline lineno="9099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxComboBox<sp/>*cb;</highlight></codeline>
<codeline lineno="9100"><highlight class="normal"></highlight></codeline>
<codeline lineno="9101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rate.Printf(wxT(</highlight><highlight class="stringliteral">&quot;%ld&quot;</highlight><highlight class="normal">),<sp/><ref refid="real_8h_1a01a38abe6848b3731344a2891c357d42" kindref="member">lrint</ref>(((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>)-&gt;GetRate()));</highlight></codeline>
<codeline lineno="9102"><highlight class="normal"></highlight></codeline>
<codeline lineno="9103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;8000&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;11025&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;16000&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;22050&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;44100&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;48000&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;88200&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;96000&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;176400&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;192000&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;352800&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rates.Add(wxT(</highlight><highlight class="stringliteral">&quot;384000&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9115"><highlight class="normal"></highlight></codeline>
<codeline lineno="9116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a6f8c4113388aa33dbb64204cd5ab1571" kindref="member">StartVerticalLay</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a026838575f360f2d1d8414827d18457d" kindref="member">SetBorder</ref>(10);</highlight></codeline>
<codeline lineno="9119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1aa456756283f789e26c6841eb3ca55c72" kindref="member">StartHorizontalLay</ref>(wxEXPAND,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cb<sp/>=<sp/>S.<ref refid="class_shuttle_gui_base_1a702519066dd18b9f01c40275886e5a4c" kindref="member">AddCombo</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;New<sp/>sample<sp/>rate<sp/>(Hz):&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rate,</highlight></codeline>
<codeline lineno="9123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;rates);</highlight></codeline>
<codeline lineno="9124"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__WXMAC__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>As<sp/>of<sp/>wxMac-2.8.12,<sp/>setting<sp/>manually<sp/>is<sp/>required</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>to<sp/>handle<sp/>rates<sp/>not<sp/>in<sp/>the<sp/>list.<sp/><sp/>See:<sp/>Bug<sp/>#427</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cb-&gt;SetValue(rate);</highlight></codeline>
<codeline lineno="9128"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a80917a37e36156f398a24436c1f3dba9" kindref="member">EndHorizontalLay</ref>();</highlight></codeline>
<codeline lineno="9131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_1a213ba484f310ae2851d118ccafb08f34" kindref="member">AddStandardButtons</ref>();</highlight></codeline>
<codeline lineno="9132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a0286cb0ae146afcf8c589ceb16b37144" kindref="member">EndVerticalLay</ref>();</highlight></codeline>
<codeline lineno="9134"><highlight class="normal"></highlight></codeline>
<codeline lineno="9135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dlg.SetClientSize(dlg.GetSizer()-&gt;CalcMin());</highlight></codeline>
<codeline lineno="9136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dlg.Center();</highlight></codeline>
<codeline lineno="9137"><highlight class="normal"></highlight></codeline>
<codeline lineno="9138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dlg.ShowModal()<sp/>!=<sp/>wxID_OK)</highlight></codeline>
<codeline lineno="9139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;<sp/><sp/></highlight><highlight class="comment">//<sp/>user<sp/>cancelled<sp/>dialog</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9142"><highlight class="normal"></highlight></codeline>
<codeline lineno="9143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>lrate;</highlight></codeline>
<codeline lineno="9144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cb-&gt;GetValue().ToLong(&amp;lrate)<sp/>&amp;&amp;<sp/>lrate<sp/>&gt;=<sp/>1<sp/>&amp;&amp;<sp/>lrate<sp/>&lt;=<sp/>1000000)</highlight></codeline>
<codeline lineno="9145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newRate<sp/>=<sp/>(<ref refid="lib_2expat_8h_1a14bb8924daea0b48c7803f281f66e390" kindref="member">int</ref>)lrate;</highlight></codeline>
<codeline lineno="9147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9149"><highlight class="normal"></highlight></codeline>
<codeline lineno="9150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxMessageBox(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;The<sp/>entered<sp/>value<sp/>is<sp/>invalid&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Error&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxICON_ERROR,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9152"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9153"><highlight class="normal"></highlight></codeline>
<codeline lineno="9154"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a53d841273bfd3ebd498d3ad4926aa897" kindref="member">SetMenuCheck</ref>(<sp/>*<ref refid="class_track_panel_1ab6871e1e28183f7c71e2b2457e3036b8" kindref="member">mRateMenu</ref>,<sp/>event.GetId()<sp/>);</highlight></codeline>
<codeline lineno="9155"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a483bd302a4326f278b96a415c0f3d8fa" kindref="member">SetRate</ref>(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>,<sp/>newRate);</highlight></codeline>
<codeline lineno="9156"><highlight class="normal"></highlight></codeline>
<codeline lineno="9157"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac9dc94ced8ebb8ff3bd6bacc036ddc61" kindref="member">MakeParentRedrawScrollbars</ref>();</highlight></codeline>
<codeline lineno="9158"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9159"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9160"><highlight class="normal"></highlight></codeline>
<codeline lineno="9161" refid="class_track_panel_1ad28bd95f220f81f7888622fe8f354387" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ad28bd95f220f81f7888622fe8f354387" kindref="member">TrackPanel::OnSetTimeTrackRange</ref>(wxCommandEvent<sp/>&amp;<sp/></highlight><highlight class="comment">/*event*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="9162"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9163"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_time_track" kindref="compound">TimeTrack</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>(<ref refid="class_time_track" kindref="compound">TimeTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>;</highlight></codeline>
<codeline lineno="9164"><highlight class="normal"></highlight></codeline>
<codeline lineno="9165"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t)<sp/>{</highlight></codeline>
<codeline lineno="9166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>lower<sp/>=<sp/>(long)<sp/>(t-&gt;<ref refid="class_time_track_1a4b1f56611ba90a95691a0b47107e4d22" kindref="member">GetRangeLower</ref>()<sp/>*<sp/>100.0<sp/>+<sp/>0.5);</highlight></codeline>
<codeline lineno="9167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>upper<sp/>=<sp/>(long)<sp/>(t-&gt;<ref refid="class_time_track_1a8d16c30d6a49657b1e3125ba16a3fae8" kindref="member">GetRangeUpper</ref>()<sp/>*<sp/>100.0<sp/>+<sp/>0.5);</highlight></codeline>
<codeline lineno="9168"><highlight class="normal"></highlight></codeline>
<codeline lineno="9169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MB:<sp/>these<sp/>lower/upper<sp/>limits<sp/>match<sp/>the<sp/>maximum<sp/>allowed<sp/>range<sp/>of<sp/>the<sp/>time<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>envelope,<sp/>but<sp/>this<sp/>is<sp/>not<sp/>strictly<sp/>required</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>lower<sp/>=<sp/>wxGetNumberFromUser(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Change<sp/>lower<sp/>speed<sp/>limit<sp/>(%)<sp/>to:&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Lower<sp/>speed<sp/>limit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Lower<sp/>speed<sp/>limit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lower,</highlight></codeline>
<codeline lineno="9175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>10,</highlight></codeline>
<codeline lineno="9176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1000);</highlight></codeline>
<codeline lineno="9177"><highlight class="normal"></highlight></codeline>
<codeline lineno="9178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>upper<sp/>=<sp/>wxGetNumberFromUser(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Change<sp/>upper<sp/>speed<sp/>limit<sp/>(%)<sp/>to:&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Upper<sp/>speed<sp/>limit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Upper<sp/>speed<sp/>limit&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>upper,</highlight></codeline>
<codeline lineno="9182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lower+1,</highlight></codeline>
<codeline lineno="9183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1000);</highlight></codeline>
<codeline lineno="9184"><highlight class="normal"></highlight></codeline>
<codeline lineno="9185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>lower<sp/>&gt;=<sp/>10<sp/>&amp;&amp;<sp/>upper<sp/>&lt;=<sp/>1000<sp/>&amp;&amp;<sp/>lower<sp/>&lt;<sp/>upper<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="9186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_time_track_1aa5896d68ea4f71d80c7cda10438394a7" kindref="member">SetRangeLower</ref>((</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)lower<sp/>/<sp/>100.0);</highlight></codeline>
<codeline lineno="9187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_time_track_1aff49fb8cb170a1b8343ed719abb96e49" kindref="member">SetRangeUpper</ref>((</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)upper<sp/>/<sp/>100.0);</highlight></codeline>
<codeline lineno="9188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>range<sp/>to<sp/>&apos;%ld&apos;<sp/>-<sp/>&apos;%ld&apos;&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lower,</highlight></codeline>
<codeline lineno="9190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>upper),</highlight></codeline>
<codeline lineno="9191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>(verb)*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9192"><highlight class="normal"></highlight></codeline>
<codeline lineno="9193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>Range&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9196"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9197"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9198"><highlight class="normal"></highlight></codeline>
<codeline lineno="9199" refid="class_track_panel_1a110f14029b4d4f0fa5c3e80730cf035e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a110f14029b4d4f0fa5c3e80730cf035e" kindref="member">TrackPanel::OnTimeTrackLin</ref>(wxCommandEvent<sp/>&amp;<sp/></highlight><highlight class="comment">/*event*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="9200"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9201"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_time_track" kindref="compound">TimeTrack</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>(<ref refid="class_time_track" kindref="compound">TimeTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>;</highlight></codeline>
<codeline lineno="9202"><highlight class="normal"><sp/><sp/><sp/>t-&gt;<ref refid="class_time_track_1a3a7af38b8f18f64cf2939d97c634ac37" kindref="member">SetDisplayLog</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9203"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(t);</highlight></codeline>
<codeline lineno="9204"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>time<sp/>track<sp/>display<sp/>to<sp/>linear&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>Display&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9205"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9206"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9207"><highlight class="normal"></highlight></codeline>
<codeline lineno="9208" refid="class_track_panel_1ab7b86d468f1dae800dcc3d45c75c8e62" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ab7b86d468f1dae800dcc3d45c75c8e62" kindref="member">TrackPanel::OnTimeTrackLog</ref>(wxCommandEvent<sp/>&amp;<sp/></highlight><highlight class="comment">/*event*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="9209"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9210"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_time_track" kindref="compound">TimeTrack</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>(<ref refid="class_time_track" kindref="compound">TimeTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>;</highlight></codeline>
<codeline lineno="9211"><highlight class="normal"><sp/><sp/><sp/>t-&gt;<ref refid="class_time_track_1a3a7af38b8f18f64cf2939d97c634ac37" kindref="member">SetDisplayLog</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9212"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(t);</highlight></codeline>
<codeline lineno="9213"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>time<sp/>track<sp/>display<sp/>to<sp/>logarithmic&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>Display&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9214"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9215"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9216"><highlight class="normal"></highlight></codeline>
<codeline lineno="9217" refid="class_track_panel_1ae36b185ae4b1cae844acde0659147284" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1ae36b185ae4b1cae844acde0659147284" kindref="member">TrackPanel::OnTimeTrackLogInt</ref>(wxCommandEvent<sp/>&amp;<sp/></highlight><highlight class="comment">/*event*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="9218"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9219"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_time_track" kindref="compound">TimeTrack</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>(<ref refid="class_time_track" kindref="compound">TimeTrack</ref>*)<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>;</highlight></codeline>
<codeline lineno="9220"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="class_time_track_1a270946a57e6c2992edcdf6848a6a3780" kindref="member">GetInterpolateLog</ref>())<sp/>{</highlight></codeline>
<codeline lineno="9221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_time_track_1a1c9c8dafcbfd6887a731edbd8c63fa44" kindref="member">SetInterpolateLog</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>time<sp/>track<sp/>interpolation<sp/>to<sp/>linear&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>Interpolation&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9223"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="9224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_time_track_1a1c9c8dafcbfd6887a731edbd8c63fa44" kindref="member">SetInterpolateLog</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>time<sp/>track<sp/>interpolation<sp/>to<sp/>logarithmic&quot;</highlight><highlight class="normal">),<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Set<sp/>Interpolation&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9226"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9227"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9228"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9229"><highlight class="normal"></highlight></codeline>
<codeline lineno="9230" refid="class_track_panel_1a1c69338cc5f498f9381e743094249025" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a1c69338cc5f498f9381e743094249025" kindref="member">TrackPanel::OnWaveformScaleType</ref>(wxCommandEvent<sp/>&amp;evt)</highlight></codeline>
<codeline lineno="9231"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9232"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>);</highlight></codeline>
<codeline lineno="9233"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>partner<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(wt-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>());</highlight></codeline>
<codeline lineno="9234"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4" kindref="member">WaveformSettings::ScaleType</ref><sp/>newScaleType<sp/>=</highlight></codeline>
<codeline lineno="9235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4" kindref="member">WaveformSettings::ScaleType</ref>(</highlight></codeline>
<codeline lineno="9236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0,</highlight></codeline>
<codeline lineno="9237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">(<ref refid="class_waveform_settings_1a62e3323b180e270201c4bd5bcf52b4e4affbe3e59f50e587141441ae8055ce30d" kindref="member">WaveformSettings::stNumScaleTypes</ref>)<sp/>-<sp/>1,</highlight></codeline>
<codeline lineno="9238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evt.GetId()<sp/>-<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61ad8599d18e8a5c41d385547ef7a321874" kindref="member">OnFirstWaveformScaleID</ref></highlight></codeline>
<codeline lineno="9239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>)));</highlight></codeline>
<codeline lineno="9240"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wt-&gt;<ref refid="class_wave_track_1a10c50123dc26cba66469b011c1852047" kindref="member">GetWaveformSettings</ref>().<ref refid="class_waveform_settings_1a6866a0a302099ef5fcd4fb60cba946cd" kindref="member">scaleType</ref><sp/>!=<sp/>newScaleType)<sp/>{</highlight></codeline>
<codeline lineno="9241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1aec6387c49dc73248ebc0d2b250e746cd" kindref="member">GetIndependentWaveformSettings</ref>().<ref refid="class_waveform_settings_1a6866a0a302099ef5fcd4fb60cba946cd" kindref="member">scaleType</ref><sp/>=<sp/>newScaleType;</highlight></codeline>
<codeline lineno="9242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="9243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1aec6387c49dc73248ebc0d2b250e746cd" kindref="member">GetIndependentWaveformSettings</ref>().<ref refid="class_waveform_settings_1a6866a0a302099ef5fcd4fb60cba946cd" kindref="member">scaleType</ref><sp/>=<sp/>newScaleType;</highlight></codeline>
<codeline lineno="9244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(wt);<sp/></highlight><highlight class="comment">//<sp/>Is<sp/>this<sp/>really<sp/>needed?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9247"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9248"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9249"><highlight class="normal"></highlight></codeline>
<codeline lineno="9250" refid="class_track_panel_1abda5e6ca457f3ca8c618f87f7e9f808c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abda5e6ca457f3ca8c618f87f7e9f808c" kindref="member">TrackPanel::OnSpectrumScaleType</ref>(wxCommandEvent<sp/>&amp;evt)</highlight></codeline>
<codeline lineno="9251"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9252"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wt<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>);</highlight></codeline>
<codeline lineno="9253"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>partner<sp/>=<sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(wt-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>());</highlight></codeline>
<codeline lineno="9254"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_spectrogram_settings_1ad80cc088bcf7afb4176fd7195d4691fc" kindref="member">SpectrogramSettings::ScaleType</ref><sp/>newScaleType<sp/>=</highlight></codeline>
<codeline lineno="9255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_spectrogram_settings_1ad80cc088bcf7afb4176fd7195d4691fc" kindref="member">SpectrogramSettings::ScaleType</ref>(</highlight></codeline>
<codeline lineno="9256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">std::max</ref>(0,</highlight></codeline>
<codeline lineno="9257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">std::min</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">(<ref refid="class_spectrogram_settings_1ad80cc088bcf7afb4176fd7195d4691fcadaf3a2fdeb3ec21686f798f6f26472f5" kindref="member">SpectrogramSettings::stNumScaleTypes</ref>)<sp/>-<sp/>1,</highlight></codeline>
<codeline lineno="9258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evt.GetId()<sp/>-<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a1cb27731327caaf24bf61d12a07f75ff" kindref="member">OnFirstSpectrumScaleID</ref></highlight></codeline>
<codeline lineno="9259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>)));</highlight></codeline>
<codeline lineno="9260"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wt-&gt;<ref refid="class_wave_track_1a54f8ed0c9c1d1fae0241867565b33512" kindref="member">GetSpectrogramSettings</ref>().<ref refid="class_spectrogram_settings_1a8c6871ffc9d2f3f645e9d14c24920e04" kindref="member">scaleType</ref><sp/>!=<sp/>newScaleType)<sp/>{</highlight></codeline>
<codeline lineno="9261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wt-&gt;<ref refid="class_wave_track_1af7353bc939d97b3090ef20a0e0a6707b" kindref="member">GetIndependentSpectrogramSettings</ref>().<ref refid="class_spectrogram_settings_1a8c6871ffc9d2f3f645e9d14c24920e04" kindref="member">scaleType</ref><sp/>=<sp/>newScaleType;</highlight></codeline>
<codeline lineno="9262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(partner)</highlight></codeline>
<codeline lineno="9263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partner-&gt;<ref refid="class_wave_track_1af7353bc939d97b3090ef20a0e0a6707b" kindref="member">GetIndependentSpectrogramSettings</ref>().<ref refid="class_spectrogram_settings_1a8c6871ffc9d2f3f645e9d14c24920e04" kindref="member">scaleType</ref><sp/>=<sp/>newScaleType;</highlight></codeline>
<codeline lineno="9264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1a057682026ce9ed46850fe36cf0f94fe4" kindref="member">UpdateVRuler</ref>(wt);<sp/></highlight><highlight class="comment">//<sp/>Is<sp/>this<sp/>really<sp/>needed?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9267"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9268"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9269"><highlight class="normal"></highlight></codeline>
<codeline lineno="9270" refid="class_track_panel_1a514c52e1a2d0a4b3485a2b8dd3b35cd0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a514c52e1a2d0a4b3485a2b8dd3b35cd0" kindref="member">TrackPanel::OnZoomInVertical</ref>(wxCommandEvent<sp/>&amp;)</highlight></codeline>
<codeline lineno="9271"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9272"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">HandleWaveTrackVZoom</ref>(static_cast&lt;WaveTrack*&gt;(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>),<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9273"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9274"><highlight class="normal"></highlight></codeline>
<codeline lineno="9275" refid="class_track_panel_1a46bfa8bc8d15221787ae82cd7fd02a25" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a46bfa8bc8d15221787ae82cd7fd02a25" kindref="member">TrackPanel::OnZoomOutVertical</ref>(wxCommandEvent<sp/>&amp;)</highlight></codeline>
<codeline lineno="9276"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9277"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">HandleWaveTrackVZoom</ref>(static_cast&lt;WaveTrack*&gt;(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9278"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9279"><highlight class="normal"></highlight></codeline>
<codeline lineno="9280" refid="class_track_panel_1a8554d1a54c88db427d5d69a0f70142b1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a8554d1a54c88db427d5d69a0f70142b1" kindref="member">TrackPanel::OnZoomFitVertical</ref>(wxCommandEvent<sp/>&amp;)</highlight></codeline>
<codeline lineno="9281"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9282"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1aed852d3cba853e830ff4863d8677d25f" kindref="member">HandleWaveTrackVZoom</ref>(static_cast&lt;WaveTrack*&gt;(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9283"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9284"><highlight class="normal"></highlight></codeline>
<codeline lineno="9286"><highlight class="normal"></highlight></codeline>
<codeline lineno="9287" refid="class_track_panel_1aa1d35747329d53a7699ab542c29fc815" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aa1d35747329d53a7699ab542c29fc815" kindref="member">TrackPanel::OnMoveTrack</ref>(wxCommandEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="9288"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9289"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_audacity_project_1a2841977e2deccb4ffbc0da8d5e538d08" kindref="member">AudacityProject::MoveChoice</ref><sp/>choice;</highlight></codeline>
<codeline lineno="9290"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(event.GetId())<sp/>{</highlight></codeline>
<codeline lineno="9291"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="9292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxASSERT(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9293"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>OnMoveUpID:</highlight></codeline>
<codeline lineno="9294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>choice<sp/>=<sp/><ref refid="class_audacity_project_1a2841977e2deccb4ffbc0da8d5e538d08a36ad3fd96ec1e240b45ca36152f5bdfd" kindref="member">AudacityProject::OnMoveUpID</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9295"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>OnMoveDownID:</highlight></codeline>
<codeline lineno="9296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>choice<sp/>=<sp/><ref refid="class_audacity_project_1a2841977e2deccb4ffbc0da8d5e538d08a5be74cecd58c62c581ebf67d39d5afcc" kindref="member">AudacityProject::OnMoveDownID</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9297"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>OnMoveTopID:</highlight></codeline>
<codeline lineno="9298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>choice<sp/>=<sp/><ref refid="class_audacity_project_1a2841977e2deccb4ffbc0da8d5e538d08ad07891562eec17ba3f084fbee5e398b1" kindref="member">AudacityProject::OnMoveTopID</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9299"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>OnMoveBottomID:</highlight></codeline>
<codeline lineno="9300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>choice<sp/>=<sp/><ref refid="class_audacity_project_1a2841977e2deccb4ffbc0da8d5e538d08a96f029020ab1ca5433dc91dde392cba8" kindref="member">AudacityProject::OnMoveBottomID</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9301"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9302"><highlight class="normal"></highlight></codeline>
<codeline lineno="9303"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>()-&gt;<ref refid="class_audacity_project_1a84d5c051213295a8e5c8a0888b05f6b3" kindref="member">MoveTrack</ref>(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>,<sp/>choice);</highlight></codeline>
<codeline lineno="9304"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9305"><highlight class="normal"></highlight></codeline>
<codeline lineno="9308" refid="class_track_panel_1a485f7d8f3fba3e65d443331d252eb7d8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a485f7d8f3fba3e65d443331d252eb7d8" kindref="member">TrackPanel::OnChangeOctave</ref>(wxCommandEvent<sp/>&amp;<sp/>event)</highlight></codeline>
<codeline lineno="9309"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9310"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(USE_MIDI)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9311"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(event.GetId()<sp/>==<sp/>OnUpOctaveID</highlight></codeline>
<codeline lineno="9312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.GetId()<sp/>==<sp/><ref refid="_track_panel_8cpp_1ad559b3ed307be626eacea8b56942de61a8a40c66fb44fb22922b2c4fbc43d5a04" kindref="member">OnDownOctaveID</ref>);</highlight></codeline>
<codeline lineno="9313"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(<ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/>Track::Note);</highlight></codeline>
<codeline lineno="9314"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>(<ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*)<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>;</highlight></codeline>
<codeline lineno="9315"><highlight class="normal"></highlight></codeline>
<codeline lineno="9316"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bDown<sp/>=<sp/>(OnDownOctaveID<sp/>==<sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.GetId());</highlight></codeline>
<codeline lineno="9317"><highlight class="normal"><sp/><sp/><sp/>t-&gt;SetBottomNote(t-&gt;GetBottomNote()<sp/>+<sp/>((bDown)<sp/>?<sp/>-12<sp/>:<sp/>12));</highlight></codeline>
<codeline lineno="9318"><highlight class="normal"></highlight></codeline>
<codeline lineno="9319"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abdc1151fe19589c014b59cbded2df7fe" kindref="member">MakeParentModifyState</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9320"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9321"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9322"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9323"><highlight class="normal"></highlight></codeline>
<codeline lineno="9324" refid="class_track_panel_1a6323e0bbf50dacea27b17f153d873ab5" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a6323e0bbf50dacea27b17f153d873ab5" kindref="member">TrackPanel::OnSetName</ref>(wxCommandEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="9325"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9326"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="class_track_panel_1a3a96552d3188cea6a3b14cee137a946c" kindref="member">mPopupMenuTarget</ref>;</highlight></codeline>
<codeline lineno="9327"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t)</highlight></codeline>
<codeline lineno="9328"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/>oldName<sp/>=<sp/>t-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>();</highlight></codeline>
<codeline lineno="9330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wxString<sp/>newName<sp/>=</highlight></codeline>
<codeline lineno="9331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxGetTextFromUser(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Change<sp/>track<sp/>name<sp/>to:&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Track<sp/>Name&quot;</highlight><highlight class="normal">),<sp/>oldName);</highlight></codeline>
<codeline lineno="9333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newName<sp/>!=<sp/>wxT(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">))<sp/></highlight><highlight class="comment">//<sp/>wxGetTextFromUser<sp/>returns<sp/>empty<sp/>string<sp/>on<sp/>Cancel.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_track_1af91d1579e3d15a0d5fffa3348adae753" kindref="member">SetName</ref>(newName);</highlight></codeline>
<codeline lineno="9336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>we<sp/>have<sp/>a<sp/>linked<sp/>channel<sp/>this<sp/>name<sp/>should<sp/>change<sp/>as<sp/>well</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(otherwise<sp/>sort<sp/>by<sp/>name<sp/>and<sp/>time<sp/>will<sp/>crash).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>())</highlight></codeline>
<codeline lineno="9339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()-&gt;<ref refid="class_track_1af91d1579e3d15a0d5fffa3348adae753" kindref="member">SetName</ref>(newName);</highlight></codeline>
<codeline lineno="9340"><highlight class="normal"></highlight></codeline>
<codeline lineno="9341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_mixer_board" kindref="compound">MixerBoard</ref>*<sp/>pMixerBoard<sp/>=<sp/>this-&gt;<ref refid="class_track_panel_1a9d640aa69ffac9fe8e4a9bfba58ce876" kindref="member">GetMixerBoard</ref>();</highlight></codeline>
<codeline lineno="9342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pMixerBoard<sp/>&amp;&amp;<sp/>(t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efab39033be088537a007532668cb6d16a8" kindref="member">Track::Wave</ref>))</highlight></codeline>
<codeline lineno="9343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pMixerBoard-&gt;<ref refid="class_mixer_board_1a266ac6ffd3752c43f51c556cd6f8fad6" kindref="member">UpdateName</ref>((<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)t);</highlight></codeline>
<codeline lineno="9344"><highlight class="normal"></highlight></codeline>
<codeline lineno="9345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ac664b787fc7db86e6197fd5f1d91995e" kindref="member">MakeParentPushState</ref>(wxString::Format(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Renamed<sp/>&apos;%s&apos;<sp/>to<sp/>&apos;%s&apos;&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>oldName.c_str(),</highlight></codeline>
<codeline lineno="9347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newName.c_str()),</highlight></codeline>
<codeline lineno="9348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Name<sp/>Change&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9349"><highlight class="normal"></highlight></codeline>
<codeline lineno="9350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9352"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9353"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9354"><highlight class="normal"></highlight></codeline>
<codeline lineno="9355"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Small<sp/>helper<sp/>class<sp/>to<sp/>enumerate<sp/>all<sp/>fonts<sp/>in<sp/>the<sp/>system</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9356"><highlight class="normal"></highlight><highlight class="comment">//<sp/>We<sp/>use<sp/>this<sp/>because<sp/>the<sp/>default<sp/>implementation<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9357"><highlight class="normal"></highlight><highlight class="comment">//<sp/>wxFontEnumerator::GetFacenames()<sp/>has<sp/>changed<sp/>between<sp/>wx2.6<sp/>and<sp/>2.8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9358" refid="class_track_panel_font_enumerator" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="class_track_panel_font_enumerator" kindref="compound">TrackPanelFontEnumerator</ref><sp/>final<sp/>:<sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>wxFontEnumerator</highlight></codeline>
<codeline lineno="9359"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9360"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="9361" refid="class_track_panel_font_enumerator_1a68191acae58930738464e3951f9a1742" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_font_enumerator_1a68191acae58930738464e3951f9a1742" kindref="member">TrackPanelFontEnumerator</ref>(wxArrayString*<sp/>fontNames)<sp/>:</highlight></codeline>
<codeline lineno="9362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mFontNames(fontNames)<sp/>{}</highlight></codeline>
<codeline lineno="9363"><highlight class="normal"></highlight></codeline>
<codeline lineno="9364" refid="class_track_panel_font_enumerator_1a44b667a85d8f8c2c28ece363d18a6e23" refkind="member"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_font_enumerator_1a44b667a85d8f8c2c28ece363d18a6e23" kindref="member">OnFacename</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxString&amp;<sp/>font)</highlight><highlight class="keyword"><sp/>override</highlight></codeline>
<codeline lineno="9365"><highlight class="keyword"><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mFontNames-&gt;Add(font);</highlight></codeline>
<codeline lineno="9367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9368"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9369"><highlight class="normal"></highlight></codeline>
<codeline lineno="9370"><highlight class="normal"></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="9371"><highlight class="normal"><sp/><sp/><sp/>wxArrayString*<sp/>mFontNames;</highlight></codeline>
<codeline lineno="9372"><highlight class="normal">};</highlight></codeline>
<codeline lineno="9373"><highlight class="normal"></highlight></codeline>
<codeline lineno="9374" refid="class_track_panel_1a32e421197627250006fd0429ea6c1fbc" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a32e421197627250006fd0429ea6c1fbc" kindref="member">TrackPanel::OnSetFont</ref>(wxCommandEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="9375"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9376"><highlight class="normal"><sp/><sp/><sp/>wxArrayString<sp/>facenames;</highlight></codeline>
<codeline lineno="9377"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_font_enumerator" kindref="compound">TrackPanelFontEnumerator</ref><sp/>fontEnumerator(&amp;facenames);</highlight></codeline>
<codeline lineno="9378"><highlight class="normal"><sp/><sp/><sp/>fontEnumerator.EnumerateFacenames(wxFONTENCODING_SYSTEM,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9379"><highlight class="normal"></highlight></codeline>
<codeline lineno="9380"><highlight class="normal"><sp/><sp/><sp/>wxString<sp/>facename<sp/>=<sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Read(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/LabelFontFacename&quot;</highlight><highlight class="normal">),<sp/>wxT(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9381"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>fontsize<sp/>=<sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Read(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/LabelFontSize&quot;</highlight><highlight class="normal">),<sp/>12);</highlight></codeline>
<codeline lineno="9382"><highlight class="normal"></highlight></codeline>
<codeline lineno="9383"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>(noun)<sp/>This<sp/>is<sp/>the<sp/>font<sp/>for<sp/>the<sp/>label<sp/>track.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9384"><highlight class="normal"><sp/><sp/><sp/>wxDialog<sp/>dlg(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>wxID_ANY,<sp/>wxString(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Label<sp/>Track<sp/>Font&quot;</highlight><highlight class="normal">)));</highlight></codeline>
<codeline lineno="9385"><highlight class="normal"><sp/><sp/><sp/>dlg.SetName(dlg.GetTitle());</highlight></codeline>
<codeline lineno="9386"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_shuttle_gui" kindref="compound">ShuttleGui</ref><sp/><ref refid="xlftab_8c_1af933676109efed7ab34cea71d748a517" kindref="member">S</ref>(&amp;dlg,<sp/><ref refid="_shuttle_gui_8h_1a0c8bf96cca5e5b020b22818e8490b964a25601c4255a6f5c0cb7e8251080b069a" kindref="member">eIsCreating</ref>);</highlight></codeline>
<codeline lineno="9387"><highlight class="normal"><sp/><sp/><sp/>wxListBox<sp/>*lb;</highlight></codeline>
<codeline lineno="9388"><highlight class="normal"><sp/><sp/><sp/>wxSpinCtrl<sp/>*sc;</highlight></codeline>
<codeline lineno="9389"><highlight class="normal"></highlight></codeline>
<codeline lineno="9390"><highlight class="normal"><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a6f8c4113388aa33dbb64204cd5ab1571" kindref="member">StartVerticalLay</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9391"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1ae71efe4837e02680f854a905b3b27120" kindref="member">StartMultiColumn</ref>(2,<sp/>wxEXPAND);</highlight></codeline>
<codeline lineno="9393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a6f1a3303037df4c49caf2fd1804a6b19" kindref="member">SetStretchyRow</ref>(0);</highlight></codeline>
<codeline lineno="9395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1ad4cabbeae683420ffe6ee2e279ede56f" kindref="member">SetStretchyCol</ref>(1);</highlight></codeline>
<codeline lineno="9396"><highlight class="normal"></highlight></codeline>
<codeline lineno="9397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>(noun)<sp/>The<sp/>name<sp/>of<sp/>the<sp/>typeface*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1aa64878f881c9394090275f01296888c6" kindref="member">AddPrompt</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Face<sp/>name&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lb<sp/>=<sp/><ref refid="_audacity_8h_1a5bfa31d993e8d629ec6ebdeaa41b5955" kindref="member">safenew</ref><sp/>wxListBox(&amp;dlg,<sp/>wxID_ANY,</highlight></codeline>
<codeline lineno="9400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxDefaultPosition,</highlight></codeline>
<codeline lineno="9401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxDefaultSize,</highlight></codeline>
<codeline lineno="9402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facenames,</highlight></codeline>
<codeline lineno="9403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxLB_SINGLE);</highlight></codeline>
<codeline lineno="9404"><highlight class="normal"></highlight></codeline>
<codeline lineno="9405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lb-&gt;SetName(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Face<sp/>name&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lb-&gt;SetSelection(facenames.Index(facename));</highlight></codeline>
<codeline lineno="9407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1ab9c4e1935a85180c4aff8b056b29c418" kindref="member">AddWindow</ref>(lb,<sp/>wxALIGN_LEFT<sp/>|<sp/>wxEXPAND<sp/>|<sp/>wxALL);</highlight></codeline>
<codeline lineno="9408"><highlight class="normal"></highlight></codeline>
<codeline lineno="9409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>(noun)<sp/>The<sp/>size<sp/>of<sp/>the<sp/>typeface*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1aa64878f881c9394090275f01296888c6" kindref="member">AddPrompt</ref>(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Face<sp/>size&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sc<sp/>=<sp/><ref refid="_audacity_8h_1a5bfa31d993e8d629ec6ebdeaa41b5955" kindref="member">safenew</ref><sp/>wxSpinCtrl(&amp;dlg,<sp/>wxID_ANY,</highlight></codeline>
<codeline lineno="9412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxString::Format(wxT(</highlight><highlight class="stringliteral">&quot;%ld&quot;</highlight><highlight class="normal">),<sp/>fontsize),</highlight></codeline>
<codeline lineno="9413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxDefaultPosition,</highlight></codeline>
<codeline lineno="9414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxDefaultSize,</highlight></codeline>
<codeline lineno="9415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxSP_ARROW_KEYS,</highlight></codeline>
<codeline lineno="9416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>8,<sp/>48,<sp/>fontsize);</highlight></codeline>
<codeline lineno="9417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sc-&gt;SetName(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Face<sp/>size&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="9418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1ab9c4e1935a85180c4aff8b056b29c418" kindref="member">AddWindow</ref>(sc,<sp/>wxALIGN_LEFT<sp/>|<sp/>wxALL);</highlight></codeline>
<codeline lineno="9419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a1a676a57ca191fde04599e4199e3f7f4" kindref="member">EndMultiColumn</ref>();</highlight></codeline>
<codeline lineno="9421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_1a213ba484f310ae2851d118ccafb08f34" kindref="member">AddStandardButtons</ref>();</highlight></codeline>
<codeline lineno="9422"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9423"><highlight class="normal"><sp/><sp/><sp/>S.<ref refid="class_shuttle_gui_base_1a0286cb0ae146afcf8c589ceb16b37144" kindref="member">EndVerticalLay</ref>();</highlight></codeline>
<codeline lineno="9424"><highlight class="normal"></highlight></codeline>
<codeline lineno="9425"><highlight class="normal"><sp/><sp/><sp/>dlg.Layout();</highlight></codeline>
<codeline lineno="9426"><highlight class="normal"><sp/><sp/><sp/>dlg.Fit();</highlight></codeline>
<codeline lineno="9427"><highlight class="normal"><sp/><sp/><sp/>dlg.CenterOnParent();</highlight></codeline>
<codeline lineno="9428"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dlg.ShowModal()<sp/>==<sp/>wxID_CANCEL)<sp/>{</highlight></codeline>
<codeline lineno="9429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9430"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9431"><highlight class="normal"></highlight></codeline>
<codeline lineno="9432"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Write(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/LabelFontFacename&quot;</highlight><highlight class="normal">),<sp/>lb-&gt;GetStringSelection());</highlight></codeline>
<codeline lineno="9433"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Write(wxT(</highlight><highlight class="stringliteral">&quot;/GUI/LabelFontSize&quot;</highlight><highlight class="normal">),<sp/>sc-&gt;GetValue());</highlight></codeline>
<codeline lineno="9434"><highlight class="normal"><sp/><sp/><sp/><ref refid="_prefs_8cpp_1a605d9511ac8da26b177c7362d7f8dc82" kindref="member">gPrefs</ref>-&gt;Flush();</highlight></codeline>
<codeline lineno="9435"><highlight class="normal"></highlight></codeline>
<codeline lineno="9436"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_label_track_1a59ec120849f853dce17587dff2f71b84" kindref="member">LabelTrack::ResetFont</ref>();</highlight></codeline>
<codeline lineno="9437"><highlight class="normal"></highlight></codeline>
<codeline lineno="9438"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9439"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9440"><highlight class="normal"></highlight></codeline>
<codeline lineno="9447" refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" refkind="member"><highlight class="normal"><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="class_track_panel_1a81d15409e576dbfe4100564be9f1e714" kindref="member">TrackPanel::FindTrack</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseX,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mouseY,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="_tags_8cpp_1a0a3345b0d4574d7adffe113dacd8ccec" kindref="member">label</ref>,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>link,</highlight></codeline>
<codeline lineno="9448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxRect<sp/>*<sp/>trackRect)</highlight></codeline>
<codeline lineno="9449"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9450"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>label<sp/>is<sp/>true,<sp/>resulting<sp/>rectangle<sp/>OMITS<sp/>left<sp/>and<sp/>top<sp/>insets.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9451"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>label<sp/>is<sp/>false,<sp/>resulting<sp/>rectangle<sp/>INCLUDES<sp/>right<sp/>and<sp/>top<sp/>insets.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9452"><highlight class="normal"></highlight></codeline>
<codeline lineno="9453"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect;</highlight></codeline>
<codeline lineno="9454"><highlight class="normal"><sp/><sp/><sp/>rect.x<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="9455"><highlight class="normal"><sp/><sp/><sp/>rect.y<sp/>=<sp/>-<ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>;</highlight></codeline>
<codeline lineno="9456"><highlight class="normal"><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9457"><highlight class="normal"><sp/><sp/><sp/>GetSize(&amp;rect.width,<sp/>&amp;rect.height);</highlight></codeline>
<codeline lineno="9458"><highlight class="normal"></highlight></codeline>
<codeline lineno="9459"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(label)<sp/>{</highlight></codeline>
<codeline lineno="9460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>=<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>();</highlight></codeline>
<codeline lineno="9461"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="9462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>=<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>();</highlight></codeline>
<codeline lineno="9463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>-=<sp/><ref refid="class_track_panel_1aec356825170c0c5fd323cd01efa3a967" kindref="member">GetLeftOffset</ref>();</highlight></codeline>
<codeline lineno="9464"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9465"><highlight class="normal"></highlight></codeline>
<codeline lineno="9466"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_visible_track_iterator" kindref="compound">VisibleTrackIterator</ref><sp/>iter(<ref refid="class_track_panel_1a21ed95e85483b9a266aba93a412fc860" kindref="member">GetProject</ref>());</highlight></codeline>
<codeline lineno="9467"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a1b09130ef5d92e19a60db05933d89ad5" kindref="member">First</ref>();<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/>iter.<ref refid="class_track_list_cond_iterator_1a9e3f44333f6cc2d0171315d389fb6582" kindref="member">Next</ref>())<sp/>{</highlight></codeline>
<codeline lineno="9468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight();</highlight></codeline>
<codeline lineno="9470"><highlight class="normal"></highlight></codeline>
<codeline lineno="9471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(link<sp/>&amp;&amp;<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLink())<sp/>{</highlight></codeline>
<codeline lineno="9472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref><sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLink();</highlight></codeline>
<codeline lineno="9473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>h<sp/>=<sp/>l-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="9474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetLinked())<sp/>{</highlight></codeline>
<codeline lineno="9475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>=<sp/><ref refid="layer3_8c_1a741dbb4d8e78c3cb69915db7282fcec0" kindref="member">l</ref>;</highlight></codeline>
<codeline lineno="9476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/>h;</highlight></codeline>
<codeline lineno="9479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9480"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(link<sp/>&amp;&amp;<sp/>MONO_WAVE_PAN(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>))</highlight></codeline>
<codeline lineno="9482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9485"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Determine<sp/>whether<sp/>the<sp/>mouse<sp/>is<sp/>inside</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//the<sp/>current<sp/>rectangle.<sp/><sp/>If<sp/>so,<sp/>recalculate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//the<sp/>proper<sp/>dimensions<sp/>and<sp/>return.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rect.Contains(mouseX,<sp/>mouseY))<sp/>{</highlight></codeline>
<codeline lineno="9490"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;SetVirtualStereo(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9492"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trackRect)<sp/>{</highlight></codeline>
<codeline lineno="9494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(label)<sp/>{</highlight></codeline>
<codeline lineno="9496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="9497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="9498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*trackRect<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="9502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9503"><highlight class="normal"></highlight></codeline>
<codeline lineno="9504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="9505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9506"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!link<sp/>&amp;&amp;<sp/>MONO_WAVE_PAN(<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>)){</highlight></codeline>
<codeline lineno="9508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetY(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref><sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>=<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;GetHeight(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rect.Contains(mouseX,<sp/>mouseY))<sp/>{</highlight></codeline>
<codeline lineno="9511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>-&gt;SetVirtualStereo(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trackRect)<sp/>{</highlight></codeline>
<codeline lineno="9513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(label)<sp/>{</highlight></codeline>
<codeline lineno="9515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="9516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="9517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*trackRect<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="9521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>;</highlight></codeline>
<codeline lineno="9523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9525"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/>//<sp/>EXPERIMENTAL_OUTPUT_DISPLAY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9526"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9527"><highlight class="normal"></highlight></codeline>
<codeline lineno="9528"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="9529"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9530"><highlight class="normal"></highlight></codeline>
<codeline lineno="9533" refid="class_track_panel_1ac65a26a6c6a70b2266afc7a41efb3434" refkind="member"><highlight class="normal">wxRect<sp/><ref refid="class_track_panel_1ac65a26a6c6a70b2266afc7a41efb3434" kindref="member">TrackPanel::FindTrackRect</ref>(<ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="lib_2expat_8h_1a15a257516a87decb971420e718853137" kindref="member">target</ref>,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="_tags_8cpp_1a0a3345b0d4574d7adffe113dacd8ccec" kindref="member">label</ref>)</highlight></codeline>
<codeline lineno="9534"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9535"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!target)<sp/>{</highlight></codeline>
<codeline lineno="9536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>wxRect(0,0,0,0);</highlight></codeline>
<codeline lineno="9537"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9538"><highlight class="normal"></highlight></codeline>
<codeline lineno="9539"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(0,</highlight></codeline>
<codeline lineno="9540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target-&gt;<ref refid="class_track_1adefbd93c6cbde70d082a64729cfc74d8" kindref="member">GetY</ref>()<sp/>-<sp/><ref refid="class_track_panel_1afc74f9edb01b0f01155406e69902dcad" kindref="member">mViewInfo</ref>-&gt;<ref refid="class_zoom_info_1ae96b54cadf85fe96e933a6af9edbd660" kindref="member">vpos</ref>,</highlight></codeline>
<codeline lineno="9541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetSize().GetWidth(),</highlight></codeline>
<codeline lineno="9542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>());</highlight></codeline>
<codeline lineno="9543"><highlight class="normal"></highlight></codeline>
<codeline lineno="9544"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>check<sp/>for<sp/>a<sp/>null<sp/>linked<sp/>track<sp/>is<sp/>necessary<sp/>because<sp/>there&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9545"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>a<sp/>possible<sp/>race<sp/>condition<sp/>between<sp/>the<sp/>time<sp/>the<sp/>2<sp/>linked<sp/>tracks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9546"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>are<sp/>added<sp/>and<sp/>when<sp/>wxAccessible<sp/>methods<sp/>are<sp/>called.<sp/><sp/>This<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9547"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>most<sp/>evident<sp/>when<sp/>using<sp/>Jaws.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9548"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(target-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()<sp/>&amp;&amp;<sp/>target-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>())<sp/>{</highlight></codeline>
<codeline lineno="9549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>+=<sp/>target-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>()-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>();</highlight></codeline>
<codeline lineno="9550"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9551"><highlight class="normal"></highlight></codeline>
<codeline lineno="9552"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(label)<sp/>{</highlight></codeline>
<codeline lineno="9553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.x<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="9554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.width<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="9555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.y<sp/>+=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rect.height<sp/>-=<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>;</highlight></codeline>
<codeline lineno="9557"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9558"><highlight class="normal"></highlight></codeline>
<codeline lineno="9559"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rect;</highlight></codeline>
<codeline lineno="9560"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9561"><highlight class="normal"></highlight></codeline>
<codeline lineno="9562" refid="class_track_panel_1a3046731ee18b2dc315e292b160e06560" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a3046731ee18b2dc315e292b160e06560" kindref="member">TrackPanel::GetVRulerWidth</ref>()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9563"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9564"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a6db02b5d0562bf11311bc2df73a0864a" kindref="member">vrulerSize</ref>.x;</highlight></codeline>
<codeline lineno="9565"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9566"><highlight class="normal"></highlight></codeline>
<codeline lineno="9568" refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a1a3b533d6302e7ad5da8b9bc82a0dd74" kindref="member">TrackPanel::DisplaySelection</ref>()</highlight></codeline>
<codeline lineno="9569"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9570"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>)</highlight></codeline>
<codeline lineno="9571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9572"><highlight class="normal"></highlight></codeline>
<codeline lineno="9573"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DM:<sp/>Note<sp/>that<sp/>the<sp/>Selection<sp/>Bar<sp/>can<sp/>actually<sp/>MODIFY<sp/>the<sp/>selection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9574"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>snap-to<sp/>mode<sp/>is<sp/>on!!!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9575"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a0f11708f158f21a3600c407b483aa0d5" kindref="member">mListener</ref>-&gt;<ref refid="class_track_panel_listener_1a0b1bc670fc99074c6a300e7165b4b997" kindref="member">TP_DisplaySelection</ref>();</highlight></codeline>
<codeline lineno="9576"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9577"><highlight class="normal"></highlight></codeline>
<codeline lineno="9578" refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" refkind="member"><highlight class="normal"><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">TrackPanel::GetFocusedTrack</ref>()</highlight></codeline>
<codeline lineno="9579"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9580"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>-&gt;<ref refid="class_track_panel_ax_1ac12db52636270d92d7dbb7ac3bb8b2ea" kindref="member">GetFocus</ref>();</highlight></codeline>
<codeline lineno="9581"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9582"><highlight class="normal"></highlight></codeline>
<codeline lineno="9583" refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">TrackPanel::SetFocusedTrack</ref>(<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref><sp/>)</highlight></codeline>
<codeline lineno="9584"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9585"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Make<sp/>sure<sp/>we<sp/>always<sp/>have<sp/>the<sp/>first<sp/>linked<sp/>track<sp/>of<sp/>a<sp/>stereo<sp/>track</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9586"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t<sp/>&amp;&amp;<sp/>!t-&gt;<ref refid="class_track_1abe5a26d73a2beddbacd19a39f4286fb2" kindref="member">GetLinked</ref>()<sp/>&amp;&amp;<sp/>t-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>())</highlight></codeline>
<codeline lineno="9587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref>*)t-&gt;<ref refid="class_track_1afafc93348a2d442bf956fa072d3d769b" kindref="member">GetLink</ref>();</highlight></codeline>
<codeline lineno="9588"><highlight class="normal"></highlight></codeline>
<codeline lineno="9589"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_audacity_project_1a917fe96ed9b1e2ceafb134de1212975f" kindref="member">AudacityProject::GetKeyboardCaptureHandler</ref>())<sp/>{</highlight></codeline>
<codeline lineno="9590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_audacity_project_1a6565795f4dde7aa65c854044d81d03ea" kindref="member">AudacityProject::ReleaseKeyboard</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9591"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9592"><highlight class="normal"></highlight></codeline>
<codeline lineno="9593"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t<sp/>&amp;&amp;<sp/>t-&gt;<ref refid="class_track_1ad71d0460cf42bcde59dcf600af7ef6b7" kindref="member">GetKind</ref>()<sp/>==<sp/><ref refid="class_track_1a4a6604845139575dfc25be299aeb60efaaa103f3467e47ffcb1aa408d53f7bf6e" kindref="member">Track::Label</ref>)<sp/>{</highlight></codeline>
<codeline lineno="9594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_audacity_project_1aa01e7e07556ae3ebb90b060dcd4395b1" kindref="member">AudacityProject::CaptureKeyboard</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9595"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9596"><highlight class="normal"></highlight></codeline>
<codeline lineno="9597"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1abc21f88241e49568ad393f60b8dd75b2" kindref="member">mAx</ref>-&gt;<ref refid="class_track_panel_ax_1aba4b3db82870f8c9856c3fd62d2c3f3e" kindref="member">SetFocus</ref>(<sp/>t<sp/>);</highlight></codeline>
<codeline lineno="9598"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="9599"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9600"><highlight class="normal"></highlight></codeline>
<codeline lineno="9601" refid="class_track_panel_1aae7271c142238fb34035d155bbfee39d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1aae7271c142238fb34035d155bbfee39d" kindref="member">TrackPanel::OnSetFocus</ref>(wxFocusEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="9602"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9603"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1a7e86eba104624072dbfa257359bdf35e" kindref="member">SetFocusedTrack</ref>(<sp/><ref refid="class_track_panel_1ad153a631eb1fe568d57876ca637acd5a" kindref="member">GetFocusedTrack</ref>()<sp/>);</highlight></codeline>
<codeline lineno="9604"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="9605"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9606"><highlight class="normal"></highlight></codeline>
<codeline lineno="9607" refid="class_track_panel_1a06097bc46384863e2880a2bd2ebadb42" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a06097bc46384863e2880a2bd2ebadb42" kindref="member">TrackPanel::OnKillFocus</ref>(wxFocusEvent<sp/>&amp;<sp/>WXUNUSED(event))</highlight></codeline>
<codeline lineno="9608"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9609"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_audacity_project_1a52fa5fcf43219a6ad4f3a7fe284aee79" kindref="member">AudacityProject::HasKeyboardCapture</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="9610"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_audacity_project_1a6565795f4dde7aa65c854044d81d03ea" kindref="member">AudacityProject::ReleaseKeyboard</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9612"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9613"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_1ae81fd0fd442170965441800734fcf212" kindref="member">Refresh</ref>(<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9614"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9615"><highlight class="normal"></highlight></codeline>
<codeline lineno="9616" refid="class_track_panel_1a4065eaeb541297e7e9f2e43d04d17ae5" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_track_panel_1a4065eaeb541297e7e9f2e43d04d17ae5" kindref="member">TrackPanel::OnActivateOrDeactivateApp</ref>(wxActivateEvent<sp/>&amp;event)</highlight></codeline>
<codeline lineno="9617"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9618"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_SCRUBBING_BASIC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9619"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event.GetActive())</highlight></codeline>
<codeline lineno="9620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae30f39b53fd3947ccb99b048a6efd4e3" kindref="member">mScrubHasFocus</ref><sp/>=<sp/><ref refid="class_track_panel_1a829be88d76a1848e5b7dae58220a1a8d" kindref="member">IsScrubbing</ref>();</highlight></codeline>
<codeline lineno="9621"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_1ae30f39b53fd3947ccb99b048a6efd4e3" kindref="member">mScrubHasFocus</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9623"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9624"><highlight class="normal"></highlight></codeline>
<codeline lineno="9625"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">.Skip();</highlight></codeline>
<codeline lineno="9626"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9627"><highlight class="normal"></highlight></codeline>
<codeline lineno="9628"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="9629"><highlight class="comment"></highlight></codeline>
<codeline lineno="9630"><highlight class="comment"><sp/><sp/>TrackInfo<sp/>code<sp/>is<sp/>destined<sp/>to<sp/>move<sp/>out<sp/>of<sp/>this<sp/>file.</highlight></codeline>
<codeline lineno="9631"><highlight class="comment"><sp/><sp/>Code<sp/>should<sp/>become<sp/>a<sp/>lot<sp/>cleaner<sp/>when<sp/>we<sp/>have<sp/>sizers.</highlight></codeline>
<codeline lineno="9632"><highlight class="comment"></highlight></codeline>
<codeline lineno="9633"><highlight class="comment">**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9634"><highlight class="normal"></highlight></codeline>
<codeline lineno="9635" refid="class_track_info_1ab1d79cb1e92250107d849b0d26cf3884" refkind="member"><highlight class="normal"><ref refid="class_track_info_1ab1d79cb1e92250107d849b0d26cf3884" kindref="member">TrackInfo::TrackInfo</ref>(<ref refid="class_track_panel" kindref="compound">TrackPanel</ref><sp/>*<sp/>pParentIn)</highlight></codeline>
<codeline lineno="9636"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9637"><highlight class="normal"><sp/><sp/><sp/>pParent<sp/>=<sp/>pParentIn;</highlight></codeline>
<codeline lineno="9638"><highlight class="normal"></highlight></codeline>
<codeline lineno="9639"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(0,<sp/>0,<sp/>1000,<sp/>1000);</highlight></codeline>
<codeline lineno="9640"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>sliderRect;</highlight></codeline>
<codeline lineno="9641"><highlight class="normal"></highlight></codeline>
<codeline lineno="9642"><highlight class="normal"><sp/><sp/><sp/>GetGainRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="9643"><highlight class="normal"></highlight></codeline>
<codeline lineno="9644"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>Title<sp/>of<sp/>the<sp/>Gain<sp/>slider,<sp/>used<sp/>to<sp/>adjust<sp/>the<sp/>volume<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9645"><highlight class="normal"><sp/><sp/><sp/>mGain<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_l_w_slider" kindref="compound">LWSlider</ref>(pParent,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Gain&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxPoint(sliderRect.x,<sp/>sliderRect.y),</highlight></codeline>
<codeline lineno="9647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxSize(sliderRect.width,<sp/>sliderRect.height),</highlight></codeline>
<codeline lineno="9648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_a_slider_8h_1a1c4be6cf196868391b902a0d55cd0610" kindref="member">DB_SLIDER</ref>);</highlight></codeline>
<codeline lineno="9649"><highlight class="normal"><sp/><sp/><sp/>mGain-&gt;SetDefaultValue(1.0);</highlight></codeline>
<codeline lineno="9650"><highlight class="normal"><sp/><sp/><sp/>mGainCaptured<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_l_w_slider" kindref="compound">LWSlider</ref>(pParent,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Gain&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxPoint(sliderRect.x,<sp/>sliderRect.y),</highlight></codeline>
<codeline lineno="9652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxSize(sliderRect.width,<sp/>sliderRect.height),</highlight></codeline>
<codeline lineno="9653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_a_slider_8h_1a1c4be6cf196868391b902a0d55cd0610" kindref="member">DB_SLIDER</ref>);</highlight></codeline>
<codeline lineno="9654"><highlight class="normal"><sp/><sp/><sp/>mGainCaptured-&gt;SetDefaultValue(1.0);</highlight></codeline>
<codeline lineno="9655"><highlight class="normal"></highlight></codeline>
<codeline lineno="9656"><highlight class="normal"><sp/><sp/><sp/>GetPanRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="9657"><highlight class="normal"></highlight></codeline>
<codeline lineno="9658"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>Title<sp/>of<sp/>the<sp/>Pan<sp/>slider,<sp/>used<sp/>to<sp/>move<sp/>the<sp/>sound<sp/>left<sp/>or<sp/>right<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9659"><highlight class="normal"><sp/><sp/><sp/>mPan<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_l_w_slider" kindref="compound">LWSlider</ref>(pParent,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Pan&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxPoint(sliderRect.x,<sp/>sliderRect.y),</highlight></codeline>
<codeline lineno="9661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxSize(sliderRect.width,<sp/>sliderRect.height),</highlight></codeline>
<codeline lineno="9662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_a_slider_8h_1a8940cfa7fb646d61bdb06f5c72ad9674" kindref="member">PAN_SLIDER</ref>);</highlight></codeline>
<codeline lineno="9663"><highlight class="normal"><sp/><sp/><sp/>mPan-&gt;SetDefaultValue(0.0);</highlight></codeline>
<codeline lineno="9664"><highlight class="normal"><sp/><sp/><sp/>mPanCaptured<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_l_w_slider" kindref="compound">LWSlider</ref>(pParent,<sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Pan&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxPoint(sliderRect.x,<sp/>sliderRect.y),</highlight></codeline>
<codeline lineno="9666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxSize(sliderRect.width,<sp/>sliderRect.height),</highlight></codeline>
<codeline lineno="9667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="_a_slider_8h_1a8940cfa7fb646d61bdb06f5c72ad9674" kindref="member">PAN_SLIDER</ref>);</highlight></codeline>
<codeline lineno="9668"><highlight class="normal"><sp/><sp/><sp/>mPanCaptured-&gt;SetDefaultValue(0.0);</highlight></codeline>
<codeline lineno="9669"><highlight class="normal"></highlight></codeline>
<codeline lineno="9670"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>fontSize<sp/>=<sp/>10;</highlight></codeline>
<codeline lineno="9671"><highlight class="normal"><sp/><sp/><sp/>mFont.Create(fontSize,<sp/>wxFONTFAMILY_SWISS,<sp/>wxFONTSTYLE_NORMAL,<sp/>wxFONTWEIGHT_NORMAL);</highlight></codeline>
<codeline lineno="9672"><highlight class="normal"></highlight></codeline>
<codeline lineno="9673"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>allowableWidth<sp/>=<sp/>GetTrackInfoWidth()<sp/>-<sp/>2;<sp/></highlight><highlight class="comment">//<sp/>2<sp/>to<sp/>allow<sp/>for<sp/>left/right<sp/>borders</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9674"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>textWidth,<sp/>textHeight;</highlight></codeline>
<codeline lineno="9675"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="9676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mFont.SetPointSize(fontSize);</highlight></codeline>
<codeline lineno="9677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pParent-&gt;GetTextExtent(<ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Stereo,<sp/>999999Hz&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="9678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;textWidth,</highlight></codeline>
<codeline lineno="9679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;textHeight,</highlight></codeline>
<codeline lineno="9680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="9681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="9682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;mFont);</highlight></codeline>
<codeline lineno="9683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>fontSize--;</highlight></codeline>
<codeline lineno="9684"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(textWidth<sp/>&gt;=<sp/>allowableWidth);</highlight></codeline>
<codeline lineno="9685"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9686"><highlight class="normal"></highlight></codeline>
<codeline lineno="9687" refid="class_track_info_1a75845daa131074e194dfe94a90f2cd78" refkind="member"><highlight class="normal"><ref refid="class_track_info_1a75845daa131074e194dfe94a90f2cd78" kindref="member">TrackInfo::~TrackInfo</ref>()</highlight></codeline>
<codeline lineno="9688"><highlight class="normal">{</highlight></codeline>
<codeline lineno="9689"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>mGainCaptured;</highlight></codeline>
<codeline lineno="9690"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>mGain;</highlight></codeline>
<codeline lineno="9691"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>mPanCaptured;</highlight></codeline>
<codeline lineno="9692"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>mPan;</highlight></codeline>
<codeline lineno="9693"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9694"><highlight class="normal"></highlight></codeline>
<codeline lineno="9695"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>kTrackInfoWidth<sp/>=<sp/>100;</highlight></codeline>
<codeline lineno="9696"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>kTrackInfoBtnSize<sp/>=<sp/>16;<sp/></highlight><highlight class="comment">//<sp/>widely<sp/>used<sp/>dimension,<sp/>usually<sp/>height</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9697"><highlight class="normal"></highlight></codeline>
<codeline lineno="9698"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>TrackInfo::GetTrackInfoWidth()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9699"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9700"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>kTrackInfoWidth;</highlight></codeline>
<codeline lineno="9701"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9702"><highlight class="normal"></highlight></codeline>
<codeline lineno="9703"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetCloseBoxRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;<sp/><ref refid="namespacelv2specgen_1af69976955f051ccef12ad2f85392e818" kindref="member">dest</ref>)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9704"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9705"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x;</highlight></codeline>
<codeline lineno="9706"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>rect.y;</highlight></codeline>
<codeline lineno="9707"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>kTrackInfoBtnSize;</highlight></codeline>
<codeline lineno="9708"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>kTrackInfoBtnSize;</highlight></codeline>
<codeline lineno="9709"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9710"><highlight class="normal"></highlight></codeline>
<codeline lineno="9711"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetTitleBarRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;<sp/>dest)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9712"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9713"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x<sp/>+<sp/>kTrackInfoBtnSize;<sp/></highlight><highlight class="comment">//<sp/>to<sp/>right<sp/>of<sp/>CloseBoxRect</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9714"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>rect.y;</highlight></codeline>
<codeline lineno="9715"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>kTrackInfoWidth<sp/>-<sp/>rect.x<sp/>-<sp/>kTrackInfoBtnSize;<sp/></highlight><highlight class="comment">//<sp/>to<sp/>right<sp/>of<sp/>CloseBoxRect</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9716"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>kTrackInfoBtnSize;</highlight></codeline>
<codeline lineno="9717"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9718"><highlight class="normal"></highlight></codeline>
<codeline lineno="9719"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetMuteSoloRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;<sp/>dest,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>solo,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bHasSoloButton)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9720"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9721"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x<sp/>;</highlight></codeline>
<codeline lineno="9722"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>rect.y<sp/>+<sp/>50;</highlight></codeline>
<codeline lineno="9723"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>48;</highlight></codeline>
<codeline lineno="9724"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>kTrackInfoBtnSize;</highlight></codeline>
<codeline lineno="9725"><highlight class="normal"></highlight></codeline>
<codeline lineno="9726"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!bHasSoloButton<sp/>)</highlight></codeline>
<codeline lineno="9727"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dest.width<sp/>+=48;</highlight></codeline>
<codeline lineno="9729"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9730"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(solo)</highlight></codeline>
<codeline lineno="9731"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dest.x<sp/>+=<sp/>48;</highlight></codeline>
<codeline lineno="9733"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9734"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9735"><highlight class="normal"></highlight></codeline>
<codeline lineno="9736"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetGainRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;<sp/>dest)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9737"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9738"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x<sp/>+<sp/>7;</highlight></codeline>
<codeline lineno="9739"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>rect.y<sp/>+<sp/>70;</highlight></codeline>
<codeline lineno="9740"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>84;</highlight></codeline>
<codeline lineno="9741"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>25;</highlight></codeline>
<codeline lineno="9742"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9743"><highlight class="normal"></highlight></codeline>
<codeline lineno="9744"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetPanRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;<sp/>dest)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9745"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9746"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x<sp/>+<sp/>7;</highlight></codeline>
<codeline lineno="9747"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>rect.y<sp/>+<sp/>100;</highlight></codeline>
<codeline lineno="9748"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>84;</highlight></codeline>
<codeline lineno="9749"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>25;</highlight></codeline>
<codeline lineno="9750"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9751"><highlight class="normal"></highlight></codeline>
<codeline lineno="9752"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetMinimizeRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;dest)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9753"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9754"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>kBlankWidth<sp/>=<sp/>kTrackInfoBtnSize<sp/>+<sp/>4;</highlight></codeline>
<codeline lineno="9755"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x<sp/>+<sp/>kBlankWidth;</highlight></codeline>
<codeline lineno="9756"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>19;</highlight></codeline>
<codeline lineno="9757"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Width<sp/>is<sp/>kTrackInfoWidth<sp/>less<sp/>space<sp/>on<sp/>left<sp/>for<sp/>track<sp/>select<sp/>and<sp/>on<sp/>right<sp/>for<sp/>sync-lock<sp/>icon.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9758"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>kTrackInfoWidth<sp/>-<sp/>(2<sp/>*<sp/>kBlankWidth);</highlight></codeline>
<codeline lineno="9759"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>kTrackInfoBtnSize;</highlight></codeline>
<codeline lineno="9760"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9761"><highlight class="normal"></highlight></codeline>
<codeline lineno="9762"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetSyncLockIconRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;dest)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9763"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9764"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x<sp/>+<sp/>kTrackInfoWidth<sp/>-<sp/>kTrackInfoBtnSize<sp/>-<sp/>4;<sp/></highlight><highlight class="comment">//<sp/>to<sp/>right<sp/>of<sp/>minimize<sp/>button</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9765"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>19;</highlight></codeline>
<codeline lineno="9766"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>kTrackInfoBtnSize;</highlight></codeline>
<codeline lineno="9767"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>kTrackInfoBtnSize;</highlight></codeline>
<codeline lineno="9768"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9769"><highlight class="normal"></highlight></codeline>
<codeline lineno="9770"><highlight class="normal"></highlight></codeline>
<codeline lineno="9772"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::SetTrackInfoFont(wxDC<sp/>*<sp/>dc)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9773"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9774"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetFont(mFont);</highlight></codeline>
<codeline lineno="9775"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9776"><highlight class="normal"></highlight></codeline>
<codeline lineno="9777"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawBordersWithin(wxDC*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bHasMuteSolo)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9778"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9779"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a34d81236a6bff41ebf8cf2b1183c847a" kindref="member">AColor::Dark</ref>(dc,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);<sp/></highlight><highlight class="comment">//<sp/>same<sp/>color<sp/>as<sp/>border<sp/>of<sp/>toolbars<sp/>(ToolBar::OnPaint())</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9780"><highlight class="normal"></highlight></codeline>
<codeline lineno="9781"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>below<sp/>close<sp/>box<sp/>and<sp/>title<sp/>bar</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9782"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x,<sp/>rect.y<sp/>+<sp/>kTrackInfoBtnSize,<sp/>kTrackInfoWidth,<sp/>rect.y<sp/>+<sp/>kTrackInfoBtnSize);</highlight></codeline>
<codeline lineno="9783"><highlight class="normal"></highlight></codeline>
<codeline lineno="9784"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>between<sp/>close<sp/>box<sp/>and<sp/>title<sp/>bar</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9785"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x<sp/>+<sp/>kTrackInfoBtnSize,<sp/>rect.y,<sp/>rect.x<sp/>+<sp/>kTrackInfoBtnSize,<sp/>rect.y<sp/>+<sp/>kTrackInfoBtnSize);</highlight></codeline>
<codeline lineno="9786"><highlight class="normal"></highlight></codeline>
<codeline lineno="9787"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bHasMuteSolo<sp/>&amp;&amp;<sp/>(rect.height<sp/>&gt;<sp/>(66+18)<sp/>))</highlight></codeline>
<codeline lineno="9788"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x,<sp/>rect.y<sp/>+<sp/>50,<sp/>kTrackInfoWidth,<sp/>rect.y<sp/>+<sp/>50);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>above<sp/>mute/solo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x<sp/>+<sp/>48<sp/>,<sp/>rect.y<sp/>+<sp/>50,<sp/>rect.x<sp/>+<sp/>48,<sp/>rect.y<sp/>+<sp/>66);<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>between<sp/>mute/solo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rect.x,<sp/>rect.y<sp/>+<sp/>66,<sp/>kTrackInfoWidth,<sp/>rect.y<sp/>+<sp/>66);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>below<sp/>mute/solo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9792"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9793"><highlight class="normal"></highlight></codeline>
<codeline lineno="9794"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>left<sp/>of<sp/>and<sp/>above<sp/>minimize<sp/>button</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9795"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>minimizeRect;</highlight></codeline>
<codeline lineno="9796"><highlight class="normal"><sp/><sp/><sp/>this-&gt;GetMinimizeRect(rect,<sp/>minimizeRect);</highlight></codeline>
<codeline lineno="9797"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>minimizeRect.x<sp/>-<sp/>1,<sp/>minimizeRect.y,</highlight></codeline>
<codeline lineno="9798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>minimizeRect.x<sp/>-<sp/>1,<sp/>minimizeRect.y<sp/>+<sp/>minimizeRect.height);</highlight></codeline>
<codeline lineno="9799"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>minimizeRect.x,<sp/>minimizeRect.y<sp/>-<sp/>1,</highlight></codeline>
<codeline lineno="9800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>minimizeRect.x<sp/>+<sp/>minimizeRect.width,<sp/>minimizeRect.y<sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="9801"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9802"><highlight class="normal"></highlight></codeline>
<codeline lineno="9803"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawBackground(wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bSelected,</highlight></codeline>
<codeline lineno="9804"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>WXUNUSED(bHasMuteSolo),<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>labelw,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>WXUNUSED(vrul))</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9805"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9806"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>fill<sp/>in<sp/>label</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9807"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>fill<sp/>=<sp/>rect;</highlight></codeline>
<codeline lineno="9808"><highlight class="normal"><sp/><sp/><sp/>fill.width<sp/>=<sp/>labelw-4;</highlight></codeline>
<codeline lineno="9809"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a622190f58ed113f5ca45789e8bbec03a" kindref="member">AColor::MediumTrackInfo</ref>(dc,<sp/>bSelected);</highlight></codeline>
<codeline lineno="9810"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(fill);</highlight></codeline>
<codeline lineno="9811"><highlight class="normal"></highlight></codeline>
<codeline lineno="9812"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Vaughan,<sp/>2010-09-16:<sp/>No<sp/>more<sp/>bevels<sp/>around<sp/>controls<sp/>area.<sp/>Now<sp/>only<sp/>around<sp/>buttons.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9813"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//if(<sp/>bHasMuteSolo<sp/>)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9814"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9815"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>fill=wxRect(<sp/>rect.x+1,<sp/>rect.y+17,<sp/>vrul-6,<sp/>32);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9816"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>AColor::BevelTrackInfo(<sp/>*dc,<sp/>true,<sp/>fill<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9817"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9818"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>fill=wxRect(<sp/>rect.x+1,<sp/>rect.y+67,<sp/>fill.width,<sp/>rect.height-87);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9819"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>AColor::BevelTrackInfo(<sp/>*dc,<sp/>true,<sp/>fill<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9820"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9821"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9822"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9823"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>fill=wxRect(<sp/>rect.x+1,<sp/>rect.y+17,<sp/>vrul-6,<sp/>rect.height-37);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9824"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>AColor::BevelTrackInfo(<sp/>*dc,<sp/>true,<sp/>fill<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9825"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9826"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9827"><highlight class="normal"></highlight></codeline>
<codeline lineno="9828"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::GetTrackControlsRect(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/>wxRect<sp/>&amp;<sp/>dest)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9829"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9830"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>top;</highlight></codeline>
<codeline lineno="9831"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>bot;</highlight></codeline>
<codeline lineno="9832"><highlight class="normal"></highlight></codeline>
<codeline lineno="9833"><highlight class="normal"><sp/><sp/><sp/>GetTitleBarRect(rect,<sp/>top);</highlight></codeline>
<codeline lineno="9834"><highlight class="normal"><sp/><sp/><sp/>GetMinimizeRect(rect,<sp/>bot);</highlight></codeline>
<codeline lineno="9835"><highlight class="normal"></highlight></codeline>
<codeline lineno="9836"><highlight class="normal"><sp/><sp/><sp/>dest.x<sp/>=<sp/>rect.x;</highlight></codeline>
<codeline lineno="9837"><highlight class="normal"><sp/><sp/><sp/>dest.width<sp/>=<sp/>kTrackInfoWidth<sp/>-<sp/>dest.x;</highlight></codeline>
<codeline lineno="9838"><highlight class="normal"><sp/><sp/><sp/>dest.y<sp/>=<sp/>top.GetBottom()<sp/>+<sp/>2;<sp/></highlight><highlight class="comment">//<sp/>BUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9839"><highlight class="normal"><sp/><sp/><sp/>dest.height<sp/>=<sp/>bot.GetTop()<sp/>-<sp/>top.GetBottom()<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="9840"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9841"><highlight class="normal"></highlight></codeline>
<codeline lineno="9842"><highlight class="normal"></highlight></codeline>
<codeline lineno="9843"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawCloseBox(wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9844"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9845"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>bev;</highlight></codeline>
<codeline lineno="9846"><highlight class="normal"><sp/><sp/><sp/>GetCloseBoxRect(rect,<sp/>bev);</highlight></codeline>
<codeline lineno="9847"><highlight class="normal"></highlight></codeline>
<codeline lineno="9848"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_THEMING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9849"><highlight class="normal"><sp/><sp/><sp/>wxPen<sp/>pen(<sp/><ref refid="_theme_8cpp_1a778dd1fa4ed7e54e48ec7b65aba2363e" kindref="member">theTheme</ref>.<ref refid="class_theme_base_1a13757bf24e6ed4f5807baa848fa2021c" kindref="member">Colour</ref>(<sp/>clrTrackPanelText<sp/>));</highlight></codeline>
<codeline lineno="9850"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(<sp/>pen<sp/>);</highlight></codeline>
<codeline lineno="9851"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9852"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(*wxBLACK_PEN);</highlight></codeline>
<codeline lineno="9853"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9854"><highlight class="normal"></highlight></codeline>
<codeline lineno="9855"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>the<sp/>&quot;X&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9856"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>=<sp/>6;</highlight></codeline>
<codeline lineno="9857"><highlight class="normal"></highlight></codeline>
<codeline lineno="9858"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ls<sp/>=<sp/>bev.x<sp/>+<sp/>((bev.width<sp/>-<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>)<sp/>/<sp/>2);</highlight></codeline>
<codeline lineno="9859"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ts<sp/>=<sp/>bev.y<sp/>+<sp/>((bev.height<sp/>-<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>)<sp/>/<sp/>2);</highlight></codeline>
<codeline lineno="9860"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>rs<sp/>=<sp/>ls<sp/>+<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="9861"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>bs<sp/>=<sp/>ts<sp/>+<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="9862"><highlight class="normal"></highlight></codeline>
<codeline lineno="9863"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>ls,<sp/><sp/><sp/><sp/><sp/>ts,<sp/>rs,<sp/><sp/><sp/><sp/><sp/>bs);</highlight></codeline>
<codeline lineno="9864"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>ls<sp/>+<sp/>1,<sp/>ts,<sp/>rs<sp/>+<sp/>1,<sp/>bs);</highlight></codeline>
<codeline lineno="9865"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rs,<sp/><sp/><sp/><sp/><sp/>ts,<sp/>ls,<sp/><sp/><sp/><sp/><sp/>bs);</highlight></codeline>
<codeline lineno="9866"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a37c16741ff103f9bc70a0c4591ddde05" kindref="member">AColor::Line</ref>(*dc,<sp/>rs<sp/>+<sp/>1,<sp/>ts,<sp/>ls<sp/>+<sp/>1,<sp/>bs);</highlight></codeline>
<codeline lineno="9867"><highlight class="normal"></highlight></codeline>
<codeline lineno="9868"><highlight class="normal"><sp/><sp/><sp/>bev.Inflate(-1,<sp/>-1);</highlight></codeline>
<codeline lineno="9869"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a9113deb34fdd4021fefe975070b6d2e1" kindref="member">AColor::BevelTrackInfo</ref>(*dc,<sp/>!down,<sp/>bev);</highlight></codeline>
<codeline lineno="9870"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9871"><highlight class="normal"></highlight></codeline>
<codeline lineno="9872"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawTitleBar(wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/><ref refid="octave__test_8m_1aaccc9105df5383111407fd5b41255e23" kindref="member">t</ref>,</highlight></codeline>
<codeline lineno="9873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9874"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9875"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>bev;</highlight></codeline>
<codeline lineno="9876"><highlight class="normal"><sp/><sp/><sp/>GetTitleBarRect(rect,<sp/>bev);</highlight></codeline>
<codeline lineno="9877"><highlight class="normal"><sp/><sp/><sp/>bev.Inflate(-1,<sp/>-1);</highlight></codeline>
<codeline lineno="9878"><highlight class="normal"></highlight></codeline>
<codeline lineno="9879"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Draw<sp/>title<sp/>text</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9880"><highlight class="normal"><sp/><sp/><sp/>SetTrackInfoFont(dc);</highlight></codeline>
<codeline lineno="9881"><highlight class="normal"><sp/><sp/><sp/>wxString<sp/>titleStr<sp/>=<sp/>t-&gt;<ref refid="class_track_1a670b88686f99e151d6a305a709f130b1" kindref="member">GetName</ref>();</highlight></codeline>
<codeline lineno="9882"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>allowableWidth<sp/>=<sp/>kTrackInfoWidth<sp/>-<sp/>38<sp/>-<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>;</highlight></codeline>
<codeline lineno="9883"><highlight class="normal"></highlight></codeline>
<codeline lineno="9884"><highlight class="normal"><sp/><sp/><sp/>wxCoord<sp/>textWidth,<sp/>textHeight;</highlight></codeline>
<codeline lineno="9885"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;GetTextExtent(titleStr,<sp/>&amp;textWidth,<sp/>&amp;textHeight);</highlight></codeline>
<codeline lineno="9886"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(textWidth<sp/>&gt;<sp/>allowableWidth)<sp/>{</highlight></codeline>
<codeline lineno="9887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>titleStr<sp/>=<sp/>titleStr.Left(titleStr.Length()<sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="9888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dc-&gt;GetTextExtent(titleStr,<sp/>&amp;textWidth,<sp/>&amp;textHeight);</highlight></codeline>
<codeline lineno="9889"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9890"><highlight class="normal"></highlight></codeline>
<codeline lineno="9891"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>wxGTK<sp/>leaves<sp/>little<sp/>scraps<sp/>(antialiasing?)<sp/>of<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9892"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>characters<sp/>if<sp/>they<sp/>are<sp/>repeatedly<sp/>drawn.<sp/><sp/>This</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9893"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>happens<sp/>when<sp/>holding<sp/>down<sp/>mouse<sp/>button<sp/>and<sp/>moving</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9894"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>and<sp/>out<sp/>of<sp/>the<sp/>title<sp/>bar.<sp/><sp/>So<sp/>clear<sp/>it<sp/>first.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9895"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a622190f58ed113f5ca45789e8bbec03a" kindref="member">AColor::MediumTrackInfo</ref>(dc,<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>());</highlight></codeline>
<codeline lineno="9896"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(bev);</highlight></codeline>
<codeline lineno="9897"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawText(titleStr,<sp/>bev.x<sp/>+<sp/>2,<sp/>bev.y<sp/>+<sp/>(bev.height<sp/>-<sp/>textHeight)<sp/>/<sp/>2);</highlight></codeline>
<codeline lineno="9898"><highlight class="normal"></highlight></codeline>
<codeline lineno="9899"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Pop-up<sp/>triangle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9900"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_THEMING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9901"><highlight class="normal"><sp/><sp/><sp/>wxColour<sp/><ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref><sp/>=<sp/><ref refid="_theme_8cpp_1a778dd1fa4ed7e54e48ec7b65aba2363e" kindref="member">theTheme</ref>.<ref refid="class_theme_base_1a13757bf24e6ed4f5807baa848fa2021c" kindref="member">Colour</ref>(<sp/>clrTrackPanelText<sp/>);</highlight></codeline>
<codeline lineno="9902"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9903"><highlight class="normal"><sp/><sp/><sp/>wxColour<sp/>c<sp/>=<sp/>*wxBLACK;</highlight></codeline>
<codeline lineno="9904"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9905"><highlight class="normal"></highlight></codeline>
<codeline lineno="9906"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(c);</highlight></codeline>
<codeline lineno="9907"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetBrush(c);</highlight></codeline>
<codeline lineno="9908"><highlight class="normal"></highlight></codeline>
<codeline lineno="9909"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>=<sp/>10;<sp/></highlight><highlight class="comment">//<sp/>Width<sp/>of<sp/>dropdown<sp/>arrow...height<sp/>is<sp/>half<sp/>of<sp/>width</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9910"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a054ceaee334fe7aeb2600cd300ae4d5e" kindref="member">AColor::Arrow</ref>(*dc,</highlight></codeline>
<codeline lineno="9911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bev.GetRight()<sp/>-<sp/>s<sp/>-<sp/>3,<sp/></highlight><highlight class="comment">//<sp/>3<sp/>to<sp/>offset<sp/>from<sp/>right<sp/>border</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bev.y<sp/>+<sp/>((bev.height<sp/>-<sp/>(s<sp/>/<sp/>2))<sp/>/<sp/>2),</highlight></codeline>
<codeline lineno="9913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s);</highlight></codeline>
<codeline lineno="9914"><highlight class="normal"></highlight></codeline>
<codeline lineno="9915"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a9113deb34fdd4021fefe975070b6d2e1" kindref="member">AColor::BevelTrackInfo</ref>(*dc,<sp/>!down,<sp/>bev);</highlight></codeline>
<codeline lineno="9916"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9917"><highlight class="normal"></highlight></codeline>
<codeline lineno="9919"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawMuteSolo(wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>t,</highlight></codeline>
<codeline lineno="9920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>solo,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bHasSoloButton)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9921"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9922"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>bev;</highlight></codeline>
<codeline lineno="9923"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>solo<sp/>&amp;&amp;<sp/>!bHasSoloButton<sp/>)</highlight></codeline>
<codeline lineno="9924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="9925"><highlight class="normal"><sp/><sp/><sp/>GetMuteSoloRect(rect,<sp/>bev,<sp/>solo,<sp/>bHasSoloButton);</highlight></codeline>
<codeline lineno="9926"><highlight class="normal"><sp/><sp/><sp/>bev.Inflate(-1,<sp/>-1);</highlight></codeline>
<codeline lineno="9927"><highlight class="normal"></highlight></codeline>
<codeline lineno="9928"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bev.y<sp/>+<sp/>bev.height<sp/>&gt;=<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>19)</highlight></codeline>
<codeline lineno="9929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>draw<sp/>mute<sp/>and<sp/>solo<sp/>buttons,<sp/>because<sp/>they<sp/>don&apos;t<sp/>fit<sp/>into<sp/>track<sp/>label</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9930"><highlight class="normal"></highlight></codeline>
<codeline lineno="9931"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a622190f58ed113f5ca45789e8bbec03a" kindref="member">AColor::MediumTrackInfo</ref>(<sp/>dc,<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>());</highlight></codeline>
<codeline lineno="9932"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>solo<sp/>)</highlight></codeline>
<codeline lineno="9933"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>t-&gt;<ref refid="class_track_1acd2518a3c8c5b82f2a5bd45ce074d781" kindref="member">GetSolo</ref>()<sp/>)</highlight></codeline>
<codeline lineno="9935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a0c7fa9099e48359c8c32f723363a73d8" kindref="member">AColor::Solo</ref>(dc,<sp/>t-&gt;<ref refid="class_track_1acd2518a3c8c5b82f2a5bd45ce074d781" kindref="member">GetSolo</ref>(),<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>());</highlight></codeline>
<codeline lineno="9937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9938"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9939"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9940"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>t-&gt;<ref refid="class_track_1aebabe796d0b3222ef7d23ae13a62769b" kindref="member">GetMute</ref>()<sp/>)</highlight></codeline>
<codeline lineno="9942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="9943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_a_color_1a33a36b46eb216a2fa74748d9825593c0" kindref="member">AColor::Mute</ref>(dc,<sp/>t-&gt;<ref refid="class_track_1aebabe796d0b3222ef7d23ae13a62769b" kindref="member">GetMute</ref>(),<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>(),<sp/>t-&gt;<ref refid="class_track_1acd2518a3c8c5b82f2a5bd45ce074d781" kindref="member">GetSolo</ref>());</highlight></codeline>
<codeline lineno="9944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9945"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9946"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//(solo)<sp/>?<sp/>AColor::Solo(dc,<sp/>t-&gt;GetSolo(),<sp/>t-&gt;GetSelected())<sp/>:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9947"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>AColor::Mute(dc,<sp/>t-&gt;GetMute(),<sp/>t-&gt;GetSelected(),<sp/>t-&gt;GetSolo());</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9948"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(<sp/>*wxTRANSPARENT_PEN<sp/>);</highlight><highlight class="comment">//No<sp/>border!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9949"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(bev);</highlight></codeline>
<codeline lineno="9950"><highlight class="normal"></highlight></codeline>
<codeline lineno="9951"><highlight class="normal"><sp/><sp/><sp/>wxCoord<sp/>textWidth,<sp/>textHeight;</highlight></codeline>
<codeline lineno="9952"><highlight class="normal"><sp/><sp/><sp/>wxString<sp/><ref refid="sndfile__save_8m_1a4b99ff73a8a869319570237b5c57ab03" kindref="member">str</ref><sp/>=<sp/>(solo)<sp/>?</highlight></codeline>
<codeline lineno="9953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>This<sp/>is<sp/>on<sp/>a<sp/>button<sp/>that<sp/>will<sp/>silence<sp/>this<sp/>track.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Solo&quot;</highlight><highlight class="normal">)<sp/>:</highlight></codeline>
<codeline lineno="9955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>i18n-hint:<sp/>This<sp/>is<sp/>on<sp/>a<sp/>button<sp/>that<sp/>will<sp/>silence<sp/>all<sp/>the<sp/>other<sp/>tracks.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="locale__hack_8h_1a32a3cf3d9dd914f5aeeca5423c157934" kindref="member">_</ref>(</highlight><highlight class="stringliteral">&quot;Mute&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="9957"><highlight class="normal"></highlight></codeline>
<codeline lineno="9958"><highlight class="normal"><sp/><sp/><sp/>SetTrackInfoFont(dc);</highlight></codeline>
<codeline lineno="9959"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;GetTextExtent(str,<sp/>&amp;textWidth,<sp/>&amp;textHeight);</highlight></codeline>
<codeline lineno="9960"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawText(str,<sp/>bev.x<sp/>+<sp/>(bev.width<sp/>-<sp/>textWidth)<sp/>/<sp/>2,<sp/>bev.y<sp/>+<sp/>(bev.height<sp/>-<sp/>textHeight)<sp/>/<sp/>2);</highlight></codeline>
<codeline lineno="9961"><highlight class="normal"></highlight></codeline>
<codeline lineno="9962"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a9113deb34fdd4021fefe975070b6d2e1" kindref="member">AColor::BevelTrackInfo</ref>(*dc,<sp/>(solo?t-&gt;<ref refid="class_track_1acd2518a3c8c5b82f2a5bd45ce074d781" kindref="member">GetSolo</ref>():t-&gt;<ref refid="class_track_1aebabe796d0b3222ef7d23ae13a62769b" kindref="member">GetMute</ref>())<sp/>==<sp/>down,<sp/>bev);</highlight></codeline>
<codeline lineno="9963"><highlight class="normal"></highlight></codeline>
<codeline lineno="9964"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(solo<sp/>&amp;&amp;<sp/>!down)<sp/>{</highlight></codeline>
<codeline lineno="9965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Update<sp/>the<sp/>mute<sp/>button,<sp/>which<sp/>may<sp/>be<sp/>grayed<sp/>out<sp/>depending<sp/>on</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>state<sp/>of<sp/>the<sp/>solo<sp/>button.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>DrawMuteSolo(dc,<sp/>rect,<sp/>t,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>bHasSoloButton);</highlight></codeline>
<codeline lineno="9968"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="9969"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9970"><highlight class="normal"></highlight></codeline>
<codeline lineno="9971"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Draw<sp/>the<sp/>minimize<sp/>button<sp/>*and*<sp/>the<sp/>sync-lock<sp/>track<sp/>icon,<sp/>if<sp/>necessary.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9972"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawMinimize(wxDC<sp/>*<sp/>dc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxRect<sp/>&amp;<sp/>rect,<sp/><ref refid="class_track" kindref="compound">Track</ref><sp/>*<sp/>t,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>down)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="9973"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="9974"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>bev;</highlight></codeline>
<codeline lineno="9975"><highlight class="normal"><sp/><sp/><sp/>GetMinimizeRect(rect,<sp/>bev);</highlight></codeline>
<codeline lineno="9976"><highlight class="normal"></highlight></codeline>
<codeline lineno="9977"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Clear<sp/>background<sp/>to<sp/>get<sp/>rid<sp/>of<sp/>previous<sp/>arrow</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9978"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a622190f58ed113f5ca45789e8bbec03a" kindref="member">AColor::MediumTrackInfo</ref>(dc,<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>());</highlight></codeline>
<codeline lineno="9979"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;DrawRectangle(bev);</highlight></codeline>
<codeline lineno="9980"><highlight class="normal"></highlight></codeline>
<codeline lineno="9981"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_THEMING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9982"><highlight class="normal"><sp/><sp/><sp/>wxColour<sp/><ref refid="poly-fir_8h_1aafc737ea9ef91f59cf9acd287fb8d085" kindref="member">c</ref><sp/>=<sp/><ref refid="_theme_8cpp_1a778dd1fa4ed7e54e48ec7b65aba2363e" kindref="member">theTheme</ref>.<ref refid="class_theme_base_1a13757bf24e6ed4f5807baa848fa2021c" kindref="member">Colour</ref>(clrTrackPanelText);</highlight></codeline>
<codeline lineno="9983"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetBrush(c);</highlight></codeline>
<codeline lineno="9984"><highlight class="normal"><sp/><sp/><sp/>dc-&gt;SetPen(c);</highlight></codeline>
<codeline lineno="9985"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9986"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a34d81236a6bff41ebf8cf2b1183c847a" kindref="member">AColor::Dark</ref>(dc,<sp/>t-&gt;<ref refid="class_track_1ac01a2b30ea7a2574d724bae023427905" kindref="member">GetSelected</ref>());</highlight></codeline>
<codeline lineno="9987"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9988"><highlight class="normal"></highlight></codeline>
<codeline lineno="9989"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a054ceaee334fe7aeb2600cd300ae4d5e" kindref="member">AColor::Arrow</ref>(*dc,</highlight></codeline>
<codeline lineno="9990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bev.x<sp/>-<sp/>5<sp/>+<sp/>bev.width<sp/>/<sp/>2,</highlight></codeline>
<codeline lineno="9991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bev.y<sp/>-<sp/>2<sp/>+<sp/>bev.height<sp/>/<sp/>2,</highlight></codeline>
<codeline lineno="9992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>10,</highlight></codeline>
<codeline lineno="9993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="class_track_1ac31a25492781bb0cc61e5f544f59b3d5" kindref="member">GetMinimized</ref>());</highlight></codeline>
<codeline lineno="9994"><highlight class="normal"></highlight></codeline>
<codeline lineno="9995"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_a_color_1a9113deb34fdd4021fefe975070b6d2e1" kindref="member">AColor::BevelTrackInfo</ref>(*dc,<sp/>!down,<sp/>bev);</highlight></codeline>
<codeline lineno="9996"><highlight class="normal">}</highlight></codeline>
<codeline lineno="9997"><highlight class="normal"></highlight></codeline>
<codeline lineno="9998"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EXPERIMENTAL_MIDI_OUT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9999"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawVelocitySlider(wxDC<sp/>*dc,<sp/><ref refid="class_note_track" kindref="compound">NoteTrack</ref><sp/>*t,<sp/>wxRect<sp/>rect)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="10000"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="10001"><highlight class="normal"><sp/><sp/><sp/><sp/>wxRect<sp/>gainRect;</highlight></codeline>
<codeline lineno="10002"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>index<sp/>=<sp/>t-&gt;GetIndex();</highlight></codeline>
<codeline lineno="10003"><highlight class="normal"><sp/><sp/><sp/><sp/>EnsureSufficientSliders(index);</highlight></codeline>
<codeline lineno="10004"><highlight class="normal"><sp/><sp/><sp/><sp/>GetGainRect(rect,<sp/>gainRect);</highlight></codeline>
<codeline lineno="10005"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(gainRect.y<sp/>+<sp/>gainRect.height<sp/>&lt;<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>19)<sp/>{</highlight></codeline>
<codeline lineno="10006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mGains[index]-&gt;SetStyle(VEL_SLIDER);</highlight></codeline>
<codeline lineno="10007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GainSlider(index)-&gt;Move(wxPoint(gainRect.x,<sp/>gainRect.y));</highlight></codeline>
<codeline lineno="10008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GainSlider(index)-&gt;Set(t-&gt;GetGain());</highlight></codeline>
<codeline lineno="10009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GainSlider(index)-&gt;OnPaint(*dc,<sp/>t-&gt;GetSelected());</highlight></codeline>
<codeline lineno="10010"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="10011"><highlight class="normal">}</highlight></codeline>
<codeline lineno="10012"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10013"><highlight class="normal"></highlight></codeline>
<codeline lineno="10014"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrackInfo::DrawSliders(wxDC<sp/>*dc,<sp/><ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*t,<sp/>wxRect<sp/>rect,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>captured)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="10015"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="10016"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>sliderRect;</highlight></codeline>
<codeline lineno="10017"><highlight class="normal"></highlight></codeline>
<codeline lineno="10018"><highlight class="normal"><sp/><sp/><sp/>GetGainRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="10019"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sliderRect.y<sp/>+<sp/>sliderRect.height<sp/>&lt;<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>19)<sp/>{</highlight></codeline>
<codeline lineno="10020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>GainSlider(t,<sp/>captured)-&gt;OnPaint(*dc);</highlight></codeline>
<codeline lineno="10021"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="10022"><highlight class="normal"></highlight></codeline>
<codeline lineno="10023"><highlight class="normal"><sp/><sp/><sp/>GetPanRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="10024"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sliderRect.y<sp/>+<sp/>sliderRect.height<sp/>&lt;<sp/>rect.y<sp/>+<sp/>rect.height<sp/>-<sp/>19)<sp/>{</highlight></codeline>
<codeline lineno="10025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>PanSlider(t,<sp/>captured)-&gt;OnPaint(*dc);</highlight></codeline>
<codeline lineno="10026"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="10027"><highlight class="normal">}</highlight></codeline>
<codeline lineno="10028"><highlight class="normal"></highlight></codeline>
<codeline lineno="10029" refid="class_track_info_1a190efcbb5578f98b16b20b193209cf43" refkind="member"><highlight class="normal"><ref refid="class_l_w_slider" kindref="compound">LWSlider</ref><sp/>*<sp/><ref refid="class_track_info_1a190efcbb5578f98b16b20b193209cf43" kindref="member">TrackInfo::GainSlider</ref>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*t,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>captured)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="10030"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="10031"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>,<sp/>t-&gt;<ref refid="class_track_1adefbd93c6cbde70d082a64729cfc74d8" kindref="member">GetY</ref>()<sp/>-<sp/>pParent-&gt;GetViewInfo()-&gt;vpos<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>,<sp/>1,<sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>());</highlight></codeline>
<codeline lineno="10032"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>sliderRect;</highlight></codeline>
<codeline lineno="10033"><highlight class="normal"><sp/><sp/><sp/>GetGainRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="10034"><highlight class="normal"></highlight></codeline>
<codeline lineno="10035"><highlight class="normal"><sp/><sp/><sp/>wxPoint<sp/>pos<sp/>=<sp/>sliderRect.GetPosition();</highlight></codeline>
<codeline lineno="10036"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>gain<sp/>=<sp/>t-&gt;<ref refid="class_wave_track_1a2f8be921b1e2c2183e3a3eb367eb3416" kindref="member">GetGain</ref>();</highlight></codeline>
<codeline lineno="10037"><highlight class="normal"></highlight></codeline>
<codeline lineno="10038"><highlight class="normal"><sp/><sp/><sp/>mGain-&gt;Move(pos);</highlight></codeline>
<codeline lineno="10039"><highlight class="normal"><sp/><sp/><sp/>mGain-&gt;Set(gain);</highlight></codeline>
<codeline lineno="10040"><highlight class="normal"><sp/><sp/><sp/>mGainCaptured-&gt;Move(pos);</highlight></codeline>
<codeline lineno="10041"><highlight class="normal"><sp/><sp/><sp/>mGainCaptured-&gt;Set(gain);</highlight></codeline>
<codeline lineno="10042"><highlight class="normal"></highlight></codeline>
<codeline lineno="10043"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>captured<sp/>?<sp/>mGainCaptured<sp/>:<sp/>mGain;</highlight></codeline>
<codeline lineno="10044"><highlight class="normal">}</highlight></codeline>
<codeline lineno="10045"><highlight class="normal"></highlight></codeline>
<codeline lineno="10046" refid="class_track_info_1ac92f8d630b86e38deade6c1b55d166dc" refkind="member"><highlight class="normal"><ref refid="class_l_w_slider" kindref="compound">LWSlider</ref><sp/>*<sp/><ref refid="class_track_info_1ac92f8d630b86e38deade6c1b55d166dc" kindref="member">TrackInfo::PanSlider</ref>(<ref refid="class_wave_track" kindref="compound">WaveTrack</ref><sp/>*t,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>captured)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="10047"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="10048"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>rect(<ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796ae714a9264332af8cc1842e49271efd32" kindref="member">kLeftInset</ref>,<sp/>t-&gt;<ref refid="class_track_1adefbd93c6cbde70d082a64729cfc74d8" kindref="member">GetY</ref>()<sp/>-<sp/>pParent-&gt;GetViewInfo()-&gt;vpos<sp/>+<sp/><ref refid="_track_panel_8cpp_1a7c35be1de655e733eaac059ccd76f796a2b662f69b0ee4c7fabe0992ae06f45c1" kindref="member">kTopInset</ref>,<sp/>1,<sp/>t-&gt;<ref refid="class_track_1aa88d6a8dabe0be72aa34bdebdc41d07b" kindref="member">GetHeight</ref>());</highlight></codeline>
<codeline lineno="10049"><highlight class="normal"><sp/><sp/><sp/>wxRect<sp/>sliderRect;</highlight></codeline>
<codeline lineno="10050"><highlight class="normal"><sp/><sp/><sp/>GetPanRect(rect,<sp/>sliderRect);</highlight></codeline>
<codeline lineno="10051"><highlight class="normal"></highlight></codeline>
<codeline lineno="10052"><highlight class="normal"><sp/><sp/><sp/>wxPoint<sp/>pos<sp/>=<sp/>sliderRect.GetPosition();</highlight></codeline>
<codeline lineno="10053"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>pan<sp/>=<sp/>t-&gt;<ref refid="class_wave_track_1a39fb6133b9ead187e3eb8127fd8966c0" kindref="member">GetPan</ref>();</highlight></codeline>
<codeline lineno="10054"><highlight class="normal"></highlight></codeline>
<codeline lineno="10055"><highlight class="normal"><sp/><sp/><sp/>mPan-&gt;Move(pos);</highlight></codeline>
<codeline lineno="10056"><highlight class="normal"><sp/><sp/><sp/>mPan-&gt;Set(pan);</highlight></codeline>
<codeline lineno="10057"><highlight class="normal"><sp/><sp/><sp/>mPanCaptured-&gt;Move(pos);</highlight></codeline>
<codeline lineno="10058"><highlight class="normal"><sp/><sp/><sp/>mPanCaptured-&gt;Set(pan);</highlight></codeline>
<codeline lineno="10059"><highlight class="normal"></highlight></codeline>
<codeline lineno="10060"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>captured<sp/>?<sp/>mPanCaptured<sp/>:<sp/>mPan;</highlight></codeline>
<codeline lineno="10061"><highlight class="normal">}</highlight></codeline>
<codeline lineno="10062"><highlight class="normal"></highlight></codeline>
<codeline lineno="10063"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="class_track_panel" kindref="compound">TrackPanel</ref><sp/>*<sp/>TrackPanelFactory(wxWindow<sp/>*<sp/>parent,</highlight></codeline>
<codeline lineno="10064"><highlight class="normal"><sp/><sp/><sp/>wxWindowID<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="10065"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxPoint<sp/>&amp;<sp/>pos,</highlight></codeline>
<codeline lineno="10066"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxSize<sp/>&amp;<sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref>,</highlight></codeline>
<codeline lineno="10067"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_list" kindref="compound">TrackList</ref><sp/>*<sp/>tracks,</highlight></codeline>
<codeline lineno="10068"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_view_info" kindref="compound">ViewInfo</ref><sp/>*<sp/>viewInfo,</highlight></codeline>
<codeline lineno="10069"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_track_panel_listener" kindref="compound">TrackPanelListener</ref><sp/>*<sp/>listener,</highlight></codeline>
<codeline lineno="10070"><highlight class="normal"><sp/><sp/><sp/><ref refid="class_adorned_ruler_panel" kindref="compound">AdornedRulerPanel</ref><sp/>*<sp/>ruler)</highlight></codeline>
<codeline lineno="10071"><highlight class="normal">{</highlight></codeline>
<codeline lineno="10072"><highlight class="normal"><sp/><sp/><sp/>wxASSERT(parent);<sp/></highlight><highlight class="comment">//<sp/>to<sp/>justify<sp/>safenew</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10073"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_audacity_8h_1a5bfa31d993e8d629ec6ebdeaa41b5955" kindref="member">safenew</ref><sp/><ref refid="class_track_panel_1a1b553c63e4513509a67e5a63eb61fffa" kindref="member">TrackPanel</ref>(</highlight></codeline>
<codeline lineno="10074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>parent,</highlight></codeline>
<codeline lineno="10075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="10076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pos,</highlight></codeline>
<codeline lineno="10077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>size,</highlight></codeline>
<codeline lineno="10078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tracks,</highlight></codeline>
<codeline lineno="10079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>viewInfo,</highlight></codeline>
<codeline lineno="10080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>listener,</highlight></codeline>
<codeline lineno="10081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ruler);</highlight></codeline>
<codeline lineno="10082"><highlight class="normal">}</highlight></codeline>
<codeline lineno="10083"><highlight class="normal"></highlight></codeline>
<codeline lineno="10084"><highlight class="normal"></highlight></codeline>
<codeline lineno="10085"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Declare<sp/>the<sp/>static<sp/>factory<sp/>function.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10086"><highlight class="normal"></highlight><highlight class="comment">//<sp/>We<sp/>defined<sp/>it<sp/>in<sp/>the<sp/>class.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10087"><highlight class="normal"><ref refid="class_track_panel" kindref="compound">TrackPanel</ref><sp/>*(*TrackPanel::FactoryFunction)(</highlight></codeline>
<codeline lineno="10088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxWindow<sp/>*<sp/>parent,</highlight></codeline>
<codeline lineno="10089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wxWindowID<sp/>id,</highlight></codeline>
<codeline lineno="10090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxPoint<sp/>&amp;<sp/>pos,</highlight></codeline>
<codeline lineno="10091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>wxSize<sp/>&amp;<sp/><ref refid="group__lavu__mem_1ga854352f53b148adc24983a58a1866d66" kindref="member">size</ref>,</highlight></codeline>
<codeline lineno="10092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_list" kindref="compound">TrackList</ref><sp/>*<sp/>tracks,</highlight></codeline>
<codeline lineno="10093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_view_info" kindref="compound">ViewInfo</ref><sp/>*<sp/>viewInfo,</highlight></codeline>
<codeline lineno="10094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_track_panel_listener" kindref="compound">TrackPanelListener</ref><sp/>*<sp/>listener,</highlight></codeline>
<codeline lineno="10095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_adorned_ruler_panel" kindref="compound">AdornedRulerPanel</ref><sp/>*<sp/>ruler)<sp/>=<sp/>TrackPanelFactory;</highlight></codeline>
<codeline lineno="10096"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/src/TrackPanel.cpp"/>
  </compounddef>
</doxygen>
