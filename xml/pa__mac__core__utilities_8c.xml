<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="pa__mac__core__utilities_8c" kind="file" language="C++">
    <compoundname>pa_mac_core_utilities.c</compoundname>
    <includes refid="pa__mac__core__utilities_8h" local="yes">pa_mac_core_utilities.h</includes>
    <includes refid="pa__mac__core__internal_8h" local="yes">pa_mac_core_internal.h</includes>
    <includes local="no">libkern/OSAtomic.h</includes>
    <includes local="no">strings.h</includes>
    <includes local="no">pthread.h</includes>
    <includes refid="win_2_projects_2libsndfile_2sys_2time_8h" local="no">sys/time.h</includes>
    <incdepgraph>
      <node id="29885">
        <label>CoreAudio/CoreAudio.h</label>
      </node>
      <node id="29884">
        <label>pa_mac_core_internal.h</label>
        <link refid="pa__mac__core__internal_8h"/>
        <childnode refid="29885" relation="include">
        </childnode>
        <childnode refid="29886" relation="include">
        </childnode>
        <childnode refid="29882" relation="include">
        </childnode>
        <childnode refid="29883" relation="include">
        </childnode>
        <childnode refid="29880" relation="include">
        </childnode>
        <childnode refid="29881" relation="include">
        </childnode>
        <childnode refid="29887" relation="include">
        </childnode>
        <childnode refid="29888" relation="include">
        </childnode>
        <childnode refid="29889" relation="include">
        </childnode>
        <childnode refid="29890" relation="include">
        </childnode>
        <childnode refid="29891" relation="include">
        </childnode>
        <childnode refid="29895" relation="include">
        </childnode>
        <childnode refid="29896" relation="include">
        </childnode>
      </node>
      <node id="29877">
        <label>C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c</label>
        <link refid="pa_mac_core_utilities.c"/>
        <childnode refid="29878" relation="include">
        </childnode>
        <childnode refid="29884" relation="include">
        </childnode>
        <childnode refid="29897" relation="include">
        </childnode>
        <childnode refid="29898" relation="include">
        </childnode>
        <childnode refid="29879" relation="include">
        </childnode>
        <childnode refid="29899" relation="include">
        </childnode>
      </node>
      <node id="29887">
        <label>pa_hostapi.h</label>
        <link refid="pa__hostapi_8h"/>
        <childnode refid="29880" relation="include">
        </childnode>
      </node>
      <node id="29878">
        <label>pa_mac_core_utilities.h</label>
        <link refid="pa__mac__core__utilities_8h"/>
        <childnode refid="29879" relation="include">
        </childnode>
        <childnode refid="29880" relation="include">
        </childnode>
        <childnode refid="29881" relation="include">
        </childnode>
        <childnode refid="29882" relation="include">
        </childnode>
        <childnode refid="29883" relation="include">
        </childnode>
      </node>
      <node id="29889">
        <label>pa_allocation.h</label>
        <link refid="pa__allocation_8h"/>
      </node>
      <node id="29891">
        <label>pa_process.h</label>
        <link refid="pa__process_8h"/>
        <childnode refid="29880" relation="include">
        </childnode>
        <childnode refid="29892" relation="include">
        </childnode>
        <childnode refid="29893" relation="include">
        </childnode>
      </node>
      <node id="29897">
        <label>libkern/OSAtomic.h</label>
      </node>
      <node id="29890">
        <label>pa_cpuload.h</label>
        <link refid="pa__cpuload_8h"/>
      </node>
      <node id="29886">
        <label>CoreServices/CoreServices.h</label>
      </node>
      <node id="29882">
        <label>AudioUnit/AudioUnit.h</label>
      </node>
      <node id="29879">
        <label>pthread.h</label>
      </node>
      <node id="29883">
        <label>AudioToolbox/AudioToolbox.h</label>
      </node>
      <node id="29893">
        <label>pa_dither.h</label>
        <link refid="pa__dither_8h"/>
        <childnode refid="29894" relation="include">
        </childnode>
      </node>
      <node id="29895">
        <label>pa_ringbuffer.h</label>
        <link refid="pa__ringbuffer_8h"/>
      </node>
      <node id="29880">
        <label>portaudio.h</label>
        <link refid="portaudio_8h"/>
      </node>
      <node id="29888">
        <label>pa_stream.h</label>
        <link refid="pa__stream_8h"/>
        <childnode refid="29880" relation="include">
        </childnode>
      </node>
      <node id="29898">
        <label>strings.h</label>
      </node>
      <node id="29894">
        <label>pa_types.h</label>
        <link refid="pa__types_8h"/>
      </node>
      <node id="29892">
        <label>pa_converters.h</label>
        <link refid="pa__converters_8h"/>
        <childnode refid="29880" relation="include">
        </childnode>
      </node>
      <node id="29899">
        <label>sys/time.h</label>
        <link refid="win_2_projects_2libsndfile_2sys_2time_8h"/>
      </node>
      <node id="29896">
        <label>pa_mac_core_blocking.h</label>
        <link refid="pa__mac__core__blocking_8h"/>
        <childnode refid="29895" relation="include">
        </childnode>
        <childnode refid="29880" relation="include">
        </childnode>
        <childnode refid="29878" relation="include">
        </childnode>
      </node>
      <node id="29881">
        <label>pa_util.h</label>
        <link refid="pa__util_8h"/>
        <childnode refid="29880" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innerclass refid="struct_pa_mac_x_run_list_node__s" prot="public">PaMacXRunListNode_s</innerclass>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="pa__mac__core__utilities_8c_1a7422eb79482bd9b8a3724250f63c41b7" prot="public" static="no">
        <type>struct <ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode_s</ref></type>
        <definition>typedef struct PaMacXRunListNode_s PaMacXRunListNode</definition>
        <argsstring></argsstring>
        <name>PaMacXRunListNode</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="522" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="600" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="pa__mac__core__utilities_8c_1a7180aa39590b06d40e1d087a4df8a8d6" prot="public" static="yes" mutable="no">
        <type><ref refid="pa__mac__core__utilities_8c_1a7422eb79482bd9b8a3724250f63c41b7" kindref="member">PaMacXRunListNode</ref></type>
        <definition>PaMacXRunListNode firstXRunListNode</definition>
        <argsstring></argsstring>
        <name>firstXRunListNode</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Always empty, so that it can always be the one returned by addToXRunListenerList. note that it&apos;s not a pointer. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="604" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="604" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__mac__core__utilities_8c_1a4d634e132cf062a8cdce4bc5df958ec0" prot="public" static="yes" mutable="no">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int xRunListSize</definition>
        <argsstring></argsstring>
        <name>xRunListSize</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="605" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="605" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pa__mac__core__utilities_8c_1a0cfeb426e745aea2d7a941259d872f26" prot="public" static="yes" mutable="no">
        <type>pthread_mutex_t</type>
        <definition>pthread_mutex_t xrunMutex</definition>
        <argsstring></argsstring>
        <name>xrunMutex</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="606" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="606" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a76322f701d584e5fc668348c209a73c9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaMacCore_SetUnixError</definition>
        <argsstring>(int err, int line)</argsstring>
        <name>PaMacCore_SetUnixError</name>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>err</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>line</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
<para>Map Unix error to PaError. Pretty much the only one that maps is ENOMEM. </para>        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="66" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="66" bodyend="90"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a13501102f029a53953c3f59ddc934c80" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaMacCore_SetError</definition>
        <argsstring>(OSStatus error, int line, int isError)</argsstring>
        <name>PaMacCore_SetError</name>
        <param>
          <type>OSStatus</type>
          <declname>error</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>line</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>isError</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="95" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="95" bodyend="224"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a61fdbb7fe209deca10dc73721c91fee4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>long</type>
        <definition>long computeRingBufferSize</definition>
        <argsstring>(const PaStreamParameters *inputParameters, const PaStreamParameters *outputParameters, long inputFramesPerBuffer, long outputFramesPerBuffer, double sampleRate)</argsstring>
        <name>computeRingBufferSize</name>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>inputParameters</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>outputParameters</declname>
        </param>
        <param>
          <type>long</type>
          <declname>inputFramesPerBuffer</declname>
        </param>
        <param>
          <type>long</type>
          <declname>outputFramesPerBuffer</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="240" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="240" bodyend="295"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1abac1dc2bc8f674a0c0600e11756434b1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>OSStatus</type>
        <definition>OSStatus propertyProc</definition>
        <argsstring>(AudioDeviceID inDevice, UInt32 inChannel, Boolean isInput, AudioDevicePropertyID inPropertyID, void *inClientData)</argsstring>
        <name>propertyProc</name>
        <param>
          <type>AudioDeviceID</type>
          <declname>inDevice</declname>
        </param>
        <param>
          <type>UInt32</type>
          <declname>inChannel</declname>
        </param>
        <param>
          <type>Boolean</type>
          <declname>isInput</declname>
        </param>
        <param>
          <type>AudioDevicePropertyID</type>
          <declname>inPropertyID</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>inClientData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="310" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="310" bodyend="319"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a1c6368ba4f896a08088d392adfae2224" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError AudioDeviceSetPropertyNowAndWaitForChange</definition>
        <argsstring>(AudioDeviceID inDevice, UInt32 inChannel, Boolean isInput, AudioDevicePropertyID inPropertyID, UInt32 inPropertyDataSize, const void *inPropertyData, void *outPropertyData)</argsstring>
        <name>AudioDeviceSetPropertyNowAndWaitForChange</name>
        <param>
          <type>AudioDeviceID</type>
          <declname>inDevice</declname>
        </param>
        <param>
          <type>UInt32</type>
          <declname>inChannel</declname>
        </param>
        <param>
          <type>Boolean</type>
          <declname>isInput</declname>
        </param>
        <param>
          <type>AudioDevicePropertyID</type>
          <declname>inPropertyID</declname>
        </param>
        <param>
          <type>UInt32</type>
          <declname>inPropertyDataSize</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>inPropertyData</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>outPropertyData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="330" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="330" bodyend="407"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a0f6bb3a8d2c8f1664a69e14240c1294a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError setBestSampleRateForDevice</definition>
        <argsstring>(const AudioDeviceID device, const bool isOutput, const bool requireExact, const Float64 desiredSrate)</argsstring>
        <name>setBestSampleRateForDevice</name>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> AudioDeviceID</type>
          <declname>device</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>isOutput</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>requireExact</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> Float64</type>
          <declname>desiredSrate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="418" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="418" bodyend="510"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a525354d1368777e71d58a88be42277b1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError setBestFramesPerBuffer</definition>
        <argsstring>(const AudioDeviceID device, const bool isOutput, UInt32 requestedFramesPerBuffer, UInt32 *actualFramesPerBuffer)</argsstring>
        <name>setBestFramesPerBuffer</name>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> AudioDeviceID</type>
          <declname>device</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>isOutput</declname>
        </param>
        <param>
          <type>UInt32</type>
          <declname>requestedFramesPerBuffer</declname>
        </param>
        <param>
          <type>UInt32 *</type>
          <declname>actualFramesPerBuffer</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="522" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="522" bodyend="587"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a6e0d12a5c5acae6fac007f5ea96f96a3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>OSStatus</type>
        <definition>OSStatus xrunCallback</definition>
        <argsstring>(AudioDeviceID inDevice, UInt32 inChannel, Boolean isInput, AudioDevicePropertyID inPropertyID, void *inClientData)</argsstring>
        <name>xrunCallback</name>
        <param>
          <type>AudioDeviceID</type>
          <declname>inDevice</declname>
        </param>
        <param>
          <type>UInt32</type>
          <declname>inChannel</declname>
        </param>
        <param>
          <type>Boolean</type>
          <declname>isInput</declname>
        </param>
        <param>
          <type>AudioDevicePropertyID</type>
          <declname>inPropertyID</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>inClientData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="608" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="608" bodyend="642"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a9765dfc2c7118a68c7d51a3357236e9f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int initializeXRunListenerList</definition>
        <argsstring>()</argsstring>
        <name>initializeXRunListenerList</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>returns zero on success or a unix style error code. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="644" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="644" bodyend="649"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a531c51cac91b4b9d61d16a12669cdad4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int destroyXRunListenerList</definition>
        <argsstring>()</argsstring>
        <name>destroyXRunListenerList</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>returns zero on success or a unix style error code. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="650" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="650" bodyend="661"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1adc104e6677780755cdb1c6ed7021fb45" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
        <definition>void* addToXRunListenerList</definition>
        <argsstring>(void *stream)</argsstring>
        <name>addToXRunListenerList</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns the list, so that it can be passed to CorAudio. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="663" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="663" bodyend="676"/>
      </memberdef>
      <memberdef kind="function" id="pa__mac__core__utilities_8c_1a632eeced2955b271af52e8731e3a49ee" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
        <definition>int removeFromXRunListenerList</definition>
        <argsstring>(void *stream)</argsstring>
        <name>removeFromXRunListenerList</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns the number of Listeners in the list remaining. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" line="678" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c" bodystart="678" bodyend="700"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Helper<sp/>and<sp/>utility<sp/>functions<sp/>for<sp/>pa_mac_core.c<sp/>(Apple<sp/>AUHAL<sp/>implementation)</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>PortAudio<sp/>Portable<sp/>Real-Time<sp/>Audio<sp/>Library</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>Latest<sp/>Version<sp/>at:<sp/>http://www.portaudio.com</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>Written<sp/>by<sp/>Bjorn<sp/>Roche<sp/>of<sp/>XO<sp/>Audio<sp/>LLC,<sp/>from<sp/>PA<sp/>skeleton<sp/>code.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>Portions<sp/>copied<sp/>from<sp/>code<sp/>by<sp/>Dominic<sp/>Mazzoni<sp/>(who<sp/>wrote<sp/>a<sp/>HAL<sp/>implementation)</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>Dominic&apos;s<sp/>code<sp/>was<sp/>based<sp/>on<sp/>code<sp/>by<sp/>Phil<sp/>Burk,<sp/>Darren<sp/>Gibbs,</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/>Gord<sp/>Peters,<sp/>Stephane<sp/>Letz,<sp/>and<sp/>Greg<sp/>Pfiel.</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>The<sp/>following<sp/>people<sp/>also<sp/>deserve<sp/>acknowledgements:</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/>Olivier<sp/>Tristan<sp/>for<sp/>feedback<sp/>and<sp/>testing</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>Glenn<sp/>Zelniker<sp/>and<sp/>Z-Systems<sp/>engineering<sp/>for<sp/>sponsoring<sp/>the<sp/>Blocking<sp/>I/O</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>interface.</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>Based<sp/>on<sp/>the<sp/>Open<sp/>Source<sp/>API<sp/>proposed<sp/>by<sp/>Ross<sp/>Bencina</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>1999-2002<sp/>Ross<sp/>Bencina,<sp/>Phil<sp/>Burk</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>Permission<sp/>is<sp/>hereby<sp/>granted,<sp/>free<sp/>of<sp/>charge,<sp/>to<sp/>any<sp/>person<sp/>obtaining</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/>a<sp/>copy<sp/>of<sp/>this<sp/>software<sp/>and<sp/>associated<sp/>documentation<sp/>files</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>(the<sp/>&quot;Software&quot;),<sp/>to<sp/>deal<sp/>in<sp/>the<sp/>Software<sp/>without<sp/>restriction,</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>including<sp/>without<sp/>limitation<sp/>the<sp/>rights<sp/>to<sp/>use,<sp/>copy,<sp/>modify,<sp/>merge,</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>publish,<sp/>distribute,<sp/>sublicense,<sp/>and/or<sp/>sell<sp/>copies<sp/>of<sp/>the<sp/>Software,</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/>and<sp/>to<sp/>permit<sp/>persons<sp/>to<sp/>whom<sp/>the<sp/>Software<sp/>is<sp/>furnished<sp/>to<sp/>do<sp/>so,</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/>subject<sp/>to<sp/>the<sp/>following<sp/>conditions:</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*<sp/>The<sp/>above<sp/>copyright<sp/>notice<sp/>and<sp/>this<sp/>permission<sp/>notice<sp/>shall<sp/>be</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/>included<sp/>in<sp/>all<sp/>copies<sp/>or<sp/>substantial<sp/>portions<sp/>of<sp/>the<sp/>Software.</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/>THE<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>&quot;AS<sp/>IS&quot;,<sp/>WITHOUT<sp/>WARRANTY<sp/>OF<sp/>ANY<sp/>KIND,</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*<sp/>EXPRESS<sp/>OR<sp/>IMPLIED,<sp/>INCLUDING<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO<sp/>THE<sp/>WARRANTIES<sp/>OF</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY,<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE<sp/>AND<sp/>NONINFRINGEMENT.</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/>*<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE<sp/>AUTHORS<sp/>OR<sp/>COPYRIGHT<sp/>HOLDERS<sp/>BE<sp/>LIABLE<sp/>FOR</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/>*<sp/>ANY<sp/>CLAIM,<sp/>DAMAGES<sp/>OR<sp/>OTHER<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>AN<sp/>ACTION<sp/>OF</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/>*<sp/>CONTRACT,<sp/>TORT<sp/>OR<sp/>OTHERWISE,<sp/>ARISING<sp/>FROM,<sp/>OUT<sp/>OF<sp/>OR<sp/>IN<sp/>CONNECTION</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/>*<sp/>WITH<sp/>THE<sp/>SOFTWARE<sp/>OR<sp/>THE<sp/>USE<sp/>OR<sp/>OTHER<sp/>DEALINGS<sp/>IN<sp/>THE<sp/>SOFTWARE.</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/>*<sp/>The<sp/>text<sp/>above<sp/>constitutes<sp/>the<sp/>entire<sp/>PortAudio<sp/>license;<sp/>however,<sp/></highlight></codeline>
<codeline lineno="45"><highlight class="comment"><sp/>*<sp/>the<sp/>PortAudio<sp/>community<sp/>also<sp/>makes<sp/>the<sp/>following<sp/>non-binding<sp/>requests:</highlight></codeline>
<codeline lineno="46"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="47"><highlight class="comment"><sp/>*<sp/>Any<sp/>person<sp/>wishing<sp/>to<sp/>distribute<sp/>modifications<sp/>to<sp/>the<sp/>Software<sp/>is</highlight></codeline>
<codeline lineno="48"><highlight class="comment"><sp/>*<sp/>requested<sp/>to<sp/>send<sp/>the<sp/>modifications<sp/>to<sp/>the<sp/>original<sp/>developer<sp/>so<sp/>that</highlight></codeline>
<codeline lineno="49"><highlight class="comment"><sp/>*<sp/>they<sp/>can<sp/>be<sp/>incorporated<sp/>into<sp/>the<sp/>canonical<sp/>version.<sp/>It<sp/>is<sp/>also<sp/></highlight></codeline>
<codeline lineno="50"><highlight class="comment"><sp/>*<sp/>requested<sp/>that<sp/>these<sp/>non-binding<sp/>requests<sp/>be<sp/>included<sp/>along<sp/>with<sp/>the<sp/></highlight></codeline>
<codeline lineno="51"><highlight class="comment"><sp/>*<sp/>license<sp/>above.</highlight></codeline>
<codeline lineno="52"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__mac__core__utilities_8h" kindref="compound">pa_mac_core_utilities.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__mac__core__internal_8h" kindref="compound">pa_mac_core_internal.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;libkern/OSAtomic.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;strings.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;pthread.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="win_2_projects_2libsndfile_2sys_2time_8h" kindref="compound">sys/time.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66" refid="pa__mac__core__utilities_8h_1a76322f701d584e5fc668348c209a73c9" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__utilities_8c_1a76322f701d584e5fc668348c209a73c9" kindref="member">PaMacCore_SetUnixError</ref>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>err,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="seqread_8c_1aad9ebcdde542d8b2075615388ff15a9c" kindref="member">line</ref><sp/>)</highlight></codeline>
<codeline lineno="67"><highlight class="normal">{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ret;</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*errorText;</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>==<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/>errorText<sp/>=<sp/>strerror(<sp/>err<sp/>);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>==<sp/>ENOMEM<sp/>)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a27513a24b6149b50414c8b8bf0220533" kindref="member">DBUG</ref>((</highlight><highlight class="stringliteral">&quot;%d<sp/>on<sp/>line<sp/>%d:<sp/>msg=&apos;%s&apos;\n&quot;</highlight><highlight class="normal">,<sp/>err,<sp/>line,<sp/>errorText));</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__front_8c_1a9c3ad627c13c1d695fef054c216667f7" kindref="member">PaUtil_SetLastHostErrorInfo</ref>(<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa7295ccb885c47b70c829f8236161d1a" kindref="member">paCoreAudio</ref>,<sp/>err,<sp/>errorText<sp/>);</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="90"><highlight class="normal">}</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="93"><highlight class="comment"><sp/>*<sp/>Translates<sp/>MacOS<sp/>generated<sp/>errors<sp/>into<sp/>PaErrors</highlight></codeline>
<codeline lineno="94"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95" refid="pa__mac__core__utilities_8h_1a13501102f029a53953c3f59ddc934c80" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__utilities_8c_1a13501102f029a53953c3f59ddc934c80" kindref="member">PaMacCore_SetError</ref>(OSStatus<sp/>error,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="seqread_8c_1aad9ebcdde542d8b2075615388ff15a9c" kindref="member">line</ref>,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>isError)</highlight></codeline>
<codeline lineno="96"><highlight class="normal">{</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*FIXME:<sp/>still<sp/>need<sp/>to<sp/>handle<sp/>possible<sp/>ComponentResult<sp/>values.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/><sp/><sp/><sp/>unfortunately,<sp/>they<sp/>don&apos;t<sp/>seem<sp/>to<sp/>be<sp/>documented<sp/>anywhere.*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result;</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*errorType;<sp/></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*errorText;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(error)<sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareNoError:</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareNotRunningError:</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Hardware<sp/>Not<sp/>Running&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareUnspecifiedError:<sp/></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Unspecified<sp/>Audio<sp/>Hardware<sp/>Error&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareUnknownPropertyError:</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Hardware:<sp/>Unknown<sp/>Property&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareBadPropertySizeError:</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Hardware:<sp/>Bad<sp/>Property<sp/>Size&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareIllegalOperationError:<sp/></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Hardware:<sp/>Illegal<sp/>Operation&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareBadDeviceError:</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Hardware:<sp/>Bad<sp/>Device&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareBadStreamError:</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Hardware:<sp/>BadStream&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aef50bc6456d8bcbd94d1690dfb8d447a" kindref="member">paBadStreamPtr</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioHardwareUnsupportedOperationError:</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Hardware:<sp/>Unsupported<sp/>Operation&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioDeviceUnsupportedFormatError:</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Device:<sp/>Unsupported<sp/>Format&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioDevicePermissionsError:</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Device:<sp/>Permissions<sp/>Error&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a467dac712e45745d8b0d8cd429fd1a01" kindref="member">paDeviceUnavailable</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Audio<sp/>Unit<sp/>Errors:<sp/>http://developer.apple.com/documentation/MusicAudio/Reference/CoreAudio/audio_units/chapter_5_section_3.html<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_InvalidProperty:</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Invalid<sp/>Property&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_InvalidParameter:</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Invalid<sp/>Parameter&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_NoConnection:</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>No<sp/>Connection&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_FailedInitialization:</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Initialization<sp/>Failed&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_TooManyFramesToProcess:</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Too<sp/>Many<sp/>Frames&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_IllegalInstrument:</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Illegal<sp/>Instrument&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_InstrumentTypeNotFound:</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Instrument<sp/>Type<sp/>Not<sp/>Found&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_InvalidFile:</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Invalid<sp/>File&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_UnknownFileType:</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Unknown<sp/>File<sp/>Type&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_FileNotSpecified:</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>File<sp/>Not<sp/>Specified&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_FormatNotSupported:</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Format<sp/>Not<sp/>Supported&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_Uninitialized:</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Unitialized&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_InvalidScope:</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Invalid<sp/>Scope&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_PropertyNotWritable:</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>PropertyNotWritable&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_InvalidPropertyValue:</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Invalid<sp/>Property<sp/>Value&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_PropertyNotInUse:</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Property<sp/>Not<sp/>In<sp/>Use&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_Initialized:</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Initialized&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_InvalidOfflineRender:</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Invalid<sp/>Offline<sp/>Render&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_Unauthorized:</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>Unauthorized&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>kAudioUnitErr_CannotDoInCurrentContext:</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Audio<sp/>Unit:<sp/>cannot<sp/>do<sp/>in<sp/>current<sp/>context&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorText<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Unknown<sp/>Error&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isError)</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorType<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Error&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errorType<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Warning&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="sndfile__save_8m_1a4b99ff73a8a869319570237b5c57ab03" kindref="member">str</ref>[20];</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>see<sp/>if<sp/>it<sp/>appears<sp/>to<sp/>be<sp/>a<sp/>4-char-code</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>*(UInt32<sp/>*)(str<sp/>+<sp/>1)<sp/>=<sp/>CFSwapInt32HostToBig(error);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isprint(str[1])<sp/>&amp;&amp;<sp/>isprint(str[2])<sp/>&amp;&amp;<sp/>isprint(str[3])<sp/>&amp;&amp;<sp/>isprint(str[4]))</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str[0]<sp/>=<sp/>str[5]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str[6]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>no,<sp/>format<sp/>it<sp/>as<sp/>an<sp/>integer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf(str,<sp/></highlight><highlight class="stringliteral">&quot;%d&quot;</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)error);</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a27513a24b6149b50414c8b8bf0220533" kindref="member">DBUG</ref>((</highlight><highlight class="stringliteral">&quot;%s<sp/>on<sp/>line<sp/>%d:<sp/>err=&apos;%s&apos;,<sp/>msg=%s\n&quot;</highlight><highlight class="normal">,<sp/>errorType,<sp/>line,<sp/>str,<sp/>errorText));</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__front_8c_1a9c3ad627c13c1d695fef054c216667f7" kindref="member">PaUtil_SetLastHostErrorInfo</ref>(<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aeaa7295ccb885c47b70c829f8236161d1a" kindref="member">paCoreAudio</ref>,<sp/>error,<sp/>errorText<sp/>);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="224"><highlight class="normal">}</highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="227"><highlight class="comment"><sp/>*<sp/>This<sp/>function<sp/>computes<sp/>an<sp/>appropriate<sp/>ring<sp/>buffer<sp/>size<sp/>given</highlight></codeline>
<codeline lineno="228"><highlight class="comment"><sp/>*<sp/>a<sp/>requested<sp/>latency<sp/>(in<sp/>seconds),<sp/>sample<sp/>rate<sp/>and<sp/>framesPerBuffer.</highlight></codeline>
<codeline lineno="229"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="230"><highlight class="comment"><sp/>*<sp/>The<sp/>returned<sp/>ringBufferSize<sp/>is<sp/>computed<sp/>using<sp/>the<sp/>following</highlight></codeline>
<codeline lineno="231"><highlight class="comment"><sp/>*<sp/>constraints:</highlight></codeline>
<codeline lineno="232"><highlight class="comment"><sp/>*<sp/><sp/><sp/>-<sp/>it<sp/>must<sp/>be<sp/>at<sp/>least<sp/>4.</highlight></codeline>
<codeline lineno="233"><highlight class="comment"><sp/>*<sp/><sp/><sp/>-<sp/>it<sp/>must<sp/>be<sp/>at<sp/>least<sp/>3x<sp/>framesPerBuffer.</highlight></codeline>
<codeline lineno="234"><highlight class="comment"><sp/>*<sp/><sp/><sp/>-<sp/>it<sp/>must<sp/>be<sp/>at<sp/>least<sp/>2x<sp/>the<sp/>suggestedLatency.</highlight></codeline>
<codeline lineno="235"><highlight class="comment"><sp/>*<sp/><sp/><sp/>-<sp/>it<sp/>must<sp/>be<sp/>a<sp/>power<sp/>of<sp/>2.</highlight></codeline>
<codeline lineno="236"><highlight class="comment"><sp/>*<sp/>This<sp/>function<sp/>attempts<sp/>to<sp/>compute<sp/>the<sp/>minimum<sp/>such<sp/>size.</highlight></codeline>
<codeline lineno="237"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="238"><highlight class="comment"><sp/>*<sp/>FEEDBACK:<sp/>too<sp/>liberal/conservative/another<sp/>way?</highlight></codeline>
<codeline lineno="239"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="240" refid="pa__mac__core__utilities_8h_1a61fdbb7fe209deca10dc73721c91fee4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8c_1a61fdbb7fe209deca10dc73721c91fee4" kindref="member">computeRingBufferSize</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>inputFramesPerBuffer,</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>outputFramesPerBuffer,</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>)</highlight></codeline>
<codeline lineno="245"><highlight class="normal">{</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>ringSize;</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>index;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="sysex_8c_1a9c5bf07170b5d91cfb44d4bfd0517128" kindref="member">latency</ref><sp/>;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerBuffer<sp/>;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a9d46dffb96d1a89d4822fc2c38dfeb36" kindref="member">VVDBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;computeRingBufferSize()\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>inputParameters<sp/>||<sp/>outputParameters<sp/>);</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>outputParameters<sp/>&amp;&amp;<sp/>inputParameters<sp/>)</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>latency<sp/>=<sp/><ref refid="libflac_2src_2lib_f_l_a_c_2include_2private_2macros_8h_1aacc3ee1a7f283f8ef65cea31f4436a95" kindref="member">MAX</ref>(<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>,<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref><sp/>);</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBuffer<sp/>=<sp/><ref refid="libflac_2src_2lib_f_l_a_c_2include_2private_2macros_8h_1aacc3ee1a7f283f8ef65cea31f4436a95" kindref="member">MAX</ref>(<sp/>inputFramesPerBuffer,<sp/>outputFramesPerBuffer<sp/>);</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>outputParameters<sp/>)</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>latency<sp/>=<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBuffer<sp/>=<sp/>outputFramesPerBuffer<sp/>;</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">/*<sp/>we<sp/>have<sp/>inputParameters<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>latency<sp/>=<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBuffer<sp/>=<sp/>inputFramesPerBuffer<sp/>;</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/>ringSize<sp/>=<sp/>(long)<sp/>(<sp/>latency<sp/>*<sp/>sampleRate<sp/>*<sp/>2<sp/>+<sp/>.5);</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>(<sp/>(<sp/></highlight><highlight class="stringliteral">&quot;suggested<sp/>latency<sp/>:<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>(latency*sampleRate)<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ringSize<sp/>&lt;<sp/>framesPerBuffer<sp/>*<sp/>3<sp/>)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ringSize<sp/>=<sp/>framesPerBuffer<sp/>*<sp/>3<sp/>;</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>((</highlight><highlight class="stringliteral">&quot;framesPerBuffer:%d\n&quot;</highlight><highlight class="normal">,(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)framesPerBuffer));</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>((</highlight><highlight class="stringliteral">&quot;Ringbuffer<sp/>size<sp/>(1):<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)ringSize<sp/>));</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>make<sp/>sure<sp/>it&apos;s<sp/>at<sp/>least<sp/>4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/>ringSize<sp/>=<sp/><ref refid="libflac_2src_2lib_f_l_a_c_2include_2private_2macros_8h_1aacc3ee1a7f283f8ef65cea31f4436a95" kindref="member">MAX</ref>(<sp/>ringSize,<sp/>4<sp/>);</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>round<sp/>up<sp/>to<sp/>the<sp/>next<sp/>power<sp/>of<sp/>2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/>index<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>i=0;<sp/>i&lt;</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(long)*8;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>)</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ringSize<sp/>&gt;&gt;<sp/>i<sp/>&amp;<sp/>0x01<sp/>)</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index<sp/>=<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>index<sp/>&gt;<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ringSize<sp/>&lt;=<sp/>(<sp/>0x01<sp/>&lt;&lt;<sp/>index<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ringSize<sp/>=<sp/>0x01<sp/>&lt;&lt;<sp/>index<sp/>;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ringSize<sp/>=<sp/>0x01<sp/>&lt;&lt;<sp/>(<sp/>index<sp/>+<sp/>1<sp/>);</highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Final<sp/>Ringbuffer<sp/>size<sp/>(2):<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)ringSize<sp/>));</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ringSize;</highlight></codeline>
<codeline lineno="295"><highlight class="normal">}</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="299"><highlight class="comment"><sp/>*<sp/>Durring<sp/>testing<sp/>of<sp/>core<sp/>audio,<sp/>I<sp/>found<sp/>that<sp/>serious<sp/>crashes<sp/>could<sp/>occur</highlight></codeline>
<codeline lineno="300"><highlight class="comment"><sp/>*<sp/>if<sp/>properties<sp/>such<sp/>as<sp/>sample<sp/>rate<sp/>were<sp/>changed<sp/>multiple<sp/>times<sp/>in<sp/>rapid</highlight></codeline>
<codeline lineno="301"><highlight class="comment"><sp/>*<sp/>succession.<sp/>The<sp/>function<sp/>below<sp/>could<sp/>be<sp/>used<sp/>to<sp/>with<sp/>a<sp/>condition<sp/>variable.</highlight></codeline>
<codeline lineno="302"><highlight class="comment"><sp/>*<sp/>to<sp/>prevent<sp/>propertychanges<sp/>from<sp/>happening<sp/>until<sp/>the<sp/>last<sp/>property</highlight></codeline>
<codeline lineno="303"><highlight class="comment"><sp/>*<sp/>change<sp/>is<sp/>acknowledged.<sp/>Instead,<sp/>I<sp/>implemented<sp/>a<sp/>busy-wait,<sp/>which<sp/>is<sp/>simpler</highlight></codeline>
<codeline lineno="304"><highlight class="comment"><sp/>*<sp/>to<sp/>implement<sp/>b/c<sp/>in<sp/>second<sp/>round<sp/>of<sp/>testing<sp/>(nov<sp/>&apos;09)<sp/>property<sp/>changes<sp/>occured</highlight></codeline>
<codeline lineno="305"><highlight class="comment"><sp/>*<sp/>quickly<sp/>and<sp/>so<sp/>there<sp/>was<sp/>no<sp/>real<sp/>way<sp/>to<sp/>test<sp/>the<sp/>condition<sp/>variable<sp/>implementation.</highlight></codeline>
<codeline lineno="306"><highlight class="comment"><sp/>*<sp/>therefore,<sp/>this<sp/>function<sp/>is<sp/>not<sp/>used,<sp/>but<sp/>it<sp/>is<sp/>aluded<sp/>to<sp/>in<sp/>commented<sp/>code<sp/>below,</highlight></codeline>
<codeline lineno="307"><highlight class="comment"><sp/>*<sp/>since<sp/>it<sp/>represents<sp/>a<sp/>theoretically<sp/>better<sp/>implementation.</highlight></codeline>
<codeline lineno="308"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310" refid="pa__mac__core__utilities_8h_1abac1dc2bc8f674a0c0600e11756434b1" refkind="member"><highlight class="normal">OSStatus<sp/><ref refid="pa__mac__core__utilities_8c_1abac1dc2bc8f674a0c0600e11756434b1" kindref="member">propertyProc</ref>(</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>AudioDeviceID<sp/>inDevice,<sp/></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/>UInt32<sp/>inChannel,<sp/></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>Boolean<sp/>isInput,<sp/></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/>AudioDevicePropertyID<sp/>inPropertyID,<sp/></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>inClientData<sp/>)</highlight></codeline>
<codeline lineno="316"><highlight class="normal">{</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>is<sp/>where<sp/>we<sp/>would<sp/>set<sp/>the<sp/>condition<sp/>variable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>noErr;</highlight></codeline>
<codeline lineno="319"><highlight class="normal">}</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>sets<sp/>the<sp/>value<sp/>of<sp/>the<sp/>given<sp/>property<sp/>and<sp/>waits<sp/>for<sp/>the<sp/>change<sp/>to<sp/></highlight></codeline>
<codeline lineno="322"><highlight class="comment"><sp/><sp/><sp/>be<sp/>acknowledged,<sp/>and<sp/>returns<sp/>the<sp/>final<sp/>value,<sp/>which<sp/>is<sp/>not<sp/>guaranteed</highlight></codeline>
<codeline lineno="323"><highlight class="comment"><sp/><sp/><sp/>by<sp/>this<sp/>function<sp/>to<sp/>be<sp/>the<sp/>same<sp/>as<sp/>the<sp/>desired<sp/>value.<sp/>Obviously,<sp/>this</highlight></codeline>
<codeline lineno="324"><highlight class="comment"><sp/><sp/><sp/>function<sp/>can<sp/>only<sp/>be<sp/>used<sp/>for<sp/>data<sp/>whose<sp/>input<sp/>and<sp/>output<sp/>are<sp/>the</highlight></codeline>
<codeline lineno="325"><highlight class="comment"><sp/><sp/><sp/>same<sp/>size<sp/>and<sp/>format,<sp/>and<sp/>their<sp/>size<sp/>and<sp/>format<sp/>are<sp/>known<sp/>in<sp/>advance.</highlight></codeline>
<codeline lineno="326"><highlight class="comment"><sp/><sp/><sp/>whether<sp/>or<sp/>not<sp/>the<sp/>call<sp/>succeeds,<sp/>if<sp/>the<sp/>data<sp/>is<sp/>successfully<sp/>read,</highlight></codeline>
<codeline lineno="327"><highlight class="comment"><sp/><sp/><sp/>it<sp/>is<sp/>returned<sp/>in<sp/>outPropertyData.<sp/>If<sp/>it<sp/>is<sp/>not<sp/>read<sp/>successfully,</highlight></codeline>
<codeline lineno="328"><highlight class="comment"><sp/><sp/><sp/>outPropertyData<sp/>is<sp/>zeroed,<sp/>which<sp/>may<sp/>or<sp/>may<sp/>not<sp/>be<sp/>useful<sp/>in</highlight></codeline>
<codeline lineno="329"><highlight class="comment"><sp/><sp/><sp/>determining<sp/>if<sp/>the<sp/>property<sp/>was<sp/>read.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330" refid="pa__mac__core__utilities_8h_1a1c6368ba4f896a08088d392adfae2224" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__utilities_8c_1a1c6368ba4f896a08088d392adfae2224" kindref="member">AudioDeviceSetPropertyNowAndWaitForChange</ref>(</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>AudioDeviceID<sp/>inDevice,</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>UInt32<sp/>inChannel,<sp/></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/>Boolean<sp/>isInput,<sp/></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>AudioDevicePropertyID<sp/>inPropertyID,</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/>UInt32<sp/>inPropertyDataSize,<sp/></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*inPropertyData,</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*outPropertyData<sp/>)</highlight></codeline>
<codeline lineno="338"><highlight class="normal">{</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/>OSStatus<sp/>macErr;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/>UInt32<sp/>outPropertyDataSize<sp/>=<sp/>inPropertyDataSize;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>First,<sp/>see<sp/>if<sp/>it<sp/>already<sp/>has<sp/>that<sp/>value.<sp/>If<sp/>so,<sp/>return.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/>macErr<sp/>=<sp/>AudioDeviceGetProperty(<sp/>inDevice,<sp/>inChannel,</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isInput,<sp/>inPropertyID,<sp/></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;outPropertyDataSize,<sp/>outPropertyData<sp/>);</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>macErr<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>memset(<sp/>outPropertyData,<sp/>0,<sp/>inPropertyDataSize<sp/>);</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>failMac;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>inPropertyDataSize!=outPropertyDataSize<sp/>)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>0==memcmp(<sp/>outPropertyData,<sp/>inPropertyData,<sp/>outPropertyDataSize<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Ideally,<sp/>we&apos;d<sp/>use<sp/>a<sp/>condition<sp/>variable<sp/>to<sp/>determine<sp/>changes.</highlight></codeline>
<codeline lineno="356"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>we<sp/>could<sp/>set<sp/>that<sp/>up<sp/>here.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>were<sp/>using<sp/>a<sp/>cond<sp/>variable,<sp/>we&apos;d<sp/>do<sp/>something<sp/>useful<sp/>here,</highlight></codeline>
<codeline lineno="359"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>but<sp/>for<sp/>now,<sp/>this<sp/>is<sp/>just<sp/>to<sp/>make<sp/>10.6<sp/>happy.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/>macErr<sp/>=<sp/>AudioDeviceAddPropertyListener(<sp/>inDevice,<sp/>inChannel,<sp/>isInput,</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inPropertyID,<sp/><ref refid="pa__mac__core__utilities_8c_1abac1dc2bc8f674a0c0600e11756434b1" kindref="member">propertyProc</ref>,</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);<sp/></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>macErr<sp/>)</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>we<sp/>couldn&apos;t<sp/>add<sp/>a<sp/>listener.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>failMac;</highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>set<sp/>property<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/>macErr<sp/><sp/>=<sp/>AudioDeviceSetProperty(<sp/>inDevice,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>inChannel,</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isInput,<sp/>inPropertyID,</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inPropertyDataSize,<sp/>inPropertyData<sp/>);</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>macErr<sp/>)</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>failMac;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>busy-wait<sp/>up<sp/>to<sp/>30<sp/>seconds<sp/>for<sp/>the<sp/>property<sp/>to<sp/>change<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>busy-wait<sp/>is<sp/>justified<sp/>here<sp/>only<sp/>because<sp/>the<sp/>correct<sp/>alternative<sp/>(condition<sp/>variable)</highlight></codeline>
<codeline lineno="376"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>was<sp/>hard<sp/>to<sp/>test,<sp/>since<sp/>most<sp/>of<sp/>the<sp/>waiting<sp/>ended<sp/>up<sp/>being<sp/>for<sp/>setting<sp/>rather<sp/>than</highlight></codeline>
<codeline lineno="377"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>getting<sp/>in<sp/>OS<sp/>X<sp/>10.5.<sp/>This<sp/>was<sp/>not<sp/>the<sp/>case<sp/>in<sp/>earlier<sp/>OS<sp/>versions.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">timeval<sp/>tv1,<sp/>tv2;</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/>gettimeofday(<sp/>&amp;tv1,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/>memcpy(<sp/>&amp;tv2,<sp/>&amp;tv1,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>timeval<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>tv2.tv_sec<sp/>-<sp/>tv1.tv_sec<sp/>&lt;<sp/>30<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>now<sp/>read<sp/>the<sp/>property<sp/>back<sp/>out<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>macErr<sp/>=<sp/>AudioDeviceGetProperty(<sp/>inDevice,<sp/>inChannel,</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isInput,<sp/>inPropertyID,<sp/></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;outPropertyDataSize,<sp/>outPropertyData<sp/>);</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>macErr<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(<sp/>outPropertyData,<sp/>0,<sp/>inPropertyDataSize<sp/>);</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>failMac;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>and<sp/>compare...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>0==memcmp(<sp/>outPropertyData,<sp/>inPropertyData,<sp/>outPropertyDataSize<sp/>)<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AudioDeviceRemovePropertyListener(<sp/>inDevice,<sp/>inChannel,<sp/>isInput,<sp/>inPropertyID,<sp/><ref refid="pa__mac__core__utilities_8c_1abac1dc2bc8f674a0c0600e11756434b1" kindref="member">propertyProc</ref><sp/>);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>match<sp/>yet,<sp/>so<sp/>let&apos;s<sp/>sleep<sp/>and<sp/>try<sp/>again.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a1b3c20044c9401c42add29475636e83d" kindref="member">Pa_Sleep</ref>(<sp/>100<sp/>);</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>gettimeofday(<sp/>&amp;tv2,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a27513a24b6149b50414c8b8bf0220533" kindref="member">DBUG</ref>(<sp/>(</highlight><highlight class="stringliteral">&quot;Timeout<sp/>waiting<sp/>for<sp/>device<sp/>setting.\n&quot;</highlight><highlight class="normal"><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/>AudioDeviceRemovePropertyListener(<sp/>inDevice,<sp/>inChannel,<sp/>isInput,<sp/>inPropertyID,<sp/><ref refid="pa__mac__core__utilities_8c_1abac1dc2bc8f674a0c0600e11756434b1" kindref="member">propertyProc</ref><sp/>);</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/>failMac:</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/>AudioDeviceRemovePropertyListener(<sp/>inDevice,<sp/>inChannel,<sp/>isInput,<sp/>inPropertyID,<sp/><ref refid="pa__mac__core__utilities_8c_1abac1dc2bc8f674a0c0600e11756434b1" kindref="member">propertyProc</ref><sp/>);</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8h_1a44da9ced8f2b0fb446b0706a8f8773f5" kindref="member">ERR</ref>(<sp/>macErr<sp/>);</highlight></codeline>
<codeline lineno="407"><highlight class="normal">}</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="410"><highlight class="comment"><sp/>*<sp/>Sets<sp/>the<sp/>sample<sp/>rate<sp/>the<sp/>HAL<sp/>device.</highlight></codeline>
<codeline lineno="411"><highlight class="comment"><sp/>*<sp/>if<sp/>requireExact:<sp/>set<sp/>the<sp/>sample<sp/>rate<sp/>or<sp/>fail.</highlight></codeline>
<codeline lineno="412"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="413"><highlight class="comment"><sp/>*<sp/>otherwise<sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>set<sp/>the<sp/>exact<sp/>sample<sp/>rate.</highlight></codeline>
<codeline lineno="414"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>that<sp/>fails,<sp/>check<sp/>for<sp/>available<sp/>sample<sp/>rates,<sp/>and<sp/>choose<sp/>one</highlight></codeline>
<codeline lineno="415"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>higher<sp/>than<sp/>the<sp/>requested<sp/>rate.<sp/>If<sp/>there<sp/>isn&apos;t<sp/>a<sp/>higher<sp/>one,</highlight></codeline>
<codeline lineno="416"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>just<sp/>use<sp/>the<sp/>highest<sp/>available.</highlight></codeline>
<codeline lineno="417"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418" refid="pa__mac__core__utilities_8h_1a0f6bb3a8d2c8f1664a69e14240c1294a" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__utilities_8c_1a0f6bb3a8d2c8f1664a69e14240c1294a" kindref="member">setBestSampleRateForDevice</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>AudioDeviceID<sp/>device,</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isOutput,</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>requireExact,</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Float64<sp/>desiredSrate<sp/>)</highlight></codeline>
<codeline lineno="422"><highlight class="normal">{</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isInput<sp/>=<sp/>isOutput<sp/>?<sp/>0<sp/>:<sp/>1;</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/>Float64<sp/>srate;</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/>UInt32<sp/>propsize<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/>Float64<sp/>);</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/>OSErr<sp/>err;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/>AudioValueRange<sp/>*ranges;</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>=0;</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/>Float64<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref><sp/><sp/>=<sp/>-1;<sp/></highlight><highlight class="comment">/*the<sp/>maximum<sp/>rate<sp/>available*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/>Float64<sp/>best<sp/>=<sp/>-1;<sp/></highlight><highlight class="comment">/*the<sp/>lowest<sp/>sample<sp/>rate<sp/>still<sp/>greater<sp/>than<sp/>desired<sp/>rate*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>((</highlight><highlight class="stringliteral">&quot;Setting<sp/>sample<sp/>rate<sp/>for<sp/>device<sp/>%ld<sp/>to<sp/>%g.\n&quot;</highlight><highlight class="normal">,device,(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)desiredSrate));</highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>try<sp/>setting<sp/>the<sp/>sample<sp/>rate<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/>srate<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/>err<sp/>=<sp/><ref refid="pa__mac__core__utilities_8c_1a1c6368ba4f896a08088d392adfae2224" kindref="member">AudioDeviceSetPropertyNowAndWaitForChange</ref>(</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>device,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyNominalSampleRate,</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>propsize,<sp/>&amp;desiredSrate,<sp/>&amp;srate<sp/>);</highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>if<sp/>the<sp/>rate<sp/>agrees,<sp/>and<sp/>was<sp/>changed,<sp/>we<sp/>are<sp/>done<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>srate<sp/>!=<sp/>0<sp/>&amp;&amp;<sp/>srate<sp/>==<sp/>desiredSrate<sp/>)</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>if<sp/>the<sp/>rate<sp/>agrees,<sp/>and<sp/>we<sp/>got<sp/>no<sp/>errors,<sp/>we<sp/>are<sp/>done<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!err<sp/>&amp;&amp;<sp/>srate<sp/>==<sp/>desiredSrate<sp/>)</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>we&apos;ve<sp/>failed<sp/>if<sp/>the<sp/>rates<sp/>disagree<sp/>and<sp/>we<sp/>are<sp/>setting<sp/>input<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>requireExact<sp/>)</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>generate<sp/>a<sp/>list<sp/>of<sp/>available<sp/>sample<sp/>rates<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/>err<sp/>=<sp/>AudioDeviceGetPropertyInfo(<sp/>device,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyAvailableNominalSampleRates,</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;propsize,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>)</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8h_1a44da9ced8f2b0fb446b0706a8f8773f5" kindref="member">ERR</ref>(<sp/>err<sp/>);</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/>ranges<sp/>=<sp/>(AudioValueRange<sp/>*)calloc(<sp/>1,<sp/>propsize<sp/>);</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!ranges<sp/>)</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref>;</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/>err<sp/>=<sp/>AudioDeviceGetProperty(<sp/>device,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyAvailableNominalSampleRates,</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;propsize,<sp/>ranges<sp/>);</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>)</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>free(<sp/>ranges<sp/>);</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8h_1a44da9ced8f2b0fb446b0706a8f8773f5" kindref="member">ERR</ref>(<sp/>err<sp/>);</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>((</highlight><highlight class="stringliteral">&quot;Requested<sp/>sample<sp/>rate<sp/>of<sp/>%g<sp/>was<sp/>not<sp/>available.\n&quot;</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)desiredSrate));</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>((</highlight><highlight class="stringliteral">&quot;%lu<sp/>Available<sp/>Sample<sp/>Rates<sp/>are:\n&quot;</highlight><highlight class="normal">,propsize/</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(AudioValueRange)));</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MAC_CORE_VERBOSE_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>i=0;<sp/>i&lt;propsize/</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(AudioValueRange);<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>)</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>(<sp/>(</highlight><highlight class="stringliteral">&quot;\t%g-%g\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)<sp/>ranges[i].mMinimum,</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)<sp/>ranges[i].mMaximum<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="474"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>((</highlight><highlight class="stringliteral">&quot;-----\n&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>now<sp/>pick<sp/>the<sp/>best<sp/>available<sp/>sample<sp/>rate<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>i=0;<sp/>i&lt;propsize/</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(AudioValueRange);<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>)</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ranges[i].mMaximum<sp/>&gt;<sp/>max<sp/>)<sp/>max<sp/>=<sp/>ranges[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].mMaximum;</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ranges[i].mMinimum<sp/>&gt;<sp/>desiredSrate<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>best<sp/>&lt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>=<sp/>ranges[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].mMinimum;</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ranges[i].mMinimum<sp/>&lt;<sp/>best<sp/>)</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>=<sp/>ranges[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>].mMinimum;</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>best<sp/>&lt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>=<sp/><ref refid="libflac_2src_2flac_2encode_8c_1ac39d9cef6a5e030ba8d9e11121054268" kindref="member">max</ref>;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><ref refid="pa__mac__core__utilities_8h_1a38ee16c279b096dc8f4038e634d8100b" kindref="member">VDBUG</ref>(<sp/>(</highlight><highlight class="stringliteral">&quot;Maximum<sp/>Rate<sp/>%g.<sp/>best<sp/>is<sp/>%g.\n&quot;</highlight><highlight class="normal">,<sp/>max,<sp/>best<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/>free(<sp/>ranges<sp/>);</highlight></codeline>
<codeline lineno="492"><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>set<sp/>the<sp/>sample<sp/>rate<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/>propsize<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/>best<sp/>);</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/>srate<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/>err<sp/>=<sp/><ref refid="pa__mac__core__utilities_8c_1a1c6368ba4f896a08088d392adfae2224" kindref="member">AudioDeviceSetPropertyNowAndWaitForChange</ref>(</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>device,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyNominalSampleRate,</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>propsize,<sp/>&amp;best,<sp/>&amp;srate<sp/>);</highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>if<sp/>the<sp/>set<sp/>rate<sp/>matches,<sp/>we<sp/>are<sp/>done<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>srate<sp/>!=<sp/>0<sp/>&amp;&amp;<sp/>srate<sp/>==<sp/>best<sp/>)</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>)</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8h_1a44da9ced8f2b0fb446b0706a8f8773f5" kindref="member">ERR</ref>(<sp/>err<sp/>);</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>otherwise,<sp/>something<sp/>wierd<sp/>happened:<sp/>we<sp/>didn&apos;t<sp/>set<sp/>the<sp/>rate,<sp/>and<sp/>we<sp/>got<sp/>no<sp/>errors.<sp/>Just<sp/>bail.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4851f9f753cdad3e7a89380d6589816c" kindref="member">paInternalError</ref>;</highlight></codeline>
<codeline lineno="510"><highlight class="normal">}</highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="514"><highlight class="comment"><sp/><sp/><sp/>Attempts<sp/>to<sp/>set<sp/>the<sp/>requestedFramesPerBuffer.<sp/>If<sp/>it<sp/>can&apos;t<sp/>set<sp/>the<sp/>exact</highlight></codeline>
<codeline lineno="515"><highlight class="comment"><sp/><sp/><sp/>value,<sp/>it<sp/>settles<sp/>for<sp/>something<sp/>smaller<sp/>if<sp/>available.<sp/>If<sp/>nothing<sp/>smaller</highlight></codeline>
<codeline lineno="516"><highlight class="comment"><sp/><sp/><sp/>is<sp/>available,<sp/>it<sp/>uses<sp/>the<sp/>smallest<sp/>available<sp/>size.</highlight></codeline>
<codeline lineno="517"><highlight class="comment"><sp/><sp/><sp/>actualFramesPerBuffer<sp/>will<sp/>be<sp/>set<sp/>to<sp/>the<sp/>actual<sp/>value<sp/>on<sp/>successful<sp/>return.</highlight></codeline>
<codeline lineno="518"><highlight class="comment"><sp/><sp/><sp/>OK<sp/>to<sp/>pass<sp/>NULL<sp/>to<sp/>actualFramesPerBuffer.</highlight></codeline>
<codeline lineno="519"><highlight class="comment"><sp/><sp/><sp/>The<sp/>logic<sp/>is<sp/>very<sp/>simmilar<sp/>too<sp/>setBestSampleRate<sp/>only<sp/>failure<sp/>here<sp/>is</highlight></codeline>
<codeline lineno="520"><highlight class="comment"><sp/><sp/><sp/>not<sp/>usually<sp/>catastrophic.</highlight></codeline>
<codeline lineno="521"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="522" refid="pa__mac__core__utilities_8h_1a525354d1368777e71d58a88be42277b1" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__mac__core__utilities_8c_1a525354d1368777e71d58a88be42277b1" kindref="member">setBestFramesPerBuffer</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>AudioDeviceID<sp/>device,</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isOutput,</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UInt32<sp/>requestedFramesPerBuffer,<sp/></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UInt32<sp/>*actualFramesPerBuffer<sp/>)</highlight></codeline>
<codeline lineno="526"><highlight class="normal">{</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/>UInt32<sp/>afpb;</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isInput<sp/>=<sp/>!isOutput;</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>UInt32<sp/>propsize<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(UInt32);</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/>OSErr<sp/>err;</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/>AudioValueRange<sp/>range;</highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>actualFramesPerBuffer<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>actualFramesPerBuffer<sp/>=<sp/>&amp;afpb;</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>--<sp/>try<sp/>and<sp/>set<sp/>exact<sp/>FPB<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/>err<sp/>=<sp/>AudioDeviceSetProperty(<sp/>device,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyBufferFrameSize,</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>propsize,<sp/>&amp;requestedFramesPerBuffer);</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/>err<sp/>=<sp/>AudioDeviceGetProperty(<sp/>device,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyBufferFrameSize,</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;propsize,<sp/>actualFramesPerBuffer);</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>)</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8h_1a44da9ced8f2b0fb446b0706a8f8773f5" kindref="member">ERR</ref>(<sp/>err<sp/>);</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Did<sp/>we<sp/>get<sp/>the<sp/>size<sp/>we<sp/>asked<sp/>for?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>*actualFramesPerBuffer<sp/>==<sp/>requestedFramesPerBuffer<sp/>)</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;<sp/></highlight><highlight class="comment">/*<sp/>we<sp/>are<sp/>done<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Clip<sp/>requested<sp/>value<sp/>against<sp/>legal<sp/>range<sp/>for<sp/>the<sp/>device.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/>propsize<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(AudioValueRange);</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/>err<sp/>=<sp/>AudioDeviceGetProperty(<sp/>device,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyBufferFrameSizeRange,</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;propsize,<sp/>&amp;range<sp/>);</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>)</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8h_1a44da9ced8f2b0fb446b0706a8f8773f5" kindref="member">ERR</ref>(<sp/>err<sp/>);</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>requestedFramesPerBuffer<sp/>&lt;<sp/>range.mMinimum<sp/>)</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>requestedFramesPerBuffer<sp/>=<sp/>range.mMinimum;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>requestedFramesPerBuffer<sp/>&gt;<sp/>range.mMaximum<sp/>)</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>requestedFramesPerBuffer<sp/>=<sp/>range.mMaximum;</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>---<sp/>set<sp/>the<sp/>buffer<sp/>size<sp/>(ignore<sp/>errors)<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/>propsize<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/>UInt32<sp/>);</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/>err<sp/>=<sp/>AudioDeviceSetProperty(<sp/>device,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyBufferFrameSize,</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>propsize,<sp/>&amp;requestedFramesPerBuffer<sp/>);</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>---<sp/>read<sp/>the<sp/>property<sp/>to<sp/>check<sp/>that<sp/>it<sp/>was<sp/>set<sp/>--<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/>err<sp/>=<sp/>AudioDeviceGetProperty(<sp/>device,<sp/>0,<sp/>isInput,</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kAudioDevicePropertyBufferFrameSize,</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;propsize,<sp/>actualFramesPerBuffer<sp/>);</highlight></codeline>
<codeline lineno="582"><highlight class="normal"></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>err<sp/>)</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8h_1a44da9ced8f2b0fb446b0706a8f8773f5" kindref="member">ERR</ref>(<sp/>err<sp/>);</highlight></codeline>
<codeline lineno="585"><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="587"><highlight class="normal">}</highlight></codeline>
<codeline lineno="588"><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight><highlight class="comment">/**********************</highlight></codeline>
<codeline lineno="590"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="591"><highlight class="comment"><sp/>*<sp/>XRun<sp/>stuff</highlight></codeline>
<codeline lineno="592"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="593"><highlight class="comment"><sp/>**********************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="594"><highlight class="normal"></highlight></codeline>
<codeline lineno="595" refid="struct_pa_mac_x_run_list_node__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode_s</ref><sp/>{</highlight></codeline>
<codeline lineno="596" refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" refkind="member"><highlight class="normal"><sp/><sp/><sp/><ref refid="struct_pa_mac_core_stream" kindref="compound">PaMacCoreStream</ref><sp/>*<ref refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" kindref="member">stream</ref>;</highlight></codeline>
<codeline lineno="597" refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" refkind="member"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode_s</ref><sp/>*<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="598"><highlight class="normal">}<sp/>;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"></highlight></codeline>
<codeline lineno="600" refid="pa__mac__core__utilities_8c_1a7422eb79482bd9b8a3724250f63c41b7" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode_s</ref><sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref>;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight></codeline>
<codeline lineno="604"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>firstXRunListNode;</highlight></codeline>
<codeline lineno="605"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>xRunListSize;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>pthread_mutex_t<sp/>xrunMutex;</highlight></codeline>
<codeline lineno="607"><highlight class="normal"></highlight></codeline>
<codeline lineno="608" refid="pa__mac__core__utilities_8h_1a6e0d12a5c5acae6fac007f5ea96f96a3" refkind="member"><highlight class="normal">OSStatus<sp/><ref refid="pa__mac__core__utilities_8c_1a6e0d12a5c5acae6fac007f5ea96f96a3" kindref="member">xrunCallback</ref>(</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/>AudioDeviceID<sp/>inDevice,<sp/></highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/>UInt32<sp/>inChannel,<sp/></highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/>Boolean<sp/>isInput,<sp/></highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/>AudioDevicePropertyID<sp/>inPropertyID,<sp/></highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>inClientData)</highlight></codeline>
<codeline lineno="614"><highlight class="normal">{</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>*<ref refid="structnode" kindref="compound">node</ref><sp/>=<sp/>(<ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>*)<sp/>inClientData;</highlight></codeline>
<codeline lineno="616"><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/>pthread_mutex_trylock(<sp/>&amp;xrunMutex<sp/>)<sp/>;</highlight></codeline>
<codeline lineno="618"><highlight class="normal"></highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>ret<sp/>==<sp/>0<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="620"><highlight class="normal"></highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/>node-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref><sp/>;<sp/></highlight><highlight class="comment">//skip<sp/>the<sp/>first<sp/>node</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="622"><highlight class="normal"></highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>;<sp/>node;<sp/>node=node-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_mac_core_stream" kindref="compound">PaMacCoreStream</ref><sp/>*<ref refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" kindref="member">stream</ref><sp/>=<sp/>node-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" kindref="member">stream</ref>;</highlight></codeline>
<codeline lineno="625"><highlight class="normal"></highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_mac_core_stream_1a18df3b14e087124f9da12f49589a4c87" kindref="member">state</ref><sp/>!=<sp/>ACTIVE<sp/>)</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//if<sp/>the<sp/>stream<sp/>isn&apos;t<sp/>active,<sp/>we<sp/>don&apos;t<sp/>care<sp/>if<sp/>the<sp/>device<sp/>is<sp/>dropping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"></highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>isInput<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_mac_core_stream_1a84ab00c3940677753cbcfaa0b4497817" kindref="member">inputDevice</ref><sp/>==<sp/>inDevice<sp/>)</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OSAtomicOr32(<sp/><ref refid="portaudio_8h_1aea144f0edaf02d0ac8b113f41fb95c47" kindref="member">paInputOverflow</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_mac_core_stream_1af65db3bdd18d4356f16fe5c2b23f7d5d" kindref="member">xrunFlags</ref><sp/>);</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_mac_core_stream_1ae982506be4fb075f57798b322893c477" kindref="member">outputDevice</ref><sp/>==<sp/>inDevice<sp/>)</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OSAtomicOr32(<sp/><ref refid="portaudio_8h_1aa17c91c859b12ebbf53a1440def53c89" kindref="member">paOutputUnderflow</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_mac_core_stream_1af65db3bdd18d4356f16fe5c2b23f7d5d" kindref="member">xrunFlags</ref><sp/>);</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="637"><highlight class="normal"></highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pthread_mutex_unlock(<sp/>&amp;xrunMutex<sp/>);</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="640"><highlight class="normal"></highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="642"><highlight class="normal">}</highlight></codeline>
<codeline lineno="643"><highlight class="normal"></highlight></codeline>
<codeline lineno="644" refid="pa__mac__core__utilities_8h_1a9765dfc2c7118a68c7d51a3357236e9f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8c_1a9765dfc2c7118a68c7d51a3357236e9f" kindref="member">initializeXRunListenerList</ref>()</highlight></codeline>
<codeline lineno="645"><highlight class="normal">{</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/>xRunListSize<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/>bzero(<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<sp/>&amp;firstXRunListNode,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(firstXRunListNode)<sp/>);</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_mutex_init(<sp/>&amp;xrunMutex,<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="649"><highlight class="normal">}</highlight></codeline>
<codeline lineno="650" refid="pa__mac__core__utilities_8h_1a531c51cac91b4b9d61d16a12669cdad4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8c_1a531c51cac91b4b9d61d16a12669cdad4" kindref="member">destroyXRunListenerList</ref>()</highlight></codeline>
<codeline lineno="651"><highlight class="normal">{</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>*<ref refid="structnode" kindref="compound">node</ref>;</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/>node<sp/>=<sp/>firstXRunListNode.<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>node<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>*tmp<sp/>=<sp/>node;</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/>node-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>free(<sp/>tmp<sp/>);</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/>xRunListSize<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_mutex_destroy(<sp/>&amp;xrunMutex<sp/>);</highlight></codeline>
<codeline lineno="661"><highlight class="normal">}</highlight></codeline>
<codeline lineno="662"><highlight class="normal"></highlight></codeline>
<codeline lineno="663" refid="pa__mac__core__utilities_8h_1adc104e6677780755cdb1c6ed7021fb45" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="pa__mac__core__utilities_8c_1adc104e6677780755cdb1c6ed7021fb45" kindref="member">addToXRunListenerList</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" kindref="member">stream</ref><sp/>)</highlight></codeline>
<codeline lineno="664"><highlight class="normal">{</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/>pthread_mutex_lock(<sp/>&amp;xrunMutex<sp/>);</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>*newNode;</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>setup<sp/>new<sp/>node:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/>newNode<sp/>=<sp/>(<ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>*)<sp/>malloc(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/>newNode-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" kindref="member">stream</ref><sp/>=<sp/>(<ref refid="struct_pa_mac_core_stream" kindref="compound">PaMacCoreStream</ref><sp/>*)<sp/>stream;</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/>newNode-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref><sp/>=<sp/>firstXRunListNode.<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>insert:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/>firstXRunListNode.<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref><sp/>=<sp/>newNode;</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/>pthread_mutex_unlock(<sp/>&amp;xrunMutex<sp/>);</highlight></codeline>
<codeline lineno="674"><highlight class="normal"></highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>&amp;firstXRunListNode;</highlight></codeline>
<codeline lineno="676"><highlight class="normal">}</highlight></codeline>
<codeline lineno="677"><highlight class="normal"></highlight></codeline>
<codeline lineno="678" refid="pa__mac__core__utilities_8h_1a632eeced2955b271af52e8731e3a49ee" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="pa__mac__core__utilities_8c_1a632eeced2955b271af52e8731e3a49ee" kindref="member">removeFromXRunListenerList</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" kindref="member">stream</ref><sp/>)</highlight></codeline>
<codeline lineno="679"><highlight class="normal">{</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/>pthread_mutex_lock(<sp/>&amp;xrunMutex<sp/>);</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><ref refid="struct_pa_mac_x_run_list_node__s" kindref="compound">PaMacXRunListNode</ref><sp/>*<ref refid="structnode" kindref="compound">node</ref>,<sp/>*prev;</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/>prev<sp/>=<sp/>&amp;firstXRunListNode;</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/>node<sp/>=<sp/>firstXRunListNode.<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>node<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>node-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a53f8dd20a19188e55a2f979917f24d80" kindref="member">stream</ref><sp/>==<sp/>stream<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//found<sp/>it:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>--xRunListSize;</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref><sp/>=<sp/>node-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>free(<sp/>node<sp/>);</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_mutex_unlock(<sp/>&amp;xrunMutex<sp/>);</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>xRunListSize;</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>prev<sp/>=<sp/>prev-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/>node-&gt;<ref refid="struct_pa_mac_x_run_list_node__s_1a4f810fe586d02e14ac39053876b605c9" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="696"><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/>pthread_mutex_unlock(<sp/>&amp;xrunMutex<sp/>);</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>failure</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>xRunListSize;</highlight></codeline>
<codeline lineno="700"><highlight class="normal">}</highlight></codeline>
<codeline lineno="701"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/coreaudio/pa_mac_core_utilities.c"/>
  </compounddef>
</doxygen>
