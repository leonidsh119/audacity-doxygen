<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="metro_8c" kind="file" language="C++">
    <compoundname>metro.c</compoundname>
    <includes local="no">math.h</includes>
    <includes local="no">stdio.h</includes>
    <includes local="no">stdlib.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">stdbool.h</includes>
    <includes refid="atom_8h" local="yes">lv2/lv2plug.in/ns/ext/atom/atom.h</includes>
    <includes refid="lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2atom_2util_8h" local="yes">lv2/lv2plug.in/ns/ext/atom/util.h</includes>
    <includes refid="lib-src_2lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2time_2time_8h" local="yes">lv2/lv2plug.in/ns/ext/time/time.h</includes>
    <includes refid="urid_8h" local="yes">lv2/lv2plug.in/ns/ext/urid/urid.h</includes>
    <includes refid="lv2_8h" local="yes">lv2/lv2plug.in/ns/lv2core/lv2.h</includes>
    <incdepgraph>
      <node id="26953">
        <label>stdbool.h</label>
      </node>
      <node id="26958">
        <label>stdarg.h</label>
      </node>
      <node id="26955">
        <label>stdint.h</label>
      </node>
      <node id="26951">
        <label>stdlib.h</label>
      </node>
      <node id="26956">
        <label>stddef.h</label>
      </node>
      <node id="26960">
        <label>lv2/lv2plug.in/ns/ext/urid/urid.h</label>
        <link refid="urid_8h"/>
        <childnode refid="26955" relation="include">
        </childnode>
      </node>
      <node id="26952">
        <label>string.h</label>
      </node>
      <node id="26957">
        <label>lv2/lv2plug.in/ns/ext/atom/util.h</label>
        <link refid="lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2atom_2util_8h"/>
        <childnode refid="26958" relation="include">
        </childnode>
        <childnode refid="26955" relation="include">
        </childnode>
        <childnode refid="26952" relation="include">
        </childnode>
        <childnode refid="26954" relation="include">
        </childnode>
        <childnode refid="26953" relation="include">
        </childnode>
      </node>
      <node id="26949">
        <label>math.h</label>
      </node>
      <node id="26959">
        <label>lv2/lv2plug.in/ns/ext/time/time.h</label>
        <link refid="lib-src_2lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2time_2time_8h"/>
      </node>
      <node id="26948">
        <label>C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c</label>
        <link refid="metro.c"/>
        <childnode refid="26949" relation="include">
        </childnode>
        <childnode refid="26950" relation="include">
        </childnode>
        <childnode refid="26951" relation="include">
        </childnode>
        <childnode refid="26952" relation="include">
        </childnode>
        <childnode refid="26953" relation="include">
        </childnode>
        <childnode refid="26954" relation="include">
        </childnode>
        <childnode refid="26957" relation="include">
        </childnode>
        <childnode refid="26959" relation="include">
        </childnode>
        <childnode refid="26960" relation="include">
        </childnode>
        <childnode refid="26961" relation="include">
        </childnode>
      </node>
      <node id="26961">
        <label>lv2/lv2plug.in/ns/lv2core/lv2.h</label>
        <link refid="lv2_8h"/>
        <childnode refid="26955" relation="include">
        </childnode>
      </node>
      <node id="26954">
        <label>lv2/lv2plug.in/ns/ext/atom/atom.h</label>
        <link refid="atom_8h"/>
        <childnode refid="26955" relation="include">
        </childnode>
        <childnode refid="26956" relation="include">
        </childnode>
      </node>
      <node id="26950">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="struct_metro_u_r_is" prot="public">MetroURIs</innerclass>
    <innerclass refid="struct_metro" prot="public">Metro</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="metro_8c_1ae71449b1cc6e6250b91f539153a7a0d3" prot="public" static="no">
        <name>M_PI</name>
        <initializer>3.14159265</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="33" column="13" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="33" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="metro_8c_1ad0ad6ecd310d1806d53fe68bec8705ba" prot="public" static="no">
        <name>EG_METRO_URI</name>
        <initializer>&quot;http://<ref refid="latency_8c_1a7d946209d777cb95fe30364b8d321207" kindref="member">lv2plug.in</ref>/plugins/eg-metro&quot;</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="36" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="36" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="enum">
      <memberdef kind="enum" id="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2" prot="public" static="no">
        <name>@165</name>
        <enumvalue id="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a3fbcf491b38ff3920b34d9958d688b10" prot="public">
          <name>METRO_CONTROL</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a05b86c6eb9c7ce8dad709e6e1a48f5fd" prot="public">
          <name>METRO_OUT</name>
          <initializer>= 1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="54" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="54" bodyend="57"/>
      </memberdef>
      <memberdef kind="enum" id="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8" prot="public" static="no">
        <name>State</name>
        <enumvalue id="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a25367778f8bf2f394f2800be26e4cda0" prot="public">
          <name>STATE_ATTACK</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a24a498195f55d6fc1b87b18087c604f3" prot="public">
          <name>STATE_DECAY</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" prot="public">
          <name>STATE_OFF</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>During execution this plugin can be in one of 3 states: </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="60" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="60" bodyend="64"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="metro_8c_1a15996633424fc79e86f4e490c4b20147" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> double</type>
        <definition>const double attack_s</definition>
        <argsstring></argsstring>
        <name>attack_s</name>
        <initializer>= 0.005</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="51" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="51" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="metro_8c_1a4fe226adf204e492d0b930952f44b00a" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> double</type>
        <definition>const double decay_s</definition>
        <argsstring></argsstring>
        <name>decay_s</name>
        <initializer>= 0.075</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="52" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="52" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="metro_8c_1a349808c8f8e70d7b4d57ffda8eceae61" prot="public" static="yes" mutable="no">
        <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="lv2_8h_1ac9db79f137f126ef10ef707b6de85a78" kindref="member">LV2_Descriptor</ref></type>
        <definition>const LV2_Descriptor descriptor</definition>
        <argsstring></argsstring>
        <name>descriptor</name>
        <initializer>= {
	<ref refid="metro_8c_1ad0ad6ecd310d1806d53fe68bec8705ba" kindref="member">EG_METRO_URI</ref>,
	instantiate,
	connect_port,
	activate,
	run,
	<ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,  
	<ref refid="launch_8c_1a4b66d5e31b5dc18b314c8a68163263bd" kindref="member">cleanup</ref>,
	<ref refid="px__mixer_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,  
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="332" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="332" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="metro_8c_1a2aa66e1241c1247cd28190d01901f7b8" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void connect_port</definition>
        <argsstring>(LV2_Handle instance, uint32_t port, void *data)</argsstring>
        <name>connect_port</name>
        <param>
          <type><ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref></type>
          <declname>instance</declname>
        </param>
        <param>
          <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref></type>
          <declname>port</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>data</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="105" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="105" bodyend="121"/>
      </memberdef>
      <memberdef kind="function" id="metro_8c_1a7e0cf251ae5e522cd84fc109c91a8c93" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void activate</definition>
        <argsstring>(LV2_Handle instance)</argsstring>
        <name>activate</name>
        <param>
          <type><ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref></type>
          <declname>instance</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>The activate() method resets the state completely, so the wave offset is zero and the envelope is off. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="128" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="128" bodyend="135"/>
      </memberdef>
      <memberdef kind="function" id="metro_8c_1a77ae3128ee854ff54d7b3688c90029ae" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref></type>
        <definition>static LV2_Handle instantiate</definition>
        <argsstring>(const LV2_Descriptor *descriptor, double rate, const char *path, const LV2_Feature *const *features)</argsstring>
        <name>instantiate</name>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="lv2_8h_1ac9db79f137f126ef10ef707b6de85a78" kindref="member">LV2_Descriptor</ref> *</type>
          <declname>descriptor</declname>
        </param>
        <param>
          <type>double</type>
          <declname>rate</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> char *</type>
          <declname>path</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="lv2_8h_1a78d13b607443404459db283371723234" kindref="member">LV2_Feature</ref> *<ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> *</type>
          <declname>features</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This plugin does a bit more work in instantiate() than the previous examples. The tempo updates from the host contain several <ref refid="struct_u_r_is" kindref="compound">URIs</ref>, so those are mapped, and the sine wave to be played needs to be generated based on the current sample rate. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="144" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="144" bodyend="198"/>
      </memberdef>
      <memberdef kind="function" id="metro_8c_1a541977c718a94a2594e143ff098735e5" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void cleanup</definition>
        <argsstring>(LV2_Handle instance)</argsstring>
        <name>cleanup</name>
        <param>
          <type><ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref></type>
          <declname>instance</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="201" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="201" bodyend="204"/>
      </memberdef>
      <memberdef kind="function" id="metro_8c_1a4a382ed62fc821341feb0ee169a3f9b6" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void play</definition>
        <argsstring>(Metro *self, uint32_t begin, uint32_t end)</argsstring>
        <name>play</name>
        <param>
          <type><ref refid="struct_metro" kindref="compound">Metro</ref> *</type>
          <declname>self</declname>
        </param>
        <param>
          <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Play back audio for the range [begin..end) relative to this cycle. This is called by run() in-between events to output audio up until the current time. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="211" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="211" bodyend="254"/>
      </memberdef>
      <memberdef kind="function" id="metro_8c_1a032e60589222cb9d5a81e7577abee161" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void update_position</definition>
        <argsstring>(Metro *self, const LV2_Atom_Object *obj)</argsstring>
        <name>update_position</name>
        <param>
          <type><ref refid="struct_metro" kindref="compound">Metro</ref> *</type>
          <declname>self</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_l_v2___atom___object" kindref="compound">LV2_Atom_Object</ref> *</type>
          <declname>obj</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Update the current position based on a host message. This is called by run() when a time:Position is received. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="261" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="261" bodyend="295"/>
      </memberdef>
      <memberdef kind="function" id="metro_8c_1a2d59412daa4a35b7be7e5845fada300a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void run</definition>
        <argsstring>(LV2_Handle instance, uint32_t sample_count)</argsstring>
        <name>run</name>
        <param>
          <type><ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref></type>
          <declname>instance</declname>
        </param>
        <param>
          <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref></type>
          <declname>sample_count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="298" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="298" bodyend="330"/>
      </memberdef>
      <memberdef kind="function" id="metro_8c_1affedc7aabe2715522365f21a9c1ff65d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="lv2_8h_1a05eb2f14429fd6ae501265b5e5af8309" kindref="member">LV2_SYMBOL_EXPORT</ref> <ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="lv2_8h_1ac9db79f137f126ef10ef707b6de85a78" kindref="member">LV2_Descriptor</ref> *</type>
        <definition>LV2_SYMBOL_EXPORT const LV2_Descriptor* lv2_descriptor</definition>
        <argsstring>(uint32_t index)</argsstring>
        <name>lv2_descriptor</name>
        <param>
          <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref></type>
          <declname>index</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Prototype for plugin accessor function.</para><para>Plugins are discovered by hosts using RDF data (not by loading libraries). See <ulink url="http://lv2plug.in">http://lv2plug.in</ulink> for details on the discovery process, though most hosts should use an existing library to implement this functionality.</para><para>This is the simple plugin discovery API, suitable for most statically defined plugins. Advanced plugins that need access to their bundle during discovery can use <ref refid="lv2_8h_1a9eb5804c670849d3faafed9f9cd65f23" kindref="member">lv2_lib_descriptor()</ref> instead. Plugin libraries MUST include a function called &quot;lv2_descriptor&quot; or &quot;lv2_lib_descriptor&quot; with C-style linkage, but SHOULD provide &quot;lv2_descriptor&quot; wherever possible.</para><para>When it is time to load a plugin (designated by its URI), the host loads the plugin&apos;s library, gets the <ref refid="amp_8c_1affedc7aabe2715522365f21a9c1ff65d" kindref="member">lv2_descriptor()</ref> function from it, and uses this function to find the LV2_Descriptor for the desired plugin. Plugins are accessed by index using values from 0 upwards. This function MUST return NULL for out of range indices, so the host can enumerate plugins by increasing <computeroutput>index</computeroutput> until NULL is returned.</para><para>Note that <computeroutput>index</computeroutput> has no meaning, hosts MUST NOT depend on it remaining consistent between loads of the plugin library.</para><para>The <ref refid="amp_8c_1affedc7aabe2715522365f21a9c1ff65d" kindref="member">lv2_descriptor()</ref> function is the entry point to the plugin library. The host will load the library and call this function repeatedly with increasing indices to find all the plugins defined in the library. The index is not an indentifier, the URI of the returned descriptor is used to determine the identify of the plugin.</para><para>This method is in the ``discovery&apos;&apos; threading class, so no other functions or methods in this plugin library will be called concurrently with it.</para><para>The <computeroutput><ref refid="amp_8c_1affedc7aabe2715522365f21a9c1ff65d" kindref="member">lv2_descriptor()</ref></computeroutput> function is the entry point to the plugin library. The host will load the library and call this function repeatedly with increasing indices to find all the plugins defined in the library. The index is not an indentifier, the URI of the returned descriptor is used to determine the identify of the plugin.</para><para>This method is in the ``discovery&apos;&apos; threading class, so no other functions or methods in this plugin library will be called concurrently with it. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" line="344" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c" bodystart="344" bodyend="352"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/><sp/>LV2<sp/>Metronome<sp/>Example<sp/>Plugin</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/><sp/>Copyright<sp/>2012<sp/>David<sp/>Robillard<sp/>&lt;d@drobilla.net&gt;</highlight></codeline>
<codeline lineno="4"><highlight class="comment"></highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/><sp/>Permission<sp/>to<sp/>use,<sp/>copy,<sp/>modify,<sp/>and/or<sp/>distribute<sp/>this<sp/>software<sp/>for<sp/>any</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/><sp/>purpose<sp/>with<sp/>or<sp/>without<sp/>fee<sp/>is<sp/>hereby<sp/>granted,<sp/>provided<sp/>that<sp/>the<sp/>above</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/><sp/>copyright<sp/>notice<sp/>and<sp/>this<sp/>permission<sp/>notice<sp/>appear<sp/>in<sp/>all<sp/>copies.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"></highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/><sp/>THIS<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>&quot;AS<sp/>IS&quot;<sp/>AND<sp/>THE<sp/>AUTHOR<sp/>DISCLAIMS<sp/>ALL<sp/>WARRANTIES</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/><sp/>WITH<sp/>REGARD<sp/>TO<sp/>THIS<sp/>SOFTWARE<sp/>INCLUDING<sp/>ALL<sp/>IMPLIED<sp/>WARRANTIES<sp/>OF</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/><sp/>MERCHANTABILITY<sp/>AND<sp/>FITNESS.<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE<sp/>AUTHOR<sp/>BE<sp/>LIABLE<sp/>FOR</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/><sp/>ANY<sp/>SPECIAL,<sp/>DIRECT,<sp/>INDIRECT,<sp/>OR<sp/>CONSEQUENTIAL<sp/>DAMAGES<sp/>OR<sp/>ANY<sp/>DAMAGES</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/><sp/>WHATSOEVER<sp/>RESULTING<sp/>FROM<sp/>LOSS<sp/>OF<sp/>USE,<sp/>DATA<sp/>OR<sp/>PROFITS,<sp/>WHETHER<sp/>IN<sp/>AN</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/><sp/>ACTION<sp/>OF<sp/>CONTRACT,<sp/>NEGLIGENCE<sp/>OR<sp/>OTHER<sp/>TORTIOUS<sp/>ACTION,<sp/>ARISING<sp/>OUT<sp/>OF</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/><sp/>OR<sp/>IN<sp/>CONNECTION<sp/>WITH<sp/>THE<sp/>USE<sp/>OR<sp/>PERFORMANCE<sp/>OF<sp/>THIS<sp/>SOFTWARE.</highlight></codeline>
<codeline lineno="16"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#<sp/><sp/><sp/><sp/>include<sp/>&lt;stdbool.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="atom_8h" kindref="compound">lv2/lv2plug.in/ns/ext/atom/atom.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2atom_2util_8h" kindref="compound">lv2/lv2plug.in/ns/ext/atom/util.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="lib-src_2lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2time_2time_8h" kindref="compound">lv2/lv2plug.in/ns/ext/time/time.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="urid_8h" kindref="compound">lv2/lv2plug.in/ns/ext/urid/urid.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="lv2_8h" kindref="compound">lv2/lv2plug.in/ns/lv2core/lv2.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>M_PI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33" refid="metro_8c_1ae71449b1cc6e6250b91f539153a7a0d3" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#<sp/><sp/><sp/><sp/>define<sp/>M_PI<sp/>3.14159265</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36" refid="metro_8c_1ad0ad6ecd310d1806d53fe68bec8705ba" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>EG_METRO_URI<sp/>&quot;http://lv2plug.in/plugins/eg-metro&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38" refid="struct_metro_u_r_is" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="39" refid="struct_metro_u_r_is_1a1f4ba7ae215de8c0c56e93d233b3bbbf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1a1f4ba7ae215de8c0c56e93d233b3bbbf" kindref="member">atom_Blank</ref>;</highlight></codeline>
<codeline lineno="40" refid="struct_metro_u_r_is_1a1d777756e182145071e0b2dabcef3196" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1a1d777756e182145071e0b2dabcef3196" kindref="member">atom_Float</ref>;</highlight></codeline>
<codeline lineno="41" refid="struct_metro_u_r_is_1a4b2184441fd87fa4ab946c09d934bfe6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1a4b2184441fd87fa4ab946c09d934bfe6" kindref="member">atom_Object</ref>;</highlight></codeline>
<codeline lineno="42" refid="struct_metro_u_r_is_1a0f32d5d15a0c148a2780fef0934717c2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1a0f32d5d15a0c148a2780fef0934717c2" kindref="member">atom_Path</ref>;</highlight></codeline>
<codeline lineno="43" refid="struct_metro_u_r_is_1ae8da223c791cab8ccaeee39b12ae660b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1ae8da223c791cab8ccaeee39b12ae660b" kindref="member">atom_Resource</ref>;</highlight></codeline>
<codeline lineno="44" refid="struct_metro_u_r_is_1a100cf36f8082356b0d11c8926ee9c62e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1a100cf36f8082356b0d11c8926ee9c62e" kindref="member">atom_Sequence</ref>;</highlight></codeline>
<codeline lineno="45" refid="struct_metro_u_r_is_1a787befdd2e58b0f39841dfb57a5d6173" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1a787befdd2e58b0f39841dfb57a5d6173" kindref="member">time_Position</ref>;</highlight></codeline>
<codeline lineno="46" refid="struct_metro_u_r_is_1ac92f58d7b17bf804f64fb36d4926d0b4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1ac92f58d7b17bf804f64fb36d4926d0b4" kindref="member">time_barBeat</ref>;</highlight></codeline>
<codeline lineno="47" refid="struct_metro_u_r_is_1adbeb8a85d53422e2e0265f2253656b34" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1adbeb8a85d53422e2e0265f2253656b34" kindref="member">time_beatsPerMinute</ref>;</highlight></codeline>
<codeline lineno="48" refid="struct_metro_u_r_is_1a9c3ce1aef1da4a782887ecc8a1e2ba23" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="urid_8h_1a5ff0630d245539e9f6dca10ff3c40fae" kindref="member">LV2_URID</ref><sp/><ref refid="struct_metro_u_r_is_1a9c3ce1aef1da4a782887ecc8a1e2ba23" kindref="member">time_speed</ref>;</highlight></codeline>
<codeline lineno="49"><highlight class="normal">}<sp/><ref refid="struct_metro_u_r_is" kindref="compound">MetroURIs</ref>;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>attack_s<sp/>=<sp/>0.005;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>decay_s<sp/><sp/>=<sp/>0.075;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="55" refid="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a3fbcf491b38ff3920b34d9958d688b10" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a3fbcf491b38ff3920b34d9958d688b10" kindref="member">METRO_CONTROL</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="56" refid="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a05b86c6eb9c7ce8dad709e6e1a48f5fd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a05b86c6eb9c7ce8dad709e6e1a48f5fd" kindref="member">METRO_OUT</ref><sp/><sp/><sp/><sp/><sp/>=<sp/>1</highlight></codeline>
<codeline lineno="57"><highlight class="normal">};</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8" refkind="member"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="61" refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a25367778f8bf2f394f2800be26e4cda0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a25367778f8bf2f394f2800be26e4cda0" kindref="member">STATE_ATTACK</ref>,<sp/><sp/></highlight><highlight class="comment">//<sp/>Envelope<sp/>rising</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62" refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a24a498195f55d6fc1b87b18087c604f3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a24a498195f55d6fc1b87b18087c604f3" kindref="member">STATE_DECAY</ref>,<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Envelope<sp/>lowering</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" kindref="member">STATE_OFF</ref><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Silent</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal">}<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8" kindref="member">State</ref>;</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="77" refid="struct_metro" refkind="compound"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="78" refid="struct_metro_1a9634657834ec815571a001ec39d199ea" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct___l_v2___u_r_i_d___map" kindref="compound">LV2_URID_Map</ref>*<sp/><ref refid="struct_metro_1a9634657834ec815571a001ec39d199ea" kindref="member">map</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>URID<sp/>map<sp/>feature</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79" refid="struct_metro_1ad4d1aee5161d6e66279edc5b05012087" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_metro_u_r_is" kindref="compound">MetroURIs</ref><sp/><sp/><sp/><sp/><sp/><ref refid="struct_metro_1ad4d1aee5161d6e66279edc5b05012087" kindref="member">uris</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>Cache<sp/>of<sp/>mapped<sp/>URIDs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="82" refid="struct_metro_1ab81ffab3af21d9bc735c99a362ae3766" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_l_v2___atom___sequence" kindref="compound">LV2_Atom_Sequence</ref>*<sp/><ref refid="struct_metro_1ab81ffab3af21d9bc735c99a362ae3766" kindref="member">control</ref>;</highlight></codeline>
<codeline lineno="83" refid="struct_metro_1aa7a60a05020740815537be1a2684788f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal">*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_metro_1aa7a60a05020740815537be1a2684788f" kindref="member">output</ref>;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/>ports;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Variables<sp/>to<sp/>keep<sp/>track<sp/>of<sp/>the<sp/>tempo<sp/>information<sp/>sent<sp/>by<sp/>the<sp/>host</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87" refid="struct_metro_1a8357844df6655d12ff781a3549e45dce" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="struct_metro_1a8357844df6655d12ff781a3549e45dce" kindref="member">rate</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Sample<sp/>rate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="struct_metro_1a67f939426c3147f0a45f92b72f11335a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><sp/><ref refid="struct_metro_1a67f939426c3147f0a45f92b72f11335a" kindref="member">bpm</ref>;<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Beats<sp/>per<sp/>minute<sp/>(tempo)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="struct_metro_1a761e25a27910e7725b3ff3015387251f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><sp/><ref refid="struct_metro_1a761e25a27910e7725b3ff3015387251f" kindref="member">speed</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>Transport<sp/>speed<sp/>(usually<sp/>0=stop,<sp/>1=play)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91" refid="struct_metro_1a40198227cd12fb39b20c97eed3ec2f89" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_metro_1a40198227cd12fb39b20c97eed3ec2f89" kindref="member">elapsed_len</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>Frames<sp/>since<sp/>the<sp/>start<sp/>of<sp/>the<sp/>last<sp/>click</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92" refid="struct_metro_1a53078e04d9ead20fb23a24f48d9f5139" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_metro_1a53078e04d9ead20fb23a24f48d9f5139" kindref="member">wave_offset</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>Current<sp/>play<sp/>offset<sp/>in<sp/>the<sp/>wave</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="struct_metro_1aa21e79985e7fe176b8fcbbfe4f3102bf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_state" kindref="compound">State</ref><sp/><sp/><sp/><sp/><ref refid="struct_metro_1aa21e79985e7fe176b8fcbbfe4f3102bf" kindref="member">state</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Current<sp/>play<sp/>state</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>One<sp/>cycle<sp/>of<sp/>a<sp/>sine<sp/>wave</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="struct_metro_1a42515e404bb842cfb7c3e533e5ff380a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal">*<sp/><sp/><sp/><ref refid="struct_metro_1a42515e404bb842cfb7c3e533e5ff380a" kindref="member">wave</ref>;</highlight></codeline>
<codeline lineno="97" refid="struct_metro_1af1d13cb6f02c620ee7e9647ac78bc04a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_metro_1af1d13cb6f02c620ee7e9647ac78bc04a" kindref="member">wave_len</ref>;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Envelope<sp/>parameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100" refid="struct_metro_1a08b7dc8a36da651e3b9997f3042922bd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_metro_1a08b7dc8a36da651e3b9997f3042922bd" kindref="member">attack_len</ref>;</highlight></codeline>
<codeline lineno="101" refid="struct_metro_1a728fc0ac8d1460597a2291fde05175fb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_metro_1a728fc0ac8d1460597a2291fde05175fb" kindref="member">decay_len</ref>;</highlight></codeline>
<codeline lineno="102"><highlight class="normal">}<sp/><ref refid="struct_metro" kindref="compound">Metro</ref>;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal">connect_port(<ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref><sp/>instance,</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><sp/><sp/>port,</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib_2expat_8h_1ac39e72a1de1cb50dbdc54b08d0432a24" kindref="member">data</ref>)</highlight></codeline>
<codeline lineno="108"><highlight class="normal">{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_metro" kindref="compound">Metro</ref>*<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>=<sp/>(<ref refid="struct_metro" kindref="compound">Metro</ref>*)instance;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(port)<sp/>{</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a3fbcf491b38ff3920b34d9958d688b10" kindref="member">METRO_CONTROL</ref>:</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;ports.control<sp/>=<sp/>(<ref refid="struct_l_v2___atom___sequence" kindref="compound">LV2_Atom_Sequence</ref>*)data;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="metro_8c_1a425be5f49e9c31d8d13d53190a3e7bc2a05b86c6eb9c7ce8dad709e6e1a48f5fd" kindref="member">METRO_OUT</ref>:</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;ports.output<sp/>=<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">*)data;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="121"><highlight class="normal">}</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal">activate(<ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref><sp/>instance)</highlight></codeline>
<codeline lineno="129"><highlight class="normal">{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_metro" kindref="compound">Metro</ref>*<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>=<sp/>(<ref refid="struct_metro" kindref="compound">Metro</ref>*)instance;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;<ref refid="struct_metro_1a40198227cd12fb39b20c97eed3ec2f89" kindref="member">elapsed_len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave_offset<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" kindref="member">STATE_OFF</ref>;</highlight></codeline>
<codeline lineno="135"><highlight class="normal">}</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref></highlight></codeline>
<codeline lineno="144"><highlight class="normal">instantiate(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct___l_v2___descriptor" kindref="compound">LV2_Descriptor</ref>*<sp/><sp/><sp/><sp/><sp/>descriptor,</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>,</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacelv2docgen_1ae75d75173fc2ea012acad7d886aa2f9d" kindref="member">path</ref>,</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct___l_v2___feature" kindref="compound">LV2_Feature</ref>*<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal">*<sp/>features)</highlight></codeline>
<codeline lineno="148"><highlight class="normal">{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_metro" kindref="compound">Metro</ref>*<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>=<sp/>(<ref refid="struct_metro" kindref="compound">Metro</ref>*)calloc(1,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_metro" kindref="compound">Metro</ref>));</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!</highlight><highlight class="keyword">self</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Scan<sp/>host<sp/>features<sp/>for<sp/>URID<sp/>map</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct___l_v2___u_r_i_d___map" kindref="compound">LV2_URID_Map</ref>*<sp/><ref refid="structmap" kindref="compound">map</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>0;<sp/>features[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>];<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!strcmp(features[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]-&gt;<ref refid="sord__validate_8c_1a541b32189651f63b9f97ed4a479b87a4" kindref="member">URI</ref>,<sp/><ref refid="urid_8h_1a9c331c6b6a096615994b3511cfe1d3e6" kindref="member">LV2_URID_URI</ref><sp/></highlight><highlight class="stringliteral">&quot;#map&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>map<sp/>=<sp/>(<ref refid="struct___l_v2___u_r_i_d___map" kindref="compound">LV2_URID_Map</ref>*)features[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]-&gt;<ref refid="lib_2expat_8h_1ac39e72a1de1cb50dbdc54b08d0432a24" kindref="member">data</ref>;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!map)<sp/>{</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fprintf(<ref refid="namespacewaflib_1_1ansiterm_1a44bedfddf1392d636441272f5f3c95d4" kindref="member">stderr</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Host<sp/>does<sp/>not<sp/>support<sp/>urid:map.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>free(</highlight><highlight class="keyword">self</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Map<sp/>URIS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_metro_u_r_is" kindref="compound">MetroURIs</ref>*<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="lilv__test_8c_1a42e30b2eba499e78c1647c915bdbb775" kindref="member">uris</ref><sp/>=<sp/>&amp;</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;uris;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;map<sp/>=<sp/><ref refid="charmaps_8h_1aafbcba50bf1822ffeab60f9f509e6237" kindref="member">map</ref>;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a1f4ba7ae215de8c0c56e93d233b3bbbf" kindref="member">atom_Blank</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="atom_8h_1a696299af522a697b15c6e545808a5d72" kindref="member">LV2_ATOM__Blank</ref>);</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a1d777756e182145071e0b2dabcef3196" kindref="member">atom_Float</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="atom_8h_1a28aafd3e85544ce99d45b31234cb0650" kindref="member">LV2_ATOM__Float</ref>);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a4b2184441fd87fa4ab946c09d934bfe6" kindref="member">atom_Object</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="atom_8h_1a1542e5ad14a4840351fa34e9502f2b4c" kindref="member">LV2_ATOM__Object</ref>);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a0f32d5d15a0c148a2780fef0934717c2" kindref="member">atom_Path</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="atom_8h_1aced2e05e2e5fa9688fa1c96fc7f590f7" kindref="member">LV2_ATOM__Path</ref>);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1ae8da223c791cab8ccaeee39b12ae660b" kindref="member">atom_Resource</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="atom_8h_1ae2fbcf81d6ef9b00ace562e0941ca507" kindref="member">LV2_ATOM__Resource</ref>);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a100cf36f8082356b0d11c8926ee9c62e" kindref="member">atom_Sequence</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="atom_8h_1ae5559c8b29f35636654e62ebb5400273" kindref="member">LV2_ATOM__Sequence</ref>);</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a787befdd2e58b0f39841dfb57a5d6173" kindref="member">time_Position</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="lib-src_2lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2time_2time_8h_1a9ad92407ea1d703510f8035c32dc7ccb" kindref="member">LV2_TIME__Position</ref>);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1ac92f58d7b17bf804f64fb36d4926d0b4" kindref="member">time_barBeat</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="lib-src_2lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2time_2time_8h_1a7abb1da580ce2bfa32b9709716ccc766" kindref="member">LV2_TIME__barBeat</ref>);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1adbeb8a85d53422e2e0265f2253656b34" kindref="member">time_beatsPerMinute</ref><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="lib-src_2lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2time_2time_8h_1aa57dae9a8c247fe8cc87282d3f81dba0" kindref="member">LV2_TIME__beatsPerMinute</ref>);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a9c3ce1aef1da4a782887ecc8a1e2ba23" kindref="member">time_speed</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a560d625bc0aacd00fd8e6e1e2915bf1a" kindref="member">map</ref>(map-&gt;<ref refid="struct___l_v2___u_r_i_d___map_1a19150b0e12e748ddc70a039c8557a4ce" kindref="member">handle</ref>,<sp/><ref refid="lib-src_2lv2_2lv2_2lv2_2lv2plug_8in_2ns_2ext_2time_2time_8h_1aa8776f581fe5cdb2f6768dc73b790fc0" kindref="member">LV2_TIME__speed</ref>);</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialise<sp/>instance<sp/>fields</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;rate<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;bpm<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>120.0f;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;attack_len<sp/>=<sp/>(<ref refid="lib-src_2libsoxr_2msvc_2soxr-config_8h_1a0ddb3f43e52282b59ee55d059ed74a28" kindref="member">uint32_t</ref>)(attack_s<sp/>*<sp/><ref refid="test__lib_f_l_a_c_2format_8c_1a960ad82c3ba394a46f17f5f6146c93ea" kindref="member">rate</ref>);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;decay_len<sp/><sp/>=<sp/>(<ref refid="lib-src_2libsoxr_2msvc_2soxr-config_8h_1a0ddb3f43e52282b59ee55d059ed74a28" kindref="member">uint32_t</ref>)(decay_s<sp/>*<sp/>rate);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" kindref="member">STATE_OFF</ref>;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Generate<sp/>one<sp/>cycle<sp/>of<sp/>a<sp/>sine<sp/>wave<sp/>at<sp/>the<sp/>desired<sp/>frequency</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>freq<sp/>=<sp/>440.0<sp/>*<sp/>2.0;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>amp<sp/><sp/>=<sp/>0.5;</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave_len<sp/>=<sp/>(<ref refid="lib-src_2libsoxr_2msvc_2soxr-config_8h_1a0ddb3f43e52282b59ee55d059ed74a28" kindref="member">uint32_t</ref>)(rate<sp/>/<sp/>freq);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave<sp/><sp/><sp/><sp/><sp/>=<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">*)malloc(self-&gt;wave_len<sp/>*<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>0;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave_len;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>=<sp/>(float)(<ref refid="pffft_8c_1a28642ecbd9d1e77ab5a140a460f47d83" kindref="member">sin</ref>(<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>*<sp/>2<sp/>*<sp/><ref refid="metro_8c_1ae71449b1cc6e6250b91f539153a7a0d3" kindref="member">M_PI</ref><sp/>*<sp/>freq<sp/>/<sp/>rate)<sp/>*<sp/>amp);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref>)</highlight><highlight class="keyword">self</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="198"><highlight class="normal">}</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><ref refid="launch_8c_1a4b66d5e31b5dc18b314c8a68163263bd" kindref="member">cleanup</ref>(<ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref><sp/>instance)</highlight></codeline>
<codeline lineno="202"><highlight class="normal">{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>free(instance);</highlight></codeline>
<codeline lineno="204"><highlight class="normal">}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal">play(<ref refid="struct_metro" kindref="compound">Metro</ref>*<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">,<sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>begin,<sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>)</highlight></codeline>
<codeline lineno="212"><highlight class="normal">{</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal">*<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><sp/><sp/><ref refid="namespacelv2specgen_1a653e2b7722801dea4d25040ac958b631" kindref="member">output</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;ports.output;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>frames_per_beat<sp/>=<sp/>60.0f<sp/>/<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;bpm<sp/>*<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;rate;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self-&gt;speed<sp/>==<sp/>0.0f)<sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(output,<sp/>0,<sp/>(end<sp/>-<sp/>begin)<sp/>*<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>=<sp/>begin;<sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>&lt;<sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(self-&gt;state)<sp/>{</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a25367778f8bf2f394f2800be26e4cda0" kindref="member">STATE_ATTACK</ref>:</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Amplitude<sp/>increases<sp/>from<sp/>0..1<sp/>until<sp/>attack_len</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>output[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave[</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave_offset]<sp/>*</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;elapsed_len<sp/>/<sp/>(float)self-&gt;attack_len;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(self-&gt;elapsed_len<sp/>&gt;=<sp/>self-&gt;attack_len)<sp/>{</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a24a498195f55d6fc1b87b18087c604f3" kindref="member">STATE_DECAY</ref>;</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a24a498195f55d6fc1b87b18087c604f3" kindref="member">STATE_DECAY</ref>:</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Amplitude<sp/>decreases<sp/>from<sp/>1..0<sp/>until<sp/>attack_len<sp/>+<sp/>decay_len</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>output[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>=<sp/>0.0f;</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>output[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave[</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave_offset]<sp/>*</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1<sp/>-<sp/>((</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;elapsed_len<sp/>-<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;attack_len)<sp/>/</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;decay_len));</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self-&gt;elapsed_len<sp/>&gt;=<sp/>self-&gt;attack_len<sp/>+<sp/>self-&gt;decay_len)<sp/>{</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" kindref="member">STATE_OFF</ref>;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" kindref="member">STATE_OFF</ref>:</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>output[<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>]<sp/>=<sp/>0.0f;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>continuously<sp/>play<sp/>the<sp/>sine<sp/>wave<sp/>regardless<sp/>of<sp/>envelope</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave_offset<sp/>=<sp/>(</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;wave_offset<sp/>+<sp/>1)<sp/>%<sp/>self-&gt;wave_len;</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Update<sp/>elapsed<sp/>time<sp/>and<sp/>start<sp/>attack<sp/>if<sp/>necessary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(++self-&gt;elapsed_len<sp/>==<sp/>frames_per_beat)<sp/>{</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a25367778f8bf2f394f2800be26e4cda0" kindref="member">STATE_ATTACK</ref>;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;elapsed_len<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="254"><highlight class="normal">}</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal">update_position(<ref refid="struct_metro" kindref="compound">Metro</ref>*<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_l_v2___atom___object" kindref="compound">LV2_Atom_Object</ref>*<sp/>obj)</highlight></codeline>
<codeline lineno="262"><highlight class="normal">{</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_metro_u_r_is" kindref="compound">MetroURIs</ref>*<sp/><ref refid="lilv__test_8c_1a42e30b2eba499e78c1647c915bdbb775" kindref="member">uris</ref><sp/>=<sp/>&amp;</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;uris;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Received<sp/>new<sp/>transport<sp/>position/speed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_l_v2___atom" kindref="compound">LV2_Atom</ref><sp/>*beat<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*bpm<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*speed<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>lv2_atom_object_get(obj,</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1ac92f58d7b17bf804f64fb36d4926d0b4" kindref="member">time_barBeat</ref>,<sp/>&amp;beat,</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1adbeb8a85d53422e2e0265f2253656b34" kindref="member">time_beatsPerMinute</ref>,<sp/>&amp;bpm,</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a9c3ce1aef1da4a782887ecc8a1e2ba23" kindref="member">time_speed</ref>,<sp/>&amp;speed,</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bpm<sp/>&amp;&amp;<sp/>bpm-&gt;type<sp/>==<sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a1d777756e182145071e0b2dabcef3196" kindref="member">atom_Float</ref>)<sp/>{</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Tempo<sp/>changed,<sp/>update<sp/>BPM</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;bpm<sp/>=<sp/>((<ref refid="struct_l_v2___atom___float" kindref="compound">LV2_Atom_Float</ref>*)bpm)-&gt;body;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(speed<sp/>&amp;&amp;<sp/>speed-&gt;type<sp/>==<sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a1d777756e182145071e0b2dabcef3196" kindref="member">atom_Float</ref>)<sp/>{</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Speed<sp/>changed,<sp/>e.g.<sp/>0<sp/>(stop)<sp/>to<sp/>1<sp/>(play)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;speed<sp/>=<sp/>((<ref refid="struct_l_v2___atom___float" kindref="compound">LV2_Atom_Float</ref>*)speed)-&gt;body;</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(beat<sp/>&amp;&amp;<sp/>beat-&gt;<ref refid="struct_l_v2___atom_1a5d13f0da49ed0ad1102b651220d930cb" kindref="member">type</ref><sp/>==<sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a1d777756e182145071e0b2dabcef3196" kindref="member">atom_Float</ref>)<sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Received<sp/>a<sp/>beat<sp/>position,<sp/>synchronise</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>hard<sp/>sync<sp/>may<sp/>cause<sp/>clicks,<sp/>a<sp/>real<sp/>plugin<sp/>would<sp/>be<sp/>more<sp/>graceful</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>frames_per_beat<sp/>=<sp/>60.0f<sp/>/<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;bpm<sp/>*<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;rate;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>bar_beats<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>((<ref refid="struct_l_v2___atom___float" kindref="compound">LV2_Atom_Float</ref>*)beat)-&gt;body;</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>beat_beats<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>bar_beats<sp/>-<sp/>floorf(bar_beats);</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;elapsed_len<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>beat_beats<sp/>*<sp/>frames_per_beat;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self-&gt;elapsed_len<sp/>&lt;<sp/>self-&gt;attack_len)<sp/>{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a25367778f8bf2f394f2800be26e4cda0" kindref="member">STATE_ATTACK</ref>;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self-&gt;elapsed_len<sp/>&lt;<sp/>self-&gt;attack_len<sp/>+<sp/>self-&gt;decay_len)<sp/>{</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a24a498195f55d6fc1b87b18087c604f3" kindref="member">STATE_DECAY</ref>;</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;state<sp/>=<sp/><ref refid="metro_8c_1a5d74787dedbc4e11c1ab15bf487e61f8a4038ca872e1ed104c16122c365bd3ca0" kindref="member">STATE_OFF</ref>;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="295"><highlight class="normal">}</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal">run(<ref refid="lv2_8h_1a95eafb0a5290f30bcdc8c0f8eb992eaf" kindref="member">LV2_Handle</ref><sp/>instance,<sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>sample_count)</highlight></codeline>
<codeline lineno="299"><highlight class="normal">{</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_metro" kindref="compound">Metro</ref>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>=<sp/>(<ref refid="struct_metro" kindref="compound">Metro</ref>*)instance;</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_metro_u_r_is" kindref="compound">MetroURIs</ref>*<sp/><ref refid="lilv__test_8c_1a42e30b2eba499e78c1647c915bdbb775" kindref="member">uris</ref><sp/>=<sp/>&amp;</highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;uris;</highlight></codeline>
<codeline lineno="302"><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Work<sp/>forwards<sp/>in<sp/>time<sp/>frame<sp/>by<sp/>frame,<sp/>handling<sp/>events<sp/>as<sp/>we<sp/>go</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_l_v2___atom___sequence" kindref="compound">LV2_Atom_Sequence</ref>*<sp/><ref refid="1-single-block_8c_1a18b1d64a94008e3c56953d279b8095e2" kindref="member">in</ref><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">-&gt;ports.control;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_t<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_l_v2___atom___event" kindref="compound">LV2_Atom_Event</ref>*<sp/>ev<sp/>=<sp/>lv2_atom_sequence_begin(&amp;in-&gt;<ref refid="struct_l_v2___atom___sequence_1ab676c64fc85280dea192e5d879b1b9b2" kindref="member">body</ref>);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!lv2_atom_sequence_is_end(&amp;in-&gt;<ref refid="struct_l_v2___atom___sequence_1ab676c64fc85280dea192e5d879b1b9b2" kindref="member">body</ref>,<sp/>in-&gt;<ref refid="struct_l_v2___atom___sequence_1a0e2e9e2e38a6a6d918f05f322ee567ee" kindref="member">atom</ref>.<ref refid="struct_l_v2___atom_1a0f2fb72ad77d6e3dc119c56b40a6d639" kindref="member">size</ref>,<sp/>ev);</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ev<sp/>=<sp/>lv2_atom_sequence_next(ev))<sp/>{</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Play<sp/>the<sp/>click<sp/>for<sp/>the<sp/>time<sp/>slice<sp/>from<sp/>last_t<sp/>until<sp/>now</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>play(</highlight><highlight class="keyword">self</highlight><highlight class="normal">,<sp/>last_t,<sp/>ev-&gt;time.frames);</highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>this<sp/>event<sp/>is<sp/>an<sp/>Object</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(or<sp/>deprecated<sp/>Blank<sp/>to<sp/>tolerate<sp/>old<sp/>hosts)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ev-&gt;body.type<sp/>==<sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a4b2184441fd87fa4ab946c09d934bfe6" kindref="member">atom_Object</ref><sp/>||</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ev-&gt;body.type<sp/>==<sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a1f4ba7ae215de8c0c56e93d233b3bbbf" kindref="member">atom_Blank</ref>)<sp/>{</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_l_v2___atom___object" kindref="compound">LV2_Atom_Object</ref>*<sp/>obj<sp/>=<sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_l_v2___atom___object" kindref="compound">LV2_Atom_Object</ref>*)&amp;ev-&gt;<ref refid="struct_l_v2___atom___object_1a660e9f36b7bdf33e8d054b5b573d8fdb" kindref="member">body</ref>;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="winfun_8c_1ab24f32995c1d94525943b4568cce20cb" kindref="member">if</ref><sp/>(obj-&gt;<ref refid="struct_l_v2___atom___object_1a660e9f36b7bdf33e8d054b5b573d8fdb" kindref="member">body</ref>.<ref refid="struct_l_v2___atom___object___body_1a275302d6dd5d94847097cd5b054c1b6a" kindref="member">otype</ref><sp/>==<sp/>uris-&gt;<ref refid="struct_metro_u_r_is_1a787befdd2e58b0f39841dfb57a5d6173" kindref="member">time_Position</ref>)<sp/>{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Received<sp/>position<sp/>information,<sp/>update</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>update_position(</highlight><highlight class="keyword">self</highlight><highlight class="normal">,<sp/>obj);</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Update<sp/>time<sp/>for<sp/>next<sp/>iteration<sp/>and<sp/>move<sp/>to<sp/>next<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_t<sp/>=<sp/>ev-&gt;time.frames;</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Play<sp/>for<sp/>remainder<sp/>of<sp/>cycle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>play(</highlight><highlight class="keyword">self</highlight><highlight class="normal">,<sp/>last_t,<sp/>sample_count);</highlight></codeline>
<codeline lineno="330"><highlight class="normal">}</highlight></codeline>
<codeline lineno="331"><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct___l_v2___descriptor" kindref="compound">LV2_Descriptor</ref><sp/>descriptor<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="metro_8c_1ad0ad6ecd310d1806d53fe68bec8705ba" kindref="member">EG_METRO_URI</ref>,</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>instantiate,</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/>connect_port,</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/>activate,</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>run,</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><sp/></highlight><highlight class="comment">//<sp/>deactivate,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="launch_8c_1a4b66d5e31b5dc18b314c8a68163263bd" kindref="member">cleanup</ref>,</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/><sp/></highlight><highlight class="comment">//<sp/>extension_data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="341"><highlight class="normal">};</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><ref refid="lv2_8h_1a05eb2f14429fd6ae501265b5e5af8309" kindref="member">LV2_SYMBOL_EXPORT</ref><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct___l_v2___descriptor" kindref="compound">LV2_Descriptor</ref>*</highlight></codeline>
<codeline lineno="344" refid="metro_8c_1affedc7aabe2715522365f21a9c1ff65d" refkind="member"><highlight class="normal"><ref refid="metro_8c_1affedc7aabe2715522365f21a9c1ff65d" kindref="member">lv2_descriptor</ref>(<ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>index)</highlight></codeline>
<codeline lineno="345"><highlight class="normal">{</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(index)<sp/>{</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>&amp;descriptor;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="352"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/lv2/lv2/plugins/eg-metro.lv2/metro.c"/>
  </compounddef>
</doxygen>
