<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="pa__linux__asihpi_8c" kind="file" language="C++">
    <compoundname>pa_linux_asihpi.c</compoundname>
    <includes local="no">unistd.h</includes>
    <includes local="no">stdio.h</includes>
    <includes local="no">stdlib.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">pthread.h</includes>
    <includes refid="assert_8h" local="no">assert.h</includes>
    <includes local="no">math.h</includes>
    <includes local="no">asihpi/hpi.h</includes>
    <includes refid="portaudio_8h" local="yes">portaudio.h</includes>
    <includes refid="pa__util_8h" local="yes">pa_util.h</includes>
    <includes refid="pa__unix__util_8h" local="yes">pa_unix_util.h</includes>
    <includes refid="pa__allocation_8h" local="yes">pa_allocation.h</includes>
    <includes refid="pa__hostapi_8h" local="yes">pa_hostapi.h</includes>
    <includes refid="pa__stream_8h" local="yes">pa_stream.h</includes>
    <includes refid="pa__cpuload_8h" local="yes">pa_cpuload.h</includes>
    <includes refid="pa__process_8h" local="yes">pa_process.h</includes>
    <includes refid="pa__converters_8h" local="yes">pa_converters.h</includes>
    <includes refid="pa__debugprint_8h" local="yes">pa_debugprint.h</includes>
    <incdepgraph>
      <node id="29733">
        <label>pa_hostapi.h</label>
        <link refid="pa__hostapi_8h"/>
        <childnode refid="29727" relation="include">
        </childnode>
      </node>
      <node id="29721">
        <label>stdlib.h</label>
      </node>
      <node id="29732">
        <label>pa_allocation.h</label>
        <link refid="pa__allocation_8h"/>
      </node>
      <node id="29729">
        <label>pa_unix_util.h</label>
        <link refid="pa__unix__util_8h"/>
        <childnode refid="29730" relation="include">
        </childnode>
        <childnode refid="29724" relation="include">
        </childnode>
        <childnode refid="29723" relation="include">
        </childnode>
        <childnode refid="29731" relation="include">
        </childnode>
      </node>
      <node id="29735">
        <label>pa_process.h</label>
        <link refid="pa__process_8h"/>
        <childnode refid="29727" relation="include">
        </childnode>
        <childnode refid="29736" relation="include">
        </childnode>
        <childnode refid="29737" relation="include">
        </childnode>
      </node>
      <node id="29730">
        <label>pa_cpuload.h</label>
        <link refid="pa__cpuload_8h"/>
      </node>
      <node id="29724">
        <label>assert.h</label>
        <link refid="assert_8h"/>
      </node>
      <node id="29726">
        <label>asihpi/hpi.h</label>
      </node>
      <node id="29718">
        <label>C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c</label>
        <link refid="pa_linux_asihpi.c"/>
        <childnode refid="29719" relation="include">
        </childnode>
        <childnode refid="29720" relation="include">
        </childnode>
        <childnode refid="29721" relation="include">
        </childnode>
        <childnode refid="29722" relation="include">
        </childnode>
        <childnode refid="29723" relation="include">
        </childnode>
        <childnode refid="29724" relation="include">
        </childnode>
        <childnode refid="29725" relation="include">
        </childnode>
        <childnode refid="29726" relation="include">
        </childnode>
        <childnode refid="29727" relation="include">
        </childnode>
        <childnode refid="29728" relation="include">
        </childnode>
        <childnode refid="29729" relation="include">
        </childnode>
        <childnode refid="29732" relation="include">
        </childnode>
        <childnode refid="29733" relation="include">
        </childnode>
        <childnode refid="29734" relation="include">
        </childnode>
        <childnode refid="29730" relation="include">
        </childnode>
        <childnode refid="29735" relation="include">
        </childnode>
        <childnode refid="29736" relation="include">
        </childnode>
        <childnode refid="29739" relation="include">
        </childnode>
      </node>
      <node id="29723">
        <label>pthread.h</label>
      </node>
      <node id="29722">
        <label>string.h</label>
      </node>
      <node id="29719">
        <label>unistd.h</label>
      </node>
      <node id="29737">
        <label>pa_dither.h</label>
        <link refid="pa__dither_8h"/>
        <childnode refid="29738" relation="include">
        </childnode>
      </node>
      <node id="29731">
        <label>signal.h</label>
      </node>
      <node id="29727">
        <label>portaudio.h</label>
        <link refid="portaudio_8h"/>
      </node>
      <node id="29725">
        <label>math.h</label>
      </node>
      <node id="29734">
        <label>pa_stream.h</label>
        <link refid="pa__stream_8h"/>
        <childnode refid="29727" relation="include">
        </childnode>
      </node>
      <node id="29738">
        <label>pa_types.h</label>
        <link refid="pa__types_8h"/>
      </node>
      <node id="29736">
        <label>pa_converters.h</label>
        <link refid="pa__converters_8h"/>
        <childnode refid="29727" relation="include">
        </childnode>
      </node>
      <node id="29739">
        <label>pa_debugprint.h</label>
        <link refid="pa__debugprint_8h"/>
      </node>
      <node id="29720">
        <label>stdio.h</label>
      </node>
      <node id="29728">
        <label>pa_util.h</label>
        <link refid="pa__util_8h"/>
        <childnode refid="29727" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innerclass refid="struct_pa_asi_hpi_host_api_representation" prot="public">PaAsiHpiHostApiRepresentation</innerclass>
    <innerclass refid="struct_pa_asi_hpi_device_info" prot="public">PaAsiHpiDeviceInfo</innerclass>
    <innerclass refid="struct_pa_asi_hpi_stream_component" prot="public">PaAsiHpiStreamComponent</innerclass>
    <innerclass refid="struct_pa_asi_hpi_stream" prot="public">PaAsiHpiStream</innerclass>
    <innerclass refid="struct_pa_asi_hpi_stream_info" prot="public">PaAsiHpiStreamInfo</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" prot="public" static="no">
        <name>PA_ENSURE_</name>
        <param><defname>expr</defname></param>
        <initializer>do { \
        <ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref> paError = (expr); \
        <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>( <ref refid="pa__unix__util_8h_1a9acc330d508b9a3b775cfdf7ce405e7d" kindref="member">UNLIKELY</ref>( paError &lt; <ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref> ) ) \
        { \
            <ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>(( &quot;Expression &apos;&quot; #expr &quot;&apos; failed <ref refid="latency_8c_1a7d946209d777cb95fe30364b8d321207" kindref="member">in</ref> &apos;&quot; __FILE__ &quot;&apos;, line: &quot; STRINGIZE( __LINE__ ) &quot;\n&quot; )); \
            result = paError; \
            goto <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref>; \
        } \
    } while (0);</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Evaluate expression, and return on any PortAudio errors </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="173" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="173" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" prot="public" static="no">
        <name>PA_UNLESS_</name>
        <param><defname>expr</defname></param>
        <param><defname>paError</defname></param>
        <initializer>do { \
        <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>( <ref refid="pa__unix__util_8h_1a9acc330d508b9a3b775cfdf7ce405e7d" kindref="member">UNLIKELY</ref>( (expr) == 0 ) ) \
        { \
            <ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>(( &quot;Expression &apos;&quot; #expr &quot;&apos; failed <ref refid="latency_8c_1a7d946209d777cb95fe30364b8d321207" kindref="member">in</ref> &apos;&quot; __FILE__ &quot;&apos;, line: &quot; STRINGIZE( __LINE__ ) &quot;\n&quot; )); \
            result = (paError); \
            goto <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref>; \
        } \
    } while( 0 );</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Assert expression, else return the provided PaError </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="185" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="185" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" prot="public" static="no">
        <name>PA_ASIHPI_UNLESS_</name>
        <param><defname>expr</defname></param>
        <param><defname>paError</defname></param>
        <initializer>do { \
        hpi_err_t hpiError = (expr); \
        /* If HPI <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref> occurred */ \
        <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>( <ref refid="pa__unix__util_8h_1a9acc330d508b9a3b775cfdf7ce405e7d" kindref="member">UNLIKELY</ref>( hpiError ) ) \
        { \
	    char szError[256]; \
	    HPI_GetErrorText( hpiError, szError ); \
	    <ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>(( &quot;HPI <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref> %<ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref> occurred: %s\n&quot;, hpiError, szError )); \
	    /* This message will always be displayed, even <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref> <ref refid="mm_8c_1ac3e1795766a80ec63b157951b4b9a7d4" kindref="member">debug</ref> <ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref> is disabled */ \
            <ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>(( &quot;Expression &apos;&quot; #expr &quot;&apos; failed <ref refid="latency_8c_1a7d946209d777cb95fe30364b8d321207" kindref="member">in</ref> &apos;&quot; __FILE__ &quot;&apos;, line: &quot; STRINGIZE( __LINE__ ) &quot;\n&quot; )); \
            if( (paError) == <ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref> ) \
	    { \
	        <ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>(( &quot;Host <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref> description: %s\n&quot;, szError )); \
	        /* <ref refid="pa__util_8h_1a9c3ad627c13c1d695fef054c216667f7" kindref="member">PaUtil_SetLastHostErrorInfo</ref> should only be used <ref refid="latency_8c_1a7d946209d777cb95fe30364b8d321207" kindref="member">in</ref> <ref refid="nasm_8h_1aaf57ffcfef0bee04f46c6ada2a905a8c" kindref="member">the</ref> <ref refid="_simple_block_file_test_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4" kindref="member">main</ref> thread */ \
	        <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>( pthread_equal( pthread_self(), <ref refid="pa__unix__util_8h_1a786fbebfd9d315bc39dec32568a4dfe1" kindref="member">paUnixMainThread</ref> ) ) \
                { \
		    <ref refid="pa__util_8h_1a9c3ad627c13c1d695fef054c216667f7" kindref="member">PaUtil_SetLastHostErrorInfo</ref>( <ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d" kindref="member">paInDevelopment</ref>, hpiError, szError ); \
                } \
	    } \
	    /* If <ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref> is specified, continue as usual */ \
            /* (useful <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref> you only want to print <ref refid="latency_8c_1a71fd1c281affec034757279e4f91c50b" kindref="member">out</ref> <ref refid="nasm_8h_1aaf57ffcfef0bee04f46c6ada2a905a8c" kindref="member">the</ref> <ref refid="mm_8c_1ac3e1795766a80ec63b157951b4b9a7d4" kindref="member">debug</ref> messages above) */ \
	    <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>( (paError) &lt; 0 ) \
	    { \
	        result = (paError); \
	        goto <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref>; \
	    } \
        } \
    } while( 0 );</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Check return value of HPI function, and map it to PaError </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="196" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="196" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" prot="public" static="no">
        <name>PA_ASIHPI_REPORT_ERROR_</name>
        <param><defname>hpiErrorCode</defname></param>
        <initializer>do { \
        char szError[256]; \
        HPI_GetErrorText( hpiError, szError ); \
        <ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>(( &quot;HPI <ref refid="sndfile__save_8m_1ada4b423bc19e6ff5c5b514e55f518a82" kindref="member">error</ref> %<ref refid="poly-fir_8h_1a2530554172d8629149ec56816eeaa947" kindref="member">d</ref> occurred: %s\n&quot;, hpiError, szError )); \
        /* <ref refid="pa__util_8h_1a9c3ad627c13c1d695fef054c216667f7" kindref="member">PaUtil_SetLastHostErrorInfo</ref> should only be used <ref refid="latency_8c_1a7d946209d777cb95fe30364b8d321207" kindref="member">in</ref> <ref refid="nasm_8h_1aaf57ffcfef0bee04f46c6ada2a905a8c" kindref="member">the</ref> <ref refid="_simple_block_file_test_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4" kindref="member">main</ref> thread */ \
        <ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref>( pthread_equal( pthread_self(), <ref refid="pa__unix__util_8h_1a786fbebfd9d315bc39dec32568a4dfe1" kindref="member">paUnixMainThread</ref> ) ) \
	{ \
	    <ref refid="pa__util_8h_1a9c3ad627c13c1d695fef054c216667f7" kindref="member">PaUtil_SetLastHostErrorInfo</ref>( <ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d" kindref="member">paInDevelopment</ref>, (hpiErrorCode), szError ); \
	} \
    } while( 0 );</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Report HPI error code and text </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="227" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="227" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__linux__asihpi_8c_1acebea7ce0e959421c271bea9c1985b95" prot="public" static="no">
        <name>PA_ASIHPI_AVAILABLE_FORMATS_</name>
        <initializer>(<ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref> | <ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref> | <ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref> | <ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref> | <ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><ref refid="struct_sample" kindref="compound">Sample</ref> formats available natively on AudioScience hardware </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="242" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="242" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__linux__asihpi_8c_1acf0737511ef6ce9aa8d588542d02fad5" prot="public" static="no">
        <name>PA_ASIHPI_USE_BBM_</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Enable background bus mastering (BBM) for buffer transfers, if available (see HPI docs) </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="244" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="244" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__linux__asihpi_8c_1a66be6c722e2466a7c6eb3138f4bbea0b" prot="public" static="no">
        <name>PA_ASIHPI_MIN_FRAMES_</name>
        <initializer>1152</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Minimum number of frames in HPI buffer (for either data or available space). If buffer contains less data/space, it indicates xrun or completion. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="247" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="247" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="pa__linux__asihpi_8c_1a844787c5015845c0601c0a396dbfaf56" prot="public" static="no">
        <name>PA_ASIHPI_MIN_POLLING_INTERVAL_</name>
        <initializer>10</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Minimum polling interval in milliseconds, which determines minimum host buffer size </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="249" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="249" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="enum">
      <memberdef kind="enum" id="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45" prot="public" static="no">
        <name>PaAsiHpiStreamState</name>
        <enumvalue id="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be" prot="public">
          <name>paAsiHpiStoppedState</name>
          <initializer>=0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e" prot="public">
          <name>paAsiHpiActiveState</name>
          <initializer>=1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0188ca40210ba62871ac2224749185d1" prot="public">
          <name>paAsiHpiCallbackFinishedState</name>
          <initializer>=2</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stream state as defined by PortAudio. It seems that the host API implementation has to keep track of the PortAudio stream state. Please note that this is NOT the same as the state of the underlying HPI stream. By separating these two concepts, a lot of flexibility is gained. There is a rough match between the two, of course, but forcing a precise match is difficult. For example, HPI_STATE_DRAINED can occur during the Active state of PortAudio (due to underruns) and also during CallBackFinished in the case of an output stream. Similarly, HPI_STATE_STOPPED mostly coincides with the Stopped PortAudio state, by may also occur in the CallbackFinished state when recording is finished.</para><para>Here is a rough match-up:</para><para>PortAudio state =&gt; HPI state <hruler/>
 Active =&gt; HPI_STATE_RECORDING, HPI_STATE_PLAYING, (HPI_STATE_DRAINED) Stopped =&gt; HPI_STATE_STOPPED CallbackFinished =&gt; HPI_STATE_STOPPED, HPI_STATE_DRAINED </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="316" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="315" bodyend="320"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="pa__linux__asihpi_8c_1af49eea0864132957170b3a4f05149ea0" prot="public" static="no">
        <type>struct <ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref></type>
        <definition>typedef struct PaAsiHpiHostApiRepresentation
 PaAsiHpiHostApiRepresentation</definition>
        <argsstring></argsstring>
        <name>PaAsiHpiHostApiRepresentation</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Host API global data </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="271" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__linux__asihpi_8c_1a98ff61cdfe8295b90cf086976941f9c3" prot="public" static="no">
        <type>struct <ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref></type>
        <definition>typedef struct PaAsiHpiDeviceInfo
 PaAsiHpiDeviceInfo</definition>
        <argsstring></argsstring>
        <name>PaAsiHpiDeviceInfo</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Device data </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="296" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__linux__asihpi_8c_1ae2c4f8b7d8089cacf9cef03aaf98d0fb" prot="public" static="no">
        <type>enum <ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45" kindref="member">PaAsiHpiStreamState</ref></type>
        <definition>typedef enum PaAsiHpiStreamState
 PaAsiHpiStreamState</definition>
        <argsstring></argsstring>
        <name>PaAsiHpiStreamState</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stream state as defined by PortAudio. It seems that the host API implementation has to keep track of the PortAudio stream state. Please note that this is NOT the same as the state of the underlying HPI stream. By separating these two concepts, a lot of flexibility is gained. There is a rough match between the two, of course, but forcing a precise match is difficult. For example, HPI_STATE_DRAINED can occur during the Active state of PortAudio (due to underruns) and also during CallBackFinished in the case of an output stream. Similarly, HPI_STATE_STOPPED mostly coincides with the Stopped PortAudio state, by may also occur in the CallbackFinished state when recording is finished.</para><para>Here is a rough match-up:</para><para>PortAudio state =&gt; HPI state <hruler/>
 Active =&gt; HPI_STATE_RECORDING, HPI_STATE_PLAYING, (HPI_STATE_DRAINED) Stopped =&gt; HPI_STATE_STOPPED CallbackFinished =&gt; HPI_STATE_STOPPED, HPI_STATE_DRAINED </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="321" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__linux__asihpi_8c_1aa263b75175c6771cfa32d0ca7c564c87" prot="public" static="no">
        <type>struct <ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref></type>
        <definition>typedef struct PaAsiHpiStreamComponent
 PaAsiHpiStreamComponent</definition>
        <argsstring></argsstring>
        <name>PaAsiHpiStreamComponent</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stream component data (associated with one direction, i.e. either input or output) </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="349" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__linux__asihpi_8c_1a1b2e9d97e26672a58ed4b71e153a912e" prot="public" static="no">
        <type>struct <ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref></type>
        <definition>typedef struct PaAsiHpiStream
 PaAsiHpiStream</definition>
        <argsstring></argsstring>
        <name>PaAsiHpiStream</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stream data </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="393" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="pa__linux__asihpi_8c_1a1f82a2733de7e58bb4adf22f9e965ec3" prot="public" static="no">
        <type>struct <ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref></type>
        <definition>typedef struct PaAsiHpiStreamInfo
 PaAsiHpiStreamInfo</definition>
        <argsstring></argsstring>
        <name>PaAsiHpiStreamInfo</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stream state information, collected together for convenience </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="422" column="1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a35ba54c5bea6b14989d1de373b6961f1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>PaError PaAsiHpi_Initialize</definition>
        <argsstring>(PaUtilHostApiRepresentation **hostApi, PaHostApiIndex index)</argsstring>
        <name>PaAsiHpi_Initialize</name>
        <param>
          <type><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> **</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1aeef6da084c57c70aa94be97411e19930" kindref="member">PaHostApiIndex</ref></type>
          <declname>index</declname>
          <defname>hostApiIndex</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Initialize host API implementation. This is the only function exported beyond this file. It is called by PortAudio to initialize the host API. It stores API info, finds and registers all devices, and sets up callback and blocking interfaces.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hostApi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to host API struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>hostApiIndex</parametername>
</parameternamelist>
<parameterdescription>
<para>Index of current (HPI) host API</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="436" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="727" bodyend="794"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1aceda435bfe9c0d0959dcd41043016c6c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void Terminate</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi)</argsstring>
        <name>Terminate</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Terminate host API implementation. This closes all HPI adapters and frees the HPI subsystem. It also frees the host API struct memory. It should be called once for every PaAsiHpi_Initialize call.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>Pointer</parametername>
</parameternamelist>
<parameterdescription>
<para>to host API struct </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="442" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="803" bodyend="839"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1addd36fca55daaf757e041555254b05e3" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError IsFormatSupported</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, const PaStreamParameters *inputParameters, const PaStreamParameters *outputParameters, double sampleRate)</argsstring>
        <name>IsFormatSupported</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>inputParameters</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>outputParameters</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Checks whether the desired stream formats and devices are supported (for both input and output). This is done by actually opening the appropriate HPI streams and closing them again.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hostApi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to host API struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>inputParameters</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream parameter struct for input side of stream</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>outputParameters</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream parameter struct for output side of stream</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>sampleRate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired sample rate</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (paFormatIsSupported on success) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="443" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1116" bodyend="1160"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ac43ea176a845c04786718d19a88b9455" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError OpenStream</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, PaStream **s, const PaStreamParameters *inputParameters, const PaStreamParameters *outputParameters, double sampleRate, unsigned long framesPerBuffer, PaStreamFlags streamFlags, PaStreamCallback *streamCallback, void *userData)</argsstring>
        <name>OpenStream</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> **</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>inputParameters</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>outputParameters</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>framesPerBuffer</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a37c7ac3ace7d2dd1430f40ecdee4ebb6" kindref="member">PaStreamFlags</ref></type>
          <declname>streamFlags</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a8a60fb2a5ec9cbade3f54a9c978e2710" kindref="member">PaStreamCallback</ref> *</type>
          <declname>streamCallback</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>userData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Opens PortAudio stream. This determines a suitable value for framesPerBuffer, if the user didn&apos;t specify it, based on the suggested latency. It then opens each requested stream direction with the appropriate stream format, and allocates the required stream buffers. It sets up the various PortAudio structures dealing with streams, and estimates the stream latency.</para><para>See <ref refid="pa__hostapi_8h" kindref="compound">pa_hostapi.h</ref> for a list of validity guarantees made about OpenStream parameters.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hostApi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to host API struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>List of open streams, where successfully opened stream will go</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>inputParameters</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream parameter struct for input side of stream</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>outputParameters</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream parameter struct for output side of stream</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>sampleRate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired sample rate</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>framesPerBuffer</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired number of frames per buffer passed to user callback (or chunk size for blocking stream)</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>streamFlags</parametername>
</parameternamelist>
<parameterdescription>
<para>Stream flags</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>streamCallback</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to user callback function (zero for blocking interface)</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>userData</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to user data that will be passed to callback function along with data</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="449" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1661" bodyend="1849"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ad8f9270971cda8cb374863404452d862" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError CloseStream</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>CloseStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Close PortAudio stream. When CloseStream() is called, the multi-api layer ensures that the stream has already been stopped or aborted. This closes the underlying HPI streams and deallocates stream buffers and structs.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="458" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1861" bodyend="1905"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a7cf7ef1e6dff60057c311cfa4443c176" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError StartStream</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>StartStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Start PortAudio stream. If the stream has a callback interface, this starts a helper thread to feed the user callback. The thread will then take care of starting the HPI streams, and this function will block until the streams actually start. In the case of a blocking interface, the HPI streams are simply started.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="459" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2001" bodyend="2024"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a1ef00c63434f41dfdd7aec1ff772af8f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError StopStream</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>StopStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stop PortAudio stream. This blocks until the output buffers are drained.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="460" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2146" bodyend="2149"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a5ab5d3c6ed46c40fea27df639887aa5a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError AbortStream</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>AbortStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Abort PortAudio stream. This discards any existing data in output buffers and stops the stream immediately.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="461" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2159" bodyend="2162"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1aa9f1516c5edd9ea34b8e150f662f8f4e" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError IsStreamStopped</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>IsStreamStopped</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Determine whether the stream is stopped. A stream is considered to be stopped prior to a successful call to StartStream and after a successful call to StopStream or AbortStream. If a stream callback returns a value other than paContinue the stream is NOT considered to be stopped (it is in CallbackFinished state).</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns one (1) when the stream is stopped, zero (0) when the stream is running, or a PaErrorCode (which are always negative) if PortAudio is not initialized or an error is encountered. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="462" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2176" bodyend="2182"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a9cedbafb95117ccf2d7379626baadbbd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError IsStreamActive</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>IsStreamActive</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Determine whether the stream is active. A stream is active after a successful call to StartStream(), until it becomes inactive either as a result of a call to StopStream() or AbortStream(), or as a result of a return value other than paContinue from the stream callback. In the latter case, the stream is considered inactive after the last buffer has finished playing.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns one (1) when the stream is active (i.e. playing or recording audio), zero (0) when not playing, or a PaErrorCode (which are always negative) if PortAudio is not initialized or an error is encountered. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="463" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2197" bodyend="2203"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a12902be6824616c33842845dd58500a7" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref></type>
        <definition>static PaTime GetStreamTime</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>GetStreamTime</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns current stream time. This corresponds to the system clock. The clock should run continuously while the stream is open, i.e. between calls to OpenStream() and CloseStream(), therefore a frame counter is not good enough.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Stream time, in seconds </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="464" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2215" bodyend="2218"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a3222116b48b0bc517506fe15e3e44029" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>double</type>
        <definition>static double GetStreamCpuLoad</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>GetStreamCpuLoad</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns CPU load.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>CPU load (0.0 if blocking interface is used) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="465" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2227" bodyend="2232"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a50800353870373d8fc24225db8e9b4d0" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError ReadStream</definition>
        <argsstring>(PaStream *s, void *buffer, unsigned long frames)</argsstring>
        <name>ReadStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>frames</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Read data from input stream. This reads the indicated number of frames into the supplied buffer from an input stream, and blocks until this is done.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>buffer</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to buffer that will receive interleaved data (or an array of pointers to a buffer for each non-interleaved channel)</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>frames</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of frames to read from stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (also indicates overflow via paInputOverflowed) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="468" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2719" bodyend="2770"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1aeb89c516829926a013e9b40f5de43e36" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError WriteStream</definition>
        <argsstring>(PaStream *s, const void *buffer, unsigned long frames)</argsstring>
        <name>WriteStream</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>frames</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Write data to output stream. This writes the indicated number of frames from the supplied buffer to an output stream, and blocks until this is done.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>buffer</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to buffer that provides interleaved data (or an array of pointers to a buffer for each non-interleaved channel)</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>frames</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of frames to write to stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (also indicates underflow via paOutputUnderflowed) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="469" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2786" bodyend="2837"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1af3ea5c9901a11f7b5d247a9c99c256d7" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>signed long</type>
        <definition>static signed long GetStreamReadAvailable</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>GetStreamReadAvailable</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Number of frames that can be read from input stream without blocking.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Number of frames, or PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="470" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2846" bodyend="2865"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ab77d083f90194fb2e0252dc48ebb3f4f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>signed long</type>
        <definition>static signed long GetStreamWriteAvailable</definition>
        <argsstring>(PaStream *s)</argsstring>
        <name>GetStreamWriteAvailable</name>
        <param>
          <type><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref> *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Number of frames that can be written to output stream without blocking.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to PortAudio stream</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Number of frames, or PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="471" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2874" bodyend="2893"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ae2b34928832709fd0989351e62ec5a7f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
        <definition>static void * CallbackThreadFunc</definition>
        <argsstring>(void *userData)</argsstring>
        <name>CallbackThreadFunc</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>userData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Main callback engine. This function runs in a separate thread and does all the work of fetching audio data from the AudioScience card via the HPI interface, feeding it to the user callback via the buffer processor, and delivering the resulting output data back to the card via HPI calls. It is started and terminated when the PortAudio stream is started and stopped, and starts the HPI streams on startup.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>userData</parametername>
</parameternamelist>
<parameterdescription>
<para>A pointer to an open stream previously created with Pa_OpenStream. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
<para>StreamStop if the main thread has requested a stop and the stream has not been effectively stopped we signal this condition by modifying callbackResult (we&apos;ll want to flush buffered output).</para><para>BlockAdaption: Go on if adaption buffers are empty </para>        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="474" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2567" bodyend="2699"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ad421e119e510b6144f04ca8647fc39e7" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_BuildDeviceList</definition>
        <argsstring>(PaAsiHpiHostApiRepresentation *hpiHostApi)</argsstring>
        <name>PaAsiHpi_BuildDeviceList</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref> *</type>
          <declname>hpiHostApi</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Enumerate all PA devices (= HPI streams). This compiles a list of all HPI adapters, and registers a PA device for each input and output stream it finds. Most errors are ignored, as missing or erroneous devices are simply skipped.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hpiHostApi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to HPI host API struct</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (only paInsufficientMemory in practice) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="477" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="522" bodyend="713"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ae4e84a86ade03507519a62866d6b1258" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref></type>
        <definition>static uint16_t PaAsiHpi_PaToHpiFormat</definition>
        <argsstring>(PaSampleFormat paFormat)</argsstring>
        <name>PaAsiHpi_PaToHpiFormat</name>
        <param>
          <type><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref></type>
          <declname>paFormat</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Converts PortAudio sample format to equivalent HPI format.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>paFormat</parametername>
</parameternamelist>
<parameterdescription>
<para>PortAudio sample format</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>HPI sample format </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="478" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="848" bodyend="873"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a1967cf8e23a9a55c3fe5a869aaaf008a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref></type>
        <definition>static PaSampleFormat PaAsiHpi_HpiToPaFormat</definition>
        <argsstring>(uint16_t hpiFormat)</argsstring>
        <name>PaAsiHpi_HpiToPaFormat</name>
        <param>
          <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref></type>
          <declname>hpiFormat</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Converts HPI sample format to equivalent PortAudio format.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>paFormat</parametername>
</parameternamelist>
<parameterdescription>
<para>HPI sample format</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio sample format </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="479" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="882" bodyend="905"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1add7c17f79596cbcc22f95f7c4129db22" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_CreateFormat</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, const PaStreamParameters *parameters, double sampleRate, PaAsiHpiDeviceInfo **hpiDevice, struct hpi_format *hpiFormat)</argsstring>
        <name>PaAsiHpi_CreateFormat</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref> *</type>
          <declname>parameters</declname>
        </param>
        <param>
          <type>double</type>
          <declname>sampleRate</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref> **</type>
          <declname>hpiDevice</declname>
        </param>
        <param>
          <type>struct hpi_format *</type>
          <declname>hpiFormat</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Creates HPI format struct based on PortAudio parameters. This also does some checks to see whether the desired format is valid, and whether the device allows it. This only checks the format of one half (input or output) of the PortAudio stream.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hostApi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to host API struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>parameters</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream parameter struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>sampleRate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired sample rate</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>hpiDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to HPI device struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>hpiFormat</parametername>
</parameternamelist>
<parameterdescription>
<para>Resulting HPI format returned here</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (typically indicating a problem with stream format) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="480" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="925" bodyend="989"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ae90e7017672b1f6413ea60aff9f1b98c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_OpenInput</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, const PaAsiHpiDeviceInfo *hpiDevice, const struct hpi_format *hpiFormat, hpi_handle_t *hpiStream)</argsstring>
        <name>PaAsiHpi_OpenInput</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref> *</type>
          <declname>hpiDevice</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> struct hpi_format *</type>
          <declname>hpiFormat</declname>
        </param>
        <param>
          <type>hpi_handle_t *</type>
          <declname>hpiStream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Open HPI input stream with given format. This attempts to open HPI input stream with desired format. If the format is not supported or the device is unavailable, the stream is closed and a PortAudio error code is returned.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hostApi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to host API struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>hpiDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to HPI device struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>hpiFormat</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to HPI format struct</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (typically indicating a problem with stream format or device) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="483" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1004" bodyend="1044"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a1b236b0b2e6362d006310458fe84729d" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_OpenOutput</definition>
        <argsstring>(struct PaUtilHostApiRepresentation *hostApi, const PaAsiHpiDeviceInfo *hpiDevice, const struct hpi_format *hpiFormat, hpi_handle_t *hpiStream)</argsstring>
        <name>PaAsiHpi_OpenOutput</name>
        <param>
          <type>struct <ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref> *</type>
          <declname>hostApi</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> <ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref> *</type>
          <declname>hpiDevice</declname>
        </param>
        <param>
          <type><ref refid="getopt1_8c_1a2c212835823e3c54a8ab6d95c652660e" kindref="member">const</ref> struct hpi_format *</type>
          <declname>hpiFormat</declname>
        </param>
        <param>
          <type>hpi_handle_t *</type>
          <declname>hpiStream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Open HPI output stream with given format. This attempts to open HPI output stream with desired format. If the format is not supported or the device is unavailable, the stream is closed and a PortAudio error code is returned.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>hostApi</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to host API struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>hpiDevice</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to HPI device struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>hpiFormat</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to HPI format struct</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (typically indicating a problem with stream format or device) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="486" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1059" bodyend="1099"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a0a13949bc2e6d02e42496a700bfa4b38" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_GetStreamInfo</definition>
        <argsstring>(PaAsiHpiStreamComponent *streamComp, PaAsiHpiStreamInfo *info)</argsstring>
        <name>PaAsiHpi_GetStreamInfo</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref> *</type>
          <declname>streamComp</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref> *</type>
          <declname>info</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Obtain HPI stream information. This obtains info such as stream state and available data/space in buffers. It also estimates whether an underflow or overflow occurred.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>streamComp</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream component (input or output) to query</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>info</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream info struct that will contain result</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (either paNoError, paDeviceUnavailable or paUnanticipatedHostError) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="489" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1174" bodyend="1248"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a7caa4f19caf7473d1bc8064f62e8a2a2" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void PaAsiHpi_StreamComponentDump</definition>
        <argsstring>(PaAsiHpiStreamComponent *streamComp, PaAsiHpiStream *stream)</argsstring>
        <name>PaAsiHpi_StreamComponentDump</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref> *</type>
          <declname>streamComp</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Display stream component information for debugging purposes.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>streamComp</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream component (input or output) to query</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct which contains the component above </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="490" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1257" bodyend="1377"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a072993c79782e5b83bb51d468d5632c3" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void PaAsiHpi_StreamDump</definition>
        <argsstring>(PaAsiHpiStream *stream)</argsstring>
        <name>PaAsiHpi_StreamDump</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Display stream information for debugging purposes.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream to query </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="491" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1384" bodyend="1443"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ac9f0725d28fb4cdf697d211e4fa6622b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_SetupBuffers</definition>
        <argsstring>(PaAsiHpiStreamComponent *streamComp, uint32_t pollingInterval, unsigned long framesPerPaHostBuffer, PaTime suggestedLatency)</argsstring>
        <name>PaAsiHpi_SetupBuffers</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref> *</type>
          <declname>streamComp</declname>
        </param>
        <param>
          <type><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref></type>
          <declname>pollingInterval</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>framesPerPaHostBuffer</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref></type>
          <declname>suggestedLatency</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Determine buffer sizes and allocate appropriate stream buffers. This attempts to allocate a BBM (host) buffer for the HPI stream component (either input or output, as both have similar buffer needs). Not all AudioScience adapters support BBM, in which case the hardware buffer has to suffice. The size of the HPI host buffer is chosen as a multiple of framesPerPaHostBuffer, and also influenced by the suggested latency and the estimated minimum polling interval. The HPI host and hardware buffer sizes are stored, and an appropriate cap for the hardware buffer is also calculated. Finally, the temporary stream buffer which serves as the PortAudio host buffer for this implementation is allocated. This buffer contains an integer number of user buffers, to simplify buffer adaption in the buffer processor. The function returns paBufferTooBig if the HPI interface cannot allocate an HPI host buffer of the desired size.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>streamComp</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream component struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>pollingInterval</parametername>
</parameternamelist>
<parameterdescription>
<para>Polling interval for stream, in milliseconds</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>framesPerPaHostBuffer</parametername>
</parameternamelist>
<parameterdescription>
<para>Size of PortAudio host buffer, in frames</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>suggestedLatency</parametername>
</parameternamelist>
<parameterdescription>
<para>Suggested latency for stream component, in seconds</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (possibly paBufferTooBig or paInsufficientMemory) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="492" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1468" bodyend="1629"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1aa2d0e0267c366ec5c203e3cec7ca53d6" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_PrimeOutputWithSilence</definition>
        <argsstring>(PaAsiHpiStream *stream)</argsstring>
        <name>PaAsiHpi_PrimeOutputWithSilence</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Prime HPI output stream with silence. This resets the output stream and uses PortAudio helper routines to fill the temp buffer with silence. It then writes two host buffers to the stream. This is supposed to be called before the stream is started. It has no effect on input-only streams.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="494" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1917" bodyend="1946"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1af6b3d7100fb853a6dcc6e56493bca0aa" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_StartStream</definition>
        <argsstring>(PaAsiHpiStream *stream, int outputPrimed)</argsstring>
        <name>PaAsiHpi_StartStream</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>outputPrimed</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Start HPI streams (both input + output). This starts all HPI streams in the PortAudio stream. Output streams are first primed with silence, if required. After this call the PA stream is in the Active state.</para><para><xrefsect id="todo_1_todo000017"><xreftitle>Todo</xreftitle><xrefdescription><para>Implement priming via the user callback</para></xrefdescription></xrefsect></para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>outputPrimed</parametername>
</parameternamelist>
<parameterdescription>
<para>True if output is already primed (if false, silence will be loaded before starting)</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="495" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="1961" bodyend="1988"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a58f35eab7d6aca29c8d4fd9adc5c851a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_StopStream</definition>
        <argsstring>(PaAsiHpiStream *stream, int abort)</argsstring>
        <name>PaAsiHpi_StopStream</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>abort</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stop HPI streams (input + output), either softly or abruptly. If abort is false, the function blocks until the output stream is drained, otherwise it stops immediately and discards data in the stream hardware buffers.</para><para>This function is safe to call from the callback engine thread as well as the main thread.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>abort</parametername>
</parameternamelist>
<parameterdescription>
<para>True if samples in output buffer should be discarded (otherwise blocks until stream is done)</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="496" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2040" bodyend="2084"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1af9682b99f21d625f0a2341499d43e6f9" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_ExplicitStop</definition>
        <argsstring>(PaAsiHpiStream *stream, int abort)</argsstring>
        <name>PaAsiHpi_ExplicitStop</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>abort</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Stop or abort PortAudio stream.</para><para>This function is used to explicitly stop the PortAudio stream (via StopStream/AbortStream), as opposed to the situation when the callback finishes with a result other than paContinue. If a stream is in callback mode we will have to inspect whether the background thread has finished, or we will have to take it out. In either case we join the thread before returning. In blocking mode, we simply tell HPI to stop abruptly (abort) or finish buffers (drain). The PortAudio stream will be in the Stopped state after a call to this function.</para><para>Don&apos;t call this from the callback engine thread!</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>abort</parametername>
</parameternamelist>
<parameterdescription>
<para>True if samples in output buffer should be discarded (otherwise blocks until stream is done)</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="497" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2104" bodyend="2136"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a691c5123843cfa3c701eda37caad54e2" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void PaAsiHpi_OnThreadExit</definition>
        <argsstring>(void *userData)</argsstring>
        <name>PaAsiHpi_OnThreadExit</name>
        <param>
          <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref> *</type>
          <declname>userData</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Exit routine which is called when callback thread quits. This takes care of stopping the HPI streams (either waiting for output to finish, or abruptly). It also calls the user-supplied StreamFinished callback, and sets the stream state to CallbackFinished if it was reached via a non-paContinue return from the user callback function.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>userData</parametername>
</parameternamelist>
<parameterdescription>
<para>A pointer to an open stream previously created with Pa_OpenStream </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="498" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2244" bodyend="2267"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a3663dc6ae57827657ea50f754cb990ab" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_WaitForFrames</definition>
        <argsstring>(PaAsiHpiStream *stream, unsigned long *framesAvail, PaStreamCallbackFlags *cbFlags)</argsstring>
        <name>PaAsiHpi_WaitForFrames</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type>unsigned long *</type>
          <declname>framesAvail</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref> *</type>
          <declname>cbFlags</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Wait until there is enough frames to fill a host buffer. The routine attempts to sleep until at least a full host buffer can be retrieved from the input HPI stream and passed to the output HPI stream. It will first sleep until enough output space is available, as this is usually easily achievable. If it is an output-only stream, it will also sleep if the hardware buffer is too full, thereby throttling the filling of the output buffer and reducing output latency. The routine then blocks until enough input samples are available, unless this will cause an output underflow. In the process, input overflows and output underflows are indicated.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>framesAvail</parametername>
</parameternamelist>
<parameterdescription>
<para>Returns the number of available frames</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>cbFlags</parametername>
</parameternamelist>
<parameterdescription>
<para>Overflows and underflows indicated in here</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code (only paUnanticipatedHostError expected) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
<para><xrefsect id="todo_1_todo000018"><xreftitle>Todo</xreftitle><xrefdescription><para>The paInputOverflow flag should be set in the callback containing the first input sample following the overflow. That means the block currently sitting at the fore-front of recording, i.e. typically the one containing the newest (last) sample in the HPI buffer system. This is most likely not the same as the current block of data being passed to the callback. The current overflow should ideally be noted in an overflow list of sorts, with an indication of when it should be reported. The trouble starts if there are several separate overflow incidents, given a big input buffer. Oh well, something to try out later... </para></xrefdescription></xrefsect></para>        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="499" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2287" bodyend="2387"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a81bdb7542ec93340ec09da5c2b5495bb" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>static void PaAsiHpi_CalculateTimeInfo</definition>
        <argsstring>(PaAsiHpiStream *stream, PaStreamCallbackTimeInfo *timeInfo)</argsstring>
        <name>PaAsiHpi_CalculateTimeInfo</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type><ref refid="struct_pa_stream_callback_time_info" kindref="compound">PaStreamCallbackTimeInfo</ref> *</type>
          <declname>timeInfo</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Obtain recording, current and playback timestamps of stream. The current time is determined by the system clock. This &quot;now&quot; timestamp occurs at the forefront of recording (and playback in the full-duplex case), which happens later than the input timestamp by an amount equal to the total number of recorded frames in the input buffer. The output timestamp indicates when the next generated sample will actually be played. This happens after all the samples currently in the output buffer are played. The output timestamp therefore follows the current timestamp by an amount equal to the number of frames yet to be played back in the output buffer.</para><para>If the current timestamp is the present, the input timestamp is in the past and the output timestamp is in the future.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>timeInfo</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to timeInfo struct that will contain timestamps </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="501" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2406" bodyend="2433"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1ae776642dc798fa72e2dd8dc387f85045" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_BeginProcessing</definition>
        <argsstring>(PaAsiHpiStream *stream, unsigned long *numFrames, PaStreamCallbackFlags *cbFlags)</argsstring>
        <name>PaAsiHpi_BeginProcessing</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type>unsigned long *</type>
          <declname>numFrames</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref> *</type>
          <declname>cbFlags</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Read from HPI input stream and register buffers. This reads data from the HPI input stream (if it exists) and registers the temp stream buffers of both input and output streams with the buffer processor. In the process it also handles input underflows in the full-duplex case.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>numFrames</parametername>
</parameternamelist>
<parameterdescription>
<para>On entrance the number of available frames, on exit the number of received frames</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>cbFlags</parametername>
</parameternamelist>
<parameterdescription>
<para>Indicates overflows and underflows</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>PortAudio error code </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="502" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2450" bodyend="2513"/>
      </memberdef>
      <memberdef kind="function" id="pa__linux__asihpi_8c_1a08857c77cc3476b819c525d39f21eeee" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref></type>
        <definition>static PaError PaAsiHpi_EndProcessing</definition>
        <argsstring>(PaAsiHpiStream *stream, unsigned long numFrames, PaStreamCallbackFlags *cbFlags)</argsstring>
        <name>PaAsiHpi_EndProcessing</name>
        <param>
          <type><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref> *</type>
          <declname>stream</declname>
        </param>
        <param>
          <type>unsigned long</type>
          <declname>numFrames</declname>
        </param>
        <param>
          <type><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref> *</type>
          <declname>cbFlags</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Flush output buffers to HPI output stream. This completes the processing cycle by writing the temp buffer to the HPI interface. Additional output underflows are caught before data is written to the stream, as this action typically remedies the underflow and hides it in the process.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>stream</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to stream struct</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>numFrames</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of frames to write to the output stream</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>cbFlags</parametername>
</parameternamelist>
<parameterdescription>
<para>Indicates overflows and underflows </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" line="504" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c" bodystart="2527" bodyend="2555"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>Host API implementation supporting AudioScience cards via the Linux HPI interface. </para>    </briefdescription>
    <detaileddescription>
<para><heading level="3">Overview</heading>
</para><para>This is a PortAudio implementation for the AudioScience HPI Audio API on the Linux platform. AudioScience makes a range of audio adapters customised for the broadcasting industry, with support for both Windows and Linux. More information on their products can be found on their website: <verbatim>http://www.audioscience.com
</verbatim></para><para>Documentation for the HPI API can be found at: <verbatim>http://www.audioscience.com/internet/download/sdk/hpi_usermanual_html/html/index.html
</verbatim></para><para>The Linux HPI driver itself (a kernel module + library) can be downloaded from: <verbatim>http://www.audioscience.com/internet/download/linux_drivers.htm
</verbatim></para><para><heading level="3">Implementation strategy</heading>
</para><para>Note* Ideally, AudioScience cards should be handled by the PortAudio ALSA implementation on Linux, as ALSA is the preferred Linux soundcard API. The existence of this host API implementation might therefore seem a bit flawed. Unfortunately, at the time of the creation of this implementation (June 2006), the PA ALSA implementation could not make use of the existing AudioScience ALSA driver. PA ALSA uses the &quot;memory-mapped&quot; (mmap) ALSA access mode to interact with the ALSA library, while the AudioScience ALSA driver only supports the &quot;read-write&quot; access mode. The appropriate solution to this problem is to add &quot;read-write&quot; support to PortAudio ALSA, thereby extending the range of soundcards it supports (AudioScience cards are not the only ones with this problem). Given the author&apos;s limited knowledge of ALSA and the simplicity of the HPI API, the second-best solution was born...</para><para>The following mapping between HPI and PA was followed: HPI subsystem =&gt; PortAudio host API HPI adapter =&gt; nothing specific HPI stream =&gt; PortAudio device</para><para>Each HPI stream is either input or output (not both), and can support different channel counts, sampling rates and sample formats. It is therefore a more natural fit to a PA device. A PA stream can therefore combine two HPI streams (one input and one output) into a &quot;full-duplex&quot; stream. These HPI streams can even be on different physical adapters. The two streams ought to be sample-synchronised when they reside on the same adapter, as most AudioScience adapters derive their ADC and DAC clocks from one master clock. When combining two adapters into one full-duplex stream, however, the use of a word clock connection between the adapters is strongly recommended.</para><para>The HPI interface is inherently blocking, making use of read and write calls to transfer data between user buffers and driver buffers. The callback interface therefore requires a helper thread (&quot;callback engine&quot;) which periodically transfers data (one thread per PA stream, in fact). The current implementation explicitly sleeps via <ref refid="portaudio_8h_1a1b3c20044c9401c42add29475636e83d" kindref="member">Pa_Sleep()</ref> until enough samples can be transferred (select() or poll() would be better, but currently seems impossible...). The thread implementation makes use of the Unix thread helper functions and some pthread calls here and there. If a unified PA thread exists, this host API implementation might also compile on Windows, as this is the only real Linux-specific part of the code.</para><para>There is no inherent fixed buffer size in the HPI interface, as in some other host APIs. The PortAudio implementation contains a buffer that is allocated during OpenStream and used to transfer data between the callback and the HPI driver buffer. The size of this buffer is quite flexible and is derived from latency suggestions and matched to the requested callback buffer size as far as possible. It can become quite huge, as the AudioScience cards are typically geared towards higher-latency applications and contain large hardware buffers.</para><para>The HPI interface natively supports most common sample formats and sample rates (some conversion is done on the adapter itself).</para><para>Stream time is measured based on the number of processed frames, which is adjusted by the number of frames currently buffered by the HPI driver.</para><para>There is basic support for detecting overflow and underflow. The HPI interface does not explicitly indicate this, so thresholds on buffer levels are used in combination with stream state. Recovery from overflow and underflow is left to the PA client.</para><para>Blocking streams are also implemented. It makes use of the same polling routines that the callback interface uses, in order to prevent the allocation of variable-sized buffers during reading and writing. The framesPerBuffer parameter is therefore still relevant, and this can be increased in the blocking case to improve efficiency.</para><para>The implementation contains extensive reporting macros (slightly modified PA_ENSURE and PA_UNLESS versions) and a useful stream dump routine to provide debugging feedback.</para><para>Output buffer priming via the user callback (i.e. paPrimeOutputBuffersUsingStreamCallback and friends) is not implemented yet. All output is primed with silence. </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>$Id:$</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>PortAudio<sp/>Portable<sp/>Real-Time<sp/>Audio<sp/>Library</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>Latest<sp/>Version<sp/>at:<sp/>http://www.portaudio.com</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>AudioScience<sp/>HPI<sp/>implementation<sp/>by<sp/>Fred<sp/>Gleason,<sp/>Ludwig<sp/>Schwardt<sp/>and</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>Eliot<sp/>Blennerhassett</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2003<sp/>Fred<sp/>Gleason<sp/>&lt;fredg@salemradiolabs.com&gt;</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2005,2006<sp/>Ludwig<sp/>Schwardt<sp/>&lt;schwardt@sun.ac.za&gt;</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2011<sp/>Eliot<sp/>Blennerhassett<sp/>&lt;eblennerhassett@audioscience.com&gt;</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>Based<sp/>on<sp/>the<sp/>Open<sp/>Source<sp/>API<sp/>proposed<sp/>by<sp/>Ross<sp/>Bencina</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>1999-2008<sp/>Ross<sp/>Bencina,<sp/>Phil<sp/>Burk</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/>Permission<sp/>is<sp/>hereby<sp/>granted,<sp/>free<sp/>of<sp/>charge,<sp/>to<sp/>any<sp/>person<sp/>obtaining</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>a<sp/>copy<sp/>of<sp/>this<sp/>software<sp/>and<sp/>associated<sp/>documentation<sp/>files</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>(the<sp/>&quot;Software&quot;),<sp/>to<sp/>deal<sp/>in<sp/>the<sp/>Software<sp/>without<sp/>restriction,</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>including<sp/>without<sp/>limitation<sp/>the<sp/>rights<sp/>to<sp/>use,<sp/>copy,<sp/>modify,<sp/>merge,</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>publish,<sp/>distribute,<sp/>sublicense,<sp/>and/or<sp/>sell<sp/>copies<sp/>of<sp/>the<sp/>Software,</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>and<sp/>to<sp/>permit<sp/>persons<sp/>to<sp/>whom<sp/>the<sp/>Software<sp/>is<sp/>furnished<sp/>to<sp/>do<sp/>so,</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>subject<sp/>to<sp/>the<sp/>following<sp/>conditions:</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>The<sp/>above<sp/>copyright<sp/>notice<sp/>and<sp/>this<sp/>permission<sp/>notice<sp/>shall<sp/>be</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/>included<sp/>in<sp/>all<sp/>copies<sp/>or<sp/>substantial<sp/>portions<sp/>of<sp/>the<sp/>Software.</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>THE<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>&quot;AS<sp/>IS&quot;,<sp/>WITHOUT<sp/>WARRANTY<sp/>OF<sp/>ANY<sp/>KIND,</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>EXPRESS<sp/>OR<sp/>IMPLIED,<sp/>INCLUDING<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO<sp/>THE<sp/>WARRANTIES<sp/>OF</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY,<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE<sp/>AND<sp/>NONINFRINGEMENT.</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE<sp/>AUTHORS<sp/>OR<sp/>COPYRIGHT<sp/>HOLDERS<sp/>BE<sp/>LIABLE<sp/>FOR</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*<sp/>ANY<sp/>CLAIM,<sp/>DAMAGES<sp/>OR<sp/>OTHER<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>AN<sp/>ACTION<sp/>OF</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*<sp/>CONTRACT,<sp/>TORT<sp/>OR<sp/>OTHERWISE,<sp/>ARISING<sp/>FROM,<sp/>OUT<sp/>OF<sp/>OR<sp/>IN<sp/>CONNECTION</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/>WITH<sp/>THE<sp/>SOFTWARE<sp/>OR<sp/>THE<sp/>USE<sp/>OR<sp/>OTHER<sp/>DEALINGS<sp/>IN<sp/>THE<sp/>SOFTWARE.</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*<sp/>The<sp/>text<sp/>above<sp/>constitutes<sp/>the<sp/>entire<sp/>PortAudio<sp/>license;<sp/>however,</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/>*<sp/>the<sp/>PortAudio<sp/>community<sp/>also<sp/>makes<sp/>the<sp/>following<sp/>non-binding<sp/>requests:</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/>*<sp/>Any<sp/>person<sp/>wishing<sp/>to<sp/>distribute<sp/>modifications<sp/>to<sp/>the<sp/>Software<sp/>is</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/>*<sp/>requested<sp/>to<sp/>send<sp/>the<sp/>modifications<sp/>to<sp/>the<sp/>original<sp/>developer<sp/>so<sp/>that</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/>*<sp/>they<sp/>can<sp/>be<sp/>incorporated<sp/>into<sp/>the<sp/>canonical<sp/>version.<sp/>It<sp/>is<sp/>also</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/>*<sp/>requested<sp/>that<sp/>these<sp/>non-binding<sp/>requests<sp/>be<sp/>included<sp/>along<sp/>with<sp/>the</highlight></codeline>
<codeline lineno="43"><highlight class="comment"><sp/>*<sp/>license<sp/>above.</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="47"><highlight class="comment"><sp/>*<sp/>Modification<sp/>History</highlight></codeline>
<codeline lineno="48"><highlight class="comment"><sp/>*<sp/>12/2003<sp/>-<sp/>Initial<sp/>version</highlight></codeline>
<codeline lineno="49"><highlight class="comment"><sp/>*<sp/>09/2005<sp/>-<sp/>v19<sp/>version<sp/>[rewrite]</highlight></codeline>
<codeline lineno="50"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="preprocessor">#include<sp/>&lt;unistd.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>strlen()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;pthread.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pthreads<sp/>and<sp/>friends<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="assert_8h" kindref="compound">assert.h</ref>&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>assert<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ceil,<sp/>floor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;asihpi/hpi.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HPI<sp/>API<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="portaudio_8h" kindref="compound">portaudio.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PortAudio<sp/>API<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__util_8h" kindref="compound">pa_util.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PA_DEBUG,<sp/>other<sp/>small<sp/>utilities<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__unix__util_8h" kindref="compound">pa_unix_util.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Unix<sp/>threading<sp/>utilities<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__allocation_8h" kindref="compound">pa_allocation.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Group<sp/>memory<sp/>allocation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__hostapi_8h" kindref="compound">pa_hostapi.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Host<sp/>API<sp/>structs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__stream_8h" kindref="compound">pa_stream.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Stream<sp/>interface<sp/>structs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__cpuload_8h" kindref="compound">pa_cpuload.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>CPU<sp/>load<sp/>measurer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__process_8h" kindref="compound">pa_process.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Buffer<sp/>processor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__converters_8h" kindref="compound">pa_converters.h</ref>&quot;</highlight><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PaUtilZeroer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pa__debugprint_8h" kindref="compound">pa_debugprint.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>--------------------------------------------------------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="167"><highlight class="comment"><sp/>*<sp/>Defines</highlight></codeline>
<codeline lineno="168"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Error<sp/>reporting<sp/>and<sp/>assertions<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="173" refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" refkind="member"><highlight class="preprocessor">#define<sp/>PA_ENSURE_(expr)<sp/>\</highlight></codeline>
<codeline lineno="174"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>do<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="175"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaError<sp/>paError<sp/>=<sp/>(expr);<sp/>\</highlight></codeline>
<codeline lineno="176"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>UNLIKELY(<sp/>paError<sp/>&lt;<sp/>paNoError<sp/>)<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="177"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>\</highlight></codeline>
<codeline lineno="178"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;Expression<sp/>&apos;&quot;<sp/>#expr<sp/>&quot;&apos;<sp/>failed<sp/>in<sp/>&apos;&quot;<sp/>__FILE__<sp/>&quot;&apos;,<sp/>line:<sp/>&quot;<sp/>STRINGIZE(<sp/>__LINE__<sp/>)<sp/>&quot;\n&quot;<sp/>));<sp/>\</highlight></codeline>
<codeline lineno="179"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>paError;<sp/>\</highlight></codeline>
<codeline lineno="180"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goto<sp/>error;<sp/>\</highlight></codeline>
<codeline lineno="181"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="182"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>while<sp/>(0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="185" refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" refkind="member"><highlight class="preprocessor">#define<sp/>PA_UNLESS_(expr,<sp/>paError)<sp/>\</highlight></codeline>
<codeline lineno="186"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>do<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="187"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>UNLIKELY(<sp/>(expr)<sp/>==<sp/>0<sp/>)<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="188"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>\</highlight></codeline>
<codeline lineno="189"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;Expression<sp/>&apos;&quot;<sp/>#expr<sp/>&quot;&apos;<sp/>failed<sp/>in<sp/>&apos;&quot;<sp/>__FILE__<sp/>&quot;&apos;,<sp/>line:<sp/>&quot;<sp/>STRINGIZE(<sp/>__LINE__<sp/>)<sp/>&quot;\n&quot;<sp/>));<sp/>\</highlight></codeline>
<codeline lineno="190"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>(paError);<sp/>\</highlight></codeline>
<codeline lineno="191"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goto<sp/>error;<sp/>\</highlight></codeline>
<codeline lineno="192"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="193"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>while(<sp/>0<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="196" refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" refkind="member"><highlight class="preprocessor">#define<sp/>PA_ASIHPI_UNLESS_(expr,<sp/>paError)<sp/>\</highlight></codeline>
<codeline lineno="197"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>do<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="198"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_err_t<sp/>hpiError<sp/>=<sp/>(expr);<sp/>\</highlight></codeline>
<codeline lineno="199"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>HPI<sp/>error<sp/>occurred<sp/>*/</highlight><highlight class="preprocessor"><sp/>\</highlight></codeline>
<codeline lineno="200"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>UNLIKELY(<sp/>hpiError<sp/>)<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="201"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>\</highlight></codeline>
<codeline lineno="202"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>char<sp/>szError[256];<sp/>\</highlight></codeline>
<codeline lineno="203"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPI_GetErrorText(<sp/>hpiError,<sp/>szError<sp/>);<sp/>\</highlight></codeline>
<codeline lineno="204"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;HPI<sp/>error<sp/>%d<sp/>occurred:<sp/>%s\n&quot;,<sp/>hpiError,<sp/>szError<sp/>));<sp/>\</highlight></codeline>
<codeline lineno="205"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>This<sp/>message<sp/>will<sp/>always<sp/>be<sp/>displayed,<sp/>even<sp/>if<sp/>debug<sp/>info<sp/>is<sp/>disabled<sp/>*/</highlight><highlight class="preprocessor"><sp/>\</highlight></codeline>
<codeline lineno="206"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;Expression<sp/>&apos;&quot;<sp/>#expr<sp/>&quot;&apos;<sp/>failed<sp/>in<sp/>&apos;&quot;<sp/>__FILE__<sp/>&quot;&apos;,<sp/>line:<sp/>&quot;<sp/>STRINGIZE(<sp/>__LINE__<sp/>)<sp/>&quot;\n&quot;<sp/>));<sp/>\</highlight></codeline>
<codeline lineno="207"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>(paError)<sp/>==<sp/>paUnanticipatedHostError<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="208"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>\</highlight></codeline>
<codeline lineno="209"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;Host<sp/>error<sp/>description:<sp/>%s\n&quot;,<sp/>szError<sp/>));<sp/>\</highlight></codeline>
<codeline lineno="210"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PaUtil_SetLastHostErrorInfo<sp/>should<sp/>only<sp/>be<sp/>used<sp/>in<sp/>the<sp/>main<sp/>thread<sp/>*/</highlight><highlight class="preprocessor"><sp/>\</highlight></codeline>
<codeline lineno="211"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>pthread_equal(<sp/>pthread_self(),<sp/>paUnixMainThread<sp/>)<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="212"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>\</highlight></codeline>
<codeline lineno="213"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaUtil_SetLastHostErrorInfo(<sp/>paInDevelopment,<sp/>hpiError,<sp/>szError<sp/>);<sp/>\</highlight></codeline>
<codeline lineno="214"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="215"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="216"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>paNoError<sp/>is<sp/>specified,<sp/>continue<sp/>as<sp/>usual<sp/>*/</highlight><highlight class="preprocessor"><sp/>\</highlight></codeline>
<codeline lineno="217"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(useful<sp/>if<sp/>you<sp/>only<sp/>want<sp/>to<sp/>print<sp/>out<sp/>the<sp/>debug<sp/>messages<sp/>above)<sp/>*/</highlight><highlight class="preprocessor"><sp/>\</highlight></codeline>
<codeline lineno="218"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>(paError)<sp/>&lt;<sp/>0<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="219"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/>\</highlight></codeline>
<codeline lineno="220"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>(paError);<sp/>\</highlight></codeline>
<codeline lineno="221"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goto<sp/>error;<sp/>\</highlight></codeline>
<codeline lineno="222"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="223"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="224"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>while(<sp/>0<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="227" refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" refkind="member"><highlight class="preprocessor">#define<sp/>PA_ASIHPI_REPORT_ERROR_(hpiErrorCode)<sp/>\</highlight></codeline>
<codeline lineno="228"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>do<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="229"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>char<sp/>szError[256];<sp/>\</highlight></codeline>
<codeline lineno="230"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPI_GetErrorText(<sp/>hpiError,<sp/>szError<sp/>);<sp/>\</highlight></codeline>
<codeline lineno="231"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PA_DEBUG((<sp/>&quot;HPI<sp/>error<sp/>%d<sp/>occurred:<sp/>%s\n&quot;,<sp/>hpiError,<sp/>szError<sp/>));<sp/>\</highlight></codeline>
<codeline lineno="232"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PaUtil_SetLastHostErrorInfo<sp/>should<sp/>only<sp/>be<sp/>used<sp/>in<sp/>the<sp/>main<sp/>thread<sp/>*/</highlight><highlight class="preprocessor"><sp/>\</highlight></codeline>
<codeline lineno="233"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>pthread_equal(<sp/>pthread_self(),<sp/>paUnixMainThread<sp/>)<sp/>)<sp/>\</highlight></codeline>
<codeline lineno="234"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>{<sp/>\</highlight></codeline>
<codeline lineno="235"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaUtil_SetLastHostErrorInfo(<sp/>paInDevelopment,<sp/>(hpiErrorCode),<sp/>szError<sp/>);<sp/>\</highlight></codeline>
<codeline lineno="236"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="237"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>while(<sp/>0<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Defaults<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="242" refid="pa__linux__asihpi_8c_1acebea7ce0e959421c271bea9c1985b95" refkind="member"><highlight class="preprocessor">#define<sp/>PA_ASIHPI_AVAILABLE_FORMATS_<sp/>(paFloat32<sp/>|<sp/>paInt32<sp/>|<sp/>paInt24<sp/>|<sp/>paInt16<sp/>|<sp/>paUInt8)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244" refid="pa__linux__asihpi_8c_1acf0737511ef6ce9aa8d588542d02fad5" refkind="member"><highlight class="preprocessor">#define<sp/>PA_ASIHPI_USE_BBM_<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="247" refid="pa__linux__asihpi_8c_1a66be6c722e2466a7c6eb3138f4bbea0b" refkind="member"><highlight class="preprocessor">#define<sp/>PA_ASIHPI_MIN_FRAMES_<sp/>1152</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249" refid="pa__linux__asihpi_8c_1a844787c5015845c0601c0a396dbfaf56" refkind="member"><highlight class="preprocessor">#define<sp/>PA_ASIHPI_MIN_POLLING_INTERVAL_<sp/>10</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>--------------------------------------------------------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="254"><highlight class="comment"><sp/>*<sp/>Structures</highlight></codeline>
<codeline lineno="255"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="258" refid="struct_pa_asi_hpi_host_api_representation" refkind="compound"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref></highlight></codeline>
<codeline lineno="259"><highlight class="normal">{</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PortAudio<sp/>&quot;base<sp/>class&quot;<sp/>-<sp/>keep<sp/>the<sp/>baseRep<sp/>first!<sp/>(C-style<sp/>inheritance)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261" refid="struct_pa_asi_hpi_host_api_representation_1a17c8f54b933c0d8c50007e1a40bd5acf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/><ref refid="struct_pa_asi_hpi_host_api_representation_1a17c8f54b933c0d8c50007e1a40bd5acf" kindref="member">baseHostApiRep</ref>;</highlight></codeline>
<codeline lineno="262" refid="struct_pa_asi_hpi_host_api_representation_1ad1d68d17d9ab37be6a3ec0c48749f0f4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_stream_interface" kindref="compound">PaUtilStreamInterface</ref><sp/><ref refid="struct_pa_asi_hpi_host_api_representation_1ad1d68d17d9ab37be6a3ec0c48749f0f4" kindref="member">callbackStreamInterface</ref>;</highlight></codeline>
<codeline lineno="263" refid="struct_pa_asi_hpi_host_api_representation_1a42f33f2e149240f040e17cdc8ec98104" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_stream_interface" kindref="compound">PaUtilStreamInterface</ref><sp/><ref refid="struct_pa_asi_hpi_host_api_representation_1a42f33f2e149240f040e17cdc8ec98104" kindref="member">blockingStreamInterface</ref>;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265" refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_allocation_group" kindref="compound">PaUtilAllocationGroup</ref><sp/>*<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref>;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>implementation<sp/>specific<sp/>data<sp/>goes<sp/>here<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269" refid="struct_pa_asi_hpi_host_api_representation_1abad64b525a3e7fb58f73414dba93340a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1aeef6da084c57c70aa94be97411e19930" kindref="member">PaHostApiIndex</ref><sp/><ref refid="struct_pa_asi_hpi_host_api_representation_1abad64b525a3e7fb58f73414dba93340a" kindref="member">hostApiIndex</ref>;</highlight></codeline>
<codeline lineno="270"><highlight class="normal">}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><ref refid="pa__linux__asihpi_8c_1af49eea0864132957170b3a4f05149ea0" kindref="member">PaAsiHpiHostApiRepresentation</ref>;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight></codeline>
<codeline lineno="275" refid="struct_pa_asi_hpi_device_info" refkind="compound"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref></highlight></codeline>
<codeline lineno="276"><highlight class="normal">{</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PortAudio<sp/>&quot;base<sp/>class&quot;<sp/>-<sp/>keep<sp/>the<sp/>baseRep<sp/>first!<sp/>(C-style<sp/>inheritance)<sp/>*/</highlight></codeline>
<codeline lineno="279" refid="struct_pa_asi_hpi_device_info_1a6901f154dd53fd482f1295154018cd13" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/><ref refid="struct_pa_asi_hpi_device_info_1a6901f154dd53fd482f1295154018cd13" kindref="member">baseDeviceInfo</ref>;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>implementation<sp/>specific<sp/>data<sp/>goes<sp/>here<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="284" refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref>;</highlight></codeline>
<codeline lineno="286" refid="struct_pa_asi_hpi_device_info_1af8c1c37195d84fc0e095e0f3bb3f26dc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="struct_pa_asi_hpi_device_info_1af8c1c37195d84fc0e095e0f3bb3f26dc" kindref="member">adapterType</ref>;</highlight></codeline>
<codeline lineno="288" refid="struct_pa_asi_hpi_device_info_1ae7f2d9b7af773915ce4b03d17638c4ae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="struct_pa_asi_hpi_device_info_1ae7f2d9b7af773915ce4b03d17638c4ae" kindref="member">adapterVersion</ref>;</highlight></codeline>
<codeline lineno="290" refid="struct_pa_asi_hpi_device_info_1a6b08780c17503edb4f0724e2f803d7e8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_device_info_1a6b08780c17503edb4f0724e2f803d7e8" kindref="member">adapterSerialNumber</ref>;</highlight></codeline>
<codeline lineno="292" refid="struct_pa_asi_hpi_device_info_1afb6ffc3f50ee76abda0d9a816016ed59" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="struct_pa_asi_hpi_device_info_1afb6ffc3f50ee76abda0d9a816016ed59" kindref="member">streamIndex</ref>;</highlight></codeline>
<codeline lineno="294" refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref>;</highlight></codeline>
<codeline lineno="295"><highlight class="normal">}</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><ref refid="pa__linux__asihpi_8c_1a98ff61cdfe8295b90cf086976941f9c3" kindref="member">PaAsiHpiDeviceInfo</ref>;</highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="315" refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45" refkind="member"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45" kindref="member">PaAsiHpiStreamState</ref></highlight></codeline>
<codeline lineno="316"><highlight class="normal">{</highlight></codeline>
<codeline lineno="317" refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be" kindref="member">paAsiHpiStoppedState</ref>=0,</highlight></codeline>
<codeline lineno="318" refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e" kindref="member">paAsiHpiActiveState</ref>=1,</highlight></codeline>
<codeline lineno="319" refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0188ca40210ba62871ac2224749185d1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0188ca40210ba62871ac2224749185d1" kindref="member">paAsiHpiCallbackFinishedState</ref>=2</highlight></codeline>
<codeline lineno="320"><highlight class="normal">}</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45" kindref="member">PaAsiHpiStreamState</ref>;</highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="325" refid="struct_pa_asi_hpi_stream_component" refkind="compound"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref></highlight></codeline>
<codeline lineno="326"><highlight class="normal">{</highlight></codeline>
<codeline lineno="328" refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>;</highlight></codeline>
<codeline lineno="330" refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>hpi_handle_t<sp/><ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>;</highlight></codeline>
<codeline lineno="332" refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">hpi_format<sp/>hpiFormat;</highlight></codeline>
<codeline lineno="334" refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>;</highlight></codeline>
<codeline lineno="336" refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" kindref="member">hardwareBufferSize</ref>;</highlight></codeline>
<codeline lineno="338" refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref>;</highlight></codeline>
<codeline lineno="343" refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref>;</highlight></codeline>
<codeline lineno="345" refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a9a941819355e6f658991890ff66b4b0e" kindref="member">uint8_t</ref><sp/>*<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>;</highlight></codeline>
<codeline lineno="347" refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref>;</highlight></codeline>
<codeline lineno="348"><highlight class="normal">}</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><ref refid="pa__linux__asihpi_8c_1aa263b75175c6771cfa32d0ca7c564c87" kindref="member">PaAsiHpiStreamComponent</ref>;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight></codeline>
<codeline lineno="353" refid="struct_pa_asi_hpi_stream" refkind="compound"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref></highlight></codeline>
<codeline lineno="354"><highlight class="normal">{</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PortAudio<sp/>&quot;base<sp/>class&quot;<sp/>-<sp/>keep<sp/>the<sp/>baseRep<sp/>first!<sp/>(C-style<sp/>inheritance)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="356" refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_stream_representation" kindref="compound">PaUtilStreamRepresentation</ref><sp/><ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>;</highlight></codeline>
<codeline lineno="357" refid="struct_pa_asi_hpi_stream_1af369ced5674ff0a5f622a1b58232bfc4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_cpu_load_measurer" kindref="compound">PaUtilCpuLoadMeasurer</ref><sp/><ref refid="struct_pa_asi_hpi_stream_1af369ced5674ff0a5f622a1b58232bfc4" kindref="member">cpuLoadMeasurer</ref>;</highlight></codeline>
<codeline lineno="358" refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_buffer_processor" kindref="compound">PaUtilBufferProcessor</ref><sp/><ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>;</highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight></codeline>
<codeline lineno="360" refid="struct_pa_asi_hpi_stream_1a73f6f13ff2d5dd03ef5df9946b5d9f5f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_allocation_group" kindref="compound">PaUtilAllocationGroup</ref><sp/>*<ref refid="struct_pa_asi_hpi_stream_1a73f6f13ff2d5dd03ef5df9946b5d9f5f" kindref="member">allocations</ref>;</highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>implementation<sp/>specific<sp/>data<sp/>goes<sp/>here<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"></highlight></codeline>
<codeline lineno="365" refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*input,<sp/>*<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>;</highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight></codeline>
<codeline lineno="368" refid="struct_pa_asi_hpi_stream_1aef07ecb3b6d4d1dcb1669d4e3925ebdb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_1aef07ecb3b6d4d1dcb1669d4e3925ebdb" kindref="member">pollingInterval</ref>;</highlight></codeline>
<codeline lineno="370" refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" kindref="member">callbackMode</ref>;</highlight></codeline>
<codeline lineno="372" refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>;</highlight></codeline>
<codeline lineno="374" refid="struct_pa_asi_hpi_stream_1a4310add2bc6454a4a9a2aeede23a4fea" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_stream_1a4310add2bc6454a4a9a2aeede23a4fea" kindref="member">neverDropInput</ref>;</highlight></codeline>
<codeline lineno="379" refid="struct_pa_asi_hpi_stream_1a9950b6297cfa3e55110a4e079606e9e3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>**<ref refid="struct_pa_asi_hpi_stream_1a9950b6297cfa3e55110a4e079606e9e3" kindref="member">blockingUserBufferCopy</ref>;</highlight></codeline>
<codeline lineno="380"><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Thread-related<sp/>variables<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="384" refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_unix_thread" kindref="compound">PaUnixThread</ref><sp/><ref refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" kindref="member">thread</ref>;</highlight></codeline>
<codeline lineno="386" refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/>sig_atomic_t<sp/><ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref>;</highlight></codeline>
<codeline lineno="388" refid="struct_pa_asi_hpi_stream_1a3b0ba003d3177d66b4f89a7d8b6ee659" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/>sig_atomic_t<sp/><ref refid="struct_pa_asi_hpi_stream_1a3b0ba003d3177d66b4f89a7d8b6ee659" kindref="member">callbackAbort</ref>;</highlight></codeline>
<codeline lineno="391" refid="struct_pa_asi_hpi_stream_1aa85410e770efbd7cfed99452c314809f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/>sig_atomic_t<sp/><ref refid="struct_pa_asi_hpi_stream_1aa85410e770efbd7cfed99452c314809f" kindref="member">callbackFinished</ref>;</highlight></codeline>
<codeline lineno="392"><highlight class="normal">}</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><ref refid="pa__linux__asihpi_8c_1a1b2e9d97e26672a58ed4b71e153a912e" kindref="member">PaAsiHpiStream</ref>;</highlight></codeline>
<codeline lineno="394"><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="397" refid="struct_pa_asi_hpi_stream_info" refkind="compound"><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref></highlight></codeline>
<codeline lineno="398"><highlight class="normal">{</highlight></codeline>
<codeline lineno="400" refid="struct_pa_asi_hpi_stream_info_1ab9516c3e7be528304c1829cb086c0ba5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_info_1ab9516c3e7be528304c1829cb086c0ba5" kindref="member">state</ref>;</highlight></codeline>
<codeline lineno="402" refid="struct_pa_asi_hpi_stream_info_1ad112f86fb1b2839cbc0e87bfd8616489" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_info_1ad112f86fb1b2839cbc0e87bfd8616489" kindref="member">bufferSize</ref>;</highlight></codeline>
<codeline lineno="404" refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" kindref="member">dataSize</ref>;</highlight></codeline>
<codeline lineno="406" refid="struct_pa_asi_hpi_stream_info_1a254075498024c75871b01557c010d9cb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_info_1a254075498024c75871b01557c010d9cb" kindref="member">frameCounter</ref>;</highlight></codeline>
<codeline lineno="410" refid="struct_pa_asi_hpi_stream_info_1acbb424b6faff235b6c04e237fdba002b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_info_1acbb424b6faff235b6c04e237fdba002b" kindref="member">auxDataSize</ref>;</highlight></codeline>
<codeline lineno="412" refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref>;</highlight></codeline>
<codeline lineno="416" refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/><ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref>;</highlight></codeline>
<codeline lineno="418" refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref>;</highlight></codeline>
<codeline lineno="420" refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref>;</highlight></codeline>
<codeline lineno="421"><highlight class="normal">}</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><ref refid="pa__linux__asihpi_8c_1a1f82a2733de7e58bb4adf22f9e965ec3" kindref="member">PaAsiHpiStreamInfo</ref>;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>--------------------------------------------------------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="427"><highlight class="comment"><sp/>*<sp/>Function<sp/>prototypes</highlight></codeline>
<codeline lineno="428"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;C&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal">{</highlight></codeline>
<codeline lineno="433"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>__cplusplus<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>only<sp/>exposed<sp/>function<sp/>in<sp/>the<sp/>entire<sp/>host<sp/>API<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__linux__asihpi_8c_1a35ba54c5bea6b14989d1de373b6961f1" kindref="member">PaAsiHpi_Initialize</ref>(<sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>**hostApi,<sp/><ref refid="portaudio_8h_1aeef6da084c57c70aa94be97411e19930" kindref="member">PaHostApiIndex</ref><sp/>index<sp/>);</highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal">}</highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>__cplusplus<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Terminate(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi<sp/>);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsFormatSupported(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>);</highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Stream<sp/>prototypes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>OpenStream(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>**<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerBuffer,</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a37c7ac3ace7d2dd1430f40ecdee4ebb6" kindref="member">PaStreamFlags</ref><sp/>streamFlags,</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a8a60fb2a5ec9cbade3f54a9c978e2710" kindref="member">PaStreamCallback</ref><sp/>*streamCallback,</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>);</highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>CloseStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StartStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="460"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StopStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="461"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>AbortStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamStopped(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamActive(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>GetStreamTime(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>GetStreamCpuLoad(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="466"><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Blocking<sp/>prototypes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ReadStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structbuffer" kindref="compound">buffer</ref>,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>);</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>WriteStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structbuffer" kindref="compound">buffer</ref>,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>);</highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>GetStreamReadAvailable(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>GetStreamWriteAvailable(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>);</highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Callback<sp/>prototypes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*CallbackThreadFunc(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>);</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Functions<sp/>specific<sp/>to<sp/>this<sp/>API<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_BuildDeviceList(<sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>);</highlight></codeline>
<codeline lineno="478"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>PaAsiHpi_PaToHpiFormat(<sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>paFormat<sp/>);</highlight></codeline>
<codeline lineno="479"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>PaAsiHpi_HpiToPaFormat(<sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>hpiFormat<sp/>);</highlight></codeline>
<codeline lineno="480"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_CreateFormat(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*parameters,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>**hpiDevice,<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format<sp/>*hpiFormat<sp/>);</highlight></codeline>
<codeline lineno="483"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_OpenInput(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format<sp/>*hpiFormat,</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_handle_t<sp/>*hpiStream<sp/>);</highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_OpenOutput(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format<sp/>*hpiFormat,</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_handle_t<sp/>*hpiStream<sp/>);</highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_GetStreamInfo(<sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*streamComp,<sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/>*<ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref><sp/>);</highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_StreamComponentDump(<sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*streamComp,<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="491"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_StreamDump(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="492"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_SetupBuffers(<sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*streamComp,<sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>pollingInterval,</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerPaHostBuffer,<sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1ae87de80b3b414a82eb74a4d0472d0092" kindref="member">suggestedLatency</ref><sp/>);</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_PrimeOutputWithSilence(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>);</highlight></codeline>
<codeline lineno="495"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_StartStream(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>outputPrimed<sp/>);</highlight></codeline>
<codeline lineno="496"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_StopStream(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>abort<sp/>);</highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_ExplicitStop(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>abort<sp/>);</highlight></codeline>
<codeline lineno="498"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_OnThreadExit(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>);</highlight></codeline>
<codeline lineno="499"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_WaitForFrames(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*framesAvail,</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>*cbFlags<sp/>);</highlight></codeline>
<codeline lineno="501"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_CalculateTimeInfo(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/><ref refid="struct_pa_stream_callback_time_info" kindref="compound">PaStreamCallbackTimeInfo</ref><sp/>*timeInfo<sp/>);</highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_BeginProcessing(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*<sp/>stream,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">*<sp/>numFrames,</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>*cbFlags<sp/>);</highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_EndProcessing(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>numFrames,</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>*cbFlags<sp/>);</highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>==========================================================================</highlight></codeline>
<codeline lineno="508"><highlight class="comment"><sp/>*<sp/>=============================<sp/>IMPLEMENTATION<sp/>=============================</highlight></codeline>
<codeline lineno="509"><highlight class="comment"><sp/>*<sp/>==========================================================================<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"></highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>---------------------------<sp/>Host<sp/>API<sp/>Interface<sp/>---------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_BuildDeviceList(<sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>)</highlight></codeline>
<codeline lineno="523"><highlight class="normal">{</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi<sp/>=<sp/>&amp;hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a17c8f54b933c0d8c50007e1a40bd5acf" kindref="member">baseHostApiRep</ref>;</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_host_api_info" kindref="compound">PaHostApiInfo</ref><sp/>*baseApiInfo<sp/>=<sp/>&amp;hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a9c443aa6cf07d3c46167a91b274a9e94" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDeviceList;</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>numAdapters;</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>hpi_err_t<sp/>hpiError<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>,<sp/>j,<sp/>deviceCount<sp/>=<sp/>0,<sp/>deviceIndex<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="531"><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>hpiHostApi<sp/>);</highlight></codeline>
<codeline lineno="533"><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Errors<sp/>not<sp/>considered<sp/>critical<sp/>here<sp/>(subsystem<sp/>may<sp/>report<sp/>0<sp/>devices),<sp/>but<sp/>report<sp/>them<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>in<sp/>debug<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_SubSysGetNumAdapters(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>&amp;numAdapters),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>);</highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>i=0;<sp/>i<sp/>&lt;<sp/>numAdapters;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>)</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>inStreams,<sp/>outStreams;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="lib_2expat_8h_1aec5db107b91447a96c47961ce9df2660" kindref="member">version</ref>;</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>serial;</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="namespacewaflib_1_1_tools_1_1tex_1a7638d43e3ce55594540ea118202a9a40" kindref="member">type</ref>;</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>idx;</highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_SubSysGetAdapter(<ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>i,<sp/>&amp;idx,<sp/>&amp;type);</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hpiError)</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="549"><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>open<sp/>adapter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_AdapterOpen(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>idx<sp/>);</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Report<sp/>error<sp/>and<sp/>skip<sp/>to<sp/>next<sp/>device<sp/>on<sp/>failure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_AdapterGetInfo(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>idx,<sp/>&amp;outStreams,<sp/>&amp;inStreams,</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;version,<sp/>&amp;serial,<sp/>&amp;type<sp/>);</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Skip<sp/>to<sp/>next<sp/>device<sp/>on<sp/>failure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Assign<sp/>default<sp/>devices<sp/>if<sp/>available<sp/>and<sp/>increment<sp/>device<sp/>count<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a85a62057c3479d3efaa477d8562cf21d" kindref="member">defaultInputDevice</ref><sp/>==<sp/><ref refid="portaudio_8h_1a8c26dd5e6f28bb4cda7a1f5460282297" kindref="member">paNoDevice</ref>)<sp/>&amp;&amp;<sp/>(inStreams<sp/>&gt;<sp/>0)<sp/>)</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a85a62057c3479d3efaa477d8562cf21d" kindref="member">defaultInputDevice</ref><sp/>=<sp/>deviceCount;</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceCount<sp/>+=<sp/>inStreams;</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a62632690b5f7906d3c9bfdab91e7f4b2" kindref="member">defaultOutputDevice</ref><sp/>==<sp/><ref refid="portaudio_8h_1a8c26dd5e6f28bb4cda7a1f5460282297" kindref="member">paNoDevice</ref>)<sp/>&amp;&amp;<sp/>(outStreams<sp/>&gt;<sp/>0)<sp/>)</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a62632690b5f7906d3c9bfdab91e7f4b2" kindref="member">defaultOutputDevice</ref><sp/>=<sp/>deviceCount;</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deviceCount<sp/>+=<sp/>outStreams;</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="577"><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Register<sp/>any<sp/>discovered<sp/>devices<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>deviceCount<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Memory<sp/>allocation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a48dcfdf57e6d12d33314929ac213ae28" kindref="member">deviceInfos</ref><sp/>=<sp/>(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref>**)<sp/><ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref>*)<sp/>*<sp/>deviceCount<sp/>),</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Allocate<sp/>all<sp/>device<sp/>info<sp/>structs<sp/>in<sp/>a<sp/>contiguous<sp/>block<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>hpiDeviceList<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref>*)<sp/><ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref>)<sp/>*<sp/>deviceCount<sp/>),</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Now<sp/>query<sp/>devices<sp/>again<sp/>for<sp/>information<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>i=0;<sp/>i<sp/>&lt;<sp/>numAdapters;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>)</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>inStreams,<sp/>outStreams;</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="lib_2expat_8h_1aec5db107b91447a96c47961ce9df2660" kindref="member">version</ref>;</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>serial;</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/><ref refid="namespacewaflib_1_1_tools_1_1tex_1a7638d43e3ce55594540ea118202a9a40" kindref="member">type</ref>;</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>idx;</highlight></codeline>
<codeline lineno="598"><highlight class="normal"></highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_SubSysGetAdapter(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>i,<sp/>&amp;idx,<sp/>&amp;type<sp/>);</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hpiError)</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"></highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Assume<sp/>adapter<sp/>is<sp/>still<sp/>open<sp/>from<sp/>previous<sp/>round<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_AdapterGetInfo(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>idx,</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;outStreams,<sp/>&amp;inStreams,<sp/>&amp;version,<sp/>&amp;serial,<sp/>&amp;type<sp/>);</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Report<sp/>error<sp/>and<sp/>skip<sp/>to<sp/>next<sp/>device<sp/>on<sp/>failure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Found<sp/>HPI<sp/>Adapter<sp/>ID=%4X<sp/>Idx=%d<sp/>#In=%d<sp/>#Out=%d<sp/>S/N=%d<sp/>HWver=%c%d<sp/>DSPver=%03d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>type,<sp/>idx,<sp/>inStreams,<sp/>outStreams,<sp/>serial,</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((version&gt;&gt;3)&amp;0xf)+</highlight><highlight class="charliteral">&apos;A&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Hw<sp/>version<sp/>major<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>version&amp;0x7,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Hw<sp/>version<sp/>minor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((version&gt;&gt;13)*100)+((version&gt;&gt;7)&amp;0x3f)<sp/><sp/></highlight><highlight class="comment">/*<sp/>DSP<sp/>code<sp/>version<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>));</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="621"><highlight class="normal"></highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>First<sp/>add<sp/>all<sp/>input<sp/>streams<sp/>as<sp/>devices<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>j=0;<sp/>j<sp/>&lt;<sp/>inStreams;<sp/>++j<sp/>)</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice<sp/>=<sp/>&amp;hpiDeviceList[deviceIndex];</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*baseDeviceInfo<sp/>=<sp/>&amp;hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a6901f154dd53fd482f1295154018cd13" kindref="member">baseDeviceInfo</ref>;</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>srcName[72];</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*deviceName;</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(<sp/>hpiDevice,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref>)<sp/>);</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>implementation-specific<sp/>device<sp/>details<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref><sp/>=<sp/>idx;</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1af8c1c37195d84fc0e095e0f3bb3f26dc" kindref="member">adapterType</ref><sp/>=<sp/><ref refid="namespacewaflib_1_1_tools_1_1tex_1a7638d43e3ce55594540ea118202a9a40" kindref="member">type</ref>;</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1ae7f2d9b7af773915ce4b03d17638c4ae" kindref="member">adapterVersion</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1aec5db107b91447a96c47961ce9df2660" kindref="member">version</ref>;</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a6b08780c17503edb4f0724e2f803d7e8" kindref="member">adapterSerialNumber</ref><sp/>=<sp/>serial;</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1afb6ffc3f50ee76abda0d9a816016ed59" kindref="member">streamIndex</ref><sp/>=<sp/>j;</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>common<sp/>PortAudio<sp/>device<sp/>stats<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a2d726add4cd2af78a94c052b3a7df568" kindref="member">structVersion</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Make<sp/>sure<sp/>name<sp/>string<sp/>is<sp/>owned<sp/>by<sp/>API<sp/>info<sp/>structure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf(<sp/>srcName,</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Adapter<sp/>%d<sp/>(%4X)<sp/>-<sp/>Input<sp/>Stream<sp/>%d&quot;</highlight><highlight class="normal">,<sp/>i+1,<sp/>type,<sp/>j+1<sp/>);</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>deviceName<sp/>=<sp/>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)<sp/><ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref>,<sp/>strlen(srcName)<sp/>+<sp/>1<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a11280e8971e1a91d58ccd7a36db51a8a" kindref="member">strcpy</ref>(<sp/>deviceName,<sp/>srcName<sp/>);</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref><sp/>=<sp/>deviceName;</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1afe741e4d185069577f7e74b78fdef5a4" kindref="member">hostApi</ref><sp/>=<sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1abad64b525a3e7fb58f73414dba93340a" kindref="member">hostApiIndex</ref>;</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref><sp/>=<sp/>HPI_MAX_CHANNELS;</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Default<sp/>latency<sp/>values<sp/>for<sp/>interactive<sp/>performance<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1aad6629064b8c7cf043d237ea0a5cc534" kindref="member">defaultLowInputLatency</ref><sp/>=<sp/>0.01;</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a89e60515505eea8d668ede3a26a19ac6" kindref="member">defaultLowOutputLatency</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Default<sp/>latency<sp/>values<sp/>for<sp/>robust<sp/>non-interactive<sp/>applications<sp/>(eg.<sp/>playing<sp/>sound<sp/>files)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a4214826038fcaf374beb9816024e6c9f" kindref="member">defaultHighInputLatency</ref><sp/>=<sp/>0.2;</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a2a43dbc2b158806a937065bda037070e" kindref="member">defaultHighOutputLatency</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HPI<sp/>interface<sp/>can<sp/>actually<sp/>handle<sp/>any<sp/>sampling<sp/>rate<sp/>to<sp/>1<sp/>Hz<sp/>accuracy,</highlight></codeline>
<codeline lineno="657"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>so<sp/>this<sp/>default<sp/>is<sp/>as<sp/>good<sp/>as<sp/>any<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a68f435353bfe1a4c9b632203a9afcacb" kindref="member">defaultSampleRate</ref><sp/>=<sp/>44100;</highlight></codeline>
<codeline lineno="659"><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Store<sp/>device<sp/>in<sp/>global<sp/>PortAudio<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a48dcfdf57e6d12d33314929ac213ae28" kindref="member">deviceInfos</ref>[deviceIndex++]<sp/>=<sp/>(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*)<sp/>hpiDevice;</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="663"><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Now<sp/>add<sp/>all<sp/>output<sp/>streams<sp/>as<sp/>devices<sp/>(I<sp/>know,<sp/>the<sp/>repetition<sp/>is<sp/>painful)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>j=0;<sp/>j<sp/>&lt;<sp/>outStreams;<sp/>++j<sp/>)</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice<sp/>=<sp/>&amp;hpiDeviceList[deviceIndex];</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*baseDeviceInfo<sp/>=<sp/>&amp;hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a6901f154dd53fd482f1295154018cd13" kindref="member">baseDeviceInfo</ref>;</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>srcName[72];</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*deviceName;</highlight></codeline>
<codeline lineno="671"><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(<sp/>hpiDevice,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref>)<sp/>);</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>implementation-specific<sp/>device<sp/>details<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref><sp/>=<sp/>idx;</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1af8c1c37195d84fc0e095e0f3bb3f26dc" kindref="member">adapterType</ref><sp/>=<sp/><ref refid="namespacewaflib_1_1_tools_1_1tex_1a7638d43e3ce55594540ea118202a9a40" kindref="member">type</ref>;</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1ae7f2d9b7af773915ce4b03d17638c4ae" kindref="member">adapterVersion</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1aec5db107b91447a96c47961ce9df2660" kindref="member">version</ref>;</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a6b08780c17503edb4f0724e2f803d7e8" kindref="member">adapterSerialNumber</ref><sp/>=<sp/>serial;</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1afb6ffc3f50ee76abda0d9a816016ed59" kindref="member">streamIndex</ref><sp/>=<sp/>j;</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>common<sp/>PortAudio<sp/>device<sp/>stats<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a2d726add4cd2af78a94c052b3a7df568" kindref="member">structVersion</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Make<sp/>sure<sp/>name<sp/>string<sp/>is<sp/>owned<sp/>by<sp/>API<sp/>info<sp/>structure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf(<sp/>srcName,</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Adapter<sp/>%d<sp/>(%4X)<sp/>-<sp/>Output<sp/>Stream<sp/>%d&quot;</highlight><highlight class="normal">,<sp/>i+1,<sp/>type,<sp/>j+1<sp/>);</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>deviceName<sp/>=<sp/>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)<sp/><ref refid="pa__allocation_8c_1ace88f0110da3a26cb8d8ed00758accf3" kindref="member">PaUtil_GroupAllocateMemory</ref>(</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref>,<sp/>strlen(srcName)<sp/>+<sp/>1<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hashrout_8h_1a11280e8971e1a91d58ccd7a36db51a8a" kindref="member">strcpy</ref>(<sp/>deviceName,<sp/>srcName<sp/>);</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref><sp/>=<sp/>deviceName;</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1afe741e4d185069577f7e74b78fdef5a4" kindref="member">hostApi</ref><sp/>=<sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1abad64b525a3e7fb58f73414dba93340a" kindref="member">hostApiIndex</ref>;</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1ad0baeeb2b6ceaf7fc9bb76109a7555e9" kindref="member">maxInputChannels</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a48f908b21e8a11fdf0a88132b18fe7b0" kindref="member">maxOutputChannels</ref><sp/>=<sp/>HPI_MAX_CHANNELS;</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Default<sp/>latency<sp/>values<sp/>for<sp/>interactive<sp/>performance.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1aad6629064b8c7cf043d237ea0a5cc534" kindref="member">defaultLowInputLatency</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a89e60515505eea8d668ede3a26a19ac6" kindref="member">defaultLowOutputLatency</ref><sp/>=<sp/>0.01;</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Default<sp/>latency<sp/>values<sp/>for<sp/>robust<sp/>non-interactive<sp/>applications<sp/>(eg.<sp/>playing<sp/>sound<sp/>files).<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a4214826038fcaf374beb9816024e6c9f" kindref="member">defaultHighInputLatency</ref><sp/>=<sp/>-1.0;</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a2a43dbc2b158806a937065bda037070e" kindref="member">defaultHighOutputLatency</ref><sp/>=<sp/>0.2;</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HPI<sp/>interface<sp/>can<sp/>actually<sp/>handle<sp/>any<sp/>sampling<sp/>rate<sp/>to<sp/>1<sp/>Hz<sp/>accuracy,</highlight></codeline>
<codeline lineno="699"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>so<sp/>this<sp/>default<sp/>is<sp/>as<sp/>good<sp/>as<sp/>any<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>baseDeviceInfo-&gt;<ref refid="struct_pa_device_info_1a68f435353bfe1a4c9b632203a9afcacb" kindref="member">defaultSampleRate</ref><sp/>=<sp/>44100;</highlight></codeline>
<codeline lineno="701"><highlight class="normal"></highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Store<sp/>device<sp/>in<sp/>global<sp/>PortAudio<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a48dcfdf57e6d12d33314929ac213ae28" kindref="member">deviceInfos</ref>[deviceIndex++]<sp/>=<sp/>(<ref refid="struct_pa_device_info" kindref="compound">PaDeviceInfo</ref><sp/>*)<sp/>hpiDevice;</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="707"><highlight class="normal"></highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Finally<sp/>acknowledge<sp/>checked<sp/>devices<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a44e3adfaba0117a6780e2493468c96b1" kindref="member">deviceCount</ref><sp/>=<sp/>deviceIndex;</highlight></codeline>
<codeline lineno="710"><highlight class="normal"></highlight></codeline>
<codeline lineno="711"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="713"><highlight class="normal">}</highlight></codeline>
<codeline lineno="714"><highlight class="normal"></highlight></codeline>
<codeline lineno="715"><highlight class="normal"></highlight></codeline>
<codeline lineno="727" refid="pa__unix__hostapis_8c_1a35ba54c5bea6b14989d1de373b6961f1" refkind="member"><highlight class="normal"><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/><ref refid="pa__linux__asihpi_8c_1a35ba54c5bea6b14989d1de373b6961f1" kindref="member">PaAsiHpi_Initialize</ref>(<sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>**hostApi,<sp/><ref refid="portaudio_8h_1aeef6da084c57c70aa94be97411e19930" kindref="member">PaHostApiIndex</ref><sp/><ref refid="struct_pa_asi_hpi_host_api_representation_1abad64b525a3e7fb58f73414dba93340a" kindref="member">hostApiIndex</ref><sp/>)</highlight></codeline>
<codeline lineno="728"><highlight class="normal">{</highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_host_api_info" kindref="compound">PaHostApiInfo</ref><sp/>*baseApiInfo;</highlight></codeline>
<codeline lineno="732"><highlight class="normal"></highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>initialize<sp/>HPI<sp/>subsystem<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!HPI_SubSysCreate())</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>the<sp/>V19<sp/>development<sp/>docs<sp/>say<sp/>that<sp/>if<sp/>an<sp/>implementation</highlight></codeline>
<codeline lineno="737"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>detects<sp/>that<sp/>it<sp/>cannot<sp/>be<sp/>used,<sp/>it<sp/>should<sp/>return<sp/>a<sp/>NULL</highlight></codeline>
<codeline lineno="738"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>interface<sp/>and<sp/>paNoError<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Could<sp/>not<sp/>open<sp/>HPI<sp/>interface\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="740"><highlight class="normal"></highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/>*hostApi<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>hpiVersion;</highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_SubSysGetVersionEx(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>&amp;hpiVersion<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;HPI<sp/>interface<sp/>v%d.%02d.%02d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiVersion<sp/>&gt;&gt;<sp/>16,<sp/><sp/>(hpiVersion<sp/>&gt;&gt;<sp/>8)<sp/>&amp;<sp/>0x0F,<sp/>(hpiVersion<sp/>&amp;<sp/>0x0F)<sp/>));</highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="751"><highlight class="normal"></highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Allocate<sp/>host<sp/>API<sp/>structure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>hpiHostApi<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref>*)<sp/><ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(</highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref>)<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref><sp/>=<sp/><ref refid="pa__allocation_8c_1a9cc7370b73e75f690ab0a0360e7fffee" kindref="member">PaUtil_CreateAllocationGroup</ref>(),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="756"><highlight class="normal"></highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1abad64b525a3e7fb58f73414dba93340a" kindref="member">hostApiIndex</ref><sp/>=<sp/><ref refid="struct_pa_asi_hpi_host_api_representation_1abad64b525a3e7fb58f73414dba93340a" kindref="member">hostApiIndex</ref>;</highlight></codeline>
<codeline lineno="758"><highlight class="normal"></highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/>*hostApi<sp/>=<sp/>&amp;hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a17c8f54b933c0d8c50007e1a40bd5acf" kindref="member">baseHostApiRep</ref>;</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo<sp/>=<sp/>&amp;((*hostApi)-&gt;info);</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>in<sp/>common<sp/>API<sp/>details<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a1f3a8c465488e7af8024237256d80c14" kindref="member">structVersion</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a5424bfcdf9f73b17cddc89e827a45d3f" kindref="member">type</ref><sp/>=<sp/><ref refid="portaudio_8h_1a8eaebe3d39c5ea45598da8f86dc2e5aea4651a7c2fb6e75843c130d82be7c7c4f" kindref="member">paAudioScienceHPI</ref>;</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a78afe5d557543c82cd9773229e25a8ec" kindref="member">name</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;AudioScience<sp/>HPI&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a44e3adfaba0117a6780e2493468c96b1" kindref="member">deviceCount</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a85a62057c3479d3efaa477d8562cf21d" kindref="member">defaultInputDevice</ref><sp/>=<sp/><ref refid="portaudio_8h_1a8c26dd5e6f28bb4cda7a1f5460282297" kindref="member">paNoDevice</ref>;</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/>baseApiInfo-&gt;<ref refid="struct_pa_host_api_info_1a62632690b5f7906d3c9bfdab91e7f4b2" kindref="member">defaultOutputDevice</ref><sp/>=<sp/><ref refid="portaudio_8h_1a8c26dd5e6f28bb4cda7a1f5460282297" kindref="member">paNoDevice</ref>;</highlight></codeline>
<codeline lineno="768"><highlight class="normal"></highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_BuildDeviceList(<sp/>hpiHostApi<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="770"><highlight class="normal"></highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;Terminate<sp/>=<sp/>Terminate;</highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;OpenStream<sp/>=<sp/>OpenStream;</highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/>(*hostApi)-&gt;IsFormatSupported<sp/>=<sp/>IsFormatSupported;</highlight></codeline>
<codeline lineno="774"><highlight class="normal"></highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a7ae912708e0bb060028f25e6f95333b7" kindref="member">PaUtil_InitializeStreamInterface</ref>(<sp/>&amp;hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1ad1d68d17d9ab37be6a3ec0c48749f0f4" kindref="member">callbackStreamInterface</ref>,<sp/>CloseStream,<sp/>StartStream,</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StopStream,<sp/>AbortStream,<sp/>IsStreamStopped,<sp/>IsStreamActive,</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetStreamTime,<sp/>GetStreamCpuLoad,</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1ae7a66186864e1f27f9e274e1de562219" kindref="member">PaUtil_DummyRead</ref>,<sp/><ref refid="pa__stream_8c_1a827035da5bb7141143595519b0c0edc7" kindref="member">PaUtil_DummyWrite</ref>,</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1aa43032a8fcb0d7b271f6049e4dc69e5c" kindref="member">PaUtil_DummyGetReadAvailable</ref>,<sp/><ref refid="pa__stream_8c_1aa4742249759bc11f31590db47cd19c2b" kindref="member">PaUtil_DummyGetWriteAvailable</ref><sp/>);</highlight></codeline>
<codeline lineno="780"><highlight class="normal"></highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a7ae912708e0bb060028f25e6f95333b7" kindref="member">PaUtil_InitializeStreamInterface</ref>(<sp/>&amp;hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a42f33f2e149240f040e17cdc8ec98104" kindref="member">blockingStreamInterface</ref>,<sp/>CloseStream,<sp/>StartStream,</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StopStream,<sp/>AbortStream,<sp/>IsStreamStopped,<sp/>IsStreamActive,</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetStreamTime,<sp/><ref refid="pa__stream_8c_1aba19e5ce44bb3621b6ca257959c30b43" kindref="member">PaUtil_DummyGetCpuLoad</ref>,</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ReadStream,<sp/>WriteStream,<sp/>GetStreamReadAvailable,<sp/>GetStreamWriteAvailable<sp/>);</highlight></codeline>
<codeline lineno="785"><highlight class="normal"></highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Store<sp/>identity<sp/>of<sp/>main<sp/>thread<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/><ref refid="pa__unix__util_8c_1a1d6b7ffc7a2a08e24900258ef8e3a35a" kindref="member">PaUnixThreading_Initialize</ref>()<sp/>);</highlight></codeline>
<codeline lineno="788"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hpiHostApi)</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>hpiHostApi<sp/>);</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="794"><highlight class="normal">}</highlight></codeline>
<codeline lineno="795"><highlight class="normal"></highlight></codeline>
<codeline lineno="796"><highlight class="normal"></highlight></codeline>
<codeline lineno="803"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Terminate(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi<sp/>)</highlight></codeline>
<codeline lineno="804"><highlight class="normal">{</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref>;</highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="808"><highlight class="normal"></highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiHostApi<sp/>)</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>rid<sp/>of<sp/>HPI-specific<sp/>structures<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>lastAdapterIndex<sp/>=<sp/>HPI_MAX_ADAPTERS;</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Iterate<sp/>through<sp/>device<sp/>list<sp/>and<sp/>close<sp/>adapters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>i=0;<sp/>i<sp/>&lt;<sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a9c443aa6cf07d3c46167a91b274a9e94" kindref="member">info</ref>.<ref refid="struct_pa_host_api_info_1a44e3adfaba0117a6780e2493468c96b1" kindref="member">deviceCount</ref>;<sp/>++<ref refid="checksum_8c_1ab80e330a3bc9e38c1297fe17381e92b4" kindref="member">i</ref><sp/>)</highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*)<sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a48dcfdf57e6d12d33314929ac213ae28" kindref="member">deviceInfos</ref>[<sp/>i<sp/>];</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Close<sp/>adapter<sp/>only<sp/>if<sp/>it<sp/>differs<sp/>from<sp/>previous<sp/>one<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref><sp/>!=<sp/>lastAdapterIndex<sp/>)</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Ignore<sp/>errors<sp/>(report<sp/>only<sp/>during<sp/>debugging)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_AdapterClose(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>);</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lastAdapterIndex<sp/>=<sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref>;</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Finally<sp/>dismantle<sp/>HPI<sp/>subsystem<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPI_SubSysFree(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>);</highlight></codeline>
<codeline lineno="828"><highlight class="normal"></highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref><sp/>)</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__allocation_8c_1aa83a07899e8db63d415d03f68b1f8a3d" kindref="member">PaUtil_FreeAllAllocations</ref>(<sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref><sp/>);</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__allocation_8c_1aefcb1143eaa768c2b555bd203f1c9deb" kindref="member">PaUtil_DestroyAllocationGroup</ref>(<sp/>hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a5ee6781a5d05f97533f06a92cef72dc6" kindref="member">allocations</ref><sp/>);</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="834"><highlight class="normal"></highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>hpiHostApi<sp/>);</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="839"><highlight class="normal">}</highlight></codeline>
<codeline lineno="840"><highlight class="normal"></highlight></codeline>
<codeline lineno="841"><highlight class="normal"></highlight></codeline>
<codeline lineno="848"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>PaAsiHpi_PaToHpiFormat(<sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>paFormat<sp/>)</highlight></codeline>
<codeline lineno="849"><highlight class="normal">{</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Ignore<sp/>interleaving<sp/>flag<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>paFormat<sp/>&amp;<sp/>~<ref refid="portaudio_8h_1a1d79f0b88812cef5364b276dbbc898b5" kindref="member">paNonInterleaved</ref><sp/>)</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>:</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM32_FLOAT;</highlight></codeline>
<codeline lineno="855"><highlight class="normal"></highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>:</highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM32_SIGNED;</highlight></codeline>
<codeline lineno="858"><highlight class="normal"></highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>:</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM24_SIGNED;</highlight></codeline>
<codeline lineno="861"><highlight class="normal"></highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>:</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM16_SIGNED;</highlight></codeline>
<codeline lineno="864"><highlight class="normal"></highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>:</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM8_UNSIGNED;</highlight></codeline>
<codeline lineno="867"><highlight class="normal"></highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Default<sp/>is<sp/>16-bit<sp/>signed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a058ecfb48ac9f0efad7a7b0d446efe3e" kindref="member">paInt8</ref>:</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM16_SIGNED;</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="873"><highlight class="normal">}</highlight></codeline>
<codeline lineno="874"><highlight class="normal"></highlight></codeline>
<codeline lineno="875"><highlight class="normal"></highlight></codeline>
<codeline lineno="882"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>PaAsiHpi_HpiToPaFormat(<sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>hpiFormat<sp/>)</highlight></codeline>
<codeline lineno="883"><highlight class="normal">{</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>hpiFormat<sp/>)</highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM32_FLOAT:</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2f16d29916725b8791eae60ab9e0b081" kindref="member">paFloat32</ref>;</highlight></codeline>
<codeline lineno="888"><highlight class="normal"></highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM32_SIGNED:</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a6fea69f3d81b628288325c06310b2fcf" kindref="member">paInt32</ref>;</highlight></codeline>
<codeline lineno="891"><highlight class="normal"></highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM24_SIGNED:</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a7f891a0bd9e94a94a8f446c176b749e7" kindref="member">paInt24</ref>;</highlight></codeline>
<codeline lineno="894"><highlight class="normal"></highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM16_SIGNED:</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ab284f8e0a161d78ede863aec45461dbd" kindref="member">paInt16</ref>;</highlight></codeline>
<codeline lineno="897"><highlight class="normal"></highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_FORMAT_PCM8_UNSIGNED:</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1ad826044e4ffe7b16bf990803ab77df37" kindref="member">paUInt8</ref>;</highlight></codeline>
<codeline lineno="900"><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Default<sp/>is<sp/>custom<sp/>format<sp/>(e.g.<sp/>for<sp/>HPI<sp/>MP3<sp/>format)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1aba595f6b645c8134a8ac3004957b9ff7" kindref="member">paCustomFormat</ref>;</highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="905"><highlight class="normal">}</highlight></codeline>
<codeline lineno="906"><highlight class="normal"></highlight></codeline>
<codeline lineno="907"><highlight class="normal"></highlight></codeline>
<codeline lineno="925"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_CreateFormat(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*parameters,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>**hpiDevice,<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format<sp/>*hpiFormat<sp/>)</highlight></codeline>
<codeline lineno="928"><highlight class="normal">{</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>maxChannelCount<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>hostSampleFormat<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/>hpi_err_t<sp/>hpiError<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="932"><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Unless<sp/>alternate<sp/>device<sp/>specification<sp/>is<sp/>supported,<sp/>reject<sp/>the<sp/>use<sp/>of</highlight></codeline>
<codeline lineno="934"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paUseHostApiSpecificDeviceSpecification<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>parameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref><sp/>==<sp/><ref refid="portaudio_8h_1a14795fe3377c3b037025a61e550d44b5" kindref="member">paUseHostApiSpecificDeviceSpecification</ref><sp/>)</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>parameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref><sp/>&lt;<sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a9c443aa6cf07d3c46167a91b274a9e94" kindref="member">info</ref>.<ref refid="struct_pa_host_api_info_1a44e3adfaba0117a6780e2493468c96b1" kindref="member">deviceCount</ref><sp/>);</highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*hpiDevice<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref>*)<sp/>hostApi-&gt;<ref refid="struct_pa_util_host_api_representation_1a48dcfdf57e6d12d33314929ac213ae28" kindref="member">deviceInfos</ref>[<sp/>parameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref><sp/>];</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="942"><highlight class="normal"></highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Validate<sp/>streamInfo<sp/>-<sp/>this<sp/>implementation<sp/>doesn&apos;t<sp/>use<sp/>custom<sp/>stream<sp/>info<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>parameters-&gt;<ref refid="struct_pa_stream_parameters_1aff01b9fa0710ad1654471e97665c06a9" kindref="member">hostApiSpecificStreamInfo</ref><sp/>)</highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a44f6cce375a3d38af28652179a400403" kindref="member">paIncompatibleHostApiSpecificStreamInfo</ref>;</highlight></codeline>
<codeline lineno="946"><highlight class="normal"></highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>that<sp/>device<sp/>can<sp/>support<sp/>channel<sp/>count<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(*hpiDevice)-&gt;streamIsOutput<sp/>)</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxChannelCount<sp/>=<sp/>(*hpiDevice)-&gt;baseDeviceInfo.maxOutputChannels;</highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxChannelCount<sp/>=<sp/>(*hpiDevice)-&gt;baseDeviceInfo.maxInputChannels;</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(maxChannelCount<sp/>==<sp/>0)<sp/>||<sp/>(parameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref><sp/>&gt;<sp/>maxChannelCount)<sp/>)</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="958"><highlight class="normal"></highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>All<sp/>standard<sp/>sample<sp/>formats<sp/>are<sp/>supported<sp/>by<sp/>the<sp/>buffer<sp/>adapter,</highlight></codeline>
<codeline lineno="960"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>this<sp/>implementation<sp/>doesn&apos;t<sp/>support<sp/>any<sp/>custom<sp/>sample<sp/>formats<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>parameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>&amp;<sp/><ref refid="portaudio_8h_1aba595f6b645c8134a8ac3004957b9ff7" kindref="member">paCustomFormat</ref><sp/>)</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="963"><highlight class="normal"></highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Switch<sp/>to<sp/>closest<sp/>HPI<sp/>native<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/>hostSampleFormat<sp/>=<sp/><ref refid="pa__converters_8c_1a74195475fe92d6b7b71de247f2b08184" kindref="member">PaUtil_SelectClosestAvailableFormat</ref>(<ref refid="pa__linux__asihpi_8c_1acebea7ce0e959421c271bea9c1985b95" kindref="member">PA_ASIHPI_AVAILABLE_FORMATS_</ref>,</highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>);</highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Setup<sp/>format<sp/>+<sp/>info<sp/>objects<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_FormatCreate(<sp/>hpiFormat,<sp/>(<ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref>)parameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>,</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaAsiHpi_PaToHpiFormat(<sp/>hostSampleFormat<sp/>),</highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref>)<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,<sp/>0,<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_FORMAT:</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="978"><highlight class="normal"></highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_SAMPLERATE:</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INCOMPATIBLE_SAMPLERATE:</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="982"><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_CHANNELS:</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="987"><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="989"><highlight class="normal">}</highlight></codeline>
<codeline lineno="990"><highlight class="normal"></highlight></codeline>
<codeline lineno="991"><highlight class="normal"></highlight></codeline>
<codeline lineno="1004"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_OpenInput(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format<sp/>*hpiFormat,</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_handle_t<sp/>*hpiStream<sp/>)</highlight></codeline>
<codeline lineno="1007"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/>hpi_err_t<sp/>hpiError<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"></highlight></codeline>
<codeline lineno="1012"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Catch<sp/>misplaced<sp/>output<sp/>devices,<sp/>as<sp/>they<sp/>typically<sp/>have<sp/>0<sp/>input<sp/>channels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>!hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref>,<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref><sp/>);</highlight></codeline>
<codeline lineno="1014"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>open<sp/>input<sp/>stream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamOpen(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref>,</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1afb6ffc3f50ee76abda0d9a816016ed59" kindref="member">streamIndex</ref>,<sp/>hpiStream<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a467dac712e45745d8b0d8cd429fd1a01" kindref="member">paDeviceUnavailable</ref><sp/>);</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>input<sp/>format<sp/>(checking<sp/>it<sp/>in<sp/>the<sp/>process)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1018"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Could<sp/>also<sp/>use<sp/>HPI_InStreamQueryFormat,<sp/>but<sp/>this<sp/>economizes<sp/>the<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_InStreamSetFormat(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*hpiStream,<sp/>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format*)hpiFormat<sp/>);</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamClose(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*hpiStream<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>);</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_FORMAT:</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"></highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_SAMPLERATE:</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INCOMPATIBLE_SAMPLERATE:</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"></highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_CHANNELS:</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"></highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>In<sp/>case<sp/>anything<sp/>else<sp/>went<sp/>wrong<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1041"><highlight class="normal"></highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1044"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"></highlight></codeline>
<codeline lineno="1046"><highlight class="normal"></highlight></codeline>
<codeline lineno="1059"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_OpenOutput(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format<sp/>*hpiFormat,</highlight></codeline>
<codeline lineno="1061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_handle_t<sp/>*hpiStream<sp/>)</highlight></codeline>
<codeline lineno="1062"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/><sp/><sp/>hpi_err_t<sp/>hpiError<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"></highlight></codeline>
<codeline lineno="1067"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Catch<sp/>misplaced<sp/>input<sp/>devices,<sp/>as<sp/>they<sp/>typically<sp/>have<sp/>0<sp/>output<sp/>channels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref>,<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref><sp/>);</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>open<sp/>output<sp/>stream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamOpen(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref>,</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiDevice-&gt;<ref refid="struct_pa_asi_hpi_device_info_1afb6ffc3f50ee76abda0d9a816016ed59" kindref="member">streamIndex</ref>,<sp/>hpiStream<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a467dac712e45745d8b0d8cd429fd1a01" kindref="member">paDeviceUnavailable</ref><sp/>);</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"></highlight></codeline>
<codeline lineno="1073"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>output<sp/>format<sp/>(format<sp/>is<sp/>set<sp/>on<sp/>first<sp/>write<sp/>to<sp/>output<sp/>stream)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1074"><highlight class="normal"><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_OutStreamQueryFormat(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*hpiStream,<sp/>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>hpi_format*)hpiFormat<sp/>);</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamClose(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>*hpiStream<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>);</highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_FORMAT:</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a69660cd762aec2672fd3393e0971e99c" kindref="member">paSampleFormatNotSupported</ref>;</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"></highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_SAMPLERATE:</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INCOMPATIBLE_SAMPLERATE:</highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a30a98097c3b6d9789077b72c26ae7c24" kindref="member">paInvalidSampleRate</ref>;</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"></highlight></codeline>
<codeline lineno="1088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_ERROR_INVALID_CHANNELS:</highlight></codeline>
<codeline lineno="1089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a46c51714378540c67c46895e726fb787" kindref="member">paInvalidChannelCount</ref>;</highlight></codeline>
<codeline lineno="1090"><highlight class="normal"></highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>In<sp/>case<sp/>anything<sp/>else<sp/>went<sp/>wrong<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a3442d8018bfa4329847d87df68b564a3" kindref="member">paInvalidDevice</ref>;</highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1095"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1096"><highlight class="normal"></highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1099"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1100"><highlight class="normal"></highlight></codeline>
<codeline lineno="1101"><highlight class="normal"></highlight></codeline>
<codeline lineno="1116"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsFormatSupported(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>)</highlight></codeline>
<codeline lineno="1120"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a400df642339bf4112333060af6a43c0f" kindref="member">paFormatIsSupported</ref>;</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_device_info" kindref="compound">PaAsiHpiDeviceInfo</ref><sp/>*hpiDevice<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">hpi_format<sp/>hpiFormat;</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"></highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>stream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>inputParameters<sp/>)</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_handle_t<sp/>hpiStream;</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Checking<sp/>input<sp/>params:<sp/>dev=%d,<sp/>sr=%d,<sp/>chans=%d,<sp/>fmt=%d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)sampleRate,</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>,<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>));</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>and<sp/>validate<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_CreateFormat(<sp/>hostApi,<sp/>inputParameters,<sp/>sampleRate,</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;hpiDevice,<sp/>&amp;hpiFormat<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Open<sp/>stream<sp/>to<sp/>further<sp/>check<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_OpenInput(<sp/>hostApi,<sp/>hpiDevice,<sp/>&amp;hpiFormat,<sp/>&amp;hpiStream<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Close<sp/>stream<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamClose(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>hpiStream<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>);</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"></highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Output<sp/>stream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>outputParameters<sp/>)</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_handle_t<sp/>hpiStream;</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Checking<sp/>output<sp/>params:<sp/>dev=%d,<sp/>sr=%d,<sp/>chans=%d,<sp/>fmt=%d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aebaf648b4d11dd1252a747b76b8da084" kindref="member">device</ref>,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)sampleRate,</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>,<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref><sp/>));</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>and<sp/>validate<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_CreateFormat(<sp/>hostApi,<sp/>outputParameters,<sp/>sampleRate,</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;hpiDevice,<sp/>&amp;hpiFormat<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Open<sp/>stream<sp/>to<sp/>further<sp/>check<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_OpenOutput(<sp/>hostApi,<sp/>hpiDevice,<sp/>&amp;hpiFormat,<sp/>&amp;hpiStream<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Close<sp/>stream<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamClose(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>hpiStream<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>);</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"></highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1160"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"></highlight></codeline>
<codeline lineno="1162"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>----------------------------<sp/>Stream<sp/>Interface<sp/>----------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1163"><highlight class="normal"></highlight></codeline>
<codeline lineno="1174"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_GetStreamInfo(<sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*streamComp,<sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/>*info<sp/>)</highlight></codeline>
<codeline lineno="1175"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a467dac712e45745d8b0d8cd429fd1a01" kindref="member">paDeviceUnavailable</ref>;</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a30af71eaf40c925c9832eb289a48da35" kindref="member">uint16_t</ref><sp/>state;</highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>bufferSize,<sp/>dataSize,<sp/>frameCounter,<sp/>auxDataSize,<sp/>threshold;</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>hwBufferSize,<sp/>hwDataSize;</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"></highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>streamComp<sp/>);</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>info<sp/>);</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"></highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>First<sp/>blank<sp/>the<sp/>stream<sp/>info<sp/>struct,<sp/>in<sp/>case<sp/>something<sp/>goes<sp/>wrong<sp/>below.</highlight></codeline>
<codeline lineno="1185"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>saves<sp/>the<sp/>caller<sp/>from<sp/>initializing<sp/>the<sp/>struct.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1ab9516c3e7be528304c1829cb086c0ba5" kindref="member">state</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1ad112f86fb1b2839cbc0e87bfd8616489" kindref="member">bufferSize</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" kindref="member">dataSize</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a254075498024c75871b01557c010d9cb" kindref="member">frameCounter</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1acbb424b6faff235b6c04e237fdba002b" kindref="member">auxDataSize</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"></highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref><sp/>&amp;&amp;<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>)</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Obtain<sp/>detailed<sp/>stream<sp/>info<sp/>(either<sp/>input<sp/>or<sp/>output)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>)</highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamGetInfoEx(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;state,<sp/>&amp;bufferSize,<sp/>&amp;dataSize,<sp/>&amp;frameCounter,</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;auxDataSize<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamGetInfoEx(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;state,<sp/>&amp;bufferSize,<sp/>&amp;dataSize,<sp/>&amp;frameCounter,</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;auxDataSize<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Load<sp/>stream<sp/>info<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1ab9516c3e7be528304c1829cb086c0ba5" kindref="member">state</ref><sp/>=<sp/>state;</highlight></codeline>
<codeline lineno="1215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1ad112f86fb1b2839cbc0e87bfd8616489" kindref="member">bufferSize</ref><sp/>=<sp/>bufferSize;</highlight></codeline>
<codeline lineno="1216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" kindref="member">dataSize</ref><sp/>=<sp/>dataSize;</highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a254075498024c75871b01557c010d9cb" kindref="member">frameCounter</ref><sp/>=<sp/>frameCounter;</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1acbb424b6faff235b6c04e237fdba002b" kindref="member">auxDataSize</ref><sp/>=<sp/>auxDataSize;</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Determine<sp/>total<sp/>buffered<sp/>data<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>=<sp/>dataSize;</highlight></codeline>
<codeline lineno="1221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>+=<sp/>auxDataSize;</highlight></codeline>
<codeline lineno="1223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>/=<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>;</highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Determine<sp/>immediately<sp/>available<sp/>frames<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>=<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>?</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bufferSize<sp/>-<sp/>dataSize<sp/>:<sp/>dataSize;</highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>/=<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>;</highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Minimum<sp/>space/data<sp/>required<sp/>in<sp/>buffers<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>threshold<sp/>=<sp/><ref refid="pa__unix__util_8h_1aea604351950df064043e9512ef7a222f" kindref="member">PA_MIN</ref>(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref>,</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>*<sp/><ref refid="pa__linux__asihpi_8c_1a66be6c722e2466a7c6eb3138f4bbea0b" kindref="member">PA_ASIHPI_MIN_FRAMES_</ref><sp/>);</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Obtain<sp/>hardware<sp/>buffer<sp/>stats<sp/>first,<sp/>to<sp/>simplify<sp/>things<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hwBufferSize<sp/>=<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" kindref="member">hardwareBufferSize</ref>;</highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hwDataSize<sp/>=<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>&gt;<sp/>0<sp/>?<sp/>auxDataSize<sp/>:<sp/>dataSize;</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Underflow<sp/>is<sp/>a<sp/>bit<sp/>tricky<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref><sp/>=<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>?</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Stream<sp/>seems<sp/>to<sp/>start<sp/>in<sp/>drained<sp/>state<sp/>sometimes,<sp/>so<sp/>ignore<sp/>initial<sp/>underflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(frameCounter<sp/>&gt;<sp/>0)<sp/>&amp;&amp;<sp/>(<sp/>(state<sp/>==<sp/>HPI_STATE_DRAINED)<sp/>||<sp/>(hwDataSize<sp/>==<sp/>0)<sp/>)<sp/>:</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>streams<sp/>check<sp/>the<sp/>first-level<sp/>(host)<sp/>buffer<sp/>for<sp/>underflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(state<sp/>!=<sp/>HPI_STATE_STOPPED)<sp/>&amp;&amp;<sp/>(dataSize<sp/>&lt;<sp/>threshold);</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>overflow<sp/>in<sp/>second-level<sp/>(hardware)<sp/>buffer<sp/>for<sp/>both<sp/>input<sp/>and<sp/>output<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref><sp/>=<sp/>(state<sp/>!=<sp/>HPI_STATE_STOPPED)<sp/>&amp;&amp;<sp/>(hwBufferSize<sp/>-<sp/>hwDataSize<sp/>&lt;<sp/>threshold);</highlight></codeline>
<codeline lineno="1242"><highlight class="normal"></highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1245"><highlight class="normal"></highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1248"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1249"><highlight class="normal"></highlight></codeline>
<codeline lineno="1250"><highlight class="normal"></highlight></codeline>
<codeline lineno="1257"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_StreamComponentDump(<sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*streamComp,</highlight></codeline>
<codeline lineno="1258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>)</highlight></codeline>
<codeline lineno="1259"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/>streamInfo;</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"></highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>streamComp<sp/>);</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"></highlight></codeline>
<codeline lineno="1265"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Name<sp/>of<sp/>soundcard/device<sp/>used<sp/>by<sp/>component<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;device:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a6901f154dd53fd482f1295154018cd13" kindref="member">baseDeviceInfo</ref>.<ref refid="struct_pa_device_info_1a1bc26d68f1d89472ae67eaa49a542aea" kindref="member">name</ref><sp/>));</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Unfortunately<sp/>some<sp/>overlap<sp/>between<sp/>input<sp/>and<sp/>output<sp/>here<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>)</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Settings<sp/>on<sp/>the<sp/>user<sp/>side<sp/>(as<sp/>experienced<sp/>by<sp/>user<sp/>callback)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;user:<sp/>%d-bit,<sp/>%d<sp/>&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>8*stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1aa390974cb52943cf40efed34c1daf52b" kindref="member">bytesPerUserOutputSample</ref>,</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1af2c3ba9b0cc5bd8eb2fad8b73b40ad18" kindref="member">outputChannelCount</ref>));</highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a3be95f50566a88ebdc2697cde95d042e" kindref="member">userOutputIsInterleaved</ref><sp/>)</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;interleaved<sp/>channels,<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;non-interleaved<sp/>channels,<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%d<sp/>frames/buffer,<sp/>latency<sp/>=<sp/>%5.1f<sp/>ms\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a2a61168f6d216e6aaade39b77452bcb9" kindref="member">framesPerUserBuffer</ref>,</highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1000*stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a372a81f39d90a85ae62225e9f57a7840" kindref="member">outputLatency</ref><sp/>));</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Settings<sp/>on<sp/>the<sp/>host<sp/>side<sp/>(internal<sp/>to<sp/>PortAudio<sp/>host<sp/>API)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;host:<sp/>%d-bit,<sp/>%d<sp/>interleaved<sp/>channels,<sp/>%d<sp/>frames/buffer<sp/>&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>8*stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a8a796dfdfac7c79bfffe8a44e690b358" kindref="member">bytesPerHostOutputSample</ref>,</highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1af2c3ba9b0cc5bd8eb2fad8b73b40ad18" kindref="member">outputChannelCount</ref>,</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1aeec9ebf0c415b1e8aa4b1667ebbc839a" kindref="member">framesPerHostBuffer</ref><sp/>));</highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Settings<sp/>on<sp/>the<sp/>user<sp/>side<sp/>(as<sp/>experienced<sp/>by<sp/>user<sp/>callback)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;user:<sp/>%d-bit,<sp/>%d<sp/>&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>8*stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1aaa4aba8c617b56f63f165e35b28fe393" kindref="member">bytesPerUserInputSample</ref>,</highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref>));</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a08fb4a5b71ccc3aa1893d8e6c035d192" kindref="member">userInputIsInterleaved</ref><sp/>)</highlight></codeline>
<codeline lineno="1298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;interleaved<sp/>channels,<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;non-interleaved<sp/>channels,<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%d<sp/>frames/buffer,<sp/>latency<sp/>=<sp/>%5.1f<sp/>ms\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a2a61168f6d216e6aaade39b77452bcb9" kindref="member">framesPerUserBuffer</ref>,</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1000*stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a1f5339e0fef75cea66d9153235698399" kindref="member">inputLatency</ref><sp/>));</highlight></codeline>
<codeline lineno="1308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Settings<sp/>on<sp/>the<sp/>host<sp/>side<sp/>(internal<sp/>to<sp/>PortAudio<sp/>host<sp/>API)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;host:<sp/>%d-bit,<sp/>%d<sp/>interleaved<sp/>channels,<sp/>%d<sp/>frames/buffer<sp/>&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>8*stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1ad7d3d4973cfe90f69dbb2fcf16a59d92" kindref="member">bytesPerHostInputSample</ref>,</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a878ec922a2464a3d57119d175f362366" kindref="member">inputChannelCount</ref>,</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1aeec9ebf0c415b1e8aa4b1667ebbc839a" kindref="member">framesPerHostBuffer</ref><sp/>));</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a71c934464b2671889ec3e20192e6e8d9" kindref="member">hostBufferSizeMode</ref><sp/>)</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa5e79e1ea4d8f114cfe83caa9b08610d8" kindref="member">paUtilFixedHostBufferSize</ref>:</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[fixed]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa2e97156fbdf5444b7bcc53b60f368d8b" kindref="member">paUtilBoundedHostBufferSize</ref>:</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[bounded]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa4273c3f42fdaa887af00afa2bdb03cc0" kindref="member">paUtilUnknownHostBufferSize</ref>:</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[unknown]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa90f2d4ab46cdebfe7efaadc602bf3c78" kindref="member">paUtilVariableHostBufferSizePartialUsageAllowed</ref>:</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[variable]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;(%d<sp/>max)\n&quot;</highlight><highlight class="normal">,<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>/<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>));</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HPI<sp/>hardware<sp/>settings<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;HPI:<sp/>adapter<sp/>%d<sp/>stream<sp/>%d,<sp/>%d-bit,<sp/>%d-channel,<sp/>%d<sp/>Hz\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a262bff2b6846dd61e2cc0f8e6c696321" kindref="member">adapterIndex</ref>,<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1afb6ffc3f50ee76abda0d9a816016ed59" kindref="member">streamIndex</ref>,</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>8<sp/>*<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>/<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wChannels,</highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wChannels,</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.dwSampleRate<sp/>));</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Stream<sp/>state<sp/>and<sp/>buffer<sp/>levels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;HPI:<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/><sp/>PaAsiHpi_GetStreamInfo(<sp/>streamComp,<sp/>&amp;streamInfo<sp/>);</highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1ab9516c3e7be528304c1829cb086c0ba5" kindref="member">state</ref><sp/>)</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_STATE_STOPPED:</highlight></codeline>
<codeline lineno="1342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[STOPPED]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1344"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_STATE_PLAYING:</highlight></codeline>
<codeline lineno="1345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[PLAYING]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1347"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_STATE_RECORDING:</highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[RECORDING]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1350"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>HPI_STATE_DRAINED:</highlight></codeline>
<codeline lineno="1351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[DRAINED]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1353"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[unknown<sp/>state]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>)</highlight></codeline>
<codeline lineno="1358"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;host<sp/>=<sp/>%d/%d<sp/>B,<sp/>&quot;</highlight><highlight class="normal">,<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" kindref="member">dataSize</ref>,<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>));</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;hw<sp/>=<sp/>%d/%d<sp/>(%d)<sp/>B,<sp/>&quot;</highlight><highlight class="normal">,<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1acbb424b6faff235b6c04e237fdba002b" kindref="member">auxDataSize</ref>,</highlight></codeline>
<codeline lineno="1361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" kindref="member">hardwareBufferSize</ref>,<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>));</highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1364"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;hw<sp/>=<sp/>%d/%d<sp/>B,<sp/>&quot;</highlight><highlight class="normal">,<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" kindref="member">dataSize</ref>,<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" kindref="member">hardwareBufferSize</ref><sp/>));</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1367"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;count<sp/>=<sp/>%d&quot;</highlight><highlight class="normal">,<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1a254075498024c75871b01557c010d9cb" kindref="member">frameCounter</ref><sp/>));</highlight></codeline>
<codeline lineno="1368"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref><sp/>)</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;<sp/>[overflow]&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref><sp/>)</highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;<sp/>[underflow]&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1377"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1378"><highlight class="normal"></highlight></codeline>
<codeline lineno="1379"><highlight class="normal"></highlight></codeline>
<codeline lineno="1384"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_StreamDump(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>)</highlight></codeline>
<codeline lineno="1385"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="1387"><highlight class="normal"></highlight></codeline>
<codeline lineno="1388"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;\n-------------------------<sp/>STREAM<sp/>INFO<sp/>FOR<sp/>%p<sp/>---------------------------\n&quot;</highlight><highlight class="normal">,<sp/>stream<sp/>));</highlight></codeline>
<codeline lineno="1389"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>General<sp/>stream<sp/>info<sp/>(input+output)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a87c11103277fc073b4f2ab82e30d48d9" kindref="member">streamCallback</ref><sp/>)</highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[callback]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1393"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[blocking]<sp/>&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1397"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;sr=%d<sp/>Hz,<sp/>poll=%d<sp/>ms,<sp/>max<sp/>%d<sp/>frames/buf<sp/>&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a9200fdee790d9155bc35d03be51ee2dd" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aef07ecb3b6d4d1dcb1669d4e3925ebdb" kindref="member">pollingInterval</ref>,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>));</highlight></codeline>
<codeline lineno="1401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref><sp/>)</highlight></codeline>
<codeline lineno="1402"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be" kindref="member">paAsiHpiStoppedState</ref>:</highlight></codeline>
<codeline lineno="1404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[stopped]\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e" kindref="member">paAsiHpiActiveState</ref>:</highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[active]\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0188ca40210ba62871ac2224749185d1" kindref="member">paAsiHpiCallbackFinishedState</ref>:</highlight></codeline>
<codeline lineno="1410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[cb<sp/>fin]\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;[unknown<sp/>state]\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" kindref="member">callbackMode</ref><sp/>)</highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;cb<sp/>info:<sp/>thread=%p,<sp/>cbAbort=%d,<sp/>cbFinished=%d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" kindref="member">thread</ref>.<ref refid="struct_pa_unix_thread_1ad00e0ea927d1c0f830984c9d7c70d41b" kindref="member">thread</ref>,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3b0ba003d3177d66b4f89a7d8b6ee659" kindref="member">callbackAbort</ref>,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aa85410e770efbd7cfed99452c314809f" kindref="member">callbackFinished</ref><sp/>));</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1421"><highlight class="normal"></highlight></codeline>
<codeline lineno="1422"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;-----------------------------------<sp/>Input<sp/><sp/>------------------------------------\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="1424"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaAsiHpi_StreamComponentDump(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="1426"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1428"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;*none*\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1431"><highlight class="normal"></highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;-----------------------------------<sp/>Output<sp/>------------------------------------\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaAsiHpi_StreamComponentDump(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="1436"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1438"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;*none*\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;-------------------------------------------------------------------------------\n\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"></highlight></codeline>
<codeline lineno="1443"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"></highlight></codeline>
<codeline lineno="1445"><highlight class="normal"></highlight></codeline>
<codeline lineno="1468"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_SetupBuffers(<sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*streamComp,<sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>pollingInterval,</highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerPaHostBuffer,<sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1ae87de80b3b414a82eb74a4d0472d0092" kindref="member">suggestedLatency</ref><sp/>)</highlight></codeline>
<codeline lineno="1470"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/>streamInfo;</highlight></codeline>
<codeline lineno="1473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>hpiBufferSize<sp/>=<sp/>0,<sp/>paHostBufferSize<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1474"><highlight class="normal"></highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>streamComp<sp/>);</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref><sp/>);</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"></highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Obtain<sp/>size<sp/>of<sp/>hardware<sp/>buffer<sp/>of<sp/>HPI<sp/>stream,<sp/>since<sp/>we<sp/>will<sp/>be<sp/>activating<sp/>BBM<sp/>shortly</highlight></codeline>
<codeline lineno="1479"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>afterwards<sp/>the<sp/>buffer<sp/>size<sp/>will<sp/>refer<sp/>to<sp/>the<sp/>BBM<sp/>(host-side)<sp/>buffer.</highlight></codeline>
<codeline lineno="1480"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>is<sp/>necessary<sp/>to<sp/>enable<sp/>reliable<sp/>detection<sp/>of<sp/>xruns.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>streamComp,<sp/>&amp;streamInfo<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" kindref="member">hardwareBufferSize</ref><sp/>=<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1ad112f86fb1b2839cbc0e87bfd8616489" kindref="member">bufferSize</ref>;</highlight></codeline>
<codeline lineno="1483"><highlight class="normal"><sp/><sp/><sp/><sp/>hpiBufferSize<sp/>=<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1ad112f86fb1b2839cbc0e87bfd8616489" kindref="member">bufferSize</ref>;</highlight></codeline>
<codeline lineno="1484"><highlight class="normal"></highlight></codeline>
<codeline lineno="1485"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>BBM<sp/>(background<sp/>bus<sp/>mastering)<sp/>is<sp/>to<sp/>be<sp/>enabled<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="pa__linux__asihpi_8c_1acf0737511ef6ce9aa8d588542d02fad5" kindref="member">PA_ASIHPI_USE_BBM_</ref><sp/>)</highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>bbmBufferSize<sp/>=<sp/>0,<sp/>preLatencyBufferSize<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpi_err_t<sp/>hpiError<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>pollingOverhead;</highlight></codeline>
<codeline lineno="1491"><highlight class="normal"></highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>overhead<sp/>of<sp/>Pa_Sleep()<sp/>call<sp/>(minimum<sp/>sleep<sp/>duration<sp/>in<sp/>ms<sp/>-&gt;<sp/>OS<sp/>dependent)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pollingOverhead<sp/>=<sp/><ref refid="pa__util_8h_1a9598384d28d22d589f607ca1069cc04c" kindref="member">PaUtil_GetTime</ref>();</highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a1b3c20044c9401c42add29475636e83d" kindref="member">Pa_Sleep</ref>(<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="1495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pollingOverhead<sp/>=<sp/>1000*(<ref refid="pa__util_8h_1a9598384d28d22d589f607ca1069cc04c" kindref="member">PaUtil_GetTime</ref>()<sp/>-<sp/>pollingOverhead);</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;polling<sp/>overhead<sp/>=<sp/>%f<sp/>ms<sp/>(length<sp/>of<sp/>0-second<sp/>sleep)\n&quot;</highlight><highlight class="normal">,<sp/>pollingOverhead<sp/>));</highlight></codeline>
<codeline lineno="1497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Obtain<sp/>minimum<sp/>recommended<sp/>size<sp/>for<sp/>host<sp/>buffer<sp/>(in<sp/>bytes)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_StreamEstimateBufferSize(<sp/>&amp;streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>,</highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pollingInterval<sp/>+<sp/>(<ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref>)ceil(<sp/>pollingOverhead<sp/>),</highlight></codeline>
<codeline lineno="1500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;bbmBufferSize<sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>BBM<sp/>places<sp/>more<sp/>stringent<sp/>requirements<sp/>on<sp/>buffer<sp/>size<sp/>(see<sp/>description<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>of<sp/>HPI_StreamEstimateBufferSize<sp/>in<sp/>HPI<sp/>API<sp/>document)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>*=<sp/>3;</highlight></codeline>
<codeline lineno="1504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Make<sp/>sure<sp/>the<sp/>BBM<sp/>buffer<sp/>contains<sp/>multiple<sp/>PA<sp/>host<sp/>buffers<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bbmBufferSize<sp/>&lt;<sp/>3<sp/>*<sp/>streamComp-&gt;bytesPerFrame<sp/>*<sp/>framesPerPaHostBuffer<sp/>)</highlight></codeline>
<codeline lineno="1506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>=<sp/>3<sp/>*<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>*<sp/>framesPerPaHostBuffer;</highlight></codeline>
<codeline lineno="1507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>honor<sp/>latency<sp/>suggested<sp/>by<sp/>user<sp/>by<sp/>growing<sp/>buffer<sp/>(no<sp/>decrease<sp/>possible)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>suggestedLatency<sp/>&gt;<sp/>0.0<sp/>)</highlight></codeline>
<codeline lineno="1509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>bufferDuration<sp/>=<sp/>((<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)bbmBufferSize)<sp/>/<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref></highlight></codeline>
<codeline lineno="1511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.dwSampleRate;</highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Don&apos;t<sp/>decrease<sp/>buffer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bufferDuration<sp/>&lt;<sp/>suggestedLatency<sp/>)</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>old<sp/>buffer<sp/>size,<sp/>to<sp/>be<sp/>retried<sp/>if<sp/>new<sp/>size<sp/>proves<sp/>too<sp/>big<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>preLatencyBufferSize<sp/>=<sp/>bbmBufferSize;</highlight></codeline>
<codeline lineno="1517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>=<sp/>(<ref refid="lib-src_2libsoxr_2msvc_2soxr-config_8h_1a0ddb3f43e52282b59ee55d059ed74a28" kindref="member">uint32_t</ref>)ceil(<sp/>suggestedLatency<sp/>*<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref></highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.dwSampleRate<sp/>);</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Choose<sp/>closest<sp/>memory<sp/>block<sp/>boundary<sp/>(HPI<sp/>API<sp/>document<sp/>states<sp/>that</highlight></codeline>
<codeline lineno="1522"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;a<sp/>buffer<sp/>size<sp/>of<sp/>Nx4096<sp/>-<sp/>20<sp/>makes<sp/>the<sp/>best<sp/>use<sp/>of<sp/>memory&quot;</highlight></codeline>
<codeline lineno="1523"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(under<sp/>the<sp/>entry<sp/>for<sp/>HPI_StreamEstimateBufferSize))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>=<sp/>((<ref refid="lib-src_2libsoxr_2msvc_2soxr-config_8h_1a0ddb3f43e52282b59ee55d059ed74a28" kindref="member">uint32_t</ref>)ceil((bbmBufferSize<sp/>+<sp/>20)/4096.0))*4096<sp/>-<sp/>20;</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>=<sp/>bbmBufferSize;</highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Allocate<sp/>BBM<sp/>host<sp/>buffer<sp/>(this<sp/>enables<sp/>bus<sp/>mastering<sp/>transfers<sp/>in<sp/>background)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>)</highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_OutStreamHostBufferAllocate(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>);</highlight></codeline>
<codeline lineno="1531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_InStreamHostBufferAllocate(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>);</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Indicate<sp/>that<sp/>BBM<sp/>is<sp/>disabled<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Retry<sp/>with<sp/>smaller<sp/>buffer<sp/>size<sp/>(transfers<sp/>will<sp/>still<sp/>work,<sp/>but<sp/>not<sp/>via<sp/>BBM)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>==<sp/>HPI_ERROR_INVALID_DATASIZE<sp/>)</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Retry<sp/>BBM<sp/>allocation<sp/>with<sp/>smaller<sp/>size<sp/>if<sp/>requested<sp/>latency<sp/>proved<sp/>too<sp/>big<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>preLatencyBufferSize<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Retrying<sp/>BBM<sp/>allocation<sp/>with<sp/>smaller<sp/>size<sp/>(%d<sp/>vs.<sp/>%d<sp/>bytes)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>preLatencyBufferSize,<sp/>bbmBufferSize<sp/>));</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>=<sp/>preLatencyBufferSize;</highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>)</highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_OutStreamHostBufferAllocate(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>);</highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiError<sp/>=<sp/>HPI_InStreamHostBufferAllocate(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbmBufferSize<sp/>);</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Another<sp/>round<sp/>of<sp/>error<sp/>checking<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>)</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>escapes<sp/>this<sp/>time<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>==<sp/>HPI_ERROR_INVALID_DATASIZE<sp/>)</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a5a07d92bec4707ab34a01893bf24940e" kindref="member">paBufferTooBig</ref>;</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiError<sp/>!=<sp/>HPI_ERROR_INVALID_OPERATION<sp/>)</highlight></codeline>
<codeline lineno="1567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="1569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>=<sp/>bbmBufferSize;</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiBufferSize<sp/>=<sp/>bbmBufferSize;</highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a5a07d92bec4707ab34a01893bf24940e" kindref="member">paBufferTooBig</ref>;</highlight></codeline>
<codeline lineno="1581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>BBM<sp/>not<sp/>supported,<sp/>foreground<sp/>transfers<sp/>will<sp/>be<sp/>used,<sp/>but<sp/>not<sp/>a<sp/>show-stopper<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Anything<sp/>else<sp/>is<sp/>an<sp/>error<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<sp/>hpiError<sp/>!=<sp/>HPI_ERROR_INVALID_OPERATION<sp/>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<sp/>hpiError<sp/>!=<sp/>HPI_ERROR_INVALID_FUNC<sp/>))</highlight></codeline>
<codeline lineno="1588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a3bc6c480e242083e83f787eb3cb81833" kindref="member">PA_ASIHPI_REPORT_ERROR_</ref>(<sp/>hpiError<sp/>);</highlight></codeline>
<codeline lineno="1590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref>;</highlight></codeline>
<codeline lineno="1591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hpiBufferSize<sp/>=<sp/>bbmBufferSize;</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1598"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1599"><highlight class="normal"></highlight></codeline>
<codeline lineno="1600"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Final<sp/>check<sp/>of<sp/>buffer<sp/>size<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1601"><highlight class="normal"><sp/><sp/><sp/><sp/>paHostBufferSize<sp/>=<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>*<sp/>framesPerPaHostBuffer;</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>hpiBufferSize<sp/>&lt;<sp/>3*paHostBufferSize<sp/>)</highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a5a07d92bec4707ab34a01893bf24940e" kindref="member">paBufferTooBig</ref>;</highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>;</highlight></codeline>
<codeline lineno="1606"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>cap<sp/>on<sp/>output<sp/>buffer<sp/>size,<sp/>based<sp/>on<sp/>latency<sp/>suggestions<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1608"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a5385ddaea81f298997d672b01deacf22" kindref="member">streamIsOutput</ref><sp/>)</highlight></codeline>
<codeline lineno="1609"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/><ref refid="sysex_8c_1a9c5bf07170b5d91cfb44d4bfd0517128" kindref="member">latency</ref><sp/>=<sp/>suggestedLatency<sp/>&gt;<sp/>0.0<sp/>?<sp/>suggestedLatency<sp/>:</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>-&gt;<ref refid="struct_pa_asi_hpi_device_info_1a6901f154dd53fd482f1295154018cd13" kindref="member">baseDeviceInfo</ref>.<ref refid="struct_pa_device_info_1a2a43dbc2b158806a937065bda037070e" kindref="member">defaultHighOutputLatency</ref>;</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>=</highlight></codeline>
<codeline lineno="1613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="lib-src_2libsoxr_2msvc_2soxr-config_8h_1a0ddb3f43e52282b59ee55d059ed74a28" kindref="member">uint32_t</ref>)ceil(<sp/>latency<sp/>*<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>*<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.dwSampleRate<sp/>);</highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>cap<sp/>should<sp/>not<sp/>be<sp/>too<sp/>small,<sp/>to<sp/>prevent<sp/>underflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>&lt;<sp/>4*paHostBufferSize<sp/>)</highlight></codeline>
<codeline lineno="1616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>=<sp/>4*paHostBufferSize;</highlight></codeline>
<codeline lineno="1617"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1618"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1619"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1621"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Temp<sp/>buffer<sp/>size<sp/>should<sp/>be<sp/>multiple<sp/>of<sp/>PA<sp/>host<sp/>buffer<sp/>size<sp/>(or<sp/>1x,<sp/>if<sp/>using<sp/>fixed<sp/>blocks)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1623"><highlight class="normal"><sp/><sp/><sp/><sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>=<sp/>paHostBufferSize;</highlight></codeline>
<codeline lineno="1624"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Allocate<sp/>temp<sp/>buffer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1625"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref><sp/>=<sp/>(<ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a9a941819355e6f658991890ff66b4b0e" kindref="member">uint8_t</ref><sp/>*)<ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(<sp/>streamComp-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>),</highlight></codeline>
<codeline lineno="1626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="1627"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1628"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1629"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1630"><highlight class="normal"></highlight></codeline>
<codeline lineno="1631"><highlight class="normal"></highlight></codeline>
<codeline lineno="1661"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>OpenStream(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="struct_pa_util_host_api_representation" kindref="compound">PaUtilHostApiRepresentation</ref><sp/>*hostApi,</highlight></codeline>
<codeline lineno="1662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>**<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="1663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*inputParameters,</highlight></codeline>
<codeline lineno="1664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct_pa_stream_parameters" kindref="compound">PaStreamParameters</ref><sp/>*outputParameters,</highlight></codeline>
<codeline lineno="1665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="1666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerBuffer,</highlight></codeline>
<codeline lineno="1667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a37c7ac3ace7d2dd1430f40ecdee4ebb6" kindref="member">PaStreamFlags</ref><sp/>streamFlags,</highlight></codeline>
<codeline lineno="1668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a8a60fb2a5ec9cbade3f54a9c978e2710" kindref="member">PaStreamCallback</ref><sp/>*streamCallback,</highlight></codeline>
<codeline lineno="1669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>)</highlight></codeline>
<codeline lineno="1670"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1672"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref><sp/>*hpiHostApi<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_host_api_representation" kindref="compound">PaAsiHpiHostApiRepresentation</ref>*)hostApi;</highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="1674"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesPerHostBuffer<sp/>=<sp/>framesPerBuffer;</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>inputChannelCount<sp/>=<sp/>0,<sp/>outputChannelCount<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>inputSampleFormat<sp/>=<sp/>0,<sp/>outputSampleFormat<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>hostInputSampleFormat<sp/>=<sp/>0,<sp/>hostOutputSampleFormat<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1678"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>maxSuggestedLatency<sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"></highlight></codeline>
<codeline lineno="1680"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Validate<sp/>platform-specific<sp/>flags<sp/>-&gt;<sp/>none<sp/>expected<sp/>for<sp/>HPI<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1681"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(streamFlags<sp/>&amp;<sp/><ref refid="portaudio_8h_1a8522957e1bf814b9782d3a0e314c8b51" kindref="member">paPlatformSpecificFlags</ref>)<sp/>!=<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="1682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aa5e7d0d9ea49ef845a93c89a3d138294" kindref="member">paInvalidFlag</ref>;<sp/></highlight><highlight class="comment">/*<sp/>unexpected<sp/>platform-specific<sp/>flag<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1683"><highlight class="normal"></highlight></codeline>
<codeline lineno="1684"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>blank<sp/>stream<sp/>structure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1685"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*)<ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>)<sp/>),</highlight></codeline>
<codeline lineno="1686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="1687"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(<sp/>stream,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>)<sp/>);</highlight></codeline>
<codeline lineno="1688"><highlight class="normal"></highlight></codeline>
<codeline lineno="1689"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>the<sp/>number<sp/>of<sp/>frames<sp/>per<sp/>buffer<sp/>is<sp/>unspecified,<sp/>we<sp/>have<sp/>to<sp/>come<sp/>up<sp/>with<sp/>one.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1690"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>framesPerHostBuffer<sp/>==<sp/><ref refid="portaudio_8h_1ac1e20b97c1858a59bc62823573c59f0b" kindref="member">paFramesPerBufferUnspecified</ref><sp/>)</highlight></codeline>
<codeline lineno="1691"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>inputParameters<sp/>)</highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxSuggestedLatency<sp/>=<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>;</highlight></codeline>
<codeline lineno="1694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>outputParameters<sp/>&amp;&amp;<sp/>(outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref><sp/>&gt;<sp/>maxSuggestedLatency)<sp/>)</highlight></codeline>
<codeline lineno="1695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxSuggestedLatency<sp/>=<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref>;</highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Use<sp/>suggested<sp/>latency<sp/>if<sp/>available<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>maxSuggestedLatency<sp/>&gt;<sp/>0.0<sp/>)</highlight></codeline>
<codeline lineno="1698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostBuffer<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>long)ceil(<sp/>maxSuggestedLatency<sp/>*<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>);</highlight></codeline>
<codeline lineno="1699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>AudioScience<sp/>cards<sp/>like<sp/>BIG<sp/>buffers<sp/>by<sp/>default<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostBuffer<sp/>=<sp/>4096;</highlight></codeline>
<codeline lineno="1702"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1703"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Lower<sp/>bounds<sp/>on<sp/>host<sp/>buffer<sp/>size,<sp/>due<sp/>to<sp/>polling<sp/>and<sp/>HPI<sp/>constraints<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1704"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>1000.0*framesPerHostBuffer/<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>&lt;<sp/><ref refid="pa__linux__asihpi_8c_1a844787c5015845c0601c0a396dbfaf56" kindref="member">PA_ASIHPI_MIN_POLLING_INTERVAL_</ref><sp/>)</highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostBuffer<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>long)ceil(<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>*<sp/><ref refid="pa__linux__asihpi_8c_1a844787c5015845c0601c0a396dbfaf56" kindref="member">PA_ASIHPI_MIN_POLLING_INTERVAL_</ref><sp/>/<sp/>1000.0<sp/>);</highlight></codeline>
<codeline lineno="1706"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/>if(<sp/>framesPerHostBuffer<sp/>&lt;<sp/>PA_ASIHPI_MIN_FRAMES_<sp/>)</highlight></codeline>
<codeline lineno="1707"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostBuffer<sp/>=<sp/>PA_ASIHPI_MIN_FRAMES_;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1708"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Efficient<sp/>if<sp/>host<sp/>buffer<sp/>size<sp/>is<sp/>integer<sp/>multiple<sp/>of<sp/>user<sp/>buffer<sp/>size<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>framesPerBuffer<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostBuffer<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>long)ceil(<sp/>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)framesPerHostBuffer<sp/>/<sp/>framesPerBuffer<sp/>)<sp/>*<sp/>framesPerBuffer;</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Buffer<sp/>should<sp/>always<sp/>be<sp/>a<sp/>multiple<sp/>of<sp/>4<sp/>bytes<sp/>to<sp/>facilitate<sp/>32-bit<sp/>PCI<sp/>transfers.</highlight></codeline>
<codeline lineno="1712"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>By<sp/>keeping<sp/>the<sp/>frames<sp/>a<sp/>multiple<sp/>of<sp/>4,<sp/>this<sp/>is<sp/>ensured<sp/>even<sp/>for<sp/>8-bit<sp/>mono<sp/>sound.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/><sp/>framesPerHostBuffer<sp/>=<sp/>(framesPerHostBuffer<sp/>/<sp/>4)<sp/>*<sp/>4;</highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Polling<sp/>is<sp/>based<sp/>on<sp/>time<sp/>length<sp/>(in<sp/>milliseconds)<sp/>of<sp/>user-requested<sp/>block<sp/>size<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aef07ecb3b6d4d1dcb1669d4e3925ebdb" kindref="member">pollingInterval</ref><sp/>=<sp/>(<ref refid="lib-src_2libsoxr_2msvc_2soxr-config_8h_1a0ddb3f43e52282b59ee55d059ed74a28" kindref="member">uint32_t</ref>)ceil(<sp/>1000.0*framesPerHostBuffer/<ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>);</highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>framesPerHostBuffer<sp/>&gt;<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="1717"><highlight class="normal"></highlight></codeline>
<codeline lineno="1718"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Open<sp/>underlying<sp/>streams,<sp/>check<sp/>formats<sp/>and<sp/>allocate<sp/>buffers<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>inputParameters<sp/>)</highlight></codeline>
<codeline lineno="1720"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>blank<sp/>stream<sp/>component<sp/>structure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*)<ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref>)<sp/>),</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="1724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref>)<sp/>);</highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create/validate<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_CreateFormat(<sp/>hostApi,<sp/>inputParameters,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Open<sp/>stream<sp/>and<sp/>set<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_OpenInput(<sp/>hostApi,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>,</highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputChannelCount<sp/>=<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>;</highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputSampleFormat<sp/>=<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref>;</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostInputSampleFormat<sp/>=<sp/>PaAsiHpi_HpiToPaFormat(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wFormat<sp/>);</highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>=<sp/>inputChannelCount<sp/>*<sp/><ref refid="portaudio_8h_1a541ed0b734df2631bc4c229acf92abc1" kindref="member">Pa_GetSampleSize</ref>(<sp/>hostInputSampleFormat<sp/>);</highlight></codeline>
<codeline lineno="1735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>&gt;<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Allocate<sp/>host<sp/>and<sp/>temp<sp/>buffers<sp/>of<sp/>appropriate<sp/>size<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_SetupBuffers(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aef07ecb3b6d4d1dcb1669d4e3925ebdb" kindref="member">pollingInterval</ref>,</highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostBuffer,<sp/>inputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1739"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>outputParameters<sp/>)</highlight></codeline>
<codeline lineno="1741"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>blank<sp/>stream<sp/>component<sp/>structure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*)<ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref>)<sp/>),</highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="1745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref>)<sp/>);</highlight></codeline>
<codeline lineno="1746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create/validate<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_CreateFormat(<sp/>hostApi,<sp/>outputParameters,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,</highlight></codeline>
<codeline lineno="1748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>,<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Open<sp/>stream<sp/>and<sp/>check<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_OpenOutput(<sp/>hostApi,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a1c84299c224c375c465b4e75bfce17f4" kindref="member">hpiDevice</ref>,</highlight></codeline>
<codeline lineno="1751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>,</highlight></codeline>
<codeline lineno="1752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputChannelCount<sp/>=<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1a861ff361da71fc2572dd356c9c9878ca" kindref="member">channelCount</ref>;</highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputSampleFormat<sp/>=<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1ad8d2d3063757b812f9e5f8709f41052b" kindref="member">sampleFormat</ref>;</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hostOutputSampleFormat<sp/>=<sp/>PaAsiHpi_HpiToPaFormat(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wFormat<sp/>);</highlight></codeline>
<codeline lineno="1756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>=<sp/>outputChannelCount<sp/>*<sp/><ref refid="portaudio_8h_1a541ed0b734df2631bc4c229acf92abc1" kindref="member">Pa_GetSampleSize</ref>(<sp/>hostOutputSampleFormat<sp/>);</highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Allocate<sp/>host<sp/>and<sp/>temp<sp/>buffers<sp/>of<sp/>appropriate<sp/>size<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_SetupBuffers(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aef07ecb3b6d4d1dcb1669d4e3925ebdb" kindref="member">pollingInterval</ref>,</highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerHostBuffer,<sp/>outputParameters-&gt;<ref refid="struct_pa_stream_parameters_1aa1e80ac0551162fd091db8936ccbe9a0" kindref="member">suggestedLatency</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1761"><highlight class="normal"></highlight></codeline>
<codeline lineno="1762"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Determine<sp/>maximum<sp/>frames<sp/>per<sp/>host<sp/>buffer<sp/>(least<sp/>common<sp/>denominator<sp/>of<sp/>input/output)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1763"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>inputParameters<sp/>&amp;&amp;<sp/>outputParameters<sp/>)</highlight></codeline>
<codeline lineno="1764"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>=<sp/><ref refid="pa__unix__util_8h_1aea604351950df064043e9512ef7a222f" kindref="member">PA_MIN</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>,</highlight></codeline>
<codeline lineno="1766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>);</highlight></codeline>
<codeline lineno="1767"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1769"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>=<sp/>inputParameters<sp/>?<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref></highlight></codeline>
<codeline lineno="1771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>;</highlight></codeline>
<codeline lineno="1772"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1773"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>&gt;<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="1774"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>various<sp/>other<sp/>stream<sp/>parameters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1775"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a4310add2bc6454a4a9a2aeede23a4fea" kindref="member">neverDropInput</ref><sp/>=<sp/>streamFlags<sp/>&amp;<sp/><ref refid="portaudio_8h_1ad89be5ed5279fc4c4a8495c775e1d5d5" kindref="member">paNeverDropInput</ref>;</highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref><sp/>=<sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be" kindref="member">paAsiHpiStoppedState</ref>;</highlight></codeline>
<codeline lineno="1777"><highlight class="normal"></highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>either<sp/>callback<sp/>or<sp/>blocking<sp/>interface<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1779"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>streamCallback<sp/>)</highlight></codeline>
<codeline lineno="1780"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a0e3a44086f5baa62308dfd6df77396e0" kindref="member">PaUtil_InitializeStreamRepresentation</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>,</highlight></codeline>
<codeline lineno="1782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1ad1d68d17d9ab37be6a3ec0c48749f0f4" kindref="member">callbackStreamInterface</ref>,</highlight></codeline>
<codeline lineno="1783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamCallback,<sp/>userData<sp/>);</highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" kindref="member">callbackMode</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1786"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1787"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1a0e3a44086f5baa62308dfd6df77396e0" kindref="member">PaUtil_InitializeStreamRepresentation</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>,</highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;hpiHostApi-&gt;<ref refid="struct_pa_asi_hpi_host_api_representation_1a42f33f2e149240f040e17cdc8ec98104" kindref="member">blockingStreamInterface</ref>,</highlight></codeline>
<codeline lineno="1790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamCallback,<sp/>userData<sp/>);</highlight></codeline>
<codeline lineno="1791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Pre-allocate<sp/>non-interleaved<sp/>user<sp/>buffer<sp/>pointers<sp/>for<sp/>blocking<sp/>interface<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9950b6297cfa3e55110a4e079606e9e3" kindref="member">blockingUserBufferCopy</ref><sp/>=</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1aa614f193aff12744a6ab90a9eb3128f0" kindref="member">PaUtil_AllocateMemory</ref>(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<sp/>*<sp/><ref refid="pa__unix__util_8h_1a4bc529f0326c76adbfea99f629a119bf" kindref="member">PA_MAX</ref>(<sp/>inputChannelCount,<sp/>outputChannelCount<sp/>)<sp/>),</highlight></codeline>
<codeline lineno="1794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7ad58986a9b5064d5a29c7ed0837bfc621" kindref="member">paInsufficientMemory</ref><sp/>);</highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" kindref="member">callbackMode</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1796"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1797"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__cpuload_8c_1a8cffac188367367b6c5c5ed8e0b1fe46" kindref="member">PaUtil_InitializeCpuLoadMeasurer</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1af369ced5674ff0a5f622a1b58232bfc4" kindref="member">cpuLoadMeasurer</ref>,<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>);</highlight></codeline>
<codeline lineno="1798"><highlight class="normal"></highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Following<sp/>pa_linux_alsa&apos;s<sp/>lead,<sp/>we<sp/>operate<sp/>with<sp/>fixed<sp/>host<sp/>buffer<sp/>size<sp/>by<sp/>default,<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1800"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>since<sp/>other<sp/>modes<sp/>will<sp/>invariably<sp/>lead<sp/>to<sp/>block<sp/>adaption<sp/>(maybe<sp/>Bounded<sp/>better?)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1801"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/><ref refid="pa__process_8c_1aaae7001566f528cf2d3cd453bf05c5d5" kindref="member">PaUtil_InitializeBufferProcessor</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,</highlight></codeline>
<codeline lineno="1802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputChannelCount,<sp/>inputSampleFormat,<sp/>hostInputSampleFormat,</highlight></codeline>
<codeline lineno="1803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputChannelCount,<sp/>outputSampleFormat,<sp/>hostOutputSampleFormat,</highlight></codeline>
<codeline lineno="1804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>,<sp/>streamFlags,</highlight></codeline>
<codeline lineno="1805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesPerBuffer,<sp/>framesPerHostBuffer,<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa5e79e1ea4d8f114cfe83caa9b08610d8" kindref="member">paUtilFixedHostBufferSize</ref>,</highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>streamCallback,<sp/>userData<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1807"><highlight class="normal"></highlight></codeline>
<codeline lineno="1808"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a5e053a3f0f6232a5d1ec0dee0f9a943b" kindref="member">structVersion</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1809"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a9200fdee790d9155bc35d03be51ee2dd" kindref="member">sampleRate</ref><sp/>=<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="1810"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Determine<sp/>input<sp/>latency<sp/>from<sp/>buffer<sp/>processor<sp/>and<sp/>buffer<sp/>sizes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1811"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="1812"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>bufferDuration<sp/>=<sp/>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>+<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" kindref="member">hardwareBufferSize</ref><sp/>)</highlight></codeline>
<codeline lineno="1814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>;</highlight></codeline>
<codeline lineno="1815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a1f5339e0fef75cea66d9153235698399" kindref="member">inputLatency</ref><sp/>=</highlight></codeline>
<codeline lineno="1816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bufferDuration<sp/>+</highlight></codeline>
<codeline lineno="1817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)<ref refid="pa__process_8c_1ae5a4104d7132396436e179825e2a3847" kindref="member">PaUtil_GetBufferProcessorInputLatencyFrames</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref><sp/>)<sp/>-</highlight></codeline>
<codeline lineno="1818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>)<sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="1819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a1f5339e0fef75cea66d9153235698399" kindref="member">inputLatency</ref><sp/>&gt;<sp/>0.0<sp/>);</highlight></codeline>
<codeline lineno="1820"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1821"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Determine<sp/>output<sp/>latency<sp/>from<sp/>buffer<sp/>processor<sp/>and<sp/>buffer<sp/>sizes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1822"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="1823"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>bufferDuration<sp/>=<sp/>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2e74e02676b12b73cec01f0d4b3a9d32" kindref="member">hostBufferSize</ref><sp/>+<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aaee8d45f2dd21ee33afeb9a8efda119e" kindref="member">hardwareBufferSize</ref><sp/>)</highlight></codeline>
<codeline lineno="1825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>;</highlight></codeline>
<codeline lineno="1826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Take<sp/>buffer<sp/>size<sp/>cap<sp/>into<sp/>account<sp/>(see<sp/>PaAsiHpi_WaitForFrames)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>&amp;&amp;<sp/>(stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>&gt;<sp/>0)<sp/>)</highlight></codeline>
<codeline lineno="1828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bufferDuration<sp/>=<sp/><ref refid="pa__unix__util_8h_1aea604351950df064043e9512ef7a222f" kindref="member">PA_MIN</ref>(<sp/>bufferDuration,</highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>);</highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a372a81f39d90a85ae62225e9f57a7840" kindref="member">outputLatency</ref><sp/>=</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bufferDuration<sp/>+</highlight></codeline>
<codeline lineno="1834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref>)<ref refid="pa__process_8c_1a853a8cd0e8d214406aa83ef3ef3d1102" kindref="member">PaUtil_GetBufferProcessorOutputLatencyFrames</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref><sp/>)<sp/>-</highlight></codeline>
<codeline lineno="1835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>)<sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="1836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a372a81f39d90a85ae62225e9f57a7840" kindref="member">outputLatency</ref><sp/>&gt;<sp/>0.0<sp/>);</highlight></codeline>
<codeline lineno="1837"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1838"><highlight class="normal"></highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Report<sp/>stream<sp/>info,<sp/>for<sp/>debugging<sp/>purposes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1840"><highlight class="normal"><sp/><sp/><sp/><sp/>PaAsiHpi_StreamDump(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="1841"><highlight class="normal"></highlight></codeline>
<codeline lineno="1842"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>initialized<sp/>stream<sp/>to<sp/>PA<sp/>stream<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1843"><highlight class="normal"><sp/><sp/><sp/><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>=<sp/>(<ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*)stream;</highlight></codeline>
<codeline lineno="1844"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1845"><highlight class="normal"></highlight></codeline>
<codeline lineno="1846"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1847"><highlight class="normal"><sp/><sp/><sp/><sp/>CloseStream(<sp/>(<ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref>*)stream<sp/>);</highlight></codeline>
<codeline lineno="1848"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1849"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1850"><highlight class="normal"></highlight></codeline>
<codeline lineno="1851"><highlight class="normal"></highlight></codeline>
<codeline lineno="1861"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>CloseStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="1862"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1863"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1864"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)s;</highlight></codeline>
<codeline lineno="1865"><highlight class="normal"></highlight></codeline>
<codeline lineno="1866"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>stream<sp/>is<sp/>already<sp/>gone,<sp/>all<sp/>is<sp/>well<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1867"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream<sp/>==<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>)</highlight></codeline>
<codeline lineno="1868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1869"><highlight class="normal"></highlight></codeline>
<codeline lineno="1870"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Generic<sp/>stream<sp/>cleanup<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1871"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1acf4e607f9c25ec2db5efd02ef1adb188" kindref="member">PaUtil_TerminateBufferProcessor</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref><sp/>);</highlight></codeline>
<codeline lineno="1872"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__stream_8c_1ac30f6c0d3138ef52c63c94fd1a53ea86" kindref="member">PaUtil_TerminateStreamRepresentation</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref><sp/>);</highlight></codeline>
<codeline lineno="1873"><highlight class="normal"></highlight></codeline>
<codeline lineno="1874"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Implementation-specific<sp/>details<sp/>-<sp/>close<sp/>internal<sp/>streams<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1875"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="1876"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Close<sp/>HPI<sp/>stream<sp/>(freeing<sp/>BBM<sp/>host<sp/>buffer<sp/>in<sp/>the<sp/>process,<sp/>if<sp/>used)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>)</highlight></codeline>
<codeline lineno="1879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamClose(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Free<sp/>temp<sp/>buffer<sp/>and<sp/>stream<sp/>component<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref><sp/>);</highlight></codeline>
<codeline lineno="1885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>);</highlight></codeline>
<codeline lineno="1886"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1887"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="1888"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Close<sp/>HPI<sp/>stream<sp/>(freeing<sp/>BBM<sp/>host<sp/>buffer<sp/>in<sp/>the<sp/>process,<sp/>if<sp/>used)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>)</highlight></codeline>
<codeline lineno="1891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamClose(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Free<sp/>temp<sp/>buffer<sp/>and<sp/>stream<sp/>component<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref><sp/>);</highlight></codeline>
<codeline lineno="1897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>);</highlight></codeline>
<codeline lineno="1898"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1899"><highlight class="normal"></highlight></codeline>
<codeline lineno="1900"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9950b6297cfa3e55110a4e079606e9e3" kindref="member">blockingUserBufferCopy</ref><sp/>);</highlight></codeline>
<codeline lineno="1901"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__util_8h_1a27a8f85d109600ef246e5c642c5c3cad" kindref="member">PaUtil_FreeMemory</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="1902"><highlight class="normal"></highlight></codeline>
<codeline lineno="1903"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1904"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1905"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1906"><highlight class="normal"></highlight></codeline>
<codeline lineno="1907"><highlight class="normal"></highlight></codeline>
<codeline lineno="1917"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_PrimeOutputWithSilence(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>)</highlight></codeline>
<codeline lineno="1918"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1919"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1920"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_component" kindref="compound">PaAsiHpiStreamComponent</ref><sp/>*<ref refid="lilv__test_8c_1af5a45dbcaa926b186e6f71d08212acc3" kindref="member">out</ref>;</highlight></codeline>
<codeline lineno="1921"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__converters_8h_1a6f0dab7cde48b5f41801024ed20be7e7" kindref="member">PaUtilZeroer</ref><sp/>*zeroer;</highlight></codeline>
<codeline lineno="1922"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>outputFormat;</highlight></codeline>
<codeline lineno="1923"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="1924"><highlight class="normal"><sp/><sp/><sp/><sp/>out<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>;</highlight></codeline>
<codeline lineno="1925"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Only<sp/>continue<sp/>if<sp/>stream<sp/>has<sp/>output<sp/>channels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1926"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!out<sp/>)</highlight></codeline>
<codeline lineno="1927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1928"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref><sp/>);</highlight></codeline>
<codeline lineno="1929"><highlight class="normal"></highlight></codeline>
<codeline lineno="1930"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>all<sp/>existing<sp/>data<sp/>in<sp/>hardware<sp/>playback<sp/>buffer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1931"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamReset(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1933"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>temp<sp/>buffer<sp/>with<sp/>silence<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1934"><highlight class="normal"><sp/><sp/><sp/><sp/>outputFormat<sp/>=<sp/>PaAsiHpi_HpiToPaFormat(<sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wFormat<sp/>);</highlight></codeline>
<codeline lineno="1935"><highlight class="normal"><sp/><sp/><sp/><sp/>zeroer<sp/>=<sp/><ref refid="pa__converters_8c_1ad280fad6e35350ddee70b9d6b6e12064" kindref="member">PaUtil_SelectZeroer</ref>(<sp/>outputFormat<sp/>);</highlight></codeline>
<codeline lineno="1936"><highlight class="normal"><sp/><sp/><sp/><sp/>zeroer(out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,<sp/>1,<sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>/<sp/><ref refid="portaudio_8h_1a541ed0b734df2631bc4c229acf92abc1" kindref="member">Pa_GetSampleSize</ref>(outputFormat)<sp/>);</highlight></codeline>
<codeline lineno="1937"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Write<sp/>temp<sp/>buffer<sp/>to<sp/>hardware<sp/>fifo<sp/>twice,<sp/>to<sp/>get<sp/>started<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1938"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamWriteBuf(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,<sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref>,<sp/>&amp;out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>),</highlight></codeline>
<codeline lineno="1940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1941"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamWriteBuf(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="1942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,<sp/>out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref>,<sp/>&amp;out-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>),</highlight></codeline>
<codeline lineno="1943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1944"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1945"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1946"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1947"><highlight class="normal"></highlight></codeline>
<codeline lineno="1948"><highlight class="normal"></highlight></codeline>
<codeline lineno="1961"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_StartStream(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>outputPrimed<sp/>)</highlight></codeline>
<codeline lineno="1962"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1963"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="1964"><highlight class="normal"></highlight></codeline>
<codeline lineno="1965"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="1966"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamStart(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1969"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1970"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="1971"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!outputPrimed<sp/>)</highlight></codeline>
<codeline lineno="1973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Buffer<sp/>isn&apos;t<sp/>primed,<sp/>so<sp/>load<sp/>stream<sp/>with<sp/>silence<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_PrimeOutputWithSilence(<sp/>stream<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="1976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamStart(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="1978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="1979"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1980"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref><sp/>=<sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e" kindref="member">paAsiHpiActiveState</ref>;</highlight></codeline>
<codeline lineno="1981"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aa85410e770efbd7cfed99452c314809f" kindref="member">callbackFinished</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1982"><highlight class="normal"></highlight></codeline>
<codeline lineno="1983"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Report<sp/>stream<sp/>info<sp/>for<sp/>debugging<sp/>purposes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1984"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/>PaAsiHpi_StreamDump(<sp/>stream<sp/>);<sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1985"><highlight class="normal"></highlight></codeline>
<codeline lineno="1986"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="1987"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1988"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1989"><highlight class="normal"></highlight></codeline>
<codeline lineno="1990"><highlight class="normal"></highlight></codeline>
<codeline lineno="2001"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StartStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2002"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2003"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2004"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)s;</highlight></codeline>
<codeline lineno="2005"><highlight class="normal"></highlight></codeline>
<codeline lineno="2006"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2007"><highlight class="normal"></highlight></codeline>
<codeline lineno="2008"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Ready<sp/>the<sp/>processor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2009"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a454635d7cd026eec37f3ab3d27afc38e" kindref="member">PaUtil_ResetBufferProcessor</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref><sp/>);</highlight></codeline>
<codeline lineno="2010"><highlight class="normal"></highlight></codeline>
<codeline lineno="2011"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" kindref="member">callbackMode</ref><sp/>)</highlight></codeline>
<codeline lineno="2012"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>and<sp/>start<sp/>callback<sp/>engine<sp/>thread<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Also<sp/>waits<sp/>1<sp/>second<sp/>for<sp/>stream<sp/>to<sp/>be<sp/>started<sp/>by<sp/>engine<sp/>thread<sp/>(otherwise<sp/>aborts)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/><ref refid="pa__unix__util_8c_1a1ea876bbbde993a851b1081065e4d5d8" kindref="member">PaUnixThread_New</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" kindref="member">thread</ref>,<sp/>&amp;CallbackThreadFunc,<sp/>stream,<sp/>1.,<sp/>0<sp/></highlight><highlight class="comment">/*rtSched*/</highlight><highlight class="normal"><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2016"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2017"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2018"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_StartStream(<sp/>stream,<sp/>0<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2020"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2021"><highlight class="normal"></highlight></codeline>
<codeline lineno="2022"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2023"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2024"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2025"><highlight class="normal"></highlight></codeline>
<codeline lineno="2026"><highlight class="normal"></highlight></codeline>
<codeline lineno="2040"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_StopStream(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>abort<sp/>)</highlight></codeline>
<codeline lineno="2041"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2042"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2043"><highlight class="normal"></highlight></codeline>
<codeline lineno="2044"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2045"><highlight class="normal"></highlight></codeline>
<codeline lineno="2046"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>channels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2047"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="2048"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamReset(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="2050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="2051"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2052"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Output<sp/>channels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2053"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="2054"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!abort<sp/>)</highlight></codeline>
<codeline lineno="2056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wait<sp/>until<sp/>HPI<sp/>output<sp/>stream<sp/>is<sp/>drained<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>1<sp/>)</highlight></codeline>
<codeline lineno="2059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/>streamInfo;</highlight></codeline>
<codeline lineno="2061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>timeLeft;</highlight></codeline>
<codeline lineno="2062"><highlight class="normal"></highlight></codeline>
<codeline lineno="2063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Obtain<sp/>number<sp/>of<sp/>samples<sp/>waiting<sp/>to<sp/>be<sp/>played<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>&amp;streamInfo<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>stream<sp/>is<sp/>drained<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1ab9516c3e7be528304c1829cb086c0ba5" kindref="member">state</ref><sp/>!=<sp/>HPI_STATE_PLAYING)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" kindref="member">dataSize</ref><sp/>&lt;<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>*<sp/><ref refid="pa__linux__asihpi_8c_1a66be6c722e2466a7c6eb3138f4bbea0b" kindref="member">PA_ASIHPI_MIN_FRAMES_</ref>)<sp/>)</highlight></codeline>
<codeline lineno="2068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Sleep<sp/>amount<sp/>of<sp/>time<sp/>represented<sp/>by<sp/>remaining<sp/>samples<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timeLeft<sp/>=<sp/>1000.0<sp/>*<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1a5cb756961bf1871b845084759b4bfd0d" kindref="member">dataSize</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref></highlight></codeline>
<codeline lineno="2071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a9200fdee790d9155bc35d03be51ee2dd" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="2072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a1b3c20044c9401c42add29475636e83d" kindref="member">Pa_Sleep</ref>(<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)ceil(<sp/>timeLeft<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamReset(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="2076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref><sp/>),<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="2077"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2078"><highlight class="normal"></highlight></codeline>
<codeline lineno="2079"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Report<sp/>stream<sp/>info<sp/>for<sp/>debugging<sp/>purposes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2080"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/>PaAsiHpi_StreamDump(<sp/>stream<sp/>);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2081"><highlight class="normal"></highlight></codeline>
<codeline lineno="2082"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2083"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2084"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2085"><highlight class="normal"></highlight></codeline>
<codeline lineno="2086"><highlight class="normal"></highlight></codeline>
<codeline lineno="2104"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_ExplicitStop(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>abort<sp/>)</highlight></codeline>
<codeline lineno="2105"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2106"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2107"><highlight class="normal"></highlight></codeline>
<codeline lineno="2108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>First<sp/>deal<sp/>with<sp/>the<sp/>callback<sp/>thread,<sp/>cancelling<sp/>and/or<sp/>joining<sp/>it<sp/>if<sp/>necessary<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2109"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" kindref="member">callbackMode</ref><sp/>)</highlight></codeline>
<codeline lineno="2110"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>threadRes;</highlight></codeline>
<codeline lineno="2112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3b0ba003d3177d66b4f89a7d8b6ee659" kindref="member">callbackAbort</ref><sp/>=<sp/>abort;</highlight></codeline>
<codeline lineno="2113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>abort<sp/>)</highlight></codeline>
<codeline lineno="2114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Aborting<sp/>callback\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="2116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Stopping<sp/>callback\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="2120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/><ref refid="pa__unix__util_8c_1a2f251ad2c037e1a573c1a5cb564b1afe" kindref="member">PaUnixThread_Terminate</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" kindref="member">thread</ref>,<sp/>!abort,<sp/>&amp;threadRes<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>threadRes<sp/>!=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref><sp/>)</highlight></codeline>
<codeline lineno="2123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Callback<sp/>thread<sp/>returned:<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>threadRes<sp/>));</highlight></codeline>
<codeline lineno="2125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2126"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2128"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_StopStream(<sp/>stream,<sp/>abort<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2130"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2131"><highlight class="normal"></highlight></codeline>
<codeline lineno="2132"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref><sp/>=<sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be" kindref="member">paAsiHpiStoppedState</ref>;</highlight></codeline>
<codeline lineno="2133"><highlight class="normal"></highlight></codeline>
<codeline lineno="2134"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2136"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2137"><highlight class="normal"></highlight></codeline>
<codeline lineno="2138"><highlight class="normal"></highlight></codeline>
<codeline lineno="2146"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>StopStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2147"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>PaAsiHpi_ExplicitStop(<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*)<sp/>s,<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="2149"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2150"><highlight class="normal"></highlight></codeline>
<codeline lineno="2151"><highlight class="normal"></highlight></codeline>
<codeline lineno="2159"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>AbortStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2160"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>PaAsiHpi_ExplicitStop(<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*<sp/>)<sp/>s,<sp/>1<sp/>);</highlight></codeline>
<codeline lineno="2162"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2163"><highlight class="normal"></highlight></codeline>
<codeline lineno="2164"><highlight class="normal"></highlight></codeline>
<codeline lineno="2176"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamStopped(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2177"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2178"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)s;</highlight></codeline>
<codeline lineno="2179"><highlight class="normal"></highlight></codeline>
<codeline lineno="2180"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref><sp/>==<sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be" kindref="member">paAsiHpiStoppedState</ref><sp/>?<sp/>1<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="2182"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2183"><highlight class="normal"></highlight></codeline>
<codeline lineno="2184"><highlight class="normal"></highlight></codeline>
<codeline lineno="2197"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>IsStreamActive(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2198"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2199"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)s;</highlight></codeline>
<codeline lineno="2200"><highlight class="normal"></highlight></codeline>
<codeline lineno="2201"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref><sp/>==<sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e" kindref="member">paAsiHpiActiveState</ref><sp/>?<sp/>1<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="2203"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2204"><highlight class="normal"></highlight></codeline>
<codeline lineno="2205"><highlight class="normal"></highlight></codeline>
<codeline lineno="2215"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1af17a7e6d0471a23071acf8dbd7bbe4bd" kindref="member">PaTime</ref><sp/>GetStreamTime(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2216"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2217"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="pa__util_8h_1a9598384d28d22d589f607ca1069cc04c" kindref="member">PaUtil_GetTime</ref>();</highlight></codeline>
<codeline lineno="2218"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2219"><highlight class="normal"></highlight></codeline>
<codeline lineno="2220"><highlight class="normal"></highlight></codeline>
<codeline lineno="2227"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>GetStreamCpuLoad(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2228"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2229"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)s;</highlight></codeline>
<codeline lineno="2230"><highlight class="normal"></highlight></codeline>
<codeline lineno="2231"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9ec09a8e74639bef0acf580cb33f9a35" kindref="member">callbackMode</ref><sp/>?<sp/><ref refid="pa__cpuload_8c_1af7bff59bbfe46a388e21633bf49ea0d6" kindref="member">PaUtil_GetCpuLoad</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1af369ced5674ff0a5f622a1b58232bfc4" kindref="member">cpuLoadMeasurer</ref><sp/>)<sp/>:<sp/>0.0;</highlight></codeline>
<codeline lineno="2232"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2233"><highlight class="normal"></highlight></codeline>
<codeline lineno="2234"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>---------------------------<sp/>Callback<sp/>Interface<sp/>---------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2235"><highlight class="normal"></highlight></codeline>
<codeline lineno="2244"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_OnThreadExit(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>)</highlight></codeline>
<codeline lineno="2245"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2246"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*)<sp/>userData;</highlight></codeline>
<codeline lineno="2247"><highlight class="normal"></highlight></codeline>
<codeline lineno="2248"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2249"><highlight class="normal"></highlight></codeline>
<codeline lineno="2250"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__cpuload_8c_1a31e622efc7504297b2191c3fe616b2ee" kindref="member">PaUtil_ResetCpuLoadMeasurer</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1af369ced5674ff0a5f622a1b58232bfc4" kindref="member">cpuLoadMeasurer</ref><sp/>);</highlight></codeline>
<codeline lineno="2251"><highlight class="normal"></highlight></codeline>
<codeline lineno="2252"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Stopping<sp/>HPI<sp/>streams\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__<sp/>));</highlight></codeline>
<codeline lineno="2253"><highlight class="normal"><sp/><sp/><sp/><sp/>PaAsiHpi_StopStream(<sp/>stream,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3b0ba003d3177d66b4f89a7d8b6ee659" kindref="member">callbackAbort</ref><sp/>);</highlight></codeline>
<codeline lineno="2254"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Stoppage\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__<sp/>));</highlight></codeline>
<codeline lineno="2255"><highlight class="normal"></highlight></codeline>
<codeline lineno="2256"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Eventually<sp/>notify<sp/>user<sp/>all<sp/>buffers<sp/>have<sp/>played<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a9132c3be1600907f747c38d64f4a4a3e" kindref="member">streamFinishedCallback</ref><sp/>)</highlight></codeline>
<codeline lineno="2258"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a9132c3be1600907f747c38d64f4a4a3e" kindref="member">streamFinishedCallback</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a5d47c8cae02066d877bc7c670adb61ad" kindref="member">userData</ref><sp/>);</highlight></codeline>
<codeline lineno="2260"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2261"><highlight class="normal"></highlight></codeline>
<codeline lineno="2262"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Unfortunately<sp/>both<sp/>explicit<sp/>calls<sp/>to<sp/>Stop/AbortStream<sp/>(leading<sp/>to<sp/>Stopped<sp/>state)</highlight></codeline>
<codeline lineno="2263"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>and<sp/>implicit<sp/>stops<sp/>via<sp/>paComplete/paAbort<sp/>(leading<sp/>to<sp/>CallbackFinished<sp/>state)</highlight></codeline>
<codeline lineno="2264"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>end<sp/>up<sp/>here<sp/>-<sp/>need<sp/>another<sp/>flag<sp/>to<sp/>remind<sp/>us<sp/>which<sp/>is<sp/>the<sp/>case<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2265"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aa85410e770efbd7cfed99452c314809f" kindref="member">callbackFinished</ref><sp/>)</highlight></codeline>
<codeline lineno="2266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3d0fb974d92bab23a1f2eab9519e4e08" kindref="member">state</ref><sp/>=<sp/><ref refid="pa__linux__asihpi_8c_1a984c1b93fe39c6de0fbc20fff3f6ec45a0188ca40210ba62871ac2224749185d1" kindref="member">paAsiHpiCallbackFinishedState</ref>;</highlight></codeline>
<codeline lineno="2267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2268"><highlight class="normal"></highlight></codeline>
<codeline lineno="2269"><highlight class="normal"></highlight></codeline>
<codeline lineno="2287"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_WaitForFrames(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*framesAvail,</highlight></codeline>
<codeline lineno="2288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>*cbFlags<sp/>)</highlight></codeline>
<codeline lineno="2289"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2290"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="2292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesTarget;</highlight></codeline>
<codeline lineno="2293"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>outputData<sp/>=<sp/>0,<sp/>outputSpace<sp/>=<sp/>0,<sp/>inputData<sp/>=<sp/>0,<sp/>framesLeft<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2294"><highlight class="normal"></highlight></codeline>
<codeline lineno="2295"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2296"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>||<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>);</highlight></codeline>
<codeline lineno="2297"><highlight class="normal"></highlight></codeline>
<codeline lineno="2298"><highlight class="normal"><sp/><sp/><sp/><sp/>sampleRate<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a9200fdee790d9155bc35d03be51ee2dd" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="2299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>We<sp/>have<sp/>to<sp/>come<sp/>up<sp/>with<sp/>this<sp/>much<sp/>frames<sp/>on<sp/>both<sp/>input<sp/>and<sp/>output<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2300"><highlight class="normal"><sp/><sp/><sp/><sp/>framesTarget<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1aeec9ebf0c415b1e8aa4b1667ebbc839a" kindref="member">framesPerHostBuffer</ref>;</highlight></codeline>
<codeline lineno="2301"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>framesTarget<sp/>&gt;<sp/>0<sp/>);</highlight></codeline>
<codeline lineno="2302"><highlight class="normal"></highlight></codeline>
<codeline lineno="2303"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>1<sp/>)</highlight></codeline>
<codeline lineno="2304"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="2306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>output<sp/>first,<sp/>as<sp/>this<sp/>takes<sp/>priority<sp/>in<sp/>the<sp/>default<sp/>full-duplex<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="2308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wait<sp/>until<sp/>enough<sp/>space<sp/>is<sp/>available<sp/>in<sp/>output<sp/>buffer<sp/>to<sp/>receive<sp/>a<sp/>full<sp/>block<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>&lt;<sp/>framesTarget<sp/>)</highlight></codeline>
<codeline lineno="2312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesLeft<sp/>=<sp/>framesTarget<sp/>-<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref>;</highlight></codeline>
<codeline lineno="2314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a1b3c20044c9401c42add29475636e83d" kindref="member">Pa_Sleep</ref>(<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)ceil(<sp/>1000<sp/>*<sp/>framesLeft<sp/>/<sp/>sampleRate<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wait<sp/>until<sp/>the<sp/>data<sp/>in<sp/>hardware<sp/>buffer<sp/>has<sp/>dropped<sp/>to<sp/>a<sp/>sensible<sp/>level.</highlight></codeline>
<codeline lineno="2318"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Without<sp/>this,<sp/>the<sp/>hardware<sp/>buffer<sp/>quickly<sp/>fills<sp/>up<sp/>in<sp/>the<sp/>absence<sp/>of<sp/>an<sp/>input</highlight></codeline>
<codeline lineno="2319"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream<sp/>to<sp/>regulate<sp/>its<sp/>data<sp/>rate<sp/>(if<sp/>data<sp/>generation<sp/>is<sp/>fast).<sp/>This<sp/>leads<sp/>to</highlight></codeline>
<codeline lineno="2320"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>large<sp/>latencies,<sp/>as<sp/>the<sp/>AudioScience<sp/>hardware<sp/>buffers<sp/>are<sp/>humongous.</highlight></codeline>
<codeline lineno="2321"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>is<sp/>similar<sp/>to<sp/>the<sp/>default<sp/>&quot;Hardware<sp/>Buffering=off&quot;<sp/>option<sp/>in<sp/>the</highlight></codeline>
<codeline lineno="2322"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AudioScience<sp/>WAV<sp/>driver.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>&amp;&amp;<sp/>(stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>&gt;<sp/>0)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="2324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref><sp/>)<sp/>)</highlight></codeline>
<codeline lineno="2325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesLeft<sp/>=<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>-<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1aee16a4bcc8580a966c64bbac57c0611c" kindref="member">outputBufferCap</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>;</highlight></codeline>
<codeline lineno="2327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a1b3c20044c9401c42add29475636e83d" kindref="member">Pa_Sleep</ref>(<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)ceil(<sp/>1000<sp/>*<sp/>framesLeft<sp/>/<sp/>sampleRate<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputData<sp/>=<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref>;</highlight></codeline>
<codeline lineno="2331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputSpace<sp/>=<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref>;</highlight></codeline>
<codeline lineno="2332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Report<sp/>output<sp/>underflow<sp/>to<sp/>callback<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cbFlags<sp/>|=<sp/><ref refid="portaudio_8h_1aa17c91c859b12ebbf53a1440def53c89" kindref="member">paOutputUnderflow</ref>;</highlight></codeline>
<codeline lineno="2336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2338"><highlight class="normal"></highlight></codeline>
<codeline lineno="2339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Now<sp/>check<sp/>input<sp/>side<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="2341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>a<sp/>full<sp/>block<sp/>of<sp/>samples<sp/>hasn&apos;t<sp/>been<sp/>recorded<sp/>yet,<sp/>wait<sp/>for<sp/>it<sp/>if<sp/>possible<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>&lt;<sp/>framesTarget<sp/>)</highlight></codeline>
<codeline lineno="2345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesLeft<sp/>=<sp/>framesTarget<sp/>-<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref>;</highlight></codeline>
<codeline lineno="2347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>As<sp/>long<sp/>as<sp/>output<sp/>is<sp/>not<sp/>disrupted<sp/>in<sp/>the<sp/>process,<sp/>wait<sp/>for<sp/>a<sp/>full</highlight></codeline>
<codeline lineno="2348"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>of<sp/>input<sp/>samples<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>||<sp/>(outputData<sp/>&gt;<sp/>framesLeft)<sp/>)</highlight></codeline>
<codeline lineno="2350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a1b3c20044c9401c42add29475636e83d" kindref="member">Pa_Sleep</ref>(<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)ceil(<sp/>1000<sp/>*<sp/>framesLeft<sp/>/<sp/>sampleRate<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputData<sp/>=<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref>;</highlight></codeline>
<codeline lineno="2364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cbFlags<sp/>|=<sp/><ref refid="portaudio_8h_1aea144f0edaf02d0ac8b113f41fb95c47" kindref="member">paInputOverflow</ref>;</highlight></codeline>
<codeline lineno="2367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2370"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2371"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Full-duplex<sp/>stream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2372"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>&amp;&amp;<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="2373"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>outputSpace<sp/>&gt;=<sp/>framesTarget<sp/>)</highlight></codeline>
<codeline lineno="2375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*framesAvail<sp/>=<sp/>outputSpace;</highlight></codeline>
<codeline lineno="2376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>input<sp/>didn&apos;t<sp/>make<sp/>the<sp/>target,<sp/>keep<sp/>the<sp/>output<sp/>count<sp/>instead<sp/>(input<sp/>underflow)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>(inputData<sp/>&gt;=<sp/>framesTarget)<sp/>&amp;&amp;<sp/>(inputData<sp/>&lt;<sp/>outputSpace)<sp/>)</highlight></codeline>
<codeline lineno="2378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*framesAvail<sp/>=<sp/>inputData;</highlight></codeline>
<codeline lineno="2379"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2381"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*framesAvail<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>?<sp/>inputData<sp/>:<sp/>outputSpace;</highlight></codeline>
<codeline lineno="2383"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2384"><highlight class="normal"></highlight></codeline>
<codeline lineno="2385"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2386"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2387"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2388"><highlight class="normal"></highlight></codeline>
<codeline lineno="2389"><highlight class="normal"></highlight></codeline>
<codeline lineno="2406"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PaAsiHpi_CalculateTimeInfo(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/><ref refid="struct_pa_stream_callback_time_info" kindref="compound">PaStreamCallbackTimeInfo</ref><sp/>*timeInfo<sp/>)</highlight></codeline>
<codeline lineno="2407"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2408"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/>streamInfo;</highlight></codeline>
<codeline lineno="2409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="2410"><highlight class="normal"></highlight></codeline>
<codeline lineno="2411"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2412"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>timeInfo<sp/>);</highlight></codeline>
<codeline lineno="2413"><highlight class="normal"><sp/><sp/><sp/><sp/>sampleRate<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9c4b93e3228c1659e33f1f48d269c849" kindref="member">baseStreamRep</ref>.<ref refid="struct_pa_util_stream_representation_1a13c2b5318f73dde9a11fd9d874763d4a" kindref="member">streamInfo</ref>.<ref refid="struct_pa_stream_info_1a9200fdee790d9155bc35d03be51ee2dd" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="2414"><highlight class="normal"></highlight></codeline>
<codeline lineno="2415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>current<sp/>time<sp/>(&quot;now&quot;)<sp/>is<sp/>at<sp/>the<sp/>forefront<sp/>of<sp/>both<sp/>recording<sp/>and<sp/>playback<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2416"><highlight class="normal"><sp/><sp/><sp/><sp/>timeInfo-&gt;<ref refid="struct_pa_stream_callback_time_info_1af21eb5482cadb212dae38fdbbd9bebfb" kindref="member">currentTime</ref><sp/>=<sp/>GetStreamTime(<sp/>(<ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*)stream<sp/>);</highlight></codeline>
<codeline lineno="2417"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>last<sp/>sample<sp/>in<sp/>the<sp/>input<sp/>buffer<sp/>was<sp/>recorded<sp/>just<sp/>now,<sp/>so<sp/>the<sp/>first<sp/>sample</highlight></codeline>
<codeline lineno="2418"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>happened<sp/>(number<sp/>of<sp/>recorded<sp/>samples)/sampleRate<sp/>ago<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2419"><highlight class="normal"><sp/><sp/><sp/><sp/>timeInfo-&gt;<ref refid="struct_pa_stream_callback_time_info_1ad114a6d5e1cf2cdd75837c33c1c8bb4c" kindref="member">inputBufferAdcTime</ref><sp/>=<sp/>timeInfo-&gt;<ref refid="struct_pa_stream_callback_time_info_1af21eb5482cadb212dae38fdbbd9bebfb" kindref="member">currentTime</ref>;</highlight></codeline>
<codeline lineno="2420"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="2421"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>&amp;streamInfo<sp/>);</highlight></codeline>
<codeline lineno="2423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timeInfo-&gt;<ref refid="struct_pa_stream_callback_time_info_1ad114a6d5e1cf2cdd75837c33c1c8bb4c" kindref="member">inputBufferAdcTime</ref><sp/>-=<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="2424"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2425"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>first<sp/>of<sp/>the<sp/>outgoing<sp/>samples<sp/>will<sp/>be<sp/>played<sp/>after<sp/>all<sp/>the<sp/>samples<sp/>in<sp/>the<sp/>output</highlight></codeline>
<codeline lineno="2426"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>buffer<sp/>is<sp/>done<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2427"><highlight class="normal"><sp/><sp/><sp/><sp/>timeInfo-&gt;<ref refid="struct_pa_stream_callback_time_info_1aa2052c42394fca748e83517fc8942609" kindref="member">outputBufferDacTime</ref><sp/>=<sp/>timeInfo-&gt;<ref refid="struct_pa_stream_callback_time_info_1af21eb5482cadb212dae38fdbbd9bebfb" kindref="member">currentTime</ref>;</highlight></codeline>
<codeline lineno="2428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="2429"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>&amp;streamInfo<sp/>);</highlight></codeline>
<codeline lineno="2431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timeInfo-&gt;<ref refid="struct_pa_stream_callback_time_info_1aa2052c42394fca748e83517fc8942609" kindref="member">outputBufferDacTime</ref><sp/>+=<sp/>streamInfo.<ref refid="struct_pa_asi_hpi_stream_info_1a573171e6d7e38fa204f0827638a09d1d" kindref="member">totalBufferedData</ref><sp/>/<sp/><ref refid="namespacepatest__suggested__vs__streaminfo__latency_1a14f2ecd6f756d329f6df4096833062d0" kindref="member">sampleRate</ref>;</highlight></codeline>
<codeline lineno="2432"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2433"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2434"><highlight class="normal"></highlight></codeline>
<codeline lineno="2435"><highlight class="normal"></highlight></codeline>
<codeline lineno="2450"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_BeginProcessing(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*numFrames,</highlight></codeline>
<codeline lineno="2451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>*cbFlags<sp/>)</highlight></codeline>
<codeline lineno="2452"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2453"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2454"><highlight class="normal"></highlight></codeline>
<codeline lineno="2455"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2456"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>*numFrames<sp/>&gt;<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>)</highlight></codeline>
<codeline lineno="2457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*numFrames<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>;</highlight></codeline>
<codeline lineno="2458"><highlight class="normal"></highlight></codeline>
<codeline lineno="2459"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>)</highlight></codeline>
<codeline lineno="2460"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="2462"><highlight class="normal"></highlight></codeline>
<codeline lineno="2463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="lib-src_2ffmpeg_2win32_2stdint_8h_1a6eb1e68cc391dd753bc8ce896dbb8315" kindref="member">uint32_t</ref><sp/>framesToGet<sp/>=<sp/>*numFrames;</highlight></codeline>
<codeline lineno="2464"><highlight class="normal"></highlight></codeline>
<codeline lineno="2465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>overflows<sp/>and<sp/>underflows<sp/>yet<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cbFlags<sp/>|=<sp/><ref refid="portaudio_8h_1aea144f0edaf02d0ac8b113f41fb95c47" kindref="member">paInputOverflow</ref>;</highlight></codeline>
<codeline lineno="2470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>underflow<sp/>if<sp/>less<sp/>than<sp/>expected<sp/>number<sp/>of<sp/>samples<sp/>pitch<sp/>up<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>framesToGet<sp/>&gt;<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>)</highlight></codeline>
<codeline lineno="2473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__converters_8h_1a6f0dab7cde48b5f41801024ed20be7e7" kindref="member">PaUtilZeroer</ref><sp/>*zeroer;</highlight></codeline>
<codeline lineno="2475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4582d93c2c2e60e12be3d74c5fe00b96" kindref="member">PaSampleFormat</ref><sp/>inputFormat;</highlight></codeline>
<codeline lineno="2476"><highlight class="normal"></highlight></codeline>
<codeline lineno="2477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Never<sp/>call<sp/>an<sp/>input-only<sp/>stream<sp/>with<sp/>InputUnderflow<sp/>set<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="2479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cbFlags<sp/>|=<sp/><ref refid="portaudio_8h_1a57d1879f52406bdedfdda8f79f458e15" kindref="member">paInputUnderflow</ref>;</highlight></codeline>
<codeline lineno="2480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesToGet<sp/>=<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref>;</highlight></codeline>
<codeline lineno="2481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>temp<sp/>buffer<sp/>with<sp/>silence<sp/>(to<sp/>make<sp/>up<sp/>for<sp/>missing<sp/>input<sp/>samples)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputFormat<sp/>=<sp/>PaAsiHpi_HpiToPaFormat(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wFormat<sp/>);</highlight></codeline>
<codeline lineno="2483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zeroer<sp/>=<sp/><ref refid="pa__converters_8c_1ad280fad6e35350ddee70b9d6b6e12064" kindref="member">PaUtil_SelectZeroer</ref>(<sp/>inputFormat<sp/>);</highlight></codeline>
<codeline lineno="2484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zeroer(stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,<sp/>1,</highlight></codeline>
<codeline lineno="2485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7b8eeeb20693a1f1deb0b41c2800c6a7" kindref="member">tempBufferSize</ref><sp/>/<sp/><ref refid="portaudio_8h_1a541ed0b734df2631bc4c229acf92abc1" kindref="member">Pa_GetSampleSize</ref>(inputFormat)<sp/>);</highlight></codeline>
<codeline lineno="2486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2487"><highlight class="normal"></highlight></codeline>
<codeline lineno="2488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>block<sp/>of<sp/>data<sp/>into<sp/>temp<sp/>buffer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_InStreamReadBuf(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="2490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="2491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,</highlight></codeline>
<codeline lineno="2492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesToGet<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>),</highlight></codeline>
<codeline lineno="2493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="2494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Register<sp/>temp<sp/>buffer<sp/>with<sp/>buffer<sp/>processor<sp/>(always<sp/>FULL<sp/>buffer)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a0f0a94dec2b29ecb9843deb00a889bea" kindref="member">PaUtil_SetInputFrameCount</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,<sp/>*numFrames<sp/>);</highlight></codeline>
<codeline lineno="2496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HPI<sp/>interface<sp/>only<sp/>allows<sp/>interleaved<sp/>channels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1ab3b6507f21701058bd152f0c99f3c294" kindref="member">PaUtil_SetInterleavedInputChannels</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,</highlight></codeline>
<codeline lineno="2498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,</highlight></codeline>
<codeline lineno="2499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wChannels<sp/>);</highlight></codeline>
<codeline lineno="2500"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="2502"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Register<sp/>temp<sp/>buffer<sp/>with<sp/>buffer<sp/>processor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a1dc65eb1e69dd6739e4dad4d74bf3785" kindref="member">PaUtil_SetOutputFrameCount</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,<sp/>*numFrames<sp/>);</highlight></codeline>
<codeline lineno="2505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HPI<sp/>interface<sp/>only<sp/>allows<sp/>interleaved<sp/>channels<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1adba29b453fea9e5abfba02dbcb01bd09" kindref="member">PaUtil_SetInterleavedOutputChannels</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,</highlight></codeline>
<codeline lineno="2507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,</highlight></codeline>
<codeline lineno="2508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wChannels<sp/>);</highlight></codeline>
<codeline lineno="2509"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2510"><highlight class="normal"></highlight></codeline>
<codeline lineno="2511"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2512"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2513"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2514"><highlight class="normal"></highlight></codeline>
<codeline lineno="2515"><highlight class="normal"></highlight></codeline>
<codeline lineno="2527"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>PaAsiHpi_EndProcessing(<sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>numFrames,</highlight></codeline>
<codeline lineno="2528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>*cbFlags<sp/>)</highlight></codeline>
<codeline lineno="2529"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2530"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2531"><highlight class="normal"></highlight></codeline>
<codeline lineno="2532"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2533"><highlight class="normal"></highlight></codeline>
<codeline lineno="2534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>)</highlight></codeline>
<codeline lineno="2535"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="2537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>underflows<sp/>after<sp/>the<sp/>(potentially<sp/>time-consuming)<sp/>callback<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cbFlags<sp/>|=<sp/><ref refid="portaudio_8h_1aa17c91c859b12ebbf53a1440def53c89" kindref="member">paOutputUnderflow</ref>;</highlight></codeline>
<codeline lineno="2542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2543"><highlight class="normal"></highlight></codeline>
<codeline lineno="2544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Write<sp/>temp<sp/>buffer<sp/>to<sp/>HPI<sp/>stream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f3166749a79c33dd5f5bcc2c94bad8c" kindref="member">PA_ASIHPI_UNLESS_</ref>(<sp/>HPI_OutStreamWriteBuf(<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,</highlight></codeline>
<codeline lineno="2546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1adb013f749ef39f2757a89ac73ec4d1fd" kindref="member">hpiStream</ref>,</highlight></codeline>
<codeline lineno="2547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a2a6fb26a57106d7c62f63578d38437b9" kindref="member">tempBuffer</ref>,</highlight></codeline>
<codeline lineno="2548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>numFrames<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1afa3f30d67315cd9fd127f4141d087dc0" kindref="member">bytesPerFrame</ref>,</highlight></codeline>
<codeline lineno="2549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>),</highlight></codeline>
<codeline lineno="2550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0" kindref="member">paUnanticipatedHostError</ref><sp/>);</highlight></codeline>
<codeline lineno="2551"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2552"><highlight class="normal"></highlight></codeline>
<codeline lineno="2553"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2555"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2556"><highlight class="normal"></highlight></codeline>
<codeline lineno="2557"><highlight class="normal"></highlight></codeline>
<codeline lineno="2567"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*CallbackThreadFunc(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="xmlparse_8c_1a4b666535c828e23ccd16510a0a1a1943" kindref="member">userData</ref><sp/>)</highlight></codeline>
<codeline lineno="2568"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2569"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2570"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*)<sp/>userData;</highlight></codeline>
<codeline lineno="2571"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>callbackResult<sp/>=<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acba49cbf0e3bf605bb3deecef3b4fce3" kindref="member">paContinue</ref>;</highlight></codeline>
<codeline lineno="2572"><highlight class="normal"></highlight></codeline>
<codeline lineno="2573"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2574"><highlight class="normal"></highlight></codeline>
<codeline lineno="2575"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Cleanup<sp/>routine<sp/>stops<sp/>streams<sp/>on<sp/>thread<sp/>exit<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2576"><highlight class="normal"><sp/><sp/><sp/><sp/>pthread_cleanup_push(<sp/>&amp;PaAsiHpi_OnThreadExit,<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2577"><highlight class="normal"></highlight></codeline>
<codeline lineno="2578"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>HPI<sp/>streams<sp/>and<sp/>notify<sp/>parent<sp/>when<sp/>we&apos;re<sp/>done<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2579"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/><ref refid="pa__unix__util_8c_1ab4ffae4c3e89df03d105effda5f29434" kindref="member">PaUnixThread_PrepareNotify</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" kindref="member">thread</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2580"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Buffer<sp/>will<sp/>be<sp/>primed<sp/>with<sp/>silence<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2581"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_StartStream(<sp/>stream,<sp/>0<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2582"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/><ref refid="pa__unix__util_8c_1a75d9c22a1e8e18d99cb532a5cf3da8d0" kindref="member">PaUnixThread_NotifyParent</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" kindref="member">thread</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2583"><highlight class="normal"></highlight></codeline>
<codeline lineno="2584"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>MAIN<sp/>LOOP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2585"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>1<sp/>)</highlight></codeline>
<codeline lineno="2586"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>cbFlags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesAvail,<sp/>framesGot;</highlight></codeline>
<codeline lineno="2589"><highlight class="normal"></highlight></codeline>
<codeline lineno="2590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_testcancel();</highlight></codeline>
<codeline lineno="2591"><highlight class="normal"></highlight></codeline>
<codeline lineno="2595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/><ref refid="pa__unix__util_8c_1a80a12f3ba5d557f3b16177737817ae19" kindref="member">PaUnixThread_StopRequested</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1ab1b5110d6b838483c92f1e914da6abee" kindref="member">thread</ref><sp/>)<sp/>&amp;&amp;<sp/>(callbackResult<sp/>==<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acba49cbf0e3bf605bb3deecef3b4fce3" kindref="member">paContinue</ref>)<sp/>)</highlight></codeline>
<codeline lineno="2596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;Setting<sp/>callbackResult<sp/>to<sp/>paComplete\n&quot;</highlight><highlight class="normal"><sp/>));</highlight></codeline>
<codeline lineno="2598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>callbackResult<sp/>=<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32aa01800db52ead393d8b0016f63d76650" kindref="member">paComplete</ref>;</highlight></codeline>
<codeline lineno="2599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2600"><highlight class="normal"></highlight></codeline>
<codeline lineno="2601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>winding<sp/>down<sp/>thread<sp/>if<sp/>requested<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>callbackResult<sp/>!=<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acba49cbf0e3bf605bb3deecef3b4fce3" kindref="member">paContinue</ref><sp/>)</highlight></codeline>
<codeline lineno="2603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3b0ba003d3177d66b4f89a7d8b6ee659" kindref="member">callbackAbort</ref><sp/>=<sp/>(callbackResult<sp/>==<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acaf141eb5d71420ffb4474da1dbd8de2" kindref="member">paAbort</ref>);</highlight></codeline>
<codeline lineno="2605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a3b0ba003d3177d66b4f89a7d8b6ee659" kindref="member">callbackAbort</ref><sp/>||</highlight></codeline>
<codeline lineno="2607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1aa718d784f39b7daad2cc4775677c2e84" kindref="member">PaUtil_IsBufferProcessorOutputEmpty</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref><sp/>)<sp/>)</highlight></codeline>
<codeline lineno="2608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;</highlight></codeline>
<codeline lineno="2610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Flushing<sp/>buffer<sp/>processor\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__<sp/>));</highlight></codeline>
<codeline lineno="2612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>There<sp/>is<sp/>still<sp/>buffered<sp/>output<sp/>that<sp/>needs<sp/>to<sp/>be<sp/>processed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2614"><highlight class="normal"></highlight></codeline>
<codeline lineno="2615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>SLEEP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wait<sp/>for<sp/>data<sp/>(or<sp/>buffer<sp/>space)<sp/>to<sp/>become<sp/>available.<sp/>This<sp/>basically<sp/>sleeps<sp/>and</highlight></codeline>
<codeline lineno="2617"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>polls<sp/>the<sp/>HPI<sp/>interface<sp/>until<sp/>a<sp/>full<sp/>block<sp/>of<sp/>frames<sp/>can<sp/>be<sp/>moved.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_WaitForFrames(<sp/>stream,<sp/>&amp;framesAvail,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2619"><highlight class="normal"></highlight></codeline>
<codeline lineno="2620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Consume<sp/>buffer<sp/>space.<sp/>Once<sp/>we<sp/>have<sp/>a<sp/>number<sp/>of<sp/>frames<sp/>available<sp/>for<sp/>consumption<sp/>we</highlight></codeline>
<codeline lineno="2621"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>must<sp/>retrieve<sp/>the<sp/>data<sp/>from<sp/>the<sp/>HPI<sp/>interface<sp/>and<sp/>pass<sp/>it<sp/>to<sp/>the<sp/>PA<sp/>buffer<sp/>processor.</highlight></codeline>
<codeline lineno="2622"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>We<sp/>should<sp/>be<sp/>prepared<sp/>to<sp/>process<sp/>several<sp/>chunks<sp/>successively.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>framesAvail<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="2624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_pa_stream_callback_time_info" kindref="compound">PaStreamCallbackTimeInfo</ref><sp/>timeInfo<sp/>=<sp/>{0,<sp/>0,<sp/>0};</highlight></codeline>
<codeline lineno="2626"><highlight class="normal"></highlight></codeline>
<codeline lineno="2627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_testcancel();</highlight></codeline>
<codeline lineno="2628"><highlight class="normal"></highlight></codeline>
<codeline lineno="2629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesGot<sp/>=<sp/>framesAvail;</highlight></codeline>
<codeline lineno="2630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a71c934464b2671889ec3e20192e6e8d9" kindref="member">hostBufferSizeMode</ref><sp/>==<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa5e79e1ea4d8f114cfe83caa9b08610d8" kindref="member">paUtilFixedHostBufferSize</ref><sp/>)</highlight></codeline>
<codeline lineno="2631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>We&apos;ve<sp/>committed<sp/>to<sp/>a<sp/>fixed<sp/>host<sp/>buffer<sp/>size,<sp/>stick<sp/>to<sp/>that<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesGot<sp/>=<sp/>framesGot<sp/>&gt;=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>?<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="2634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>We&apos;ve<sp/>committed<sp/>to<sp/>an<sp/>upper<sp/>bound<sp/>on<sp/>the<sp/>size<sp/>of<sp/>host<sp/>buffers<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a71c934464b2671889ec3e20192e6e8d9" kindref="member">hostBufferSizeMode</ref><sp/>==<sp/><ref refid="pa__process_8h_1a16c84d8c0ac62944797f530bf852484fa2e97156fbdf5444b7bcc53b60f368d8b" kindref="member">paUtilBoundedHostBufferSize</ref><sp/>);</highlight></codeline>
<codeline lineno="2639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesGot<sp/>=<sp/><ref refid="pa__unix__util_8h_1aea604351950df064043e9512ef7a222f" kindref="member">PA_MIN</ref>(<sp/>framesGot,<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref><sp/>);</highlight></codeline>
<codeline lineno="2640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2641"><highlight class="normal"></highlight></codeline>
<codeline lineno="2642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Obtain<sp/>buffer<sp/>timestamps<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PaAsiHpi_CalculateTimeInfo(<sp/>stream,<sp/>&amp;timeInfo<sp/>);</highlight></codeline>
<codeline lineno="2644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a1388263b1c5b765797abe767af6dbe80" kindref="member">PaUtil_BeginBufferProcessing</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,<sp/>&amp;timeInfo,<sp/>cbFlags<sp/>);</highlight></codeline>
<codeline lineno="2645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>CPU<sp/>load<sp/>measurement<sp/>should<sp/>include<sp/>processing<sp/>activivity<sp/>external<sp/>to<sp/>the<sp/>stream<sp/>callback<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__cpuload_8c_1a83fdceefb7dff41725ba4f1f13a80f79" kindref="member">PaUtil_BeginCpuLoadMeasurement</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1af369ced5674ff0a5f622a1b58232bfc4" kindref="member">cpuLoadMeasurer</ref><sp/>);</highlight></codeline>
<codeline lineno="2647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>framesGot<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="2648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>READ<sp/>FROM<sp/>HPI<sp/>INPUT<sp/>STREAM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_BeginProcessing(<sp/>stream,<sp/>&amp;framesGot,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>overflow<sp/>in<sp/>a<sp/>full-duplex<sp/>stream<sp/>makes<sp/>for<sp/>interesting<sp/>times<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref><sp/>&amp;&amp;<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref><sp/>&amp;&amp;<sp/>(cbFlags<sp/>&amp;<sp/><ref refid="portaudio_8h_1aea144f0edaf02d0ac8b113f41fb95c47" kindref="member">paInputOverflow</ref>)<sp/>)</highlight></codeline>
<codeline lineno="2653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Special<sp/>full-duplex<sp/>paNeverDropInput<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a4310add2bc6454a4a9a2aeede23a4fea" kindref="member">neverDropInput</ref><sp/>)</highlight></codeline>
<codeline lineno="2656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1ad8300bdb4ebf2aaad4b0bf8813af5695" kindref="member">PaUtil_SetNoOutput</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref><sp/>);</highlight></codeline>
<codeline lineno="2658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cbFlags<sp/>|=<sp/><ref refid="portaudio_8h_1ac22bb260d47b348bd3aab8813fd45462" kindref="member">paOutputOverflow</ref>;</highlight></codeline>
<codeline lineno="2659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>CALL<sp/>USER<sp/>CALLBACK<sp/>WITH<sp/>INPUT<sp/>DATA,<sp/>AND<sp/>OBTAIN<sp/>OUTPUT<sp/>DATA<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__process_8c_1a2bce3edf65753593f4f4005e917ad9e4" kindref="member">PaUtil_EndBufferProcessing</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,<sp/>&amp;callbackResult<sp/>);</highlight></codeline>
<codeline lineno="2663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>overflow<sp/>and<sp/>underflow<sp/>information<sp/>(but<sp/>PaAsiHpi_EndProcessing<sp/>might</highlight></codeline>
<codeline lineno="2664"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>still<sp/>show<sp/>up<sp/>output<sp/>underflow<sp/>that<sp/>will<sp/>carry<sp/>over<sp/>to<sp/>next<sp/>round)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cbFlags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>WRITE<sp/>TO<sp/>HPI<sp/>OUTPUT<sp/>STREAM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_EndProcessing(<sp/>stream,<sp/>framesGot,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Advance<sp/>frame<sp/>counter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesAvail<sp/>-=<sp/>framesGot;</highlight></codeline>
<codeline lineno="2670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__cpuload_8c_1a8c29cc1cf3b6fd9bf18a2c3fc9f0ef2a" kindref="member">PaUtil_EndCpuLoadMeasurement</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1af369ced5674ff0a5f622a1b58232bfc4" kindref="member">cpuLoadMeasurer</ref>,<sp/>framesGot<sp/>);</highlight></codeline>
<codeline lineno="2672"><highlight class="normal"></highlight></codeline>
<codeline lineno="2673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>framesGot<sp/>==<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="2674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Go<sp/>back<sp/>to<sp/>polling<sp/>for<sp/>more<sp/>frames<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2677"><highlight class="normal"></highlight></codeline>
<codeline lineno="2678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>callbackResult<sp/>!=<sp/><ref refid="portaudio_8h_1ae9bfb9c4e1895326f30f80d415c66c32acba49cbf0e3bf605bb3deecef3b4fce3" kindref="member">paContinue</ref><sp/>)</highlight></codeline>
<codeline lineno="2680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2682"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2683"><highlight class="normal"></highlight></codeline>
<codeline lineno="2684"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>This<sp/>code<sp/>is<sp/>unreachable,<sp/>but<sp/>important<sp/>to<sp/>include<sp/>regardless<sp/>because<sp/>it</highlight></codeline>
<codeline lineno="2685"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>is<sp/>possibly<sp/>a<sp/>macro<sp/>with<sp/>a<sp/>closing<sp/>brace<sp/>to<sp/>match<sp/>the<sp/>opening<sp/>brace<sp/>in</highlight></codeline>
<codeline lineno="2686"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>pthread_cleanup_push()<sp/>above.<sp/><sp/>The<sp/>documentation<sp/>states<sp/>that<sp/>they<sp/>must</highlight></codeline>
<codeline lineno="2687"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>always<sp/>occur<sp/>in<sp/>pairs.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2688"><highlight class="normal"><sp/><sp/><sp/><sp/>pthread_cleanup_pop(<sp/>1<sp/>);</highlight></codeline>
<codeline lineno="2689"><highlight class="normal"></highlight></codeline>
<codeline lineno="2690"><highlight class="normal"><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>:</highlight></codeline>
<codeline lineno="2691"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Indicates<sp/>normal<sp/>exit<sp/>of<sp/>callback,<sp/>as<sp/>opposed<sp/>to<sp/>the<sp/>thread<sp/>getting<sp/>killed<sp/>explicitly<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2692"><highlight class="normal"><sp/><sp/><sp/><sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aa85410e770efbd7cfed99452c314809f" kindref="member">callbackFinished</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2693"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__debugprint_8h_1a6452e5dde90d9c4ef698559e3f928b17" kindref="member">PA_DEBUG</ref>((<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Thread<sp/>%d<sp/>exiting<sp/>(callbackResult<sp/>=<sp/>%d)\n<sp/>&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>pthread_self(),<sp/>callbackResult<sp/>));</highlight></codeline>
<codeline lineno="2695"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Exit<sp/>from<sp/>thread<sp/>and<sp/>report<sp/>any<sp/>PortAudio<sp/>error<sp/>in<sp/>the<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2696"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__unix__util_8h_1a055995dcdc8dc582299a32f56500f0e1" kindref="member">PaUnixThreading_EXIT</ref>(<sp/>result<sp/>);</highlight></codeline>
<codeline lineno="2697"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2698"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/><ref refid="convtest_8m_1afb358f48b1646c750fb9da6c6585be2b" kindref="member">end</ref>;</highlight></codeline>
<codeline lineno="2699"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2700"><highlight class="normal"></highlight></codeline>
<codeline lineno="2701"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>---------------------------<sp/>Blocking<sp/>Interface<sp/>---------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2702"><highlight class="normal"></highlight></codeline>
<codeline lineno="2703"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>As<sp/>separate<sp/>stream<sp/>interfaces<sp/>are<sp/>used<sp/>for<sp/>blocking<sp/>and<sp/>callback<sp/>streams,<sp/>the<sp/>following</highlight></codeline>
<codeline lineno="2704"><highlight class="comment"><sp/>functions<sp/>can<sp/>be<sp/>guaranteed<sp/>to<sp/>only<sp/>be<sp/>called<sp/>for<sp/>blocking<sp/>streams.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2705"><highlight class="normal"></highlight></codeline>
<codeline lineno="2719"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>ReadStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="2720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structbuffer" kindref="compound">buffer</ref>,</highlight></codeline>
<codeline lineno="2721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>)</highlight></codeline>
<codeline lineno="2722"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2723"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2724"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="2725"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="2726"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*userBuffer;</highlight></codeline>
<codeline lineno="2727"><highlight class="normal"></highlight></codeline>
<codeline lineno="2728"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2729"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4a708b0414ebca1a78f9084671bd0a0c" kindref="member">paCanNotReadFromAnOutputOnlyStream</ref><sp/>);</highlight></codeline>
<codeline lineno="2730"><highlight class="normal"></highlight></codeline>
<codeline lineno="2731"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>input<sp/>overflow<sp/>since<sp/>previous<sp/>call<sp/>to<sp/>ReadStream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2732"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2733"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2734"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a25d517e59ea2e846119d972d5f1c53bb" kindref="member">paInputOverflowed</ref>;</highlight></codeline>
<codeline lineno="2736"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2737"><highlight class="normal"></highlight></codeline>
<codeline lineno="2738"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>NB<sp/>Make<sp/>copy<sp/>of<sp/>user<sp/>buffer<sp/>pointers,<sp/>since<sp/>they<sp/>are<sp/>advanced<sp/>by<sp/>buffer<sp/>processor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2739"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a08fb4a5b71ccc3aa1893d8e6c035d192" kindref="member">userInputIsInterleaved</ref><sp/>)</highlight></codeline>
<codeline lineno="2740"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>userBuffer<sp/>=<sp/><ref refid="recplay_8c_1adbbab5cb2248179d231690a1a02ff977" kindref="member">buffer</ref>;</highlight></codeline>
<codeline lineno="2742"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2743"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2744"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Copy<sp/>channels<sp/>into<sp/>local<sp/>array<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>userBuffer<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9950b6297cfa3e55110a4e079606e9e3" kindref="member">blockingUserBufferCopy</ref>;</highlight></codeline>
<codeline lineno="2747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(<sp/>userBuffer,<sp/><ref refid="structbuffer" kindref="compound">buffer</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wChannels<sp/>);</highlight></codeline>
<codeline lineno="2748"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2749"><highlight class="normal"></highlight></codeline>
<codeline lineno="2750"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>frames<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="2751"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesGot,<sp/>framesAvail;</highlight></codeline>
<codeline lineno="2753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>cbFlags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2754"><highlight class="normal"></highlight></codeline>
<codeline lineno="2755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_WaitForFrames(<sp/>stream,<sp/>&amp;framesAvail,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesGot<sp/>=<sp/><ref refid="pa__unix__util_8h_1aea604351950df064043e9512ef7a222f" kindref="member">PA_MIN</ref>(<sp/>framesAvail,<sp/>frames<sp/>);</highlight></codeline>
<codeline lineno="2757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_BeginProcessing(<sp/>stream,<sp/>&amp;framesGot,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2758"><highlight class="normal"></highlight></codeline>
<codeline lineno="2759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>framesGot<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="2760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesGot<sp/>=<sp/><ref refid="pa__process_8c_1ad0eca03235f47de0591865f8097df4d0" kindref="member">PaUtil_CopyInput</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,<sp/>&amp;userBuffer,<sp/>framesGot<sp/>);</highlight></codeline>
<codeline lineno="2762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_EndProcessing(<sp/>stream,<sp/>framesGot,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Advance<sp/>frame<sp/>counter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/>framesGot;</highlight></codeline>
<codeline lineno="2765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2766"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2767"><highlight class="normal"></highlight></codeline>
<codeline lineno="2768"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2769"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2770"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2771"><highlight class="normal"></highlight></codeline>
<codeline lineno="2772"><highlight class="normal"></highlight></codeline>
<codeline lineno="2786"><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>WriteStream(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>,</highlight></codeline>
<codeline lineno="2787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structbuffer" kindref="compound">buffer</ref>,</highlight></codeline>
<codeline lineno="2788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>frames<sp/>)</highlight></codeline>
<codeline lineno="2789"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2790"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2791"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="2792"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="2793"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*userBuffer;</highlight></codeline>
<codeline lineno="2794"><highlight class="normal"></highlight></codeline>
<codeline lineno="2795"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2796"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7af718bcda33019db4a3b9ec6bdefc6e9d" kindref="member">paCanNotWriteToAnInputOnlyStream</ref><sp/>);</highlight></codeline>
<codeline lineno="2797"><highlight class="normal"></highlight></codeline>
<codeline lineno="2798"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>output<sp/>underflow<sp/>since<sp/>previous<sp/>call<sp/>to<sp/>WriteStream<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2799"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2800"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2801"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a77657d34c5e91a2962e7df7730441eee" kindref="member">paOutputUnderflowed</ref>;</highlight></codeline>
<codeline lineno="2803"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2804"><highlight class="normal"></highlight></codeline>
<codeline lineno="2805"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>NB<sp/>Make<sp/>copy<sp/>of<sp/>user<sp/>buffer<sp/>pointers,<sp/>since<sp/>they<sp/>are<sp/>advanced<sp/>by<sp/>buffer<sp/>processor<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2806"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>.<ref refid="struct_pa_util_buffer_processor_1a3be95f50566a88ebdc2697cde95d042e" kindref="member">userOutputIsInterleaved</ref><sp/>)</highlight></codeline>
<codeline lineno="2807"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>userBuffer<sp/>=<sp/><ref refid="recplay_8c_1adbbab5cb2248179d231690a1a02ff977" kindref="member">buffer</ref>;</highlight></codeline>
<codeline lineno="2809"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2810"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2811"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Copy<sp/>channels<sp/>into<sp/>local<sp/>array<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>userBuffer<sp/>=<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a9950b6297cfa3e55110a4e079606e9e3" kindref="member">blockingUserBufferCopy</ref>;</highlight></codeline>
<codeline lineno="2814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)userBuffer,<sp/><ref refid="structbuffer" kindref="compound">buffer</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>-&gt;<ref refid="struct_pa_asi_hpi_stream_component_1a7728064372425eaee08c70bbe936b891" kindref="member">hpiFormat</ref>.wChannels<sp/>);</highlight></codeline>
<codeline lineno="2815"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2816"><highlight class="normal"></highlight></codeline>
<codeline lineno="2817"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<sp/>frames<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="2818"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>framesGot,<sp/>framesAvail;</highlight></codeline>
<codeline lineno="2820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a55a005924bcfa0424594f4f65cd4ae82" kindref="member">PaStreamCallbackFlags</ref><sp/>cbFlags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2821"><highlight class="normal"></highlight></codeline>
<codeline lineno="2822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_WaitForFrames(<sp/>stream,<sp/>&amp;framesAvail,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesGot<sp/>=<sp/><ref refid="pa__unix__util_8h_1aea604351950df064043e9512ef7a222f" kindref="member">PA_MIN</ref>(<sp/>framesAvail,<sp/>frames<sp/>);</highlight></codeline>
<codeline lineno="2824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_BeginProcessing(<sp/>stream,<sp/>&amp;framesGot,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2825"><highlight class="normal"></highlight></codeline>
<codeline lineno="2826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>framesGot<sp/>&gt;<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="2827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>framesGot<sp/>=<sp/><ref refid="pa__process_8c_1a61859778b9d4997a6be1de038136fcf4" kindref="member">PaUtil_CopyOutput</ref>(<sp/>&amp;stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a80292f716701b4bd9ba52e27dea4d00c" kindref="member">bufferProcessor</ref>,<sp/>&amp;userBuffer,<sp/>framesGot<sp/>);</highlight></codeline>
<codeline lineno="2829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_EndProcessing(<sp/>stream,<sp/>framesGot,<sp/>&amp;cbFlags<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Advance<sp/>frame<sp/>counter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frames<sp/>-=<sp/>framesGot;</highlight></codeline>
<codeline lineno="2832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2833"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2834"><highlight class="normal"></highlight></codeline>
<codeline lineno="2835"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2836"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2837"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2838"><highlight class="normal"></highlight></codeline>
<codeline lineno="2839"><highlight class="normal"></highlight></codeline>
<codeline lineno="2846"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>GetStreamReadAvailable(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2847"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2848"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2849"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)s;</highlight></codeline>
<codeline lineno="2850"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="2851"><highlight class="normal"></highlight></codeline>
<codeline lineno="2852"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2853"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a4a708b0414ebca1a78f9084671bd0a0c" kindref="member">paCanNotReadFromAnOutputOnlyStream</ref><sp/>);</highlight></codeline>
<codeline lineno="2854"><highlight class="normal"></highlight></codeline>
<codeline lineno="2855"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1a5c0b414b7ab1b1f2fef8fa5512a1e944" kindref="member">input</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2856"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Round<sp/>down<sp/>to<sp/>the<sp/>nearest<sp/>host<sp/>buffer<sp/>multiple<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2857"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>(info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>)<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>;</highlight></codeline>
<codeline lineno="2858"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1aab85a5b0d14b9f58ada42c0043a6f7f9" kindref="member">overflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2859"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a25d517e59ea2e846119d972d5f1c53bb" kindref="member">paInputOverflowed</ref>;</highlight></codeline>
<codeline lineno="2861"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2862"><highlight class="normal"></highlight></codeline>
<codeline lineno="2863"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2864"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2865"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2866"><highlight class="normal"></highlight></codeline>
<codeline lineno="2867"><highlight class="normal"></highlight></codeline>
<codeline lineno="2874"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>GetStreamWriteAvailable(<sp/><ref refid="portaudio_8h_1a19874734f89958fccf86785490d53b4c" kindref="member">PaStream</ref><sp/>*<ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>)</highlight></codeline>
<codeline lineno="2875"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2876"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portaudio_8h_1a4949e4a8ef9f9dbe8cbee414ce69841d" kindref="member">PaError</ref><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba" kindref="member">paNoError</ref>;</highlight></codeline>
<codeline lineno="2877"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref><sp/>*stream<sp/>=<sp/>(<ref refid="struct_pa_asi_hpi_stream" kindref="compound">PaAsiHpiStream</ref>*)s;</highlight></codeline>
<codeline lineno="2878"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_pa_asi_hpi_stream_info" kindref="compound">PaAsiHpiStreamInfo</ref><sp/><ref refid="lib_2expat_8h_1a20806b446e455c50dc5653b7d43e3de2" kindref="member">info</ref>;</highlight></codeline>
<codeline lineno="2879"><highlight class="normal"></highlight></codeline>
<codeline lineno="2880"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="libid3tag_2global_8h_1af576bf8ffa22a44e53018c67095ffbf0" kindref="member">assert</ref>(<sp/>stream<sp/>);</highlight></codeline>
<codeline lineno="2881"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1aa80f1ff5c54e64e7a165b879030fabb1" kindref="member">PA_UNLESS_</ref>(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7af718bcda33019db4a3b9ec6bdefc6e9d" kindref="member">paCanNotWriteToAnInputOnlyStream</ref><sp/>);</highlight></codeline>
<codeline lineno="2882"><highlight class="normal"></highlight></codeline>
<codeline lineno="2883"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pa__linux__asihpi_8c_1a1f91423a116e967bfd1e0bf686c48452" kindref="member">PA_ENSURE_</ref>(<sp/>PaAsiHpi_GetStreamInfo(<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1aafbaf53953d492ea86a8a80159860974" kindref="member">output</ref>,<sp/>&amp;info<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="2884"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Round<sp/>down<sp/>to<sp/>the<sp/>nearest<sp/>host<sp/>buffer<sp/>multiple<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2885"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>(info.<ref refid="struct_pa_asi_hpi_stream_info_1aa237530f1e9ee1378e573634fec3ce37" kindref="member">availableFrames</ref><sp/>/<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>)<sp/>*<sp/>stream-&gt;<ref refid="struct_pa_asi_hpi_stream_1abcaf386b2ddf78d402841682d6b9ff2c" kindref="member">maxFramesPerHostBuffer</ref>;</highlight></codeline>
<codeline lineno="2886"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>info.<ref refid="struct_pa_asi_hpi_stream_info_1af7f47c3fa22d947baddb6d6bfc551963" kindref="member">underflow</ref><sp/>)</highlight></codeline>
<codeline lineno="2887"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="portaudio_8h_1a2e45bf8b5145f131a91c128af2bdaec7a77657d34c5e91a2962e7df7730441eee" kindref="member">paOutputUnderflowed</ref>;</highlight></codeline>
<codeline lineno="2889"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2890"><highlight class="normal"></highlight></codeline>
<codeline lineno="2891"><highlight class="normal"><ref refid="sndfile__load_8m_1a3a81ee160b23b01b04b7c08b35123218" kindref="member">error</ref>:</highlight></codeline>
<codeline lineno="2892"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2893"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c"/>
  </compounddef>
</doxygen>
