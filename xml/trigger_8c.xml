<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="trigger_8c" kind="file" language="C++">
    <compoundname>trigger.c</compoundname>
    <includes local="yes">stdio.h</includes>
    <includes local="yes">stdlib.h</includes>
    <includes refid="xlisp_8h" local="yes">xlisp.h</includes>
    <includes refid="sound_8h" local="yes">sound.h</includes>
    <includes refid="falloc_8h" local="yes">falloc.h</includes>
    <includes refid="scale_8h" local="yes">scale.h</includes>
    <includes refid="add_8h" local="yes">add.h</includes>
    <includes refid="extern_8h" local="yes">extern.h</includes>
    <includes refid="cext_8h" local="yes">cext.h</includes>
    <includes refid="assert_8h" local="yes">assert.h</includes>
    <incdepgraph>
      <node id="13613">
        <label>stdlib.h</label>
      </node>
      <node id="13616">
        <label>setjmp.h</label>
      </node>
      <node id="13626">
        <label>falloc.h</label>
        <link refid="falloc_8h"/>
        <childnode refid="13627" relation="include">
        </childnode>
        <childnode refid="13628" relation="include">
        </childnode>
      </node>
      <node id="13614">
        <label>xlisp.h</label>
        <link refid="xlisp_8h"/>
        <childnode refid="13613" relation="include">
        </childnode>
        <childnode refid="13612" relation="include">
        </childnode>
        <childnode refid="13615" relation="include">
        </childnode>
        <childnode refid="13616" relation="include">
        </childnode>
        <childnode refid="13617" relation="include">
        </childnode>
      </node>
      <node id="13632">
        <label>assert.h</label>
        <link refid="assert_8h"/>
      </node>
      <node id="13625">
        <label>cleanup.h</label>
        <link refid="cleanup_8h"/>
      </node>
      <node id="13624">
        <label>mem.h</label>
        <link refid="libnyquist_2nyquist_2cmt_2mem_8h"/>
      </node>
      <node id="13623">
        <label>string.h</label>
      </node>
      <node id="13627">
        <label>cque.h</label>
        <link refid="cque_8h"/>
      </node>
      <node id="13618">
        <label>sound.h</label>
        <link refid="sound_8h"/>
        <childnode refid="13619" relation="include">
        </childnode>
        <childnode refid="13620" relation="include">
        </childnode>
      </node>
      <node id="13611">
        <label>C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c</label>
        <link refid="trigger.c"/>
        <childnode refid="13612" relation="include">
        </childnode>
        <childnode refid="13613" relation="include">
        </childnode>
        <childnode refid="13614" relation="include">
        </childnode>
        <childnode refid="13618" relation="include">
        </childnode>
        <childnode refid="13626" relation="include">
        </childnode>
        <childnode refid="13629" relation="include">
        </childnode>
        <childnode refid="13630" relation="include">
        </childnode>
        <childnode refid="13631" relation="include">
        </childnode>
        <childnode refid="13621" relation="include">
        </childnode>
        <childnode refid="13632" relation="include">
        </childnode>
      </node>
      <node id="13619">
        <label>math.h</label>
      </node>
      <node id="13622">
        <label>switches.h</label>
      </node>
      <node id="13620">
        <label>stdefs.h</label>
        <link refid="stdefs_8h"/>
        <childnode refid="13621" relation="include">
        </childnode>
      </node>
      <node id="13617">
        <label>xldmem.h</label>
        <link refid="xldmem_8h"/>
      </node>
      <node id="13631">
        <label>extern.h</label>
        <link refid="extern_8h"/>
      </node>
      <node id="13615">
        <label>ctype.h</label>
      </node>
      <node id="13630">
        <label>add.h</label>
        <link refid="add_8h"/>
      </node>
      <node id="13628">
        <label>debug.h</label>
        <link refid="libnyquist_2nyquist_2nyqsrc_2debug_8h"/>
      </node>
      <node id="13629">
        <label>scale.h</label>
        <link refid="scale_8h"/>
      </node>
      <node id="13612">
        <label>stdio.h</label>
      </node>
      <node id="13621">
        <label>cext.h</label>
        <link refid="cext_8h"/>
        <childnode refid="13622" relation="include">
        </childnode>
        <childnode refid="13612" relation="include">
        </childnode>
        <childnode refid="13623" relation="include">
        </childnode>
        <childnode refid="13619" relation="include">
        </childnode>
        <childnode refid="13624" relation="include">
        </childnode>
        <childnode refid="13625" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innerclass refid="structtrigger__susp__struct" prot="public">trigger_susp_struct</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="trigger_8c_1ad1d5df4862b7bb0bc54a7920012be18b" prot="public" static="no">
        <name>TRIGGERDBG</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="51" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="51" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="trigger_8c_1af316c33cc298530f245e8b55330e86b5" prot="public" static="no">
        <name>D</name>
        <initializer><ref refid="sndfile__save_8m_1a55944e1fa1bcc1bfc6185bc610b0a930" kindref="member">if</ref> (<ref refid="trigger_8c_1ad1d5df4862b7bb0bc54a7920012be18b" kindref="member">TRIGGERDBG</ref>)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="52" column="9" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="52" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="trigger_8c_1a4487fcdf7df81348e51a3ec3e1f140d4" prot="public" static="no">
        <type>struct <ref refid="structtrigger__susp__struct" kindref="compound">trigger_susp_struct</ref></type>
        <definition>typedef struct trigger_susp_struct  trigger_susp_node</definition>
        <argsstring></argsstring>
        <name>trigger_susp_node</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="80" column="1"/>
      </memberdef>
      <memberdef kind="typedef" id="trigger_8c_1acf834a1e617893cec89397ed16e9ccf8" prot="public" static="no">
        <type>struct <ref refid="structtrigger__susp__struct" kindref="compound">trigger_susp_struct</ref> *</type>
        <definition>typedef struct trigger_susp_struct * trigger_susp_type</definition>
        <argsstring></argsstring>
        <name>trigger_susp_type</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="80" column="1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="trigger_8c_1a463856efc8da127ad6c57d80d9a1aa8a" prot="public" static="no" mutable="no">
        <type><ref refid="xldmem_8h_1a9a9ec6a5fbca2b40ed8d19faa799be8c" kindref="member">LVAL</ref></type>
        <definition>LVAL s_stdout</definition>
        <argsstring></argsstring>
        <name>s_stdout</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="86" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/xlisp/xlglob.c" bodystart="26" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="trigger_8c_1a1d2c40303e860d344937f75abe0d14eb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void trigger_fetch</definition>
        <argsstring>(snd_susp_type, snd_list_type)</argsstring>
        <name>trigger_fetch</name>
        <param>
          <type><ref refid="sound_8h_1ab2d3b7883b72a75324f6636f10c7f903" kindref="member">snd_susp_type</ref></type>
          <defname>a_susp</defname>
        </param>
        <param>
          <type><ref refid="sound_8h_1ab05388854adb60c2855a70276d2ceb65" kindref="member">snd_list_type</ref></type>
          <defname>snd_list</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="83" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="99" bodyend="247"/>
      </memberdef>
      <memberdef kind="function" id="trigger_8c_1a2f3f9ca8aa36b600aaabe34be46c0704" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void trigger_free</definition>
        <argsstring>()</argsstring>
        <name>trigger_free</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="84" column="1"/>
      </memberdef>
      <memberdef kind="function" id="trigger_8c_1a105273b532801134fff7b7d0bccfd84d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void trigger_mark</definition>
        <argsstring>(snd_susp_type a_susp)</argsstring>
        <name>trigger_mark</name>
        <param>
          <type><ref refid="sound_8h_1ab2d3b7883b72a75324f6636f10c7f903" kindref="member">snd_susp_type</ref></type>
          <declname>a_susp</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="88" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="88" bodyend="93"/>
      </memberdef>
      <memberdef kind="function" id="trigger_8c_1afb151946835b7b938b41a35bdaa9d4eb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void trigger_free</definition>
        <argsstring>(snd_susp_type a_susp)</argsstring>
        <name>trigger_free</name>
        <param>
          <type><ref refid="sound_8h_1ab2d3b7883b72a75324f6636f10c7f903" kindref="member">snd_susp_type</ref></type>
          <declname>a_susp</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="250" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="250" bodyend="256"/>
      </memberdef>
      <memberdef kind="function" id="trigger_8c_1ac92b0ac416fa810f6a69bc0939cb9f94" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8c_1ae35f5844602719cf66324f4de2a658b3" kindref="member">void</ref></type>
        <definition>void trigger_print_tree</definition>
        <argsstring>(snd_susp_type a_susp, int n)</argsstring>
        <name>trigger_print_tree</name>
        <param>
          <type><ref refid="sound_8h_1ab2d3b7883b72a75324f6636f10c7f903" kindref="member">snd_susp_type</ref></type>
          <declname>a_susp</declname>
        </param>
        <param>
          <type><ref refid="xmltok_8h_1a5a0d4a5641ce434f1d23533f2b2e6653" kindref="member">int</ref></type>
          <declname>n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="259" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="259" bodyend="273"/>
      </memberdef>
      <memberdef kind="function" id="trigger_8c_1a967e00e62039df5fd4e09d78d3e4506c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8h_1a792cec4ed9d6d636d342d9365ba265ea" kindref="member">sound_type</ref></type>
        <definition>sound_type snd_make_trigger</definition>
        <argsstring>(sound_type s1, LVAL closure)</argsstring>
        <name>snd_make_trigger</name>
        <param>
          <type><ref refid="sound_8h_1a792cec4ed9d6d636d342d9365ba265ea" kindref="member">sound_type</ref></type>
          <declname>s1</declname>
        </param>
        <param>
          <type><ref refid="xldmem_8h_1a9a9ec6a5fbca2b40ed8d19faa799be8c" kindref="member">LVAL</ref></type>
          <declname>closure</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="278" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="278" bodyend="321"/>
      </memberdef>
      <memberdef kind="function" id="trigger_8c_1a4e0e96f42514b3f8f26ded7e5fe05d07" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="sound_8h_1a792cec4ed9d6d636d342d9365ba265ea" kindref="member">sound_type</ref></type>
        <definition>sound_type snd_trigger</definition>
        <argsstring>(sound_type s1, LVAL closure)</argsstring>
        <name>snd_trigger</name>
        <param>
          <type><ref refid="sound_8h_1a792cec4ed9d6d636d342d9365ba265ea" kindref="member">sound_type</ref></type>
          <declname>s1</declname>
        </param>
        <param>
          <type><ref refid="xldmem_8h_1a9a9ec6a5fbca2b40ed8d19faa799be8c" kindref="member">LVAL</ref></type>
          <declname>closure</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" line="324" column="1" bodyfile="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c" bodystart="324" bodyend="331"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>trigger.c<sp/>--<sp/>return<sp/>zero<sp/>until<sp/>input<sp/>transitions<sp/>from<sp/>&lt;=0<sp/>to<sp/>&gt;0,<sp/>then</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/><sp/><sp/>evaluate<sp/>a<sp/>closure<sp/>to<sp/>get<sp/>a<sp/>signal<sp/>and<sp/>convert<sp/>to<sp/>an<sp/>add</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/><sp/><sp/>of<sp/>the<sp/>new<sp/>signal<sp/>and<sp/>a<sp/>copy<sp/>of<sp/>this<sp/>trigger<sp/>object.<sp/></highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/><sp/><sp/>The<sp/>sample<sp/>rate<sp/>of<sp/>the<sp/>output<sp/>is<sp/>the<sp/>sample<sp/>rate<sp/>of<sp/>the<sp/>input,<sp/>and<sp/></highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/><sp/><sp/>sounds<sp/>returned<sp/>by<sp/>the<sp/>closure<sp/>must<sp/>also<sp/>have<sp/>a<sp/>matching<sp/>sample<sp/>rate.</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/><sp/><sp/>The<sp/>trigger<sp/>will<sp/>take<sp/>place<sp/>on<sp/>the<sp/>first<sp/>input<sp/>sample<sp/>(zero<sp/>delay)<sp/>if<sp/>the</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/><sp/><sp/>first<sp/>sample<sp/>of<sp/>the<sp/>input<sp/>is<sp/>&gt;0.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/><sp/><sp/>The<sp/>input<sp/>scale<sp/>factor<sp/>is<sp/>assumed<sp/>to<sp/>be<sp/>1,<sp/>so<sp/>caller<sp/>should<sp/>force<sp/>scaling</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/><sp/><sp/>especially<sp/>if<sp/>the<sp/>scale<sp/>factor<sp/>is<sp/>negative<sp/>(!)</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/><sp/><sp/>The<sp/>trigger<sp/>terminates<sp/>when<sp/>the<sp/>input<sp/>signal<sp/>terminates<sp/>(but<sp/>any<sp/>adds</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/><sp/><sp/>continue<sp/>to<sp/>run<sp/>until<sp/>all<sp/>their<sp/>inputs<sp/>terminate).</highlight></codeline>
<codeline lineno="12"><highlight class="comment"></highlight></codeline>
<codeline lineno="13"><highlight class="comment">Some<sp/>implementation<sp/>notes:</highlight></codeline>
<codeline lineno="14"><highlight class="comment"></highlight></codeline>
<codeline lineno="15"><highlight class="comment">The<sp/>closure<sp/>gets<sp/>evaluated<sp/>at<sp/>the<sp/>time<sp/>of<sp/>the<sp/>positive<sp/>sample.</highlight></codeline>
<codeline lineno="16"><highlight class="comment">When<sp/>the<sp/>positive<sp/>sample<sp/>is<sp/>encountered,<sp/>first<sp/>close<sp/>off<sp/>the</highlight></codeline>
<codeline lineno="17"><highlight class="comment">current<sp/>output<sp/>block.<sp/></highlight></codeline>
<codeline lineno="18"><highlight class="comment"></highlight></codeline>
<codeline lineno="19"><highlight class="comment">Next,<sp/>evaluate<sp/>the<sp/>closure,<sp/>clone<sp/>the<sp/>trigger,<sp/>and<sp/>convert<sp/></highlight></codeline>
<codeline lineno="20"><highlight class="comment">the<sp/>current<sp/>trigger<sp/>to<sp/>an<sp/>add.<sp/>The<sp/>next<sp/>fetch<sp/>will<sp/>therefore</highlight></codeline>
<codeline lineno="21"><highlight class="comment">go<sp/>to<sp/>the<sp/>add<sp/>susp<sp/>and<sp/>it<sp/>will<sp/>add<sp/>the<sp/>closure<sp/>result<sp/>to<sp/>the</highlight></codeline>
<codeline lineno="22"><highlight class="comment">zeros<sp/>that<sp/>continue<sp/>to<sp/>be<sp/>generated<sp/>by<sp/>(a<sp/>clone<sp/>of)<sp/>the<sp/>trigger.</highlight></codeline>
<codeline lineno="23"><highlight class="comment">It<sp/>would<sp/>be<sp/>simple<sp/>if<sp/>we<sp/>could<sp/>back<sp/>the<sp/>clone<sp/>up<sp/>one<sp/>sample:</highlight></codeline>
<codeline lineno="24"><highlight class="comment">on<sp/>the<sp/>first<sp/>call<sp/>to<sp/>the<sp/>add,<sp/>it<sp/>will<sp/>ask<sp/>for<sp/>samples<sp/>from<sp/>the</highlight></codeline>
<codeline lineno="25"><highlight class="comment">trigger<sp/>clone<sp/>and<sp/>the<sp/>closure,<sp/>but<sp/>the<sp/>trigger<sp/>clone<sp/>has<sp/>already</highlight></codeline>
<codeline lineno="26"><highlight class="comment">processed<sp/>the<sp/>positive<sp/>sample,<sp/>so<sp/>it<sp/>is<sp/>one<sp/>sample<sp/>ahead<sp/>of<sp/></highlight></codeline>
<codeline lineno="27"><highlight class="comment">everyone<sp/>else.<sp/>Since<sp/>we&apos;ve<sp/>just<sp/>read<sp/>a<sp/>sample,<sp/>we<sp/>CAN<sp/>back<sp/>up</highlight></codeline>
<codeline lineno="28"><highlight class="comment">just<sp/>by<sp/>carefully<sp/>updating<sp/>the<sp/>input<sp/>pointer<sp/>to<sp/>one<sp/>less<sp/>than</highlight></codeline>
<codeline lineno="29"><highlight class="comment">we<sp/>actually<sp/>read,<sp/>forcing<sp/>a<sp/>reread<sp/>later.<sp/>(We&apos;ll<sp/>still<sp/>store</highlight></codeline>
<codeline lineno="30"><highlight class="comment">the<sp/>previous<sp/>value<sp/>so<sp/>re-reading<sp/>will<sp/>not<sp/>re-trigger.)</highlight></codeline>
<codeline lineno="31"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>CHANGE<sp/>LOG</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/>--------------------------------------------------------------------</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*<sp/>13Dec06<sp/><sp/>rbd<sp/><sp/>created<sp/>from<sp/>sndseq.c</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;stdio.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>mips</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;stdlib.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="xlisp_8h" kindref="compound">xlisp.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="sound_8h" kindref="compound">sound.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="falloc_8h" kindref="compound">falloc.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="scale_8h" kindref="compound">scale.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="add_8h" kindref="compound">add.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="extern_8h" kindref="compound">extern.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cext_8h" kindref="compound">cext.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="assert_8h" kindref="compound">assert.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51" refid="trigger_8c_1ad1d5df4862b7bb0bc54a7920012be18b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>TRIGGERDBG<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52" refid="trigger_8c_1af316c33cc298530f245e8b55330e86b5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>D<sp/>if<sp/>(TRIGGERDBG)<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Note:<sp/>this<sp/>structure<sp/>is<sp/>identical<sp/>to<sp/>an<sp/>add_susp<sp/>structure<sp/>up</highlight></codeline>
<codeline lineno="55"><highlight class="comment"><sp/><sp/><sp/>to<sp/>the<sp/>field<sp/>output_per_s2<sp/>so<sp/>that<sp/>we<sp/>can<sp/>convert<sp/>this<sp/>into</highlight></codeline>
<codeline lineno="56"><highlight class="comment"><sp/><sp/><sp/>an<sp/>add<sp/>after<sp/>eval&apos;ing<sp/>the<sp/>closure.<sp/><sp/>Since<sp/>this<sp/>struct<sp/>is<sp/>bigger</highlight></codeline>
<codeline lineno="57"><highlight class="comment"><sp/><sp/><sp/>than<sp/>an<sp/>add,<sp/>make<sp/>sure<sp/>not<sp/>to<sp/>clobber<sp/>the<sp/>&quot;free&quot;<sp/>routine<sp/></highlight></codeline>
<codeline lineno="58"><highlight class="comment"><sp/><sp/><sp/>(trigger_free)<sp/>or<sp/>else<sp/>we&apos;ll<sp/>leak<sp/>memory.</highlight></codeline>
<codeline lineno="59"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="structtrigger__susp__struct" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structtrigger__susp__struct" kindref="compound">trigger_susp_struct</ref><sp/>{</highlight></codeline>
<codeline lineno="61" refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsnd__susp__struct" kindref="compound">snd_susp_node</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>;</highlight></codeline>
<codeline lineno="62" refid="structtrigger__susp__struct_1ab00d9df745d6d4cc5689b41a7a82cfaf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1ab00d9df745d6d4cc5689b41a7a82cfaf" kindref="member">started</ref>;</highlight></codeline>
<codeline lineno="63" refid="structtrigger__susp__struct_1a8c694a5a1bbdc9063b7989f4d4e8229c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1a8c694a5a1bbdc9063b7989f4d4e8229c" kindref="member">terminate_bits</ref>;</highlight></codeline>
<codeline lineno="64" refid="structtrigger__susp__struct_1ab6298937f1d495007331e6779439bd84" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1ab6298937f1d495007331e6779439bd84" kindref="member">terminate_cnt</ref>;</highlight></codeline>
<codeline lineno="65" refid="structtrigger__susp__struct_1a9200f73e64b6927210245d30adea0974" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1a9200f73e64b6927210245d30adea0974" kindref="member">logical_stop_bits</ref>;</highlight></codeline>
<codeline lineno="66" refid="structtrigger__susp__struct_1afe7385c2458f6c1b7c469e75dbfa005d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1afe7385c2458f6c1b7c469e75dbfa005d" kindref="member">logically_stopped</ref>;</highlight></codeline>
<codeline lineno="67" refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>;</highlight></codeline>
<codeline lineno="68" refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" kindref="member">s1_cnt</ref>;</highlight></codeline>
<codeline lineno="69" refid="structtrigger__susp__struct_1ad0d393193735dcaaab4367bec277f374" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsample__block__node" kindref="compound">sample_block_type</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1ad0d393193735dcaaab4367bec277f374" kindref="member">s1_bptr</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>block<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70" refid="structtrigger__susp__struct_1ad6a3f6adfae8f0c10deabc024c5398bb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a83d17f7b465d1591f27cd28fc5eb8a03" kindref="member">sample_block_values_type</ref><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1ad6a3f6adfae8f0c10deabc024c5398bb" kindref="member">s1_ptr</ref>;</highlight></codeline>
<codeline lineno="71" refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>;</highlight></codeline>
<codeline lineno="72" refid="structtrigger__susp__struct_1ac168c6056dfda37922b834c40b479e36" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1ac168c6056dfda37922b834c40b479e36" kindref="member">s2_cnt</ref>;</highlight></codeline>
<codeline lineno="73" refid="structtrigger__susp__struct_1a89553adef63f0e1709f7b585eca7c81b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsample__block__node" kindref="compound">sample_block_type</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1a89553adef63f0e1709f7b585eca7c81b" kindref="member">s2_bptr</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>block<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74" refid="structtrigger__susp__struct_1af9185f2abeb7f0e13f6022f0938dbc55" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a83d17f7b465d1591f27cd28fc5eb8a03" kindref="member">sample_block_values_type</ref><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1af9185f2abeb7f0e13f6022f0938dbc55" kindref="member">s2_ptr</ref>;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>trigger-specific<sp/>data<sp/>starts<sp/>here<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77" refid="structtrigger__susp__struct_1a2cf206838b659e8da0fd9eb7b49e5212" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a3a9d1d4a1c153390d2401a6e9f71b32c" kindref="member">sample_type</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1a2cf206838b659e8da0fd9eb7b49e5212" kindref="member">previous</ref>;</highlight></codeline>
<codeline lineno="78" refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structnode" kindref="compound">LVAL</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal">}<sp/><ref refid="trigger_8c_1a4487fcdf7df81348e51a3ec3e1f140d4" kindref="member">trigger_susp_node</ref>,<sp/>*<ref refid="trigger_8c_1acf834a1e617893cec89397ed16e9ccf8" kindref="member">trigger_susp_type</ref>;</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="trigger_8c_1a1d2c40303e860d344937f75abe0d14eb" kindref="member">trigger_fetch</ref>(<ref refid="structsnd__susp__struct" kindref="compound">snd_susp_type</ref>,<sp/><ref refid="structsnd__list__struct" kindref="compound">snd_list_type</ref>);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="trigger_8c_1a2f3f9ca8aa36b600aaabe34be46c0704" kindref="member">trigger_free</ref>();</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/><ref refid="structnode" kindref="compound">LVAL</ref><sp/><ref refid="trigger_8c_1a463856efc8da127ad6c57d80d9a1aa8a" kindref="member">s_stdout</ref>;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="trigger_8c_1a105273b532801134fff7b7d0bccfd84d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="trigger_8c_1a105273b532801134fff7b7d0bccfd84d" kindref="member">trigger_mark</ref>(<ref refid="structsnd__susp__struct" kindref="compound">snd_susp_type</ref><sp/>a_susp)</highlight></codeline>
<codeline lineno="89"><highlight class="normal">{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>trigger_susp_type<sp/><ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref><sp/>=<sp/>(<ref refid="trigger_8c_1acf834a1e617893cec89397ed16e9ccf8" kindref="member">trigger_susp_type</ref>)<sp/>a_susp;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1aacbcd25bfdd21a0dfd009fe0bfbe4ff5" kindref="member">sound_xlmark</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(susp-&gt;<ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>)<sp/><ref refid="xldmem_8c_1ae8cb64b8b02eb280bb21f141a33f6a36" kindref="member">mark</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>);</highlight></codeline>
<codeline lineno="93"><highlight class="normal">}</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>trigger_fetch<sp/>returns<sp/>zero<sp/>blocks<sp/>until<sp/>s1<sp/>goes<sp/>from<sp/>&lt;=0<sp/>to<sp/>&gt;0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99" refid="trigger_8c_1a1d2c40303e860d344937f75abe0d14eb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="trigger_8c_1a1d2c40303e860d344937f75abe0d14eb" kindref="member">trigger_fetch</ref>(<ref refid="structsnd__susp__struct" kindref="compound">snd_susp_type</ref><sp/>a_susp,<sp/><ref refid="structsnd__list__struct" kindref="compound">snd_list_type</ref><sp/>snd_list)</highlight></codeline>
<codeline lineno="100"><highlight class="normal">{</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>trigger_susp_type<sp/><ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref><sp/>=<sp/>(<ref refid="trigger_8c_1acf834a1e617893cec89397ed16e9ccf8" kindref="member">trigger_susp_type</ref>)<sp/>a_susp;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cnt<sp/>=<sp/>0;<sp/></highlight><highlight class="comment">/*<sp/>how<sp/>many<sp/>samples<sp/>computed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>togo;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsample__block__node" kindref="compound">sample_block_type</ref><sp/><ref refid="lilv__test_8c_1af5a45dbcaa926b186e6f71d08212acc3" kindref="member">out</ref>;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">register</highlight><highlight class="normal"><sp/><ref refid="sound_8h_1a83d17f7b465d1591f27cd28fc5eb8a03" kindref="member">sample_block_values_type</ref><sp/>out_ptr;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">register</highlight><highlight class="normal"><sp/><ref refid="sound_8h_1a83d17f7b465d1591f27cd28fc5eb8a03" kindref="member">sample_block_values_type</ref><sp/>out_ptr_reg;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">register</highlight><highlight class="normal"><sp/><ref refid="sound_8h_1a83d17f7b465d1591f27cd28fc5eb8a03" kindref="member">sample_block_values_type</ref><sp/>input_ptr_reg;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="falloc_8h_1aed8e636a68eb95ea3c7dc90189e78b43" kindref="member">falloc_sample_block</ref>(out,<sp/></highlight><highlight class="stringliteral">&quot;trigger_fetch&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/>out_ptr<sp/>=<sp/>out-&gt;<ref refid="structsample__block__node_1a921e4cd2359010f8ed736a116da8867e" kindref="member">samples</ref>;</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>snd_list-&gt;<ref refid="structsnd__list__struct_1aaf6e754e36ceada326133f729fc4462c" kindref="member">block</ref><sp/>=<sp/><ref refid="lilv__test_8c_1af5a45dbcaa926b186e6f71d08212acc3" kindref="member">out</ref>;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(cnt<sp/>&lt;<sp/><ref refid="sound_8h_1a3871670a207dd661a524b1328410fb0c" kindref="member">max_sample_block_len</ref>)<sp/>{<sp/></highlight><highlight class="comment">/*<sp/>outer<sp/>loop<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>first<sp/>compute<sp/>how<sp/>many<sp/>samples<sp/>to<sp/>generate<sp/>in<sp/>inner<sp/>loop:<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>don&apos;t<sp/>overflow<sp/>the<sp/>output<sp/>sample<sp/>block<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>togo<sp/>=<sp/><ref refid="sound_8h_1a3871670a207dd661a524b1328410fb0c" kindref="member">max_sample_block_len</ref><sp/>-<sp/>cnt;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>don&apos;t<sp/>run<sp/>past<sp/>the<sp/>input<sp/>sample<sp/>block:<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a0e651255bbd0802374eb948aa3206b46" kindref="member">susp_check_term_samples</ref>(<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>,<sp/><ref refid="structtrigger__susp__struct_1ad6a3f6adfae8f0c10deabc024c5398bb" kindref="member">s1_ptr</ref>,<sp/><ref refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" kindref="member">s1_cnt</ref>);</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>togo<sp/>=<sp/><ref refid="_compare_audio_command_8cpp_1abd8bbcfabb3ddef2ccaafb9928a37b95" kindref="member">min</ref>(togo,<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" kindref="member">s1_cnt</ref>);</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>don&apos;t<sp/>run<sp/>past<sp/>terminate<sp/>time<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(susp-&gt;<ref refid="structtrigger__susp__struct_1ab6298937f1d495007331e6779439bd84" kindref="member">terminate_cnt</ref><sp/>!=<sp/><ref refid="sound_8h_1ac1ae4add974b9cfc6b5aaf8a578f01ab" kindref="member">UNKNOWN</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab6298937f1d495007331e6779439bd84" kindref="member">terminate_cnt</ref><sp/>&lt;=<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8f9e3b02c2fc0ccbb63d88b97d44c89c" kindref="member">current</ref><sp/>+<sp/>cnt<sp/>+<sp/>togo)<sp/>{</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>togo<sp/>=<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab6298937f1d495007331e6779439bd84" kindref="member">terminate_cnt</ref><sp/>-<sp/>(susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8f9e3b02c2fc0ccbb63d88b97d44c89c" kindref="member">current</ref><sp/>+<sp/>cnt);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(togo<sp/>==<sp/>0)<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>togo;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_ptr_reg<sp/>=<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ad6a3f6adfae8f0c10deabc024c5398bb" kindref="member">s1_ptr</ref>;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out_ptr_reg<sp/>=<sp/>out_ptr;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(n)<sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">/*<sp/>the<sp/>inner<sp/>sample<sp/>computation<sp/>loop<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a3a9d1d4a1c153390d2401a6e9f71b32c" kindref="member">sample_type</ref><sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref><sp/>=<sp/>*input_ptr_reg++;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(susp-&gt;<ref refid="structtrigger__susp__struct_1a2cf206838b659e8da0fd9eb7b49e5212" kindref="member">previous</ref><sp/>&lt;=<sp/>0<sp/>&amp;&amp;<sp/>s<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trigger_susp_type<sp/>new_trigger;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/>new_trigger_snd;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structnode" kindref="compound">LVAL</ref><sp/>result;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>delay;<sp/></highlight><highlight class="comment">/*<sp/>sample<sp/>delay<sp/>to<sp/>s2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="midifns_8h_1a3f787491db5dbc75c21b27d54e9ebae6" kindref="member">time_type</ref><sp/>now;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a2cf206838b659e8da0fd9eb7b49e5212" kindref="member">previous</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;<sp/></highlight><highlight class="comment">/*<sp/>don&apos;t<sp/>retrigger<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/****<sp/>close<sp/>off<sp/>block<sp/>****/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>togo<sp/>=<sp/>togo<sp/>-<sp/>n;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ad6a3f6adfae8f0c10deabc024c5398bb" kindref="member">s1_ptr</ref><sp/>+=<sp/>togo;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a68ee99d63015ca2a41d7c82d8717cfeb" kindref="member">susp_took</ref>(<ref refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" kindref="member">s1_cnt</ref>,<sp/>togo);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt<sp/>+=<sp/>togo;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>snd_list-&gt;<ref refid="structsnd__list__struct_1a809aedecf6147df4ec4b45404cfab414" kindref="member">block_len</ref><sp/>=<sp/>cnt;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8f9e3b02c2fc0ccbb63d88b97d44c89c" kindref="member">current</ref><sp/>+=<sp/>cnt;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>now<sp/>=<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a5e783b62d30b458070fb80dc0e112594" kindref="member">t0</ref><sp/>+<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8f9e3b02c2fc0ccbb63d88b97d44c89c" kindref="member">current</ref><sp/>/<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a89e4d9a7c1f50a9a0b4bca5ec1c253be" kindref="member">sr</ref>;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/****<sp/>eval<sp/>closure<sp/>and<sp/>add<sp/>result<sp/>****/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><ref refid="trigger_8c_1af316c33cc298530f245e8b55330e86b5" kindref="member">D</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="unix_2switches_8h_1a3d365a416f619366e3a28a11b450739d" kindref="member">nyquist_printf</ref>(</highlight><highlight class="stringliteral">&quot;trigger_fetch:<sp/>about<sp/>to<sp/>eval<sp/>closure<sp/>at<sp/>%g,<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;susp-&gt;susp.t0<sp/>%g,<sp/>susp.current<sp/>%d:\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>now,<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a5e783b62d30b458070fb80dc0e112594" kindref="member">t0</ref>,<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8f9e3b02c2fc0ccbb63d88b97d44c89c" kindref="member">current</ref>);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="xlisp_8h_1a1479676ad1c6de6f93ba2044c0685617" kindref="member">xlsave1</ref>(result);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="xleval_8c_1a4e85c1af4b4cbfa71b83b42ebefb0a01" kindref="member">xleval</ref>(<ref refid="xldmem_8c_1a6020b108cda9dc1cb27b748db6afef0a" kindref="member">cons</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>,<sp/><ref refid="xlisp_8h_1a72509ef6a53e6298774f56615eaaf775" kindref="member">consa</ref>(<ref refid="xldmem_8c_1a136914cbe882831bbdd74a24b58c4759" kindref="member">cvflonum</ref>(now))));</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="extern_8c_1a1676cd2b77ed1a51590fd74279b96312" kindref="member">exttypep</ref>(result,<sp/><ref refid="nyquist_2nyqsrc_2nyx_8c_1a5d46b7b169ac8631bca1d7d523817742" kindref="member">a_sound</ref>))<sp/>{</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref><sp/>=<sp/><ref refid="sound_8c_1ad56b2f689f0d4897c4d2c79356d6102d" kindref="member">sound_copy</ref>(<ref refid="sound_8h_1aa309e04f7a0ff565a69f56d34fd6f899" kindref="member">getsound</ref>(result));</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><ref refid="trigger_8c_1af316c33cc298530f245e8b55330e86b5" kindref="member">D</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="unix_2switches_8h_1a3d365a416f619366e3a28a11b450739d" kindref="member">nyquist_printf</ref>(</highlight><highlight class="stringliteral">&quot;trigger:<sp/>copied<sp/>result<sp/>from<sp/>closure<sp/>is<sp/>%p\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>);</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/><ref refid="xldbug_8c_1a2d78bf523301185246193246684786a8" kindref="member">xlerror</ref>(</highlight><highlight class="stringliteral">&quot;closure<sp/>did<sp/>not<sp/>return<sp/>a<sp/>(monophonic)<sp/>sound&quot;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><ref refid="trigger_8c_1af316c33cc298530f245e8b55330e86b5" kindref="member">D</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="unix_2switches_8h_1a3d365a416f619366e3a28a11b450739d" kindref="member">nyquist_printf</ref>(</highlight><highlight class="stringliteral">&quot;in<sp/>trigger:<sp/>after<sp/>evaluation;<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;%p<sp/>returned<sp/>from<sp/>evform\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="macaboutbox_8c_1a263efce0e5cda1d387a1a43f94715445" kindref="member">NIL</ref>;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/****<sp/>cloan<sp/>this<sp/>trigger<sp/>to<sp/>become<sp/>s1<sp/>****/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="falloc_8h_1a187500f957dfc9510ad0c87c0c92e39e" kindref="member">falloc_generic</ref>(new_trigger,<sp/><ref refid="structtrigger__susp__struct" kindref="compound">trigger_susp_node</ref>,<sp/></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;new_trigger&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(new_trigger,<sp/>susp,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structtrigger__susp__struct" kindref="compound">trigger_susp_node</ref>));</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>don&apos;t<sp/>copy<sp/>s2<sp/>--<sp/>it<sp/>should<sp/>only<sp/>be<sp/>referenced<sp/>by<sp/>add<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_trigger-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_trigger_snd<sp/>=<sp/><ref refid="sound_8c_1a11255fe781080fb7915f6ab9a5afc4ae" kindref="member">sound_create</ref>((<ref refid="structsnd__susp__struct" kindref="compound">snd_susp_type</ref>)<sp/>new_trigger,</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>now,<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a89e4d9a7c1f50a9a0b4bca5ec1c253be" kindref="member">sr</ref>,<sp/>1.0F);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref><sp/>=<sp/>new_trigger_snd;</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>add<sp/>will<sp/>have<sp/>to<sp/>ask<sp/>new_trigger<sp/>for<sp/>samples,<sp/>new_trigger</highlight></codeline>
<codeline lineno="179"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>will<sp/>continue<sp/>reading<sp/>samples<sp/>from<sp/>s1<sp/>(the<sp/>original<sp/>input)</highlight></codeline>
<codeline lineno="180"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" kindref="member">s1_cnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ad6a3f6adfae8f0c10deabc024c5398bb" kindref="member">s1_ptr</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/****<sp/>convert<sp/>to<sp/>add<sp/>****/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a077478e200df3bc42489892597f15d47" kindref="member">mark</ref><sp/>=<sp/><ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1abf37804ec7b5a257873af665b86ab09d" kindref="member">add_mark</ref>;</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>logical<sp/>stop<sp/>will<sp/>be<sp/>recomputed<sp/>by<sp/>add:<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8044ae9d2cfcbccffd2a60c9b6ce16fa" kindref="member">log_stop_cnt</ref><sp/>=<sp/><ref refid="sound_8h_1ac1ae4add974b9cfc6b5aaf8a578f01ab" kindref="member">UNKNOWN</ref>;<sp/></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a4403d10e525f61c551eaa74440ee6b7d" kindref="member">print_tree</ref><sp/>=<sp/><ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a5df6be35ec4c91243203e3923c7346a4" kindref="member">add_print_tree</ref>;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>assume<sp/>sample<sp/>rates<sp/>are<sp/>the<sp/>same<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(susp-&gt;<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>-&gt;<ref refid="structsound__struct_1aafecd01e13520f7fb83fe8e2ac2cd026" kindref="member">sr</ref><sp/>!=<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>-&gt;<ref refid="structsound__struct_1aafecd01e13520f7fb83fe8e2ac2cd026" kindref="member">sr</ref>)<sp/></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="xldbug_8c_1aaebeabdcebf1b39c984723f1727ddeed" kindref="member">xlfail</ref>(</highlight><highlight class="stringliteral">&quot;in<sp/>trigger:<sp/>sample<sp/>rates<sp/>must<sp/>match&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>take<sp/>care<sp/>of<sp/>scale<sp/>factor,<sp/>if<sp/>any<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>-&gt;<ref refid="structsound__struct_1a7531e5d5bc141fa994e5d787bb2dea01" kindref="member">scale</ref><sp/>!=<sp/>1.0)<sp/>{</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>stdputstr(&quot;normalizing<sp/>next<sp/>sound<sp/>in<sp/>a<sp/>seq\n&quot;);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref><sp/>=<sp/><ref refid="scale_8c_1a522cb1783bdc22b2f003570150369224" kindref="member">snd_make_normalize</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>figure<sp/>out<sp/>which<sp/>add<sp/>fetch<sp/>routine<sp/>to<sp/>use<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delay<sp/>=<sp/><ref refid="cext_8h_1acd66e8cacf954c3bc3bba81d09425a12" kindref="member">ROUND</ref>((susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>-&gt;<ref refid="structsound__struct_1a397d52ba2da4602200e85f49f62f28ea" kindref="member">t0</ref><sp/>-<sp/>now)<sp/>*<sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>-&gt;<ref refid="structsound__struct_1aafecd01e13520f7fb83fe8e2ac2cd026" kindref="member">sr</ref>);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(delay<sp/>&gt;<sp/>0)<sp/>{<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>fill<sp/>hole<sp/>between<sp/>s1<sp/>and<sp/>s2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="trigger_8c_1af316c33cc298530f245e8b55330e86b5" kindref="member">D</ref><sp/><ref refid="xlio_8c_1a48c6474ff667334385f7c6e4c350c51d" kindref="member">stdputstr</ref>(</highlight><highlight class="stringliteral">&quot;using<sp/>add_s1_nn_fetch\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1addb182d5c03b9b8f864e4fd9871f7722" kindref="member">fetch</ref><sp/>=<sp/><ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1ad8020a7160db1815188268a9055dab9b" kindref="member">add_s1_nn_fetch</ref>;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a4d5fa6ba6ea209e5159d06ea00320041" kindref="member">name</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;trigger:add_s1_nn_fetch&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1addb182d5c03b9b8f864e4fd9871f7722" kindref="member">fetch</ref><sp/>=<sp/><ref refid="libnyquist_2nyquist_2nyqsrc_2add_8c_1a6a0aa5496364004224d151cc938c5b4a" kindref="member">add_s1_s2_nn_fetch</ref>;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a4d5fa6ba6ea209e5159d06ea00320041" kindref="member">name</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;trigger:add_s1_s2_nn_fetch&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><ref refid="trigger_8c_1af316c33cc298530f245e8b55330e86b5" kindref="member">D</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="xlio_8c_1a48c6474ff667334385f7c6e4c350c51d" kindref="member">stdputstr</ref>(</highlight><highlight class="stringliteral">&quot;in<sp/>trigger:<sp/>calling<sp/>add&apos;s<sp/>fetch\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>fetch<sp/>will<sp/>get<sp/>called<sp/>later<sp/>..</highlight></codeline>
<codeline lineno="213"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*(susp-&gt;susp.fetch))(a_susp,<sp/>snd_list);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><ref refid="trigger_8c_1af316c33cc298530f245e8b55330e86b5" kindref="member">D</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="xlio_8c_1a48c6474ff667334385f7c6e4c350c51d" kindref="member">stdputstr</ref>(</highlight><highlight class="stringliteral">&quot;in<sp/>trigger:<sp/>returned<sp/>from<sp/>add&apos;s<sp/>fetch\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="xlisp_8h_1a8069423ebe9363c35a5801edda92de02" kindref="member">xlpop</ref>();</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>allow<sp/>garbage<sp/>collection<sp/>now<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/****<sp/>calculation<sp/>tree<sp/>modified,<sp/>time<sp/>to<sp/>exit<sp/>****/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>but<sp/>if<sp/>cnt<sp/>==<sp/>0,<sp/>then<sp/>we<sp/>haven&apos;t<sp/>computed<sp/>any<sp/>samples<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>call<sp/>on<sp/>new<sp/>fetch<sp/>routine<sp/>to<sp/>get<sp/>some<sp/>samples<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cnt<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>because<sp/>adder<sp/>will<sp/>reallocate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="falloc_8h_1a4d9aacbd9b154378f51f57e3459a04b1" kindref="member">ffree_sample_block</ref>(out,<sp/></highlight><highlight class="stringliteral">&quot;trigger-pre-adder&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1addb182d5c03b9b8f864e4fd9871f7722" kindref="member">fetch</ref>)(a_susp,<sp/>snd_list);</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a2cf206838b659e8da0fd9eb7b49e5212" kindref="member">previous</ref><sp/>=<sp/><ref refid="lib_2expat_8h_1a755339d27872b13735c2cab829e47157" kindref="member">s</ref>;</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>zero<sp/>until<sp/>ready<sp/>to<sp/>add<sp/>in<sp/>closure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*out_ptr_reg++<sp/>=<sp/>0;<sp/></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--n);<sp/></highlight><highlight class="comment">/*<sp/>inner<sp/>loop<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>using<sp/>input_ptr_reg<sp/>is<sp/>a<sp/>bad<sp/>idea<sp/>on<sp/>RS/6000:<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ad6a3f6adfae8f0c10deabc024c5398bb" kindref="member">s1_ptr</ref><sp/>+=<sp/>togo;</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out_ptr<sp/>+=<sp/>togo;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a68ee99d63015ca2a41d7c82d8717cfeb" kindref="member">susp_took</ref>(<ref refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" kindref="member">s1_cnt</ref>,<sp/>togo);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt<sp/>+=<sp/>togo;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="comment">/*<sp/>outer<sp/>loop<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(togo<sp/>==<sp/>0<sp/>&amp;&amp;<sp/>cnt<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="sound_8c_1a64f075d27a7672293c0c8d657aa51647" kindref="member">snd_list_terminate</ref>(snd_list);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>snd_list-&gt;<ref refid="structsnd__list__struct_1a809aedecf6147df4ec4b45404cfab414" kindref="member">block_len</ref><sp/>=<sp/>cnt;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8f9e3b02c2fc0ccbb63d88b97d44c89c" kindref="member">current</ref><sp/>+=<sp/>cnt;</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="247"><highlight class="normal">}<sp/></highlight><highlight class="comment">/*<sp/>trigger_fetch<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"></highlight></codeline>
<codeline lineno="250" refid="trigger_8c_1afb151946835b7b938b41a35bdaa9d4eb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="trigger_8c_1a2f3f9ca8aa36b600aaabe34be46c0704" kindref="member">trigger_free</ref>(<ref refid="structsnd__susp__struct" kindref="compound">snd_susp_type</ref><sp/>a_susp)</highlight></codeline>
<codeline lineno="251"><highlight class="normal">{</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/>trigger_susp_type<sp/><ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref><sp/>=<sp/>(<ref refid="trigger_8c_1acf834a1e617893cec89397ed16e9ccf8" kindref="member">trigger_susp_type</ref>)<sp/>a_susp;</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1a6160c7ed8621e6ca60d9c0875cd25f9f" kindref="member">sound_unref</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>);</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1a6160c7ed8621e6ca60d9c0875cd25f9f" kindref="member">sound_unref</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>);</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="falloc_8h_1a90be646acd537771c5401524877e0844" kindref="member">ffree_generic</ref>(susp,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structtrigger__susp__struct" kindref="compound">trigger_susp_node</ref>),<sp/></highlight><highlight class="stringliteral">&quot;trigger_free&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="256"><highlight class="normal">}</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight></codeline>
<codeline lineno="259" refid="trigger_8c_1ac92b0ac416fa810f6a69bc0939cb9f94" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="trigger_8c_1ac92b0ac416fa810f6a69bc0939cb9f94" kindref="member">trigger_print_tree</ref>(<ref refid="structsnd__susp__struct" kindref="compound">snd_susp_type</ref><sp/>a_susp,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n)</highlight></codeline>
<codeline lineno="260"><highlight class="normal">{</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/>trigger_susp_type<sp/><ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref><sp/>=<sp/>(<ref refid="trigger_8c_1acf834a1e617893cec89397ed16e9ccf8" kindref="member">trigger_susp_type</ref>)<sp/>a_susp;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1ad9f5e076a5a83912c647d0164fd9cf98" kindref="member">indent</ref>(n);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="xlio_8c_1a48c6474ff667334385f7c6e4c350c51d" kindref="member">stdputstr</ref>(</highlight><highlight class="stringliteral">&quot;s1:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1a1b2ca7c132e90e3ded840d25f8baa088" kindref="member">sound_print_tree_1</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>,<sp/>n);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1ad9f5e076a5a83912c647d0164fd9cf98" kindref="member">indent</ref>(n);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="xlio_8c_1a48c6474ff667334385f7c6e4c350c51d" kindref="member">stdputstr</ref>(</highlight><highlight class="stringliteral">&quot;closure:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="xlio_8c_1ab2c9fa910569499da2fee915fa7ccef3" kindref="member">stdprint</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>);</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1ad9f5e076a5a83912c647d0164fd9cf98" kindref="member">indent</ref>(n);</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="xlio_8c_1a48c6474ff667334385f7c6e4c350c51d" kindref="member">stdputstr</ref>(</highlight><highlight class="stringliteral">&quot;s2:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8c_1a1b2ca7c132e90e3ded840d25f8baa088" kindref="member">sound_print_tree_1</ref>(susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref>,<sp/>n);</highlight></codeline>
<codeline lineno="273"><highlight class="normal">}</highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278" refid="trigger_8c_1a967e00e62039df5fd4e09d78d3e4506c" refkind="member"><highlight class="normal"><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/><ref refid="trigger_8c_1a967e00e62039df5fd4e09d78d3e4506c" kindref="member">snd_make_trigger</ref>(<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>,<sp/><ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>)</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/><ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><ref refid="structnode" kindref="compound">LVAL</ref><sp/><ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>;</highlight></codeline>
<codeline lineno="281"><highlight class="normal">{</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">register</highlight><highlight class="normal"><sp/>trigger_susp_type<sp/><ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>t0<sp/>specified<sp/>as<sp/>input<sp/>parameter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="sound_8h_1a3a9d1d4a1c153390d2401a6e9f71b32c" kindref="member">sample_type</ref><sp/>scale_factor<sp/>=<sp/>1.0F;</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/>result;</highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="xlisp_8h_1aca97fe39ef9ee285c1bac237226a7cef" kindref="member">xlprot1</ref>(closure);</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="falloc_8h_1a187500f957dfc9510ad0c87c0c92e39e" kindref="member">falloc_generic</ref>(susp,<sp/><ref refid="structtrigger__susp__struct" kindref="compound">trigger_susp_node</ref>,<sp/></highlight><highlight class="stringliteral">&quot;snd_make_trigger&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s1-&gt;scale<sp/>!=<sp/>1.0)<sp/>{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>stdputstr(&quot;normalizing<sp/>first<sp/>sound<sp/>in<sp/>a<sp/>seq\n&quot;);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s1<sp/>=<sp/><ref refid="scale_8c_1a522cb1783bdc22b2f003570150369224" kindref="member">snd_make_normalize</ref>(s1);</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1addb182d5c03b9b8f864e4fd9871f7722" kindref="member">fetch</ref><sp/>=<sp/><ref refid="trigger_8c_1a1d2c40303e860d344937f75abe0d14eb" kindref="member">trigger_fetch</ref>;</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab6298937f1d495007331e6779439bd84" kindref="member">terminate_cnt</ref><sp/>=<sp/><ref refid="sound_8h_1ac1ae4add974b9cfc6b5aaf8a578f01ab" kindref="member">UNKNOWN</ref>;</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a8c694a5a1bbdc9063b7989f4d4e8229c" kindref="member">terminate_bits</ref><sp/>=<sp/>0;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>bits<sp/>for<sp/>s1<sp/>and<sp/>s2<sp/>termination<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a9200f73e64b6927210245d30adea0974" kindref="member">logical_stop_bits</ref><sp/>=<sp/>0;<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>bits<sp/>for<sp/>s1<sp/>and<sp/>s2<sp/>logical<sp/>stop<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>initialize<sp/>susp<sp/>state<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a39cc18ad890efb4f088c9d7636e3b5c0" kindref="member">free</ref><sp/>=<sp/><ref refid="trigger_8c_1a2f3f9ca8aa36b600aaabe34be46c0704" kindref="member">trigger_free</ref>;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a89e4d9a7c1f50a9a0b4bca5ec1c253be" kindref="member">sr</ref><sp/>=<sp/>s1-&gt;sr;</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a5e783b62d30b458070fb80dc0e112594" kindref="member">t0</ref><sp/>=<sp/>s1-&gt;t0;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a077478e200df3bc42489892597f15d47" kindref="member">mark</ref><sp/>=<sp/><ref refid="trigger_8c_1a105273b532801134fff7b7d0bccfd84d" kindref="member">trigger_mark</ref>;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a4403d10e525f61c551eaa74440ee6b7d" kindref="member">print_tree</ref><sp/>=<sp/><ref refid="trigger_8c_1ac92b0ac416fa810f6a69bc0939cb9f94" kindref="member">trigger_print_tree</ref>;</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a4d5fa6ba6ea209e5159d06ea00320041" kindref="member">name</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;trigger&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1afe7385c2458f6c1b7c469e75dbfa005d" kindref="member">logically_stopped</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8044ae9d2cfcbccffd2a60c9b6ce16fa" kindref="member">log_stop_cnt</ref><sp/>=<sp/>s1-&gt;logical_stop_cnt;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab00d9df745d6d4cc5689b41a7a82cfaf" kindref="member">started</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a1c993fa171691590b7e9cbddeaec9d8c" kindref="member">susp</ref>.<ref refid="structsnd__susp__struct_1a8f9e3b02c2fc0ccbb63d88b97d44c89c" kindref="member">current</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref><sp/>=<sp/><ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1adac7154ef275314b3ab95811f4c14584" kindref="member">s1_cnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ab93a5169f15a43905f20c51bab3e6269" kindref="member">s2</ref><sp/>=<sp/><ref refid="getopt1_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1ac168c6056dfda37922b834c40b479e36" kindref="member">s2_cnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref><sp/>=<sp/><ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>;</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>susp-&gt;<ref refid="structtrigger__susp__struct_1a2cf206838b659e8da0fd9eb7b49e5212" kindref="member">previous</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="sound_8c_1a11255fe781080fb7915f6ab9a5afc4ae" kindref="member">sound_create</ref>((<ref refid="structsnd__susp__struct" kindref="compound">snd_susp_type</ref>)susp,<sp/>susp-&gt;susp.<ref refid="structsnd__susp__struct_1a5e783b62d30b458070fb80dc0e112594" kindref="member">t0</ref>,<sp/>susp-&gt;susp.<ref refid="structsnd__susp__struct_1a89e4d9a7c1f50a9a0b4bca5ec1c253be" kindref="member">sr</ref>,<sp/>scale_factor);</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="xlisp_8h_1a7ce424962898d63de72f4ad0284c09a5" kindref="member">xlpopn</ref>(1);</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="321"><highlight class="normal">}</highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324" refid="trigger_8c_1a4e0e96f42514b3f8f26ded7e5fe05d07" refkind="member"><highlight class="normal"><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/><ref refid="trigger_8c_1a4e0e96f42514b3f8f26ded7e5fe05d07" kindref="member">snd_trigger</ref>(<ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>,<sp/><ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>)</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/><ref refid="structtrigger__susp__struct_1aa241f1b73667b161d9ba1a6980d065e6" kindref="member">s1</ref>;</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><ref refid="structnode" kindref="compound">LVAL</ref><sp/><ref refid="structtrigger__susp__struct_1a67a620ab54b72d4e60321fd6bed8ecad" kindref="member">closure</ref>;</highlight></codeline>
<codeline lineno="327"><highlight class="normal">{</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsound__struct" kindref="compound">sound_type</ref><sp/>s1_copy;</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>s1_copy<sp/>=<sp/><ref refid="sound_8c_1ad56b2f689f0d4897c4d2c79356d6102d" kindref="member">sound_copy</ref>(s1);</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="trigger_8c_1a967e00e62039df5fd4e09d78d3e4506c" kindref="member">snd_make_trigger</ref>(s1_copy,<sp/>closure);</highlight></codeline>
<codeline lineno="331"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="C:/_dev/OpenU/Audacity/audacity/lib-src/libnyquist/nyquist/nyqsrc/trigger.c"/>
  </compounddef>
</doxygen>
