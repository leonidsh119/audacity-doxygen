<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Audacity: TrackArtist Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Audacity
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_track_artist-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TrackArtist Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class handles the actual rendering of WaveTracks (both waveforms and spectra), NoteTracks, LabelTracks and TimeTracks.  
 <a href="class_track_artist.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_track_artist_8h_source.html">TrackArtist.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1523a85e9f5d5400bde1cd3e3fbf3413"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#a1523a85e9f5d5400bde1cd3e3fbf3413">TrackArtist</a> ()</td></tr>
<tr class="separator:a1523a85e9f5d5400bde1cd3e3fbf3413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e33cdb8a68a1cd9a7381c6b93f4422f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#a5e33cdb8a68a1cd9a7381c6b93f4422f">~TrackArtist</a> ()</td></tr>
<tr class="separator:a5e33cdb8a68a1cd9a7381c6b93f4422f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add49089e256d22507061e90e71841d0c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#add49089e256d22507061e90e71841d0c">SetColours</a> ()</td></tr>
<tr class="separator:add49089e256d22507061e90e71841d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb43569c2de2e9e2cae4584ffd80a5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#aecb43569c2de2e9e2cae4584ffd80a5f">DrawTracks</a> (<a class="el" href="class_track_list.html">TrackList</a> *tracks, <a class="el" href="class_track.html">Track</a> *<a class="el" href="seqread_8c.html#ac503262ae470564980711da4f78b1181">start</a>, wxDC &amp;dc, wxRegion &amp;reg, wxRect &amp;rect, wxRect &amp;clip, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_selected_region.html">SelectedRegion</a> &amp;selectedRegion, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_zoom_info.html">ZoomInfo</a> &amp;zoomInfo, <a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> drawEnvelope, <a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> bigPoints, <a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> drawSliders)</td></tr>
<tr class="separator:aecb43569c2de2e9e2cae4584ffd80a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc63db7d889371b5f00be926b05c387"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#a2dc63db7d889371b5f00be926b05c387">DrawTrack</a> (<a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *<a class="el" href="octave__test_8m.html#aaccc9105df5383111407fd5b41255e23">t</a>, wxDC &amp;dc, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> wxRect &amp;rect, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_selected_region.html">SelectedRegion</a> &amp;selectedRegion, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_zoom_info.html">ZoomInfo</a> &amp;zoomInfo, <a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> drawEnvelope, <a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> bigPoints, <a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> drawSliders, <a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> hasSolo)</td></tr>
<tr class="separator:a2dc63db7d889371b5f00be926b05c387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b19d1f05fa5297ed4a97c179a3b658"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#aa5b19d1f05fa5297ed4a97c179a3b658">DrawVRuler</a> (<a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *<a class="el" href="octave__test_8m.html#aaccc9105df5383111407fd5b41255e23">t</a>, wxDC *dc, wxRect &amp;rect)</td></tr>
<tr class="separator:aa5b19d1f05fa5297ed4a97c179a3b658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b902fc290c08e21ce0646f21dae146"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#a12b902fc290c08e21ce0646f21dae146">UpdateVRuler</a> (<a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *<a class="el" href="octave__test_8m.html#aaccc9105df5383111407fd5b41255e23">t</a>, wxRect &amp;rect)</td></tr>
<tr class="separator:a12b902fc290c08e21ce0646f21dae146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6b12455815aebb388d9731a85f5740"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#a7f6b12455815aebb388d9731a85f5740">SetInset</a> (<a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a> left, <a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a> top, <a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a> right, <a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a> bottom)</td></tr>
<tr class="separator:a7f6b12455815aebb388d9731a85f5740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933ebde770fbf92ac754ea68b01c55b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#a933ebde770fbf92ac754ea68b01c55b5">UpdatePrefs</a> ()</td></tr>
<tr class="separator:a933ebde770fbf92ac754ea68b01c55b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2977181091a49cb28e6644e8572ff0f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#a2977181091a49cb28e6644e8572ff0f4">SetBackgroundBrushes</a> (wxBrush unselectedBrush, wxBrush selectedBrush, wxPen unselectedPen, wxPen selectedPen)</td></tr>
<tr class="separator:a2977181091a49cb28e6644e8572ff0f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac1ed1e63b3e8682855f002a6696324bd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#ac1ed1e63b3e8682855f002a6696324bd">DrawSyncLockTiles</a> (wxDC *dc, wxRect rect)</td></tr>
<tr class="separator:ac1ed1e63b3e8682855f002a6696324bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa39e383c6894d3a72cd1783399288a19"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_track_artist.html#aa39e383c6894d3a72cd1783399288a19">DrawBackgroundWithSelection</a> (wxDC *dc, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> wxRect &amp;rect, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *track, wxBrush &amp;selBrush, wxBrush &amp;unselBrush, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_selected_region.html">SelectedRegion</a> &amp;selectedRegion, <a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_zoom_info.html">ZoomInfo</a> &amp;zoomInfo)</td></tr>
<tr class="separator:aa39e383c6894d3a72cd1783399288a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class handles the actual rendering of WaveTracks (both waveforms and spectra), NoteTracks, LabelTracks and TimeTracks. </p>
<p>It's actually a little harder than it looks, because for waveforms at least it needs to cache the samples that are currently on-screen.</p>
<p><b>How Audacity Redisplay Works <br />
 Roger Dannenberg</b> <br />
Oct 2010 <br />
 This is a brief guide to Audacity redisplay &ndash; it may not be complete. It is my attempt to understand the complicated graphics strategy.</p>
<p>One basic idea is that redrawing waveforms is rather slow, so Audacity saves waveform images in bitmaps to make redrawing faster. In particular, during audio playback (and recording), the vertical time indicator is drawn over the waveform about 20 times per second. To avoid unnecessary computation, the indicator is erased by copying a column of pixels from a bitmap image of the waveform. Notice that this implies a two-stage process: first, waveforms are drawn to the bitmp; then, the bitmap (or pieces of it) are copied to the screen, perhaps along with other graphics.</p>
<p>The bitmap is for the entire track panel, i.e. multiple tracks, and includes things like the Gain and Pan slders to the left of the waveform images.</p>
<p>The screen update uses a mixture of direct drawing and indirect paint events. The "normal" way to update a graphical display is to call the Refresh() method when something invalidates the screen. Later, the system calls OnPaint(), which the application overrides to (re)draw the screen. In wxWidgets, you can also draw directly to the screen without calling Refresh() and without waiting for OnPaint() to be called.</p>
<p>I would expect there to be a 2-level invalidation scheme: Some changes invalidate the bitmap, forcing a bitmap redraw <em>and</em> a screen redraw. Other changes merely update the screen using pre-existing bitmaps. In Audacity, the "2-level" invalidation works like this: Anything that invalidates the bitmap calls <a class="el" href="class_track_panel.html#ae81fd0fd442170965441800734fcf212">TrackPanel::Refresh()</a>, which has an eraseBackground parameter. This flag says to redraw the bitmap when OnPaint() is called. If eraseBackground is false, the existing bitmap can be used for waveform images. Audacity also draws directly to the screen to update the time indicator during playback. To move the indicator, one column of pixels is drawn to the screen to remove the indicator. Then the indicator is drawn at a NEW time location.</p>
<p>The track panel consists of many components. The tree of calls that update the bitmap looks like this:</p>
<div class="fragment"><div class="line"><a class="code" href="class_track_panel.html#aaa5b6851ca776625e829a355d685910e">TrackPanel::DrawTracks</a>(), calls</div><div class="line">       <a class="code" href="class_track_artist.html#aecb43569c2de2e9e2cae4584ffd80a5f">TrackArtist::DrawTracks</a>();</div><div class="line">       <a class="code" href="class_track_panel.html#a501152ed41888644ff3a289f8f431785">TrackPanel::DrawEverythingElse</a>();</div><div class="line">               <span class="keywordflow">for each</span> track,</div><div class="line">                       <a class="code" href="class_track_panel.html#a663b8756796c9ab91e2ed95245920503">TrackPanel::DrawOutside</a>();</div><div class="line">                               <a class="code" href="class_track_panel.html#a4c73d580495e4908ab6632bf8530e3a5">TrackPanel::DrawOutsideOfTrack</a>();</div><div class="line">                               <a class="code" href="class_track_panel.html#a2294cb4b4ea67022ec0ff96ef66f0a70">TrackPanel::DrawBordersAroundTrack</a>();</div><div class="line">                               <a class="code" href="class_track_panel.html#ae675db226f9ccb85b9c682f774b0cc7e">TrackPanel::DrawShadow</a>();</div><div class="line">                               TrackInfo::DrawCloseBox();</div><div class="line">                               TrackInfo::DrawTitleBar();</div><div class="line">                               TrackInfo::DrawMinimize();</div><div class="line">                               TrackInfo::DrawBordersWithin();</div><div class="line">                               various <a class="code" href="class_track_info.html">TrackInfo</a> <a class="code" href="slider_8h.html#a8681fab1acbd292fff23dd726563ddeb">sliders</a> and <a class="code" href="winmain_8cpp.html#aa4250fecc19d9977f24b66fdac73f301">buttons</a></div><div class="line">                       <a class="code" href="class_track_artist.html#aa5b19d1f05fa5297ed4a97c179a3b658">TrackArtist::DrawVRuler</a>();</div><div class="line">               <a class="code" href="class_track_panel.html#a53b862fc7f4eb461445429ad6b28a81e">TrackPanel::DrawZooming</a>();</div><div class="line">                       draws horizontal dashed lines during zoom-drag</div><div class="line">               <a class="code" href="class_track_panel.html#ab579d3634b223e60ceed553cd41f4791">TrackPanel::HighlightFocusedTrack</a>();</div><div class="line">                       draws yellow highlight on selected track</div><div class="line">               draw snap guidelines <span class="keywordflow">if</span> any</div></div><!-- fragment --><p>After drawing the bitmap and blitting the bitmap to the screen, the following calls are (sometimes) made. To keep track of what has been drawn on screen over the bitmap images, </p><ul>
<li><code>mLastCursor</code> is the position of the vertical line representing sel0, the selected time position </li>
<li><code>mLastIndicator</code> is the position of the moving vertical line during playback</li>
</ul>
<div class="fragment"><div class="line"><a class="code" href="class_track_panel.html#a8ec4102237c8d4e852ef0f641712882d">TrackPanel::DoDrawIndicator</a>();</div><div class="line">        copy pixel column <a class="code" href="nasm_8h.html#a5f350118b553429484632e5603292389">from</a> bitmap to screen to erase <a class="code" href="namespacewaflib_1_1_utils.html#a496439b70776ea74ef7305f1c411bf89">indicator</a> <a class="code" href="seqread_8c.html#aad9ebcdde542d8b2075615388ff15a9c">line</a></div><div class="line">        <a class="code" href="class_track_panel.html#aff33f2fa5cda0ffb92a1dd41758e418c">TrackPanel::DoDrawCursor</a>(); [<span class="keywordflow">if</span> mLastCursor == mLastIndicator]</div><div class="line">        <a class="code" href="class_track_panel.html#a1a3b533d6302e7ad5da8b9bc82a0dd74">TrackPanel::DisplaySelection</a>();</div><div class="line">        <a class="code" href="class_adorned_ruler_panel.html#a85f502d7af3de69507aeb394177c12f6">AdornedRulerPanel::DrawIndicator</a>(); [not part <a class="code" href="rfft2d_test_m_l_8m.html#ad1fb8d92192e22cbe6298e4a2c65a711">of</a> <a class="code" href="class_track_panel.html">TrackPanel</a> graphics]</div><div class="line">        draw <a class="code" href="namespacewaflib_1_1_utils.html#a496439b70776ea74ef7305f1c411bf89">indicator</a> on each track</div><div class="line"><a class="code" href="class_track_panel.html#aff33f2fa5cda0ffb92a1dd41758e418c">TrackPanel::DoDrawCursor</a>();</div><div class="line">        draw cursor on each track  [at selectedRegion.t0()]</div><div class="line">        <a class="code" href="class_adorned_ruler_panel.html#a88db37689afaa4bf8311a9b79c6caf5d">AdornedRulerPanel::DrawCursor</a>(); [not part <a class="code" href="rfft2d_test_m_l_8m.html#ad1fb8d92192e22cbe6298e4a2c65a711">of</a> <a class="code" href="class_track_panel.html">TrackPanel</a> graphics]</div><div class="line">        <a class="code" href="class_track_panel.html#a1a3b533d6302e7ad5da8b9bc82a0dd74">TrackPanel::DisplaySelection</a>();</div></div><!-- fragment --><p>To move the indicator, <a class="el" href="class_track_panel.html#a8cddb063467280ce559807d31493b67a" title="AS: This gets called on our wx timer events. ">TrackPanel::OnTimer()</a> calls the following, using a drawing context (DC) for the screen. (Refresh is not called to create an OnPaint event. Instead, drawing is direct to the screen.) </p><div class="fragment"><div class="line">TrackPanel::DrawIndicator();</div><div class="line">        <a class="code" href="class_track_panel.html#a8ec4102237c8d4e852ef0f641712882d">TrackPanel::DoDrawIndicator</a>();</div></div><!-- fragment --><p>Notice that <a class="el" href="class_track_panel.html#a53b862fc7f4eb461445429ad6b28a81e">TrackPanel::DrawZooming()</a>, <a class="el" href="class_track_panel.html#ab579d3634b223e60ceed553cd41f4791" title="Draw a three-level highlight gradient around the focused track. ">TrackPanel::HighlightFocusedTrack()</a>, and snap guidelines could be drawn directly to the screen rather than to the bitmap, generally eliminating redraw work.</p>
<p>One problem is slider udpates. Sliders are in the left area of the track panel. They are not wxWindows like wxSliders, but instead are just drawn on the <a class="el" href="class_track_panel.html" title="The TrackPanel class coordinates updates and operations on the main part of the screen which contains...">TrackPanel</a>. When slider state changes, <em>all</em> tracks do a full refresh, including recomputing the backing store. It would make more sense to just invalidate the region containing the slider. However, doing that would require either incrementally updating the bitmap (not currently done), or maintaining the sliders and other track info on the screen and not in the bitmap.</p>
<p>In my opinion, the bitmap should contain only the waveform, note, and label images along with gray selection highlights. The track info (sliders, buttons, title, etc.), track selection highlight, cursor, and indicator should be drawn in the normal way, and clipping regions should be used to avoid excessive copying of bitmaps (say, when sliders move), or excessive redrawing of track info widgets (say, when scrolling occurs). This is a fairly tricky code change since it requires careful specification of what and where redraw should take place when any state changes. One surprising finding is that <a class="el" href="class_note_track.html" title="A Track that is used for Midi notes. (Somewhat old code). ">NoteTrack</a> display is slow compared to <a class="el" href="class_wave_track.html" title="A Track that contains audio waveform data. ">WaveTrack</a> display. Each note takes some time to gather attributes and select colors, and while audio draws two amplitudes per horizontal pixels, large MIDI scores can have more notes than horizontal pixels. This can make slider changes very sluggish, but this can also be a problem with many audio tracks. </p>

<p>Definition at line <a class="el" href="_track_artist_8h_source.html#l00047">47</a> of file <a class="el" href="_track_artist_8h_source.html">TrackArtist.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1523a85e9f5d5400bde1cd3e3fbf3413"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TrackArtist::TrackArtist </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00265">265</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5e33cdb8a68a1cd9a7381c6b93f4422f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TrackArtist::~TrackArtist </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00280">280</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa39e383c6894d3a72cd1783399288a19"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::DrawBackgroundWithSelection </td>
          <td>(</td>
          <td class="paramtype">wxDC *&#160;</td>
          <td class="paramname"><em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> wxRect &amp;&#160;</td>
          <td class="paramname"><em>rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *&#160;</td>
          <td class="paramname"><em>track</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxBrush &amp;&#160;</td>
          <td class="paramname"><em>selBrush</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxBrush &amp;&#160;</td>
          <td class="paramname"><em>unselBrush</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_selected_region.html">SelectedRegion</a> &amp;&#160;</td>
          <td class="paramname"><em>selectedRegion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_zoom_info.html">ZoomInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>zoomInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l03297">3297</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac1ed1e63b3e8682855f002a6696324bd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::DrawSyncLockTiles </td>
          <td>(</td>
          <td class="paramtype">wxDC *&#160;</td>
          <td class="paramname"><em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxRect&#160;</td>
          <td class="paramname"><em>rect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l03190">3190</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2dc63db7d889371b5f00be926b05c387"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::DrawTrack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxDC &amp;&#160;</td>
          <td class="paramname"><em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> wxRect &amp;&#160;</td>
          <td class="paramname"><em>rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_selected_region.html">SelectedRegion</a> &amp;&#160;</td>
          <td class="paramname"><em>selectedRegion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_zoom_info.html">ZoomInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>zoomInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>drawEnvelope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>bigPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>drawSliders</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>hasSolo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00441">441</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aecb43569c2de2e9e2cae4584ffd80a5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::DrawTracks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_track_list.html">TrackList</a> *&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_track.html">Track</a> *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxDC &amp;&#160;</td>
          <td class="paramname"><em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxRegion &amp;&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxRect &amp;&#160;</td>
          <td class="paramname"><em>rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxRect &amp;&#160;</td>
          <td class="paramname"><em>clip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_selected_region.html">SelectedRegion</a> &amp;&#160;</td>
          <td class="paramname"><em>selectedRegion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_zoom_info.html">ZoomInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>zoomInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>drawEnvelope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>bigPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mac_2config_2i386_2lib-src_2libsoxr_2soxr-config_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>drawSliders</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00319">319</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa5b19d1f05fa5297ed4a97c179a3b658"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::DrawVRuler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxDC *&#160;</td>
          <td class="paramname"><em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxRect &amp;&#160;</td>
          <td class="paramname"><em>rect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00509">509</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2977181091a49cb28e6644e8572ff0f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::SetBackgroundBrushes </td>
          <td>(</td>
          <td class="paramtype">wxBrush&#160;</td>
          <td class="paramname"><em>unselectedBrush</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxBrush&#160;</td>
          <td class="paramname"><em>selectedBrush</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxPen&#160;</td>
          <td class="paramname"><em>unselectedPen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxPen&#160;</td>
          <td class="paramname"><em>selectedPen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8h_source.html#l00074">74</a> of file <a class="el" href="_track_artist_8h_source.html">TrackArtist.h</a>.</p>

</div>
</div>
<a class="anchor" id="add49089e256d22507061e90e71841d0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::SetColours </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00285">285</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7f6b12455815aebb388d9731a85f5740"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::SetInset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a>&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a>&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a>&#160;</td>
          <td class="paramname"><em>right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="xmltok_8h.html#a5a0d4a5641ce434f1d23533f2b2e6653">int</a>&#160;</td>
          <td class="paramname"><em>bottom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00311">311</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a933ebde770fbf92ac754ea68b01c55b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::UpdatePrefs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l03171">3171</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a12b902fc290c08e21ce0646f21dae146"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sound_8c.html#ae35f5844602719cf66324f4de2a658b3">void</a> TrackArtist::UpdateVRuler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="getopt1_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="class_track.html">Track</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wxRect &amp;&#160;</td>
          <td class="paramname"><em>rect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_track_artist_8cpp_source.html#l00669">669</a> of file <a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/_dev/OpenU/Audacity/audacity/src/<a class="el" href="_track_artist_8h_source.html">TrackArtist.h</a></li>
<li>C:/_dev/OpenU/Audacity/audacity/src/<a class="el" href="_track_artist_8cpp_source.html">TrackArtist.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
