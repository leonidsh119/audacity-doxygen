<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Audacity: C:/_dev/OpenU/Audacity/audacity/lib-src/portaudio-v19/src/hostapi/asihpi/pa_linux_asihpi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Audacity
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ca5d775a60eb14feacb7e09cea182bb9.html">audacity</a></li><li class="navelem"><a class="el" href="dir_7eead044a7427418c190b82a89ee69fb.html">lib-src</a></li><li class="navelem"><a class="el" href="dir_eb9d242e5bf86b201cf7cddb28a6d3d0.html">portaudio-v19</a></li><li class="navelem"><a class="el" href="dir_469be20cbb6e17a9a4449fefa2808950.html">src</a></li><li class="navelem"><a class="el" href="dir_2a648f938f2c8ad181c648d492b306fc.html">hostapi</a></li><li class="navelem"><a class="el" href="dir_6195ad4be09468e216e1d750e7d22b85.html">asihpi</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pa_linux_asihpi.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Host API implementation supporting AudioScience cards via the Linux HPI interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;<a class="el" href="assert_8h_source.html">assert.h</a>&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;asihpi/hpi.h&gt;</code><br />
<code>#include &quot;<a class="el" href="portaudio_8h_source.html">portaudio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__util_8h_source.html">pa_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__unix__util_8h_source.html">pa_unix_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__allocation_8h_source.html">pa_allocation.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__hostapi_8h_source.html">pa_hostapi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__stream_8h_source.html">pa_stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__cpuload_8h_source.html">pa_cpuload.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__process_8h_source.html">pa_process.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__converters_8h_source.html">pa_converters.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pa__debugprint_8h_source.html">pa_debugprint.h</a>&quot;</code><br />
</div>
<p><a href="pa__linux__asihpi_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pa_asi_hpi_host_api_representation.html">PaAsiHpiHostApiRepresentation</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pa_asi_hpi_device_info.html">PaAsiHpiDeviceInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pa_asi_hpi_stream_component.html">PaAsiHpiStreamComponent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pa_asi_hpi_stream.html">PaAsiHpiStream</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pa_asi_hpi_stream_info.html">PaAsiHpiStreamInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1f91423a116e967bfd1e0bf686c48452"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a1f91423a116e967bfd1e0bf686c48452">PA_ENSURE_</a>(expr)</td></tr>
<tr class="separator:a1f91423a116e967bfd1e0bf686c48452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa80f1ff5c54e64e7a165b879030fabb1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#aa80f1ff5c54e64e7a165b879030fabb1">PA_UNLESS_</a>(expr,  paError)</td></tr>
<tr class="separator:aa80f1ff5c54e64e7a165b879030fabb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3166749a79c33dd5f5bcc2c94bad8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a1f3166749a79c33dd5f5bcc2c94bad8c">PA_ASIHPI_UNLESS_</a>(expr,  paError)</td></tr>
<tr class="separator:a1f3166749a79c33dd5f5bcc2c94bad8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc6c480e242083e83f787eb3cb81833"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a3bc6c480e242083e83f787eb3cb81833">PA_ASIHPI_REPORT_ERROR_</a>(hpiErrorCode)</td></tr>
<tr class="separator:a3bc6c480e242083e83f787eb3cb81833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebea7ce0e959421c271bea9c1985b95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#acebea7ce0e959421c271bea9c1985b95">PA_ASIHPI_AVAILABLE_FORMATS_</a>&#160;&#160;&#160;(<a class="el" href="portaudio_8h.html#a2f16d29916725b8791eae60ab9e0b081">paFloat32</a> | <a class="el" href="portaudio_8h.html#a6fea69f3d81b628288325c06310b2fcf">paInt32</a> | <a class="el" href="portaudio_8h.html#a7f891a0bd9e94a94a8f446c176b749e7">paInt24</a> | <a class="el" href="portaudio_8h.html#ab284f8e0a161d78ede863aec45461dbd">paInt16</a> | <a class="el" href="portaudio_8h.html#ad826044e4ffe7b16bf990803ab77df37">paUInt8</a>)</td></tr>
<tr class="separator:acebea7ce0e959421c271bea9c1985b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0737511ef6ce9aa8d588542d02fad5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#acf0737511ef6ce9aa8d588542d02fad5">PA_ASIHPI_USE_BBM_</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:acf0737511ef6ce9aa8d588542d02fad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66be6c722e2466a7c6eb3138f4bbea0b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a66be6c722e2466a7c6eb3138f4bbea0b">PA_ASIHPI_MIN_FRAMES_</a>&#160;&#160;&#160;1152</td></tr>
<tr class="separator:a66be6c722e2466a7c6eb3138f4bbea0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a844787c5015845c0601c0a396dbfaf56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a844787c5015845c0601c0a396dbfaf56">PA_ASIHPI_MIN_POLLING_INTERVAL_</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a844787c5015845c0601c0a396dbfaf56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af49eea0864132957170b3a4f05149ea0"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pa_asi_hpi_host_api_representation.html">PaAsiHpiHostApiRepresentation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#af49eea0864132957170b3a4f05149ea0">PaAsiHpiHostApiRepresentation</a></td></tr>
<tr class="separator:af49eea0864132957170b3a4f05149ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ff61cdfe8295b90cf086976941f9c3"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pa_asi_hpi_device_info.html">PaAsiHpiDeviceInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a98ff61cdfe8295b90cf086976941f9c3">PaAsiHpiDeviceInfo</a></td></tr>
<tr class="separator:a98ff61cdfe8295b90cf086976941f9c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c4f8b7d8089cacf9cef03aaf98d0fb"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45">PaAsiHpiStreamState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#ae2c4f8b7d8089cacf9cef03aaf98d0fb">PaAsiHpiStreamState</a></td></tr>
<tr class="separator:ae2c4f8b7d8089cacf9cef03aaf98d0fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa263b75175c6771cfa32d0ca7c564c87"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pa_asi_hpi_stream_component.html">PaAsiHpiStreamComponent</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#aa263b75175c6771cfa32d0ca7c564c87">PaAsiHpiStreamComponent</a></td></tr>
<tr class="separator:aa263b75175c6771cfa32d0ca7c564c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b2e9d97e26672a58ed4b71e153a912e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pa_asi_hpi_stream.html">PaAsiHpiStream</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a1b2e9d97e26672a58ed4b71e153a912e">PaAsiHpiStream</a></td></tr>
<tr class="separator:a1b2e9d97e26672a58ed4b71e153a912e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f82a2733de7e58bb4adf22f9e965ec3"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pa_asi_hpi_stream_info.html">PaAsiHpiStreamInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a1f82a2733de7e58bb4adf22f9e965ec3">PaAsiHpiStreamInfo</a></td></tr>
<tr class="separator:a1f82a2733de7e58bb4adf22f9e965ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a984c1b93fe39c6de0fbc20fff3f6ec45"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45">PaAsiHpiStreamState</a> { <a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be">paAsiHpiStoppedState</a> =0, 
<a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e">paAsiHpiActiveState</a> =1, 
<a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45a0188ca40210ba62871ac2224749185d1">paAsiHpiCallbackFinishedState</a> =2
 }</td></tr>
<tr class="separator:a984c1b93fe39c6de0fbc20fff3f6ec45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a35ba54c5bea6b14989d1de373b6961f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portaudio_8h.html#a4949e4a8ef9f9dbe8cbee414ce69841d">PaError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pa__linux__asihpi_8c.html#a35ba54c5bea6b14989d1de373b6961f1">PaAsiHpi_Initialize</a> (<a class="el" href="struct_pa_util_host_api_representation.html">PaUtilHostApiRepresentation</a> **hostApi, <a class="el" href="portaudio_8h.html#aeef6da084c57c70aa94be97411e19930">PaHostApiIndex</a> index)</td></tr>
<tr class="separator:a35ba54c5bea6b14989d1de373b6961f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Host API implementation supporting AudioScience cards via the Linux HPI interface. </p>
<h3>Overview</h3>
<p>This is a PortAudio implementation for the AudioScience HPI Audio API on the Linux platform. AudioScience makes a range of audio adapters customised for the broadcasting industry, with support for both Windows and Linux. More information on their products can be found on their website: </p><pre class="fragment">http://www.audioscience.com
</pre><p>Documentation for the HPI API can be found at: </p><pre class="fragment">http://www.audioscience.com/internet/download/sdk/hpi_usermanual_html/html/index.html
</pre><p>The Linux HPI driver itself (a kernel module + library) can be downloaded from: </p><pre class="fragment">http://www.audioscience.com/internet/download/linux_drivers.htm
</pre><h3>Implementation strategy</h3>
<p>Note* Ideally, AudioScience cards should be handled by the PortAudio ALSA implementation on Linux, as ALSA is the preferred Linux soundcard API. The existence of this host API implementation might therefore seem a bit flawed. Unfortunately, at the time of the creation of this implementation (June 2006), the PA ALSA implementation could not make use of the existing AudioScience ALSA driver. PA ALSA uses the "memory-mapped" (mmap) ALSA access mode to interact with the ALSA library, while the AudioScience ALSA driver only supports the "read-write" access mode. The appropriate solution to this problem is to add "read-write" support to PortAudio ALSA, thereby extending the range of soundcards it supports (AudioScience cards are not the only ones with this problem). Given the author's limited knowledge of ALSA and the simplicity of the HPI API, the second-best solution was born...</p>
<p>The following mapping between HPI and PA was followed: HPI subsystem =&gt; PortAudio host API HPI adapter =&gt; nothing specific HPI stream =&gt; PortAudio device</p>
<p>Each HPI stream is either input or output (not both), and can support different channel counts, sampling rates and sample formats. It is therefore a more natural fit to a PA device. A PA stream can therefore combine two HPI streams (one input and one output) into a "full-duplex" stream. These HPI streams can even be on different physical adapters. The two streams ought to be sample-synchronised when they reside on the same adapter, as most AudioScience adapters derive their ADC and DAC clocks from one master clock. When combining two adapters into one full-duplex stream, however, the use of a word clock connection between the adapters is strongly recommended.</p>
<p>The HPI interface is inherently blocking, making use of read and write calls to transfer data between user buffers and driver buffers. The callback interface therefore requires a helper thread ("callback engine") which periodically transfers data (one thread per PA stream, in fact). The current implementation explicitly sleeps via <a class="el" href="portaudio_8h.html#a1b3c20044c9401c42add29475636e83d">Pa_Sleep()</a> until enough samples can be transferred (select() or poll() would be better, but currently seems impossible...). The thread implementation makes use of the Unix thread helper functions and some pthread calls here and there. If a unified PA thread exists, this host API implementation might also compile on Windows, as this is the only real Linux-specific part of the code.</p>
<p>There is no inherent fixed buffer size in the HPI interface, as in some other host APIs. The PortAudio implementation contains a buffer that is allocated during OpenStream and used to transfer data between the callback and the HPI driver buffer. The size of this buffer is quite flexible and is derived from latency suggestions and matched to the requested callback buffer size as far as possible. It can become quite huge, as the AudioScience cards are typically geared towards higher-latency applications and contain large hardware buffers.</p>
<p>The HPI interface natively supports most common sample formats and sample rates (some conversion is done on the adapter itself).</p>
<p>Stream time is measured based on the number of processed frames, which is adjusted by the number of frames currently buffered by the HPI driver.</p>
<p>There is basic support for detecting overflow and underflow. The HPI interface does not explicitly indicate this, so thresholds on buffer levels are used in combination with stream state. Recovery from overflow and underflow is left to the PA client.</p>
<p>Blocking streams are also implemented. It makes use of the same polling routines that the callback interface uses, in order to prevent the allocation of variable-sized buffers during reading and writing. The framesPerBuffer parameter is therefore still relevant, and this can be increased in the blocking case to improve efficiency.</p>
<p>The implementation contains extensive reporting macros (slightly modified PA_ENSURE and PA_UNLESS versions) and a useful stream dump routine to provide debugging feedback.</p>
<p>Output buffer priming via the user callback (i.e. paPrimeOutputBuffersUsingStreamCallback and friends) is not implemented yet. All output is primed with silence. </p>

<p>Definition in file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="acebea7ce0e959421c271bea9c1985b95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_ASIHPI_AVAILABLE_FORMATS_&#160;&#160;&#160;(<a class="el" href="portaudio_8h.html#a2f16d29916725b8791eae60ab9e0b081">paFloat32</a> | <a class="el" href="portaudio_8h.html#a6fea69f3d81b628288325c06310b2fcf">paInt32</a> | <a class="el" href="portaudio_8h.html#a7f891a0bd9e94a94a8f446c176b749e7">paInt24</a> | <a class="el" href="portaudio_8h.html#ab284f8e0a161d78ede863aec45461dbd">paInt16</a> | <a class="el" href="portaudio_8h.html#ad826044e4ffe7b16bf990803ab77df37">paUInt8</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="struct_sample.html">Sample</a> formats available natively on AudioScience hardware </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00242">242</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a66be6c722e2466a7c6eb3138f4bbea0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_ASIHPI_MIN_FRAMES_&#160;&#160;&#160;1152</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimum number of frames in HPI buffer (for either data or available space). If buffer contains less data/space, it indicates xrun or completion. </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00247">247</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a844787c5015845c0601c0a396dbfaf56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_ASIHPI_MIN_POLLING_INTERVAL_&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimum polling interval in milliseconds, which determines minimum host buffer size </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00249">249</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3bc6c480e242083e83f787eb3cb81833"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_ASIHPI_REPORT_ERROR_</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hpiErrorCode</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">        char szError[256]; \</div><div class="line">        HPI_GetErrorText( hpiError, szError ); \</div><div class="line">        PA_DEBUG(( <span class="stringliteral">&quot;HPI error %d occurred: %s\n&quot;</span>, hpiError, szError )); \</div><div class="line">        <span class="comment">/* PaUtil_SetLastHostErrorInfo should only be used in the main thread */</span> \</div><div class="line">        if( pthread_equal( pthread_self(), <a class="code" href="pa__unix__util_8c.html#a786fbebfd9d315bc39dec32568a4dfe1">paUnixMainThread</a> ) ) \</div><div class="line">    { \</div><div class="line">        PaUtil_SetLastHostErrorInfo( <a class="code" href="portaudio_8h.html#a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d">paInDevelopment</a>, (hpiErrorCode), szError ); \</div><div class="line">    } \</div><div class="line">    } <span class="keywordflow">while</span>( 0 );</div><div class="ttc" id="pa__unix__util_8c_html_a786fbebfd9d315bc39dec32568a4dfe1"><div class="ttname"><a href="pa__unix__util_8c.html#a786fbebfd9d315bc39dec32568a4dfe1">paUnixMainThread</a></div><div class="ttdeci">pthread_t paUnixMainThread</div><div class="ttdef"><b>Definition:</b> <a href="pa__unix__util_8c_source.html#l00236">pa_unix_util.c:236</a></div></div>
<div class="ttc" id="portaudio_8h_html_a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d"><div class="ttname"><a href="portaudio_8h.html#a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d">paInDevelopment</a></div><div class="ttdef"><b>Definition:</b> <a href="portaudio_8h_source.html#l00260">portaudio.h:260</a></div></div>
</div><!-- fragment --><p>Report HPI error code and text </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00227">227</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1f3166749a79c33dd5f5bcc2c94bad8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_ASIHPI_UNLESS_</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">expr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">paError&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">        hpi_err_t hpiError = (expr); \</div><div class="line">        <span class="comment">/* If HPI error occurred */</span> \</div><div class="line">        if( <a class="code" href="pa__unix__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a>( hpiError ) ) \</div><div class="line">        { \</div><div class="line">        char szError[256]; \</div><div class="line">        HPI_GetErrorText( hpiError, szError ); \</div><div class="line">        PA_DEBUG(( <span class="stringliteral">&quot;HPI error %d occurred: %s\n&quot;</span>, hpiError, szError )); \</div><div class="line">        <span class="comment">/* This message will always be displayed, even if debug info is disabled */</span> \</div><div class="line">            PA_DEBUG(( <span class="stringliteral">&quot;Expression &#39;&quot;</span> #expr <span class="stringliteral">&quot;&#39; failed in &#39;&quot;</span> __FILE__ <span class="stringliteral">&quot;&#39;, line: &quot;</span> <a class="code" href="pa__jack_8c.html#a8fdb5acc9bc207e117671b79ddf1df0f">STRINGIZE</a>( __LINE__ ) <span class="stringliteral">&quot;\n&quot;</span> )); \</div><div class="line">            if( (paError) == <a class="code" href="portaudio_8h.html#a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0">paUnanticipatedHostError</a> ) \</div><div class="line">        { \</div><div class="line">            PA_DEBUG(( <span class="stringliteral">&quot;Host error description: %s\n&quot;</span>, szError )); \</div><div class="line">            <span class="comment">/* PaUtil_SetLastHostErrorInfo should only be used in the main thread */</span> \</div><div class="line">            if( pthread_equal( pthread_self(), <a class="code" href="pa__unix__util_8c.html#a786fbebfd9d315bc39dec32568a4dfe1">paUnixMainThread</a> ) ) \</div><div class="line">                { \</div><div class="line">            PaUtil_SetLastHostErrorInfo( <a class="code" href="portaudio_8h.html#a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d">paInDevelopment</a>, hpiError, szError ); \</div><div class="line">                } \</div><div class="line">        } \</div><div class="line">        <span class="comment">/* If paNoError is specified, continue as usual */</span> \</div><div class="line">            <span class="comment">/* (useful if you only want to print out the debug messages above) */</span> \</div><div class="line">        if( (paError) &lt; 0 ) \</div><div class="line">        { \</div><div class="line">            result = (paError); \</div><div class="line">            goto <a class="code" href="sndfile__load_8m.html#a3a81ee160b23b01b04b7c08b35123218">error</a>; \</div><div class="line">        } \</div><div class="line">        } \</div><div class="line">    } <span class="keywordflow">while</span>( 0 );</div><div class="ttc" id="pa__unix__util_8h_html_a9acc330d508b9a3b775cfdf7ce405e7d"><div class="ttname"><a href="pa__unix__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(expr)</div><div class="ttdef"><b>Definition:</b> <a href="pa__unix__util_8h_source.html#l00064">pa_unix_util.h:64</a></div></div>
<div class="ttc" id="sndfile__load_8m_html_a3a81ee160b23b01b04b7c08b35123218"><div class="ttname"><a href="sndfile__load_8m.html#a3a81ee160b23b01b04b7c08b35123218">error</a></div><div class="ttdeci">error(&quot;Need an input filename&quot;)</div></div>
<div class="ttc" id="portaudio_8h_html_a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0"><div class="ttname"><a href="portaudio_8h.html#a2e45bf8b5145f131a91c128af2bdaec7a47726071f5dccc656d5e3ff20bbfc5a0">paUnanticipatedHostError</a></div><div class="ttdef"><b>Definition:</b> <a href="portaudio_8h_source.html#l00110">portaudio.h:110</a></div></div>
<div class="ttc" id="pa__unix__util_8c_html_a786fbebfd9d315bc39dec32568a4dfe1"><div class="ttname"><a href="pa__unix__util_8c.html#a786fbebfd9d315bc39dec32568a4dfe1">paUnixMainThread</a></div><div class="ttdeci">pthread_t paUnixMainThread</div><div class="ttdef"><b>Definition:</b> <a href="pa__unix__util_8c_source.html#l00236">pa_unix_util.c:236</a></div></div>
<div class="ttc" id="portaudio_8h_html_a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d"><div class="ttname"><a href="portaudio_8h.html#a8eaebe3d39c5ea45598da8f86dc2e5aea6d01a3fac7c228e8481efd5fd269f26d">paInDevelopment</a></div><div class="ttdef"><b>Definition:</b> <a href="portaudio_8h_source.html#l00260">portaudio.h:260</a></div></div>
<div class="ttc" id="pa__jack_8c_html_a8fdb5acc9bc207e117671b79ddf1df0f"><div class="ttname"><a href="pa__jack_8c.html#a8fdb5acc9bc207e117671b79ddf1df0f">STRINGIZE</a></div><div class="ttdeci">#define STRINGIZE(expr)</div><div class="ttdef"><b>Definition:</b> <a href="pa__jack_8c_source.html#l00091">pa_jack.c:91</a></div></div>
</div><!-- fragment --><p>Check return value of HPI function, and map it to PaError </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00196">196</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="acf0737511ef6ce9aa8d588542d02fad5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_ASIHPI_USE_BBM_&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable background bus mastering (BBM) for buffer transfers, if available (see HPI docs) </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00244">244</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1f91423a116e967bfd1e0bf686c48452"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_ENSURE_</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">expr</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">        PaError paError = (expr); \</div><div class="line">        if( <a class="code" href="pa__unix__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a>( paError &lt; <a class="code" href="portaudio_8h.html#a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba">paNoError</a> ) ) \</div><div class="line">        { \</div><div class="line">            PA_DEBUG(( <span class="stringliteral">&quot;Expression &#39;&quot;</span> #expr <span class="stringliteral">&quot;&#39; failed in &#39;&quot;</span> __FILE__ <span class="stringliteral">&quot;&#39;, line: &quot;</span> <a class="code" href="pa__jack_8c.html#a8fdb5acc9bc207e117671b79ddf1df0f">STRINGIZE</a>( __LINE__ ) <span class="stringliteral">&quot;\n&quot;</span> )); \</div><div class="line">            result = paError; \</div><div class="line">            goto <a class="code" href="sndfile__load_8m.html#a3a81ee160b23b01b04b7c08b35123218">error</a>; \</div><div class="line">        } \</div><div class="line">    } <span class="keywordflow">while</span> (0);</div><div class="ttc" id="pa__unix__util_8h_html_a9acc330d508b9a3b775cfdf7ce405e7d"><div class="ttname"><a href="pa__unix__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(expr)</div><div class="ttdef"><b>Definition:</b> <a href="pa__unix__util_8h_source.html#l00064">pa_unix_util.h:64</a></div></div>
<div class="ttc" id="sndfile__load_8m_html_a3a81ee160b23b01b04b7c08b35123218"><div class="ttname"><a href="sndfile__load_8m.html#a3a81ee160b23b01b04b7c08b35123218">error</a></div><div class="ttdeci">error(&quot;Need an input filename&quot;)</div></div>
<div class="ttc" id="portaudio_8h_html_a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba"><div class="ttname"><a href="portaudio_8h.html#a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba">paNoError</a></div><div class="ttdef"><b>Definition:</b> <a href="portaudio_8h_source.html#l00107">portaudio.h:107</a></div></div>
<div class="ttc" id="pa__jack_8c_html_a8fdb5acc9bc207e117671b79ddf1df0f"><div class="ttname"><a href="pa__jack_8c.html#a8fdb5acc9bc207e117671b79ddf1df0f">STRINGIZE</a></div><div class="ttdeci">#define STRINGIZE(expr)</div><div class="ttdef"><b>Definition:</b> <a href="pa__jack_8c_source.html#l00091">pa_jack.c:91</a></div></div>
</div><!-- fragment --><p>Evaluate expression, and return on any PortAudio errors </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00173">173</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa80f1ff5c54e64e7a165b879030fabb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PA_UNLESS_</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">expr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">paError&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">        if( <a class="code" href="pa__unix__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a>( (expr) == 0 ) ) \</div><div class="line">        { \</div><div class="line">            PA_DEBUG(( <span class="stringliteral">&quot;Expression &#39;&quot;</span> #expr <span class="stringliteral">&quot;&#39; failed in &#39;&quot;</span> __FILE__ <span class="stringliteral">&quot;&#39;, line: &quot;</span> <a class="code" href="pa__jack_8c.html#a8fdb5acc9bc207e117671b79ddf1df0f">STRINGIZE</a>( __LINE__ ) <span class="stringliteral">&quot;\n&quot;</span> )); \</div><div class="line">            result = (paError); \</div><div class="line">            goto <a class="code" href="sndfile__load_8m.html#a3a81ee160b23b01b04b7c08b35123218">error</a>; \</div><div class="line">        } \</div><div class="line">    } <span class="keywordflow">while</span>( 0 );</div><div class="ttc" id="pa__unix__util_8h_html_a9acc330d508b9a3b775cfdf7ce405e7d"><div class="ttname"><a href="pa__unix__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(expr)</div><div class="ttdef"><b>Definition:</b> <a href="pa__unix__util_8h_source.html#l00064">pa_unix_util.h:64</a></div></div>
<div class="ttc" id="sndfile__load_8m_html_a3a81ee160b23b01b04b7c08b35123218"><div class="ttname"><a href="sndfile__load_8m.html#a3a81ee160b23b01b04b7c08b35123218">error</a></div><div class="ttdeci">error(&quot;Need an input filename&quot;)</div></div>
<div class="ttc" id="pa__jack_8c_html_a8fdb5acc9bc207e117671b79ddf1df0f"><div class="ttname"><a href="pa__jack_8c.html#a8fdb5acc9bc207e117671b79ddf1df0f">STRINGIZE</a></div><div class="ttdeci">#define STRINGIZE(expr)</div><div class="ttdef"><b>Definition:</b> <a href="pa__jack_8c_source.html#l00091">pa_jack.c:91</a></div></div>
</div><!-- fragment --><p>Assert expression, else return the provided PaError </p>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00185">185</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a98ff61cdfe8295b90cf086976941f9c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pa_asi_hpi_device_info.html">PaAsiHpiDeviceInfo</a>
 <a class="el" href="struct_pa_asi_hpi_device_info.html">PaAsiHpiDeviceInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Device data </p>

</div>
</div>
<a class="anchor" id="af49eea0864132957170b3a4f05149ea0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pa_asi_hpi_host_api_representation.html">PaAsiHpiHostApiRepresentation</a>
 <a class="el" href="struct_pa_asi_hpi_host_api_representation.html">PaAsiHpiHostApiRepresentation</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Host API global data </p>

</div>
</div>
<a class="anchor" id="a1b2e9d97e26672a58ed4b71e153a912e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pa_asi_hpi_stream.html">PaAsiHpiStream</a>
 <a class="el" href="struct_pa_asi_hpi_stream.html">PaAsiHpiStream</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream data </p>

</div>
</div>
<a class="anchor" id="aa263b75175c6771cfa32d0ca7c564c87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pa_asi_hpi_stream_component.html">PaAsiHpiStreamComponent</a>
 <a class="el" href="struct_pa_asi_hpi_stream_component.html">PaAsiHpiStreamComponent</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream component data (associated with one direction, i.e. either input or output) </p>

</div>
</div>
<a class="anchor" id="a1f82a2733de7e58bb4adf22f9e965ec3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pa_asi_hpi_stream_info.html">PaAsiHpiStreamInfo</a>
 <a class="el" href="struct_pa_asi_hpi_stream_info.html">PaAsiHpiStreamInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream state information, collected together for convenience </p>

</div>
</div>
<a class="anchor" id="ae2c4f8b7d8089cacf9cef03aaf98d0fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45">PaAsiHpiStreamState</a>
 <a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45">PaAsiHpiStreamState</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream state as defined by PortAudio. It seems that the host API implementation has to keep track of the PortAudio stream state. Please note that this is NOT the same as the state of the underlying HPI stream. By separating these two concepts, a lot of flexibility is gained. There is a rough match between the two, of course, but forcing a precise match is difficult. For example, HPI_STATE_DRAINED can occur during the Active state of PortAudio (due to underruns) and also during CallBackFinished in the case of an output stream. Similarly, HPI_STATE_STOPPED mostly coincides with the Stopped PortAudio state, by may also occur in the CallbackFinished state when recording is finished.</p>
<p>Here is a rough match-up:</p>
<p>PortAudio state =&gt; HPI state </p><hr/>
<p> Active =&gt; HPI_STATE_RECORDING, HPI_STATE_PLAYING, (HPI_STATE_DRAINED) Stopped =&gt; HPI_STATE_STOPPED CallbackFinished =&gt; HPI_STATE_STOPPED, HPI_STATE_DRAINED </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a984c1b93fe39c6de0fbc20fff3f6ec45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pa__linux__asihpi_8c.html#a984c1b93fe39c6de0fbc20fff3f6ec45">PaAsiHpiStreamState</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream state as defined by PortAudio. It seems that the host API implementation has to keep track of the PortAudio stream state. Please note that this is NOT the same as the state of the underlying HPI stream. By separating these two concepts, a lot of flexibility is gained. There is a rough match between the two, of course, but forcing a precise match is difficult. For example, HPI_STATE_DRAINED can occur during the Active state of PortAudio (due to underruns) and also during CallBackFinished in the case of an output stream. Similarly, HPI_STATE_STOPPED mostly coincides with the Stopped PortAudio state, by may also occur in the CallbackFinished state when recording is finished.</p>
<p>Here is a rough match-up:</p>
<p>PortAudio state =&gt; HPI state </p><hr/>
<p> Active =&gt; HPI_STATE_RECORDING, HPI_STATE_PLAYING, (HPI_STATE_DRAINED) Stopped =&gt; HPI_STATE_STOPPED CallbackFinished =&gt; HPI_STATE_STOPPED, HPI_STATE_DRAINED </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a984c1b93fe39c6de0fbc20fff3f6ec45a0c31ed3930c0d25d68ed82e06273f9be"></a>paAsiHpiStoppedState&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a984c1b93fe39c6de0fbc20fff3f6ec45a3d86790040fb5570cb955a9bec1a288e"></a>paAsiHpiActiveState&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a984c1b93fe39c6de0fbc20fff3f6ec45a0188ca40210ba62871ac2224749185d1"></a>paAsiHpiCallbackFinishedState&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00315">315</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a35ba54c5bea6b14989d1de373b6961f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portaudio_8h.html#a4949e4a8ef9f9dbe8cbee414ce69841d">PaError</a> PaAsiHpi_Initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pa_util_host_api_representation.html">PaUtilHostApiRepresentation</a> **&#160;</td>
          <td class="paramname"><em>hostApi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portaudio_8h.html#aeef6da084c57c70aa94be97411e19930">PaHostApiIndex</a>&#160;</td>
          <td class="paramname"><em>hostApiIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize host API implementation. This is the only function exported beyond this file. It is called by PortAudio to initialize the host API. It stores API info, finds and registers all devices, and sets up callback and blocking interfaces.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hostApi</td><td>Pointer to host API struct</td></tr>
    <tr><td class="paramname">hostApiIndex</td><td>Index of current (HPI) host API</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PortAudio error code </dd></dl>

<p>Definition at line <a class="el" href="pa__linux__asihpi_8c_source.html#l00727">727</a> of file <a class="el" href="pa__linux__asihpi_8c_source.html">pa_linux_asihpi.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
